<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Canvas Visibility Fix - Test</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        h1 {
            color: #1976d2;
            text-align: center;
            margin-bottom: 30px;
        }
        .layout-demo {
            border: 2px solid #1976d2;
            border-radius: 8px;
            height: 600px;
            display: flex;
            flex-direction: column;
            overflow: hidden;
            background: #f8f9fa;
        }
        .demo-header {
            background: linear-gradient(135deg, #1976d2 0%, #1565c0 100%);
            color: white;
            padding: 12px 20px;
            flex-shrink: 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .demo-content {
            display: flex;
            flex: 1;
            overflow: hidden;
            min-height: 0;
        }
        .demo-sidebar {
            width: 300px;
            background: white;
            border-right: 2px solid #e3f2fd;
            overflow-y: auto;
            padding: 15px;
            flex-shrink: 0;
        }
        .demo-canvas-container {
            flex: 1;
            display: flex;
            flex-direction: column;
            background: #fafafa;
            overflow: hidden;
            min-height: 0;
        }
        .demo-canvas-toolbar {
            padding: 10px 15px;
            background: white;
            border-bottom: 1px solid #e0e0e0;
            flex-shrink: 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .demo-canvas-wrapper {
            flex: 1;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: auto;
            padding: 15px;
            min-height: 0;
            background: #fafafa;
        }
        .demo-canvas {
            border: 2px solid #ddd;
            background: white;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            display: block;
            max-width: 100%;
            max-height: 100%;
        }
        .demo-footer {
            padding: 12px 20px;
            background: white;
            border-top: 2px solid #e3f2fd;
            flex-shrink: 0;
            max-height: 120px;
            overflow-y: auto;
        }
        .fix-list {
            background: #e8f5e8;
            padding: 20px;
            border-radius: 8px;
            border-left: 4px solid #4caf50;
            margin: 20px 0;
        }
        .fix-list h3 {
            color: #2e7d32;
            margin-top: 0;
        }
        .fix-list ul {
            color: #2e7d32;
            line-height: 1.6;
        }
        .before-after {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 20px 0;
        }
        .before, .after {
            padding: 15px;
            border-radius: 8px;
            border: 2px solid;
        }
        .before {
            background: #ffebee;
            border-color: #f44336;
        }
        .after {
            background: #e8f5e8;
            border-color: #4caf50;
        }
        .before h4 {
            color: #f44336;
            margin-top: 0;
        }
        .after h4 {
            color: #4caf50;
            margin-top: 0;
        }
        .code-block {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 4px;
            padding: 15px;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
            margin: 10px 0;
            overflow-x: auto;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üéØ Canvas Visibility Fix</h1>
        
        <div class="fix-list">
            <h3>‚úÖ Applied Fixes</h3>
            <ul>
                <li><strong>Canvas Container Height:</strong> Added min-height: 600px and height: 100%</li>
                <li><strong>Drawer Content Height:</strong> Set height: calc(100vh - 140px) to account for header/footer</li>
                <li><strong>Canvas Wrapper:</strong> Added min-height: 0 and proper flex properties</li>
                <li><strong>Canvas Size:</strong> Reduced from 900x700 to 800x550 for better fit</li>
                <li><strong>Footer Compact:</strong> Limited max-height to 200px with scroll</li>
                <li><strong>Responsive Canvas:</strong> Different sizes for different screen widths</li>
            </ul>
        </div>

        <div class="before-after">
            <div class="before">
                <h4>‚ùå Before (Issues)</h4>
                <ul>
                    <li>Canvas hidden behind other elements</li>
                    <li>No minimum height constraints</li>
                    <li>Footer taking too much space</li>
                    <li>Canvas too large for container</li>
                    <li>Poor responsive behavior</li>
                </ul>
            </div>
            <div class="after">
                <h4>‚úÖ After (Fixed)</h4>
                <ul>
                    <li>Canvas fully visible and accessible</li>
                    <li>Proper height distribution</li>
                    <li>Compact, scrollable footer</li>
                    <li>Responsive canvas sizing</li>
                    <li>Better mobile layout</li>
                </ul>
            </div>
        </div>

        <h2>üìê Layout Demo</h2>
        <div class="layout-demo">
            <div class="demo-header">
                <div>House Plan Drawer - Fixed Layout</div>
                <div style="font-size: 0.9rem;">Header: 60px height</div>
            </div>
            
            <div class="demo-content">
                <div class="demo-sidebar">
                    <h4 style="color: #1976d2; margin: 0 0 15px 0;">üõ†Ô∏è Tools Panel</h4>
                    <p style="color: #666; font-size: 0.9rem;">Width: 380px (fixed)<br>Height: 100% of content area<br>Scrollable when needed</p>
                    
                    <div style="background: #f0f0f0; padding: 10px; border-radius: 4px; margin: 10px 0;">
                        <small>Room Templates</small>
                    </div>
                    <div style="background: #f0f0f0; padding: 10px; border-radius: 4px; margin: 10px 0;">
                        <small>Measurements</small>
                    </div>
                    <div style="background: #f0f0f0; padding: 10px; border-radius: 4px; margin: 10px 0;">
                        <small>Properties</small>
                    </div>
                </div>
                
                <div class="demo-canvas-container">
                    <div class="demo-canvas-toolbar">
                        <div style="font-size: 0.9rem; color: #666;">Canvas Toolbar: Plot info & controls</div>
                        <div style="font-size: 0.8rem; color: #999;">Height: 40px</div>
                    </div>
                    
                    <div class="demo-canvas-wrapper">
                        <canvas class="demo-canvas" width="600" height="400" style="background: linear-gradient(45deg, #f0f0f0 25%, transparent 25%), linear-gradient(-45deg, #f0f0f0 25%, transparent 25%), linear-gradient(45deg, transparent 75%, #f0f0f0 75%), linear-gradient(-45deg, transparent 75%, #f0f0f0 75%); background-size: 20px 20px; background-position: 0 0, 0 10px, 10px -10px, -10px 0px;">
                        </canvas>
                        <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); background: rgba(25, 118, 210, 0.9); color: white; padding: 15px 20px; border-radius: 6px; font-weight: 600;">
                            Canvas: 800x550px<br>
                            <small style="opacity: 0.9;">Fully visible & interactive</small>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="demo-footer">
                <div style="font-size: 0.9rem; color: #1976d2; font-weight: 600; margin-bottom: 8px;">üìù Footer: Max 200px height</div>
                <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 8px;">
                    <div style="background: #f8f9fa; padding: 8px; border-radius: 4px; text-align: center; font-size: 0.8rem;">
                        <div style="color: #1976d2; font-weight: 600;">Plot</div>
                        <div>1200 sq ft</div>
                    </div>
                    <div style="background: #f8f9fa; padding: 8px; border-radius: 4px; text-align: center; font-size: 0.8rem;">
                        <div style="color: #1976d2; font-weight: 600;">Layout</div>
                        <div>856 sq ft</div>
                    </div>
                    <div style="background: #f8f9fa; padding: 8px; border-radius: 4px; text-align: center; font-size: 0.8rem;">
                        <div style="color: #1976d2; font-weight: 600;">Construction</div>
                        <div>1027 sq ft</div>
                    </div>
                    <div style="background: #f8f9fa; padding: 8px; border-radius: 4px; text-align: center; font-size: 0.8rem;">
                        <div style="color: #1976d2; font-weight: 600;">Coverage</div>
                        <div>85.6%</div>
                    </div>
                </div>
            </div>
        </div>

        <h2>üîß Technical Changes</h2>
        
        <h3>CSS Changes:</h3>
        <div class="code-block">
.canvas-container {
  flex: 1;
  min-height: 600px; /* ‚úÖ Ensure minimum height */
  height: 100%; /* ‚úÖ Take full available height */
}

.drawer-content {
  height: calc(100vh - 140px); /* ‚úÖ Account for header/footer */
}

.canvas-wrapper {
  min-height: 0; /* ‚úÖ Allow flex shrinking */
  max-width: 100%;
  max-height: 100%;
}

.drawer-footer {
  max-height: 200px; /* ‚úÖ Limit footer height */
  overflow-y: auto;
}
        </div>

        <h3>Canvas Size Changes:</h3>
        <div class="code-block">
// Before: 900x700 (too large)
&lt;canvas width="900" height="700" /&gt;

// After: 800x550 (better fit)
&lt;canvas width="800" height="550" /&gt;

// Responsive sizes:
// 1400px+: 800x550
// 1200px+: 700x500  
// 768px+:  600x450
// Mobile:  500x400
        </div>

        <div style="background: #e3f2fd; padding: 20px; border-radius: 8px; border-left: 4px solid #1976d2; margin-top: 30px;">
            <h3 style="color: #1976d2; margin-top: 0;">üéØ Result</h3>
            <p style="color: #666; line-height: 1.6; margin-bottom: 0;">
                The canvas is now fully visible and properly sized within its container. The layout uses proper flex properties 
                to ensure the canvas gets the space it needs while keeping the header and footer compact and functional.
            </p>
        </div>
    </div>

    <script>
        // Draw a simple grid pattern on the demo canvas
        const canvas = document.querySelector('.demo-canvas');
        const ctx = canvas.getContext('2d');
        
        // Draw grid
        ctx.strokeStyle = '#e0e0e0';
        ctx.lineWidth = 1;
        
        for (let x = 0; x <= canvas.width; x += 20) {
            ctx.beginPath();
            ctx.moveTo(x, 0);
            ctx.lineTo(x, canvas.height);
            ctx.stroke();
        }
        
        for (let y = 0; y <= canvas.height; y += 20) {
            ctx.beginPath();
            ctx.moveTo(0, y);
            ctx.lineTo(canvas.width, y);
            ctx.stroke();
        }
        
        // Draw a sample room
        ctx.fillStyle = '#e3f2fd';
        ctx.fillRect(100, 100, 160, 120);
        ctx.strokeStyle = '#1976d2';
        ctx.lineWidth = 2;
        ctx.strokeRect(100, 100, 160, 120);
        
        ctx.fillStyle = '#1976d2';
        ctx.font = '14px Arial';
        ctx.textAlign = 'center';
        ctx.fillText('Living Room', 180, 155);
        ctx.fillText('16\' √ó 12\'', 180, 175);
    </script>
</body>
</html>