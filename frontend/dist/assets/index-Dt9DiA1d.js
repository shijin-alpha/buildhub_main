(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const d of l.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&i(d)}).observe(document,{childList:!0,subtree:!0});function s(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(o){if(o.ep)return;o.ep=!0;const l=s(o);fetch(o.href,l)}})();var nE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Pb(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var $m={exports:{}},EA={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zy;function p2(){if(Zy)return EA;Zy=1;var t=Symbol.for("react.transitional.element"),a=Symbol.for("react.fragment");function s(i,o,l){var d=null;if(l!==void 0&&(d=""+l),o.key!==void 0&&(d=""+o.key),"key"in o){l={};for(var u in o)u!=="key"&&(l[u]=o[u])}else l=o;return o=l.ref,{$$typeof:t,type:i,key:d,ref:o!==void 0?o:null,props:l}}return EA.Fragment=a,EA.jsx=s,EA.jsxs=s,EA}var e0;function m2(){return e0||(e0=1,$m.exports=p2()),$m.exports}var e=m2(),Wm={exports:{}},Wa={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var t0;function f2(){if(t0)return Wa;t0=1;var t=Symbol.for("react.transitional.element"),a=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),d=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),b=Symbol.iterator;function v($){return $===null||typeof $!="object"?null:($=b&&$[b]||$["@@iterator"],typeof $=="function"?$:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C=Object.assign,D={};function S($,ue,k){this.props=$,this.context=ue,this.refs=D,this.updater=k||x}S.prototype.isReactComponent={},S.prototype.setState=function($,ue){if(typeof $!="object"&&typeof $!="function"&&$!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,$,ue,"setState")},S.prototype.forceUpdate=function($){this.updater.enqueueForceUpdate(this,$,"forceUpdate")};function _(){}_.prototype=S.prototype;function N($,ue,k){this.props=$,this.context=ue,this.refs=D,this.updater=k||x}var O=N.prototype=new _;O.constructor=N,C(O,S.prototype),O.isPureReactComponent=!0;var L=Array.isArray,te={H:null,A:null,T:null,S:null,V:null},G=Object.prototype.hasOwnProperty;function X($,ue,k,I,H,re){return k=re.ref,{$$typeof:t,type:$,key:ue,ref:k!==void 0?k:null,props:re}}function U($,ue){return X($.type,ue,void 0,void 0,void 0,$.props)}function E($){return typeof $=="object"&&$!==null&&$.$$typeof===t}function Y($){var ue={"=":"=0",":":"=2"};return"$"+$.replace(/[=:]/g,function(k){return ue[k]})}var T=/\/+/g;function Q($,ue){return typeof $=="object"&&$!==null&&$.key!=null?Y(""+$.key):ue.toString(36)}function q(){}function ne($){switch($.status){case"fulfilled":return $.value;case"rejected":throw $.reason;default:switch(typeof $.status=="string"?$.then(q,q):($.status="pending",$.then(function(ue){$.status==="pending"&&($.status="fulfilled",$.value=ue)},function(ue){$.status==="pending"&&($.status="rejected",$.reason=ue)})),$.status){case"fulfilled":return $.value;case"rejected":throw $.reason}}throw $}function R($,ue,k,I,H){var re=typeof $;(re==="undefined"||re==="boolean")&&($=null);var J=!1;if($===null)J=!0;else switch(re){case"bigint":case"string":case"number":J=!0;break;case"object":switch($.$$typeof){case t:case a:J=!0;break;case m:return J=$._init,R(J($._payload),ue,k,I,H)}}if(J)return H=H($),J=I===""?"."+Q($,0):I,L(H)?(k="",J!=null&&(k=J.replace(T,"$&/")+"/"),R(H,ue,k,"",function(K){return K})):H!=null&&(E(H)&&(H=U(H,k+(H.key==null||$&&$.key===H.key?"":(""+H.key).replace(T,"$&/")+"/")+J)),ue.push(H)),1;J=0;var V=I===""?".":I+":";if(L($))for(var oe=0;oe<$.length;oe++)I=$[oe],re=V+Q(I,oe),J+=R(I,ue,k,re,H);else if(oe=v($),typeof oe=="function")for($=oe.call($),oe=0;!(I=$.next()).done;)I=I.value,re=V+Q(I,oe++),J+=R(I,ue,k,re,H);else if(re==="object"){if(typeof $.then=="function")return R(ne($),ue,k,I,H);throw ue=String($),Error("Objects are not valid as a React child (found: "+(ue==="[object Object]"?"object with keys {"+Object.keys($).join(", ")+"}":ue)+"). If you meant to render a collection of children, use an array instead.")}return J}function z($,ue,k){if($==null)return $;var I=[],H=0;return R($,I,"","",function(re){return ue.call(k,re,H++)}),I}function ee($){if($._status===-1){var ue=$._result;ue=ue(),ue.then(function(k){($._status===0||$._status===-1)&&($._status=1,$._result=k)},function(k){($._status===0||$._status===-1)&&($._status=2,$._result=k)}),$._status===-1&&($._status=0,$._result=ue)}if($._status===1)return $._result.default;throw $._result}var le=typeof reportError=="function"?reportError:function($){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ue=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof $=="object"&&$!==null&&typeof $.message=="string"?String($.message):String($),error:$});if(!window.dispatchEvent(ue))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",$);return}console.error($)};function Be(){}return Wa.Children={map:z,forEach:function($,ue,k){z($,function(){ue.apply(this,arguments)},k)},count:function($){var ue=0;return z($,function(){ue++}),ue},toArray:function($){return z($,function(ue){return ue})||[]},only:function($){if(!E($))throw Error("React.Children.only expected to receive a single React element child.");return $}},Wa.Component=S,Wa.Fragment=s,Wa.Profiler=o,Wa.PureComponent=N,Wa.StrictMode=i,Wa.Suspense=A,Wa.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=te,Wa.__COMPILER_RUNTIME={__proto__:null,c:function($){return te.H.useMemoCache($)}},Wa.cache=function($){return function(){return $.apply(null,arguments)}},Wa.cloneElement=function($,ue,k){if($==null)throw Error("The argument must be a React element, but you passed "+$+".");var I=C({},$.props),H=$.key,re=void 0;if(ue!=null)for(J in ue.ref!==void 0&&(re=void 0),ue.key!==void 0&&(H=""+ue.key),ue)!G.call(ue,J)||J==="key"||J==="__self"||J==="__source"||J==="ref"&&ue.ref===void 0||(I[J]=ue[J]);var J=arguments.length-2;if(J===1)I.children=k;else if(1<J){for(var V=Array(J),oe=0;oe<J;oe++)V[oe]=arguments[oe+2];I.children=V}return X($.type,H,void 0,void 0,re,I)},Wa.createContext=function($){return $={$$typeof:d,_currentValue:$,_currentValue2:$,_threadCount:0,Provider:null,Consumer:null},$.Provider=$,$.Consumer={$$typeof:l,_context:$},$},Wa.createElement=function($,ue,k){var I,H={},re=null;if(ue!=null)for(I in ue.key!==void 0&&(re=""+ue.key),ue)G.call(ue,I)&&I!=="key"&&I!=="__self"&&I!=="__source"&&(H[I]=ue[I]);var J=arguments.length-2;if(J===1)H.children=k;else if(1<J){for(var V=Array(J),oe=0;oe<J;oe++)V[oe]=arguments[oe+2];H.children=V}if($&&$.defaultProps)for(I in J=$.defaultProps,J)H[I]===void 0&&(H[I]=J[I]);return X($,re,void 0,void 0,null,H)},Wa.createRef=function(){return{current:null}},Wa.forwardRef=function($){return{$$typeof:u,render:$}},Wa.isValidElement=E,Wa.lazy=function($){return{$$typeof:m,_payload:{_status:-1,_result:$},_init:ee}},Wa.memo=function($,ue){return{$$typeof:p,type:$,compare:ue===void 0?null:ue}},Wa.startTransition=function($){var ue=te.T,k={};te.T=k;try{var I=$(),H=te.S;H!==null&&H(k,I),typeof I=="object"&&I!==null&&typeof I.then=="function"&&I.then(Be,le)}catch(re){le(re)}finally{te.T=ue}},Wa.unstable_useCacheRefresh=function(){return te.H.useCacheRefresh()},Wa.use=function($){return te.H.use($)},Wa.useActionState=function($,ue,k){return te.H.useActionState($,ue,k)},Wa.useCallback=function($,ue){return te.H.useCallback($,ue)},Wa.useContext=function($){return te.H.useContext($)},Wa.useDebugValue=function(){},Wa.useDeferredValue=function($,ue){return te.H.useDeferredValue($,ue)},Wa.useEffect=function($,ue,k){var I=te.H;if(typeof k=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return I.useEffect($,ue)},Wa.useId=function(){return te.H.useId()},Wa.useImperativeHandle=function($,ue,k){return te.H.useImperativeHandle($,ue,k)},Wa.useInsertionEffect=function($,ue){return te.H.useInsertionEffect($,ue)},Wa.useLayoutEffect=function($,ue){return te.H.useLayoutEffect($,ue)},Wa.useMemo=function($,ue){return te.H.useMemo($,ue)},Wa.useOptimistic=function($,ue){return te.H.useOptimistic($,ue)},Wa.useReducer=function($,ue,k){return te.H.useReducer($,ue,k)},Wa.useRef=function($){return te.H.useRef($)},Wa.useState=function($){return te.H.useState($)},Wa.useSyncExternalStore=function($,ue,k){return te.H.useSyncExternalStore($,ue,k)},Wa.useTransition=function(){return te.H.useTransition()},Wa.version="19.1.1",Wa}var a0;function Lg(){return a0||(a0=1,Wm.exports=f2()),Wm.exports}var w=Lg();const An=Pb(w);var Ym={exports:{}},UA={},Jm={exports:{}},Xm={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var s0;function g2(){return s0||(s0=1,function(t){function a(z,ee){var le=z.length;z.push(ee);e:for(;0<le;){var Be=le-1>>>1,$=z[Be];if(0<o($,ee))z[Be]=ee,z[le]=$,le=Be;else break e}}function s(z){return z.length===0?null:z[0]}function i(z){if(z.length===0)return null;var ee=z[0],le=z.pop();if(le!==ee){z[0]=le;e:for(var Be=0,$=z.length,ue=$>>>1;Be<ue;){var k=2*(Be+1)-1,I=z[k],H=k+1,re=z[H];if(0>o(I,le))H<$&&0>o(re,I)?(z[Be]=re,z[H]=le,Be=H):(z[Be]=I,z[k]=le,Be=k);else if(H<$&&0>o(re,le))z[Be]=re,z[H]=le,Be=H;else break e}}return ee}function o(z,ee){var le=z.sortIndex-ee.sortIndex;return le!==0?le:z.id-ee.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;t.unstable_now=function(){return l.now()}}else{var d=Date,u=d.now();t.unstable_now=function(){return d.now()-u}}var A=[],p=[],m=1,b=null,v=3,x=!1,C=!1,D=!1,S=!1,_=typeof setTimeout=="function"?setTimeout:null,N=typeof clearTimeout=="function"?clearTimeout:null,O=typeof setImmediate<"u"?setImmediate:null;function L(z){for(var ee=s(p);ee!==null;){if(ee.callback===null)i(p);else if(ee.startTime<=z)i(p),ee.sortIndex=ee.expirationTime,a(A,ee);else break;ee=s(p)}}function te(z){if(D=!1,L(z),!C)if(s(A)!==null)C=!0,G||(G=!0,Q());else{var ee=s(p);ee!==null&&R(te,ee.startTime-z)}}var G=!1,X=-1,U=5,E=-1;function Y(){return S?!0:!(t.unstable_now()-E<U)}function T(){if(S=!1,G){var z=t.unstable_now();E=z;var ee=!0;try{e:{C=!1,D&&(D=!1,N(X),X=-1),x=!0;var le=v;try{t:{for(L(z),b=s(A);b!==null&&!(b.expirationTime>z&&Y());){var Be=b.callback;if(typeof Be=="function"){b.callback=null,v=b.priorityLevel;var $=Be(b.expirationTime<=z);if(z=t.unstable_now(),typeof $=="function"){b.callback=$,L(z),ee=!0;break t}b===s(A)&&i(A),L(z)}else i(A);b=s(A)}if(b!==null)ee=!0;else{var ue=s(p);ue!==null&&R(te,ue.startTime-z),ee=!1}}break e}finally{b=null,v=le,x=!1}ee=void 0}}finally{ee?Q():G=!1}}}var Q;if(typeof O=="function")Q=function(){O(T)};else if(typeof MessageChannel<"u"){var q=new MessageChannel,ne=q.port2;q.port1.onmessage=T,Q=function(){ne.postMessage(null)}}else Q=function(){_(T,0)};function R(z,ee){X=_(function(){z(t.unstable_now())},ee)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(z){z.callback=null},t.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):U=0<z?Math.floor(1e3/z):5},t.unstable_getCurrentPriorityLevel=function(){return v},t.unstable_next=function(z){switch(v){case 1:case 2:case 3:var ee=3;break;default:ee=v}var le=v;v=ee;try{return z()}finally{v=le}},t.unstable_requestPaint=function(){S=!0},t.unstable_runWithPriority=function(z,ee){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var le=v;v=z;try{return ee()}finally{v=le}},t.unstable_scheduleCallback=function(z,ee,le){var Be=t.unstable_now();switch(typeof le=="object"&&le!==null?(le=le.delay,le=typeof le=="number"&&0<le?Be+le:Be):le=Be,z){case 1:var $=-1;break;case 2:$=250;break;case 5:$=1073741823;break;case 4:$=1e4;break;default:$=5e3}return $=le+$,z={id:m++,callback:ee,priorityLevel:z,startTime:le,expirationTime:$,sortIndex:-1},le>Be?(z.sortIndex=le,a(p,z),s(A)===null&&z===s(p)&&(D?(N(X),X=-1):D=!0,R(te,le-Be))):(z.sortIndex=$,a(A,z),C||x||(C=!0,G||(G=!0,Q()))),z},t.unstable_shouldYield=Y,t.unstable_wrapCallback=function(z){var ee=v;return function(){var le=v;v=ee;try{return z.apply(this,arguments)}finally{v=le}}}}(Xm)),Xm}var n0;function x2(){return n0||(n0=1,Jm.exports=g2()),Jm.exports}var Zm={exports:{}},ki={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var i0;function y2(){if(i0)return ki;i0=1;var t=Lg();function a(A){var p="https://react.dev/errors/"+A;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)p+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+A+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(){}var i={d:{f:s,r:function(){throw Error(a(522))},D:s,C:s,L:s,m:s,X:s,S:s,M:s},p:0,findDOMNode:null},o=Symbol.for("react.portal");function l(A,p,m){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:b==null?null:""+b,children:A,containerInfo:p,implementation:m}}var d=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(A,p){if(A==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return ki.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,ki.createPortal=function(A,p){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(a(299));return l(A,p,null,m)},ki.flushSync=function(A){var p=d.T,m=i.p;try{if(d.T=null,i.p=2,A)return A()}finally{d.T=p,i.p=m,i.d.f()}},ki.preconnect=function(A,p){typeof A=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,i.d.C(A,p))},ki.prefetchDNS=function(A){typeof A=="string"&&i.d.D(A)},ki.preinit=function(A,p){if(typeof A=="string"&&p&&typeof p.as=="string"){var m=p.as,b=u(m,p.crossOrigin),v=typeof p.integrity=="string"?p.integrity:void 0,x=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;m==="style"?i.d.S(A,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:b,integrity:v,fetchPriority:x}):m==="script"&&i.d.X(A,{crossOrigin:b,integrity:v,fetchPriority:x,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},ki.preinitModule=function(A,p){if(typeof A=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var m=u(p.as,p.crossOrigin);i.d.M(A,{crossOrigin:m,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&i.d.M(A)},ki.preload=function(A,p){if(typeof A=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var m=p.as,b=u(m,p.crossOrigin);i.d.L(A,m,{crossOrigin:b,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},ki.preloadModule=function(A,p){if(typeof A=="string")if(p){var m=u(p.as,p.crossOrigin);i.d.m(A,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:m,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else i.d.m(A)},ki.requestFormReset=function(A){i.d.r(A)},ki.unstable_batchedUpdates=function(A,p){return A(p)},ki.useFormState=function(A,p,m){return d.H.useFormState(A,p,m)},ki.useFormStatus=function(){return d.H.useHostTransitionStatus()},ki.version="19.1.1",ki}var r0;function Hb(){if(r0)return Zm.exports;r0=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(a){console.error(a)}}return t(),Zm.exports=y2(),Zm.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var o0;function v2(){if(o0)return UA;o0=1;var t=x2(),a=Lg(),s=Hb();function i(n){var r="https://react.dev/errors/"+n;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)r+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+n+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function l(n){var r=n,c=n;if(n.alternate)for(;r.return;)r=r.return;else{n=r;do r=n,(r.flags&4098)!==0&&(c=r.return),n=r.return;while(n)}return r.tag===3?c:null}function d(n){if(n.tag===13){var r=n.memoizedState;if(r===null&&(n=n.alternate,n!==null&&(r=n.memoizedState)),r!==null)return r.dehydrated}return null}function u(n){if(l(n)!==n)throw Error(i(188))}function A(n){var r=n.alternate;if(!r){if(r=l(n),r===null)throw Error(i(188));return r!==n?null:n}for(var c=n,h=r;;){var g=c.return;if(g===null)break;var j=g.alternate;if(j===null){if(h=g.return,h!==null){c=h;continue}break}if(g.child===j.child){for(j=g.child;j;){if(j===c)return u(g),n;if(j===h)return u(g),r;j=j.sibling}throw Error(i(188))}if(c.return!==h.return)c=g,h=j;else{for(var Z=!1,he=g.child;he;){if(he===c){Z=!0,c=g,h=j;break}if(he===h){Z=!0,h=g,c=j;break}he=he.sibling}if(!Z){for(he=j.child;he;){if(he===c){Z=!0,c=j,h=g;break}if(he===h){Z=!0,h=j,c=g;break}he=he.sibling}if(!Z)throw Error(i(189))}}if(c.alternate!==h)throw Error(i(190))}if(c.tag!==3)throw Error(i(188));return c.stateNode.current===c?n:r}function p(n){var r=n.tag;if(r===5||r===26||r===27||r===6)return n;for(n=n.child;n!==null;){if(r=p(n),r!==null)return r;n=n.sibling}return null}var m=Object.assign,b=Symbol.for("react.element"),v=Symbol.for("react.transitional.element"),x=Symbol.for("react.portal"),C=Symbol.for("react.fragment"),D=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),_=Symbol.for("react.provider"),N=Symbol.for("react.consumer"),O=Symbol.for("react.context"),L=Symbol.for("react.forward_ref"),te=Symbol.for("react.suspense"),G=Symbol.for("react.suspense_list"),X=Symbol.for("react.memo"),U=Symbol.for("react.lazy"),E=Symbol.for("react.activity"),Y=Symbol.for("react.memo_cache_sentinel"),T=Symbol.iterator;function Q(n){return n===null||typeof n!="object"?null:(n=T&&n[T]||n["@@iterator"],typeof n=="function"?n:null)}var q=Symbol.for("react.client.reference");function ne(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===q?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case C:return"Fragment";case S:return"Profiler";case D:return"StrictMode";case te:return"Suspense";case G:return"SuspenseList";case E:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case x:return"Portal";case O:return(n.displayName||"Context")+".Provider";case N:return(n._context.displayName||"Context")+".Consumer";case L:var r=n.render;return n=n.displayName,n||(n=r.displayName||r.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case X:return r=n.displayName||null,r!==null?r:ne(n.type)||"Memo";case U:r=n._payload,n=n._init;try{return ne(n(r))}catch{}}return null}var R=Array.isArray,z=a.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ee=s.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,le={pending:!1,data:null,method:null,action:null},Be=[],$=-1;function ue(n){return{current:n}}function k(n){0>$||(n.current=Be[$],Be[$]=null,$--)}function I(n,r){$++,Be[$]=n.current,n.current=r}var H=ue(null),re=ue(null),J=ue(null),V=ue(null);function oe(n,r){switch(I(J,r),I(re,n),I(H,null),r.nodeType){case 9:case 11:n=(n=r.documentElement)&&(n=n.namespaceURI)?Cy(n):0;break;default:if(n=r.tagName,r=r.namespaceURI)r=Cy(r),n=Sy(r,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}k(H),I(H,n)}function K(){k(H),k(re),k(J)}function Ne(n){n.memoizedState!==null&&I(V,n);var r=H.current,c=Sy(r,n.type);r!==c&&(I(re,n),I(H,c))}function Ee(n){re.current===n&&(k(H),k(re)),V.current===n&&(k(V),BA._currentValue=le)}var st=Object.prototype.hasOwnProperty,ut=t.unstable_scheduleCallback,Ge=t.unstable_cancelCallback,_e=t.unstable_shouldYield,Et=t.unstable_requestPaint,Mt=t.unstable_now,Ze=t.unstable_getCurrentPriorityLevel,Je=t.unstable_ImmediatePriority,mt=t.unstable_UserBlockingPriority,ve=t.unstable_NormalPriority,et=t.unstable_LowPriority,Oe=t.unstable_IdlePriority,kt=t.log,xt=t.unstable_setDisableYieldValue,lt=null,Ut=null;function _t(n){if(typeof kt=="function"&&xt(n),Ut&&typeof Ut.setStrictMode=="function")try{Ut.setStrictMode(lt,n)}catch{}}var Nt=Math.clz32?Math.clz32:Xt,qt=Math.log,Bt=Math.LN2;function Xt(n){return n>>>=0,n===0?32:31-(qt(n)/Bt|0)|0}var ta=256,ie=4194304;function at(n){var r=n&42;if(r!==0)return r;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function Ot(n,r,c){var h=n.pendingLanes;if(h===0)return 0;var g=0,j=n.suspendedLanes,Z=n.pingedLanes;n=n.warmLanes;var he=h&134217727;return he!==0?(h=he&~j,h!==0?g=at(h):(Z&=he,Z!==0?g=at(Z):c||(c=he&~n,c!==0&&(g=at(c))))):(he=h&~j,he!==0?g=at(he):Z!==0?g=at(Z):c||(c=h&~n,c!==0&&(g=at(c)))),g===0?0:r!==0&&r!==g&&(r&j)===0&&(j=g&-g,c=r&-r,j>=c||j===32&&(c&4194048)!==0)?r:g}function Ct(n,r){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&r)===0}function ia(n,r){switch(n){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ca(){var n=ta;return ta<<=1,(ta&4194048)===0&&(ta=256),n}function Za(){var n=ie;return ie<<=1,(ie&62914560)===0&&(ie=4194304),n}function os(n){for(var r=[],c=0;31>c;c++)r.push(n);return r}function Ba(n,r){n.pendingLanes|=r,r!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function xa(n,r,c,h,g,j){var Z=n.pendingLanes;n.pendingLanes=c,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=c,n.entangledLanes&=c,n.errorRecoveryDisabledLanes&=c,n.shellSuspendCounter=0;var he=n.entanglements,Se=n.expirationTimes,Ke=n.hiddenUpdates;for(c=Z&~c;0<c;){var pt=31-Nt(c),wt=1<<pt;he[pt]=0,Se[pt]=-1;var We=Ke[pt];if(We!==null)for(Ke[pt]=null,pt=0;pt<We.length;pt++){var Xe=We[pt];Xe!==null&&(Xe.lane&=-536870913)}c&=~wt}h!==0&&Dt(n,h,0),j!==0&&g===0&&n.tag!==0&&(n.suspendedLanes|=j&~(Z&~r))}function Dt(n,r,c){n.pendingLanes|=r,n.suspendedLanes&=~r;var h=31-Nt(r);n.entangledLanes|=r,n.entanglements[h]=n.entanglements[h]|1073741824|c&4194090}function ye(n,r){var c=n.entangledLanes|=r;for(n=n.entanglements;c;){var h=31-Nt(c),g=1<<h;g&r|n[h]&r&&(n[h]|=r),c&=~g}}function Ce(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function Ve(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function gt(){var n=ee.p;return n!==0?n:(n=window.event,n===void 0?32:Vy(n.type))}function Qt(n,r){var c=ee.p;try{return ee.p=n,r()}finally{ee.p=c}}var ja=Math.random().toString(36).slice(2),va="__reactFiber$"+ja,_a="__reactProps$"+ja,Na="__reactContainer$"+ja,Pa="__reactEvents$"+ja,ls="__reactListeners$"+ja,cs="__reactHandles$"+ja,Gs="__reactResources$"+ja,yn="__reactMarker$"+ja;function ge(n){delete n[va],delete n[_a],delete n[Pa],delete n[ls],delete n[cs]}function it(n){var r=n[va];if(r)return r;for(var c=n.parentNode;c;){if(r=c[Na]||c[va]){if(c=r.alternate,r.child!==null||c!==null&&c.child!==null)for(n=Uy(n);n!==null;){if(c=n[va])return c;n=Uy(n)}return r}n=c,c=n.parentNode}return null}function $e(n){if(n=n[va]||n[Na]){var r=n.tag;if(r===5||r===6||r===13||r===26||r===27||r===3)return n}return null}function zt(n){var r=n.tag;if(r===5||r===26||r===27||r===6)return n.stateNode;throw Error(i(33))}function St(n){var r=n[Gs];return r||(r=n[Gs]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function yt(n){n[yn]=!0}var Va=new Set,Zt={};function W(n,r){me(n,r),me(n+"Capture",r)}function me(n,r){for(Zt[n]=r,n=0;n<r.length;n++)Va.add(r[n])}var ke=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),tt={},ht={};function Lt(n){return st.call(ht,n)?!0:st.call(tt,n)?!1:ke.test(n)?ht[n]=!0:(tt[n]=!0,!1)}function It(n,r,c){if(Lt(r))if(c===null)n.removeAttribute(r);else{switch(typeof c){case"undefined":case"function":case"symbol":n.removeAttribute(r);return;case"boolean":var h=r.toLowerCase().slice(0,5);if(h!=="data-"&&h!=="aria-"){n.removeAttribute(r);return}}n.setAttribute(r,""+c)}}function Jt(n,r,c){if(c===null)n.removeAttribute(r);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(r);return}n.setAttribute(r,""+c)}}function Ht(n,r,c,h){if(h===null)n.removeAttribute(c);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(c);return}n.setAttributeNS(r,c,""+h)}}var Wt,wa;function ba(n){if(Wt===void 0)try{throw Error()}catch(c){var r=c.stack.trim().match(/\n( *(at )?)/);Wt=r&&r[1]||"",wa=-1<c.stack.indexOf(`
    at`)?" (<anonymous>)":-1<c.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Wt+n+wa}var ka=!1;function gs(n,r){if(!n||ka)return"";ka=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var h={DetermineComponentFrameRoot:function(){try{if(r){var wt=function(){throw Error()};if(Object.defineProperty(wt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(wt,[])}catch(Xe){var We=Xe}Reflect.construct(n,[],wt)}else{try{wt.call()}catch(Xe){We=Xe}n.call(wt.prototype)}}else{try{throw Error()}catch(Xe){We=Xe}(wt=n())&&typeof wt.catch=="function"&&wt.catch(function(){})}}catch(Xe){if(Xe&&We&&typeof Xe.stack=="string")return[Xe.stack,We.stack]}return[null,null]}};h.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var g=Object.getOwnPropertyDescriptor(h.DetermineComponentFrameRoot,"name");g&&g.configurable&&Object.defineProperty(h.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var j=h.DetermineComponentFrameRoot(),Z=j[0],he=j[1];if(Z&&he){var Se=Z.split(`
`),Ke=he.split(`
`);for(g=h=0;h<Se.length&&!Se[h].includes("DetermineComponentFrameRoot");)h++;for(;g<Ke.length&&!Ke[g].includes("DetermineComponentFrameRoot");)g++;if(h===Se.length||g===Ke.length)for(h=Se.length-1,g=Ke.length-1;1<=h&&0<=g&&Se[h]!==Ke[g];)g--;for(;1<=h&&0<=g;h--,g--)if(Se[h]!==Ke[g]){if(h!==1||g!==1)do if(h--,g--,0>g||Se[h]!==Ke[g]){var pt=`
`+Se[h].replace(" at new "," at ");return n.displayName&&pt.includes("<anonymous>")&&(pt=pt.replace("<anonymous>",n.displayName)),pt}while(1<=h&&0<=g);break}}}finally{ka=!1,Error.prepareStackTrace=c}return(c=n?n.displayName||n.name:"")?ba(c):""}function Ys(n){switch(n.tag){case 26:case 27:case 5:return ba(n.type);case 16:return ba("Lazy");case 13:return ba("Suspense");case 19:return ba("SuspenseList");case 0:case 15:return gs(n.type,!1);case 11:return gs(n.type.render,!1);case 1:return gs(n.type,!0);case 31:return ba("Activity");default:return""}}function Wi(n){try{var r="";do r+=Ys(n),n=n.return;while(n);return r}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}function ds(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Nr(n){var r=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function Xr(n){var r=Nr(n)?"checked":"value",c=Object.getOwnPropertyDescriptor(n.constructor.prototype,r),h=""+n[r];if(!n.hasOwnProperty(r)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var g=c.get,j=c.set;return Object.defineProperty(n,r,{configurable:!0,get:function(){return g.call(this)},set:function(Z){h=""+Z,j.call(this,Z)}}),Object.defineProperty(n,r,{enumerable:c.enumerable}),{getValue:function(){return h},setValue:function(Z){h=""+Z},stopTracking:function(){n._valueTracker=null,delete n[r]}}}}function Js(n){n._valueTracker||(n._valueTracker=Xr(n))}function vi(n){if(!n)return!1;var r=n._valueTracker;if(!r)return!0;var c=r.getValue(),h="";return n&&(h=Nr(n)?n.checked?"true":"false":n.value),n=h,n!==c?(r.setValue(n),!0):!1}function qa(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var oi=/[\n"\\]/g;function $a(n){return n.replace(oi,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function Ri(n,r,c,h,g,j,Z,he){n.name="",Z!=null&&typeof Z!="function"&&typeof Z!="symbol"&&typeof Z!="boolean"?n.type=Z:n.removeAttribute("type"),r!=null?Z==="number"?(r===0&&n.value===""||n.value!=r)&&(n.value=""+ds(r)):n.value!==""+ds(r)&&(n.value=""+ds(r)):Z!=="submit"&&Z!=="reset"||n.removeAttribute("value"),r!=null?Ar(n,Z,ds(r)):c!=null?Ar(n,Z,ds(c)):h!=null&&n.removeAttribute("value"),g==null&&j!=null&&(n.defaultChecked=!!j),g!=null&&(n.checked=g&&typeof g!="function"&&typeof g!="symbol"),he!=null&&typeof he!="function"&&typeof he!="symbol"&&typeof he!="boolean"?n.name=""+ds(he):n.removeAttribute("name")}function Bo(n,r,c,h,g,j,Z,he){if(j!=null&&typeof j!="function"&&typeof j!="symbol"&&typeof j!="boolean"&&(n.type=j),r!=null||c!=null){if(!(j!=="submit"&&j!=="reset"||r!=null))return;c=c!=null?""+ds(c):"",r=r!=null?""+ds(r):c,he||r===n.value||(n.value=r),n.defaultValue=r}h=h??g,h=typeof h!="function"&&typeof h!="symbol"&&!!h,n.checked=he?n.checked:!!h,n.defaultChecked=!!h,Z!=null&&typeof Z!="function"&&typeof Z!="symbol"&&typeof Z!="boolean"&&(n.name=Z)}function Ar(n,r,c){r==="number"&&qa(n.ownerDocument)===n||n.defaultValue===""+c||(n.defaultValue=""+c)}function vn(n,r,c,h){if(n=n.options,r){r={};for(var g=0;g<c.length;g++)r["$"+c[g]]=!0;for(c=0;c<n.length;c++)g=r.hasOwnProperty("$"+n[c].value),n[c].selected!==g&&(n[c].selected=g),g&&h&&(n[c].defaultSelected=!0)}else{for(c=""+ds(c),r=null,g=0;g<n.length;g++){if(n[g].value===c){n[g].selected=!0,h&&(n[g].defaultSelected=!0);return}r!==null||n[g].disabled||(r=n[g])}r!==null&&(r.selected=!0)}}function Mn(n,r,c){if(r!=null&&(r=""+ds(r),r!==n.value&&(n.value=r),c==null)){n.defaultValue!==r&&(n.defaultValue=r);return}n.defaultValue=c!=null?""+ds(c):""}function Br(n,r,c,h){if(r==null){if(h!=null){if(c!=null)throw Error(i(92));if(R(h)){if(1<h.length)throw Error(i(93));h=h[0]}c=h}c==null&&(c=""),r=c}c=ds(r),n.defaultValue=c,h=n.textContent,h===c&&h!==""&&h!==null&&(n.value=h)}function li(n,r){if(r){var c=n.firstChild;if(c&&c===n.lastChild&&c.nodeType===3){c.nodeValue=r;return}}n.textContent=r}var Ya=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ae(n,r,c){var h=r.indexOf("--")===0;c==null||typeof c=="boolean"||c===""?h?n.setProperty(r,""):r==="float"?n.cssFloat="":n[r]="":h?n.setProperty(r,c):typeof c!="number"||c===0||Ya.has(r)?r==="float"?n.cssFloat=c:n[r]=(""+c).trim():n[r]=c+"px"}function xe(n,r,c){if(r!=null&&typeof r!="object")throw Error(i(62));if(n=n.style,c!=null){for(var h in c)!c.hasOwnProperty(h)||r!=null&&r.hasOwnProperty(h)||(h.indexOf("--")===0?n.setProperty(h,""):h==="float"?n.cssFloat="":n[h]="");for(var g in r)h=r[g],r.hasOwnProperty(g)&&c[g]!==h&&Ae(n,g,h)}else for(var j in r)r.hasOwnProperty(j)&&Ae(n,j,r[j])}function Re(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var nt=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),vt=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ot(n){return vt.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}var Kt=null;function aa(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var da=null,ea=null;function Gt(n){var r=$e(n);if(r&&(n=r.stateNode)){var c=n[_a]||null;e:switch(n=r.stateNode,r.type){case"input":if(Ri(n,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name),r=c.name,c.type==="radio"&&r!=null){for(c=n;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll('input[name="'+$a(""+r)+'"][type="radio"]'),r=0;r<c.length;r++){var h=c[r];if(h!==n&&h.form===n.form){var g=h[_a]||null;if(!g)throw Error(i(90));Ri(h,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name)}}for(r=0;r<c.length;r++)h=c[r],h.form===n.form&&vi(h)}break e;case"textarea":Mn(n,c.value,c.defaultValue);break e;case"select":r=c.value,r!=null&&vn(n,!!c.multiple,r,!1)}}}var js=!1;function hn(n,r,c){if(js)return n(r,c);js=!0;try{var h=n(r);return h}finally{if(js=!1,(da!==null||ea!==null)&&(Xu(),da&&(r=da,n=ea,ea=da=null,Gt(r),n)))for(r=0;r<n.length;r++)Gt(n[r])}}function Kn(n,r){var c=n.stateNode;if(c===null)return null;var h=c[_a]||null;if(h===null)return null;c=h[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(n=n.type,h=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!h;break e;default:n=!1}if(n)return null;if(c&&typeof c!="function")throw Error(i(231,r,typeof c));return c}var Ts=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),bn=!1;if(Ts)try{var Bn={};Object.defineProperty(Bn,"passive",{get:function(){bn=!0}}),window.addEventListener("test",Bn,Bn),window.removeEventListener("test",Bn,Bn)}catch{bn=!1}var Yi=null,ur=null,Ji=null;function Co(){if(Ji)return Ji;var n,r=ur,c=r.length,h,g="value"in Yi?Yi.value:Yi.textContent,j=g.length;for(n=0;n<c&&r[n]===g[n];n++);var Z=c-n;for(h=1;h<=Z&&r[c-h]===g[j-h];h++);return Ji=g.slice(n,1<h?1-h:void 0)}function Di(n){var r=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&r===13&&(n=13)):n=r,n===10&&(n=13),32<=n||n===13?n:0}function Xi(){return!0}function Cr(){return!1}function jn(n){function r(c,h,g,j,Z){this._reactName=c,this._targetInst=g,this.type=h,this.nativeEvent=j,this.target=Z,this.currentTarget=null;for(var he in n)n.hasOwnProperty(he)&&(c=n[he],this[he]=c?c(j):j[he]);return this.isDefaultPrevented=(j.defaultPrevented!=null?j.defaultPrevented:j.returnValue===!1)?Xi:Cr,this.isPropagationStopped=Cr,this}return m(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=Xi)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=Xi)},persist:function(){},isPersistent:Xi}),r}var Ss={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},bi=jn(Ss),Zi=m({},Ss,{view:0,detail:0}),Zr=jn(Zi),Sr,hr,As,Ii=m({},Zi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:na,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==As&&(As&&n.type==="mousemove"?(Sr=n.screenX-As.screenX,hr=n.screenY-As.screenY):hr=Sr=0,As=n),Sr)},movementY:function(n){return"movementY"in n?n.movementY:hr}}),Ja=jn(Ii),eo=m({},Ii,{dataTransfer:0}),er=jn(eo),ji=m({},Zi,{relatedTarget:0}),to=jn(ji),Nl=m({},Ss,{animationName:0,elapsedTime:0,pseudoElement:0}),ao=jn(Nl),kr=m({},Ss,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),B=jn(kr),ae=m({},Ss,{data:0}),je=jn(ae),Fe={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},De={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ct={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function bt(n){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(n):(n=ct[n])?!!r[n]:!1}function na(){return bt}var fa=m({},Zi,{key:function(n){if(n.key){var r=Fe[n.key]||n.key;if(r!=="Unidentified")return r}return n.type==="keypress"?(n=Di(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?De[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:na,charCode:function(n){return n.type==="keypress"?Di(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Di(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Fa=jn(fa),Ea=m({},Ii,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ss=jn(Ea),Ps=m({},Zi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:na}),Xs=jn(Ps),ys=m({},Ss,{propertyName:0,elapsedTime:0,pseudoElement:0}),pn=jn(ys),Zs=m({},Ii,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Cn=jn(Zs),wi=m({},Ss,{newState:0,oldState:0}),Gn=jn(wi),So=[9,13,27,32],tr=Ts&&"CompositionEvent"in window,_i=null;Ts&&"documentMode"in document&&(_i=document.documentMode);var Fr=Ts&&"TextEvent"in window&&!_i,Er=Ts&&(!tr||_i&&8<_i&&11>=_i),Ur=" ",pr=!1;function Sn(n,r){switch(n){case"keyup":return So.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Lr(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Ni=!1;function Wo(n,r){switch(n){case"compositionend":return Lr(r);case"keypress":return r.which!==32?null:(pr=!0,Ur);case"textInput":return n=r.data,n===Ur&&pr?null:n;default:return null}}function Yo(n,r){if(Ni)return n==="compositionend"||!tr&&Sn(n,r)?(n=Co(),Ji=ur=Yi=null,Ni=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return Er&&r.locale!=="ko"?null:r.data;default:return null}}var Vs={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function P(n){var r=n&&n.nodeName&&n.nodeName.toLowerCase();return r==="input"?!!Vs[n.type]:r==="textarea"}function Ue(n,r,c,h){da?ea?ea.push(h):ea=[h]:da=h,r=nh(r,"onChange"),0<r.length&&(c=new bi("onChange","change",null,c,h),n.push({event:c,listeners:r}))}var He=null,Ye=null;function Tt(n){jy(n,0)}function Vt(n){var r=zt(n);if(vi(r))return n}function Pt(n,r){if(n==="change")return r}var Rt=!1;if(Ts){var es;if(Ts){var Ma="oninput"in document;if(!Ma){var Ga=document.createElement("div");Ga.setAttribute("oninput","return;"),Ma=typeof Ga.oninput=="function"}es=Ma}else es=!1;Rt=es&&(!document.documentMode||9<document.documentMode)}function La(){He&&(He.detachEvent("onpropertychange",ws),Ye=He=null)}function ws(n){if(n.propertyName==="value"&&Vt(Ye)){var r=[];Ue(r,Ye,n,aa(n)),hn(Tt,r)}}function Hs(n,r,c){n==="focusin"?(La(),He=r,Ye=c,He.attachEvent("onpropertychange",ws)):n==="focusout"&&La()}function ci(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Vt(Ye)}function Bi(n,r){if(n==="click")return Vt(r)}function ks(n,r){if(n==="input"||n==="change")return Vt(r)}function Oa(n,r){return n===r&&(n!==0||1/n===1/r)||n!==n&&r!==r}var Yt=typeof Object.is=="function"?Object.is:Oa;function vs(n,r){if(Yt(n,r))return!0;if(typeof n!="object"||n===null||typeof r!="object"||r===null)return!1;var c=Object.keys(n),h=Object.keys(r);if(c.length!==h.length)return!1;for(h=0;h<c.length;h++){var g=c[h];if(!st.call(r,g)||!Yt(n[g],r[g]))return!1}return!0}function Ci(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function ko(n,r){var c=Ci(n);n=0;for(var h;c;){if(c.nodeType===3){if(h=n+c.textContent.length,n<=r&&h>=r)return{node:c,offset:r-n};n=h}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=Ci(c)}}function di(n,r){return n&&r?n===r?!0:n&&n.nodeType===3?!1:r&&r.nodeType===3?di(n,r.parentNode):"contains"in n?n.contains(r):n.compareDocumentPosition?!!(n.compareDocumentPosition(r)&16):!1:!1}function Fo(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var r=qa(n.document);r instanceof n.HTMLIFrameElement;){try{var c=typeof r.contentWindow.location.href=="string"}catch{c=!1}if(c)n=r.contentWindow;else break;r=qa(n.document)}return r}function Pi(n){var r=n&&n.nodeName&&n.nodeName.toLowerCase();return r&&(r==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||r==="textarea"||n.contentEditable==="true")}var Tr=Ts&&"documentMode"in document&&11>=document.documentMode,Si=null,Hi=null,ar=null,so=!1;function Mi(n,r,c){var h=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;so||Si==null||Si!==qa(h)||(h=Si,"selectionStart"in h&&Pi(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),ar&&vs(ar,h)||(ar=h,h=nh(Hi,"onSelect"),0<h.length&&(r=new bi("onSelect","select",null,r,c),n.push({event:r,listeners:h}),r.target=Si)))}function Zn(n,r){var c={};return c[n.toLowerCase()]=r.toLowerCase(),c["Webkit"+n]="webkit"+r,c["Moz"+n]="moz"+r,c}var ns={animationend:Zn("Animation","AnimationEnd"),animationiteration:Zn("Animation","AnimationIteration"),animationstart:Zn("Animation","AnimationStart"),transitionrun:Zn("Transition","TransitionRun"),transitionstart:Zn("Transition","TransitionStart"),transitioncancel:Zn("Transition","TransitionCancel"),transitionend:Zn("Transition","TransitionEnd")},_s={},an={};Ts&&(an=document.createElement("div").style,"AnimationEvent"in window||(delete ns.animationend.animation,delete ns.animationiteration.animation,delete ns.animationstart.animation),"TransitionEvent"in window||delete ns.transitionend.transition);function Ms(n){if(_s[n])return _s[n];if(!ns[n])return n;var r=ns[n],c;for(c in r)if(r.hasOwnProperty(c)&&c in an)return _s[n]=r[c];return n}var Qr=Ms("animationend"),Bl=Ms("animationiteration"),Jo=Ms("animationstart"),Wc=Ms("transitionrun"),vu=Ms("transitionstart"),bu=Ms("transitioncancel"),Gd=Ms("transitionend"),Vd=new Map,Yc="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Yc.push("scrollEnd");function sr(n,r){Vd.set(n,r),W(r,[n])}var Cl=new WeakMap;function Oi(n,r){if(typeof n=="object"&&n!==null){var c=Cl.get(n);return c!==void 0?c:(r={value:n,source:r,stack:Wi(r)},Cl.set(n,r),r)}return{value:n,source:r,stack:Wi(r)}}var zi=[],Xo=0,Jc=0;function hc(){for(var n=Xo,r=Jc=Xo=0;r<n;){var c=zi[r];zi[r++]=null;var h=zi[r];zi[r++]=null;var g=zi[r];zi[r++]=null;var j=zi[r];if(zi[r++]=null,h!==null&&g!==null){var Z=h.pending;Z===null?g.next=g:(g.next=Z.next,Z.next=g),h.pending=g}j!==0&&Zc(c,g,j)}}function pc(n,r,c,h){zi[Xo++]=n,zi[Xo++]=r,zi[Xo++]=c,zi[Xo++]=h,Jc|=h,n.lanes|=h,n=n.alternate,n!==null&&(n.lanes|=h)}function Xc(n,r,c,h){return pc(n,r,c,h),el(n)}function Zo(n,r){return pc(n,null,null,r),el(n)}function Zc(n,r,c){n.lanes|=c;var h=n.alternate;h!==null&&(h.lanes|=c);for(var g=!1,j=n.return;j!==null;)j.childLanes|=c,h=j.alternate,h!==null&&(h.childLanes|=c),j.tag===22&&(n=j.stateNode,n===null||n._visibility&1||(g=!0)),n=j,j=j.return;return n.tag===3?(j=n.stateNode,g&&r!==null&&(g=31-Nt(c),n=j.hiddenUpdates,h=n[g],h===null?n[g]=[r]:h.push(r),r.lane=c|536870912),j):null}function el(n){if(50<xA)throw xA=0,xm=null,Error(i(185));for(var r=n.return;r!==null;)n=r,r=n.return;return n.tag===3?n.stateNode:null}var On={};function nr(n,r,c,h){this.tag=n,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ei(n,r,c,h){return new nr(n,r,c,h)}function Sl(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Rr(n,r){var c=n.alternate;return c===null?(c=ei(n.tag,r,n.key,n.mode),c.elementType=n.elementType,c.type=n.type,c.stateNode=n.stateNode,c.alternate=n,n.alternate=c):(c.pendingProps=r,c.type=n.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=n.flags&65011712,c.childLanes=n.childLanes,c.lanes=n.lanes,c.child=n.child,c.memoizedProps=n.memoizedProps,c.memoizedState=n.memoizedState,c.updateQueue=n.updateQueue,r=n.dependencies,c.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},c.sibling=n.sibling,c.index=n.index,c.ref=n.ref,c.refCleanup=n.refCleanup,c}function mc(n,r){n.flags&=65011714;var c=n.alternate;return c===null?(n.childLanes=0,n.lanes=r,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=c.childLanes,n.lanes=c.lanes,n.child=c.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=c.memoizedProps,n.memoizedState=c.memoizedState,n.updateQueue=c.updateQueue,n.type=c.type,r=c.dependencies,n.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),n}function tl(n,r,c,h,g,j){var Z=0;if(h=n,typeof n=="function")Sl(n)&&(Z=1);else if(typeof n=="string")Z=t2(n,c,H.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case E:return n=ei(31,c,r,g),n.elementType=E,n.lanes=j,n;case C:return no(c.children,g,j,r);case D:Z=8,g|=24;break;case S:return n=ei(12,c,r,g|2),n.elementType=S,n.lanes=j,n;case te:return n=ei(13,c,r,g),n.elementType=te,n.lanes=j,n;case G:return n=ei(19,c,r,g),n.elementType=G,n.lanes=j,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case _:case O:Z=10;break e;case N:Z=9;break e;case L:Z=11;break e;case X:Z=14;break e;case U:Z=16,h=null;break e}Z=29,c=Error(i(130,n===null?"null":typeof n,"")),h=null}return r=ei(Z,c,r,g),r.elementType=n,r.type=h,r.lanes=j,r}function no(n,r,c,h){return n=ei(7,n,h,r),n.lanes=c,n}function ed(n,r,c){return n=ei(6,n,null,r),n.lanes=c,n}function fc(n,r,c){return r=ei(4,n.children!==null?n.children:[],n.key,r),r.lanes=c,r.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},r}var Eo=[],io=0,kl=null,td=0,ir=[],qi=0,al=null,ro=1,oo="";function sl(n,r){Eo[io++]=td,Eo[io++]=kl,kl=n,td=r}function ju(n,r,c){ir[qi++]=ro,ir[qi++]=oo,ir[qi++]=al,al=n;var h=ro;n=oo;var g=32-Nt(h)-1;h&=~(1<<g),c+=1;var j=32-Nt(r)+g;if(30<j){var Z=g-g%5;j=(h&(1<<Z)-1).toString(32),h>>=Z,g-=Z,ro=1<<32-Nt(r)+g|c<<g|h,oo=j+n}else ro=1<<j|c<<g|h,oo=n}function gc(n){n.return!==null&&(sl(n,1),ju(n,1,0))}function xc(n){for(;n===kl;)kl=Eo[--io],Eo[io]=null,td=Eo[--io],Eo[io]=null;for(;n===al;)al=ir[--qi],ir[qi]=null,oo=ir[--qi],ir[qi]=null,ro=ir[--qi],ir[qi]=null}var kn=null,sn=null,xs=!1,Uo=null,Dr=!1,$d=Error(i(519));function nl(n){var r=Error(i(418,""));throw Fl(Oi(r,n)),$d}function wu(n){var r=n.stateNode,c=n.type,h=n.memoizedProps;switch(r[va]=n,r[_a]=h,c){case"dialog":rs("cancel",r),rs("close",r);break;case"iframe":case"object":case"embed":rs("load",r);break;case"video":case"audio":for(c=0;c<vA.length;c++)rs(vA[c],r);break;case"source":rs("error",r);break;case"img":case"image":case"link":rs("error",r),rs("load",r);break;case"details":rs("toggle",r);break;case"input":rs("invalid",r),Bo(r,h.value,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name,!0),Js(r);break;case"select":rs("invalid",r);break;case"textarea":rs("invalid",r),Br(r,h.value,h.defaultValue,h.children),Js(r)}c=h.children,typeof c!="string"&&typeof c!="number"&&typeof c!="bigint"||r.textContent===""+c||h.suppressHydrationWarning===!0||By(r.textContent,c)?(h.popover!=null&&(rs("beforetoggle",r),rs("toggle",r)),h.onScroll!=null&&rs("scroll",r),h.onScrollEnd!=null&&rs("scrollend",r),h.onClick!=null&&(r.onclick=ih),r=!0):r=!1,r||nl(n)}function lo(n){for(kn=n.return;kn;)switch(kn.tag){case 5:case 13:Dr=!1;return;case 27:case 3:Dr=!0;return;default:kn=kn.return}}function Ai(n){if(n!==kn)return!1;if(!xs)return lo(n),xs=!0,!1;var r=n.tag,c;if((c=r!==3&&r!==27)&&((c=r===5)&&(c=n.type,c=!(c!=="form"&&c!=="button")||Tm(n.type,n.memoizedProps)),c=!c),c&&sn&&nl(n),lo(n),r===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(i(317));e:{for(n=n.nextSibling,r=0;n;){if(n.nodeType===8)if(c=n.data,c==="/$"){if(r===0){sn=go(n.nextSibling);break e}r--}else c!=="$"&&c!=="$!"&&c!=="$?"||r++;n=n.nextSibling}sn=null}}else r===27?(r=sn,Gl(n.type)?(n=Im,Im=null,sn=n):sn=r):sn=kn?go(n.stateNode.nextSibling):null;return!0}function Ki(){sn=kn=null,xs=!1}function _u(){var n=Uo;return n!==null&&(or===null?or=n:or.push.apply(or,n),Uo=null),n}function Fl(n){Uo===null?Uo=[n]:Uo.push(n)}var Ir=ue(null),zn=null,co=null;function Lo(n,r,c){I(Ir,r._currentValue),r._currentValue=c}function Pr(n){n._currentValue=Ir.current,k(Ir)}function ad(n,r,c){for(;n!==null;){var h=n.alternate;if((n.childLanes&r)!==r?(n.childLanes|=r,h!==null&&(h.childLanes|=r)):h!==null&&(h.childLanes&r)!==r&&(h.childLanes|=r),n===c)break;n=n.return}}function sd(n,r,c,h){var g=n.child;for(g!==null&&(g.return=n);g!==null;){var j=g.dependencies;if(j!==null){var Z=g.child;j=j.firstContext;e:for(;j!==null;){var he=j;j=g;for(var Se=0;Se<r.length;Se++)if(he.context===r[Se]){j.lanes|=c,he=j.alternate,he!==null&&(he.lanes|=c),ad(j.return,c,n),h||(Z=null);break e}j=he.next}}else if(g.tag===18){if(Z=g.return,Z===null)throw Error(i(341));Z.lanes|=c,j=Z.alternate,j!==null&&(j.lanes|=c),ad(Z,c,n),Z=null}else Z=g.child;if(Z!==null)Z.return=g;else for(Z=g;Z!==null;){if(Z===n){Z=null;break}if(g=Z.sibling,g!==null){g.return=Z.return,Z=g;break}Z=Z.return}g=Z}}function El(n,r,c,h){n=null;for(var g=r,j=!1;g!==null;){if(!j){if((g.flags&524288)!==0)j=!0;else if((g.flags&262144)!==0)break}if(g.tag===10){var Z=g.alternate;if(Z===null)throw Error(i(387));if(Z=Z.memoizedProps,Z!==null){var he=g.type;Yt(g.pendingProps.value,Z.value)||(n!==null?n.push(he):n=[he])}}else if(g===V.current){if(Z=g.alternate,Z===null)throw Error(i(387));Z.memoizedState.memoizedState!==g.memoizedState.memoizedState&&(n!==null?n.push(BA):n=[BA])}g=g.return}n!==null&&sd(r,n,c,h),r.flags|=262144}function nd(n){for(n=n.firstContext;n!==null;){if(!Yt(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function Hr(n){zn=n,co=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function Fn(n){return id(zn,n)}function To(n,r){return zn===null&&Hr(n),id(n,r)}function id(n,r){var c=r._currentValue;if(r={context:r,memoizedValue:c,next:null},co===null){if(n===null)throw Error(i(308));co=r,n.dependencies={lanes:0,firstContext:r},n.flags|=524288}else co=co.next=r;return c}var zp=typeof AbortController<"u"?AbortController:function(){var n=[],r=this.signal={aborted:!1,addEventListener:function(c,h){n.push(h)}};this.abort=function(){r.aborted=!0,n.forEach(function(c){return c()})}},Nu=t.unstable_scheduleCallback,qp=t.unstable_NormalPriority,En={$$typeof:O,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Wd(){return{controller:new zp,data:new Map,refCount:0}}function yc(n){n.refCount--,n.refCount===0&&Nu(qp,function(){n.controller.abort()})}var vc=null,Yd=0,il=0,Ao=null;function Kp(n,r){if(vc===null){var c=vc=[];Yd=0,il=Nm(),Ao={status:"pending",value:void 0,then:function(h){c.push(h)}}}return Yd++,r.then(Bu,Bu),r}function Bu(){if(--Yd===0&&vc!==null){Ao!==null&&(Ao.status="fulfilled");var n=vc;vc=null,il=0,Ao=null;for(var r=0;r<n.length;r++)(0,n[r])()}}function Cu(n,r){var c=[],h={status:"pending",value:null,reason:null,then:function(g){c.push(g)}};return n.then(function(){h.status="fulfilled",h.value=r;for(var g=0;g<c.length;g++)(0,c[g])(r)},function(g){for(h.status="rejected",h.reason=g,g=0;g<c.length;g++)(0,c[g])(void 0)}),h}var f=z.S;z.S=function(n,r){typeof r=="object"&&r!==null&&typeof r.then=="function"&&Kp(n,r),f!==null&&f(n,r)};var y=ue(null);function F(){var n=y.current;return n!==null?n:$s.pooledCache}function M(n,r){r===null?I(y,y.current):I(y,r.pool)}function se(){var n=F();return n===null?null:{parent:En._currentValue,pool:n}}var ce=Error(i(460)),de=Error(i(474)),pe=Error(i(542)),fe={then:function(){}};function we(n){return n=n.status,n==="fulfilled"||n==="rejected"}function Le(){}function qe(n,r,c){switch(c=n[c],c===void 0?n.push(r):c!==r&&(r.then(Le,Le),r=c),r.status){case"fulfilled":return r.value;case"rejected":throw n=r.reason,Pe(n),n;default:if(typeof r.status=="string")r.then(Le,Le);else{if(n=$s,n!==null&&100<n.shellSuspendCounter)throw Error(i(482));n=r,n.status="pending",n.then(function(h){if(r.status==="pending"){var g=r;g.status="fulfilled",g.value=h}},function(h){if(r.status==="pending"){var g=r;g.status="rejected",g.reason=h}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw n=r.reason,Pe(n),n}throw be=r,ce}}var be=null;function Qe(){if(be===null)throw Error(i(459));var n=be;return be=null,n}function Pe(n){if(n===ce||n===pe)throw Error(i(483))}var rt=!1;function ze(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function At(n,r){n=n.updateQueue,r.updateQueue===n&&(r.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function dt(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function Ft(n,r,c){var h=n.updateQueue;if(h===null)return null;if(h=h.shared,(Es&2)!==0){var g=h.pending;return g===null?r.next=r:(r.next=g.next,g.next=r),h.pending=r,r=el(n),Zc(n,null,c),r}return pc(n,h,r,c),el(n)}function jt(n,r,c){if(r=r.updateQueue,r!==null&&(r=r.shared,(c&4194048)!==0)){var h=r.lanes;h&=n.pendingLanes,c|=h,r.lanes=c,ye(n,c)}}function ga(n,r){var c=n.updateQueue,h=n.alternate;if(h!==null&&(h=h.updateQueue,c===h)){var g=null,j=null;if(c=c.firstBaseUpdate,c!==null){do{var Z={lane:c.lane,tag:c.tag,payload:c.payload,callback:null,next:null};j===null?g=j=Z:j=j.next=Z,c=c.next}while(c!==null);j===null?g=j=r:j=j.next=r}else g=j=r;c={baseState:h.baseState,firstBaseUpdate:g,lastBaseUpdate:j,shared:h.shared,callbacks:h.callbacks},n.updateQueue=c;return}n=c.lastBaseUpdate,n===null?c.firstBaseUpdate=r:n.next=r,c.lastBaseUpdate=r}var ra=!1;function Ra(){if(ra){var n=Ao;if(n!==null)throw n}}function la(n,r,c,h){ra=!1;var g=n.updateQueue;rt=!1;var j=g.firstBaseUpdate,Z=g.lastBaseUpdate,he=g.shared.pending;if(he!==null){g.shared.pending=null;var Se=he,Ke=Se.next;Se.next=null,Z===null?j=Ke:Z.next=Ke,Z=Se;var pt=n.alternate;pt!==null&&(pt=pt.updateQueue,he=pt.lastBaseUpdate,he!==Z&&(he===null?pt.firstBaseUpdate=Ke:he.next=Ke,pt.lastBaseUpdate=Se))}if(j!==null){var wt=g.baseState;Z=0,pt=Ke=Se=null,he=j;do{var We=he.lane&-536870913,Xe=We!==he.lane;if(Xe?(fs&We)===We:(h&We)===We){We!==0&&We===il&&(ra=!0),pt!==null&&(pt=pt.next={lane:0,tag:he.tag,payload:he.payload,callback:null,next:null});e:{var Qa=n,Sa=he;We=r;var Ds=c;switch(Sa.tag){case 1:if(Qa=Sa.payload,typeof Qa=="function"){wt=Qa.call(Ds,wt,We);break e}wt=Qa;break e;case 3:Qa.flags=Qa.flags&-65537|128;case 0:if(Qa=Sa.payload,We=typeof Qa=="function"?Qa.call(Ds,wt,We):Qa,We==null)break e;wt=m({},wt,We);break e;case 2:rt=!0}}We=he.callback,We!==null&&(n.flags|=64,Xe&&(n.flags|=8192),Xe=g.callbacks,Xe===null?g.callbacks=[We]:Xe.push(We))}else Xe={lane:We,tag:he.tag,payload:he.payload,callback:he.callback,next:null},pt===null?(Ke=pt=Xe,Se=wt):pt=pt.next=Xe,Z|=We;if(he=he.next,he===null){if(he=g.shared.pending,he===null)break;Xe=he,he=Xe.next,Xe.next=null,g.lastBaseUpdate=Xe,g.shared.pending=null}}while(!0);pt===null&&(Se=wt),g.baseState=Se,g.firstBaseUpdate=Ke,g.lastBaseUpdate=pt,j===null&&(g.shared.lanes=0),Ol|=Z,n.lanes=Z,n.memoizedState=wt}}function ts(n,r){if(typeof n!="function")throw Error(i(191,n));n.call(r)}function wn(n,r){var c=n.callbacks;if(c!==null)for(n.callbacks=null,n=0;n<c.length;n++)ts(c[n],r)}var Ta=ue(null),Aa=ue(0);function $t(n,r){n=hl,I(Aa,n),I(Ta,r),hl=n|r.baseLanes}function en(){I(Aa,hl),I(Ta,Ta.current)}function Da(){hl=Aa.current,k(Ta),k(Aa)}var Ka=0,ha=null,Ha=null,us=null,Os=!1,mn=!1,fn=!1,nn=0,Xa=0,hs=null,rn=0;function Ca(){throw Error(i(321))}function Un(n,r){if(r===null)return!1;for(var c=0;c<r.length&&c<n.length;c++)if(!Yt(n[c],r[c]))return!1;return!0}function Gi(n,r,c,h,g,j){return Ka=j,ha=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,z.H=n===null||n.memoizedState===null?rx:ox,fn=!1,j=c(h,g),fn=!1,mn&&(j=ui(r,c,h,g)),on(n),j}function on(n){z.H=Pu;var r=Ha!==null&&Ha.next!==null;if(Ka=0,us=Ha=ha=null,Os=!1,Xa=0,hs=null,r)throw Error(i(300));n===null||ai||(n=n.dependencies,n!==null&&nd(n)&&(ai=!0))}function ui(n,r,c,h){ha=n;var g=0;do{if(mn&&(hs=null),Xa=0,mn=!1,25<=g)throw Error(i(301));if(g+=1,us=Ha=null,n.updateQueue!=null){var j=n.updateQueue;j.lastEffect=null,j.events=null,j.stores=null,j.memoCache!=null&&(j.memoCache.index=0)}z.H=uw,j=r(c,h)}while(mn);return j}function Fs(){var n=z.H,r=n.useState()[0];return r=typeof r.then=="function"?$n(r):r,n=n.useState()[0],(Ha!==null?Ha.memoizedState:null)!==n&&(ha.flags|=1024),r}function gn(){var n=nn!==0;return nn=0,n}function hi(n,r,c){r.updateQueue=n.updateQueue,r.flags&=-2053,n.lanes&=~c}function Vn(n){if(Os){for(n=n.memoizedState;n!==null;){var r=n.queue;r!==null&&(r.pending=null),n=n.next}Os=!1}Ka=0,us=Ha=ha=null,mn=!1,Xa=nn=0,hs=null}function Qs(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return us===null?ha.memoizedState=us=n:us=us.next=n,us}function ms(){if(Ha===null){var n=ha.alternate;n=n!==null?n.memoizedState:null}else n=Ha.next;var r=us===null?ha.memoizedState:us.next;if(r!==null)us=r,Ha=n;else{if(n===null)throw ha.alternate===null?Error(i(467)):Error(i(310));Ha=n,n={memoizedState:Ha.memoizedState,baseState:Ha.baseState,baseQueue:Ha.baseQueue,queue:Ha.queue,next:null},us===null?ha.memoizedState=us=n:us=us.next=n}return us}function ti(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function $n(n){var r=Xa;return Xa+=1,hs===null&&(hs=[]),n=qe(hs,n,r),r=ha,(us===null?r.memoizedState:us.next)===null&&(r=r.alternate,z.H=r===null||r.memoizedState===null?rx:ox),n}function Ns(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return $n(n);if(n.$$typeof===O)return Fn(n)}throw Error(i(438,String(n)))}function pi(n){var r=null,c=ha.updateQueue;if(c!==null&&(r=c.memoCache),r==null){var h=ha.alternate;h!==null&&(h=h.updateQueue,h!==null&&(h=h.memoCache,h!=null&&(r={data:h.data.map(function(g){return g.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),c===null&&(c=ti(),ha.updateQueue=c),c.memoCache=r,c=r.data[r.index],c===void 0)for(c=r.data[r.index]=Array(n),h=0;h<n;h++)c[h]=Y;return r.index++,c}function Ln(n,r){return typeof r=="function"?r(n):r}function Mr(n){var r=ms();return mr(r,Ha,n)}function mr(n,r,c){var h=n.queue;if(h===null)throw Error(i(311));h.lastRenderedReducer=c;var g=n.baseQueue,j=h.pending;if(j!==null){if(g!==null){var Z=g.next;g.next=j.next,j.next=Z}r.baseQueue=g=j,h.pending=null}if(j=n.baseState,g===null)n.memoizedState=j;else{r=g.next;var he=Z=null,Se=null,Ke=r,pt=!1;do{var wt=Ke.lane&-536870913;if(wt!==Ke.lane?(fs&wt)===wt:(Ka&wt)===wt){var We=Ke.revertLane;if(We===0)Se!==null&&(Se=Se.next={lane:0,revertLane:0,action:Ke.action,hasEagerState:Ke.hasEagerState,eagerState:Ke.eagerState,next:null}),wt===il&&(pt=!0);else if((Ka&We)===We){Ke=Ke.next,We===il&&(pt=!0);continue}else wt={lane:0,revertLane:Ke.revertLane,action:Ke.action,hasEagerState:Ke.hasEagerState,eagerState:Ke.eagerState,next:null},Se===null?(he=Se=wt,Z=j):Se=Se.next=wt,ha.lanes|=We,Ol|=We;wt=Ke.action,fn&&c(j,wt),j=Ke.hasEagerState?Ke.eagerState:c(j,wt)}else We={lane:wt,revertLane:Ke.revertLane,action:Ke.action,hasEagerState:Ke.hasEagerState,eagerState:Ke.eagerState,next:null},Se===null?(he=Se=We,Z=j):Se=Se.next=We,ha.lanes|=wt,Ol|=wt;Ke=Ke.next}while(Ke!==null&&Ke!==r);if(Se===null?Z=j:Se.next=he,!Yt(j,n.memoizedState)&&(ai=!0,pt&&(c=Ao,c!==null)))throw c;n.memoizedState=j,n.baseState=Z,n.baseQueue=Se,h.lastRenderedState=j}return g===null&&(h.lanes=0),[n.memoizedState,h.dispatch]}function Tn(n){var r=ms(),c=r.queue;if(c===null)throw Error(i(311));c.lastRenderedReducer=n;var h=c.dispatch,g=c.pending,j=r.memoizedState;if(g!==null){c.pending=null;var Z=g=g.next;do j=n(j,Z.action),Z=Z.next;while(Z!==g);Yt(j,r.memoizedState)||(ai=!0),r.memoizedState=j,r.baseQueue===null&&(r.baseState=j),c.lastRenderedState=j}return[j,h]}function bc(n,r,c){var h=ha,g=ms(),j=xs;if(j){if(c===void 0)throw Error(i(407));c=c()}else c=r();var Z=!Yt((Ha||g).memoizedState,c);Z&&(g.memoizedState=c,ai=!0),g=g.queue;var he=Ul.bind(null,h,g,n);if(Ql(2048,8,he,[n]),g.getSnapshot!==r||Z||us!==null&&us.memoizedState.tag&1){if(h.flags|=2048,ho(9,Nc(),jc.bind(null,h,g,c,r),null),$s===null)throw Error(i(349));j||(Ka&124)!==0||rd(h,r,c)}return c}function rd(n,r,c){n.flags|=16384,n={getSnapshot:r,value:c},r=ha.updateQueue,r===null?(r=ti(),ha.updateQueue=r,r.stores=[n]):(c=r.stores,c===null?r.stores=[n]:c.push(n))}function jc(n,r,c,h){r.value=c,r.getSnapshot=h,Su(r)&&ku(n)}function Ul(n,r,c){return c(function(){Su(r)&&ku(n)})}function Su(n){var r=n.getSnapshot;n=n.value;try{var c=r();return!Yt(n,c)}catch{return!0}}function ku(n){var r=Zo(n,2);r!==null&&br(r,n,2)}function wc(n){var r=Qs();if(typeof n=="function"){var c=n;if(n=c(),fn){_t(!0);try{c()}finally{_t(!1)}}}return r.memoizedState=r.baseState=n,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ln,lastRenderedState:n},r}function uo(n,r,c,h){return n.baseState=c,mr(n,Ha,typeof h=="function"?h:Ln)}function Gp(n,r,c,h,g){if(Iu(n))throw Error(i(485));if(n=r.action,n!==null){var j={payload:g,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(Z){j.listeners.push(Z)}};z.T!==null?c(!0):j.isTransition=!1,h(j),c=r.pending,c===null?(j.next=r.pending=j,Fu(r,j)):(j.next=c.next,r.pending=c.next=j)}}function Fu(n,r){var c=r.action,h=r.payload,g=n.state;if(r.isTransition){var j=z.T,Z={};z.T=Z;try{var he=c(g,h),Se=z.S;Se!==null&&Se(Z,he),Eu(n,r,he)}catch(Ke){Ll(n,r,Ke)}finally{z.T=j}}else try{j=c(g,h),Eu(n,r,j)}catch(Ke){Ll(n,r,Ke)}}function Eu(n,r,c){c!==null&&typeof c=="object"&&typeof c.then=="function"?c.then(function(h){Jd(n,r,h)},function(h){return Ll(n,r,h)}):Jd(n,r,c)}function Jd(n,r,c){r.status="fulfilled",r.value=c,Xd(r),n.state=c,r=n.pending,r!==null&&(c=r.next,c===r?n.pending=null:(c=c.next,r.next=c,Fu(n,c)))}function Ll(n,r,c){var h=n.pending;if(n.pending=null,h!==null){h=h.next;do r.status="rejected",r.reason=c,Xd(r),r=r.next;while(r!==h)}n.action=null}function Xd(n){n=n.listeners;for(var r=0;r<n.length;r++)(0,n[r])()}function Zd(n,r){return r}function _c(n,r){if(xs){var c=$s.formState;if(c!==null){e:{var h=ha;if(xs){if(sn){t:{for(var g=sn,j=Dr;g.nodeType!==8;){if(!j){g=null;break t}if(g=go(g.nextSibling),g===null){g=null;break t}}j=g.data,g=j==="F!"||j==="F"?g:null}if(g){sn=go(g.nextSibling),h=g.data==="F!";break e}}nl(h)}h=!1}h&&(r=c[0])}}return c=Qs(),c.memoizedState=c.baseState=r,h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Zd,lastRenderedState:r},c.queue=h,c=sx.bind(null,ha,h),h.dispatch=c,h=wc(!1),j=Vp.bind(null,ha,!1,h.queue),h=Qs(),g={state:r,dispatch:null,action:n,pending:null},h.queue=g,c=Gp.bind(null,ha,g,j,c),g.dispatch=c,h.memoizedState=n,[r,c,!1]}function od(n){var r=ms();return Tl(r,Ha,n)}function Tl(n,r,c){if(r=mr(n,r,Zd)[0],n=Mr(Ln)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var h=$n(r)}catch(Z){throw Z===ce?pe:Z}else h=r;r=ms();var g=r.queue,j=g.dispatch;return c!==r.memoizedState&&(ha.flags|=2048,ho(9,Nc(),Uu.bind(null,g,c),null)),[h,j,n]}function Uu(n,r){n.action=r}function Lu(n){var r=ms(),c=Ha;if(c!==null)return Tl(r,c,n);ms(),r=r.memoizedState,c=ms();var h=c.queue.dispatch;return c.memoizedState=n,[r,h,!1]}function ho(n,r,c,h){return n={tag:n,create:c,deps:h,inst:r,next:null},r=ha.updateQueue,r===null&&(r=ti(),ha.updateQueue=r),c=r.lastEffect,c===null?r.lastEffect=n.next=n:(h=c.next,c.next=n,n.next=h,r.lastEffect=n),n}function Nc(){return{destroy:void 0,resource:void 0}}function ld(){return ms().memoizedState}function fr(n,r,c,h){var g=Qs();h=h===void 0?null:h,ha.flags|=n,g.memoizedState=ho(1|r,Nc(),c,h)}function Ql(n,r,c,h){var g=ms();h=h===void 0?null:h;var j=g.memoizedState.inst;Ha!==null&&h!==null&&Un(h,Ha.memoizedState.deps)?g.memoizedState=ho(r,j,c,h):(ha.flags|=n,g.memoizedState=ho(1|r,j,c,h))}function eA(n,r){fr(8390656,8,n,r)}function Tu(n,r){Ql(2048,8,n,r)}function tA(n,r){return Ql(4,2,n,r)}function rl(n,r){return Ql(4,4,n,r)}function Qu(n,r){if(typeof r=="function"){n=n();var c=r(n);return function(){typeof c=="function"?c():r(null)}}if(r!=null)return n=n(),r.current=n,function(){r.current=null}}function aA(n,r,c){c=c!=null?c.concat([n]):null,Ql(4,4,Qu.bind(null,r,n),c)}function sA(){}function nA(n,r){var c=ms();r=r===void 0?null:r;var h=c.memoizedState;return r!==null&&Un(r,h[1])?h[0]:(c.memoizedState=[n,r],n)}function Ru(n,r){var c=ms();r=r===void 0?null:r;var h=c.memoizedState;if(r!==null&&Un(r,h[1]))return h[0];if(h=n(),fn){_t(!0);try{n()}finally{_t(!1)}}return c.memoizedState=[h,r],h}function ol(n,r,c){return c===void 0||(Ka&1073741824)!==0?n.memoizedState=r:(n.memoizedState=c,n=Zx(),ha.lanes|=n,Ol|=n,c)}function cd(n,r,c,h){return Yt(c,r)?c:Ta.current!==null?(n=ol(n,c,h),Yt(n,r)||(ai=!0),n):(Ka&42)===0?(ai=!0,n.memoizedState=c):(n=Zx(),ha.lanes|=n,Ol|=n,r)}function Bc(n,r,c,h,g){var j=ee.p;ee.p=j!==0&&8>j?j:8;var Z=z.T,he={};z.T=he,Vp(n,!1,r,c);try{var Se=g(),Ke=z.S;if(Ke!==null&&Ke(he,Se),Se!==null&&typeof Se=="object"&&typeof Se.then=="function"){var pt=Cu(Se,h);lA(n,r,pt,vr(n))}else lA(n,r,h,vr(n))}catch(wt){lA(n,r,{then:function(){},status:"rejected",reason:wt},vr())}finally{ee.p=j,z.T=Z}}function po(){}function Or(n,r,c,h){if(n.tag!==5)throw Error(i(476));var g=mo(n).queue;Bc(n,g,r,le,c===null?po:function(){return Cc(n),c(h)})}function mo(n){var r=n.memoizedState;if(r!==null)return r;r={memoizedState:le,baseState:le,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ln,lastRenderedState:le},next:null};var c={};return r.next={memoizedState:c,baseState:c,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ln,lastRenderedState:c},next:null},n.memoizedState=r,n=n.alternate,n!==null&&(n.memoizedState=r),r}function Cc(n){var r=mo(n).next.queue;lA(n,r,{},vr())}function Sc(){return Fn(BA)}function iA(){return ms().memoizedState}function Du(){return ms().memoizedState}function rA(n){for(var r=n.return;r!==null;){switch(r.tag){case 24:case 3:var c=vr();n=dt(c);var h=Ft(r,n,c);h!==null&&(br(h,r,c),jt(h,r,c)),r={cache:Wd()},n.payload=r;return}r=r.return}}function oA(n,r,c){var h=vr();c={lane:h,revertLane:0,action:c,hasEagerState:!1,eagerState:null,next:null},Iu(n)?nx(r,c):(c=Xc(n,r,c,h),c!==null&&(br(c,n,h),ix(c,r,h)))}function sx(n,r,c){var h=vr();lA(n,r,c,h)}function lA(n,r,c,h){var g={lane:h,revertLane:0,action:c,hasEagerState:!1,eagerState:null,next:null};if(Iu(n))nx(r,g);else{var j=n.alternate;if(n.lanes===0&&(j===null||j.lanes===0)&&(j=r.lastRenderedReducer,j!==null))try{var Z=r.lastRenderedState,he=j(Z,c);if(g.hasEagerState=!0,g.eagerState=he,Yt(he,Z))return pc(n,r,g,0),$s===null&&hc(),!1}catch{}finally{}if(c=Xc(n,r,g,h),c!==null)return br(c,n,h),ix(c,r,h),!0}return!1}function Vp(n,r,c,h){if(h={lane:2,revertLane:Nm(),action:h,hasEagerState:!1,eagerState:null,next:null},Iu(n)){if(r)throw Error(i(479))}else r=Xc(n,c,h,2),r!==null&&br(r,n,2)}function Iu(n){var r=n.alternate;return n===ha||r!==null&&r===ha}function nx(n,r){mn=Os=!0;var c=n.pending;c===null?r.next=r:(r.next=c.next,c.next=r),n.pending=r}function ix(n,r,c){if((c&4194048)!==0){var h=r.lanes;h&=n.pendingLanes,c|=h,r.lanes=c,ye(n,c)}}var Pu={readContext:Fn,use:Ns,useCallback:Ca,useContext:Ca,useEffect:Ca,useImperativeHandle:Ca,useLayoutEffect:Ca,useInsertionEffect:Ca,useMemo:Ca,useReducer:Ca,useRef:Ca,useState:Ca,useDebugValue:Ca,useDeferredValue:Ca,useTransition:Ca,useSyncExternalStore:Ca,useId:Ca,useHostTransitionStatus:Ca,useFormState:Ca,useActionState:Ca,useOptimistic:Ca,useMemoCache:Ca,useCacheRefresh:Ca},rx={readContext:Fn,use:Ns,useCallback:function(n,r){return Qs().memoizedState=[n,r===void 0?null:r],n},useContext:Fn,useEffect:eA,useImperativeHandle:function(n,r,c){c=c!=null?c.concat([n]):null,fr(4194308,4,Qu.bind(null,r,n),c)},useLayoutEffect:function(n,r){return fr(4194308,4,n,r)},useInsertionEffect:function(n,r){fr(4,2,n,r)},useMemo:function(n,r){var c=Qs();r=r===void 0?null:r;var h=n();if(fn){_t(!0);try{n()}finally{_t(!1)}}return c.memoizedState=[h,r],h},useReducer:function(n,r,c){var h=Qs();if(c!==void 0){var g=c(r);if(fn){_t(!0);try{c(r)}finally{_t(!1)}}}else g=r;return h.memoizedState=h.baseState=g,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:g},h.queue=n,n=n.dispatch=oA.bind(null,ha,n),[h.memoizedState,n]},useRef:function(n){var r=Qs();return n={current:n},r.memoizedState=n},useState:function(n){n=wc(n);var r=n.queue,c=sx.bind(null,ha,r);return r.dispatch=c,[n.memoizedState,c]},useDebugValue:sA,useDeferredValue:function(n,r){var c=Qs();return ol(c,n,r)},useTransition:function(){var n=wc(!1);return n=Bc.bind(null,ha,n.queue,!0,!1),Qs().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,r,c){var h=ha,g=Qs();if(xs){if(c===void 0)throw Error(i(407));c=c()}else{if(c=r(),$s===null)throw Error(i(349));(fs&124)!==0||rd(h,r,c)}g.memoizedState=c;var j={value:c,getSnapshot:r};return g.queue=j,eA(Ul.bind(null,h,j,n),[n]),h.flags|=2048,ho(9,Nc(),jc.bind(null,h,j,c,r),null),c},useId:function(){var n=Qs(),r=$s.identifierPrefix;if(xs){var c=oo,h=ro;c=(h&~(1<<32-Nt(h)-1)).toString(32)+c,r=""+r+"R"+c,c=nn++,0<c&&(r+="H"+c.toString(32)),r+=""}else c=rn++,r=""+r+"r"+c.toString(32)+"";return n.memoizedState=r},useHostTransitionStatus:Sc,useFormState:_c,useActionState:_c,useOptimistic:function(n){var r=Qs();r.memoizedState=r.baseState=n;var c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=c,r=Vp.bind(null,ha,!0,c),c.dispatch=r,[n,r]},useMemoCache:pi,useCacheRefresh:function(){return Qs().memoizedState=rA.bind(null,ha)}},ox={readContext:Fn,use:Ns,useCallback:nA,useContext:Fn,useEffect:Tu,useImperativeHandle:aA,useInsertionEffect:tA,useLayoutEffect:rl,useMemo:Ru,useReducer:Mr,useRef:ld,useState:function(){return Mr(Ln)},useDebugValue:sA,useDeferredValue:function(n,r){var c=ms();return cd(c,Ha.memoizedState,n,r)},useTransition:function(){var n=Mr(Ln)[0],r=ms().memoizedState;return[typeof n=="boolean"?n:$n(n),r]},useSyncExternalStore:bc,useId:iA,useHostTransitionStatus:Sc,useFormState:od,useActionState:od,useOptimistic:function(n,r){var c=ms();return uo(c,Ha,n,r)},useMemoCache:pi,useCacheRefresh:Du},uw={readContext:Fn,use:Ns,useCallback:nA,useContext:Fn,useEffect:Tu,useImperativeHandle:aA,useInsertionEffect:tA,useLayoutEffect:rl,useMemo:Ru,useReducer:Tn,useRef:ld,useState:function(){return Tn(Ln)},useDebugValue:sA,useDeferredValue:function(n,r){var c=ms();return Ha===null?ol(c,n,r):cd(c,Ha.memoizedState,n,r)},useTransition:function(){var n=Tn(Ln)[0],r=ms().memoizedState;return[typeof n=="boolean"?n:$n(n),r]},useSyncExternalStore:bc,useId:iA,useHostTransitionStatus:Sc,useFormState:Lu,useActionState:Lu,useOptimistic:function(n,r){var c=ms();return Ha!==null?uo(c,Ha,n,r):(c.baseState=n,[n,c.queue.dispatch])},useMemoCache:pi,useCacheRefresh:Du},dd=null,cA=0;function Hu(n){var r=cA;return cA+=1,dd===null&&(dd=[]),qe(dd,n,r)}function dA(n,r){r=r.props.ref,n.ref=r!==void 0?r:null}function Mu(n,r){throw r.$$typeof===b?Error(i(525)):(n=Object.prototype.toString.call(r),Error(i(31,n==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":n)))}function lx(n){var r=n._init;return r(n._payload)}function cx(n){function r(Ie,Te){if(n){var Me=Ie.deletions;Me===null?(Ie.deletions=[Te],Ie.flags|=16):Me.push(Te)}}function c(Ie,Te){if(!n)return null;for(;Te!==null;)r(Ie,Te),Te=Te.sibling;return null}function h(Ie){for(var Te=new Map;Ie!==null;)Ie.key!==null?Te.set(Ie.key,Ie):Te.set(Ie.index,Ie),Ie=Ie.sibling;return Te}function g(Ie,Te){return Ie=Rr(Ie,Te),Ie.index=0,Ie.sibling=null,Ie}function j(Ie,Te,Me){return Ie.index=Me,n?(Me=Ie.alternate,Me!==null?(Me=Me.index,Me<Te?(Ie.flags|=67108866,Te):Me):(Ie.flags|=67108866,Te)):(Ie.flags|=1048576,Te)}function Z(Ie){return n&&Ie.alternate===null&&(Ie.flags|=67108866),Ie}function he(Ie,Te,Me,ft){return Te===null||Te.tag!==6?(Te=ed(Me,Ie.mode,ft),Te.return=Ie,Te):(Te=g(Te,Me),Te.return=Ie,Te)}function Se(Ie,Te,Me,ft){var ma=Me.type;return ma===C?pt(Ie,Te,Me.props.children,ft,Me.key):Te!==null&&(Te.elementType===ma||typeof ma=="object"&&ma!==null&&ma.$$typeof===U&&lx(ma)===Te.type)?(Te=g(Te,Me.props),dA(Te,Me),Te.return=Ie,Te):(Te=tl(Me.type,Me.key,Me.props,null,Ie.mode,ft),dA(Te,Me),Te.return=Ie,Te)}function Ke(Ie,Te,Me,ft){return Te===null||Te.tag!==4||Te.stateNode.containerInfo!==Me.containerInfo||Te.stateNode.implementation!==Me.implementation?(Te=fc(Me,Ie.mode,ft),Te.return=Ie,Te):(Te=g(Te,Me.children||[]),Te.return=Ie,Te)}function pt(Ie,Te,Me,ft,ma){return Te===null||Te.tag!==7?(Te=no(Me,Ie.mode,ft,ma),Te.return=Ie,Te):(Te=g(Te,Me),Te.return=Ie,Te)}function wt(Ie,Te,Me){if(typeof Te=="string"&&Te!==""||typeof Te=="number"||typeof Te=="bigint")return Te=ed(""+Te,Ie.mode,Me),Te.return=Ie,Te;if(typeof Te=="object"&&Te!==null){switch(Te.$$typeof){case v:return Me=tl(Te.type,Te.key,Te.props,null,Ie.mode,Me),dA(Me,Te),Me.return=Ie,Me;case x:return Te=fc(Te,Ie.mode,Me),Te.return=Ie,Te;case U:var ft=Te._init;return Te=ft(Te._payload),wt(Ie,Te,Me)}if(R(Te)||Q(Te))return Te=no(Te,Ie.mode,Me,null),Te.return=Ie,Te;if(typeof Te.then=="function")return wt(Ie,Hu(Te),Me);if(Te.$$typeof===O)return wt(Ie,To(Ie,Te),Me);Mu(Ie,Te)}return null}function We(Ie,Te,Me,ft){var ma=Te!==null?Te.key:null;if(typeof Me=="string"&&Me!==""||typeof Me=="number"||typeof Me=="bigint")return ma!==null?null:he(Ie,Te,""+Me,ft);if(typeof Me=="object"&&Me!==null){switch(Me.$$typeof){case v:return Me.key===ma?Se(Ie,Te,Me,ft):null;case x:return Me.key===ma?Ke(Ie,Te,Me,ft):null;case U:return ma=Me._init,Me=ma(Me._payload),We(Ie,Te,Me,ft)}if(R(Me)||Q(Me))return ma!==null?null:pt(Ie,Te,Me,ft,null);if(typeof Me.then=="function")return We(Ie,Te,Hu(Me),ft);if(Me.$$typeof===O)return We(Ie,Te,To(Ie,Me),ft);Mu(Ie,Me)}return null}function Xe(Ie,Te,Me,ft,ma){if(typeof ft=="string"&&ft!==""||typeof ft=="number"||typeof ft=="bigint")return Ie=Ie.get(Me)||null,he(Te,Ie,""+ft,ma);if(typeof ft=="object"&&ft!==null){switch(ft.$$typeof){case v:return Ie=Ie.get(ft.key===null?Me:ft.key)||null,Se(Te,Ie,ft,ma);case x:return Ie=Ie.get(ft.key===null?Me:ft.key)||null,Ke(Te,Ie,ft,ma);case U:var as=ft._init;return ft=as(ft._payload),Xe(Ie,Te,Me,ft,ma)}if(R(ft)||Q(ft))return Ie=Ie.get(Me)||null,pt(Te,Ie,ft,ma,null);if(typeof ft.then=="function")return Xe(Ie,Te,Me,Hu(ft),ma);if(ft.$$typeof===O)return Xe(Ie,Te,Me,To(Te,ft),ma);Mu(Te,ft)}return null}function Qa(Ie,Te,Me,ft){for(var ma=null,as=null,ya=Te,Ua=Te=0,ni=null;ya!==null&&Ua<Me.length;Ua++){ya.index>Ua?(ni=ya,ya=null):ni=ya.sibling;var bs=We(Ie,ya,Me[Ua],ft);if(bs===null){ya===null&&(ya=ni);break}n&&ya&&bs.alternate===null&&r(Ie,ya),Te=j(bs,Te,Ua),as===null?ma=bs:as.sibling=bs,as=bs,ya=ni}if(Ua===Me.length)return c(Ie,ya),xs&&sl(Ie,Ua),ma;if(ya===null){for(;Ua<Me.length;Ua++)ya=wt(Ie,Me[Ua],ft),ya!==null&&(Te=j(ya,Te,Ua),as===null?ma=ya:as.sibling=ya,as=ya);return xs&&sl(Ie,Ua),ma}for(ya=h(ya);Ua<Me.length;Ua++)ni=Xe(ya,Ie,Ua,Me[Ua],ft),ni!==null&&(n&&ni.alternate!==null&&ya.delete(ni.key===null?Ua:ni.key),Te=j(ni,Te,Ua),as===null?ma=ni:as.sibling=ni,as=ni);return n&&ya.forEach(function(Jl){return r(Ie,Jl)}),xs&&sl(Ie,Ua),ma}function Sa(Ie,Te,Me,ft){if(Me==null)throw Error(i(151));for(var ma=null,as=null,ya=Te,Ua=Te=0,ni=null,bs=Me.next();ya!==null&&!bs.done;Ua++,bs=Me.next()){ya.index>Ua?(ni=ya,ya=null):ni=ya.sibling;var Jl=We(Ie,ya,bs.value,ft);if(Jl===null){ya===null&&(ya=ni);break}n&&ya&&Jl.alternate===null&&r(Ie,ya),Te=j(Jl,Te,Ua),as===null?ma=Jl:as.sibling=Jl,as=Jl,ya=ni}if(bs.done)return c(Ie,ya),xs&&sl(Ie,Ua),ma;if(ya===null){for(;!bs.done;Ua++,bs=Me.next())bs=wt(Ie,bs.value,ft),bs!==null&&(Te=j(bs,Te,Ua),as===null?ma=bs:as.sibling=bs,as=bs);return xs&&sl(Ie,Ua),ma}for(ya=h(ya);!bs.done;Ua++,bs=Me.next())bs=Xe(ya,Ie,Ua,bs.value,ft),bs!==null&&(n&&bs.alternate!==null&&ya.delete(bs.key===null?Ua:bs.key),Te=j(bs,Te,Ua),as===null?ma=bs:as.sibling=bs,as=bs);return n&&ya.forEach(function(h2){return r(Ie,h2)}),xs&&sl(Ie,Ua),ma}function Ds(Ie,Te,Me,ft){if(typeof Me=="object"&&Me!==null&&Me.type===C&&Me.key===null&&(Me=Me.props.children),typeof Me=="object"&&Me!==null){switch(Me.$$typeof){case v:e:{for(var ma=Me.key;Te!==null;){if(Te.key===ma){if(ma=Me.type,ma===C){if(Te.tag===7){c(Ie,Te.sibling),ft=g(Te,Me.props.children),ft.return=Ie,Ie=ft;break e}}else if(Te.elementType===ma||typeof ma=="object"&&ma!==null&&ma.$$typeof===U&&lx(ma)===Te.type){c(Ie,Te.sibling),ft=g(Te,Me.props),dA(ft,Me),ft.return=Ie,Ie=ft;break e}c(Ie,Te);break}else r(Ie,Te);Te=Te.sibling}Me.type===C?(ft=no(Me.props.children,Ie.mode,ft,Me.key),ft.return=Ie,Ie=ft):(ft=tl(Me.type,Me.key,Me.props,null,Ie.mode,ft),dA(ft,Me),ft.return=Ie,Ie=ft)}return Z(Ie);case x:e:{for(ma=Me.key;Te!==null;){if(Te.key===ma)if(Te.tag===4&&Te.stateNode.containerInfo===Me.containerInfo&&Te.stateNode.implementation===Me.implementation){c(Ie,Te.sibling),ft=g(Te,Me.children||[]),ft.return=Ie,Ie=ft;break e}else{c(Ie,Te);break}else r(Ie,Te);Te=Te.sibling}ft=fc(Me,Ie.mode,ft),ft.return=Ie,Ie=ft}return Z(Ie);case U:return ma=Me._init,Me=ma(Me._payload),Ds(Ie,Te,Me,ft)}if(R(Me))return Qa(Ie,Te,Me,ft);if(Q(Me)){if(ma=Q(Me),typeof ma!="function")throw Error(i(150));return Me=ma.call(Me),Sa(Ie,Te,Me,ft)}if(typeof Me.then=="function")return Ds(Ie,Te,Hu(Me),ft);if(Me.$$typeof===O)return Ds(Ie,Te,To(Ie,Me),ft);Mu(Ie,Me)}return typeof Me=="string"&&Me!==""||typeof Me=="number"||typeof Me=="bigint"?(Me=""+Me,Te!==null&&Te.tag===6?(c(Ie,Te.sibling),ft=g(Te,Me),ft.return=Ie,Ie=ft):(c(Ie,Te),ft=ed(Me,Ie.mode,ft),ft.return=Ie,Ie=ft),Z(Ie)):c(Ie,Te)}return function(Ie,Te,Me,ft){try{cA=0;var ma=Ds(Ie,Te,Me,ft);return dd=null,ma}catch(ya){if(ya===ce||ya===pe)throw ya;var as=ei(29,ya,null,Ie.mode);return as.lanes=ft,as.return=Ie,as}finally{}}}var Ad=cx(!0),dx=cx(!1),zr=ue(null),Qo=null;function Rl(n){var r=n.alternate;I(Wn,Wn.current&1),I(zr,n),Qo===null&&(r===null||Ta.current!==null||r.memoizedState!==null)&&(Qo=n)}function Ax(n){if(n.tag===22){if(I(Wn,Wn.current),I(zr,n),Qo===null){var r=n.alternate;r!==null&&r.memoizedState!==null&&(Qo=n)}}else Dl()}function Dl(){I(Wn,Wn.current),I(zr,zr.current)}function ll(n){k(zr),Qo===n&&(Qo=null),k(Wn)}var Wn=ue(0);function Ou(n){for(var r=n;r!==null;){if(r.tag===13){var c=r.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||c.data==="$?"||Dm(c)))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===n)break;for(;r.sibling===null;){if(r.return===null||r.return===n)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}function $p(n,r,c,h){r=n.memoizedState,c=c(h,r),c=c==null?r:m({},r,c),n.memoizedState=c,n.lanes===0&&(n.updateQueue.baseState=c)}var Wp={enqueueSetState:function(n,r,c){n=n._reactInternals;var h=vr(),g=dt(h);g.payload=r,c!=null&&(g.callback=c),r=Ft(n,g,h),r!==null&&(br(r,n,h),jt(r,n,h))},enqueueReplaceState:function(n,r,c){n=n._reactInternals;var h=vr(),g=dt(h);g.tag=1,g.payload=r,c!=null&&(g.callback=c),r=Ft(n,g,h),r!==null&&(br(r,n,h),jt(r,n,h))},enqueueForceUpdate:function(n,r){n=n._reactInternals;var c=vr(),h=dt(c);h.tag=2,r!=null&&(h.callback=r),r=Ft(n,h,c),r!==null&&(br(r,n,c),jt(r,n,c))}};function ux(n,r,c,h,g,j,Z){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(h,j,Z):r.prototype&&r.prototype.isPureReactComponent?!vs(c,h)||!vs(g,j):!0}function hx(n,r,c,h){n=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(c,h),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(c,h),r.state!==n&&Wp.enqueueReplaceState(r,r.state,null)}function kc(n,r){var c=r;if("ref"in r){c={};for(var h in r)h!=="ref"&&(c[h]=r[h])}if(n=n.defaultProps){c===r&&(c=m({},c));for(var g in n)c[g]===void 0&&(c[g]=n[g])}return c}var zu=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)};function px(n){zu(n)}function mx(n){console.error(n)}function fx(n){zu(n)}function qu(n,r){try{var c=n.onUncaughtError;c(r.value,{componentStack:r.stack})}catch(h){setTimeout(function(){throw h})}}function gx(n,r,c){try{var h=n.onCaughtError;h(c.value,{componentStack:c.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(g){setTimeout(function(){throw g})}}function Yp(n,r,c){return c=dt(c),c.tag=3,c.payload={element:null},c.callback=function(){qu(n,r)},c}function xx(n){return n=dt(n),n.tag=3,n}function yx(n,r,c,h){var g=c.type.getDerivedStateFromError;if(typeof g=="function"){var j=h.value;n.payload=function(){return g(j)},n.callback=function(){gx(r,c,h)}}var Z=c.stateNode;Z!==null&&typeof Z.componentDidCatch=="function"&&(n.callback=function(){gx(r,c,h),typeof g!="function"&&(zl===null?zl=new Set([this]):zl.add(this));var he=h.stack;this.componentDidCatch(h.value,{componentStack:he!==null?he:""})})}function hw(n,r,c,h,g){if(c.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){if(r=c.alternate,r!==null&&El(r,c,g,!0),c=zr.current,c!==null){switch(c.tag){case 13:return Qo===null?vm():c.alternate===null&&_n===0&&(_n=3),c.flags&=-257,c.flags|=65536,c.lanes=g,h===fe?c.flags|=16384:(r=c.updateQueue,r===null?c.updateQueue=new Set([h]):r.add(h),jm(n,h,g)),!1;case 22:return c.flags|=65536,h===fe?c.flags|=16384:(r=c.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([h])},c.updateQueue=r):(c=r.retryQueue,c===null?r.retryQueue=new Set([h]):c.add(h)),jm(n,h,g)),!1}throw Error(i(435,c.tag))}return jm(n,h,g),vm(),!1}if(xs)return r=zr.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=g,h!==$d&&(n=Error(i(422),{cause:h}),Fl(Oi(n,c)))):(h!==$d&&(r=Error(i(423),{cause:h}),Fl(Oi(r,c))),n=n.current.alternate,n.flags|=65536,g&=-g,n.lanes|=g,h=Oi(h,c),g=Yp(n.stateNode,h,g),ga(n,g),_n!==4&&(_n=2)),!1;var j=Error(i(520),{cause:h});if(j=Oi(j,c),gA===null?gA=[j]:gA.push(j),_n!==4&&(_n=2),r===null)return!0;h=Oi(h,c),c=r;do{switch(c.tag){case 3:return c.flags|=65536,n=g&-g,c.lanes|=n,n=Yp(c.stateNode,h,n),ga(c,n),!1;case 1:if(r=c.type,j=c.stateNode,(c.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||j!==null&&typeof j.componentDidCatch=="function"&&(zl===null||!zl.has(j))))return c.flags|=65536,g&=-g,c.lanes|=g,g=xx(g),yx(g,n,c,h),ga(c,g),!1}c=c.return}while(c!==null);return!1}var vx=Error(i(461)),ai=!1;function mi(n,r,c,h){r.child=n===null?dx(r,null,c,h):Ad(r,n.child,c,h)}function bx(n,r,c,h,g){c=c.render;var j=r.ref;if("ref"in h){var Z={};for(var he in h)he!=="ref"&&(Z[he]=h[he])}else Z=h;return Hr(r),h=Gi(n,r,c,Z,j,g),he=gn(),n!==null&&!ai?(hi(n,r,g),cl(n,r,g)):(xs&&he&&gc(r),r.flags|=1,mi(n,r,h,g),r.child)}function jx(n,r,c,h,g){if(n===null){var j=c.type;return typeof j=="function"&&!Sl(j)&&j.defaultProps===void 0&&c.compare===null?(r.tag=15,r.type=j,wx(n,r,j,h,g)):(n=tl(c.type,null,h,r,r.mode,g),n.ref=r.ref,n.return=r,r.child=n)}if(j=n.child,!nm(n,g)){var Z=j.memoizedProps;if(c=c.compare,c=c!==null?c:vs,c(Z,h)&&n.ref===r.ref)return cl(n,r,g)}return r.flags|=1,n=Rr(j,h),n.ref=r.ref,n.return=r,r.child=n}function wx(n,r,c,h,g){if(n!==null){var j=n.memoizedProps;if(vs(j,h)&&n.ref===r.ref)if(ai=!1,r.pendingProps=h=j,nm(n,g))(n.flags&131072)!==0&&(ai=!0);else return r.lanes=n.lanes,cl(n,r,g)}return Jp(n,r,c,h,g)}function _x(n,r,c){var h=r.pendingProps,g=h.children,j=n!==null?n.memoizedState:null;if(h.mode==="hidden"){if((r.flags&128)!==0){if(h=j!==null?j.baseLanes|c:c,n!==null){for(g=r.child=n.child,j=0;g!==null;)j=j|g.lanes|g.childLanes,g=g.sibling;r.childLanes=j&~h}else r.childLanes=0,r.child=null;return Nx(n,r,h,c)}if((c&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},n!==null&&M(r,j!==null?j.cachePool:null),j!==null?$t(r,j):en(),Ax(r);else return r.lanes=r.childLanes=536870912,Nx(n,r,j!==null?j.baseLanes|c:c,c)}else j!==null?(M(r,j.cachePool),$t(r,j),Dl(),r.memoizedState=null):(n!==null&&M(r,null),en(),Dl());return mi(n,r,g,c),r.child}function Nx(n,r,c,h){var g=F();return g=g===null?null:{parent:En._currentValue,pool:g},r.memoizedState={baseLanes:c,cachePool:g},n!==null&&M(r,null),en(),Ax(r),n!==null&&El(n,r,h,!0),null}function Ku(n,r){var c=r.ref;if(c===null)n!==null&&n.ref!==null&&(r.flags|=4194816);else{if(typeof c!="function"&&typeof c!="object")throw Error(i(284));(n===null||n.ref!==c)&&(r.flags|=4194816)}}function Jp(n,r,c,h,g){return Hr(r),c=Gi(n,r,c,h,void 0,g),h=gn(),n!==null&&!ai?(hi(n,r,g),cl(n,r,g)):(xs&&h&&gc(r),r.flags|=1,mi(n,r,c,g),r.child)}function Bx(n,r,c,h,g,j){return Hr(r),r.updateQueue=null,c=ui(r,h,c,g),on(n),h=gn(),n!==null&&!ai?(hi(n,r,j),cl(n,r,j)):(xs&&h&&gc(r),r.flags|=1,mi(n,r,c,j),r.child)}function Cx(n,r,c,h,g){if(Hr(r),r.stateNode===null){var j=On,Z=c.contextType;typeof Z=="object"&&Z!==null&&(j=Fn(Z)),j=new c(h,j),r.memoizedState=j.state!==null&&j.state!==void 0?j.state:null,j.updater=Wp,r.stateNode=j,j._reactInternals=r,j=r.stateNode,j.props=h,j.state=r.memoizedState,j.refs={},ze(r),Z=c.contextType,j.context=typeof Z=="object"&&Z!==null?Fn(Z):On,j.state=r.memoizedState,Z=c.getDerivedStateFromProps,typeof Z=="function"&&($p(r,c,Z,h),j.state=r.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof j.getSnapshotBeforeUpdate=="function"||typeof j.UNSAFE_componentWillMount!="function"&&typeof j.componentWillMount!="function"||(Z=j.state,typeof j.componentWillMount=="function"&&j.componentWillMount(),typeof j.UNSAFE_componentWillMount=="function"&&j.UNSAFE_componentWillMount(),Z!==j.state&&Wp.enqueueReplaceState(j,j.state,null),la(r,h,j,g),Ra(),j.state=r.memoizedState),typeof j.componentDidMount=="function"&&(r.flags|=4194308),h=!0}else if(n===null){j=r.stateNode;var he=r.memoizedProps,Se=kc(c,he);j.props=Se;var Ke=j.context,pt=c.contextType;Z=On,typeof pt=="object"&&pt!==null&&(Z=Fn(pt));var wt=c.getDerivedStateFromProps;pt=typeof wt=="function"||typeof j.getSnapshotBeforeUpdate=="function",he=r.pendingProps!==he,pt||typeof j.UNSAFE_componentWillReceiveProps!="function"&&typeof j.componentWillReceiveProps!="function"||(he||Ke!==Z)&&hx(r,j,h,Z),rt=!1;var We=r.memoizedState;j.state=We,la(r,h,j,g),Ra(),Ke=r.memoizedState,he||We!==Ke||rt?(typeof wt=="function"&&($p(r,c,wt,h),Ke=r.memoizedState),(Se=rt||ux(r,c,Se,h,We,Ke,Z))?(pt||typeof j.UNSAFE_componentWillMount!="function"&&typeof j.componentWillMount!="function"||(typeof j.componentWillMount=="function"&&j.componentWillMount(),typeof j.UNSAFE_componentWillMount=="function"&&j.UNSAFE_componentWillMount()),typeof j.componentDidMount=="function"&&(r.flags|=4194308)):(typeof j.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=h,r.memoizedState=Ke),j.props=h,j.state=Ke,j.context=Z,h=Se):(typeof j.componentDidMount=="function"&&(r.flags|=4194308),h=!1)}else{j=r.stateNode,At(n,r),Z=r.memoizedProps,pt=kc(c,Z),j.props=pt,wt=r.pendingProps,We=j.context,Ke=c.contextType,Se=On,typeof Ke=="object"&&Ke!==null&&(Se=Fn(Ke)),he=c.getDerivedStateFromProps,(Ke=typeof he=="function"||typeof j.getSnapshotBeforeUpdate=="function")||typeof j.UNSAFE_componentWillReceiveProps!="function"&&typeof j.componentWillReceiveProps!="function"||(Z!==wt||We!==Se)&&hx(r,j,h,Se),rt=!1,We=r.memoizedState,j.state=We,la(r,h,j,g),Ra();var Xe=r.memoizedState;Z!==wt||We!==Xe||rt||n!==null&&n.dependencies!==null&&nd(n.dependencies)?(typeof he=="function"&&($p(r,c,he,h),Xe=r.memoizedState),(pt=rt||ux(r,c,pt,h,We,Xe,Se)||n!==null&&n.dependencies!==null&&nd(n.dependencies))?(Ke||typeof j.UNSAFE_componentWillUpdate!="function"&&typeof j.componentWillUpdate!="function"||(typeof j.componentWillUpdate=="function"&&j.componentWillUpdate(h,Xe,Se),typeof j.UNSAFE_componentWillUpdate=="function"&&j.UNSAFE_componentWillUpdate(h,Xe,Se)),typeof j.componentDidUpdate=="function"&&(r.flags|=4),typeof j.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof j.componentDidUpdate!="function"||Z===n.memoizedProps&&We===n.memoizedState||(r.flags|=4),typeof j.getSnapshotBeforeUpdate!="function"||Z===n.memoizedProps&&We===n.memoizedState||(r.flags|=1024),r.memoizedProps=h,r.memoizedState=Xe),j.props=h,j.state=Xe,j.context=Se,h=pt):(typeof j.componentDidUpdate!="function"||Z===n.memoizedProps&&We===n.memoizedState||(r.flags|=4),typeof j.getSnapshotBeforeUpdate!="function"||Z===n.memoizedProps&&We===n.memoizedState||(r.flags|=1024),h=!1)}return j=h,Ku(n,r),h=(r.flags&128)!==0,j||h?(j=r.stateNode,c=h&&typeof c.getDerivedStateFromError!="function"?null:j.render(),r.flags|=1,n!==null&&h?(r.child=Ad(r,n.child,null,g),r.child=Ad(r,null,c,g)):mi(n,r,c,g),r.memoizedState=j.state,n=r.child):n=cl(n,r,g),n}function Sx(n,r,c,h){return Ki(),r.flags|=256,mi(n,r,c,h),r.child}var Xp={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Zp(n){return{baseLanes:n,cachePool:se()}}function em(n,r,c){return n=n!==null?n.childLanes&~c:0,r&&(n|=qr),n}function kx(n,r,c){var h=r.pendingProps,g=!1,j=(r.flags&128)!==0,Z;if((Z=j)||(Z=n!==null&&n.memoizedState===null?!1:(Wn.current&2)!==0),Z&&(g=!0,r.flags&=-129),Z=(r.flags&32)!==0,r.flags&=-33,n===null){if(xs){if(g?Rl(r):Dl(),xs){var he=sn,Se;if(Se=he){e:{for(Se=he,he=Dr;Se.nodeType!==8;){if(!he){he=null;break e}if(Se=go(Se.nextSibling),Se===null){he=null;break e}}he=Se}he!==null?(r.memoizedState={dehydrated:he,treeContext:al!==null?{id:ro,overflow:oo}:null,retryLane:536870912,hydrationErrors:null},Se=ei(18,null,null,0),Se.stateNode=he,Se.return=r,r.child=Se,kn=r,sn=null,Se=!0):Se=!1}Se||nl(r)}if(he=r.memoizedState,he!==null&&(he=he.dehydrated,he!==null))return Dm(he)?r.lanes=32:r.lanes=536870912,null;ll(r)}return he=h.children,h=h.fallback,g?(Dl(),g=r.mode,he=Gu({mode:"hidden",children:he},g),h=no(h,g,c,null),he.return=r,h.return=r,he.sibling=h,r.child=he,g=r.child,g.memoizedState=Zp(c),g.childLanes=em(n,Z,c),r.memoizedState=Xp,h):(Rl(r),tm(r,he))}if(Se=n.memoizedState,Se!==null&&(he=Se.dehydrated,he!==null)){if(j)r.flags&256?(Rl(r),r.flags&=-257,r=am(n,r,c)):r.memoizedState!==null?(Dl(),r.child=n.child,r.flags|=128,r=null):(Dl(),g=h.fallback,he=r.mode,h=Gu({mode:"visible",children:h.children},he),g=no(g,he,c,null),g.flags|=2,h.return=r,g.return=r,h.sibling=g,r.child=h,Ad(r,n.child,null,c),h=r.child,h.memoizedState=Zp(c),h.childLanes=em(n,Z,c),r.memoizedState=Xp,r=g);else if(Rl(r),Dm(he)){if(Z=he.nextSibling&&he.nextSibling.dataset,Z)var Ke=Z.dgst;Z=Ke,h=Error(i(419)),h.stack="",h.digest=Z,Fl({value:h,source:null,stack:null}),r=am(n,r,c)}else if(ai||El(n,r,c,!1),Z=(c&n.childLanes)!==0,ai||Z){if(Z=$s,Z!==null&&(h=c&-c,h=(h&42)!==0?1:Ce(h),h=(h&(Z.suspendedLanes|c))!==0?0:h,h!==0&&h!==Se.retryLane))throw Se.retryLane=h,Zo(n,h),br(Z,n,h),vx;he.data==="$?"||vm(),r=am(n,r,c)}else he.data==="$?"?(r.flags|=192,r.child=n.child,r=null):(n=Se.treeContext,sn=go(he.nextSibling),kn=r,xs=!0,Uo=null,Dr=!1,n!==null&&(ir[qi++]=ro,ir[qi++]=oo,ir[qi++]=al,ro=n.id,oo=n.overflow,al=r),r=tm(r,h.children),r.flags|=4096);return r}return g?(Dl(),g=h.fallback,he=r.mode,Se=n.child,Ke=Se.sibling,h=Rr(Se,{mode:"hidden",children:h.children}),h.subtreeFlags=Se.subtreeFlags&65011712,Ke!==null?g=Rr(Ke,g):(g=no(g,he,c,null),g.flags|=2),g.return=r,h.return=r,h.sibling=g,r.child=h,h=g,g=r.child,he=n.child.memoizedState,he===null?he=Zp(c):(Se=he.cachePool,Se!==null?(Ke=En._currentValue,Se=Se.parent!==Ke?{parent:Ke,pool:Ke}:Se):Se=se(),he={baseLanes:he.baseLanes|c,cachePool:Se}),g.memoizedState=he,g.childLanes=em(n,Z,c),r.memoizedState=Xp,h):(Rl(r),c=n.child,n=c.sibling,c=Rr(c,{mode:"visible",children:h.children}),c.return=r,c.sibling=null,n!==null&&(Z=r.deletions,Z===null?(r.deletions=[n],r.flags|=16):Z.push(n)),r.child=c,r.memoizedState=null,c)}function tm(n,r){return r=Gu({mode:"visible",children:r},n.mode),r.return=n,n.child=r}function Gu(n,r){return n=ei(22,n,null,r),n.lanes=0,n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},n}function am(n,r,c){return Ad(r,n.child,null,c),n=tm(r,r.pendingProps.children),n.flags|=2,r.memoizedState=null,n}function Fx(n,r,c){n.lanes|=r;var h=n.alternate;h!==null&&(h.lanes|=r),ad(n.return,r,c)}function sm(n,r,c,h,g){var j=n.memoizedState;j===null?n.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:h,tail:c,tailMode:g}:(j.isBackwards=r,j.rendering=null,j.renderingStartTime=0,j.last=h,j.tail=c,j.tailMode=g)}function Ex(n,r,c){var h=r.pendingProps,g=h.revealOrder,j=h.tail;if(mi(n,r,h.children,c),h=Wn.current,(h&2)!==0)h=h&1|2,r.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=r.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Fx(n,c,r);else if(n.tag===19)Fx(n,c,r);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===r)break e;for(;n.sibling===null;){if(n.return===null||n.return===r)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}h&=1}switch(I(Wn,h),g){case"forwards":for(c=r.child,g=null;c!==null;)n=c.alternate,n!==null&&Ou(n)===null&&(g=c),c=c.sibling;c=g,c===null?(g=r.child,r.child=null):(g=c.sibling,c.sibling=null),sm(r,!1,g,c,j);break;case"backwards":for(c=null,g=r.child,r.child=null;g!==null;){if(n=g.alternate,n!==null&&Ou(n)===null){r.child=g;break}n=g.sibling,g.sibling=c,c=g,g=n}sm(r,!0,c,null,j);break;case"together":sm(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function cl(n,r,c){if(n!==null&&(r.dependencies=n.dependencies),Ol|=r.lanes,(c&r.childLanes)===0)if(n!==null){if(El(n,r,c,!1),(c&r.childLanes)===0)return null}else return null;if(n!==null&&r.child!==n.child)throw Error(i(153));if(r.child!==null){for(n=r.child,c=Rr(n,n.pendingProps),r.child=c,c.return=r;n.sibling!==null;)n=n.sibling,c=c.sibling=Rr(n,n.pendingProps),c.return=r;c.sibling=null}return r.child}function nm(n,r){return(n.lanes&r)!==0?!0:(n=n.dependencies,!!(n!==null&&nd(n)))}function pw(n,r,c){switch(r.tag){case 3:oe(r,r.stateNode.containerInfo),Lo(r,En,n.memoizedState.cache),Ki();break;case 27:case 5:Ne(r);break;case 4:oe(r,r.stateNode.containerInfo);break;case 10:Lo(r,r.type,r.memoizedProps.value);break;case 13:var h=r.memoizedState;if(h!==null)return h.dehydrated!==null?(Rl(r),r.flags|=128,null):(c&r.child.childLanes)!==0?kx(n,r,c):(Rl(r),n=cl(n,r,c),n!==null?n.sibling:null);Rl(r);break;case 19:var g=(n.flags&128)!==0;if(h=(c&r.childLanes)!==0,h||(El(n,r,c,!1),h=(c&r.childLanes)!==0),g){if(h)return Ex(n,r,c);r.flags|=128}if(g=r.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),I(Wn,Wn.current),h)break;return null;case 22:case 23:return r.lanes=0,_x(n,r,c);case 24:Lo(r,En,n.memoizedState.cache)}return cl(n,r,c)}function Ux(n,r,c){if(n!==null)if(n.memoizedProps!==r.pendingProps)ai=!0;else{if(!nm(n,c)&&(r.flags&128)===0)return ai=!1,pw(n,r,c);ai=(n.flags&131072)!==0}else ai=!1,xs&&(r.flags&1048576)!==0&&ju(r,td,r.index);switch(r.lanes=0,r.tag){case 16:e:{n=r.pendingProps;var h=r.elementType,g=h._init;if(h=g(h._payload),r.type=h,typeof h=="function")Sl(h)?(n=kc(h,n),r.tag=1,r=Cx(null,r,h,n,c)):(r.tag=0,r=Jp(null,r,h,n,c));else{if(h!=null){if(g=h.$$typeof,g===L){r.tag=11,r=bx(null,r,h,n,c);break e}else if(g===X){r.tag=14,r=jx(null,r,h,n,c);break e}}throw r=ne(h)||h,Error(i(306,r,""))}}return r;case 0:return Jp(n,r,r.type,r.pendingProps,c);case 1:return h=r.type,g=kc(h,r.pendingProps),Cx(n,r,h,g,c);case 3:e:{if(oe(r,r.stateNode.containerInfo),n===null)throw Error(i(387));h=r.pendingProps;var j=r.memoizedState;g=j.element,At(n,r),la(r,h,null,c);var Z=r.memoizedState;if(h=Z.cache,Lo(r,En,h),h!==j.cache&&sd(r,[En],c,!0),Ra(),h=Z.element,j.isDehydrated)if(j={element:h,isDehydrated:!1,cache:Z.cache},r.updateQueue.baseState=j,r.memoizedState=j,r.flags&256){r=Sx(n,r,h,c);break e}else if(h!==g){g=Oi(Error(i(424)),r),Fl(g),r=Sx(n,r,h,c);break e}else{switch(n=r.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(sn=go(n.firstChild),kn=r,xs=!0,Uo=null,Dr=!0,c=dx(r,null,h,c),r.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling}else{if(Ki(),h===g){r=cl(n,r,c);break e}mi(n,r,h,c)}r=r.child}return r;case 26:return Ku(n,r),n===null?(c=Ry(r.type,null,r.pendingProps,null))?r.memoizedState=c:xs||(c=r.type,n=r.pendingProps,h=rh(J.current).createElement(c),h[va]=r,h[_a]=n,gi(h,c,n),yt(h),r.stateNode=h):r.memoizedState=Ry(r.type,n.memoizedProps,r.pendingProps,n.memoizedState),null;case 27:return Ne(r),n===null&&xs&&(h=r.stateNode=Ly(r.type,r.pendingProps,J.current),kn=r,Dr=!0,g=sn,Gl(r.type)?(Im=g,sn=go(h.firstChild)):sn=g),mi(n,r,r.pendingProps.children,c),Ku(n,r),n===null&&(r.flags|=4194304),r.child;case 5:return n===null&&xs&&((g=h=sn)&&(h=Ow(h,r.type,r.pendingProps,Dr),h!==null?(r.stateNode=h,kn=r,sn=go(h.firstChild),Dr=!1,g=!0):g=!1),g||nl(r)),Ne(r),g=r.type,j=r.pendingProps,Z=n!==null?n.memoizedProps:null,h=j.children,Tm(g,j)?h=null:Z!==null&&Tm(g,Z)&&(r.flags|=32),r.memoizedState!==null&&(g=Gi(n,r,Fs,null,null,c),BA._currentValue=g),Ku(n,r),mi(n,r,h,c),r.child;case 6:return n===null&&xs&&((n=c=sn)&&(c=zw(c,r.pendingProps,Dr),c!==null?(r.stateNode=c,kn=r,sn=null,n=!0):n=!1),n||nl(r)),null;case 13:return kx(n,r,c);case 4:return oe(r,r.stateNode.containerInfo),h=r.pendingProps,n===null?r.child=Ad(r,null,h,c):mi(n,r,h,c),r.child;case 11:return bx(n,r,r.type,r.pendingProps,c);case 7:return mi(n,r,r.pendingProps,c),r.child;case 8:return mi(n,r,r.pendingProps.children,c),r.child;case 12:return mi(n,r,r.pendingProps.children,c),r.child;case 10:return h=r.pendingProps,Lo(r,r.type,h.value),mi(n,r,h.children,c),r.child;case 9:return g=r.type._context,h=r.pendingProps.children,Hr(r),g=Fn(g),h=h(g),r.flags|=1,mi(n,r,h,c),r.child;case 14:return jx(n,r,r.type,r.pendingProps,c);case 15:return wx(n,r,r.type,r.pendingProps,c);case 19:return Ex(n,r,c);case 31:return h=r.pendingProps,c=r.mode,h={mode:h.mode,children:h.children},n===null?(c=Gu(h,c),c.ref=r.ref,r.child=c,c.return=r,r=c):(c=Rr(n.child,h),c.ref=r.ref,r.child=c,c.return=r,r=c),r;case 22:return _x(n,r,c);case 24:return Hr(r),h=Fn(En),n===null?(g=F(),g===null&&(g=$s,j=Wd(),g.pooledCache=j,j.refCount++,j!==null&&(g.pooledCacheLanes|=c),g=j),r.memoizedState={parent:h,cache:g},ze(r),Lo(r,En,g)):((n.lanes&c)!==0&&(At(n,r),la(r,null,null,c),Ra()),g=n.memoizedState,j=r.memoizedState,g.parent!==h?(g={parent:h,cache:h},r.memoizedState=g,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=g),Lo(r,En,h)):(h=j.cache,Lo(r,En,h),h!==g.cache&&sd(r,[En],c,!0))),mi(n,r,r.pendingProps.children,c),r.child;case 29:throw r.pendingProps}throw Error(i(156,r.tag))}function dl(n){n.flags|=4}function Lx(n,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!My(r)){if(r=zr.current,r!==null&&((fs&4194048)===fs?Qo!==null:(fs&62914560)!==fs&&(fs&536870912)===0||r!==Qo))throw be=fe,de;n.flags|=8192}}function Vu(n,r){r!==null&&(n.flags|=4),n.flags&16384&&(r=n.tag!==22?Za():536870912,n.lanes|=r,md|=r)}function AA(n,r){if(!xs)switch(n.tailMode){case"hidden":r=n.tail;for(var c=null;r!==null;)r.alternate!==null&&(c=r),r=r.sibling;c===null?n.tail=null:c.sibling=null;break;case"collapsed":c=n.tail;for(var h=null;c!==null;)c.alternate!==null&&(h=c),c=c.sibling;h===null?r||n.tail===null?n.tail=null:n.tail.sibling=null:h.sibling=null}}function xn(n){var r=n.alternate!==null&&n.alternate.child===n.child,c=0,h=0;if(r)for(var g=n.child;g!==null;)c|=g.lanes|g.childLanes,h|=g.subtreeFlags&65011712,h|=g.flags&65011712,g.return=n,g=g.sibling;else for(g=n.child;g!==null;)c|=g.lanes|g.childLanes,h|=g.subtreeFlags,h|=g.flags,g.return=n,g=g.sibling;return n.subtreeFlags|=h,n.childLanes=c,r}function mw(n,r,c){var h=r.pendingProps;switch(xc(r),r.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return xn(r),null;case 1:return xn(r),null;case 3:return c=r.stateNode,h=null,n!==null&&(h=n.memoizedState.cache),r.memoizedState.cache!==h&&(r.flags|=2048),Pr(En),K(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(n===null||n.child===null)&&(Ai(r)?dl(r):n===null||n.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,_u())),xn(r),null;case 26:return c=r.memoizedState,n===null?(dl(r),c!==null?(xn(r),Lx(r,c)):(xn(r),r.flags&=-16777217)):c?c!==n.memoizedState?(dl(r),xn(r),Lx(r,c)):(xn(r),r.flags&=-16777217):(n.memoizedProps!==h&&dl(r),xn(r),r.flags&=-16777217),null;case 27:Ee(r),c=J.current;var g=r.type;if(n!==null&&r.stateNode!=null)n.memoizedProps!==h&&dl(r);else{if(!h){if(r.stateNode===null)throw Error(i(166));return xn(r),null}n=H.current,Ai(r)?wu(r):(n=Ly(g,h,c),r.stateNode=n,dl(r))}return xn(r),null;case 5:if(Ee(r),c=r.type,n!==null&&r.stateNode!=null)n.memoizedProps!==h&&dl(r);else{if(!h){if(r.stateNode===null)throw Error(i(166));return xn(r),null}if(n=H.current,Ai(r))wu(r);else{switch(g=rh(J.current),n){case 1:n=g.createElementNS("http://www.w3.org/2000/svg",c);break;case 2:n=g.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;default:switch(c){case"svg":n=g.createElementNS("http://www.w3.org/2000/svg",c);break;case"math":n=g.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;case"script":n=g.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild);break;case"select":n=typeof h.is=="string"?g.createElement("select",{is:h.is}):g.createElement("select"),h.multiple?n.multiple=!0:h.size&&(n.size=h.size);break;default:n=typeof h.is=="string"?g.createElement(c,{is:h.is}):g.createElement(c)}}n[va]=r,n[_a]=h;e:for(g=r.child;g!==null;){if(g.tag===5||g.tag===6)n.appendChild(g.stateNode);else if(g.tag!==4&&g.tag!==27&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===r)break e;for(;g.sibling===null;){if(g.return===null||g.return===r)break e;g=g.return}g.sibling.return=g.return,g=g.sibling}r.stateNode=n;e:switch(gi(n,c,h),c){case"button":case"input":case"select":case"textarea":n=!!h.autoFocus;break e;case"img":n=!0;break e;default:n=!1}n&&dl(r)}}return xn(r),r.flags&=-16777217,null;case 6:if(n&&r.stateNode!=null)n.memoizedProps!==h&&dl(r);else{if(typeof h!="string"&&r.stateNode===null)throw Error(i(166));if(n=J.current,Ai(r)){if(n=r.stateNode,c=r.memoizedProps,h=null,g=kn,g!==null)switch(g.tag){case 27:case 5:h=g.memoizedProps}n[va]=r,n=!!(n.nodeValue===c||h!==null&&h.suppressHydrationWarning===!0||By(n.nodeValue,c)),n||nl(r)}else n=rh(n).createTextNode(h),n[va]=r,r.stateNode=n}return xn(r),null;case 13:if(h=r.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(g=Ai(r),h!==null&&h.dehydrated!==null){if(n===null){if(!g)throw Error(i(318));if(g=r.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(i(317));g[va]=r}else Ki(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;xn(r),g=!1}else g=_u(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=g),g=!0;if(!g)return r.flags&256?(ll(r),r):(ll(r),null)}if(ll(r),(r.flags&128)!==0)return r.lanes=c,r;if(c=h!==null,n=n!==null&&n.memoizedState!==null,c){h=r.child,g=null,h.alternate!==null&&h.alternate.memoizedState!==null&&h.alternate.memoizedState.cachePool!==null&&(g=h.alternate.memoizedState.cachePool.pool);var j=null;h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(j=h.memoizedState.cachePool.pool),j!==g&&(h.flags|=2048)}return c!==n&&c&&(r.child.flags|=8192),Vu(r,r.updateQueue),xn(r),null;case 4:return K(),n===null&&km(r.stateNode.containerInfo),xn(r),null;case 10:return Pr(r.type),xn(r),null;case 19:if(k(Wn),g=r.memoizedState,g===null)return xn(r),null;if(h=(r.flags&128)!==0,j=g.rendering,j===null)if(h)AA(g,!1);else{if(_n!==0||n!==null&&(n.flags&128)!==0)for(n=r.child;n!==null;){if(j=Ou(n),j!==null){for(r.flags|=128,AA(g,!1),n=j.updateQueue,r.updateQueue=n,Vu(r,n),r.subtreeFlags=0,n=c,c=r.child;c!==null;)mc(c,n),c=c.sibling;return I(Wn,Wn.current&1|2),r.child}n=n.sibling}g.tail!==null&&Mt()>Yu&&(r.flags|=128,h=!0,AA(g,!1),r.lanes=4194304)}else{if(!h)if(n=Ou(j),n!==null){if(r.flags|=128,h=!0,n=n.updateQueue,r.updateQueue=n,Vu(r,n),AA(g,!0),g.tail===null&&g.tailMode==="hidden"&&!j.alternate&&!xs)return xn(r),null}else 2*Mt()-g.renderingStartTime>Yu&&c!==536870912&&(r.flags|=128,h=!0,AA(g,!1),r.lanes=4194304);g.isBackwards?(j.sibling=r.child,r.child=j):(n=g.last,n!==null?n.sibling=j:r.child=j,g.last=j)}return g.tail!==null?(r=g.tail,g.rendering=r,g.tail=r.sibling,g.renderingStartTime=Mt(),r.sibling=null,n=Wn.current,I(Wn,h?n&1|2:n&1),r):(xn(r),null);case 22:case 23:return ll(r),Da(),h=r.memoizedState!==null,n!==null?n.memoizedState!==null!==h&&(r.flags|=8192):h&&(r.flags|=8192),h?(c&536870912)!==0&&(r.flags&128)===0&&(xn(r),r.subtreeFlags&6&&(r.flags|=8192)):xn(r),c=r.updateQueue,c!==null&&Vu(r,c.retryQueue),c=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(c=n.memoizedState.cachePool.pool),h=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(h=r.memoizedState.cachePool.pool),h!==c&&(r.flags|=2048),n!==null&&k(y),null;case 24:return c=null,n!==null&&(c=n.memoizedState.cache),r.memoizedState.cache!==c&&(r.flags|=2048),Pr(En),xn(r),null;case 25:return null;case 30:return null}throw Error(i(156,r.tag))}function fw(n,r){switch(xc(r),r.tag){case 1:return n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 3:return Pr(En),K(),n=r.flags,(n&65536)!==0&&(n&128)===0?(r.flags=n&-65537|128,r):null;case 26:case 27:case 5:return Ee(r),null;case 13:if(ll(r),n=r.memoizedState,n!==null&&n.dehydrated!==null){if(r.alternate===null)throw Error(i(340));Ki()}return n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 19:return k(Wn),null;case 4:return K(),null;case 10:return Pr(r.type),null;case 22:case 23:return ll(r),Da(),n!==null&&k(y),n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 24:return Pr(En),null;case 25:return null;default:return null}}function Tx(n,r){switch(xc(r),r.tag){case 3:Pr(En),K();break;case 26:case 27:case 5:Ee(r);break;case 4:K();break;case 13:ll(r);break;case 19:k(Wn);break;case 10:Pr(r.type);break;case 22:case 23:ll(r),Da(),n!==null&&k(y);break;case 24:Pr(En)}}function uA(n,r){try{var c=r.updateQueue,h=c!==null?c.lastEffect:null;if(h!==null){var g=h.next;c=g;do{if((c.tag&n)===n){h=void 0;var j=c.create,Z=c.inst;h=j(),Z.destroy=h}c=c.next}while(c!==g)}}catch(he){zs(r,r.return,he)}}function Il(n,r,c){try{var h=r.updateQueue,g=h!==null?h.lastEffect:null;if(g!==null){var j=g.next;h=j;do{if((h.tag&n)===n){var Z=h.inst,he=Z.destroy;if(he!==void 0){Z.destroy=void 0,g=r;var Se=c,Ke=he;try{Ke()}catch(pt){zs(g,Se,pt)}}}h=h.next}while(h!==j)}}catch(pt){zs(r,r.return,pt)}}function Qx(n){var r=n.updateQueue;if(r!==null){var c=n.stateNode;try{wn(r,c)}catch(h){zs(n,n.return,h)}}}function Rx(n,r,c){c.props=kc(n.type,n.memoizedProps),c.state=n.memoizedState;try{c.componentWillUnmount()}catch(h){zs(n,r,h)}}function hA(n,r){try{var c=n.ref;if(c!==null){switch(n.tag){case 26:case 27:case 5:var h=n.stateNode;break;case 30:h=n.stateNode;break;default:h=n.stateNode}typeof c=="function"?n.refCleanup=c(h):c.current=h}}catch(g){zs(n,r,g)}}function Ro(n,r){var c=n.ref,h=n.refCleanup;if(c!==null)if(typeof h=="function")try{h()}catch(g){zs(n,r,g)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof c=="function")try{c(null)}catch(g){zs(n,r,g)}else c.current=null}function Dx(n){var r=n.type,c=n.memoizedProps,h=n.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":c.autoFocus&&h.focus();break e;case"img":c.src?h.src=c.src:c.srcSet&&(h.srcset=c.srcSet)}}catch(g){zs(n,n.return,g)}}function im(n,r,c){try{var h=n.stateNode;Dw(h,n.type,c,r),h[_a]=r}catch(g){zs(n,n.return,g)}}function Ix(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&Gl(n.type)||n.tag===4}function rm(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||Ix(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&Gl(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function om(n,r,c){var h=n.tag;if(h===5||h===6)n=n.stateNode,r?(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c).insertBefore(n,r):(r=c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,r.appendChild(n),c=c._reactRootContainer,c!=null||r.onclick!==null||(r.onclick=ih));else if(h!==4&&(h===27&&Gl(n.type)&&(c=n.stateNode,r=null),n=n.child,n!==null))for(om(n,r,c),n=n.sibling;n!==null;)om(n,r,c),n=n.sibling}function $u(n,r,c){var h=n.tag;if(h===5||h===6)n=n.stateNode,r?c.insertBefore(n,r):c.appendChild(n);else if(h!==4&&(h===27&&Gl(n.type)&&(c=n.stateNode),n=n.child,n!==null))for($u(n,r,c),n=n.sibling;n!==null;)$u(n,r,c),n=n.sibling}function Px(n){var r=n.stateNode,c=n.memoizedProps;try{for(var h=n.type,g=r.attributes;g.length;)r.removeAttributeNode(g[0]);gi(r,h,c),r[va]=n,r[_a]=c}catch(j){zs(n,n.return,j)}}var Al=!1,Qn=!1,lm=!1,Hx=typeof WeakSet=="function"?WeakSet:Set,si=null;function gw(n,r){if(n=n.containerInfo,Um=uh,n=Fo(n),Pi(n)){if("selectionStart"in n)var c={start:n.selectionStart,end:n.selectionEnd};else e:{c=(c=n.ownerDocument)&&c.defaultView||window;var h=c.getSelection&&c.getSelection();if(h&&h.rangeCount!==0){c=h.anchorNode;var g=h.anchorOffset,j=h.focusNode;h=h.focusOffset;try{c.nodeType,j.nodeType}catch{c=null;break e}var Z=0,he=-1,Se=-1,Ke=0,pt=0,wt=n,We=null;t:for(;;){for(var Xe;wt!==c||g!==0&&wt.nodeType!==3||(he=Z+g),wt!==j||h!==0&&wt.nodeType!==3||(Se=Z+h),wt.nodeType===3&&(Z+=wt.nodeValue.length),(Xe=wt.firstChild)!==null;)We=wt,wt=Xe;for(;;){if(wt===n)break t;if(We===c&&++Ke===g&&(he=Z),We===j&&++pt===h&&(Se=Z),(Xe=wt.nextSibling)!==null)break;wt=We,We=wt.parentNode}wt=Xe}c=he===-1||Se===-1?null:{start:he,end:Se}}else c=null}c=c||{start:0,end:0}}else c=null;for(Lm={focusedElem:n,selectionRange:c},uh=!1,si=r;si!==null;)if(r=si,n=r.child,(r.subtreeFlags&1024)!==0&&n!==null)n.return=r,si=n;else for(;si!==null;){switch(r=si,j=r.alternate,n=r.flags,r.tag){case 0:break;case 11:case 15:break;case 1:if((n&1024)!==0&&j!==null){n=void 0,c=r,g=j.memoizedProps,j=j.memoizedState,h=c.stateNode;try{var Qa=kc(c.type,g,c.elementType===c.type);n=h.getSnapshotBeforeUpdate(Qa,j),h.__reactInternalSnapshotBeforeUpdate=n}catch(Sa){zs(c,c.return,Sa)}}break;case 3:if((n&1024)!==0){if(n=r.stateNode.containerInfo,c=n.nodeType,c===9)Rm(n);else if(c===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":Rm(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(i(163))}if(n=r.sibling,n!==null){n.return=r.return,si=n;break}si=r.return}}function Mx(n,r,c){var h=c.flags;switch(c.tag){case 0:case 11:case 15:Pl(n,c),h&4&&uA(5,c);break;case 1:if(Pl(n,c),h&4)if(n=c.stateNode,r===null)try{n.componentDidMount()}catch(Z){zs(c,c.return,Z)}else{var g=kc(c.type,r.memoizedProps);r=r.memoizedState;try{n.componentDidUpdate(g,r,n.__reactInternalSnapshotBeforeUpdate)}catch(Z){zs(c,c.return,Z)}}h&64&&Qx(c),h&512&&hA(c,c.return);break;case 3:if(Pl(n,c),h&64&&(n=c.updateQueue,n!==null)){if(r=null,c.child!==null)switch(c.child.tag){case 27:case 5:r=c.child.stateNode;break;case 1:r=c.child.stateNode}try{wn(n,r)}catch(Z){zs(c,c.return,Z)}}break;case 27:r===null&&h&4&&Px(c);case 26:case 5:Pl(n,c),r===null&&h&4&&Dx(c),h&512&&hA(c,c.return);break;case 12:Pl(n,c);break;case 13:Pl(n,c),h&4&&qx(n,c),h&64&&(n=c.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(c=Bw.bind(null,c),qw(n,c))));break;case 22:if(h=c.memoizedState!==null||Al,!h){r=r!==null&&r.memoizedState!==null||Qn,g=Al;var j=Qn;Al=h,(Qn=r)&&!j?Hl(n,c,(c.subtreeFlags&8772)!==0):Pl(n,c),Al=g,Qn=j}break;case 30:break;default:Pl(n,c)}}function Ox(n){var r=n.alternate;r!==null&&(n.alternate=null,Ox(r)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(r=n.stateNode,r!==null&&ge(r)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var ln=null,rr=!1;function ul(n,r,c){for(c=c.child;c!==null;)zx(n,r,c),c=c.sibling}function zx(n,r,c){if(Ut&&typeof Ut.onCommitFiberUnmount=="function")try{Ut.onCommitFiberUnmount(lt,c)}catch{}switch(c.tag){case 26:Qn||Ro(c,r),ul(n,r,c),c.memoizedState?c.memoizedState.count--:c.stateNode&&(c=c.stateNode,c.parentNode.removeChild(c));break;case 27:Qn||Ro(c,r);var h=ln,g=rr;Gl(c.type)&&(ln=c.stateNode,rr=!1),ul(n,r,c),jA(c.stateNode),ln=h,rr=g;break;case 5:Qn||Ro(c,r);case 6:if(h=ln,g=rr,ln=null,ul(n,r,c),ln=h,rr=g,ln!==null)if(rr)try{(ln.nodeType===9?ln.body:ln.nodeName==="HTML"?ln.ownerDocument.body:ln).removeChild(c.stateNode)}catch(j){zs(c,r,j)}else try{ln.removeChild(c.stateNode)}catch(j){zs(c,r,j)}break;case 18:ln!==null&&(rr?(n=ln,Ey(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,c.stateNode),FA(n)):Ey(ln,c.stateNode));break;case 4:h=ln,g=rr,ln=c.stateNode.containerInfo,rr=!0,ul(n,r,c),ln=h,rr=g;break;case 0:case 11:case 14:case 15:Qn||Il(2,c,r),Qn||Il(4,c,r),ul(n,r,c);break;case 1:Qn||(Ro(c,r),h=c.stateNode,typeof h.componentWillUnmount=="function"&&Rx(c,r,h)),ul(n,r,c);break;case 21:ul(n,r,c);break;case 22:Qn=(h=Qn)||c.memoizedState!==null,ul(n,r,c),Qn=h;break;default:ul(n,r,c)}}function qx(n,r){if(r.memoizedState===null&&(n=r.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{FA(n)}catch(c){zs(r,r.return,c)}}function xw(n){switch(n.tag){case 13:case 19:var r=n.stateNode;return r===null&&(r=n.stateNode=new Hx),r;case 22:return n=n.stateNode,r=n._retryCache,r===null&&(r=n._retryCache=new Hx),r;default:throw Error(i(435,n.tag))}}function cm(n,r){var c=xw(n);r.forEach(function(h){var g=Cw.bind(null,n,h);c.has(h)||(c.add(h),h.then(g,g))})}function gr(n,r){var c=r.deletions;if(c!==null)for(var h=0;h<c.length;h++){var g=c[h],j=n,Z=r,he=Z;e:for(;he!==null;){switch(he.tag){case 27:if(Gl(he.type)){ln=he.stateNode,rr=!1;break e}break;case 5:ln=he.stateNode,rr=!1;break e;case 3:case 4:ln=he.stateNode.containerInfo,rr=!0;break e}he=he.return}if(ln===null)throw Error(i(160));zx(j,Z,g),ln=null,rr=!1,j=g.alternate,j!==null&&(j.return=null),g.return=null}if(r.subtreeFlags&13878)for(r=r.child;r!==null;)Kx(r,n),r=r.sibling}var fo=null;function Kx(n,r){var c=n.alternate,h=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:gr(r,n),xr(n),h&4&&(Il(3,n,n.return),uA(3,n),Il(5,n,n.return));break;case 1:gr(r,n),xr(n),h&512&&(Qn||c===null||Ro(c,c.return)),h&64&&Al&&(n=n.updateQueue,n!==null&&(h=n.callbacks,h!==null&&(c=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=c===null?h:c.concat(h))));break;case 26:var g=fo;if(gr(r,n),xr(n),h&512&&(Qn||c===null||Ro(c,c.return)),h&4){var j=c!==null?c.memoizedState:null;if(h=n.memoizedState,c===null)if(h===null)if(n.stateNode===null){e:{h=n.type,c=n.memoizedProps,g=g.ownerDocument||g;t:switch(h){case"title":j=g.getElementsByTagName("title")[0],(!j||j[yn]||j[va]||j.namespaceURI==="http://www.w3.org/2000/svg"||j.hasAttribute("itemprop"))&&(j=g.createElement(h),g.head.insertBefore(j,g.querySelector("head > title"))),gi(j,h,c),j[va]=n,yt(j),h=j;break e;case"link":var Z=Py("link","href",g).get(h+(c.href||""));if(Z){for(var he=0;he<Z.length;he++)if(j=Z[he],j.getAttribute("href")===(c.href==null||c.href===""?null:c.href)&&j.getAttribute("rel")===(c.rel==null?null:c.rel)&&j.getAttribute("title")===(c.title==null?null:c.title)&&j.getAttribute("crossorigin")===(c.crossOrigin==null?null:c.crossOrigin)){Z.splice(he,1);break t}}j=g.createElement(h),gi(j,h,c),g.head.appendChild(j);break;case"meta":if(Z=Py("meta","content",g).get(h+(c.content||""))){for(he=0;he<Z.length;he++)if(j=Z[he],j.getAttribute("content")===(c.content==null?null:""+c.content)&&j.getAttribute("name")===(c.name==null?null:c.name)&&j.getAttribute("property")===(c.property==null?null:c.property)&&j.getAttribute("http-equiv")===(c.httpEquiv==null?null:c.httpEquiv)&&j.getAttribute("charset")===(c.charSet==null?null:c.charSet)){Z.splice(he,1);break t}}j=g.createElement(h),gi(j,h,c),g.head.appendChild(j);break;default:throw Error(i(468,h))}j[va]=n,yt(j),h=j}n.stateNode=h}else Hy(g,n.type,n.stateNode);else n.stateNode=Iy(g,h,n.memoizedProps);else j!==h?(j===null?c.stateNode!==null&&(c=c.stateNode,c.parentNode.removeChild(c)):j.count--,h===null?Hy(g,n.type,n.stateNode):Iy(g,h,n.memoizedProps)):h===null&&n.stateNode!==null&&im(n,n.memoizedProps,c.memoizedProps)}break;case 27:gr(r,n),xr(n),h&512&&(Qn||c===null||Ro(c,c.return)),c!==null&&h&4&&im(n,n.memoizedProps,c.memoizedProps);break;case 5:if(gr(r,n),xr(n),h&512&&(Qn||c===null||Ro(c,c.return)),n.flags&32){g=n.stateNode;try{li(g,"")}catch(Xe){zs(n,n.return,Xe)}}h&4&&n.stateNode!=null&&(g=n.memoizedProps,im(n,g,c!==null?c.memoizedProps:g)),h&1024&&(lm=!0);break;case 6:if(gr(r,n),xr(n),h&4){if(n.stateNode===null)throw Error(i(162));h=n.memoizedProps,c=n.stateNode;try{c.nodeValue=h}catch(Xe){zs(n,n.return,Xe)}}break;case 3:if(ch=null,g=fo,fo=oh(r.containerInfo),gr(r,n),fo=g,xr(n),h&4&&c!==null&&c.memoizedState.isDehydrated)try{FA(r.containerInfo)}catch(Xe){zs(n,n.return,Xe)}lm&&(lm=!1,Gx(n));break;case 4:h=fo,fo=oh(n.stateNode.containerInfo),gr(r,n),xr(n),fo=h;break;case 12:gr(r,n),xr(n);break;case 13:gr(r,n),xr(n),n.child.flags&8192&&n.memoizedState!==null!=(c!==null&&c.memoizedState!==null)&&(mm=Mt()),h&4&&(h=n.updateQueue,h!==null&&(n.updateQueue=null,cm(n,h)));break;case 22:g=n.memoizedState!==null;var Se=c!==null&&c.memoizedState!==null,Ke=Al,pt=Qn;if(Al=Ke||g,Qn=pt||Se,gr(r,n),Qn=pt,Al=Ke,xr(n),h&8192)e:for(r=n.stateNode,r._visibility=g?r._visibility&-2:r._visibility|1,g&&(c===null||Se||Al||Qn||Fc(n)),c=null,r=n;;){if(r.tag===5||r.tag===26){if(c===null){Se=c=r;try{if(j=Se.stateNode,g)Z=j.style,typeof Z.setProperty=="function"?Z.setProperty("display","none","important"):Z.display="none";else{he=Se.stateNode;var wt=Se.memoizedProps.style,We=wt!=null&&wt.hasOwnProperty("display")?wt.display:null;he.style.display=We==null||typeof We=="boolean"?"":(""+We).trim()}}catch(Xe){zs(Se,Se.return,Xe)}}}else if(r.tag===6){if(c===null){Se=r;try{Se.stateNode.nodeValue=g?"":Se.memoizedProps}catch(Xe){zs(Se,Se.return,Xe)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===n)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===n)break e;for(;r.sibling===null;){if(r.return===null||r.return===n)break e;c===r&&(c=null),r=r.return}c===r&&(c=null),r.sibling.return=r.return,r=r.sibling}h&4&&(h=n.updateQueue,h!==null&&(c=h.retryQueue,c!==null&&(h.retryQueue=null,cm(n,c))));break;case 19:gr(r,n),xr(n),h&4&&(h=n.updateQueue,h!==null&&(n.updateQueue=null,cm(n,h)));break;case 30:break;case 21:break;default:gr(r,n),xr(n)}}function xr(n){var r=n.flags;if(r&2){try{for(var c,h=n.return;h!==null;){if(Ix(h)){c=h;break}h=h.return}if(c==null)throw Error(i(160));switch(c.tag){case 27:var g=c.stateNode,j=rm(n);$u(n,j,g);break;case 5:var Z=c.stateNode;c.flags&32&&(li(Z,""),c.flags&=-33);var he=rm(n);$u(n,he,Z);break;case 3:case 4:var Se=c.stateNode.containerInfo,Ke=rm(n);om(n,Ke,Se);break;default:throw Error(i(161))}}catch(pt){zs(n,n.return,pt)}n.flags&=-3}r&4096&&(n.flags&=-4097)}function Gx(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var r=n;Gx(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),n=n.sibling}}function Pl(n,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)Mx(n,r.alternate,r),r=r.sibling}function Fc(n){for(n=n.child;n!==null;){var r=n;switch(r.tag){case 0:case 11:case 14:case 15:Il(4,r,r.return),Fc(r);break;case 1:Ro(r,r.return);var c=r.stateNode;typeof c.componentWillUnmount=="function"&&Rx(r,r.return,c),Fc(r);break;case 27:jA(r.stateNode);case 26:case 5:Ro(r,r.return),Fc(r);break;case 22:r.memoizedState===null&&Fc(r);break;case 30:Fc(r);break;default:Fc(r)}n=n.sibling}}function Hl(n,r,c){for(c=c&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var h=r.alternate,g=n,j=r,Z=j.flags;switch(j.tag){case 0:case 11:case 15:Hl(g,j,c),uA(4,j);break;case 1:if(Hl(g,j,c),h=j,g=h.stateNode,typeof g.componentDidMount=="function")try{g.componentDidMount()}catch(Ke){zs(h,h.return,Ke)}if(h=j,g=h.updateQueue,g!==null){var he=h.stateNode;try{var Se=g.shared.hiddenCallbacks;if(Se!==null)for(g.shared.hiddenCallbacks=null,g=0;g<Se.length;g++)ts(Se[g],he)}catch(Ke){zs(h,h.return,Ke)}}c&&Z&64&&Qx(j),hA(j,j.return);break;case 27:Px(j);case 26:case 5:Hl(g,j,c),c&&h===null&&Z&4&&Dx(j),hA(j,j.return);break;case 12:Hl(g,j,c);break;case 13:Hl(g,j,c),c&&Z&4&&qx(g,j);break;case 22:j.memoizedState===null&&Hl(g,j,c),hA(j,j.return);break;case 30:break;default:Hl(g,j,c)}r=r.sibling}}function dm(n,r){var c=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(c=n.memoizedState.cachePool.pool),n=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(n=r.memoizedState.cachePool.pool),n!==c&&(n!=null&&n.refCount++,c!=null&&yc(c))}function Am(n,r){n=null,r.alternate!==null&&(n=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==n&&(r.refCount++,n!=null&&yc(n))}function Do(n,r,c,h){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)Vx(n,r,c,h),r=r.sibling}function Vx(n,r,c,h){var g=r.flags;switch(r.tag){case 0:case 11:case 15:Do(n,r,c,h),g&2048&&uA(9,r);break;case 1:Do(n,r,c,h);break;case 3:Do(n,r,c,h),g&2048&&(n=null,r.alternate!==null&&(n=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==n&&(r.refCount++,n!=null&&yc(n)));break;case 12:if(g&2048){Do(n,r,c,h),n=r.stateNode;try{var j=r.memoizedProps,Z=j.id,he=j.onPostCommit;typeof he=="function"&&he(Z,r.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(Se){zs(r,r.return,Se)}}else Do(n,r,c,h);break;case 13:Do(n,r,c,h);break;case 23:break;case 22:j=r.stateNode,Z=r.alternate,r.memoizedState!==null?j._visibility&2?Do(n,r,c,h):pA(n,r):j._visibility&2?Do(n,r,c,h):(j._visibility|=2,ud(n,r,c,h,(r.subtreeFlags&10256)!==0)),g&2048&&dm(Z,r);break;case 24:Do(n,r,c,h),g&2048&&Am(r.alternate,r);break;default:Do(n,r,c,h)}}function ud(n,r,c,h,g){for(g=g&&(r.subtreeFlags&10256)!==0,r=r.child;r!==null;){var j=n,Z=r,he=c,Se=h,Ke=Z.flags;switch(Z.tag){case 0:case 11:case 15:ud(j,Z,he,Se,g),uA(8,Z);break;case 23:break;case 22:var pt=Z.stateNode;Z.memoizedState!==null?pt._visibility&2?ud(j,Z,he,Se,g):pA(j,Z):(pt._visibility|=2,ud(j,Z,he,Se,g)),g&&Ke&2048&&dm(Z.alternate,Z);break;case 24:ud(j,Z,he,Se,g),g&&Ke&2048&&Am(Z.alternate,Z);break;default:ud(j,Z,he,Se,g)}r=r.sibling}}function pA(n,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var c=n,h=r,g=h.flags;switch(h.tag){case 22:pA(c,h),g&2048&&dm(h.alternate,h);break;case 24:pA(c,h),g&2048&&Am(h.alternate,h);break;default:pA(c,h)}r=r.sibling}}var mA=8192;function hd(n){if(n.subtreeFlags&mA)for(n=n.child;n!==null;)$x(n),n=n.sibling}function $x(n){switch(n.tag){case 26:hd(n),n.flags&mA&&n.memoizedState!==null&&s2(fo,n.memoizedState,n.memoizedProps);break;case 5:hd(n);break;case 3:case 4:var r=fo;fo=oh(n.stateNode.containerInfo),hd(n),fo=r;break;case 22:n.memoizedState===null&&(r=n.alternate,r!==null&&r.memoizedState!==null?(r=mA,mA=16777216,hd(n),mA=r):hd(n));break;default:hd(n)}}function Wx(n){var r=n.alternate;if(r!==null&&(n=r.child,n!==null)){r.child=null;do r=n.sibling,n.sibling=null,n=r;while(n!==null)}}function fA(n){var r=n.deletions;if((n.flags&16)!==0){if(r!==null)for(var c=0;c<r.length;c++){var h=r[c];si=h,Jx(h,n)}Wx(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)Yx(n),n=n.sibling}function Yx(n){switch(n.tag){case 0:case 11:case 15:fA(n),n.flags&2048&&Il(9,n,n.return);break;case 3:fA(n);break;case 12:fA(n);break;case 22:var r=n.stateNode;n.memoizedState!==null&&r._visibility&2&&(n.return===null||n.return.tag!==13)?(r._visibility&=-3,Wu(n)):fA(n);break;default:fA(n)}}function Wu(n){var r=n.deletions;if((n.flags&16)!==0){if(r!==null)for(var c=0;c<r.length;c++){var h=r[c];si=h,Jx(h,n)}Wx(n)}for(n=n.child;n!==null;){switch(r=n,r.tag){case 0:case 11:case 15:Il(8,r,r.return),Wu(r);break;case 22:c=r.stateNode,c._visibility&2&&(c._visibility&=-3,Wu(r));break;default:Wu(r)}n=n.sibling}}function Jx(n,r){for(;si!==null;){var c=si;switch(c.tag){case 0:case 11:case 15:Il(8,c,r);break;case 23:case 22:if(c.memoizedState!==null&&c.memoizedState.cachePool!==null){var h=c.memoizedState.cachePool.pool;h!=null&&h.refCount++}break;case 24:yc(c.memoizedState.cache)}if(h=c.child,h!==null)h.return=c,si=h;else e:for(c=n;si!==null;){h=si;var g=h.sibling,j=h.return;if(Ox(h),h===c){si=null;break e}if(g!==null){g.return=j,si=g;break e}si=j}}}var yw={getCacheForType:function(n){var r=Fn(En),c=r.data.get(n);return c===void 0&&(c=n(),r.data.set(n,c)),c}},vw=typeof WeakMap=="function"?WeakMap:Map,Es=0,$s=null,is=null,fs=0,Us=0,yr=null,Ml=!1,pd=!1,um=!1,hl=0,_n=0,Ol=0,Ec=0,hm=0,qr=0,md=0,gA=null,or=null,pm=!1,mm=0,Yu=1/0,Ju=null,zl=null,fi=0,ql=null,fd=null,gd=0,fm=0,gm=null,Xx=null,xA=0,xm=null;function vr(){if((Es&2)!==0&&fs!==0)return fs&-fs;if(z.T!==null){var n=il;return n!==0?n:Nm()}return gt()}function Zx(){qr===0&&(qr=(fs&536870912)===0||xs?ca():536870912);var n=zr.current;return n!==null&&(n.flags|=32),qr}function br(n,r,c){(n===$s&&(Us===2||Us===9)||n.cancelPendingCommit!==null)&&(xd(n,0),Kl(n,fs,qr,!1)),Ba(n,c),((Es&2)===0||n!==$s)&&(n===$s&&((Es&2)===0&&(Ec|=c),_n===4&&Kl(n,fs,qr,!1)),Io(n))}function ey(n,r,c){if((Es&6)!==0)throw Error(i(327));var h=!c&&(r&124)===0&&(r&n.expiredLanes)===0||Ct(n,r),g=h?ww(n,r):bm(n,r,!0),j=h;do{if(g===0){pd&&!h&&Kl(n,r,0,!1);break}else{if(c=n.current.alternate,j&&!bw(c)){g=bm(n,r,!1),j=!1;continue}if(g===2){if(j=r,n.errorRecoveryDisabledLanes&j)var Z=0;else Z=n.pendingLanes&-536870913,Z=Z!==0?Z:Z&536870912?536870912:0;if(Z!==0){r=Z;e:{var he=n;g=gA;var Se=he.current.memoizedState.isDehydrated;if(Se&&(xd(he,Z).flags|=256),Z=bm(he,Z,!1),Z!==2){if(um&&!Se){he.errorRecoveryDisabledLanes|=j,Ec|=j,g=4;break e}j=or,or=g,j!==null&&(or===null?or=j:or.push.apply(or,j))}g=Z}if(j=!1,g!==2)continue}}if(g===1){xd(n,0),Kl(n,r,0,!0);break}e:{switch(h=n,j=g,j){case 0:case 1:throw Error(i(345));case 4:if((r&4194048)!==r)break;case 6:Kl(h,r,qr,!Ml);break e;case 2:or=null;break;case 3:case 5:break;default:throw Error(i(329))}if((r&62914560)===r&&(g=mm+300-Mt(),10<g)){if(Kl(h,r,qr,!Ml),Ot(h,0,!0)!==0)break e;h.timeoutHandle=ky(ty.bind(null,h,c,or,Ju,pm,r,qr,Ec,md,Ml,j,2,-0,0),g);break e}ty(h,c,or,Ju,pm,r,qr,Ec,md,Ml,j,0,-0,0)}}break}while(!0);Io(n)}function ty(n,r,c,h,g,j,Z,he,Se,Ke,pt,wt,We,Xe){if(n.timeoutHandle=-1,wt=r.subtreeFlags,(wt&8192||(wt&16785408)===16785408)&&(NA={stylesheets:null,count:0,unsuspend:a2},$x(r),wt=n2(),wt!==null)){n.cancelPendingCommit=wt(ly.bind(null,n,r,j,c,h,g,Z,he,Se,pt,1,We,Xe)),Kl(n,j,Z,!Ke);return}ly(n,r,j,c,h,g,Z,he,Se)}function bw(n){for(var r=n;;){var c=r.tag;if((c===0||c===11||c===15)&&r.flags&16384&&(c=r.updateQueue,c!==null&&(c=c.stores,c!==null)))for(var h=0;h<c.length;h++){var g=c[h],j=g.getSnapshot;g=g.value;try{if(!Yt(j(),g))return!1}catch{return!1}}if(c=r.child,r.subtreeFlags&16384&&c!==null)c.return=r,r=c;else{if(r===n)break;for(;r.sibling===null;){if(r.return===null||r.return===n)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function Kl(n,r,c,h){r&=~hm,r&=~Ec,n.suspendedLanes|=r,n.pingedLanes&=~r,h&&(n.warmLanes|=r),h=n.expirationTimes;for(var g=r;0<g;){var j=31-Nt(g),Z=1<<j;h[j]=-1,g&=~Z}c!==0&&Dt(n,c,r)}function Xu(){return(Es&6)===0?(yA(0),!1):!0}function ym(){if(is!==null){if(Us===0)var n=is.return;else n=is,co=zn=null,Vn(n),dd=null,cA=0,n=is;for(;n!==null;)Tx(n.alternate,n),n=n.return;is=null}}function xd(n,r){var c=n.timeoutHandle;c!==-1&&(n.timeoutHandle=-1,Pw(c)),c=n.cancelPendingCommit,c!==null&&(n.cancelPendingCommit=null,c()),ym(),$s=n,is=c=Rr(n.current,null),fs=r,Us=0,yr=null,Ml=!1,pd=Ct(n,r),um=!1,md=qr=hm=Ec=Ol=_n=0,or=gA=null,pm=!1,(r&8)!==0&&(r|=r&32);var h=n.entangledLanes;if(h!==0)for(n=n.entanglements,h&=r;0<h;){var g=31-Nt(h),j=1<<g;r|=n[g],h&=~j}return hl=r,hc(),c}function ay(n,r){ha=null,z.H=Pu,r===ce||r===pe?(r=Qe(),Us=3):r===de?(r=Qe(),Us=4):Us=r===vx?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,yr=r,is===null&&(_n=1,qu(n,Oi(r,n.current)))}function sy(){var n=z.H;return z.H=Pu,n===null?Pu:n}function ny(){var n=z.A;return z.A=yw,n}function vm(){_n=4,Ml||(fs&4194048)!==fs&&zr.current!==null||(pd=!0),(Ol&134217727)===0&&(Ec&134217727)===0||$s===null||Kl($s,fs,qr,!1)}function bm(n,r,c){var h=Es;Es|=2;var g=sy(),j=ny();($s!==n||fs!==r)&&(Ju=null,xd(n,r)),r=!1;var Z=_n;e:do try{if(Us!==0&&is!==null){var he=is,Se=yr;switch(Us){case 8:ym(),Z=6;break e;case 3:case 2:case 9:case 6:zr.current===null&&(r=!0);var Ke=Us;if(Us=0,yr=null,yd(n,he,Se,Ke),c&&pd){Z=0;break e}break;default:Ke=Us,Us=0,yr=null,yd(n,he,Se,Ke)}}jw(),Z=_n;break}catch(pt){ay(n,pt)}while(!0);return r&&n.shellSuspendCounter++,co=zn=null,Es=h,z.H=g,z.A=j,is===null&&($s=null,fs=0,hc()),Z}function jw(){for(;is!==null;)iy(is)}function ww(n,r){var c=Es;Es|=2;var h=sy(),g=ny();$s!==n||fs!==r?(Ju=null,Yu=Mt()+500,xd(n,r)):pd=Ct(n,r);e:do try{if(Us!==0&&is!==null){r=is;var j=yr;t:switch(Us){case 1:Us=0,yr=null,yd(n,r,j,1);break;case 2:case 9:if(we(j)){Us=0,yr=null,ry(r);break}r=function(){Us!==2&&Us!==9||$s!==n||(Us=7),Io(n)},j.then(r,r);break e;case 3:Us=7;break e;case 4:Us=5;break e;case 7:we(j)?(Us=0,yr=null,ry(r)):(Us=0,yr=null,yd(n,r,j,7));break;case 5:var Z=null;switch(is.tag){case 26:Z=is.memoizedState;case 5:case 27:var he=is;if(!Z||My(Z)){Us=0,yr=null;var Se=he.sibling;if(Se!==null)is=Se;else{var Ke=he.return;Ke!==null?(is=Ke,Zu(Ke)):is=null}break t}}Us=0,yr=null,yd(n,r,j,5);break;case 6:Us=0,yr=null,yd(n,r,j,6);break;case 8:ym(),_n=6;break e;default:throw Error(i(462))}}_w();break}catch(pt){ay(n,pt)}while(!0);return co=zn=null,z.H=h,z.A=g,Es=c,is!==null?0:($s=null,fs=0,hc(),_n)}function _w(){for(;is!==null&&!_e();)iy(is)}function iy(n){var r=Ux(n.alternate,n,hl);n.memoizedProps=n.pendingProps,r===null?Zu(n):is=r}function ry(n){var r=n,c=r.alternate;switch(r.tag){case 15:case 0:r=Bx(c,r,r.pendingProps,r.type,void 0,fs);break;case 11:r=Bx(c,r,r.pendingProps,r.type.render,r.ref,fs);break;case 5:Vn(r);default:Tx(c,r),r=is=mc(r,hl),r=Ux(c,r,hl)}n.memoizedProps=n.pendingProps,r===null?Zu(n):is=r}function yd(n,r,c,h){co=zn=null,Vn(r),dd=null,cA=0;var g=r.return;try{if(hw(n,g,r,c,fs)){_n=1,qu(n,Oi(c,n.current)),is=null;return}}catch(j){if(g!==null)throw is=g,j;_n=1,qu(n,Oi(c,n.current)),is=null;return}r.flags&32768?(xs||h===1?n=!0:pd||(fs&536870912)!==0?n=!1:(Ml=n=!0,(h===2||h===9||h===3||h===6)&&(h=zr.current,h!==null&&h.tag===13&&(h.flags|=16384))),oy(r,n)):Zu(r)}function Zu(n){var r=n;do{if((r.flags&32768)!==0){oy(r,Ml);return}n=r.return;var c=mw(r.alternate,r,hl);if(c!==null){is=c;return}if(r=r.sibling,r!==null){is=r;return}is=r=n}while(r!==null);_n===0&&(_n=5)}function oy(n,r){do{var c=fw(n.alternate,n);if(c!==null){c.flags&=32767,is=c;return}if(c=n.return,c!==null&&(c.flags|=32768,c.subtreeFlags=0,c.deletions=null),!r&&(n=n.sibling,n!==null)){is=n;return}is=n=c}while(n!==null);_n=6,is=null}function ly(n,r,c,h,g,j,Z,he,Se){n.cancelPendingCommit=null;do eh();while(fi!==0);if((Es&6)!==0)throw Error(i(327));if(r!==null){if(r===n.current)throw Error(i(177));if(j=r.lanes|r.childLanes,j|=Jc,xa(n,c,j,Z,he,Se),n===$s&&(is=$s=null,fs=0),fd=r,ql=n,gd=c,fm=j,gm=g,Xx=h,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,Sw(ve,function(){return hy(),null})):(n.callbackNode=null,n.callbackPriority=0),h=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||h){h=z.T,z.T=null,g=ee.p,ee.p=2,Z=Es,Es|=4;try{gw(n,r,c)}finally{Es=Z,ee.p=g,z.T=h}}fi=1,cy(),dy(),Ay()}}function cy(){if(fi===1){fi=0;var n=ql,r=fd,c=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||c){c=z.T,z.T=null;var h=ee.p;ee.p=2;var g=Es;Es|=4;try{Kx(r,n);var j=Lm,Z=Fo(n.containerInfo),he=j.focusedElem,Se=j.selectionRange;if(Z!==he&&he&&he.ownerDocument&&di(he.ownerDocument.documentElement,he)){if(Se!==null&&Pi(he)){var Ke=Se.start,pt=Se.end;if(pt===void 0&&(pt=Ke),"selectionStart"in he)he.selectionStart=Ke,he.selectionEnd=Math.min(pt,he.value.length);else{var wt=he.ownerDocument||document,We=wt&&wt.defaultView||window;if(We.getSelection){var Xe=We.getSelection(),Qa=he.textContent.length,Sa=Math.min(Se.start,Qa),Ds=Se.end===void 0?Sa:Math.min(Se.end,Qa);!Xe.extend&&Sa>Ds&&(Z=Ds,Ds=Sa,Sa=Z);var Ie=ko(he,Sa),Te=ko(he,Ds);if(Ie&&Te&&(Xe.rangeCount!==1||Xe.anchorNode!==Ie.node||Xe.anchorOffset!==Ie.offset||Xe.focusNode!==Te.node||Xe.focusOffset!==Te.offset)){var Me=wt.createRange();Me.setStart(Ie.node,Ie.offset),Xe.removeAllRanges(),Sa>Ds?(Xe.addRange(Me),Xe.extend(Te.node,Te.offset)):(Me.setEnd(Te.node,Te.offset),Xe.addRange(Me))}}}}for(wt=[],Xe=he;Xe=Xe.parentNode;)Xe.nodeType===1&&wt.push({element:Xe,left:Xe.scrollLeft,top:Xe.scrollTop});for(typeof he.focus=="function"&&he.focus(),he=0;he<wt.length;he++){var ft=wt[he];ft.element.scrollLeft=ft.left,ft.element.scrollTop=ft.top}}uh=!!Um,Lm=Um=null}finally{Es=g,ee.p=h,z.T=c}}n.current=r,fi=2}}function dy(){if(fi===2){fi=0;var n=ql,r=fd,c=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||c){c=z.T,z.T=null;var h=ee.p;ee.p=2;var g=Es;Es|=4;try{Mx(n,r.alternate,r)}finally{Es=g,ee.p=h,z.T=c}}fi=3}}function Ay(){if(fi===4||fi===3){fi=0,Et();var n=ql,r=fd,c=gd,h=Xx;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?fi=5:(fi=0,fd=ql=null,uy(n,n.pendingLanes));var g=n.pendingLanes;if(g===0&&(zl=null),Ve(c),r=r.stateNode,Ut&&typeof Ut.onCommitFiberRoot=="function")try{Ut.onCommitFiberRoot(lt,r,void 0,(r.current.flags&128)===128)}catch{}if(h!==null){r=z.T,g=ee.p,ee.p=2,z.T=null;try{for(var j=n.onRecoverableError,Z=0;Z<h.length;Z++){var he=h[Z];j(he.value,{componentStack:he.stack})}}finally{z.T=r,ee.p=g}}(gd&3)!==0&&eh(),Io(n),g=n.pendingLanes,(c&4194090)!==0&&(g&42)!==0?n===xm?xA++:(xA=0,xm=n):xA=0,yA(0)}}function uy(n,r){(n.pooledCacheLanes&=r)===0&&(r=n.pooledCache,r!=null&&(n.pooledCache=null,yc(r)))}function eh(n){return cy(),dy(),Ay(),hy()}function hy(){if(fi!==5)return!1;var n=ql,r=fm;fm=0;var c=Ve(gd),h=z.T,g=ee.p;try{ee.p=32>c?32:c,z.T=null,c=gm,gm=null;var j=ql,Z=gd;if(fi=0,fd=ql=null,gd=0,(Es&6)!==0)throw Error(i(331));var he=Es;if(Es|=4,Yx(j.current),Vx(j,j.current,Z,c),Es=he,yA(0,!1),Ut&&typeof Ut.onPostCommitFiberRoot=="function")try{Ut.onPostCommitFiberRoot(lt,j)}catch{}return!0}finally{ee.p=g,z.T=h,uy(n,r)}}function py(n,r,c){r=Oi(c,r),r=Yp(n.stateNode,r,2),n=Ft(n,r,2),n!==null&&(Ba(n,2),Io(n))}function zs(n,r,c){if(n.tag===3)py(n,n,c);else for(;r!==null;){if(r.tag===3){py(r,n,c);break}else if(r.tag===1){var h=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(zl===null||!zl.has(h))){n=Oi(c,n),c=xx(2),h=Ft(r,c,2),h!==null&&(yx(c,h,r,n),Ba(h,2),Io(h));break}}r=r.return}}function jm(n,r,c){var h=n.pingCache;if(h===null){h=n.pingCache=new vw;var g=new Set;h.set(r,g)}else g=h.get(r),g===void 0&&(g=new Set,h.set(r,g));g.has(c)||(um=!0,g.add(c),n=Nw.bind(null,n,r,c),r.then(n,n))}function Nw(n,r,c){var h=n.pingCache;h!==null&&h.delete(r),n.pingedLanes|=n.suspendedLanes&c,n.warmLanes&=~c,$s===n&&(fs&c)===c&&(_n===4||_n===3&&(fs&62914560)===fs&&300>Mt()-mm?(Es&2)===0&&xd(n,0):hm|=c,md===fs&&(md=0)),Io(n)}function my(n,r){r===0&&(r=Za()),n=Zo(n,r),n!==null&&(Ba(n,r),Io(n))}function Bw(n){var r=n.memoizedState,c=0;r!==null&&(c=r.retryLane),my(n,c)}function Cw(n,r){var c=0;switch(n.tag){case 13:var h=n.stateNode,g=n.memoizedState;g!==null&&(c=g.retryLane);break;case 19:h=n.stateNode;break;case 22:h=n.stateNode._retryCache;break;default:throw Error(i(314))}h!==null&&h.delete(r),my(n,c)}function Sw(n,r){return ut(n,r)}var th=null,vd=null,wm=!1,ah=!1,_m=!1,Uc=0;function Io(n){n!==vd&&n.next===null&&(vd===null?th=vd=n:vd=vd.next=n),ah=!0,wm||(wm=!0,Fw())}function yA(n,r){if(!_m&&ah){_m=!0;do for(var c=!1,h=th;h!==null;){if(n!==0){var g=h.pendingLanes;if(g===0)var j=0;else{var Z=h.suspendedLanes,he=h.pingedLanes;j=(1<<31-Nt(42|n)+1)-1,j&=g&~(Z&~he),j=j&201326741?j&201326741|1:j?j|2:0}j!==0&&(c=!0,yy(h,j))}else j=fs,j=Ot(h,h===$s?j:0,h.cancelPendingCommit!==null||h.timeoutHandle!==-1),(j&3)===0||Ct(h,j)||(c=!0,yy(h,j));h=h.next}while(c);_m=!1}}function kw(){fy()}function fy(){ah=wm=!1;var n=0;Uc!==0&&(Iw()&&(n=Uc),Uc=0);for(var r=Mt(),c=null,h=th;h!==null;){var g=h.next,j=gy(h,r);j===0?(h.next=null,c===null?th=g:c.next=g,g===null&&(vd=c)):(c=h,(n!==0||(j&3)!==0)&&(ah=!0)),h=g}yA(n)}function gy(n,r){for(var c=n.suspendedLanes,h=n.pingedLanes,g=n.expirationTimes,j=n.pendingLanes&-62914561;0<j;){var Z=31-Nt(j),he=1<<Z,Se=g[Z];Se===-1?((he&c)===0||(he&h)!==0)&&(g[Z]=ia(he,r)):Se<=r&&(n.expiredLanes|=he),j&=~he}if(r=$s,c=fs,c=Ot(n,n===r?c:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),h=n.callbackNode,c===0||n===r&&(Us===2||Us===9)||n.cancelPendingCommit!==null)return h!==null&&h!==null&&Ge(h),n.callbackNode=null,n.callbackPriority=0;if((c&3)===0||Ct(n,c)){if(r=c&-c,r===n.callbackPriority)return r;switch(h!==null&&Ge(h),Ve(c)){case 2:case 8:c=mt;break;case 32:c=ve;break;case 268435456:c=Oe;break;default:c=ve}return h=xy.bind(null,n),c=ut(c,h),n.callbackPriority=r,n.callbackNode=c,r}return h!==null&&h!==null&&Ge(h),n.callbackPriority=2,n.callbackNode=null,2}function xy(n,r){if(fi!==0&&fi!==5)return n.callbackNode=null,n.callbackPriority=0,null;var c=n.callbackNode;if(eh()&&n.callbackNode!==c)return null;var h=fs;return h=Ot(n,n===$s?h:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),h===0?null:(ey(n,h,r),gy(n,Mt()),n.callbackNode!=null&&n.callbackNode===c?xy.bind(null,n):null)}function yy(n,r){if(eh())return null;ey(n,r,!0)}function Fw(){Hw(function(){(Es&6)!==0?ut(Je,kw):fy()})}function Nm(){return Uc===0&&(Uc=ca()),Uc}function vy(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:ot(""+n)}function by(n,r){var c=r.ownerDocument.createElement("input");return c.name=r.name,c.value=r.value,n.id&&c.setAttribute("form",n.id),r.parentNode.insertBefore(c,r),n=new FormData(n),c.parentNode.removeChild(c),n}function Ew(n,r,c,h,g){if(r==="submit"&&c&&c.stateNode===g){var j=vy((g[_a]||null).action),Z=h.submitter;Z&&(r=(r=Z[_a]||null)?vy(r.formAction):Z.getAttribute("formAction"),r!==null&&(j=r,Z=null));var he=new bi("action","action",null,h,g);n.push({event:he,listeners:[{instance:null,listener:function(){if(h.defaultPrevented){if(Uc!==0){var Se=Z?by(g,Z):new FormData(g);Or(c,{pending:!0,data:Se,method:g.method,action:j},null,Se)}}else typeof j=="function"&&(he.preventDefault(),Se=Z?by(g,Z):new FormData(g),Or(c,{pending:!0,data:Se,method:g.method,action:j},j,Se))},currentTarget:g}]})}}for(var Bm=0;Bm<Yc.length;Bm++){var Cm=Yc[Bm],Uw=Cm.toLowerCase(),Lw=Cm[0].toUpperCase()+Cm.slice(1);sr(Uw,"on"+Lw)}sr(Qr,"onAnimationEnd"),sr(Bl,"onAnimationIteration"),sr(Jo,"onAnimationStart"),sr("dblclick","onDoubleClick"),sr("focusin","onFocus"),sr("focusout","onBlur"),sr(Wc,"onTransitionRun"),sr(vu,"onTransitionStart"),sr(bu,"onTransitionCancel"),sr(Gd,"onTransitionEnd"),me("onMouseEnter",["mouseout","mouseover"]),me("onMouseLeave",["mouseout","mouseover"]),me("onPointerEnter",["pointerout","pointerover"]),me("onPointerLeave",["pointerout","pointerover"]),W("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),W("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),W("onBeforeInput",["compositionend","keypress","textInput","paste"]),W("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),W("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),W("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var vA="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Tw=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(vA));function jy(n,r){r=(r&4)!==0;for(var c=0;c<n.length;c++){var h=n[c],g=h.event;h=h.listeners;e:{var j=void 0;if(r)for(var Z=h.length-1;0<=Z;Z--){var he=h[Z],Se=he.instance,Ke=he.currentTarget;if(he=he.listener,Se!==j&&g.isPropagationStopped())break e;j=he,g.currentTarget=Ke;try{j(g)}catch(pt){zu(pt)}g.currentTarget=null,j=Se}else for(Z=0;Z<h.length;Z++){if(he=h[Z],Se=he.instance,Ke=he.currentTarget,he=he.listener,Se!==j&&g.isPropagationStopped())break e;j=he,g.currentTarget=Ke;try{j(g)}catch(pt){zu(pt)}g.currentTarget=null,j=Se}}}}function rs(n,r){var c=r[Pa];c===void 0&&(c=r[Pa]=new Set);var h=n+"__bubble";c.has(h)||(wy(r,n,2,!1),c.add(h))}function Sm(n,r,c){var h=0;r&&(h|=4),wy(c,n,h,r)}var sh="_reactListening"+Math.random().toString(36).slice(2);function km(n){if(!n[sh]){n[sh]=!0,Va.forEach(function(c){c!=="selectionchange"&&(Tw.has(c)||Sm(c,!1,n),Sm(c,!0,n))});var r=n.nodeType===9?n:n.ownerDocument;r===null||r[sh]||(r[sh]=!0,Sm("selectionchange",!1,r))}}function wy(n,r,c,h){switch(Vy(r)){case 2:var g=o2;break;case 8:g=l2;break;default:g=zm}c=g.bind(null,r,c,n),g=void 0,!bn||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(g=!0),h?g!==void 0?n.addEventListener(r,c,{capture:!0,passive:g}):n.addEventListener(r,c,!0):g!==void 0?n.addEventListener(r,c,{passive:g}):n.addEventListener(r,c,!1)}function Fm(n,r,c,h,g){var j=h;if((r&1)===0&&(r&2)===0&&h!==null)e:for(;;){if(h===null)return;var Z=h.tag;if(Z===3||Z===4){var he=h.stateNode.containerInfo;if(he===g)break;if(Z===4)for(Z=h.return;Z!==null;){var Se=Z.tag;if((Se===3||Se===4)&&Z.stateNode.containerInfo===g)return;Z=Z.return}for(;he!==null;){if(Z=it(he),Z===null)return;if(Se=Z.tag,Se===5||Se===6||Se===26||Se===27){h=j=Z;continue e}he=he.parentNode}}h=h.return}hn(function(){var Ke=j,pt=aa(c),wt=[];e:{var We=Vd.get(n);if(We!==void 0){var Xe=bi,Qa=n;switch(n){case"keypress":if(Di(c)===0)break e;case"keydown":case"keyup":Xe=Fa;break;case"focusin":Qa="focus",Xe=to;break;case"focusout":Qa="blur",Xe=to;break;case"beforeblur":case"afterblur":Xe=to;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Xe=Ja;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Xe=er;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Xe=Xs;break;case Qr:case Bl:case Jo:Xe=ao;break;case Gd:Xe=pn;break;case"scroll":case"scrollend":Xe=Zr;break;case"wheel":Xe=Cn;break;case"copy":case"cut":case"paste":Xe=B;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Xe=ss;break;case"toggle":case"beforetoggle":Xe=Gn}var Sa=(r&4)!==0,Ds=!Sa&&(n==="scroll"||n==="scrollend"),Ie=Sa?We!==null?We+"Capture":null:We;Sa=[];for(var Te=Ke,Me;Te!==null;){var ft=Te;if(Me=ft.stateNode,ft=ft.tag,ft!==5&&ft!==26&&ft!==27||Me===null||Ie===null||(ft=Kn(Te,Ie),ft!=null&&Sa.push(bA(Te,ft,Me))),Ds)break;Te=Te.return}0<Sa.length&&(We=new Xe(We,Qa,null,c,pt),wt.push({event:We,listeners:Sa}))}}if((r&7)===0){e:{if(We=n==="mouseover"||n==="pointerover",Xe=n==="mouseout"||n==="pointerout",We&&c!==Kt&&(Qa=c.relatedTarget||c.fromElement)&&(it(Qa)||Qa[Na]))break e;if((Xe||We)&&(We=pt.window===pt?pt:(We=pt.ownerDocument)?We.defaultView||We.parentWindow:window,Xe?(Qa=c.relatedTarget||c.toElement,Xe=Ke,Qa=Qa?it(Qa):null,Qa!==null&&(Ds=l(Qa),Sa=Qa.tag,Qa!==Ds||Sa!==5&&Sa!==27&&Sa!==6)&&(Qa=null)):(Xe=null,Qa=Ke),Xe!==Qa)){if(Sa=Ja,ft="onMouseLeave",Ie="onMouseEnter",Te="mouse",(n==="pointerout"||n==="pointerover")&&(Sa=ss,ft="onPointerLeave",Ie="onPointerEnter",Te="pointer"),Ds=Xe==null?We:zt(Xe),Me=Qa==null?We:zt(Qa),We=new Sa(ft,Te+"leave",Xe,c,pt),We.target=Ds,We.relatedTarget=Me,ft=null,it(pt)===Ke&&(Sa=new Sa(Ie,Te+"enter",Qa,c,pt),Sa.target=Me,Sa.relatedTarget=Ds,ft=Sa),Ds=ft,Xe&&Qa)t:{for(Sa=Xe,Ie=Qa,Te=0,Me=Sa;Me;Me=bd(Me))Te++;for(Me=0,ft=Ie;ft;ft=bd(ft))Me++;for(;0<Te-Me;)Sa=bd(Sa),Te--;for(;0<Me-Te;)Ie=bd(Ie),Me--;for(;Te--;){if(Sa===Ie||Ie!==null&&Sa===Ie.alternate)break t;Sa=bd(Sa),Ie=bd(Ie)}Sa=null}else Sa=null;Xe!==null&&_y(wt,We,Xe,Sa,!1),Qa!==null&&Ds!==null&&_y(wt,Ds,Qa,Sa,!0)}}e:{if(We=Ke?zt(Ke):window,Xe=We.nodeName&&We.nodeName.toLowerCase(),Xe==="select"||Xe==="input"&&We.type==="file")var ma=Pt;else if(P(We))if(Rt)ma=ks;else{ma=ci;var as=Hs}else Xe=We.nodeName,!Xe||Xe.toLowerCase()!=="input"||We.type!=="checkbox"&&We.type!=="radio"?Ke&&Re(Ke.elementType)&&(ma=Pt):ma=Bi;if(ma&&(ma=ma(n,Ke))){Ue(wt,ma,c,pt);break e}as&&as(n,We,Ke),n==="focusout"&&Ke&&We.type==="number"&&Ke.memoizedProps.value!=null&&Ar(We,"number",We.value)}switch(as=Ke?zt(Ke):window,n){case"focusin":(P(as)||as.contentEditable==="true")&&(Si=as,Hi=Ke,ar=null);break;case"focusout":ar=Hi=Si=null;break;case"mousedown":so=!0;break;case"contextmenu":case"mouseup":case"dragend":so=!1,Mi(wt,c,pt);break;case"selectionchange":if(Tr)break;case"keydown":case"keyup":Mi(wt,c,pt)}var ya;if(tr)e:{switch(n){case"compositionstart":var Ua="onCompositionStart";break e;case"compositionend":Ua="onCompositionEnd";break e;case"compositionupdate":Ua="onCompositionUpdate";break e}Ua=void 0}else Ni?Sn(n,c)&&(Ua="onCompositionEnd"):n==="keydown"&&c.keyCode===229&&(Ua="onCompositionStart");Ua&&(Er&&c.locale!=="ko"&&(Ni||Ua!=="onCompositionStart"?Ua==="onCompositionEnd"&&Ni&&(ya=Co()):(Yi=pt,ur="value"in Yi?Yi.value:Yi.textContent,Ni=!0)),as=nh(Ke,Ua),0<as.length&&(Ua=new je(Ua,n,null,c,pt),wt.push({event:Ua,listeners:as}),ya?Ua.data=ya:(ya=Lr(c),ya!==null&&(Ua.data=ya)))),(ya=Fr?Wo(n,c):Yo(n,c))&&(Ua=nh(Ke,"onBeforeInput"),0<Ua.length&&(as=new je("onBeforeInput","beforeinput",null,c,pt),wt.push({event:as,listeners:Ua}),as.data=ya)),Ew(wt,n,Ke,c,pt)}jy(wt,r)})}function bA(n,r,c){return{instance:n,listener:r,currentTarget:c}}function nh(n,r){for(var c=r+"Capture",h=[];n!==null;){var g=n,j=g.stateNode;if(g=g.tag,g!==5&&g!==26&&g!==27||j===null||(g=Kn(n,c),g!=null&&h.unshift(bA(n,g,j)),g=Kn(n,r),g!=null&&h.push(bA(n,g,j))),n.tag===3)return h;n=n.return}return[]}function bd(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function _y(n,r,c,h,g){for(var j=r._reactName,Z=[];c!==null&&c!==h;){var he=c,Se=he.alternate,Ke=he.stateNode;if(he=he.tag,Se!==null&&Se===h)break;he!==5&&he!==26&&he!==27||Ke===null||(Se=Ke,g?(Ke=Kn(c,j),Ke!=null&&Z.unshift(bA(c,Ke,Se))):g||(Ke=Kn(c,j),Ke!=null&&Z.push(bA(c,Ke,Se)))),c=c.return}Z.length!==0&&n.push({event:r,listeners:Z})}var Qw=/\r\n?/g,Rw=/\u0000|\uFFFD/g;function Ny(n){return(typeof n=="string"?n:""+n).replace(Qw,`
`).replace(Rw,"")}function By(n,r){return r=Ny(r),Ny(n)===r}function ih(){}function Rs(n,r,c,h,g,j){switch(c){case"children":typeof h=="string"?r==="body"||r==="textarea"&&h===""||li(n,h):(typeof h=="number"||typeof h=="bigint")&&r!=="body"&&li(n,""+h);break;case"className":Jt(n,"class",h);break;case"tabIndex":Jt(n,"tabindex",h);break;case"dir":case"role":case"viewBox":case"width":case"height":Jt(n,c,h);break;case"style":xe(n,h,j);break;case"data":if(r!=="object"){Jt(n,"data",h);break}case"src":case"href":if(h===""&&(r!=="a"||c!=="href")){n.removeAttribute(c);break}if(h==null||typeof h=="function"||typeof h=="symbol"||typeof h=="boolean"){n.removeAttribute(c);break}h=ot(""+h),n.setAttribute(c,h);break;case"action":case"formAction":if(typeof h=="function"){n.setAttribute(c,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof j=="function"&&(c==="formAction"?(r!=="input"&&Rs(n,r,"name",g.name,g,null),Rs(n,r,"formEncType",g.formEncType,g,null),Rs(n,r,"formMethod",g.formMethod,g,null),Rs(n,r,"formTarget",g.formTarget,g,null)):(Rs(n,r,"encType",g.encType,g,null),Rs(n,r,"method",g.method,g,null),Rs(n,r,"target",g.target,g,null)));if(h==null||typeof h=="symbol"||typeof h=="boolean"){n.removeAttribute(c);break}h=ot(""+h),n.setAttribute(c,h);break;case"onClick":h!=null&&(n.onclick=ih);break;case"onScroll":h!=null&&rs("scroll",n);break;case"onScrollEnd":h!=null&&rs("scrollend",n);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(i(61));if(c=h.__html,c!=null){if(g.children!=null)throw Error(i(60));n.innerHTML=c}}break;case"multiple":n.multiple=h&&typeof h!="function"&&typeof h!="symbol";break;case"muted":n.muted=h&&typeof h!="function"&&typeof h!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(h==null||typeof h=="function"||typeof h=="boolean"||typeof h=="symbol"){n.removeAttribute("xlink:href");break}c=ot(""+h),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":h!=null&&typeof h!="function"&&typeof h!="symbol"?n.setAttribute(c,""+h):n.removeAttribute(c);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":h&&typeof h!="function"&&typeof h!="symbol"?n.setAttribute(c,""):n.removeAttribute(c);break;case"capture":case"download":h===!0?n.setAttribute(c,""):h!==!1&&h!=null&&typeof h!="function"&&typeof h!="symbol"?n.setAttribute(c,h):n.removeAttribute(c);break;case"cols":case"rows":case"size":case"span":h!=null&&typeof h!="function"&&typeof h!="symbol"&&!isNaN(h)&&1<=h?n.setAttribute(c,h):n.removeAttribute(c);break;case"rowSpan":case"start":h==null||typeof h=="function"||typeof h=="symbol"||isNaN(h)?n.removeAttribute(c):n.setAttribute(c,h);break;case"popover":rs("beforetoggle",n),rs("toggle",n),It(n,"popover",h);break;case"xlinkActuate":Ht(n,"http://www.w3.org/1999/xlink","xlink:actuate",h);break;case"xlinkArcrole":Ht(n,"http://www.w3.org/1999/xlink","xlink:arcrole",h);break;case"xlinkRole":Ht(n,"http://www.w3.org/1999/xlink","xlink:role",h);break;case"xlinkShow":Ht(n,"http://www.w3.org/1999/xlink","xlink:show",h);break;case"xlinkTitle":Ht(n,"http://www.w3.org/1999/xlink","xlink:title",h);break;case"xlinkType":Ht(n,"http://www.w3.org/1999/xlink","xlink:type",h);break;case"xmlBase":Ht(n,"http://www.w3.org/XML/1998/namespace","xml:base",h);break;case"xmlLang":Ht(n,"http://www.w3.org/XML/1998/namespace","xml:lang",h);break;case"xmlSpace":Ht(n,"http://www.w3.org/XML/1998/namespace","xml:space",h);break;case"is":It(n,"is",h);break;case"innerText":case"textContent":break;default:(!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(c=nt.get(c)||c,It(n,c,h))}}function Em(n,r,c,h,g,j){switch(c){case"style":xe(n,h,j);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(i(61));if(c=h.__html,c!=null){if(g.children!=null)throw Error(i(60));n.innerHTML=c}}break;case"children":typeof h=="string"?li(n,h):(typeof h=="number"||typeof h=="bigint")&&li(n,""+h);break;case"onScroll":h!=null&&rs("scroll",n);break;case"onScrollEnd":h!=null&&rs("scrollend",n);break;case"onClick":h!=null&&(n.onclick=ih);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Zt.hasOwnProperty(c))e:{if(c[0]==="o"&&c[1]==="n"&&(g=c.endsWith("Capture"),r=c.slice(2,g?c.length-7:void 0),j=n[_a]||null,j=j!=null?j[c]:null,typeof j=="function"&&n.removeEventListener(r,j,g),typeof h=="function")){typeof j!="function"&&j!==null&&(c in n?n[c]=null:n.hasAttribute(c)&&n.removeAttribute(c)),n.addEventListener(r,h,g);break e}c in n?n[c]=h:h===!0?n.setAttribute(c,""):It(n,c,h)}}}function gi(n,r,c){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":rs("error",n),rs("load",n);var h=!1,g=!1,j;for(j in c)if(c.hasOwnProperty(j)){var Z=c[j];if(Z!=null)switch(j){case"src":h=!0;break;case"srcSet":g=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:Rs(n,r,j,Z,c,null)}}g&&Rs(n,r,"srcSet",c.srcSet,c,null),h&&Rs(n,r,"src",c.src,c,null);return;case"input":rs("invalid",n);var he=j=Z=g=null,Se=null,Ke=null;for(h in c)if(c.hasOwnProperty(h)){var pt=c[h];if(pt!=null)switch(h){case"name":g=pt;break;case"type":Z=pt;break;case"checked":Se=pt;break;case"defaultChecked":Ke=pt;break;case"value":j=pt;break;case"defaultValue":he=pt;break;case"children":case"dangerouslySetInnerHTML":if(pt!=null)throw Error(i(137,r));break;default:Rs(n,r,h,pt,c,null)}}Bo(n,j,he,Se,Ke,Z,g,!1),Js(n);return;case"select":rs("invalid",n),h=Z=j=null;for(g in c)if(c.hasOwnProperty(g)&&(he=c[g],he!=null))switch(g){case"value":j=he;break;case"defaultValue":Z=he;break;case"multiple":h=he;default:Rs(n,r,g,he,c,null)}r=j,c=Z,n.multiple=!!h,r!=null?vn(n,!!h,r,!1):c!=null&&vn(n,!!h,c,!0);return;case"textarea":rs("invalid",n),j=g=h=null;for(Z in c)if(c.hasOwnProperty(Z)&&(he=c[Z],he!=null))switch(Z){case"value":h=he;break;case"defaultValue":g=he;break;case"children":j=he;break;case"dangerouslySetInnerHTML":if(he!=null)throw Error(i(91));break;default:Rs(n,r,Z,he,c,null)}Br(n,h,g,j),Js(n);return;case"option":for(Se in c)if(c.hasOwnProperty(Se)&&(h=c[Se],h!=null))switch(Se){case"selected":n.selected=h&&typeof h!="function"&&typeof h!="symbol";break;default:Rs(n,r,Se,h,c,null)}return;case"dialog":rs("beforetoggle",n),rs("toggle",n),rs("cancel",n),rs("close",n);break;case"iframe":case"object":rs("load",n);break;case"video":case"audio":for(h=0;h<vA.length;h++)rs(vA[h],n);break;case"image":rs("error",n),rs("load",n);break;case"details":rs("toggle",n);break;case"embed":case"source":case"link":rs("error",n),rs("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Ke in c)if(c.hasOwnProperty(Ke)&&(h=c[Ke],h!=null))switch(Ke){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:Rs(n,r,Ke,h,c,null)}return;default:if(Re(r)){for(pt in c)c.hasOwnProperty(pt)&&(h=c[pt],h!==void 0&&Em(n,r,pt,h,c,void 0));return}}for(he in c)c.hasOwnProperty(he)&&(h=c[he],h!=null&&Rs(n,r,he,h,c,null))}function Dw(n,r,c,h){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var g=null,j=null,Z=null,he=null,Se=null,Ke=null,pt=null;for(Xe in c){var wt=c[Xe];if(c.hasOwnProperty(Xe)&&wt!=null)switch(Xe){case"checked":break;case"value":break;case"defaultValue":Se=wt;default:h.hasOwnProperty(Xe)||Rs(n,r,Xe,null,h,wt)}}for(var We in h){var Xe=h[We];if(wt=c[We],h.hasOwnProperty(We)&&(Xe!=null||wt!=null))switch(We){case"type":j=Xe;break;case"name":g=Xe;break;case"checked":Ke=Xe;break;case"defaultChecked":pt=Xe;break;case"value":Z=Xe;break;case"defaultValue":he=Xe;break;case"children":case"dangerouslySetInnerHTML":if(Xe!=null)throw Error(i(137,r));break;default:Xe!==wt&&Rs(n,r,We,Xe,h,wt)}}Ri(n,Z,he,Se,Ke,pt,j,g);return;case"select":Xe=Z=he=We=null;for(j in c)if(Se=c[j],c.hasOwnProperty(j)&&Se!=null)switch(j){case"value":break;case"multiple":Xe=Se;default:h.hasOwnProperty(j)||Rs(n,r,j,null,h,Se)}for(g in h)if(j=h[g],Se=c[g],h.hasOwnProperty(g)&&(j!=null||Se!=null))switch(g){case"value":We=j;break;case"defaultValue":he=j;break;case"multiple":Z=j;default:j!==Se&&Rs(n,r,g,j,h,Se)}r=he,c=Z,h=Xe,We!=null?vn(n,!!c,We,!1):!!h!=!!c&&(r!=null?vn(n,!!c,r,!0):vn(n,!!c,c?[]:"",!1));return;case"textarea":Xe=We=null;for(he in c)if(g=c[he],c.hasOwnProperty(he)&&g!=null&&!h.hasOwnProperty(he))switch(he){case"value":break;case"children":break;default:Rs(n,r,he,null,h,g)}for(Z in h)if(g=h[Z],j=c[Z],h.hasOwnProperty(Z)&&(g!=null||j!=null))switch(Z){case"value":We=g;break;case"defaultValue":Xe=g;break;case"children":break;case"dangerouslySetInnerHTML":if(g!=null)throw Error(i(91));break;default:g!==j&&Rs(n,r,Z,g,h,j)}Mn(n,We,Xe);return;case"option":for(var Qa in c)if(We=c[Qa],c.hasOwnProperty(Qa)&&We!=null&&!h.hasOwnProperty(Qa))switch(Qa){case"selected":n.selected=!1;break;default:Rs(n,r,Qa,null,h,We)}for(Se in h)if(We=h[Se],Xe=c[Se],h.hasOwnProperty(Se)&&We!==Xe&&(We!=null||Xe!=null))switch(Se){case"selected":n.selected=We&&typeof We!="function"&&typeof We!="symbol";break;default:Rs(n,r,Se,We,h,Xe)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Sa in c)We=c[Sa],c.hasOwnProperty(Sa)&&We!=null&&!h.hasOwnProperty(Sa)&&Rs(n,r,Sa,null,h,We);for(Ke in h)if(We=h[Ke],Xe=c[Ke],h.hasOwnProperty(Ke)&&We!==Xe&&(We!=null||Xe!=null))switch(Ke){case"children":case"dangerouslySetInnerHTML":if(We!=null)throw Error(i(137,r));break;default:Rs(n,r,Ke,We,h,Xe)}return;default:if(Re(r)){for(var Ds in c)We=c[Ds],c.hasOwnProperty(Ds)&&We!==void 0&&!h.hasOwnProperty(Ds)&&Em(n,r,Ds,void 0,h,We);for(pt in h)We=h[pt],Xe=c[pt],!h.hasOwnProperty(pt)||We===Xe||We===void 0&&Xe===void 0||Em(n,r,pt,We,h,Xe);return}}for(var Ie in c)We=c[Ie],c.hasOwnProperty(Ie)&&We!=null&&!h.hasOwnProperty(Ie)&&Rs(n,r,Ie,null,h,We);for(wt in h)We=h[wt],Xe=c[wt],!h.hasOwnProperty(wt)||We===Xe||We==null&&Xe==null||Rs(n,r,wt,We,h,Xe)}var Um=null,Lm=null;function rh(n){return n.nodeType===9?n:n.ownerDocument}function Cy(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Sy(n,r){if(n===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&r==="foreignObject"?0:n}function Tm(n,r){return n==="textarea"||n==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var Qm=null;function Iw(){var n=window.event;return n&&n.type==="popstate"?n===Qm?!1:(Qm=n,!0):(Qm=null,!1)}var ky=typeof setTimeout=="function"?setTimeout:void 0,Pw=typeof clearTimeout=="function"?clearTimeout:void 0,Fy=typeof Promise=="function"?Promise:void 0,Hw=typeof queueMicrotask=="function"?queueMicrotask:typeof Fy<"u"?function(n){return Fy.resolve(null).then(n).catch(Mw)}:ky;function Mw(n){setTimeout(function(){throw n})}function Gl(n){return n==="head"}function Ey(n,r){var c=r,h=0,g=0;do{var j=c.nextSibling;if(n.removeChild(c),j&&j.nodeType===8)if(c=j.data,c==="/$"){if(0<h&&8>h){c=h;var Z=n.ownerDocument;if(c&1&&jA(Z.documentElement),c&2&&jA(Z.body),c&4)for(c=Z.head,jA(c),Z=c.firstChild;Z;){var he=Z.nextSibling,Se=Z.nodeName;Z[yn]||Se==="SCRIPT"||Se==="STYLE"||Se==="LINK"&&Z.rel.toLowerCase()==="stylesheet"||c.removeChild(Z),Z=he}}if(g===0){n.removeChild(j),FA(r);return}g--}else c==="$"||c==="$?"||c==="$!"?g++:h=c.charCodeAt(0)-48;else h=0;c=j}while(c);FA(r)}function Rm(n){var r=n.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var c=r;switch(r=r.nextSibling,c.nodeName){case"HTML":case"HEAD":case"BODY":Rm(c),ge(c);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(c.rel.toLowerCase()==="stylesheet")continue}n.removeChild(c)}}function Ow(n,r,c,h){for(;n.nodeType===1;){var g=c;if(n.nodeName.toLowerCase()!==r.toLowerCase()){if(!h&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(h){if(!n[yn])switch(r){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(j=n.getAttribute("rel"),j==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(j!==g.rel||n.getAttribute("href")!==(g.href==null||g.href===""?null:g.href)||n.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin)||n.getAttribute("title")!==(g.title==null?null:g.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(j=n.getAttribute("src"),(j!==(g.src==null?null:g.src)||n.getAttribute("type")!==(g.type==null?null:g.type)||n.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin))&&j&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(r==="input"&&n.type==="hidden"){var j=g.name==null?null:""+g.name;if(g.type==="hidden"&&n.getAttribute("name")===j)return n}else return n;if(n=go(n.nextSibling),n===null)break}return null}function zw(n,r,c){if(r==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!c||(n=go(n.nextSibling),n===null))return null;return n}function Dm(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState==="complete"}function qw(n,r){var c=n.ownerDocument;if(n.data!=="$?"||c.readyState==="complete")r();else{var h=function(){r(),c.removeEventListener("DOMContentLoaded",h)};c.addEventListener("DOMContentLoaded",h),n._reactRetry=h}}function go(n){for(;n!=null;n=n.nextSibling){var r=n.nodeType;if(r===1||r===3)break;if(r===8){if(r=n.data,r==="$"||r==="$!"||r==="$?"||r==="F!"||r==="F")break;if(r==="/$")return null}}return n}var Im=null;function Uy(n){n=n.previousSibling;for(var r=0;n;){if(n.nodeType===8){var c=n.data;if(c==="$"||c==="$!"||c==="$?"){if(r===0)return n;r--}else c==="/$"&&r++}n=n.previousSibling}return null}function Ly(n,r,c){switch(r=rh(c),n){case"html":if(n=r.documentElement,!n)throw Error(i(452));return n;case"head":if(n=r.head,!n)throw Error(i(453));return n;case"body":if(n=r.body,!n)throw Error(i(454));return n;default:throw Error(i(451))}}function jA(n){for(var r=n.attributes;r.length;)n.removeAttributeNode(r[0]);ge(n)}var Kr=new Map,Ty=new Set;function oh(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var pl=ee.d;ee.d={f:Kw,r:Gw,D:Vw,C:$w,L:Ww,m:Yw,X:Xw,S:Jw,M:Zw};function Kw(){var n=pl.f(),r=Xu();return n||r}function Gw(n){var r=$e(n);r!==null&&r.tag===5&&r.type==="form"?Cc(r):pl.r(n)}var jd=typeof document>"u"?null:document;function Qy(n,r,c){var h=jd;if(h&&typeof r=="string"&&r){var g=$a(r);g='link[rel="'+n+'"][href="'+g+'"]',typeof c=="string"&&(g+='[crossorigin="'+c+'"]'),Ty.has(g)||(Ty.add(g),n={rel:n,crossOrigin:c,href:r},h.querySelector(g)===null&&(r=h.createElement("link"),gi(r,"link",n),yt(r),h.head.appendChild(r)))}}function Vw(n){pl.D(n),Qy("dns-prefetch",n,null)}function $w(n,r){pl.C(n,r),Qy("preconnect",n,r)}function Ww(n,r,c){pl.L(n,r,c);var h=jd;if(h&&n&&r){var g='link[rel="preload"][as="'+$a(r)+'"]';r==="image"&&c&&c.imageSrcSet?(g+='[imagesrcset="'+$a(c.imageSrcSet)+'"]',typeof c.imageSizes=="string"&&(g+='[imagesizes="'+$a(c.imageSizes)+'"]')):g+='[href="'+$a(n)+'"]';var j=g;switch(r){case"style":j=wd(n);break;case"script":j=_d(n)}Kr.has(j)||(n=m({rel:"preload",href:r==="image"&&c&&c.imageSrcSet?void 0:n,as:r},c),Kr.set(j,n),h.querySelector(g)!==null||r==="style"&&h.querySelector(wA(j))||r==="script"&&h.querySelector(_A(j))||(r=h.createElement("link"),gi(r,"link",n),yt(r),h.head.appendChild(r)))}}function Yw(n,r){pl.m(n,r);var c=jd;if(c&&n){var h=r&&typeof r.as=="string"?r.as:"script",g='link[rel="modulepreload"][as="'+$a(h)+'"][href="'+$a(n)+'"]',j=g;switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":j=_d(n)}if(!Kr.has(j)&&(n=m({rel:"modulepreload",href:n},r),Kr.set(j,n),c.querySelector(g)===null)){switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(c.querySelector(_A(j)))return}h=c.createElement("link"),gi(h,"link",n),yt(h),c.head.appendChild(h)}}}function Jw(n,r,c){pl.S(n,r,c);var h=jd;if(h&&n){var g=St(h).hoistableStyles,j=wd(n);r=r||"default";var Z=g.get(j);if(!Z){var he={loading:0,preload:null};if(Z=h.querySelector(wA(j)))he.loading=5;else{n=m({rel:"stylesheet",href:n,"data-precedence":r},c),(c=Kr.get(j))&&Pm(n,c);var Se=Z=h.createElement("link");yt(Se),gi(Se,"link",n),Se._p=new Promise(function(Ke,pt){Se.onload=Ke,Se.onerror=pt}),Se.addEventListener("load",function(){he.loading|=1}),Se.addEventListener("error",function(){he.loading|=2}),he.loading|=4,lh(Z,r,h)}Z={type:"stylesheet",instance:Z,count:1,state:he},g.set(j,Z)}}}function Xw(n,r){pl.X(n,r);var c=jd;if(c&&n){var h=St(c).hoistableScripts,g=_d(n),j=h.get(g);j||(j=c.querySelector(_A(g)),j||(n=m({src:n,async:!0},r),(r=Kr.get(g))&&Hm(n,r),j=c.createElement("script"),yt(j),gi(j,"link",n),c.head.appendChild(j)),j={type:"script",instance:j,count:1,state:null},h.set(g,j))}}function Zw(n,r){pl.M(n,r);var c=jd;if(c&&n){var h=St(c).hoistableScripts,g=_d(n),j=h.get(g);j||(j=c.querySelector(_A(g)),j||(n=m({src:n,async:!0,type:"module"},r),(r=Kr.get(g))&&Hm(n,r),j=c.createElement("script"),yt(j),gi(j,"link",n),c.head.appendChild(j)),j={type:"script",instance:j,count:1,state:null},h.set(g,j))}}function Ry(n,r,c,h){var g=(g=J.current)?oh(g):null;if(!g)throw Error(i(446));switch(n){case"meta":case"title":return null;case"style":return typeof c.precedence=="string"&&typeof c.href=="string"?(r=wd(c.href),c=St(g).hoistableStyles,h=c.get(r),h||(h={type:"style",instance:null,count:0,state:null},c.set(r,h)),h):{type:"void",instance:null,count:0,state:null};case"link":if(c.rel==="stylesheet"&&typeof c.href=="string"&&typeof c.precedence=="string"){n=wd(c.href);var j=St(g).hoistableStyles,Z=j.get(n);if(Z||(g=g.ownerDocument||g,Z={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},j.set(n,Z),(j=g.querySelector(wA(n)))&&!j._p&&(Z.instance=j,Z.state.loading=5),Kr.has(n)||(c={rel:"preload",as:"style",href:c.href,crossOrigin:c.crossOrigin,integrity:c.integrity,media:c.media,hrefLang:c.hrefLang,referrerPolicy:c.referrerPolicy},Kr.set(n,c),j||e2(g,n,c,Z.state))),r&&h===null)throw Error(i(528,""));return Z}if(r&&h!==null)throw Error(i(529,""));return null;case"script":return r=c.async,c=c.src,typeof c=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=_d(c),c=St(g).hoistableScripts,h=c.get(r),h||(h={type:"script",instance:null,count:0,state:null},c.set(r,h)),h):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,n))}}function wd(n){return'href="'+$a(n)+'"'}function wA(n){return'link[rel="stylesheet"]['+n+"]"}function Dy(n){return m({},n,{"data-precedence":n.precedence,precedence:null})}function e2(n,r,c,h){n.querySelector('link[rel="preload"][as="style"]['+r+"]")?h.loading=1:(r=n.createElement("link"),h.preload=r,r.addEventListener("load",function(){return h.loading|=1}),r.addEventListener("error",function(){return h.loading|=2}),gi(r,"link",c),yt(r),n.head.appendChild(r))}function _d(n){return'[src="'+$a(n)+'"]'}function _A(n){return"script[async]"+n}function Iy(n,r,c){if(r.count++,r.instance===null)switch(r.type){case"style":var h=n.querySelector('style[data-href~="'+$a(c.href)+'"]');if(h)return r.instance=h,yt(h),h;var g=m({},c,{"data-href":c.href,"data-precedence":c.precedence,href:null,precedence:null});return h=(n.ownerDocument||n).createElement("style"),yt(h),gi(h,"style",g),lh(h,c.precedence,n),r.instance=h;case"stylesheet":g=wd(c.href);var j=n.querySelector(wA(g));if(j)return r.state.loading|=4,r.instance=j,yt(j),j;h=Dy(c),(g=Kr.get(g))&&Pm(h,g),j=(n.ownerDocument||n).createElement("link"),yt(j);var Z=j;return Z._p=new Promise(function(he,Se){Z.onload=he,Z.onerror=Se}),gi(j,"link",h),r.state.loading|=4,lh(j,c.precedence,n),r.instance=j;case"script":return j=_d(c.src),(g=n.querySelector(_A(j)))?(r.instance=g,yt(g),g):(h=c,(g=Kr.get(j))&&(h=m({},c),Hm(h,g)),n=n.ownerDocument||n,g=n.createElement("script"),yt(g),gi(g,"link",h),n.head.appendChild(g),r.instance=g);case"void":return null;default:throw Error(i(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(h=r.instance,r.state.loading|=4,lh(h,c.precedence,n));return r.instance}function lh(n,r,c){for(var h=c.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),g=h.length?h[h.length-1]:null,j=g,Z=0;Z<h.length;Z++){var he=h[Z];if(he.dataset.precedence===r)j=he;else if(j!==g)break}j?j.parentNode.insertBefore(n,j.nextSibling):(r=c.nodeType===9?c.head:c,r.insertBefore(n,r.firstChild))}function Pm(n,r){n.crossOrigin==null&&(n.crossOrigin=r.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=r.referrerPolicy),n.title==null&&(n.title=r.title)}function Hm(n,r){n.crossOrigin==null&&(n.crossOrigin=r.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=r.referrerPolicy),n.integrity==null&&(n.integrity=r.integrity)}var ch=null;function Py(n,r,c){if(ch===null){var h=new Map,g=ch=new Map;g.set(c,h)}else g=ch,h=g.get(c),h||(h=new Map,g.set(c,h));if(h.has(n))return h;for(h.set(n,null),c=c.getElementsByTagName(n),g=0;g<c.length;g++){var j=c[g];if(!(j[yn]||j[va]||n==="link"&&j.getAttribute("rel")==="stylesheet")&&j.namespaceURI!=="http://www.w3.org/2000/svg"){var Z=j.getAttribute(r)||"";Z=n+Z;var he=h.get(Z);he?he.push(j):h.set(Z,[j])}}return h}function Hy(n,r,c){n=n.ownerDocument||n,n.head.insertBefore(c,r==="title"?n.querySelector("head > title"):null)}function t2(n,r,c){if(c===1||r.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return n=r.disabled,typeof r.precedence=="string"&&n==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function My(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}var NA=null;function a2(){}function s2(n,r,c){if(NA===null)throw Error(i(475));var h=NA;if(r.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var g=wd(c.href),j=n.querySelector(wA(g));if(j){n=j._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(h.count++,h=dh.bind(h),n.then(h,h)),r.state.loading|=4,r.instance=j,yt(j);return}j=n.ownerDocument||n,c=Dy(c),(g=Kr.get(g))&&Pm(c,g),j=j.createElement("link"),yt(j);var Z=j;Z._p=new Promise(function(he,Se){Z.onload=he,Z.onerror=Se}),gi(j,"link",c),r.instance=j}h.stylesheets===null&&(h.stylesheets=new Map),h.stylesheets.set(r,n),(n=r.state.preload)&&(r.state.loading&3)===0&&(h.count++,r=dh.bind(h),n.addEventListener("load",r),n.addEventListener("error",r))}}function n2(){if(NA===null)throw Error(i(475));var n=NA;return n.stylesheets&&n.count===0&&Mm(n,n.stylesheets),0<n.count?function(r){var c=setTimeout(function(){if(n.stylesheets&&Mm(n,n.stylesheets),n.unsuspend){var h=n.unsuspend;n.unsuspend=null,h()}},6e4);return n.unsuspend=r,function(){n.unsuspend=null,clearTimeout(c)}}:null}function dh(){if(this.count--,this.count===0){if(this.stylesheets)Mm(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var Ah=null;function Mm(n,r){n.stylesheets=null,n.unsuspend!==null&&(n.count++,Ah=new Map,r.forEach(i2,n),Ah=null,dh.call(n))}function i2(n,r){if(!(r.state.loading&4)){var c=Ah.get(n);if(c)var h=c.get(null);else{c=new Map,Ah.set(n,c);for(var g=n.querySelectorAll("link[data-precedence],style[data-precedence]"),j=0;j<g.length;j++){var Z=g[j];(Z.nodeName==="LINK"||Z.getAttribute("media")!=="not all")&&(c.set(Z.dataset.precedence,Z),h=Z)}h&&c.set(null,h)}g=r.instance,Z=g.getAttribute("data-precedence"),j=c.get(Z)||h,j===h&&c.set(null,g),c.set(Z,g),this.count++,h=dh.bind(this),g.addEventListener("load",h),g.addEventListener("error",h),j?j.parentNode.insertBefore(g,j.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(g,n.firstChild)),r.state.loading|=4}}var BA={$$typeof:O,Provider:null,Consumer:null,_currentValue:le,_currentValue2:le,_threadCount:0};function r2(n,r,c,h,g,j,Z,he){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=os(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=os(0),this.hiddenUpdates=os(null),this.identifierPrefix=h,this.onUncaughtError=g,this.onCaughtError=j,this.onRecoverableError=Z,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=he,this.incompleteTransitions=new Map}function Oy(n,r,c,h,g,j,Z,he,Se,Ke,pt,wt){return n=new r2(n,r,c,Z,he,Se,Ke,wt),r=1,j===!0&&(r|=24),j=ei(3,null,null,r),n.current=j,j.stateNode=n,r=Wd(),r.refCount++,n.pooledCache=r,r.refCount++,j.memoizedState={element:h,isDehydrated:c,cache:r},ze(j),n}function zy(n){return n?(n=On,n):On}function qy(n,r,c,h,g,j){g=zy(g),h.context===null?h.context=g:h.pendingContext=g,h=dt(r),h.payload={element:c},j=j===void 0?null:j,j!==null&&(h.callback=j),c=Ft(n,h,r),c!==null&&(br(c,n,r),jt(c,n,r))}function Ky(n,r){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var c=n.retryLane;n.retryLane=c!==0&&c<r?c:r}}function Om(n,r){Ky(n,r),(n=n.alternate)&&Ky(n,r)}function Gy(n){if(n.tag===13){var r=Zo(n,67108864);r!==null&&br(r,n,67108864),Om(n,67108864)}}var uh=!0;function o2(n,r,c,h){var g=z.T;z.T=null;var j=ee.p;try{ee.p=2,zm(n,r,c,h)}finally{ee.p=j,z.T=g}}function l2(n,r,c,h){var g=z.T;z.T=null;var j=ee.p;try{ee.p=8,zm(n,r,c,h)}finally{ee.p=j,z.T=g}}function zm(n,r,c,h){if(uh){var g=qm(h);if(g===null)Fm(n,r,h,hh,c),$y(n,h);else if(d2(g,n,r,c,h))h.stopPropagation();else if($y(n,h),r&4&&-1<c2.indexOf(n)){for(;g!==null;){var j=$e(g);if(j!==null)switch(j.tag){case 3:if(j=j.stateNode,j.current.memoizedState.isDehydrated){var Z=at(j.pendingLanes);if(Z!==0){var he=j;for(he.pendingLanes|=2,he.entangledLanes|=2;Z;){var Se=1<<31-Nt(Z);he.entanglements[1]|=Se,Z&=~Se}Io(j),(Es&6)===0&&(Yu=Mt()+500,yA(0))}}break;case 13:he=Zo(j,2),he!==null&&br(he,j,2),Xu(),Om(j,2)}if(j=qm(h),j===null&&Fm(n,r,h,hh,c),j===g)break;g=j}g!==null&&h.stopPropagation()}else Fm(n,r,h,null,c)}}function qm(n){return n=aa(n),Km(n)}var hh=null;function Km(n){if(hh=null,n=it(n),n!==null){var r=l(n);if(r===null)n=null;else{var c=r.tag;if(c===13){if(n=d(r),n!==null)return n;n=null}else if(c===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;n=null}else r!==n&&(n=null)}}return hh=n,null}function Vy(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ze()){case Je:return 2;case mt:return 8;case ve:case et:return 32;case Oe:return 268435456;default:return 32}default:return 32}}var Gm=!1,Vl=null,$l=null,Wl=null,CA=new Map,SA=new Map,Yl=[],c2="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function $y(n,r){switch(n){case"focusin":case"focusout":Vl=null;break;case"dragenter":case"dragleave":$l=null;break;case"mouseover":case"mouseout":Wl=null;break;case"pointerover":case"pointerout":CA.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":SA.delete(r.pointerId)}}function kA(n,r,c,h,g,j){return n===null||n.nativeEvent!==j?(n={blockedOn:r,domEventName:c,eventSystemFlags:h,nativeEvent:j,targetContainers:[g]},r!==null&&(r=$e(r),r!==null&&Gy(r)),n):(n.eventSystemFlags|=h,r=n.targetContainers,g!==null&&r.indexOf(g)===-1&&r.push(g),n)}function d2(n,r,c,h,g){switch(r){case"focusin":return Vl=kA(Vl,n,r,c,h,g),!0;case"dragenter":return $l=kA($l,n,r,c,h,g),!0;case"mouseover":return Wl=kA(Wl,n,r,c,h,g),!0;case"pointerover":var j=g.pointerId;return CA.set(j,kA(CA.get(j)||null,n,r,c,h,g)),!0;case"gotpointercapture":return j=g.pointerId,SA.set(j,kA(SA.get(j)||null,n,r,c,h,g)),!0}return!1}function Wy(n){var r=it(n.target);if(r!==null){var c=l(r);if(c!==null){if(r=c.tag,r===13){if(r=d(c),r!==null){n.blockedOn=r,Qt(n.priority,function(){if(c.tag===13){var h=vr();h=Ce(h);var g=Zo(c,h);g!==null&&br(g,c,h),Om(c,h)}});return}}else if(r===3&&c.stateNode.current.memoizedState.isDehydrated){n.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}n.blockedOn=null}function ph(n){if(n.blockedOn!==null)return!1;for(var r=n.targetContainers;0<r.length;){var c=qm(n.nativeEvent);if(c===null){c=n.nativeEvent;var h=new c.constructor(c.type,c);Kt=h,c.target.dispatchEvent(h),Kt=null}else return r=$e(c),r!==null&&Gy(r),n.blockedOn=c,!1;r.shift()}return!0}function Yy(n,r,c){ph(n)&&c.delete(r)}function A2(){Gm=!1,Vl!==null&&ph(Vl)&&(Vl=null),$l!==null&&ph($l)&&($l=null),Wl!==null&&ph(Wl)&&(Wl=null),CA.forEach(Yy),SA.forEach(Yy)}function mh(n,r){n.blockedOn===r&&(n.blockedOn=null,Gm||(Gm=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,A2)))}var fh=null;function Jy(n){fh!==n&&(fh=n,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){fh===n&&(fh=null);for(var r=0;r<n.length;r+=3){var c=n[r],h=n[r+1],g=n[r+2];if(typeof h!="function"){if(Km(h||c)===null)continue;break}var j=$e(c);j!==null&&(n.splice(r,3),r-=3,Or(j,{pending:!0,data:g,method:c.method,action:h},h,g))}}))}function FA(n){function r(Se){return mh(Se,n)}Vl!==null&&mh(Vl,n),$l!==null&&mh($l,n),Wl!==null&&mh(Wl,n),CA.forEach(r),SA.forEach(r);for(var c=0;c<Yl.length;c++){var h=Yl[c];h.blockedOn===n&&(h.blockedOn=null)}for(;0<Yl.length&&(c=Yl[0],c.blockedOn===null);)Wy(c),c.blockedOn===null&&Yl.shift();if(c=(n.ownerDocument||n).$$reactFormReplay,c!=null)for(h=0;h<c.length;h+=3){var g=c[h],j=c[h+1],Z=g[_a]||null;if(typeof j=="function")Z||Jy(c);else if(Z){var he=null;if(j&&j.hasAttribute("formAction")){if(g=j,Z=j[_a]||null)he=Z.formAction;else if(Km(g)!==null)continue}else he=Z.action;typeof he=="function"?c[h+1]=he:(c.splice(h,3),h-=3),Jy(c)}}}function Vm(n){this._internalRoot=n}gh.prototype.render=Vm.prototype.render=function(n){var r=this._internalRoot;if(r===null)throw Error(i(409));var c=r.current,h=vr();qy(c,h,n,r,null,null)},gh.prototype.unmount=Vm.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var r=n.containerInfo;qy(n.current,2,null,n,null,null),Xu(),r[Na]=null}};function gh(n){this._internalRoot=n}gh.prototype.unstable_scheduleHydration=function(n){if(n){var r=gt();n={blockedOn:null,target:n,priority:r};for(var c=0;c<Yl.length&&r!==0&&r<Yl[c].priority;c++);Yl.splice(c,0,n),c===0&&Wy(n)}};var Xy=a.version;if(Xy!=="19.1.1")throw Error(i(527,Xy,"19.1.1"));ee.findDOMNode=function(n){var r=n._reactInternals;if(r===void 0)throw typeof n.render=="function"?Error(i(188)):(n=Object.keys(n).join(","),Error(i(268,n)));return n=A(r),n=n!==null?p(n):null,n=n===null?null:n.stateNode,n};var u2={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:z,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var xh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!xh.isDisabled&&xh.supportsFiber)try{lt=xh.inject(u2),Ut=xh}catch{}}return UA.createRoot=function(n,r){if(!o(n))throw Error(i(299));var c=!1,h="",g=px,j=mx,Z=fx,he=null;return r!=null&&(r.unstable_strictMode===!0&&(c=!0),r.identifierPrefix!==void 0&&(h=r.identifierPrefix),r.onUncaughtError!==void 0&&(g=r.onUncaughtError),r.onCaughtError!==void 0&&(j=r.onCaughtError),r.onRecoverableError!==void 0&&(Z=r.onRecoverableError),r.unstable_transitionCallbacks!==void 0&&(he=r.unstable_transitionCallbacks)),r=Oy(n,1,!1,null,null,c,h,g,j,Z,he,null),n[Na]=r.current,km(n),new Vm(r)},UA.hydrateRoot=function(n,r,c){if(!o(n))throw Error(i(299));var h=!1,g="",j=px,Z=mx,he=fx,Se=null,Ke=null;return c!=null&&(c.unstable_strictMode===!0&&(h=!0),c.identifierPrefix!==void 0&&(g=c.identifierPrefix),c.onUncaughtError!==void 0&&(j=c.onUncaughtError),c.onCaughtError!==void 0&&(Z=c.onCaughtError),c.onRecoverableError!==void 0&&(he=c.onRecoverableError),c.unstable_transitionCallbacks!==void 0&&(Se=c.unstable_transitionCallbacks),c.formState!==void 0&&(Ke=c.formState)),r=Oy(n,1,!0,r,c??null,h,g,j,Z,he,Se,Ke),r.context=zy(null),c=r.current,h=vr(),h=Ce(h),g=dt(h),g.callback=null,Ft(c,g,h),c=h,r.current.lanes=c,Ba(r,c),Io(r),n[Na]=r.current,km(n),new gh(r)},UA.version="19.1.1",UA}var l0;function b2(){if(l0)return Ym.exports;l0=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(a){console.error(a)}}return t(),Ym.exports=v2(),Ym.exports}var j2=b2();const w2=Pb(j2);/**
 * react-router v7.8.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var c0="popstate";function _2(t={}){function a(i,o){let{pathname:l,search:d,hash:u}=i.location;return Gf("",{pathname:l,search:d,hash:u},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function s(i,o){return typeof o=="string"?o:nu(o)}return B2(a,s,null,t)}function un(t,a){if(t===!1||t===null||typeof t>"u")throw new Error(a)}function vo(t,a){if(!t){typeof console<"u"&&console.warn(a);try{throw new Error(a)}catch{}}}function N2(){return Math.random().toString(36).substring(2,10)}function d0(t,a){return{usr:t.state,key:t.key,idx:a}}function Gf(t,a,s=null,i){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof a=="string"?Md(a):a,state:s,key:a&&a.key||i||N2()}}function nu({pathname:t="/",search:a="",hash:s=""}){return a&&a!=="?"&&(t+=a.charAt(0)==="?"?a:"?"+a),s&&s!=="#"&&(t+=s.charAt(0)==="#"?s:"#"+s),t}function Md(t){let a={};if(t){let s=t.indexOf("#");s>=0&&(a.hash=t.substring(s),t=t.substring(0,s));let i=t.indexOf("?");i>=0&&(a.search=t.substring(i),t=t.substring(0,i)),t&&(a.pathname=t)}return a}function B2(t,a,s,i={}){let{window:o=document.defaultView,v5Compat:l=!1}=i,d=o.history,u="POP",A=null,p=m();p==null&&(p=0,d.replaceState({...d.state,idx:p},""));function m(){return(d.state||{idx:null}).idx}function b(){u="POP";let S=m(),_=S==null?null:S-p;p=S,A&&A({action:u,location:D.location,delta:_})}function v(S,_){u="PUSH";let N=Gf(D.location,S,_);p=m()+1;let O=d0(N,p),L=D.createHref(N);try{d.pushState(O,"",L)}catch(te){if(te instanceof DOMException&&te.name==="DataCloneError")throw te;o.location.assign(L)}l&&A&&A({action:u,location:D.location,delta:1})}function x(S,_){u="REPLACE";let N=Gf(D.location,S,_);p=m();let O=d0(N,p),L=D.createHref(N);d.replaceState(O,"",L),l&&A&&A({action:u,location:D.location,delta:0})}function C(S){return C2(S)}let D={get action(){return u},get location(){return t(o,d)},listen(S){if(A)throw new Error("A history only accepts one active listener");return o.addEventListener(c0,b),A=S,()=>{o.removeEventListener(c0,b),A=null}},createHref(S){return a(o,S)},createURL:C,encodeLocation(S){let _=C(S);return{pathname:_.pathname,search:_.search,hash:_.hash}},push:v,replace:x,go(S){return d.go(S)}};return D}function C2(t,a=!1){let s="http://localhost";typeof window<"u"&&(s=window.location.origin!=="null"?window.location.origin:window.location.href),un(s,"No window.location.(origin|href) available to create URL");let i=typeof t=="string"?t:nu(t);return i=i.replace(/ $/,"%20"),!a&&i.startsWith("//")&&(i=s+i),new URL(i,s)}function Mb(t,a,s="/"){return S2(t,a,s,!1)}function S2(t,a,s,i){let o=typeof a=="string"?Md(a):a,l=wl(o.pathname||"/",s);if(l==null)return null;let d=Ob(t);k2(d);let u=null;for(let A=0;u==null&&A<d.length;++A){let p=H2(l);u=I2(d[A],p,i)}return u}function Ob(t,a=[],s=[],i=""){let o=(l,d,u)=>{let A={relativePath:u===void 0?l.path||"":u,caseSensitive:l.caseSensitive===!0,childrenIndex:d,route:l};A.relativePath.startsWith("/")&&(un(A.relativePath.startsWith(i),`Absolute route path "${A.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),A.relativePath=A.relativePath.slice(i.length));let p=bl([i,A.relativePath]),m=s.concat(A);l.children&&l.children.length>0&&(un(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${p}".`),Ob(l.children,a,m,p)),!(l.path==null&&!l.index)&&a.push({path:p,score:R2(p,l.index),routesMeta:m})};return t.forEach((l,d)=>{if(l.path===""||!l.path?.includes("?"))o(l,d);else for(let u of zb(l.path))o(l,d,u)}),a}function zb(t){let a=t.split("/");if(a.length===0)return[];let[s,...i]=a,o=s.endsWith("?"),l=s.replace(/\?$/,"");if(i.length===0)return o?[l,""]:[l];let d=zb(i.join("/")),u=[];return u.push(...d.map(A=>A===""?l:[l,A].join("/"))),o&&u.push(...d),u.map(A=>t.startsWith("/")&&A===""?"/":A)}function k2(t){t.sort((a,s)=>a.score!==s.score?s.score-a.score:D2(a.routesMeta.map(i=>i.childrenIndex),s.routesMeta.map(i=>i.childrenIndex)))}var F2=/^:[\w-]+$/,E2=3,U2=2,L2=1,T2=10,Q2=-2,A0=t=>t==="*";function R2(t,a){let s=t.split("/"),i=s.length;return s.some(A0)&&(i+=Q2),a&&(i+=U2),s.filter(o=>!A0(o)).reduce((o,l)=>o+(F2.test(l)?E2:l===""?L2:T2),i)}function D2(t,a){return t.length===a.length&&t.slice(0,-1).every((i,o)=>i===a[o])?t[t.length-1]-a[a.length-1]:0}function I2(t,a,s=!1){let{routesMeta:i}=t,o={},l="/",d=[];for(let u=0;u<i.length;++u){let A=i[u],p=u===i.length-1,m=l==="/"?a:a.slice(l.length)||"/",b=rp({path:A.relativePath,caseSensitive:A.caseSensitive,end:p},m),v=A.route;if(!b&&p&&s&&!i[i.length-1].route.index&&(b=rp({path:A.relativePath,caseSensitive:A.caseSensitive,end:!1},m)),!b)return null;Object.assign(o,b.params),d.push({params:o,pathname:bl([l,b.pathname]),pathnameBase:q2(bl([l,b.pathnameBase])),route:v}),b.pathnameBase!=="/"&&(l=bl([l,b.pathnameBase]))}return d}function rp(t,a){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[s,i]=P2(t.path,t.caseSensitive,t.end),o=a.match(s);if(!o)return null;let l=o[0],d=l.replace(/(.)\/+$/,"$1"),u=o.slice(1);return{params:i.reduce((p,{paramName:m,isOptional:b},v)=>{if(m==="*"){let C=u[v]||"";d=l.slice(0,l.length-C.length).replace(/(.)\/+$/,"$1")}const x=u[v];return b&&!x?p[m]=void 0:p[m]=(x||"").replace(/%2F/g,"/"),p},{}),pathname:l,pathnameBase:d,pattern:t}}function P2(t,a=!1,s=!0){vo(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let i=[],o="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(d,u,A)=>(i.push({paramName:u,isOptional:A!=null}),A?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(i.push({paramName:"*"}),o+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):s?o+="\\/*$":t!==""&&t!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,a?void 0:"i"),i]}function H2(t){try{return t.split("/").map(a=>decodeURIComponent(a).replace(/\//g,"%2F")).join("/")}catch(a){return vo(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${a}).`),t}}function wl(t,a){if(a==="/")return t;if(!t.toLowerCase().startsWith(a.toLowerCase()))return null;let s=a.endsWith("/")?a.length-1:a.length,i=t.charAt(s);return i&&i!=="/"?null:t.slice(s)||"/"}function M2(t,a="/"){let{pathname:s,search:i="",hash:o=""}=typeof t=="string"?Md(t):t;return{pathname:s?s.startsWith("/")?s:O2(s,a):a,search:K2(i),hash:G2(o)}}function O2(t,a){let s=a.replace(/\/+$/,"").split("/");return t.split("/").forEach(o=>{o===".."?s.length>1&&s.pop():o!=="."&&s.push(o)}),s.length>1?s.join("/"):"/"}function ef(t,a,s,i){return`Cannot include a '${t}' character in a manually specified \`to.${a}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${s}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function z2(t){return t.filter((a,s)=>s===0||a.route.path&&a.route.path.length>0)}function Tg(t){let a=z2(t);return a.map((s,i)=>i===a.length-1?s.pathname:s.pathnameBase)}function Qg(t,a,s,i=!1){let o;typeof t=="string"?o=Md(t):(o={...t},un(!o.pathname||!o.pathname.includes("?"),ef("?","pathname","search",o)),un(!o.pathname||!o.pathname.includes("#"),ef("#","pathname","hash",o)),un(!o.search||!o.search.includes("#"),ef("#","search","hash",o)));let l=t===""||o.pathname==="",d=l?"/":o.pathname,u;if(d==null)u=s;else{let b=a.length-1;if(!i&&d.startsWith("..")){let v=d.split("/");for(;v[0]==="..";)v.shift(),b-=1;o.pathname=v.join("/")}u=b>=0?a[b]:"/"}let A=M2(o,u),p=d&&d!=="/"&&d.endsWith("/"),m=(l||d===".")&&s.endsWith("/");return!A.pathname.endsWith("/")&&(p||m)&&(A.pathname+="/"),A}var bl=t=>t.join("/").replace(/\/\/+/g,"/"),q2=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),K2=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,G2=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function V2(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var qb=["POST","PUT","PATCH","DELETE"];new Set(qb);var $2=["GET",...qb];new Set($2);var Od=w.createContext(null);Od.displayName="DataRouter";var _p=w.createContext(null);_p.displayName="DataRouterState";w.createContext(!1);var Kb=w.createContext({isTransitioning:!1});Kb.displayName="ViewTransition";var W2=w.createContext(new Map);W2.displayName="Fetchers";var Y2=w.createContext(null);Y2.displayName="Await";var jo=w.createContext(null);jo.displayName="Navigation";var pu=w.createContext(null);pu.displayName="Location";var qo=w.createContext({outlet:null,matches:[],isDataRoute:!1});qo.displayName="Route";var Rg=w.createContext(null);Rg.displayName="RouteError";function J2(t,{relative:a}={}){un(zd(),"useHref() may be used only in the context of a <Router> component.");let{basename:s,navigator:i}=w.useContext(jo),{hash:o,pathname:l,search:d}=mu(t,{relative:a}),u=l;return s!=="/"&&(u=l==="/"?s:bl([s,l])),i.createHref({pathname:u,search:d,hash:o})}function zd(){return w.useContext(pu)!=null}function Ko(){return un(zd(),"useLocation() may be used only in the context of a <Router> component."),w.useContext(pu).location}var Gb="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Vb(t){w.useContext(jo).static||w.useLayoutEffect(t)}function $i(){let{isDataRoute:t}=w.useContext(qo);return t?d_():X2()}function X2(){un(zd(),"useNavigate() may be used only in the context of a <Router> component.");let t=w.useContext(Od),{basename:a,navigator:s}=w.useContext(jo),{matches:i}=w.useContext(qo),{pathname:o}=Ko(),l=JSON.stringify(Tg(i)),d=w.useRef(!1);return Vb(()=>{d.current=!0}),w.useCallback((A,p={})=>{if(vo(d.current,Gb),!d.current)return;if(typeof A=="number"){s.go(A);return}let m=Qg(A,JSON.parse(l),o,p.relative==="path");t==null&&a!=="/"&&(m.pathname=m.pathname==="/"?a:bl([a,m.pathname])),(p.replace?s.replace:s.push)(m,p.state,p)},[a,s,l,o,t])}w.createContext(null);function mu(t,{relative:a}={}){let{matches:s}=w.useContext(qo),{pathname:i}=Ko(),o=JSON.stringify(Tg(s));return w.useMemo(()=>Qg(t,JSON.parse(o),i,a==="path"),[t,o,i,a])}function Z2(t,a){return $b(t,a)}function $b(t,a,s,i){un(zd(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=w.useContext(jo),{matches:l}=w.useContext(qo),d=l[l.length-1],u=d?d.params:{},A=d?d.pathname:"/",p=d?d.pathnameBase:"/",m=d&&d.route;{let _=m&&m.path||"";Wb(A,!m||_.endsWith("*")||_.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${A}" (under <Route path="${_}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${_}"> to <Route path="${_==="/"?"*":`${_}/*`}">.`)}let b=Ko(),v;if(a){let _=typeof a=="string"?Md(a):a;un(p==="/"||_.pathname?.startsWith(p),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${p}" but pathname "${_.pathname}" was given in the \`location\` prop.`),v=_}else v=b;let x=v.pathname||"/",C=x;if(p!=="/"){let _=p.replace(/^\//,"").split("/");C="/"+x.replace(/^\//,"").split("/").slice(_.length).join("/")}let D=Mb(t,{pathname:C});vo(m||D!=null,`No routes matched location "${v.pathname}${v.search}${v.hash}" `),vo(D==null||D[D.length-1].route.element!==void 0||D[D.length-1].route.Component!==void 0||D[D.length-1].route.lazy!==void 0,`Matched leaf route at location "${v.pathname}${v.search}${v.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let S=n_(D&&D.map(_=>Object.assign({},_,{params:Object.assign({},u,_.params),pathname:bl([p,o.encodeLocation?o.encodeLocation(_.pathname).pathname:_.pathname]),pathnameBase:_.pathnameBase==="/"?p:bl([p,o.encodeLocation?o.encodeLocation(_.pathnameBase).pathname:_.pathnameBase])})),l,s,i);return a&&S?w.createElement(pu.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...v},navigationType:"POP"}},S):S}function e_(){let t=c_(),a=V2(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),s=t instanceof Error?t.stack:null,i="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:i},l={padding:"2px 4px",backgroundColor:i},d=null;return console.error("Error handled by React Router default ErrorBoundary:",t),d=w.createElement(w.Fragment,null,w.createElement("p",null," Hey developer "),w.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",w.createElement("code",{style:l},"ErrorBoundary")," or"," ",w.createElement("code",{style:l},"errorElement")," prop on your route.")),w.createElement(w.Fragment,null,w.createElement("h2",null,"Unexpected Application Error!"),w.createElement("h3",{style:{fontStyle:"italic"}},a),s?w.createElement("pre",{style:o},s):null,d)}var t_=w.createElement(e_,null),a_=class extends w.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,a){return a.location!==t.location||a.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:a.error,location:a.location,revalidation:t.revalidation||a.revalidation}}componentDidCatch(t,a){console.error("React Router caught the following error during render",t,a)}render(){return this.state.error!==void 0?w.createElement(qo.Provider,{value:this.props.routeContext},w.createElement(Rg.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function s_({routeContext:t,match:a,children:s}){let i=w.useContext(Od);return i&&i.static&&i.staticContext&&(a.route.errorElement||a.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=a.route.id),w.createElement(qo.Provider,{value:t},s)}function n_(t,a=[],s=null,i=null){if(t==null){if(!s)return null;if(s.errors)t=s.matches;else if(a.length===0&&!s.initialized&&s.matches.length>0)t=s.matches;else return null}let o=t,l=s?.errors;if(l!=null){let A=o.findIndex(p=>p.route.id&&l?.[p.route.id]!==void 0);un(A>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),o=o.slice(0,Math.min(o.length,A+1))}let d=!1,u=-1;if(s)for(let A=0;A<o.length;A++){let p=o[A];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(u=A),p.route.id){let{loaderData:m,errors:b}=s,v=p.route.loader&&!m.hasOwnProperty(p.route.id)&&(!b||b[p.route.id]===void 0);if(p.route.lazy||v){d=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((A,p,m)=>{let b,v=!1,x=null,C=null;s&&(b=l&&p.route.id?l[p.route.id]:void 0,x=p.route.errorElement||t_,d&&(u<0&&m===0?(Wb("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),v=!0,C=null):u===m&&(v=!0,C=p.route.hydrateFallbackElement||null)));let D=a.concat(o.slice(0,m+1)),S=()=>{let _;return b?_=x:v?_=C:p.route.Component?_=w.createElement(p.route.Component,null):p.route.element?_=p.route.element:_=A,w.createElement(s_,{match:p,routeContext:{outlet:A,matches:D,isDataRoute:s!=null},children:_})};return s&&(p.route.ErrorBoundary||p.route.errorElement||m===0)?w.createElement(a_,{location:s.location,revalidation:s.revalidation,component:x,error:b,children:S(),routeContext:{outlet:null,matches:D,isDataRoute:!0}}):S()},null)}function Dg(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function i_(t){let a=w.useContext(Od);return un(a,Dg(t)),a}function r_(t){let a=w.useContext(_p);return un(a,Dg(t)),a}function o_(t){let a=w.useContext(qo);return un(a,Dg(t)),a}function Ig(t){let a=o_(t),s=a.matches[a.matches.length-1];return un(s.route.id,`${t} can only be used on routes that contain a unique "id"`),s.route.id}function l_(){return Ig("useRouteId")}function c_(){let t=w.useContext(Rg),a=r_("useRouteError"),s=Ig("useRouteError");return t!==void 0?t:a.errors?.[s]}function d_(){let{router:t}=i_("useNavigate"),a=Ig("useNavigate"),s=w.useRef(!1);return Vb(()=>{s.current=!0}),w.useCallback(async(o,l={})=>{vo(s.current,Gb),s.current&&(typeof o=="number"?t.navigate(o):await t.navigate(o,{fromRouteId:a,...l}))},[t,a])}var u0={};function Wb(t,a,s){!a&&!u0[t]&&(u0[t]=!0,vo(!1,s))}w.memo(A_);function A_({routes:t,future:a,state:s}){return $b(t,void 0,s,a)}function Np({to:t,replace:a,state:s,relative:i}){un(zd(),"<Navigate> may be used only in the context of a <Router> component.");let{static:o}=w.useContext(jo);vo(!o,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:l}=w.useContext(qo),{pathname:d}=Ko(),u=$i(),A=Qg(t,Tg(l),d,i==="path"),p=JSON.stringify(A);return w.useEffect(()=>{u(JSON.parse(p),{replace:a,state:s,relative:i})},[u,p,i,a,s]),null}function ii(t){un(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function u_({basename:t="/",children:a=null,location:s,navigationType:i="POP",navigator:o,static:l=!1}){un(!zd(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let d=t.replace(/^\/*/,"/"),u=w.useMemo(()=>({basename:d,navigator:o,static:l,future:{}}),[d,o,l]);typeof s=="string"&&(s=Md(s));let{pathname:A="/",search:p="",hash:m="",state:b=null,key:v="default"}=s,x=w.useMemo(()=>{let C=wl(A,d);return C==null?null:{location:{pathname:C,search:p,hash:m,state:b,key:v},navigationType:i}},[d,A,p,m,b,v,i]);return vo(x!=null,`<Router basename="${d}"> is not able to match the URL "${A}${p}${m}" because it does not start with the basename, so the <Router> won't render anything.`),x==null?null:w.createElement(jo.Provider,{value:u},w.createElement(pu.Provider,{children:a,value:x}))}function h_({children:t,location:a}){return Z2(Vf(t),a)}function Vf(t,a=[]){let s=[];return w.Children.forEach(t,(i,o)=>{if(!w.isValidElement(i))return;let l=[...a,o];if(i.type===w.Fragment){s.push.apply(s,Vf(i.props.children,l));return}un(i.type===ii,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),un(!i.props.index||!i.props.children,"An index route cannot have child routes.");let d={id:i.props.id||l.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(d.children=Vf(i.props.children,l)),s.push(d)}),s}var Xh="get",Zh="application/x-www-form-urlencoded";function Bp(t){return t!=null&&typeof t.tagName=="string"}function p_(t){return Bp(t)&&t.tagName.toLowerCase()==="button"}function m_(t){return Bp(t)&&t.tagName.toLowerCase()==="form"}function f_(t){return Bp(t)&&t.tagName.toLowerCase()==="input"}function g_(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function x_(t,a){return t.button===0&&(!a||a==="_self")&&!g_(t)}var yh=null;function y_(){if(yh===null)try{new FormData(document.createElement("form"),0),yh=!1}catch{yh=!0}return yh}var v_=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function tf(t){return t!=null&&!v_.has(t)?(vo(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Zh}"`),null):t}function b_(t,a){let s,i,o,l,d;if(m_(t)){let u=t.getAttribute("action");i=u?wl(u,a):null,s=t.getAttribute("method")||Xh,o=tf(t.getAttribute("enctype"))||Zh,l=new FormData(t)}else if(p_(t)||f_(t)&&(t.type==="submit"||t.type==="image")){let u=t.form;if(u==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let A=t.getAttribute("formaction")||u.getAttribute("action");if(i=A?wl(A,a):null,s=t.getAttribute("formmethod")||u.getAttribute("method")||Xh,o=tf(t.getAttribute("formenctype"))||tf(u.getAttribute("enctype"))||Zh,l=new FormData(u,t),!y_()){let{name:p,type:m,value:b}=t;if(m==="image"){let v=p?`${p}.`:"";l.append(`${v}x`,"0"),l.append(`${v}y`,"0")}else p&&l.append(p,b)}}else{if(Bp(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');s=Xh,i=null,o=Zh,d=t}return l&&o==="text/plain"&&(d=l,l=void 0),{action:i,method:s.toLowerCase(),encType:o,formData:l,body:d}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Pg(t,a){if(t===!1||t===null||typeof t>"u")throw new Error(a)}function j_(t,a,s){let i=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return i.pathname==="/"?i.pathname=`_root.${s}`:a&&wl(i.pathname,a)==="/"?i.pathname=`${a.replace(/\/$/,"")}/_root.${s}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${s}`,i}async function w_(t,a){if(t.id in a)return a[t.id];try{let s=await import(t.module);return a[t.id]=s,s}catch(s){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(s),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function __(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function N_(t,a,s){let i=await Promise.all(t.map(async o=>{let l=a.routes[o.route.id];if(l){let d=await w_(l,s);return d.links?d.links():[]}return[]}));return k_(i.flat(1).filter(__).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function h0(t,a,s,i,o,l){let d=(A,p)=>s[p]?A.route.id!==s[p].route.id:!0,u=(A,p)=>s[p].pathname!==A.pathname||s[p].route.path?.endsWith("*")&&s[p].params["*"]!==A.params["*"];return l==="assets"?a.filter((A,p)=>d(A,p)||u(A,p)):l==="data"?a.filter((A,p)=>{let m=i.routes[A.route.id];if(!m||!m.hasLoader)return!1;if(d(A,p)||u(A,p))return!0;if(A.route.shouldRevalidate){let b=A.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:s[0]?.params||{},nextUrl:new URL(t,window.origin),nextParams:A.params,defaultShouldRevalidate:!0});if(typeof b=="boolean")return b}return!0}):[]}function B_(t,a,{includeHydrateFallback:s}={}){return C_(t.map(i=>{let o=a.routes[i.route.id];if(!o)return[];let l=[o.module];return o.clientActionModule&&(l=l.concat(o.clientActionModule)),o.clientLoaderModule&&(l=l.concat(o.clientLoaderModule)),s&&o.hydrateFallbackModule&&(l=l.concat(o.hydrateFallbackModule)),o.imports&&(l=l.concat(o.imports)),l}).flat(1))}function C_(t){return[...new Set(t)]}function S_(t){let a={},s=Object.keys(t).sort();for(let i of s)a[i]=t[i];return a}function k_(t,a){let s=new Set;return new Set(a),t.reduce((i,o)=>{let l=JSON.stringify(S_(o));return s.has(l)||(s.add(l),i.push({key:l,link:o})),i},[])}function Yb(){let t=w.useContext(Od);return Pg(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function F_(){let t=w.useContext(_p);return Pg(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var Hg=w.createContext(void 0);Hg.displayName="FrameworkContext";function Jb(){let t=w.useContext(Hg);return Pg(t,"You must render this element inside a <HydratedRouter> element"),t}function E_(t,a){let s=w.useContext(Hg),[i,o]=w.useState(!1),[l,d]=w.useState(!1),{onFocus:u,onBlur:A,onMouseEnter:p,onMouseLeave:m,onTouchStart:b}=a,v=w.useRef(null);w.useEffect(()=>{if(t==="render"&&d(!0),t==="viewport"){let D=_=>{_.forEach(N=>{d(N.isIntersecting)})},S=new IntersectionObserver(D,{threshold:.5});return v.current&&S.observe(v.current),()=>{S.disconnect()}}},[t]),w.useEffect(()=>{if(i){let D=setTimeout(()=>{d(!0)},100);return()=>{clearTimeout(D)}}},[i]);let x=()=>{o(!0)},C=()=>{o(!1),d(!1)};return s?t!=="intent"?[l,v,{}]:[l,v,{onFocus:LA(u,x),onBlur:LA(A,C),onMouseEnter:LA(p,x),onMouseLeave:LA(m,C),onTouchStart:LA(b,x)}]:[!1,v,{}]}function LA(t,a){return s=>{t&&t(s),s.defaultPrevented||a(s)}}function U_({page:t,...a}){let{router:s}=Yb(),i=w.useMemo(()=>Mb(s.routes,t,s.basename),[s.routes,t,s.basename]);return i?w.createElement(T_,{page:t,matches:i,...a}):null}function L_(t){let{manifest:a,routeModules:s}=Jb(),[i,o]=w.useState([]);return w.useEffect(()=>{let l=!1;return N_(t,a,s).then(d=>{l||o(d)}),()=>{l=!0}},[t,a,s]),i}function T_({page:t,matches:a,...s}){let i=Ko(),{manifest:o,routeModules:l}=Jb(),{basename:d}=Yb(),{loaderData:u,matches:A}=F_(),p=w.useMemo(()=>h0(t,a,A,o,i,"data"),[t,a,A,o,i]),m=w.useMemo(()=>h0(t,a,A,o,i,"assets"),[t,a,A,o,i]),b=w.useMemo(()=>{if(t===i.pathname+i.search+i.hash)return[];let C=new Set,D=!1;if(a.forEach(_=>{let N=o.routes[_.route.id];!N||!N.hasLoader||(!p.some(O=>O.route.id===_.route.id)&&_.route.id in u&&l[_.route.id]?.shouldRevalidate||N.hasClientLoader?D=!0:C.add(_.route.id))}),C.size===0)return[];let S=j_(t,d,"data");return D&&C.size>0&&S.searchParams.set("_routes",a.filter(_=>C.has(_.route.id)).map(_=>_.route.id).join(",")),[S.pathname+S.search]},[d,u,i,o,p,a,t,l]),v=w.useMemo(()=>B_(m,o),[m,o]),x=L_(m);return w.createElement(w.Fragment,null,b.map(C=>w.createElement("link",{key:C,rel:"prefetch",as:"fetch",href:C,...s})),v.map(C=>w.createElement("link",{key:C,rel:"modulepreload",href:C,...s})),x.map(({key:C,link:D})=>w.createElement("link",{key:C,nonce:s.nonce,...D})))}function Q_(...t){return a=>{t.forEach(s=>{typeof s=="function"?s(a):s!=null&&(s.current=a)})}}var Xb=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Xb&&(window.__reactRouterVersion="7.8.0")}catch{}function R_({basename:t,children:a,window:s}){let i=w.useRef();i.current==null&&(i.current=_2({window:s,v5Compat:!0}));let o=i.current,[l,d]=w.useState({action:o.action,location:o.location}),u=w.useCallback(A=>{w.startTransition(()=>d(A))},[d]);return w.useLayoutEffect(()=>o.listen(u),[o,u]),w.createElement(u_,{basename:t,children:a,location:l.location,navigationType:l.action,navigator:o})}var Zb=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,e1=w.forwardRef(function({onClick:a,discover:s="render",prefetch:i="none",relative:o,reloadDocument:l,replace:d,state:u,target:A,to:p,preventScrollReset:m,viewTransition:b,...v},x){let{basename:C}=w.useContext(jo),D=typeof p=="string"&&Zb.test(p),S,_=!1;if(typeof p=="string"&&D&&(S=p,Xb))try{let E=new URL(window.location.href),Y=p.startsWith("//")?new URL(E.protocol+p):new URL(p),T=wl(Y.pathname,C);Y.origin===E.origin&&T!=null?p=T+Y.search+Y.hash:_=!0}catch{vo(!1,`<Link to="${p}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let N=J2(p,{relative:o}),[O,L,te]=E_(i,v),G=H_(p,{replace:d,state:u,target:A,preventScrollReset:m,relative:o,viewTransition:b});function X(E){a&&a(E),E.defaultPrevented||G(E)}let U=w.createElement("a",{...v,...te,href:S||N,onClick:_||l?a:X,ref:Q_(x,L),target:A,"data-discover":!D&&s==="render"?"true":void 0});return O&&!D?w.createElement(w.Fragment,null,U,w.createElement(U_,{page:N})):U});e1.displayName="Link";var D_=w.forwardRef(function({"aria-current":a="page",caseSensitive:s=!1,className:i="",end:o=!1,style:l,to:d,viewTransition:u,children:A,...p},m){let b=mu(d,{relative:p.relative}),v=Ko(),x=w.useContext(_p),{navigator:C,basename:D}=w.useContext(jo),S=x!=null&&K_(b)&&u===!0,_=C.encodeLocation?C.encodeLocation(b).pathname:b.pathname,N=v.pathname,O=x&&x.navigation&&x.navigation.location?x.navigation.location.pathname:null;s||(N=N.toLowerCase(),O=O?O.toLowerCase():null,_=_.toLowerCase()),O&&D&&(O=wl(O,D)||O);const L=_!=="/"&&_.endsWith("/")?_.length-1:_.length;let te=N===_||!o&&N.startsWith(_)&&N.charAt(L)==="/",G=O!=null&&(O===_||!o&&O.startsWith(_)&&O.charAt(_.length)==="/"),X={isActive:te,isPending:G,isTransitioning:S},U=te?a:void 0,E;typeof i=="function"?E=i(X):E=[i,te?"active":null,G?"pending":null,S?"transitioning":null].filter(Boolean).join(" ");let Y=typeof l=="function"?l(X):l;return w.createElement(e1,{...p,"aria-current":U,className:E,ref:m,style:Y,to:d,viewTransition:u},typeof A=="function"?A(X):A)});D_.displayName="NavLink";var I_=w.forwardRef(({discover:t="render",fetcherKey:a,navigate:s,reloadDocument:i,replace:o,state:l,method:d=Xh,action:u,onSubmit:A,relative:p,preventScrollReset:m,viewTransition:b,...v},x)=>{let C=z_(),D=q_(u,{relative:p}),S=d.toLowerCase()==="get"?"get":"post",_=typeof u=="string"&&Zb.test(u),N=O=>{if(A&&A(O),O.defaultPrevented)return;O.preventDefault();let L=O.nativeEvent.submitter,te=L?.getAttribute("formmethod")||d;C(L||O.currentTarget,{fetcherKey:a,method:te,navigate:s,replace:o,state:l,relative:p,preventScrollReset:m,viewTransition:b})};return w.createElement("form",{ref:x,method:S,action:D,onSubmit:i?A:N,...v,"data-discover":!_&&t==="render"?"true":void 0})});I_.displayName="Form";function P_(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function t1(t){let a=w.useContext(Od);return un(a,P_(t)),a}function H_(t,{target:a,replace:s,state:i,preventScrollReset:o,relative:l,viewTransition:d}={}){let u=$i(),A=Ko(),p=mu(t,{relative:l});return w.useCallback(m=>{if(x_(m,a)){m.preventDefault();let b=s!==void 0?s:nu(A)===nu(p);u(t,{replace:b,state:i,preventScrollReset:o,relative:l,viewTransition:d})}},[A,u,p,s,i,a,t,o,l,d])}var M_=0,O_=()=>`__${String(++M_)}__`;function z_(){let{router:t}=t1("useSubmit"),{basename:a}=w.useContext(jo),s=l_();return w.useCallback(async(i,o={})=>{let{action:l,method:d,encType:u,formData:A,body:p}=b_(i,a);if(o.navigate===!1){let m=o.fetcherKey||O_();await t.fetch(m,s,o.action||l,{preventScrollReset:o.preventScrollReset,formData:A,body:p,formMethod:o.method||d,formEncType:o.encType||u,flushSync:o.flushSync})}else await t.navigate(o.action||l,{preventScrollReset:o.preventScrollReset,formData:A,body:p,formMethod:o.method||d,formEncType:o.encType||u,replace:o.replace,state:o.state,fromRouteId:s,flushSync:o.flushSync,viewTransition:o.viewTransition})},[t,a,s])}function q_(t,{relative:a}={}){let{basename:s}=w.useContext(jo),i=w.useContext(qo);un(i,"useFormAction must be used inside a RouteContext");let[o]=i.matches.slice(-1),l={...mu(t||".",{relative:a})},d=Ko();if(t==null){l.search=d.search;let u=new URLSearchParams(l.search),A=u.getAll("index");if(A.some(m=>m==="")){u.delete("index"),A.filter(b=>b).forEach(b=>u.append("index",b));let m=u.toString();l.search=m?`?${m}`:""}}return(!t||t===".")&&o.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),s!=="/"&&(l.pathname=l.pathname==="/"?s:bl([s,l.pathname])),nu(l)}function K_(t,{relative:a}={}){let s=w.useContext(Kb);un(s!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=t1("useViewTransitionState"),o=mu(t,{relative:a});if(!s.isTransitioning)return!1;let l=wl(s.currentLocation.pathname,i)||s.currentLocation.pathname,d=wl(s.nextLocation.pathname,i)||s.nextLocation.pathname;return rp(o.pathname,d)!=null||rp(o.pathname,l)!=null}Hb();/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G_=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),V_=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(a,s,i)=>i?i.toUpperCase():s.toLowerCase()),p0=t=>{const a=V_(t);return a.charAt(0).toUpperCase()+a.slice(1)},a1=(...t)=>t.filter((a,s,i)=>!!a&&a.trim()!==""&&i.indexOf(a)===s).join(" ").trim(),$_=t=>{for(const a in t)if(a.startsWith("aria-")||a==="role"||a==="title")return!0};/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var W_={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y_=w.forwardRef(({color:t="currentColor",size:a=24,strokeWidth:s=2,absoluteStrokeWidth:i,className:o="",children:l,iconNode:d,...u},A)=>w.createElement("svg",{ref:A,...W_,width:a,height:a,stroke:t,strokeWidth:i?Number(s)*24/Number(a):s,className:a1("lucide",o),...!l&&!$_(u)&&{"aria-hidden":"true"},...u},[...d.map(([p,m])=>w.createElement(p,m)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mg=(t,a)=>{const s=w.forwardRef(({className:i,...o},l)=>w.createElement(Y_,{ref:l,iconNode:a,className:a1(`lucide-${G_(p0(t))}`,`lucide-${t}`,i),...o}));return s.displayName=p0(t),s};/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J_=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],X_=Mg("arrow-left",J_);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z_=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],$f=Mg("eye-off",Z_);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eN=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Wf=Mg("eye",eN),tN="1024134456606-et46lrm2ce8tl567a4m4s4e0u3v5t4sa.apps.googleusercontent.com",aN=()=>{const[t,a]=w.useState({firstName:"",lastName:"",email:"",password:"",confirmPassword:"",role:""}),[s,i]=w.useState(""),[o,l]=w.useState(null),[d,u]=w.useState(!1),[A,p]=w.useState(!1),[m,b]=w.useState(""),[v,x]=w.useState({license:null,portfolio:null,architectLicense:null}),[C,D]=w.useState(!1),[S,_]=w.useState(!1),[N,O]=w.useState(null),[L,te]=w.useState(""),[G,X]=w.useState(""),[U,E]=w.useState(!1),[Y,T]=w.useState({license:null,portfolio:null,architectLicense:null}),Q=w.useRef(null),q=$i();function ne(V){if(!V)return{};const K=V.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),Ne=decodeURIComponent(atob(K).split("").map(function(Ee){return"%"+("00"+Ee.charCodeAt(0).toString(16)).slice(-2)}).join(""));return JSON.parse(Ne)}w.useEffect(()=>{let V=!1,oe=0;const K=30,Ne=()=>{if(window.google&&Q.current&&!V)try{const Ee=document.getElementById("google-btn-fallback");return Ee&&(Ee.style.display="none"),window.google.accounts.id.initialize({client_id:tN,callback:R}),window.google.accounts.id.renderButton(Q.current,{theme:"outline",size:"large",text:"signup_with",shape:"rectangular",logo_alignment:"left"}),console.log("Google button rendered successfully in Register"),!0}catch(Ee){return console.error("Error rendering Google button in Register:",Ee),!1}else window.google?Q.current||console.log("Google button container not found in Register"):console.log("Google API not loaded yet in Register, attempt:",oe);return!1};if(!Ne()){const Ee=setInterval(()=>{if(oe+=1,Ne()||oe>=K){if(oe>=K){console.log("Max attempts reached, Google button not rendered in Register");const st=document.getElementById("google-btn-fallback");st&&(st.textContent="Unable to load Google Sign-Up. Please refresh the page.")}clearInterval(Ee)}},150)}return()=>{if(V=!0,window.google?.accounts?.id)try{window.google.accounts.id.cancel()}catch{}}},[]);const R=V=>{if(!V.credential){X("Google sign-in failed. Please try again.");return}const oe=ne(V.credential);console.log("GOOGLE PROFILE DATA:",oe);let K="",Ne="";oe.given_name?K=oe.given_name:oe.name&&(K=oe.name.split(" ")[0]||""),oe.family_name?Ne=oe.family_name:oe.name&&(Ne=oe.name.split(" ").slice(1).join(" ")||""),!K&&oe.email&&(K=oe.email.split("@")[0]),console.log("EXTRACTED NAMES:",{firstName:K,lastName:Ne,originalName:oe.name}),O({firstName:K,lastName:Ne,email:oe.email||"",picture:oe.picture||""})},z=async V=>{if(V.preventDefault(),X(""),E(!0),!N){X("Google user info missing. Please sign in again."),E(!1);return}if(!N.firstName||!N.firstName.trim()){X("First name is missing from Google profile. Please try signing in again."),E(!1);return}if(!N.lastName||!N.lastName.trim()){X("Last name is missing from Google profile. Please try signing in again."),E(!1);return}if(!N.email||!N.email.trim()){X("Email is missing from Google profile. Please try signing in again."),E(!1);return}if(!L){X("Please select your role."),E(!1);return}if(L==="contractor"&&!Y.license){X("Contractor license document is required."),E(!1);return}if(L==="architect"&&(!Y.architectLicense||!Y.portfolio)){X("Both architect license and portfolio documents are required."),E(!1);return}console.log("GOOGLE SIGNUP PAYLOAD:",{firstName:N.firstName,lastName:N.lastName,email:N.email,role:L,license:Y.license,portfolio:Y.portfolio});try{const oe=new FormData;oe.append("firstName",N.firstName),oe.append("lastName",N.lastName),oe.append("email",N.email),oe.append("role",L);const K=Math.random().toString(36).slice(-12)+"!A1";oe.append("password",K),L==="contractor"&&Y.license&&oe.append("license",Y.license),L==="architect"&&(Y.architectLicense&&oe.append("architectLicense",Y.architectLicense),Y.portfolio&&oe.append("portfolio",Y.portfolio));const Ee=await(await fetch("/buildhub/backend/api/google_register.php",{method:"POST",body:oe})).text();let st;try{st=JSON.parse(Ee)}catch{X("Server returned invalid response."),E(!1);return}st.success?(X(""),O(null),te(""),T({license:null,portfolio:null,architectLicense:null}),setTimeout(()=>{st.redirect==="homeowner-dashboard"||L==="homeowner"?q("/homeowner-dashboard"):q("/login")},1e3)):X(st.message||"Google registration failed.")}catch{X("Network or server error. Please try again.")}finally{E(!1)}},ee=V=>{const{name:oe,files:K}=V.target;T(Ne=>({...Ne,[oe]:K[0]||null}))},le=V=>{const{name:oe,value:K}=V.target;let Ne=K;oe==="firstName"||oe==="lastName"?Ne=K.replace(/\s+/g," ").replace(/^\s+/,""):oe==="email"?Ne=K.replace(/\s+/g,""):(oe==="password"||oe==="confirmPassword")&&(Ne=K.replace(/\s+/g,"")),a(Ee=>({...Ee,[oe]:Ne})),oe==="email"&&l(null),oe==="password"&&H(k(Ne)),i(""),b("")},Be=V=>{const{name:oe,files:K}=V.target;x(Ne=>({...Ne,[oe]:K[0]||null})),i(""),b("")},$=V=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(V),ue=V=>V.length<8?"Password must be at least 8 characters long.":/\s/.test(V)?"Password cannot contain spaces.":/[A-Za-z]/.test(V)?/[0-9]/.test(V)?/[!@#$%^&*()_+\-=[\]{};':"\\|,.<>/?`~]/.test(V)?"":"Password must include at least one special character.":"Password must include at least one number.":"Password must include at least one letter.",k=V=>{let oe=0;return V.length>=8&&oe++,/[A-Z]/.test(V)&&/[a-z]/.test(V)&&oe++,/[0-9]/.test(V)&&oe++,/[!@#$%^&*()_+\-=[\]{};':"\\|,.<>/?`~]/.test(V)&&oe++,oe},[I,H]=w.useState(0);w.useEffect(()=>{const V=t.email;if(!V||!$(V)){u(!1),l(null);return}u(!0);const oe=new AbortController,K=setTimeout(async()=>{try{const Ee=await(await fetch(`/buildhub/backend/api/check_email.php?email=${encodeURIComponent(V)}`,{signal:oe.signal})).json().catch(()=>({}));if(t.email!==V)return;Ee&&Ee.success===!0?l(!!Ee.exists):l(null)}catch(Ne){Ne&&Ne.name!=="AbortError"&&l(null)}finally{t.email===V&&u(!1)}},400);return()=>{clearTimeout(K),oe.abort()}},[t.email]);const re=async V=>{if(V.preventDefault(),i(""),b(""),!t.firstName.trim())return i("First Name is required.");if(!t.lastName.trim())return i("Last Name is required.");if(!t.email)return i("Email is required.");if(!$(t.email))return i("Enter a valid email address.");if(o===!0)return i("This email is already registered.");const oe=ue(t.password);if(oe)return i(oe);if(t.password!==t.confirmPassword)return i("Passwords do not match!");if(!t.role)return i("Please select your role.");if(t.role==="contractor"&&!v.license)return i("Contractor license document is required.");if(t.role==="architect"&&(!v.architectLicense||!v.portfolio))return i("Both architect license and portfolio documents are required.");p(!0);const K=new FormData;K.append("firstName",t.firstName),K.append("lastName",t.lastName),K.append("email",t.email),K.append("password",t.password),K.append("role",t.role),t.role==="contractor"&&v.license&&K.append("license",v.license),t.role==="architect"&&(v.architectLicense&&K.append("architectLicense",v.architectLicense),v.portfolio&&K.append("portfolio",v.portfolio));try{const Ne=await fetch("/buildhub/backend/api/register.php",{method:"POST",body:K});if(!Ne.ok)throw new Error(`HTTP error! status: ${Ne.status}`);const Ee=await Ne.text();let st;try{st=JSON.parse(Ee)}catch{throw console.error("Invalid JSON response:",Ee),new Error("Server returned invalid response. Please try again.")}st.success?(b(st.message||"Registration successful!"),a({firstName:"",lastName:"",email:"",password:"",confirmPassword:"",role:""}),x({license:null,portfolio:null,architectLicense:null}),i(""),setTimeout(()=>{st.redirect==="homeowner-dashboard"?q("/homeowner-dashboard"):q("/login")},2e3)):i(st.message||"Registration failed.")}catch(Ne){console.error("Registration error:",Ne),i("Server error. Please try again.")}finally{p(!1)}},J=()=>{O(null),te(""),T({license:null,portfolio:null,architectLicense:null}),X(""),E(!1),b("")};return e.jsxs("main",{className:"register-page","aria-label":"Registration section",children:[e.jsx("section",{className:"register-logo-section","aria-label":"BuildHub brand",children:e.jsxs("div",{className:"brand",children:[e.jsx("img",{src:"/images/logo.png",alt:"BuildHub Logo",className:"brand-logo"}),e.jsx("h1",{className:"brand-title",children:"BuildHub"}),e.jsx("p",{className:"brand-tagline",children:"Where homeowners meet trusted contractors and architects"}),e.jsxs("ul",{className:"brand-highlights","aria-label":"Key highlights",children:[e.jsx("li",{children:"Secure onboarding"}),e.jsx("li",{children:"Verified professionals"}),e.jsx("li",{children:"Fast project matching"})]})]})}),e.jsxs("section",{className:"register-form-section","aria-label":"Registration form",children:[e.jsx("h2",{children:"Create Your Account"}),e.jsx("p",{className:"subtitle",children:"Join us today and start your journey "}),e.jsxs("form",{onSubmit:re,noValidate:!0,children:[e.jsxs("div",{className:"grid-two-col",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"firstName",children:"First Name"}),e.jsx("input",{id:"firstName",name:"firstName",type:"text",required:!0,placeholder:"First name",value:t.firstName,onChange:le,onKeyDown:V=>{V.key===" "&&V.currentTarget.selectionStart===0&&V.preventDefault()},onPaste:V=>{const oe=V.clipboardData.getData("text");/^\s+/.test(oe)&&V.preventDefault()}})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"lastName",children:"Last Name"}),e.jsx("input",{id:"lastName",name:"lastName",type:"text",required:!0,placeholder:"Last name",value:t.lastName,onChange:le,onKeyDown:V=>{V.key===" "&&V.currentTarget.selectionStart===0&&V.preventDefault()},onPaste:V=>{const oe=V.clipboardData.getData("text");/^\s+/.test(oe)&&V.preventDefault()}})]})]}),e.jsxs("div",{className:"full-width",children:[e.jsx("label",{htmlFor:"email",children:"Email Address"}),e.jsx("input",{id:"email",name:"email",type:"email",required:!0,placeholder:"Email address",value:t.email,onChange:le,onKeyDown:V=>{(V.key===" "||V.key==="Spacebar")&&V.preventDefault()},onPaste:V=>{const oe=V.clipboardData.getData("text");/\s/.test(oe)&&V.preventDefault()}}),d&&e.jsx("div",{className:"muted",style:{marginTop:6,fontSize:13,color:"#6b7280"},children:"Checking email"}),o===!0&&e.jsx("p",{className:"error",style:{marginTop:6},children:"This email is already registered."}),o===!1&&$(t.email)&&e.jsx("div",{className:"muted",style:{marginTop:6,fontSize:13,color:"#16a34a"},children:"Email is available."})]}),e.jsxs("div",{className:"grid-two-col",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",children:"Password"}),e.jsxs("div",{style:{position:"relative"},children:[e.jsx("input",{id:"password",name:"password",type:C?"text":"password",required:!0,placeholder:"Create a strong password",value:t.password,onChange:le,style:{paddingRight:36},onKeyDown:V=>{(V.key===" "||V.key==="Spacebar")&&V.preventDefault()},onPaste:V=>{const oe=V.clipboardData.getData("text");/\s/.test(oe)&&V.preventDefault()}}),e.jsx("button",{type:"button","aria-label":C?"Hide password":"Show password",onClick:()=>D(V=>!V),style:{position:"absolute",right:8,top:"50%",transform:"translateY(-50%)",background:"transparent",border:"none",cursor:"pointer",padding:4,display:"flex",alignItems:"center",justifyContent:"center"},children:C?e.jsx($f,{size:18,"aria-hidden":"true"}):e.jsx(Wf,{size:18,"aria-hidden":"true"})})]}),e.jsxs("div",{className:"pwd-meter","aria-live":"polite",children:[e.jsx("div",{className:`pwd-meter-bar s${I}`,role:"progressbar","aria-valuemin":0,"aria-valuemax":4,"aria-valuenow":I}),e.jsx("div",{className:`pwd-meter-label s${I}`,children:I<=1?"Weak":I===2?"Fair":I===3?"Good":"Strong"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"confirmPassword",children:"Confirm Password"}),e.jsxs("div",{style:{position:"relative"},children:[e.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:S?"text":"password",required:!0,placeholder:"Re-enter password",value:t.confirmPassword,onChange:le,style:{paddingRight:36},onKeyDown:V=>{(V.key===" "||V.key==="Spacebar")&&V.preventDefault()},onPaste:V=>{const oe=V.clipboardData.getData("text");/\s/.test(oe)&&V.preventDefault()}}),e.jsx("button",{type:"button","aria-label":S?"Hide password":"Show password",onClick:()=>_(V=>!V),style:{position:"absolute",right:8,top:"50%",transform:"translateY(-50%)",background:"transparent",border:"none",cursor:"pointer",padding:4,display:"flex",alignItems:"center",justifyContent:"center"},children:S?e.jsx($f,{size:18,"aria-hidden":"true"}):e.jsx(Wf,{size:18,"aria-hidden":"true"})})]})]})]}),e.jsxs("div",{className:"full-width",children:[e.jsx("label",{htmlFor:"role",children:"Select Role"}),e.jsxs("select",{id:"role",name:"role",required:!0,value:t.role,onChange:le,children:[e.jsx("option",{value:"",disabled:!0,children:"Select your role"}),e.jsx("option",{value:"homeowner",children:"Homeowner"}),e.jsx("option",{value:"contractor",children:"Contractor"}),e.jsx("option",{value:"architect",children:"Architect"})]})]}),t.role==="contractor"&&e.jsxs("div",{className:"full-width",children:[e.jsxs("label",{htmlFor:"license",children:["Upload Contractor License ",e.jsx("span",{style:{color:"red"},children:"*"})]}),e.jsx("input",{id:"license",name:"license",type:"file",accept:".pdf,.jpg,.jpeg,.png",required:!0,onChange:Be}),v.license&&e.jsx("span",{className:"file-name",children:v.license.name})]}),t.role==="architect"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"full-width",children:[e.jsxs("label",{htmlFor:"architectLicense",children:["Upload Architect License ",e.jsx("span",{style:{color:"red"},children:"*"})]}),e.jsx("input",{id:"architectLicense",name:"architectLicense",type:"file",accept:".pdf,.jpg,.jpeg,.png",required:!0,onChange:Be}),v.architectLicense&&e.jsx("span",{className:"file-name",children:v.architectLicense.name})]}),e.jsxs("div",{className:"full-width",children:[e.jsxs("label",{htmlFor:"portfolio",children:["Upload Portfolio ",e.jsx("span",{style:{color:"red"},children:"*"})]}),e.jsx("input",{id:"portfolio",name:"portfolio",type:"file",accept:".pdf,.jpg,.jpeg,.png",required:!0,onChange:Be}),v.portfolio&&e.jsx("span",{className:"file-name",children:v.portfolio.name})]})]}),s&&e.jsx("p",{className:"error",children:s}),m&&e.jsx("p",{className:"success",style:{color:"green",fontWeight:"bold"},children:m}),e.jsx("button",{type:"submit",className:"btn-submit",disabled:A,children:A?"Creating account...":"Create account"}),e.jsxs("div",{className:"form-links",children:[e.jsx("a",{href:"/forgot-password",children:"Forgot password?"}),e.jsx("a",{href:"/login",children:"Already have an account? Login"})]}),e.jsx("div",{className:"google-signin-block",style:{marginTop:12},children:e.jsx("div",{className:"google-btn-container",ref:Q,children:e.jsx("div",{id:"google-btn-fallback",style:{textAlign:"center",padding:"10px",color:"#6c757d",fontSize:"14px"},children:"Google Sign-Up button loading..."})})})]}),N&&e.jsxs("div",{className:"google-role-form",children:[e.jsxs("p",{children:["Welcome,"," ",e.jsxs("b",{children:[N.firstName," ",N.lastName]}),"!",e.jsx("br",{}),"Please select your role to complete registration:"]}),e.jsxs("form",{onSubmit:z,children:[e.jsxs("select",{value:L,onChange:V=>te(V.target.value),required:!0,disabled:U,children:[e.jsx("option",{value:"",children:"Select your role"}),e.jsx("option",{value:"homeowner",children:"Homeowner"}),e.jsx("option",{value:"contractor",children:"Contractor"}),e.jsx("option",{value:"architect",children:"Architect"})]}),L==="contractor"&&e.jsxs("div",{className:"full-width",style:{marginTop:8},children:[e.jsxs("label",{htmlFor:"google_license",children:["Contractor License ",e.jsx("span",{style:{color:"red"},children:"*"})]}),e.jsx("input",{id:"google_license",name:"license",type:"file",accept:".pdf,.jpg,.jpeg,.png",required:!0,disabled:U,onChange:ee}),Y.license&&e.jsx("span",{className:"file-name",children:Y.license.name})]}),L==="architect"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"full-width",style:{marginTop:8},children:[e.jsxs("label",{htmlFor:"google_architectLicense",children:["Architect License ",e.jsx("span",{style:{color:"red"},children:"*"})]}),e.jsx("input",{id:"google_architectLicense",name:"architectLicense",type:"file",accept:".pdf,.jpg,.jpeg,.png",required:!0,disabled:U,onChange:ee}),Y.architectLicense&&e.jsx("span",{className:"file-name",children:Y.architectLicense.name})]}),e.jsxs("div",{className:"full-width",style:{marginTop:8},children:[e.jsxs("label",{htmlFor:"google_portfolio",children:["Portfolio ",e.jsx("span",{style:{color:"red"},children:"*"})]}),e.jsx("input",{id:"google_portfolio",name:"portfolio",type:"file",accept:".pdf,.jpg,.jpeg,.png",required:!0,disabled:U,onChange:ee}),Y.portfolio&&e.jsx("span",{className:"file-name",children:Y.portfolio.name})]})]}),e.jsxs("div",{style:{display:"flex",gap:"12px",marginTop:12},children:[e.jsx("button",{type:"submit",className:"btn-submit",disabled:U,children:U?"Processing...":"Complete Registration"}),e.jsx("button",{type:"button",className:"btn-secondary",onClick:J,disabled:U,style:{backgroundColor:"#6c757d",color:"white",border:"none",padding:"10px 20px",borderRadius:"5px",cursor:U?"not-allowed":"pointer"},children:"Cancel"})]})]}),G&&e.jsx("p",{className:"error",style:{marginTop:8},children:G}),m&&e.jsx("p",{className:"success",style:{color:"green",fontWeight:"bold",marginTop:8},children:m})]})]})]})},s1=w.createContext(null);let sN=0;function n1({children:t}){const[a,s]=w.useState([]),i=w.useRef(new Map),o=w.useCallback(u=>{s(p=>p.filter(m=>m.id!==u));const A=i.current.get(u);A&&(clearTimeout(A),i.current.delete(u))},[]),l=w.useCallback((u,A={})=>{const p=++sN,m={id:p,message:u,type:A.type||"info",duration:typeof A.duration=="number"?A.duration:3500};if(s(b=>[...b,m]),m.duration>0){const b=setTimeout(()=>o(p),m.duration);i.current.set(p,b)}return p},[o]),d=w.useMemo(()=>({show:l,info:(u,A)=>l(u,{...A||{},type:"info"}),success:(u,A)=>l(u,{...A||{},type:"success"}),error:(u,A)=>l(u,{...A||{},type:"error"}),warning:(u,A)=>l(u,{...A||{},type:"warning"}),remove:o}),[l,o]);return w.useEffect(()=>()=>{for(const u of i.current.values())clearTimeout(u);i.current.clear()},[]),e.jsxs(s1.Provider,{value:d,children:[t,e.jsx("div",{className:"toast-container",role:"status","aria-live":"polite","aria-atomic":"true",children:a.map(u=>e.jsxs("div",{className:`toast ${u.type}`,children:[e.jsx("span",{className:"toast-message",children:u.message}),e.jsx("button",{className:"toast-close","aria-label":"Close",onClick:()=>o(u.id),children:""})]},u.id))})]})}function Xn(){const t=w.useContext(s1);if(!t)throw new Error("useToast must be used within a ToastProvider");return t}const nN="1024134456606-et46lrm2ce8tl567a4m4s4e0u3v5t4sa.apps.googleusercontent.com",iN=()=>{const[t,a]=w.useState({email:"",password:""}),[s,i]=w.useState(""),[o,l]=w.useState(!1),d=$i(),u=Xn();w.useEffect(()=>{(async()=>{const S=JSON.parse(sessionStorage.getItem("user")||"{}");let _=!1;try{_=!!(await(await fetch("/buildhub/backend/api/session_check.php",{credentials:"include"})).json()).authenticated}catch{}S?.role==="homeowner"&&_?d("/homeowner-dashboard",{replace:!0}):S?.role==="contractor"&&_?d("/contractor-dashboard",{replace:!0}):S?.role==="architect"&&_&&d("/architect-dashboard",{replace:!0})})()},[]);const A=w.useRef(null),[p,m]=w.useState("");w.useEffect(()=>{let S=!1,_=0;const N=30,O=()=>{if(window.google&&A.current&&!S)try{const L=document.getElementById("google-btn-fallback");return L&&(L.style.display="none"),window.google.accounts.id.initialize({client_id:nN,callback:D,auto_select:!1,cancel_on_tap_outside:!0,use_fedcm_for_prompt:!1}),window.google.accounts.id.renderButton(A.current,{theme:"filled_blue",size:"large",text:"signin_with",shape:"rectangular",logo_alignment:"left",width:350}),console.log("Google button rendered successfully in Login"),!0}catch(L){return console.error("Error rendering Google button in Login:",L),!1}else window.google?A.current||console.log("Google button container not found in Login"):console.log("Google API not loaded yet in Login, attempt:",_);return!1};if(!O()){const L=setInterval(()=>{if(_+=1,O()||_>=N){if(_>=N){console.log("Max attempts reached, Google button not rendered in Login");const te=document.getElementById("google-btn-fallback");te&&(te.textContent="Unable to load Google Sign-In. Please refresh the page.")}clearInterval(L)}},150)}return()=>{if(S=!0,window.google?.accounts?.id)try{window.google.accounts.id.cancel()}catch{}}},[]);const b=S=>{const{name:_,value:N}=S.target;a(O=>({...O,[_]:N})),i("")},v=S=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(S),x=S=>t.email==="shijinthomas369@gmail.com"?"":S.length<8?"Password must be at least 8 characters long.":/\s/.test(S)?"Password cannot contain spaces.":"",C=async S=>{if(S.preventDefault(),!t.email){i("Email is required.");return}if(!v(t.email)){i("Please enter a valid email address.");return}const _=x(t.password);if(_){i(_);return}try{const O=await(await fetch("/buildhub/backend/api/login.php",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(t)})).json();O.success?(O.redirect==="admin-dashboard"?(localStorage.setItem("admin_logged_in","true"),localStorage.setItem("admin_username","admin"),d("/admin-dashboard")):(sessionStorage.setItem("user",JSON.stringify(O.user)),localStorage.setItem("bh_user",JSON.stringify({email:t.email,name:O.user?`${O.user.first_name} ${O.user.last_name}`.trim():"",method:"email",role:O.user?.role})),O.redirect==="homeowner-dashboard"?d("/homeowner-dashboard"):O.user?.role==="contractor"?d("/contractor-dashboard"):O.user?.role==="architect"?d("/architect-dashboard"):d("/login")),a({email:"",password:""}),i("")):i(O.message||"Login failed.")}catch{i("Server error. Please try again.")}},D=async S=>{m("");try{window.google.accounts.id.disableAutoSelect()}catch{}const N=await(await fetch(`https://www.googleapis.com/oauth2/v3/tokeninfo?id_token=${S.credential}`)).json();try{const L=await(await fetch("/buildhub/backend/api/login.php",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({google:!0,email:N.email})})).json();L.success?(L.user&&sessionStorage.setItem("user",JSON.stringify(L.user)),localStorage.setItem("bh_user",JSON.stringify({email:N.email,name:`${N.given_name||""} ${N.family_name||""}`.trim(),picture:N.picture,method:"google",role:L.user?.role})),L.redirect==="homeowner-dashboard"?d("/homeowner-dashboard"):L.redirect==="contractor-dashboard"?d("/contractor-dashboard"):L.redirect==="architect-dashboard"?d("/architect-dashboard"):(u.info(L.message||"Login successful! Await admin verification."),d("/login"))):m(L.message||"Google login failed.")}catch{m("Server error. Please try again.")}};return e.jsxs("main",{className:"register-page","aria-label":"Login section",children:[e.jsx("section",{className:"register-logo-section","aria-label":"BuildHub brand",children:e.jsxs("div",{className:"brand",children:[e.jsx("img",{src:"/images/logo.png",alt:"BuildHub Logo",className:"brand-logo"}),e.jsx("h1",{className:"brand-title",children:"BuildHub"}),e.jsx("p",{className:"brand-tagline",children:"Welcome back! Continue building with confidence."}),e.jsxs("ul",{className:"brand-highlights","aria-label":"Key highlights",children:[e.jsx("li",{children:"Secure login"}),e.jsx("li",{children:"Verified professionals"}),e.jsx("li",{children:"Fast project matching"})]})]})}),e.jsxs("section",{className:"register-form-section","aria-label":"Login form",children:[e.jsx("h2",{children:"Login to your account"}),e.jsx("p",{className:"subtitle",children:"Access your dashboard and projects"}),e.jsxs("form",{onSubmit:C,noValidate:!0,children:[e.jsxs("div",{className:"full-width",children:[e.jsx("label",{htmlFor:"email",children:"Email Address"}),e.jsx("input",{id:"email",name:"email",type:"email",required:!0,placeholder:"Email address",value:t.email,onChange:b,autoComplete:"email","aria-describedby":"emailError",onKeyDown:S=>{(S.key===" "||S.key==="Spacebar")&&S.preventDefault()},onPaste:S=>{const _=S.clipboardData.getData("text");/\s/.test(_)&&S.preventDefault()}})]}),e.jsxs("div",{className:"full-width",children:[e.jsx("label",{htmlFor:"password",children:"Password"}),e.jsxs("div",{style:{position:"relative"},children:[e.jsx("input",{id:"password",name:"password",type:o?"text":"password",required:!0,placeholder:"Enter your password",value:t.password,onChange:b,autoComplete:"current-password","aria-describedby":"passwordError",style:{paddingRight:36},onKeyDown:S=>{(S.key===" "||S.key==="Spacebar")&&S.preventDefault()},onPaste:S=>{const _=S.clipboardData.getData("text");/\s/.test(_)&&S.preventDefault()}}),e.jsx("button",{type:"button","aria-label":o?"Hide password":"Show password",onClick:()=>l(S=>!S),style:{position:"absolute",right:8,top:"50%",transform:"translateY(-50%)",background:"transparent",border:"none",cursor:"pointer",padding:4,display:"flex",alignItems:"center",justifyContent:"center"},children:o?e.jsx($f,{size:18,"aria-hidden":"true"}):e.jsx(Wf,{size:18,"aria-hidden":"true"})})]})]}),s&&e.jsx("p",{className:"error",role:"alert",children:s}),e.jsx("button",{type:"submit",className:"btn-submit",children:"Login"}),e.jsxs("div",{className:"form-links",children:[e.jsx("a",{href:"/forgot-password","aria-label":"Forgot password?",children:"Forgot password?"}),e.jsx("a",{href:"/register","aria-label":"Go to registration page",children:"Don't have an account? Register"})]}),e.jsx("div",{className:"google-signin-block",style:{marginTop:12},children:e.jsx("div",{className:"google-btn-container",ref:A,style:{minHeight:"50px",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx("div",{id:"google-btn-fallback",style:{textAlign:"center",padding:"10px",color:"#6c757d",fontSize:"14px"},children:"Loading Google Sign-In..."})})}),p&&e.jsx("p",{className:"error",role:"alert",children:p})]})]})]})};function rN(){const[t,a]=w.useState(1),[s,i]=w.useState(""),[o,l]=w.useState(""),[d,u]=w.useState(""),[A,p]=w.useState(""),[m,b]=w.useState(""),[v,x]=w.useState(!1),[C,D]=w.useState(!1),[S,_]=w.useState(!1),[N,O]=w.useState(!1),[L,te]=w.useState(0),G=$i();w.useEffect(()=>{b("")},[t]);const X=Q=>{let q=0;return Q.length>=8&&q++,/[A-Z]/.test(Q)&&/[a-z]/.test(Q)&&q++,/[0-9]/.test(Q)&&q++,/[^A-Za-z0-9]/.test(Q)&&q++,q},U=Q=>Q.length<8?"Password must be at least 8 characters long.":/\s/.test(Q)?"Password cannot contain spaces.":/[A-Za-z]/.test(Q)?/[0-9]/.test(Q)?/[^A-Za-z0-9]/.test(Q)?"":"Password must include at least one special character.":"Password must include at least one number.":"Password must include at least one letter.",E=async Q=>{if(Q.preventDefault(),b(""),!s){b("Enter your email.");return}x(!0);try{const ne=await(await fetch("/buildhub/backend/api/forgot_password_request.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:s})})).json();b(ne.message||"If an account exists, an OTP has been sent."),a(2)}catch{b("Server error. Please try again.")}finally{x(!1)}},Y=async()=>{if(b(""),!s||!o){b("Enter your email and OTP.");return}if(!/^\d{6}$/.test(o)){b("Enter a valid 6-digit OTP.");return}x(!0);try{const q=await(await fetch("/buildhub/backend/api/reset_password_verify.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:s,token:o})})).json();q.success?(D(!0),b("OTP verified. You can now set a new password."),a(3)):(D(!1),b(q.message||"Invalid or expired OTP."))}catch{D(!1),b("Server error. Please try again.")}finally{x(!1)}},T=async Q=>{if(Q.preventDefault(),b(""),!C){b("Verify the OTP first.");return}if(!d||!A){b("Enter new password.");return}const q=U(d);if(q){b(q);return}if(d!==A){b("Passwords do not match!");return}x(!0);try{const R=await(await fetch("/buildhub/backend/api/reset_password_update.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:s,token:o,password:d})})).json();R.success?(b("Password updated successfully. Redirecting to login..."),setTimeout(()=>G("/login"),1500)):b(R.message||"Failed to update password.")}catch{b("Server error. Please try again.")}finally{x(!1)}};return e.jsx("main",{className:"register-page","aria-label":"Forgot password",children:e.jsxs("section",{className:"register-form-section",style:{alignItems:"center"},children:[e.jsx("div",{style:{width:"100%",maxWidth:520,marginBottom:12},children:e.jsxs("button",{type:"button",onClick:()=>G("/login"),"aria-label":"Back to login",className:"back-link",children:[e.jsx(X_,{size:18}),e.jsx("span",{children:"Back to Login"})]})}),e.jsx("h2",{children:"Forgot Password"}),e.jsxs("form",{className:"glass-card",style:{maxWidth:460,width:"100%"},onSubmit:t===1?E:t===3?T:Q=>Q.preventDefault(),children:[t===1&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"full-width",children:[e.jsx("label",{htmlFor:"email",children:"Your Email"}),e.jsx("input",{id:"email",type:"email",value:s,onChange:Q=>{const q=Q.target.value.replace(/\s+/g,"");i(q)},placeholder:"Email address",required:!0,onKeyDown:Q=>{(Q.key===" "||Q.key==="Spacebar")&&Q.preventDefault()},onPaste:Q=>{const q=Q.clipboardData.getData("text");/\s/.test(q)&&Q.preventDefault()}})]}),m&&e.jsx("p",{className:/sent|success/i.test(m)?"success":"error",children:m}),e.jsx("button",{className:"btn-submit",disabled:v,type:"submit",children:v?"Sending...":"Send OTP"})]}),t===2&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"full-width",children:[e.jsx("label",{children:"Email"}),e.jsx("input",{type:"email",value:s,disabled:!0})]}),e.jsxs("div",{className:"full-width",children:[e.jsx("label",{children:"Enter OTP"}),e.jsx("input",{type:"text",inputMode:"numeric",pattern:"\\\\d{6}",maxLength:6,value:o,onChange:Q=>l(Q.target.value.replace(/[^0-9]/g,"")),placeholder:"6-digit OTP",required:!0})]}),m&&e.jsx("p",{className:/verified/i.test(m)?"success":"error",children:m}),e.jsxs("div",{style:{display:"flex",gap:8,flexWrap:"wrap"},children:[e.jsx("button",{type:"button",className:"btn-submit",disabled:v,onClick:Y,children:v?"Verifying...":"Verify OTP"}),e.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>a(1),children:"Change Email"})]})]}),t===3&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"full-width",children:[e.jsx("label",{children:"Email"}),e.jsx("input",{type:"email",value:s,disabled:!0})]}),e.jsxs("div",{className:"full-width",children:[e.jsx("label",{children:"New Password"}),e.jsxs("div",{style:{position:"relative"},children:[e.jsx("input",{type:S?"text":"password",value:d,onChange:Q=>{const q=Q.target.value.replace(/\s+/g,"");u(q),te(X(q))},placeholder:"Create a strong password",required:!0,onKeyDown:Q=>{(Q.key===" "||Q.key==="Spacebar")&&Q.preventDefault()},onPaste:Q=>{const q=Q.clipboardData.getData("text");/\s/.test(q)&&Q.preventDefault()}}),e.jsx("button",{type:"button","aria-label":S?"Hide password":"Show password",onClick:()=>_(Q=>!Q),style:{position:"absolute",right:8,top:"50%",transform:"translateY(-50%)",background:"transparent",border:"none",cursor:"pointer"},children:S?"":""})]}),e.jsxs("div",{className:"pwd-meter","aria-hidden":"true",children:[e.jsx("div",{className:`pwd-meter-bar s${L}`}),e.jsx("div",{className:"pwd-meter-label",children:L<=1?"Weak":L===2?"Fair":L===3?"Good":"Strong"})]})]}),e.jsxs("div",{className:"full-width",children:[e.jsx("label",{children:"Confirm Password"}),e.jsxs("div",{style:{position:"relative"},children:[e.jsx("input",{type:N?"text":"password",value:A,onChange:Q=>{const q=Q.target.value.replace(/\s+/g,"");p(q)},placeholder:"Re-enter password",required:!0,onKeyDown:Q=>{(Q.key===" "||Q.key==="Spacebar")&&Q.preventDefault()},onPaste:Q=>{const q=Q.clipboardData.getData("text");/\s/.test(q)&&Q.preventDefault()}}),e.jsx("button",{type:"button","aria-label":N?"Hide password":"Show password",onClick:()=>O(Q=>!Q),style:{position:"absolute",right:8,top:"50%",transform:"translateY(-50%)",background:"transparent",border:"none",cursor:"pointer"},children:N?"":""})]})]}),m&&e.jsx("p",{className:/updated|success/i.test(m)?"success":"error",children:m}),e.jsx("button",{className:"btn-submit",type:"submit",disabled:v,children:v?"Updating...":"Update Password"})]})]})]})})}const oN="modulepreload",lN=function(t){return"/"+t},m0={},cr=function(a,s,i){let o=Promise.resolve();if(s&&s.length>0){let A=function(p){return Promise.all(p.map(m=>Promise.resolve(m).then(b=>({status:"fulfilled",value:b}),b=>({status:"rejected",reason:b}))))};document.getElementsByTagName("link");const d=document.querySelector("meta[property=csp-nonce]"),u=d?.nonce||d?.getAttribute("nonce");o=A(s.map(p=>{if(p=lN(p),p in m0)return;m0[p]=!0;const m=p.endsWith(".css"),b=m?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${b}`))return;const v=document.createElement("link");if(v.rel=m?"stylesheet":oN,m||(v.as="script"),v.crossOrigin="",v.href=p,u&&v.setAttribute("nonce",u),document.head.appendChild(v),m)return new Promise((x,C)=>{v.addEventListener("load",x),v.addEventListener("error",()=>C(new Error(`Unable to preload CSS for ${p}`)))})}))}function l(d){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=d,window.dispatchEvent(u),!u.defaultPrevented)throw d}return o.then(d=>{for(const u of d||[])u.status==="rejected"&&l(u.reason);return a().catch(l)})},cN=t=>e.jsx("span",{title:typeof t=="number"?`${t} / 5`:"No ratings yet",children:[1,2,3,4,5].map(a=>e.jsx("span",{style:{color:(t||0)>=a?"#f5a623":"#ddd"},children:""},a))}),dN=({open:t,onClose:a,architect:s,reviews:i,loading:o})=>{if(!t||!s)return null;const l=`${s.first_name||""} ${s.last_name||""}`.trim()||"Architect";return e.jsx("div",{className:"form-modal",onClick:a,children:e.jsxs("div",{className:"form-content",style:{maxWidth:"720px"},onClick:d=>d.stopPropagation(),children:[e.jsxs("div",{className:"form-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{children:[e.jsx("h3",{style:{margin:0},children:l}),e.jsx("p",{style:{margin:"4px 0 0 0",color:"#64748b"},children:s.company_name||s.email||""})]}),e.jsx("button",{className:"btn btn-secondary",onClick:a,children:"Close"})]}),e.jsx("div",{className:"details-panel",style:{marginTop:8},children:e.jsxs("div",{className:"details-grid",style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:12},children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Specialization:"})," ",s.specialization||"General"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Experience:"})," ",s.experience_years??"N/A"," years"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"City:"})," ",s.city||"N/A"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Email:"})," ",s.email||"N/A"]}),s.phone&&e.jsxs("div",{children:[e.jsx("strong",{children:"Phone:"})," ",s.phone]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Rating:"})," ",e.jsxs("span",{style:{marginLeft:6},children:[cN(s.avg_rating)," ",e.jsxs("span",{style:{marginLeft:6,color:"#666",fontSize:"0.9rem"},children:["(",s.review_count||0,")"]})]})]})]})}),e.jsxs("div",{className:"section-card",style:{marginTop:16},children:[e.jsxs("div",{className:"section-header",children:[e.jsx("h4",{children:"Recent Reviews"}),e.jsx("p",{children:"Feedback from homeowners"})]}),e.jsx("div",{className:"section-content",children:o?e.jsx("div",{className:"loading",children:"Loading reviews..."}):Array.isArray(i)&&i.length>0?e.jsx("div",{className:"item-list",children:i.slice(0,5).map(d=>e.jsxs("div",{className:"list-item",children:[e.jsx("div",{className:"item-icon",children:""}),e.jsxs("div",{className:"item-content",children:[e.jsxs("h4",{className:"item-title",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("span",{children:d.author||"Homeowner"}),e.jsxs("span",{style:{color:"#f5a623"},children:["".repeat(d.rating),"".repeat(5-d.rating)]})]}),e.jsx("p",{className:"item-meta",children:new Date(d.created_at).toLocaleString()}),d.comment&&e.jsx("p",{className:"item-description",style:{whiteSpace:"pre-wrap"},children:d.comment})]})]},d.id))}):e.jsxs("div",{className:"empty-state",children:[e.jsx("div",{className:"empty-icon",children:""}),e.jsx("h3",{children:"No reviews yet"}),e.jsx("p",{children:"Be the first to work with this architect."})]})})]})]})})},Yf=({selectedArchitectIds:t=[],onSelectionChange:a,layoutRequestId:s=null,showAIRecommendations:i=!1,stylePreferences:o={}})=>{const[l,d]=w.useState([]),[u,A]=w.useState(!1),[p,m]=w.useState(""),[b,v]=w.useState(""),[x,C]=w.useState(""),[D,S]=w.useState(""),[_,N]=w.useState("best"),[O,L]=w.useState(!1),[te,G]=w.useState(null),[X,U]=w.useState({}),[E,Y]=w.useState({}),[T,Q]=w.useState([]),[q,ne]=w.useState(!1);w.useEffect(()=>{const I=setTimeout(()=>{R()},300);return()=>clearTimeout(I)},[b,x,D]);const R=w.useCallback(async()=>{A(!0),m("");try{const I=new URLSearchParams;b.trim()&&I.append("search",b.trim()),x.trim()&&I.append("specialization",x.trim()),D&&I.append("min_experience",D),s&&I.append("layout_request_id",s);const H=I.toString(),re=`/buildhub/backend/api/homeowner/get_architects.php${H?`?${H}`:""}`,V=await(await fetch(re,{credentials:"include"})).json();V.success?d(V.architects||[]):m(V.message||"Failed to load architects")}catch(I){m("Error loading architects: "+I.message)}finally{A(!1)}},[b,x,D,s]);w.useEffect(()=>{R()},[]),w.useEffect(()=>{if(i&&Object.keys(o).length>0&&l.length>0){const I=setTimeout(()=>{z()},300);return()=>clearTimeout(I)}},[l,o,i]);const z=async()=>{if(!(!i||Object.keys(o).length===0))try{A(!0);const I={budget_range:o.budget_range||"",plot_size:o.plot_size||"",plot_unit:o.plot_unit||"cents",building_size:o.building_size||"",num_floors:o.num_floors||"1",aesthetic:o.aesthetic||"",rooms:o.rooms||[],location:o.location||"",num_recommendations:5};console.log(" Sending project data to KNN engine:",I);const H=await fetch("http://localhost:5001/api/architect-recommendations",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(I)});if(!H.ok)throw new Error(`HTTP error! status: ${H.status}`);const re=await H.json();if(re.success&&re.recommendations){console.log(" KNN recommendations received:",re.recommendations);const J=re.recommendations.map((V,oe)=>({id:V.architect_id,first_name:V.name.split(" ")[0]||"",last_name:V.name.split(" ").slice(1).join(" ")||"",email:V.email,specialization:V.specialty,experience_years:V.experience_years,avg_rating:V.rating,review_count:V.num_reviews,location:V.location,price_range_min:V.price_range_min,price_range_max:V.price_range_max,specializations:V.specializations,portfolio_count:V.portfolio_count,success_rate:V.success_rate,response_time_hours:V.response_time_hours,aiScore:Math.round(V.similarity_score*100),aiReasons:[V.match_reason],knnSimilarity:V.similarity_score,knnRank:oe+1}));Q(J),console.log(" AI recommendations updated:",J)}else console.warn(" KNN API returned no recommendations:",re),Q([])}catch(I){console.error(" Error fetching KNN recommendations:",I),I.message.includes("Failed to fetch")||I.message.includes("ERR_CONNECTION_REFUSED")?console.log(" KNN API server not running, using fallback recommendations"):I.message.includes("404")&&console.log(" No architects found in database, using fallback recommendations");const H=l.map(re=>{let J=0,V=[];if(o.aesthetic){const oe=o.aesthetic.toLowerCase(),K=(re.specialization||"").toLowerCase();(K.includes(oe)||oe.includes(K))&&(J+=30,V.push("Specialization matches your style preference"))}return re.experience_years>=5?(J+=20,V.push("Experienced professional")):re.experience_years>=3&&(J+=15,V.push("Good experience level")),re.avg_rating>=4.5?(J+=25,V.push("Highly rated by clients")):re.avg_rating>=4?(J+=20,V.push("Well-rated professional")):re.avg_rating>=3.5&&(J+=15,V.push("Good client feedback")),re.review_count>=10?(J+=15,V.push("Many client reviews")):re.review_count>=5&&(J+=10,V.push("Several client reviews")),re.is_verified&&(J+=10,V.push("Verified professional")),{...re,aiScore:J,aiReasons:V,knnSimilarity:null,knnRank:null}}).filter(re=>re.aiScore>0).sort((re,J)=>J.aiScore-re.aiScore).slice(0,3);Q(H),console.log(" Using fallback recommendations:",H)}finally{A(!1)}},ee=I=>{const H=t.includes(I)?t.filter(J=>J!==I):[...t,I],re=l.filter(J=>H.includes(J.id));a(H,re)},le=async I=>{if(te===I){G(null);return}if(G(I),!X[I]&&!E[I]){Y(H=>({...H,[I]:!0}));try{const re=await(await fetch(`/buildhub/backend/api/reviews/get_reviews.php?architect_id=${I}`)).json();re.success&&U(J=>({...J,[I]:re.reviews||[]}))}catch(H){console.error("Error loading reviews:",H)}finally{Y(H=>({...H,[I]:!1}))}}},Be=()=>{v(""),C(""),S(""),N("best")},$=[...l].sort((I,H)=>{switch(_){case"experience":return(H.experience_years||0)-(I.experience_years||0);case"rating":return(H.avg_rating||0)-(I.avg_rating||0);case"recent":return new Date(H.created_at||0)-new Date(I.created_at||0);default:return 0}}),ue=I=>{const H="".repeat(Math.floor(I||0)),re="".repeat(5-Math.floor(I||0));return H+re},k=(I,H)=>{const re=(I||"").charAt(0).toUpperCase(),J=(H||"").charAt(0).toUpperCase();return re+J};return e.jsxs("div",{className:"architect-selection-container",children:[e.jsxs("div",{className:"architect-selection-header",children:[e.jsx("h3",{className:"architect-selection-title",children:"Choose Your Architect"}),e.jsxs("p",{className:"architect-selection-subtitle",children:["Select one or more architects to work on your project",i&&Object.keys(o).length>0&&e.jsx("span",{className:"ai-recommendation-badge",children:" AI recommendations based on your style preferences"})]})]}),e.jsxs("div",{className:"architect-search-section",children:[e.jsxs("div",{className:"search-bar-container",children:[e.jsxs("div",{className:"search-input-group",children:[e.jsx("i",{className:"fas fa-search search-icon"}),e.jsx("input",{type:"text",placeholder:"Search by name, company, or email...",value:b,onChange:I=>v(I.target.value),className:"search-input"})]}),e.jsxs("button",{className:"filter-toggle-btn",onClick:()=>L(!O),children:[e.jsx("i",{className:"fas fa-filter"}),"Filters",(x||D)&&e.jsx("span",{className:"filter-indicator"})]})]}),O&&e.jsxs("div",{className:"advanced-filters",children:[e.jsxs("div",{className:"filter-row",children:[e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{children:"Specialization"}),e.jsx("input",{type:"text",placeholder:"e.g., Residential, Commercial, Interior",value:x,onChange:I=>C(I.target.value)})]}),e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{children:"Min Experience (years)"}),e.jsx("input",{type:"number",min:"0",placeholder:"0",value:D,onChange:I=>S(I.target.value)})]}),e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{children:"Sort by"}),e.jsxs("select",{value:_,onChange:I=>N(I.target.value),children:[e.jsx("option",{value:"best",children:"Best Match"}),e.jsx("option",{value:"rating",children:"Highest Rating"}),e.jsx("option",{value:"experience",children:"Most Experience"}),e.jsx("option",{value:"recent",children:"Recently Joined"})]})]})]}),e.jsxs("div",{className:"filter-actions",children:[e.jsxs("button",{className:"clear-filters-btn",onClick:Be,children:[e.jsx("i",{className:"fas fa-times"}),"Clear Filters"]}),e.jsxs("div",{className:"selected-count",children:[t.length," selected"]})]})]})]}),i&&T.length>0&&e.jsxs("div",{className:"ai-recommendations-section",children:[e.jsxs("div",{className:"recommendations-header",children:[e.jsxs("h4",{className:"recommendations-title",children:[e.jsx("i",{className:"fas fa-robot"}),"AI Recommendations"]}),e.jsxs("button",{className:"toggle-recommendations-btn",onClick:()=>ne(!q),children:[q?"Hide":"Show"," Recommendations",e.jsx("i",{className:`fas fa-chevron-${q?"up":"down"}`})]})]}),q&&e.jsx("div",{className:"recommendations-grid",children:T.map((I,H)=>e.jsxs("div",{className:`recommendation-card ${t.includes(I.id)?"selected":""}`,onClick:()=>ee(I.id),children:[e.jsxs("div",{className:"recommendation-badge",children:[e.jsxs("span",{className:"badge-rank",children:["#",I.knnRank||H+1]}),e.jsxs("span",{className:"badge-score",children:[I.aiScore,"% Match"]}),I.knnSimilarity&&e.jsx("span",{className:"badge-knn",children:" KNN"})]}),e.jsxs("div",{className:"recommendation-content",children:[e.jsxs("div",{className:"architect-info",children:[e.jsx("div",{className:"architect-avatar",children:k(I.first_name,I.last_name)}),e.jsxs("div",{className:"architect-details",children:[e.jsx("h5",{className:"architect-name",children:`${I.first_name||""} ${I.last_name||""}`.trim()||`Architect #${I.id}`}),e.jsx("p",{className:"architect-email",children:I.email})]})]}),e.jsxs("div",{className:"recommendation-reasons",children:[e.jsx("h6",{children:"Why we recommend:"}),e.jsx("ul",{children:I.aiReasons.map((re,J)=>e.jsx("li",{children:re},J))})]})]})]},I.id))})]}),p&&e.jsxs("div",{className:"error-message",children:[e.jsx("i",{className:"fas fa-exclamation-triangle"}),p]}),u&&e.jsxs("div",{className:"loading-state",children:[e.jsx("div",{className:"loading-spinner"}),e.jsx("span",{children:"Loading architects..."})]}),!u&&e.jsx("div",{className:"architect-grid",children:$.map(I=>e.jsxs("div",{className:`architect-card ${t.includes(I.id)?"selected":""} ${I.already_assigned?"disabled":""}`,onClick:()=>!I.already_assigned&&ee(I.id),children:[e.jsx("div",{className:"selection-indicator",children:t.includes(I.id)&&e.jsx("i",{className:"fas fa-check"})}),I.already_assigned&&e.jsxs("div",{className:"status-badge assigned",children:[e.jsx("i",{className:"fas fa-user-check"}),"Already Assigned"]}),e.jsx("div",{className:"architect-card-header",children:e.jsxs("div",{className:"architect-info",children:[e.jsx("div",{className:"architect-avatar",children:k(I.first_name,I.last_name)}),e.jsxs("div",{className:"architect-details",children:[e.jsx("h4",{className:"architect-name",children:`${I.first_name||""} ${I.last_name||""}`.trim()||`Architect #${I.id}`}),e.jsx("p",{className:"architect-email",children:I.email}),I.company_name&&e.jsx("p",{className:"architect-company",children:I.company_name})]})]})}),e.jsxs("div",{className:"architect-rating",children:[e.jsx("div",{className:"rating-stars",children:ue(I.avg_rating)}),e.jsx("span",{className:"rating-text",children:typeof I.avg_rating=="number"?`${I.avg_rating.toFixed(1)}/5`:"No rating"}),e.jsxs("span",{className:"rating-count",children:["(",I.review_count||0," reviews)"]})]}),e.jsxs("div",{className:"architect-tags",children:[I.specialization&&e.jsxs("span",{className:"architect-tag specialization",children:[e.jsx("i",{className:"fas fa-briefcase"}),I.specialization]}),typeof I.experience_years=="number"&&e.jsxs("span",{className:"architect-tag experience",children:[e.jsx("i",{className:"fas fa-calendar-alt"}),I.experience_years," years"]})]}),e.jsxs("button",{className:"architect-action-btn",onClick:H=>{H.stopPropagation(),le(I.id)},children:[e.jsx("i",{className:"fas fa-eye"}),te===I.id?"Hide Details":"View Details"]}),te===I.id&&e.jsx("div",{className:"architect-details-expanded",children:e.jsxs("div",{className:"details-section",children:[e.jsx("h5",{children:"Reviews"}),E[I.id]?e.jsx("div",{className:"loading-reviews",children:"Loading reviews..."}):X[I.id]?.length>0?e.jsxs("div",{className:"reviews-list",children:[X[I.id].slice(0,3).map(H=>e.jsxs("div",{className:"review-item",children:[e.jsxs("div",{className:"review-header",children:[e.jsx("span",{className:"review-author",children:H.author||"Homeowner"}),e.jsx("span",{className:"review-rating",children:ue(H.rating)})]}),e.jsx("p",{className:"review-comment",children:H.comment}),e.jsx("span",{className:"review-date",children:new Date(H.created_at).toLocaleDateString()})]},H.id)),X[I.id].length>3&&e.jsxs("p",{className:"more-reviews",children:["+",X[I.id].length-3," more reviews"]})]}):e.jsx("p",{className:"no-reviews",children:"No reviews yet"})]})})]},I.id))}),!u&&$.length===0&&e.jsxs("div",{className:"empty-state",children:[e.jsx("div",{className:"empty-icon",children:""}),e.jsx("h3",{children:"No architects found"}),e.jsx("p",{children:"Try adjusting your search criteria or filters"}),e.jsxs("button",{className:"retry-btn",onClick:R,children:[e.jsx("i",{className:"fas fa-refresh"}),"Try Again"]})]})]})},AN=({projectId:t,homeownerId:a})=>{const s=Xn(),[i,o]=w.useState([]),[l,d]=w.useState(!0),[u,A]=w.useState(null),[p,m]=w.useState(null),[b,v]=w.useState("all"),[x,C]=w.useState("newest");w.useEffect(()=>{D()},[t,b,x]);const D=async()=>{d(!0);try{const G=new URLSearchParams({limit:"50",offset:"0"});t&&G.append("project_id",t);const U=await(await fetch(`/buildhub/backend/api/homeowner/get_geo_photos.php?${G}`,{credentials:"include"})).json();if(U.success){let E=U.data.photos||[];if(b==="unviewed")E=E.filter(Y=>!Y.viewing.viewed);else if(b==="recent"){const Y=new Date(Date.now()-864e5);E=E.filter(T=>new Date(T.timestamps.uploaded)>Y)}x==="oldest"?E.sort((Y,T)=>new Date(Y.timestamps.uploaded)-new Date(T.timestamps.uploaded)):x==="location"&&E.sort((Y,T)=>(Y.location.place_name||"").localeCompare(T.location.place_name||"")),o(E),m(U.data.project_summary)}else s.error("Failed to load photos: "+U.message)}catch(G){console.error("Error loading photos:",G),s.error("Error loading photos")}finally{d(!1)}},S=async G=>{try{(await(await fetch("/buildhub/backend/api/homeowner/mark_photo_viewed.php",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({photo_id:G})})).json()).success&&o(E=>E.map(Y=>Y.id===G?{...Y,viewing:{...Y.viewing,viewed:!0,viewed_at:new Date().toISOString()}}:Y))}catch(X){console.error("Error marking photo as viewed:",X)}},_=G=>{A(G),G.viewing.viewed||S(G.id)},N=()=>{A(null)},O=(G,X,U)=>{if(G&&X){const E=`https://www.google.com/maps?q=${G},${X}`;window.open(E,"_blank")}else s.error("Location coordinates not available")},L=G=>{if(G.photo_url){const X=document.createElement("a");X.href=G.photo_url,X.download=G.original_filename,X.click()}},te=G=>{switch(G){case"unviewed":return i.filter(U=>!U.viewing.viewed).length;case"recent":const X=new Date(Date.now()-1440*60*1e3);return i.filter(U=>new Date(U.timestamps.uploaded)>X).length;default:return i.length}};return l?e.jsx("div",{className:"geo-photo-viewer loading",children:e.jsxs("div",{className:"loading-spinner",children:[e.jsx("div",{className:"spinner"}),e.jsx("p",{children:"Loading construction photos..."})]})}):e.jsxs("div",{className:"geo-photo-viewer",children:[e.jsx("div",{className:"viewer-header",children:e.jsxs("div",{className:"header-content",children:[e.jsx("h3",{children:" Construction Progress Photos"}),p&&e.jsxs("div",{className:"project-info",children:[e.jsxs("span",{className:"contractor-name",children:["by ",p.contractor_name]}),e.jsxs("div",{className:"photo-stats",children:[e.jsxs("span",{className:"stat",children:[p.photo_stats.total_photos," photos"]}),p.photo_stats.unviewed_photos>0&&e.jsxs("span",{className:"stat unviewed",children:[p.photo_stats.unviewed_photos," new"]})]})]})]})}),e.jsxs("div",{className:"viewer-controls",children:[e.jsxs("div",{className:"filter-controls",children:[e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{children:"Filter:"}),e.jsxs("select",{value:b,onChange:G=>v(G.target.value),children:[e.jsxs("option",{value:"all",children:["All Photos (",i.length,")"]}),e.jsxs("option",{value:"unviewed",children:["Unviewed (",te("unviewed"),")"]}),e.jsxs("option",{value:"recent",children:["Recent (24h) (",te("recent"),")"]})]})]}),e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{children:"Sort by:"}),e.jsxs("select",{value:x,onChange:G=>C(G.target.value),children:[e.jsx("option",{value:"newest",children:"Newest First"}),e.jsx("option",{value:"oldest",children:"Oldest First"}),e.jsx("option",{value:"location",children:"Location"})]})]})]}),e.jsx("button",{className:"refresh-btn",onClick:D,children:" Refresh"})]}),i.length===0?e.jsxs("div",{className:"empty-state",children:[e.jsx("div",{className:"empty-icon",children:""}),e.jsx("h3",{children:"No Photos Yet"}),e.jsx("p",{children:"Construction photos from your contractor will appear here with location details."})]}):e.jsx("div",{className:"photos-grid",children:i.map(G=>e.jsxs("div",{className:`photo-card ${G.viewing.viewed?"":"unviewed"}`,onClick:()=>_(G),children:[!G.viewing.viewed&&e.jsx("div",{className:"new-badge",children:"NEW"}),e.jsx("div",{className:"photo-preview",children:G.file_exists&&G.photo_url?e.jsx("img",{src:G.photo_url,alt:"Construction progress"}):e.jsxs("div",{className:"photo-unavailable",children:[e.jsx("span",{children:""}),e.jsx("p",{children:"Photo unavailable"})]})}),e.jsxs("div",{className:"photo-info",children:[e.jsxs("div",{className:"location-info",children:[e.jsxs("div",{className:"place-name",children:[" ",G.location.place_name||"Location unavailable"]}),G.location.latitude&&G.location.longitude&&e.jsxs("div",{className:"coordinates",children:[G.location.latitude.toFixed(6),", ",G.location.longitude.toFixed(6)]})]}),e.jsxs("div",{className:"timestamp-info",children:[e.jsxs("div",{className:"upload-time",children:[" ",G.timestamps.time_ago]}),e.jsxs("div",{className:"contractor-name",children:[" ",G.contractor.name]})]})]})]},G.id))}),u&&e.jsx("div",{className:"photo-modal-overlay",onClick:N,children:e.jsxs("div",{className:"photo-modal",onClick:G=>G.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{children:"Construction Photo Details"}),e.jsx("button",{className:"close-btn",onClick:N,children:""})]}),e.jsxs("div",{className:"modal-content",children:[e.jsx("div",{className:"photo-display",children:u.file_exists&&u.photo_url?e.jsx("img",{src:u.photo_url,alt:"Construction progress"}):e.jsxs("div",{className:"photo-unavailable-large",children:[e.jsx("span",{children:""}),e.jsx("p",{children:"Photo not available"})]})}),e.jsxs("div",{className:"photo-details",children:[e.jsxs("div",{className:"detail-section",children:[e.jsx("h4",{children:" Location Information"}),e.jsxs("div",{className:"detail-grid",children:[e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"label",children:"Place:"}),e.jsx("span",{className:"value",children:u.location.place_name||"Not available"})]}),u.location.latitude&&u.location.longitude&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"label",children:"Coordinates:"}),e.jsxs("span",{className:"value",children:[u.location.latitude.toFixed(6),", ",u.location.longitude.toFixed(6)]})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"label",children:"Accuracy:"}),e.jsxs("span",{className:"value",children:["",Math.round(u.location.accuracy||0),"m"]})]})]})]}),u.location.latitude&&u.location.longitude&&e.jsx("button",{className:"maps-btn",onClick:()=>O(u.location.latitude,u.location.longitude,u.location.place_name),children:" View on Maps"})]}),e.jsxs("div",{className:"detail-section",children:[e.jsx("h4",{children:" Timing Information"}),e.jsxs("div",{className:"detail-grid",children:[e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"label",children:"Photo Taken:"}),e.jsx("span",{className:"value",children:u.timestamps.photo_taken_formatted||"Not available"})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"label",children:"Uploaded:"}),e.jsx("span",{className:"value",children:u.timestamps.uploaded_formatted})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"label",children:"Time Ago:"}),e.jsx("span",{className:"value",children:u.timestamps.time_ago})]})]})]}),e.jsxs("div",{className:"detail-section",children:[e.jsx("h4",{children:" Contractor Information"}),e.jsxs("div",{className:"detail-grid",children:[e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"label",children:"Name:"}),e.jsx("span",{className:"value",children:u.contractor.name})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"label",children:"Email:"}),e.jsx("span",{className:"value",children:u.contractor.email})]}),u.contractor.phone&&e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"label",children:"Phone:"}),e.jsx("span",{className:"value",children:u.contractor.phone})]})]})]}),e.jsxs("div",{className:"detail-section",children:[e.jsx("h4",{children:" File Information"}),e.jsxs("div",{className:"detail-grid",children:[e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"label",children:"Filename:"}),e.jsx("span",{className:"value",children:u.original_filename})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"label",children:"Size:"}),e.jsx("span",{className:"value",children:u.file_size_formatted})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"label",children:"Type:"}),e.jsx("span",{className:"value",children:u.mime_type})]})]}),u.file_exists&&u.photo_url&&e.jsx("button",{className:"download-btn",onClick:()=>L(u),children:" Download Photo"})]})]})]})]})})]})},uN=()=>{const[t,a]=w.useState([]),[s,i]=w.useState(!0),[o,l]=w.useState(null),[d,u]=w.useState(!1),[A,p]=w.useState(""),[m,b]=w.useState(""),[v,x]=w.useState(!1),[C,D]=w.useState(!1),[S,_]=w.useState(!1),[N,O]=w.useState([]),[L,te]=w.useState(""),[G,X]=w.useState(""),[U,E]=w.useState(!1),[Y,T]=w.useState(null),Q=w.useRef(null);w.useEffect(()=>{ne(),q()},[]);const q=async()=>{try{const H=await fetch("/buildhub/backend/api/homeowner/get_contractors.php",{method:"GET",credentials:"include"});if(H.ok){const re=await H.json();if(re.success){const J=re.contractors.map(V=>({...V,name:`${V.first_name||""} ${V.last_name||""}`.trim()||V.email}));O(J)}}}catch(H){console.error("Error fetching contractors:",H)}},ne=async()=>{try{i(!0);const H=await fetch("/buildhub/backend/api/homeowner/get_house_plans.php",{method:"GET",credentials:"include"});if(!H.ok)throw new Error(`HTTP error! status: ${H.status}`);const re=await H.json();re.success?a(re.plans||[]):console.error("Failed to fetch house plans:",re.message)}catch(H){console.error("Error fetching house plans:",H)}finally{i(!1)}},R=H=>{l(H),u(!0),p(H.review_info?.feedback||""),b(H.review_info?.status||"pending")},z=async()=>{if(!(!o||!m)){x(!0);try{const re=await(await fetch("/buildhub/backend/api/homeowner/review_house_plan.php",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({house_plan_id:o.id,status:m,feedback:A})})).json();re.success?(a(J=>J.map(V=>V.id===o.id?{...V,review_info:{status:m,feedback:A,reviewed_at:new Date().toISOString()}}:V)),u(!1),alert("Review submitted successfully!")):alert("Failed to submit review: "+re.message)}catch(H){console.error("Error submitting review:",H),alert("Error submitting review. Please try again.")}finally{x(!1)}}},ee=H=>{T(H),te(""),X(`Hi! I'd like to get a construction estimate for this house plan: "${H.plan_name}". Please review the attached technical details and layout images.`),_(!0)},le=async()=>{if(!L||!Y){alert("Please select a contractor");return}E(!0);try{const H={house_plan_id:Y.id,plan_name:Y.plan_name,plot_dimensions:`${Y.plot_width}'  ${Y.plot_height}'`,total_area:Y.total_area,technical_details:Y.technical_details,plan_data:Y.plan_data,architect_info:Y.architect_info,layout_images:[],notes:Y.notes};if(Y.technical_details?.layout_image){const V=Y.technical_details.layout_image;V.stored&&H.layout_images.push({type:"layout_image",filename:V.stored,original_name:V.name,url:`/buildhub/backend/uploads/house_plans/${V.stored}`})}["elevation_images","section_drawings","renders_3d"].forEach(V=>{Y.technical_details?.[V]&&Array.isArray(Y.technical_details[V])&&Y.technical_details[V].forEach(oe=>{oe.stored&&H.layout_images.push({type:V,filename:oe.stored,original_name:oe.name,url:`/buildhub/backend/uploads/house_plans/${oe.stored}`})})});const J=await(await fetch("/buildhub/backend/api/homeowner/send_house_plan_to_contractor.php",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({contractor_id:parseInt(L),house_plan_data:H,message:G})})).json();J.success?(alert(`House plan sent successfully to ${J.contractor_name}!`),_(!1),T(null)):alert("Failed to send house plan: "+J.message)}catch(H){console.error("Error sending to contractor:",H),alert("Error sending to contractor. Please try again.")}finally{E(!1)}},Be=H=>{const re={pending:"status-pending",approved:"status-approved",rejected:"status-rejected",revision_requested:"status-revision"},J={pending:"Pending Review",approved:"Approved",rejected:"Rejected",revision_requested:"Revision Requested"};return e.jsx("span",{className:`status-badge ${re[H]||"status-pending"}`,children:J[H]||H})},$=async H=>{D(!0);try{const{default:re}=await cr(async()=>{const{default:oe}=await Promise.resolve().then(()=>Vg);return{default:oe}},[]),J=new re("l","mm","a4");J.setFontSize(20),J.text(H.plan_name,20,20),J.setFontSize(12);let V=40;if(J.text(`Plot Size: ${H.plot_width}'  ${H.plot_height}'`,20,V),V+=10,J.text(`Total Area: ${H.total_area?.toFixed(0)} sq ft`,20,V),V+=10,J.text(`Number of Rooms: ${H.plan_data?.rooms?.length||0}`,20,V),V+=10,J.text(`Architect: ${H.architect_info?.name}`,20,V),V+=20,H.technical_details&&Object.keys(H.technical_details).length>0){J.setFontSize(14),J.text("Technical Specifications:",20,V),V+=10,J.setFontSize(10);const oe=H.technical_details;oe.construction_cost&&(J.text(`Estimated Cost: ${oe.construction_cost}`,20,V),V+=8),oe.construction_duration&&(J.text(`Duration: ${oe.construction_duration}`,20,V),V+=8),oe.foundation_type&&(J.text(`Foundation: ${oe.foundation_type}`,20,V),V+=8),oe.structure_type&&(J.text(`Structure: ${oe.structure_type}`,20,V),V+=8),oe.wall_material&&(J.text(`Wall Material: ${oe.wall_material}`,20,V),V+=8),V+=10}if(H.plan_data?.rooms&&H.plan_data.rooms.length>0&&(J.setFontSize(14),J.text("Room Details:",20,V),V+=10,J.setFontSize(10),H.plan_data.rooms.forEach((oe,K)=>{const Ne=`${oe.name}: ${oe.layout_width}'  ${oe.layout_height}' (${(oe.layout_width*oe.layout_height).toFixed(0)} sq ft)`;J.text(Ne,20,V),V+=8,V>180&&(J.addPage(),V=20)})),Q.current)try{const oe=(await cr(async()=>{const{default:ut}=await Promise.resolve().then(()=>Au);return{default:ut}},void 0)).default,K=await oe(Q.current),Ne=K.toDataURL("image/png");J.addPage(),J.setFontSize(14),J.text("Plan Layout:",20,20);const Ee=250,st=K.height*Ee/K.width;J.addImage(Ne,"PNG",20,30,Ee,st)}catch(oe){console.error("Error adding canvas to PDF:",oe)}J.save(`${H.plan_name.replace(/[^a-z0-9]/gi,"_")}_house_plan.pdf`)}catch(re){console.error("Error generating PDF:",re),alert("Error generating PDF. Please try again.")}finally{D(!1)}},ue=async H=>{D(!0);try{if(Q.current){const re=(await cr(async()=>{const{default:oe}=await Promise.resolve().then(()=>Au);return{default:oe}},void 0)).default,J=await re(Q.current,{backgroundColor:"#ffffff",scale:2}),V=document.createElement("a");V.download=`${H.plan_name.replace(/[^a-z0-9]/gi,"_")}_layout.png`,V.href=J.toDataURL("image/png"),V.click()}else alert("Plan visualization not available for download.")}catch(re){console.error("Error generating image:",re),alert("Error generating image. Please try again.")}finally{D(!1)}},k=H=>{try{const re={plan_info:{name:H.plan_name,plot_width:H.plot_width,plot_height:H.plot_height,total_area:H.total_area,created_at:H.created_at,updated_at:H.updated_at},architect_info:H.architect_info,technical_details:H.technical_details,plan_data:H.plan_data,notes:H.notes},J=JSON.stringify(re,null,2),V=new Blob([J],{type:"application/json"}),oe=document.createElement("a");oe.href=URL.createObjectURL(V),oe.download=`${H.plan_name.replace(/[^a-z0-9]/gi,"_")}_data.json`,oe.click(),URL.revokeObjectURL(oe.href)}catch(re){console.error("Error generating JSON:",re),alert("Error generating JSON file. Please try again.")}},I=H=>{if(!H.plan_data?.rooms||H.plan_data.rooms.length===0)return null;const re=10,J=H.plot_width*re+40,V=H.plot_height*re+40;return e.jsx("div",{className:"plan-canvas-container",ref:Q,children:e.jsxs("svg",{width:J,height:V,className:"plan-svg",children:[e.jsx("rect",{x:20,y:20,width:H.plot_width*re,height:H.plot_height*re,fill:"none",stroke:"#2c3e50",strokeWidth:"2"}),e.jsxs("text",{x:20+H.plot_width*re/2,y:15,textAnchor:"middle",fontSize:"10",fill:"#2c3e50",children:[H.plot_width,"'"]}),e.jsxs("text",{x:10,y:20+H.plot_height*re/2,textAnchor:"middle",fontSize:"10",fill:"#2c3e50",transform:`rotate(-90, 10, ${20+H.plot_height*re/2})`,children:[H.plot_height,"'"]}),H.plan_data.rooms.map((oe,K)=>{const Ne=(oe.x||0)+20,Ee=(oe.y||0)+20,st=(oe.layout_width||10)*re,ut=(oe.layout_height||10)*re;return e.jsxs("g",{children:[e.jsx("rect",{x:Ne,y:Ee,width:st,height:ut,fill:oe.color||"#e3f2fd",stroke:"#666",strokeWidth:"1"}),e.jsx("text",{x:Ne+st/2,y:Ee+ut/2-5,textAnchor:"middle",fontSize:"8",fill:"#333",children:oe.name}),e.jsxs("text",{x:Ne+st/2,y:Ee+ut/2+5,textAnchor:"middle",fontSize:"6",fill:"#666",children:[oe.layout_width,"'  ",oe.layout_height,"'"]})]},K)})]})})};return s?e.jsx("div",{className:"house-plan-viewer",children:e.jsxs("div",{className:"loading-state",children:[e.jsx("div",{className:"loading-spinner"}),e.jsx("p",{children:"Loading your house plans..."})]})}):e.jsxs("div",{className:"house-plan-viewer",children:[e.jsxs("div",{className:"section-header",children:[e.jsx("h2",{children:" House Plans"}),e.jsx("p",{children:"Review house plans submitted by your architect"})]}),t.length===0?e.jsxs("div",{className:"empty-state",children:[e.jsx("div",{className:"empty-icon",children:""}),e.jsx("h3",{children:"No House Plans Yet"}),e.jsx("p",{children:"Your architect will submit house plans here for your review."})]}):e.jsx("div",{className:"plans-grid",children:t.map(H=>e.jsxs("div",{className:"plan-card",children:[e.jsxs("div",{className:"plan-header",children:[e.jsx("h3",{children:H.plan_name}),Be(H.review_info?.status||"pending")]}),e.jsxs("div",{className:"plan-summary",children:[e.jsxs("div",{className:"summary-item",children:[e.jsx("span",{className:"label",children:"Plot Size:"}),e.jsxs("span",{className:"value",children:[H.plot_width,"'  ",H.plot_height,"'"]})]}),e.jsxs("div",{className:"summary-item",children:[e.jsx("span",{className:"label",children:"Total Area:"}),e.jsxs("span",{className:"value",children:[H.total_area?.toFixed(0)," sq ft"]})]}),e.jsxs("div",{className:"summary-item",children:[e.jsx("span",{className:"label",children:"Rooms:"}),e.jsx("span",{className:"value",children:H.plan_data?.rooms?.length||0})]}),H.technical_details?.construction_cost&&e.jsxs("div",{className:"summary-item",children:[e.jsx("span",{className:"label",children:"Estimated Cost:"}),e.jsx("span",{className:"value",children:H.technical_details.construction_cost})]})]}),e.jsxs("div",{className:"plan-architect",children:[e.jsx("span",{className:"architect-label",children:"Architect:"}),e.jsx("span",{className:"architect-name",children:H.architect_info?.name})]}),e.jsxs("div",{className:"plan-actions",children:[e.jsx("button",{className:"btn-primary",onClick:()=>R(H),children:"View Details"}),e.jsx("button",{className:"btn-contractor",onClick:()=>ee(H),title:"Send this house plan to contractors for estimates",children:" Send to Contractor"}),e.jsxs("div",{className:"download-actions",children:[e.jsx("button",{className:"btn-download",onClick:()=>$(H),disabled:C,title:"Download as PDF",children:" PDF"}),e.jsx("button",{className:"btn-download",onClick:()=>ue(H),disabled:C,title:"Download as Image",children:" PNG"}),e.jsx("button",{className:"btn-download",onClick:()=>k(H),disabled:C,title:"Download as JSON",children:" JSON"})]})]}),e.jsx("div",{className:"plan-dates",children:e.jsxs("small",{children:["Submitted: ",new Date(H.updated_at).toLocaleDateString()]})})]},H.id))}),d&&o&&e.jsx("div",{className:"modal-overlay",children:e.jsxs("div",{className:"plan-details-modal",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h2",{children:o.plan_name}),e.jsx("button",{className:"close-btn",onClick:()=>u(!1),children:""})]}),e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"plan-info-grid",children:[e.jsxs("div",{className:"info-section plan-visualization",children:[e.jsx("h3",{children:" Plan Layout"}),I(o)]}),e.jsxs("div",{className:"info-section",children:[e.jsx("h3",{children:" Plan Information"}),e.jsxs("div",{className:"info-grid",children:[e.jsxs("div",{className:"info-item",children:[e.jsx("label",{children:"Plot Dimensions:"}),e.jsxs("span",{children:[o.plot_width,"'  ",o.plot_height,"'"]})]}),e.jsxs("div",{className:"info-item",children:[e.jsx("label",{children:"Total Area:"}),e.jsxs("span",{children:[o.total_area?.toFixed(0)," sq ft"]})]}),e.jsxs("div",{className:"info-item",children:[e.jsx("label",{children:"Number of Rooms:"}),e.jsx("span",{children:o.plan_data?.rooms?.length||0})]}),e.jsxs("div",{className:"info-item",children:[e.jsx("label",{children:"Status:"}),Be(o.review_info?.status||"pending")]})]})]}),o.technical_details&&Object.keys(o.technical_details).length>0&&e.jsxs("div",{className:"info-section",children:[e.jsx("h3",{children:" Technical Specifications"}),e.jsxs("div",{className:"technical-details",children:[o.technical_details.construction_cost&&e.jsxs("div",{className:"tech-item",children:[e.jsx("label",{children:"Estimated Cost:"}),e.jsx("span",{className:"cost-highlight",children:o.technical_details.construction_cost})]}),o.technical_details.construction_duration&&e.jsxs("div",{className:"tech-item",children:[e.jsx("label",{children:"Construction Duration:"}),e.jsx("span",{children:o.technical_details.construction_duration})]}),o.technical_details.foundation_type&&e.jsxs("div",{className:"tech-item",children:[e.jsx("label",{children:"Foundation Type:"}),e.jsx("span",{children:o.technical_details.foundation_type})]}),o.technical_details.structure_type&&e.jsxs("div",{className:"tech-item",children:[e.jsx("label",{children:"Structure Type:"}),e.jsx("span",{children:o.technical_details.structure_type})]}),o.technical_details.wall_material&&e.jsxs("div",{className:"tech-item",children:[e.jsx("label",{children:"Wall Material:"}),e.jsx("span",{children:o.technical_details.wall_material})]}),o.technical_details.roofing_type&&e.jsxs("div",{className:"tech-item",children:[e.jsx("label",{children:"Roofing Type:"}),e.jsx("span",{children:o.technical_details.roofing_type})]})]})]}),o.plan_data?.rooms&&e.jsxs("div",{className:"info-section",children:[e.jsx("h3",{children:" Room Details"}),e.jsx("div",{className:"rooms-list",children:o.plan_data.rooms.map((H,re)=>e.jsxs("div",{className:"room-item",children:[e.jsx("span",{className:"room-name",children:H.name}),e.jsxs("span",{className:"room-size",children:[H.layout_width,"'  ",H.layout_height,"' (",(H.layout_width*H.layout_height).toFixed(0)," sq ft)"]})]},re))})]}),e.jsxs("div",{className:"info-section",children:[e.jsx("h3",{children:" Architect Information"}),e.jsxs("div",{className:"architect-info",children:[e.jsxs("div",{className:"info-item",children:[e.jsx("label",{children:"Name:"}),e.jsx("span",{children:o.architect_info?.name})]}),e.jsxs("div",{className:"info-item",children:[e.jsx("label",{children:"Email:"}),e.jsx("span",{children:o.architect_info?.email})]}),o.architect_info?.specialization&&e.jsxs("div",{className:"info-item",children:[e.jsx("label",{children:"Specialization:"}),e.jsx("span",{children:o.architect_info.specialization})]})]})]}),o.notes&&e.jsxs("div",{className:"info-section",children:[e.jsx("h3",{children:" Notes"}),e.jsx("p",{className:"plan-notes",children:o.notes})]})]}),e.jsxs("div",{className:"review-section",children:[e.jsx("h3",{children:" Your Review"}),e.jsxs("div",{className:"review-form",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Status:"}),e.jsxs("select",{value:m,onChange:H=>b(H.target.value),className:"status-dropdown",children:[e.jsx("option",{value:"pending",children:"Pending Review"}),e.jsx("option",{value:"approved",children:" Approve Plan"}),e.jsx("option",{value:"revision_requested",children:" Request Revisions"}),e.jsx("option",{value:"rejected",children:" Reject Plan"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Feedback:"}),e.jsx("textarea",{value:A,onChange:H=>p(H.target.value),placeholder:"Provide your feedback on the house plan...",rows:"4",className:"feedback-textarea"})]})]})]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsxs("div",{className:"download-section",children:[e.jsx("span",{className:"download-label",children:"Download:"}),e.jsxs("div",{className:"download-buttons",children:[e.jsx("button",{className:"btn-download-modal",onClick:()=>$(o),disabled:C,title:"Download complete plan as PDF",children:" PDF Report"}),e.jsx("button",{className:"btn-download-modal",onClick:()=>ue(o),disabled:C,title:"Download layout as image",children:" Layout Image"}),e.jsx("button",{className:"btn-download-modal",onClick:()=>k(o),disabled:C,title:"Download plan data as JSON",children:" Plan Data"})]})]}),e.jsxs("div",{className:"modal-actions",children:[e.jsx("button",{className:"btn-secondary",onClick:()=>u(!1),children:"Close"}),e.jsx("button",{className:"btn-primary",onClick:z,disabled:v,children:v?"Submitting...":"Submit Review"})]})]})]})}),S&&e.jsx("div",{className:"modal-overlay",children:e.jsxs("div",{className:"contractor-modal",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h2",{children:" Send to Contractor"}),e.jsx("button",{className:"close-btn",onClick:()=>_(!1),children:""})]}),e.jsxs("div",{className:"modal-content",children:[Y&&e.jsxs("div",{className:"plan-summary-card",children:[e.jsxs("h3",{children:[" ",Y.plan_name]}),e.jsxs("div",{className:"summary-details",children:[e.jsxs("span",{children:[" ",Y.plot_width,"'  ",Y.plot_height,"'"]}),e.jsxs("span",{children:[" ",Y.total_area?.toFixed(0)," sq ft"]}),e.jsxs("span",{children:[" ",Y.plan_data?.rooms?.length||0," rooms"]}),Y.technical_details?.construction_cost&&e.jsxs("span",{children:[" Est. ",Y.technical_details.construction_cost]})]})]}),e.jsxs("div",{className:"contractor-selection",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Select Contractor:"}),e.jsxs("select",{value:L,onChange:H=>te(H.target.value),className:"contractor-dropdown",children:[e.jsx("option",{value:"",children:"Choose a contractor..."}),N.map(H=>e.jsxs("option",{value:H.id,children:[H.name," - ",H.specialization||"General Contractor"]},H.id))]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Message to Contractor:"}),e.jsx("textarea",{value:G,onChange:H=>X(H.target.value),placeholder:"Add any specific requirements or questions...",rows:"4",className:"contractor-message"})]}),e.jsxs("div",{className:"included-items",children:[e.jsx("h4",{children:" What will be sent:"}),e.jsxs("ul",{className:"items-list",children:[e.jsx("li",{children:" Complete house plan with dimensions"}),e.jsx("li",{children:" Technical specifications & materials"}),e.jsx("li",{children:" Layout images and drawings"}),e.jsx("li",{children:" Room details and floor plans"}),e.jsx("li",{children:" Estimated construction cost"}),e.jsx("li",{children:" Architect information"})]})]})]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{className:"btn-secondary",onClick:()=>_(!1),children:"Cancel"}),e.jsx("button",{className:"btn-primary",onClick:le,disabled:U||!L,children:U?"Sending...":" Send to Contractor"})]})]})})]})};function Ls(t){"@babel/helpers - typeof";return Ls=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},Ls(t)}var bo=Uint8Array,_r=Uint16Array,Og=Int32Array,zg=new bo([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),qg=new bo([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),f0=new bo([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),i1=function(t,a){for(var s=new _r(31),i=0;i<31;++i)s[i]=a+=1<<t[i-1];for(var o=new Og(s[30]),i=1;i<30;++i)for(var l=s[i];l<s[i+1];++l)o[l]=l-s[i]<<5|i;return{b:s,r:o}},r1=i1(zg,2),hN=r1.b,Jf=r1.r;hN[28]=258,Jf[258]=28;var pN=i1(qg,0),g0=pN.r,Xf=new _r(32768);for(var tn=0;tn<32768;++tn){var Xl=(tn&43690)>>1|(tn&21845)<<1;Xl=(Xl&52428)>>2|(Xl&13107)<<2,Xl=(Xl&61680)>>4|(Xl&3855)<<4,Xf[tn]=((Xl&65280)>>8|(Xl&255)<<8)>>1}var VA=function(t,a,s){for(var i=t.length,o=0,l=new _r(a);o<i;++o)t[o]&&++l[t[o]-1];var d=new _r(a);for(o=1;o<a;++o)d[o]=d[o-1]+l[o-1]<<1;var u;if(s){u=new _r(1<<a);var A=15-a;for(o=0;o<i;++o)if(t[o])for(var p=o<<4|t[o],m=a-t[o],b=d[t[o]-1]++<<m,v=b|(1<<m)-1;b<=v;++b)u[Xf[b]>>A]=p}else for(u=new _r(i),o=0;o<i;++o)t[o]&&(u[o]=Xf[d[t[o]-1]++]>>15-t[o]);return u},qc=new bo(288);for(var tn=0;tn<144;++tn)qc[tn]=8;for(var tn=144;tn<256;++tn)qc[tn]=9;for(var tn=256;tn<280;++tn)qc[tn]=7;for(var tn=280;tn<288;++tn)qc[tn]=8;var op=new bo(32);for(var tn=0;tn<32;++tn)op[tn]=5;var mN=VA(qc,9,0),fN=VA(op,5,0),o1=function(t){return(t+7)/8|0},gN=function(t,a,s){return(s==null||s>t.length)&&(s=t.length),new bo(t.subarray(a,s))},ml=function(t,a,s){s<<=a&7;var i=a/8|0;t[i]|=s,t[i+1]|=s>>8},TA=function(t,a,s){s<<=a&7;var i=a/8|0;t[i]|=s,t[i+1]|=s>>8,t[i+2]|=s>>16},af=function(t,a){for(var s=[],i=0;i<t.length;++i)t[i]&&s.push({s:i,f:t[i]});var o=s.length,l=s.slice();if(!o)return{t:c1,l:0};if(o==1){var d=new bo(s[0].s+1);return d[s[0].s]=1,{t:d,l:1}}s.sort(function(te,G){return te.f-G.f}),s.push({s:-1,f:25001});var u=s[0],A=s[1],p=0,m=1,b=2;for(s[0]={s:-1,f:u.f+A.f,l:u,r:A};m!=o-1;)u=s[s[p].f<s[b].f?p++:b++],A=s[p!=m&&s[p].f<s[b].f?p++:b++],s[m++]={s:-1,f:u.f+A.f,l:u,r:A};for(var v=l[0].s,i=1;i<o;++i)l[i].s>v&&(v=l[i].s);var x=new _r(v+1),C=Zf(s[m-1],x,0);if(C>a){var i=0,D=0,S=C-a,_=1<<S;for(l.sort(function(G,X){return x[X.s]-x[G.s]||G.f-X.f});i<o;++i){var N=l[i].s;if(x[N]>a)D+=_-(1<<C-x[N]),x[N]=a;else break}for(D>>=S;D>0;){var O=l[i].s;x[O]<a?D-=1<<a-x[O]++-1:++i}for(;i>=0&&D;--i){var L=l[i].s;x[L]==a&&(--x[L],++D)}C=a}return{t:new bo(x),l:C}},Zf=function(t,a,s){return t.s==-1?Math.max(Zf(t.l,a,s+1),Zf(t.r,a,s+1)):a[t.s]=s},x0=function(t){for(var a=t.length;a&&!t[--a];);for(var s=new _r(++a),i=0,o=t[0],l=1,d=function(A){s[i++]=A},u=1;u<=a;++u)if(t[u]==o&&u!=a)++l;else{if(!o&&l>2){for(;l>138;l-=138)d(32754);l>2&&(d(l>10?l-11<<5|28690:l-3<<5|12305),l=0)}else if(l>3){for(d(o),--l;l>6;l-=6)d(8304);l>2&&(d(l-3<<5|8208),l=0)}for(;l--;)d(o);l=1,o=t[u]}return{c:s.subarray(0,i),n:a}},QA=function(t,a){for(var s=0,i=0;i<a.length;++i)s+=t[i]*a[i];return s},l1=function(t,a,s){var i=s.length,o=o1(a+2);t[o]=i&255,t[o+1]=i>>8,t[o+2]=t[o]^255,t[o+3]=t[o+1]^255;for(var l=0;l<i;++l)t[o+l+4]=s[l];return(o+4+i)*8},y0=function(t,a,s,i,o,l,d,u,A,p,m){ml(a,m++,s),++o[256];for(var b=af(o,15),v=b.t,x=b.l,C=af(l,15),D=C.t,S=C.l,_=x0(v),N=_.c,O=_.n,L=x0(D),te=L.c,G=L.n,X=new _r(19),U=0;U<N.length;++U)++X[N[U]&31];for(var U=0;U<te.length;++U)++X[te[U]&31];for(var E=af(X,7),Y=E.t,T=E.l,Q=19;Q>4&&!Y[f0[Q-1]];--Q);var q=p+5<<3,ne=QA(o,qc)+QA(l,op)+d,R=QA(o,v)+QA(l,D)+d+14+3*Q+QA(X,Y)+2*X[16]+3*X[17]+7*X[18];if(A>=0&&q<=ne&&q<=R)return l1(a,m,t.subarray(A,A+p));var z,ee,le,Be;if(ml(a,m,1+(R<ne)),m+=2,R<ne){z=VA(v,x,0),ee=v,le=VA(D,S,0),Be=D;var $=VA(Y,T,0);ml(a,m,O-257),ml(a,m+5,G-1),ml(a,m+10,Q-4),m+=14;for(var U=0;U<Q;++U)ml(a,m+3*U,Y[f0[U]]);m+=3*Q;for(var ue=[N,te],k=0;k<2;++k)for(var I=ue[k],U=0;U<I.length;++U){var H=I[U]&31;ml(a,m,$[H]),m+=Y[H],H>15&&(ml(a,m,I[U]>>5&127),m+=I[U]>>12)}}else z=mN,ee=qc,le=fN,Be=op;for(var U=0;U<u;++U){var re=i[U];if(re>255){var H=re>>18&31;TA(a,m,z[H+257]),m+=ee[H+257],H>7&&(ml(a,m,re>>23&31),m+=zg[H]);var J=re&31;TA(a,m,le[J]),m+=Be[J],J>3&&(TA(a,m,re>>5&8191),m+=qg[J])}else TA(a,m,z[re]),m+=ee[re]}return TA(a,m,z[256]),m+ee[256]},xN=new Og([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),c1=new bo(0),yN=function(t,a,s,i,o,l){var d=l.z||t.length,u=new bo(i+d+5*(1+Math.ceil(d/7e3))+o),A=u.subarray(i,u.length-o),p=l.l,m=(l.r||0)&7;if(a){m&&(A[0]=l.r>>3);for(var b=xN[a-1],v=b>>13,x=b&8191,C=(1<<s)-1,D=l.p||new _r(32768),S=l.h||new _r(C+1),_=Math.ceil(s/3),N=2*_,O=function(Ge){return(t[Ge]^t[Ge+1]<<_^t[Ge+2]<<N)&C},L=new Og(25e3),te=new _r(288),G=new _r(32),X=0,U=0,E=l.i||0,Y=0,T=l.w||0,Q=0;E+2<d;++E){var q=O(E),ne=E&32767,R=S[q];if(D[ne]=R,S[q]=ne,T<=E){var z=d-E;if((X>7e3||Y>24576)&&(z>423||!p)){m=y0(t,A,0,L,te,G,U,Y,Q,E-Q,m),Y=X=U=0,Q=E;for(var ee=0;ee<286;++ee)te[ee]=0;for(var ee=0;ee<30;++ee)G[ee]=0}var le=2,Be=0,$=x,ue=ne-R&32767;if(z>2&&q==O(E-ue))for(var k=Math.min(v,z)-1,I=Math.min(32767,E),H=Math.min(258,z);ue<=I&&--$&&ne!=R;){if(t[E+le]==t[E+le-ue]){for(var re=0;re<H&&t[E+re]==t[E+re-ue];++re);if(re>le){if(le=re,Be=ue,re>k)break;for(var J=Math.min(ue,re-2),V=0,ee=0;ee<J;++ee){var oe=E-ue+ee&32767,K=D[oe],Ne=oe-K&32767;Ne>V&&(V=Ne,R=oe)}}}ne=R,R=D[ne],ue+=ne-R&32767}if(Be){L[Y++]=268435456|Jf[le]<<18|g0[Be];var Ee=Jf[le]&31,st=g0[Be]&31;U+=zg[Ee]+qg[st],++te[257+Ee],++G[st],T=E+le,++X}else L[Y++]=t[E],++te[t[E]]}}for(E=Math.max(E,T);E<d;++E)L[Y++]=t[E],++te[t[E]];m=y0(t,A,p,L,te,G,U,Y,Q,E-Q,m),p||(l.r=m&7|A[m/8|0]<<3,m-=7,l.h=S,l.p=D,l.i=E,l.w=T)}else{for(var E=l.w||0;E<d+p;E+=65535){var ut=E+65535;ut>=d&&(A[m/8|0]=p,ut=d),m=l1(A,m+1,t.subarray(E,ut))}l.i=d}return gN(u,0,i+o1(m)+o)},d1=function(){var t=1,a=0;return{p:function(s){for(var i=t,o=a,l=s.length|0,d=0;d!=l;){for(var u=Math.min(d+2655,l);d<u;++d)o+=i+=s[d];i=(i&65535)+15*(i>>16),o=(o&65535)+15*(o>>16)}t=i,a=o},d:function(){return t%=65521,a%=65521,(t&255)<<24|(t&65280)<<8|(a&255)<<8|a>>8}}},vN=function(t,a,s,i,o){if(!o&&(o={l:1},a.dictionary)){var l=a.dictionary.subarray(-32768),d=new bo(l.length+t.length);d.set(l),d.set(t,l.length),t=d,o.w=l.length}return yN(t,a.level==null?6:a.level,a.mem==null?o.l?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):20:12+a.mem,s,i,o)},A1=function(t,a,s){for(;s;++a)t[a]=s,s>>>=8},bN=function(t,a){var s=a.level,i=s==0?0:s<6?1:s==9?3:2;if(t[0]=120,t[1]=i<<6|(a.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,a.dictionary){var o=d1();o.p(a.dictionary),A1(t,2,o.d())}};function eg(t,a){a||(a={});var s=d1();s.p(t);var i=vN(t,a,a.dictionary?6:2,4);return bN(i,a),A1(i,i.length-4,s.d()),i}var jN=typeof TextDecoder<"u"&&new TextDecoder,wN=0;try{jN.decode(c1,{stream:!0}),wN=1}catch{}function _N(t){if(Array.isArray(t))return t}function NN(t,a){var s=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(s!=null){var i,o,l,d,u=[],A=!0,p=!1;try{if(l=(s=s.call(t)).next,a!==0)for(;!(A=(i=l.call(s)).done)&&(u.push(i.value),u.length!==a);A=!0);}catch(m){p=!0,o=m}finally{try{if(!A&&s.return!=null&&(d=s.return(),Object(d)!==d))return}finally{if(p)throw o}}return u}}function v0(t,a){(a==null||a>t.length)&&(a=t.length);for(var s=0,i=Array(a);s<a;s++)i[s]=t[s];return i}function BN(t,a){if(t){if(typeof t=="string")return v0(t,a);var s={}.toString.call(t).slice(8,-1);return s==="Object"&&t.constructor&&(s=t.constructor.name),s==="Map"||s==="Set"?Array.from(t):s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?v0(t,a):void 0}}function CN(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function b0(t,a){return _N(t)||NN(t,a)||BN(t,a)||CN()}function j0(t,a="utf8"){return new TextDecoder(a).decode(t)}const SN=new TextEncoder;function kN(t){return SN.encode(t)}const FN=1024*8,EN=(()=>{const t=new Uint8Array(4),a=new Uint32Array(t.buffer);return!((a[0]=1)&t[0])})(),sf={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class Kg{buffer;byteLength;byteOffset;length;offset;lastWrittenByte;littleEndian;_data;_mark;_marks;constructor(a=FN,s={}){let i=!1;typeof a=="number"?a=new ArrayBuffer(a):(i=!0,this.lastWrittenByte=a.byteLength);const o=s.offset?s.offset>>>0:0,l=a.byteLength-o;let d=o;(ArrayBuffer.isView(a)||a instanceof Kg)&&(a.byteLength!==a.buffer.byteLength&&(d=a.byteOffset+o),a=a.buffer),i?this.lastWrittenByte=l:this.lastWrittenByte=0,this.buffer=a,this.length=l,this.byteLength=l,this.byteOffset=d,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,d,l),this._mark=0,this._marks=[]}available(a=1){return this.offset+a<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(a=1){return this.offset+=a,this}back(a=1){return this.offset-=a,this}seek(a){return this.offset=a,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const a=this._marks.pop();if(a===void 0)throw new Error("Mark stack empty");return this.seek(a),this}rewind(){return this.offset=0,this}ensureAvailable(a=1){if(!this.available(a)){const i=(this.offset+a)*2,o=new Uint8Array(i);o.set(new Uint8Array(this.buffer)),this.buffer=o.buffer,this.length=i,this.byteLength=i,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(a=1){return this.readArray(a,"uint8")}readArray(a,s){const i=sf[s].BYTES_PER_ELEMENT*a,o=this.byteOffset+this.offset,l=this.buffer.slice(o,o+i);if(this.littleEndian===EN&&s!=="uint8"&&s!=="int8"){const u=new Uint8Array(this.buffer.slice(o,o+i));u.reverse();const A=new sf[s](u.buffer);return this.offset+=i,A.reverse(),A}const d=new sf[s](l);return this.offset+=i,d}readInt16(){const a=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,a}readUint16(){const a=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,a}readInt32(){const a=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,a}readUint32(){const a=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,a}readFloat32(){const a=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,a}readFloat64(){const a=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,a}readBigInt64(){const a=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,a}readBigUint64(){const a=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,a}readChar(){return String.fromCharCode(this.readInt8())}readChars(a=1){let s="";for(let i=0;i<a;i++)s+=this.readChar();return s}readUtf8(a=1){return j0(this.readBytes(a))}decodeText(a=1,s="utf8"){return j0(this.readBytes(a),s)}writeBoolean(a){return this.writeUint8(a?255:0),this}writeInt8(a){return this.ensureAvailable(1),this._data.setInt8(this.offset++,a),this._updateLastWrittenByte(),this}writeUint8(a){return this.ensureAvailable(1),this._data.setUint8(this.offset++,a),this._updateLastWrittenByte(),this}writeByte(a){return this.writeUint8(a)}writeBytes(a){this.ensureAvailable(a.length);for(let s=0;s<a.length;s++)this._data.setUint8(this.offset++,a[s]);return this._updateLastWrittenByte(),this}writeInt16(a){return this.ensureAvailable(2),this._data.setInt16(this.offset,a,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(a){return this.ensureAvailable(2),this._data.setUint16(this.offset,a,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(a){return this.ensureAvailable(4),this._data.setInt32(this.offset,a,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(a){return this.ensureAvailable(4),this._data.setUint32(this.offset,a,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(a){return this.ensureAvailable(4),this._data.setFloat32(this.offset,a,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(a){return this.ensureAvailable(8),this._data.setFloat64(this.offset,a,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(a){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,a,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(a){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,a,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(a){return this.writeUint8(a.charCodeAt(0))}writeChars(a){for(let s=0;s<a.length;s++)this.writeUint8(a.charCodeAt(s));return this}writeUtf8(a){return this.writeBytes(kN(a))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function qd(t){let a=t.length;for(;--a>=0;)t[a]=0}const UN=3,LN=258,u1=29,TN=256,QN=TN+1+u1,h1=30,RN=512,DN=new Array((QN+2)*2);qd(DN);const IN=new Array(h1*2);qd(IN);const PN=new Array(RN);qd(PN);const HN=new Array(LN-UN+1);qd(HN);const MN=new Array(u1);qd(MN);const ON=new Array(h1);qd(ON);const zN=(t,a,s,i)=>{let o=t&65535|0,l=t>>>16&65535|0,d=0;for(;s!==0;){d=s>2e3?2e3:s,s-=d;do o=o+a[i++]|0,l=l+o|0;while(--d);o%=65521,l%=65521}return o|l<<16|0};var tg=zN;const qN=()=>{let t,a=[];for(var s=0;s<256;s++){t=s;for(var i=0;i<8;i++)t=t&1?3988292384^t>>>1:t>>>1;a[s]=t}return a},KN=new Uint32Array(qN()),GN=(t,a,s,i)=>{const o=KN,l=i+s;t^=-1;for(let d=i;d<l;d++)t=t>>>8^o[(t^a[d])&255];return t^-1};var Po=GN,ag={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},p1={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const VN=(t,a)=>Object.prototype.hasOwnProperty.call(t,a);var $N=function(t){const a=Array.prototype.slice.call(arguments,1);for(;a.length;){const s=a.shift();if(s){if(typeof s!="object")throw new TypeError(s+"must be non-object");for(const i in s)VN(s,i)&&(t[i]=s[i])}}return t},WN=t=>{let a=0;for(let i=0,o=t.length;i<o;i++)a+=t[i].length;const s=new Uint8Array(a);for(let i=0,o=0,l=t.length;i<l;i++){let d=t[i];s.set(d,o),o+=d.length}return s},m1={assign:$N,flattenChunks:WN};let f1=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{f1=!1}const iu=new Uint8Array(256);for(let t=0;t<256;t++)iu[t]=t>=252?6:t>=248?5:t>=240?4:t>=224?3:t>=192?2:1;iu[254]=iu[254]=1;var YN=t=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(t);let a,s,i,o,l,d=t.length,u=0;for(o=0;o<d;o++)s=t.charCodeAt(o),(s&64512)===55296&&o+1<d&&(i=t.charCodeAt(o+1),(i&64512)===56320&&(s=65536+(s-55296<<10)+(i-56320),o++)),u+=s<128?1:s<2048?2:s<65536?3:4;for(a=new Uint8Array(u),l=0,o=0;l<u;o++)s=t.charCodeAt(o),(s&64512)===55296&&o+1<d&&(i=t.charCodeAt(o+1),(i&64512)===56320&&(s=65536+(s-55296<<10)+(i-56320),o++)),s<128?a[l++]=s:s<2048?(a[l++]=192|s>>>6,a[l++]=128|s&63):s<65536?(a[l++]=224|s>>>12,a[l++]=128|s>>>6&63,a[l++]=128|s&63):(a[l++]=240|s>>>18,a[l++]=128|s>>>12&63,a[l++]=128|s>>>6&63,a[l++]=128|s&63);return a};const JN=(t,a)=>{if(a<65534&&t.subarray&&f1)return String.fromCharCode.apply(null,t.length===a?t:t.subarray(0,a));let s="";for(let i=0;i<a;i++)s+=String.fromCharCode(t[i]);return s};var XN=(t,a)=>{const s=a||t.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(t.subarray(0,a));let i,o;const l=new Array(s*2);for(o=0,i=0;i<s;){let d=t[i++];if(d<128){l[o++]=d;continue}let u=iu[d];if(u>4){l[o++]=65533,i+=u-1;continue}for(d&=u===2?31:u===3?15:7;u>1&&i<s;)d=d<<6|t[i++]&63,u--;if(u>1){l[o++]=65533;continue}d<65536?l[o++]=d:(d-=65536,l[o++]=55296|d>>10&1023,l[o++]=56320|d&1023)}return JN(l,o)},ZN=(t,a)=>{a=a||t.length,a>t.length&&(a=t.length);let s=a-1;for(;s>=0&&(t[s]&192)===128;)s--;return s<0||s===0?a:s+iu[t[s]]>a?s:a},sg={string2buf:YN,buf2string:XN,utf8border:ZN};function e5(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var t5=e5;const vh=16209,a5=16191;var s5=function(a,s){let i,o,l,d,u,A,p,m,b,v,x,C,D,S,_,N,O,L,te,G,X,U,E,Y;const T=a.state;i=a.next_in,E=a.input,o=i+(a.avail_in-5),l=a.next_out,Y=a.output,d=l-(s-a.avail_out),u=l+(a.avail_out-257),A=T.dmax,p=T.wsize,m=T.whave,b=T.wnext,v=T.window,x=T.hold,C=T.bits,D=T.lencode,S=T.distcode,_=(1<<T.lenbits)-1,N=(1<<T.distbits)-1;e:do{C<15&&(x+=E[i++]<<C,C+=8,x+=E[i++]<<C,C+=8),O=D[x&_];t:for(;;){if(L=O>>>24,x>>>=L,C-=L,L=O>>>16&255,L===0)Y[l++]=O&65535;else if(L&16){te=O&65535,L&=15,L&&(C<L&&(x+=E[i++]<<C,C+=8),te+=x&(1<<L)-1,x>>>=L,C-=L),C<15&&(x+=E[i++]<<C,C+=8,x+=E[i++]<<C,C+=8),O=S[x&N];a:for(;;){if(L=O>>>24,x>>>=L,C-=L,L=O>>>16&255,L&16){if(G=O&65535,L&=15,C<L&&(x+=E[i++]<<C,C+=8,C<L&&(x+=E[i++]<<C,C+=8)),G+=x&(1<<L)-1,G>A){a.msg="invalid distance too far back",T.mode=vh;break e}if(x>>>=L,C-=L,L=l-d,G>L){if(L=G-L,L>m&&T.sane){a.msg="invalid distance too far back",T.mode=vh;break e}if(X=0,U=v,b===0){if(X+=p-L,L<te){te-=L;do Y[l++]=v[X++];while(--L);X=l-G,U=Y}}else if(b<L){if(X+=p+b-L,L-=b,L<te){te-=L;do Y[l++]=v[X++];while(--L);if(X=0,b<te){L=b,te-=L;do Y[l++]=v[X++];while(--L);X=l-G,U=Y}}}else if(X+=b-L,L<te){te-=L;do Y[l++]=v[X++];while(--L);X=l-G,U=Y}for(;te>2;)Y[l++]=U[X++],Y[l++]=U[X++],Y[l++]=U[X++],te-=3;te&&(Y[l++]=U[X++],te>1&&(Y[l++]=U[X++]))}else{X=l-G;do Y[l++]=Y[X++],Y[l++]=Y[X++],Y[l++]=Y[X++],te-=3;while(te>2);te&&(Y[l++]=Y[X++],te>1&&(Y[l++]=Y[X++]))}}else if((L&64)===0){O=S[(O&65535)+(x&(1<<L)-1)];continue a}else{a.msg="invalid distance code",T.mode=vh;break e}break}}else if((L&64)===0){O=D[(O&65535)+(x&(1<<L)-1)];continue t}else if(L&32){T.mode=a5;break e}else{a.msg="invalid literal/length code",T.mode=vh;break e}break}}while(i<o&&l<u);te=C>>3,i-=te,C-=te<<3,x&=(1<<C)-1,a.next_in=i,a.next_out=l,a.avail_in=i<o?5+(o-i):5-(i-o),a.avail_out=l<u?257+(u-l):257-(l-u),T.hold=x,T.bits=C};const Nd=15,w0=852,_0=592,N0=0,nf=1,B0=2,n5=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),i5=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),r5=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),o5=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),l5=(t,a,s,i,o,l,d,u)=>{const A=u.bits;let p=0,m=0,b=0,v=0,x=0,C=0,D=0,S=0,_=0,N=0,O,L,te,G,X,U=null,E;const Y=new Uint16Array(Nd+1),T=new Uint16Array(Nd+1);let Q=null,q,ne,R;for(p=0;p<=Nd;p++)Y[p]=0;for(m=0;m<i;m++)Y[a[s+m]]++;for(x=A,v=Nd;v>=1&&Y[v]===0;v--);if(x>v&&(x=v),v===0)return o[l++]=1<<24|64<<16|0,o[l++]=1<<24|64<<16|0,u.bits=1,0;for(b=1;b<v&&Y[b]===0;b++);for(x<b&&(x=b),S=1,p=1;p<=Nd;p++)if(S<<=1,S-=Y[p],S<0)return-1;if(S>0&&(t===N0||v!==1))return-1;for(T[1]=0,p=1;p<Nd;p++)T[p+1]=T[p]+Y[p];for(m=0;m<i;m++)a[s+m]!==0&&(d[T[a[s+m]]++]=m);if(t===N0?(U=Q=d,E=20):t===nf?(U=n5,Q=i5,E=257):(U=r5,Q=o5,E=0),N=0,m=0,p=b,X=l,C=x,D=0,te=-1,_=1<<x,G=_-1,t===nf&&_>w0||t===B0&&_>_0)return 1;for(;;){q=p-D,d[m]+1<E?(ne=0,R=d[m]):d[m]>=E?(ne=Q[d[m]-E],R=U[d[m]-E]):(ne=96,R=0),O=1<<p-D,L=1<<C,b=L;do L-=O,o[X+(N>>D)+L]=q<<24|ne<<16|R|0;while(L!==0);for(O=1<<p-1;N&O;)O>>=1;if(O!==0?(N&=O-1,N+=O):N=0,m++,--Y[p]===0){if(p===v)break;p=a[s+d[m]]}if(p>x&&(N&G)!==te){for(D===0&&(D=x),X+=b,C=p-D,S=1<<C;C+D<v&&(S-=Y[C+D],!(S<=0));)C++,S<<=1;if(_+=1<<C,t===nf&&_>w0||t===B0&&_>_0)return 1;te=N&G,o[te]=x<<24|C<<16|X-l|0}}return N!==0&&(o[X+N]=p-D<<24|64<<16|0),u.bits=x,0};var $A=l5;const c5=0,g1=1,x1=2,{Z_FINISH:C0,Z_BLOCK:d5,Z_TREES:bh,Z_OK:Kc,Z_STREAM_END:A5,Z_NEED_DICT:u5,Z_STREAM_ERROR:Jr,Z_DATA_ERROR:y1,Z_MEM_ERROR:v1,Z_BUF_ERROR:h5,Z_DEFLATED:S0}=p1,Cp=16180,k0=16181,F0=16182,E0=16183,U0=16184,L0=16185,T0=16186,Q0=16187,R0=16188,D0=16189,lp=16190,fl=16191,rf=16192,I0=16193,of=16194,P0=16195,H0=16196,M0=16197,O0=16198,jh=16199,wh=16200,z0=16201,q0=16202,K0=16203,G0=16204,V0=16205,lf=16206,$0=16207,W0=16208,cn=16209,b1=16210,j1=16211,p5=852,m5=592,f5=15,g5=f5,Y0=t=>(t>>>24&255)+(t>>>8&65280)+((t&65280)<<8)+((t&255)<<24);function x5(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const Vc=t=>{if(!t)return 1;const a=t.state;return!a||a.strm!==t||a.mode<Cp||a.mode>j1?1:0},w1=t=>{if(Vc(t))return Jr;const a=t.state;return t.total_in=t.total_out=a.total=0,t.msg="",a.wrap&&(t.adler=a.wrap&1),a.mode=Cp,a.last=0,a.havedict=0,a.flags=-1,a.dmax=32768,a.head=null,a.hold=0,a.bits=0,a.lencode=a.lendyn=new Int32Array(p5),a.distcode=a.distdyn=new Int32Array(m5),a.sane=1,a.back=-1,Kc},_1=t=>{if(Vc(t))return Jr;const a=t.state;return a.wsize=0,a.whave=0,a.wnext=0,w1(t)},N1=(t,a)=>{let s;if(Vc(t))return Jr;const i=t.state;return a<0?(s=0,a=-a):(s=(a>>4)+5,a<48&&(a&=15)),a&&(a<8||a>15)?Jr:(i.window!==null&&i.wbits!==a&&(i.window=null),i.wrap=s,i.wbits=a,_1(t))},B1=(t,a)=>{if(!t)return Jr;const s=new x5;t.state=s,s.strm=t,s.window=null,s.mode=Cp;const i=N1(t,a);return i!==Kc&&(t.state=null),i},y5=t=>B1(t,g5);let J0=!0,cf,df;const v5=t=>{if(J0){cf=new Int32Array(512),df=new Int32Array(32);let a=0;for(;a<144;)t.lens[a++]=8;for(;a<256;)t.lens[a++]=9;for(;a<280;)t.lens[a++]=7;for(;a<288;)t.lens[a++]=8;for($A(g1,t.lens,0,288,cf,0,t.work,{bits:9}),a=0;a<32;)t.lens[a++]=5;$A(x1,t.lens,0,32,df,0,t.work,{bits:5}),J0=!1}t.lencode=cf,t.lenbits=9,t.distcode=df,t.distbits=5},C1=(t,a,s,i)=>{let o;const l=t.state;return l.window===null&&(l.wsize=1<<l.wbits,l.wnext=0,l.whave=0,l.window=new Uint8Array(l.wsize)),i>=l.wsize?(l.window.set(a.subarray(s-l.wsize,s),0),l.wnext=0,l.whave=l.wsize):(o=l.wsize-l.wnext,o>i&&(o=i),l.window.set(a.subarray(s-i,s-i+o),l.wnext),i-=o,i?(l.window.set(a.subarray(s-i,s),0),l.wnext=i,l.whave=l.wsize):(l.wnext+=o,l.wnext===l.wsize&&(l.wnext=0),l.whave<l.wsize&&(l.whave+=o))),0},b5=(t,a)=>{let s,i,o,l,d,u,A,p,m,b,v,x,C,D,S=0,_,N,O,L,te,G,X,U;const E=new Uint8Array(4);let Y,T;const Q=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(Vc(t)||!t.output||!t.input&&t.avail_in!==0)return Jr;s=t.state,s.mode===fl&&(s.mode=rf),d=t.next_out,o=t.output,A=t.avail_out,l=t.next_in,i=t.input,u=t.avail_in,p=s.hold,m=s.bits,b=u,v=A,U=Kc;e:for(;;)switch(s.mode){case Cp:if(s.wrap===0){s.mode=rf;break}for(;m<16;){if(u===0)break e;u--,p+=i[l++]<<m,m+=8}if(s.wrap&2&&p===35615){s.wbits===0&&(s.wbits=15),s.check=0,E[0]=p&255,E[1]=p>>>8&255,s.check=Po(s.check,E,2,0),p=0,m=0,s.mode=k0;break}if(s.head&&(s.head.done=!1),!(s.wrap&1)||(((p&255)<<8)+(p>>8))%31){t.msg="incorrect header check",s.mode=cn;break}if((p&15)!==S0){t.msg="unknown compression method",s.mode=cn;break}if(p>>>=4,m-=4,X=(p&15)+8,s.wbits===0&&(s.wbits=X),X>15||X>s.wbits){t.msg="invalid window size",s.mode=cn;break}s.dmax=1<<s.wbits,s.flags=0,t.adler=s.check=1,s.mode=p&512?D0:fl,p=0,m=0;break;case k0:for(;m<16;){if(u===0)break e;u--,p+=i[l++]<<m,m+=8}if(s.flags=p,(s.flags&255)!==S0){t.msg="unknown compression method",s.mode=cn;break}if(s.flags&57344){t.msg="unknown header flags set",s.mode=cn;break}s.head&&(s.head.text=p>>8&1),s.flags&512&&s.wrap&4&&(E[0]=p&255,E[1]=p>>>8&255,s.check=Po(s.check,E,2,0)),p=0,m=0,s.mode=F0;case F0:for(;m<32;){if(u===0)break e;u--,p+=i[l++]<<m,m+=8}s.head&&(s.head.time=p),s.flags&512&&s.wrap&4&&(E[0]=p&255,E[1]=p>>>8&255,E[2]=p>>>16&255,E[3]=p>>>24&255,s.check=Po(s.check,E,4,0)),p=0,m=0,s.mode=E0;case E0:for(;m<16;){if(u===0)break e;u--,p+=i[l++]<<m,m+=8}s.head&&(s.head.xflags=p&255,s.head.os=p>>8),s.flags&512&&s.wrap&4&&(E[0]=p&255,E[1]=p>>>8&255,s.check=Po(s.check,E,2,0)),p=0,m=0,s.mode=U0;case U0:if(s.flags&1024){for(;m<16;){if(u===0)break e;u--,p+=i[l++]<<m,m+=8}s.length=p,s.head&&(s.head.extra_len=p),s.flags&512&&s.wrap&4&&(E[0]=p&255,E[1]=p>>>8&255,s.check=Po(s.check,E,2,0)),p=0,m=0}else s.head&&(s.head.extra=null);s.mode=L0;case L0:if(s.flags&1024&&(x=s.length,x>u&&(x=u),x&&(s.head&&(X=s.head.extra_len-s.length,s.head.extra||(s.head.extra=new Uint8Array(s.head.extra_len)),s.head.extra.set(i.subarray(l,l+x),X)),s.flags&512&&s.wrap&4&&(s.check=Po(s.check,i,x,l)),u-=x,l+=x,s.length-=x),s.length))break e;s.length=0,s.mode=T0;case T0:if(s.flags&2048){if(u===0)break e;x=0;do X=i[l+x++],s.head&&X&&s.length<65536&&(s.head.name+=String.fromCharCode(X));while(X&&x<u);if(s.flags&512&&s.wrap&4&&(s.check=Po(s.check,i,x,l)),u-=x,l+=x,X)break e}else s.head&&(s.head.name=null);s.length=0,s.mode=Q0;case Q0:if(s.flags&4096){if(u===0)break e;x=0;do X=i[l+x++],s.head&&X&&s.length<65536&&(s.head.comment+=String.fromCharCode(X));while(X&&x<u);if(s.flags&512&&s.wrap&4&&(s.check=Po(s.check,i,x,l)),u-=x,l+=x,X)break e}else s.head&&(s.head.comment=null);s.mode=R0;case R0:if(s.flags&512){for(;m<16;){if(u===0)break e;u--,p+=i[l++]<<m,m+=8}if(s.wrap&4&&p!==(s.check&65535)){t.msg="header crc mismatch",s.mode=cn;break}p=0,m=0}s.head&&(s.head.hcrc=s.flags>>9&1,s.head.done=!0),t.adler=s.check=0,s.mode=fl;break;case D0:for(;m<32;){if(u===0)break e;u--,p+=i[l++]<<m,m+=8}t.adler=s.check=Y0(p),p=0,m=0,s.mode=lp;case lp:if(s.havedict===0)return t.next_out=d,t.avail_out=A,t.next_in=l,t.avail_in=u,s.hold=p,s.bits=m,u5;t.adler=s.check=1,s.mode=fl;case fl:if(a===d5||a===bh)break e;case rf:if(s.last){p>>>=m&7,m-=m&7,s.mode=lf;break}for(;m<3;){if(u===0)break e;u--,p+=i[l++]<<m,m+=8}switch(s.last=p&1,p>>>=1,m-=1,p&3){case 0:s.mode=I0;break;case 1:if(v5(s),s.mode=jh,a===bh){p>>>=2,m-=2;break e}break;case 2:s.mode=H0;break;case 3:t.msg="invalid block type",s.mode=cn}p>>>=2,m-=2;break;case I0:for(p>>>=m&7,m-=m&7;m<32;){if(u===0)break e;u--,p+=i[l++]<<m,m+=8}if((p&65535)!==(p>>>16^65535)){t.msg="invalid stored block lengths",s.mode=cn;break}if(s.length=p&65535,p=0,m=0,s.mode=of,a===bh)break e;case of:s.mode=P0;case P0:if(x=s.length,x){if(x>u&&(x=u),x>A&&(x=A),x===0)break e;o.set(i.subarray(l,l+x),d),u-=x,l+=x,A-=x,d+=x,s.length-=x;break}s.mode=fl;break;case H0:for(;m<14;){if(u===0)break e;u--,p+=i[l++]<<m,m+=8}if(s.nlen=(p&31)+257,p>>>=5,m-=5,s.ndist=(p&31)+1,p>>>=5,m-=5,s.ncode=(p&15)+4,p>>>=4,m-=4,s.nlen>286||s.ndist>30){t.msg="too many length or distance symbols",s.mode=cn;break}s.have=0,s.mode=M0;case M0:for(;s.have<s.ncode;){for(;m<3;){if(u===0)break e;u--,p+=i[l++]<<m,m+=8}s.lens[Q[s.have++]]=p&7,p>>>=3,m-=3}for(;s.have<19;)s.lens[Q[s.have++]]=0;if(s.lencode=s.lendyn,s.lenbits=7,Y={bits:s.lenbits},U=$A(c5,s.lens,0,19,s.lencode,0,s.work,Y),s.lenbits=Y.bits,U){t.msg="invalid code lengths set",s.mode=cn;break}s.have=0,s.mode=O0;case O0:for(;s.have<s.nlen+s.ndist;){for(;S=s.lencode[p&(1<<s.lenbits)-1],_=S>>>24,N=S>>>16&255,O=S&65535,!(_<=m);){if(u===0)break e;u--,p+=i[l++]<<m,m+=8}if(O<16)p>>>=_,m-=_,s.lens[s.have++]=O;else{if(O===16){for(T=_+2;m<T;){if(u===0)break e;u--,p+=i[l++]<<m,m+=8}if(p>>>=_,m-=_,s.have===0){t.msg="invalid bit length repeat",s.mode=cn;break}X=s.lens[s.have-1],x=3+(p&3),p>>>=2,m-=2}else if(O===17){for(T=_+3;m<T;){if(u===0)break e;u--,p+=i[l++]<<m,m+=8}p>>>=_,m-=_,X=0,x=3+(p&7),p>>>=3,m-=3}else{for(T=_+7;m<T;){if(u===0)break e;u--,p+=i[l++]<<m,m+=8}p>>>=_,m-=_,X=0,x=11+(p&127),p>>>=7,m-=7}if(s.have+x>s.nlen+s.ndist){t.msg="invalid bit length repeat",s.mode=cn;break}for(;x--;)s.lens[s.have++]=X}}if(s.mode===cn)break;if(s.lens[256]===0){t.msg="invalid code -- missing end-of-block",s.mode=cn;break}if(s.lenbits=9,Y={bits:s.lenbits},U=$A(g1,s.lens,0,s.nlen,s.lencode,0,s.work,Y),s.lenbits=Y.bits,U){t.msg="invalid literal/lengths set",s.mode=cn;break}if(s.distbits=6,s.distcode=s.distdyn,Y={bits:s.distbits},U=$A(x1,s.lens,s.nlen,s.ndist,s.distcode,0,s.work,Y),s.distbits=Y.bits,U){t.msg="invalid distances set",s.mode=cn;break}if(s.mode=jh,a===bh)break e;case jh:s.mode=wh;case wh:if(u>=6&&A>=258){t.next_out=d,t.avail_out=A,t.next_in=l,t.avail_in=u,s.hold=p,s.bits=m,s5(t,v),d=t.next_out,o=t.output,A=t.avail_out,l=t.next_in,i=t.input,u=t.avail_in,p=s.hold,m=s.bits,s.mode===fl&&(s.back=-1);break}for(s.back=0;S=s.lencode[p&(1<<s.lenbits)-1],_=S>>>24,N=S>>>16&255,O=S&65535,!(_<=m);){if(u===0)break e;u--,p+=i[l++]<<m,m+=8}if(N&&(N&240)===0){for(L=_,te=N,G=O;S=s.lencode[G+((p&(1<<L+te)-1)>>L)],_=S>>>24,N=S>>>16&255,O=S&65535,!(L+_<=m);){if(u===0)break e;u--,p+=i[l++]<<m,m+=8}p>>>=L,m-=L,s.back+=L}if(p>>>=_,m-=_,s.back+=_,s.length=O,N===0){s.mode=V0;break}if(N&32){s.back=-1,s.mode=fl;break}if(N&64){t.msg="invalid literal/length code",s.mode=cn;break}s.extra=N&15,s.mode=z0;case z0:if(s.extra){for(T=s.extra;m<T;){if(u===0)break e;u--,p+=i[l++]<<m,m+=8}s.length+=p&(1<<s.extra)-1,p>>>=s.extra,m-=s.extra,s.back+=s.extra}s.was=s.length,s.mode=q0;case q0:for(;S=s.distcode[p&(1<<s.distbits)-1],_=S>>>24,N=S>>>16&255,O=S&65535,!(_<=m);){if(u===0)break e;u--,p+=i[l++]<<m,m+=8}if((N&240)===0){for(L=_,te=N,G=O;S=s.distcode[G+((p&(1<<L+te)-1)>>L)],_=S>>>24,N=S>>>16&255,O=S&65535,!(L+_<=m);){if(u===0)break e;u--,p+=i[l++]<<m,m+=8}p>>>=L,m-=L,s.back+=L}if(p>>>=_,m-=_,s.back+=_,N&64){t.msg="invalid distance code",s.mode=cn;break}s.offset=O,s.extra=N&15,s.mode=K0;case K0:if(s.extra){for(T=s.extra;m<T;){if(u===0)break e;u--,p+=i[l++]<<m,m+=8}s.offset+=p&(1<<s.extra)-1,p>>>=s.extra,m-=s.extra,s.back+=s.extra}if(s.offset>s.dmax){t.msg="invalid distance too far back",s.mode=cn;break}s.mode=G0;case G0:if(A===0)break e;if(x=v-A,s.offset>x){if(x=s.offset-x,x>s.whave&&s.sane){t.msg="invalid distance too far back",s.mode=cn;break}x>s.wnext?(x-=s.wnext,C=s.wsize-x):C=s.wnext-x,x>s.length&&(x=s.length),D=s.window}else D=o,C=d-s.offset,x=s.length;x>A&&(x=A),A-=x,s.length-=x;do o[d++]=D[C++];while(--x);s.length===0&&(s.mode=wh);break;case V0:if(A===0)break e;o[d++]=s.length,A--,s.mode=wh;break;case lf:if(s.wrap){for(;m<32;){if(u===0)break e;u--,p|=i[l++]<<m,m+=8}if(v-=A,t.total_out+=v,s.total+=v,s.wrap&4&&v&&(t.adler=s.check=s.flags?Po(s.check,o,v,d-v):tg(s.check,o,v,d-v)),v=A,s.wrap&4&&(s.flags?p:Y0(p))!==s.check){t.msg="incorrect data check",s.mode=cn;break}p=0,m=0}s.mode=$0;case $0:if(s.wrap&&s.flags){for(;m<32;){if(u===0)break e;u--,p+=i[l++]<<m,m+=8}if(s.wrap&4&&p!==(s.total&4294967295)){t.msg="incorrect length check",s.mode=cn;break}p=0,m=0}s.mode=W0;case W0:U=A5;break e;case cn:U=y1;break e;case b1:return v1;case j1:default:return Jr}return t.next_out=d,t.avail_out=A,t.next_in=l,t.avail_in=u,s.hold=p,s.bits=m,(s.wsize||v!==t.avail_out&&s.mode<cn&&(s.mode<lf||a!==C0))&&C1(t,t.output,t.next_out,v-t.avail_out),b-=t.avail_in,v-=t.avail_out,t.total_in+=b,t.total_out+=v,s.total+=v,s.wrap&4&&v&&(t.adler=s.check=s.flags?Po(s.check,o,v,t.next_out-v):tg(s.check,o,v,t.next_out-v)),t.data_type=s.bits+(s.last?64:0)+(s.mode===fl?128:0)+(s.mode===jh||s.mode===of?256:0),(b===0&&v===0||a===C0)&&U===Kc&&(U=h5),U},j5=t=>{if(Vc(t))return Jr;let a=t.state;return a.window&&(a.window=null),t.state=null,Kc},w5=(t,a)=>{if(Vc(t))return Jr;const s=t.state;return(s.wrap&2)===0?Jr:(s.head=a,a.done=!1,Kc)},_5=(t,a)=>{const s=a.length;let i,o,l;return Vc(t)||(i=t.state,i.wrap!==0&&i.mode!==lp)?Jr:i.mode===lp&&(o=1,o=tg(o,a,s,0),o!==i.check)?y1:(l=C1(t,a,s,s),l?(i.mode=b1,v1):(i.havedict=1,Kc))};var N5=_1,B5=N1,C5=w1,S5=y5,k5=B1,F5=b5,E5=j5,U5=w5,L5=_5,T5="pako inflate (from Nodeca project)",yl={inflateReset:N5,inflateReset2:B5,inflateResetKeep:C5,inflateInit:S5,inflateInit2:k5,inflate:F5,inflateEnd:E5,inflateGetHeader:U5,inflateSetDictionary:L5,inflateInfo:T5};function Q5(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var R5=Q5;const S1=Object.prototype.toString,{Z_NO_FLUSH:D5,Z_FINISH:I5,Z_OK:ru,Z_STREAM_END:Af,Z_NEED_DICT:uf,Z_STREAM_ERROR:P5,Z_DATA_ERROR:X0,Z_MEM_ERROR:H5}=p1;function fu(t){this.options=m1.assign({chunkSize:1024*64,windowBits:15,to:""},t||{});const a=this.options;a.raw&&a.windowBits>=0&&a.windowBits<16&&(a.windowBits=-a.windowBits,a.windowBits===0&&(a.windowBits=-15)),a.windowBits>=0&&a.windowBits<16&&!(t&&t.windowBits)&&(a.windowBits+=32),a.windowBits>15&&a.windowBits<48&&(a.windowBits&15)===0&&(a.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new t5,this.strm.avail_out=0;let s=yl.inflateInit2(this.strm,a.windowBits);if(s!==ru)throw new Error(ag[s]);if(this.header=new R5,yl.inflateGetHeader(this.strm,this.header),a.dictionary&&(typeof a.dictionary=="string"?a.dictionary=sg.string2buf(a.dictionary):S1.call(a.dictionary)==="[object ArrayBuffer]"&&(a.dictionary=new Uint8Array(a.dictionary)),a.raw&&(s=yl.inflateSetDictionary(this.strm,a.dictionary),s!==ru)))throw new Error(ag[s])}fu.prototype.push=function(t,a){const s=this.strm,i=this.options.chunkSize,o=this.options.dictionary;let l,d,u;if(this.ended)return!1;for(a===~~a?d=a:d=a===!0?I5:D5,S1.call(t)==="[object ArrayBuffer]"?s.input=new Uint8Array(t):s.input=t,s.next_in=0,s.avail_in=s.input.length;;){for(s.avail_out===0&&(s.output=new Uint8Array(i),s.next_out=0,s.avail_out=i),l=yl.inflate(s,d),l===uf&&o&&(l=yl.inflateSetDictionary(s,o),l===ru?l=yl.inflate(s,d):l===X0&&(l=uf));s.avail_in>0&&l===Af&&s.state.wrap>0&&t[s.next_in]!==0;)yl.inflateReset(s),l=yl.inflate(s,d);switch(l){case P5:case X0:case uf:case H5:return this.onEnd(l),this.ended=!0,!1}if(u=s.avail_out,s.next_out&&(s.avail_out===0||l===Af))if(this.options.to==="string"){let A=sg.utf8border(s.output,s.next_out),p=s.next_out-A,m=sg.buf2string(s.output,A);s.next_out=p,s.avail_out=i-p,p&&s.output.set(s.output.subarray(A,A+p),0),this.onData(m)}else this.onData(s.output.length===s.next_out?s.output:s.output.subarray(0,s.next_out));if(!(l===ru&&u===0)){if(l===Af)return l=yl.inflateEnd(this.strm),this.onEnd(l),this.ended=!0,!0;if(s.avail_in===0)break}}return!0};fu.prototype.onData=function(t){this.chunks.push(t)};fu.prototype.onEnd=function(t){t===ru&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=m1.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};function M5(t,a){const s=new fu(a);if(s.push(t),s.err)throw s.msg||ag[s.err];return s.result}var O5=fu,z5=M5,q5={Inflate:O5,inflate:z5};const{Inflate:K5,inflate:G5}=q5;var Z0=K5,V5=G5;const k1=[];for(let t=0;t<256;t++){let a=t;for(let s=0;s<8;s++)a&1?a=3988292384^a>>>1:a=a>>>1;k1[t]=a}const ev=4294967295;function $5(t,a,s){let i=t;for(let o=0;o<s;o++)i=k1[(i^a[o])&255]^i>>>8;return i}function W5(t,a){return($5(ev,t,a)^ev)>>>0}function tv(t,a,s){const i=t.readUint32(),o=W5(new Uint8Array(t.buffer,t.byteOffset+t.offset-a-4,a),a);if(o!==i)throw new Error(`CRC mismatch for chunk ${s}. Expected ${i}, found ${o}`)}function F1(t,a,s){for(let i=0;i<s;i++)a[i]=t[i]}function E1(t,a,s,i){let o=0;for(;o<i;o++)a[o]=t[o];for(;o<s;o++)a[o]=t[o]+a[o-i]&255}function U1(t,a,s,i){let o=0;if(s.length===0)for(;o<i;o++)a[o]=t[o];else for(;o<i;o++)a[o]=t[o]+s[o]&255}function L1(t,a,s,i,o){let l=0;if(s.length===0){for(;l<o;l++)a[l]=t[l];for(;l<i;l++)a[l]=t[l]+(a[l-o]>>1)&255}else{for(;l<o;l++)a[l]=t[l]+(s[l]>>1)&255;for(;l<i;l++)a[l]=t[l]+(a[l-o]+s[l]>>1)&255}}function T1(t,a,s,i,o){let l=0;if(s.length===0){for(;l<o;l++)a[l]=t[l];for(;l<i;l++)a[l]=t[l]+a[l-o]&255}else{for(;l<o;l++)a[l]=t[l]+s[l]&255;for(;l<i;l++)a[l]=t[l]+Y5(a[l-o],s[l],s[l-o])&255}}function Y5(t,a,s){const i=t+a-s,o=Math.abs(i-t),l=Math.abs(i-a),d=Math.abs(i-s);return o<=l&&o<=d?t:l<=d?a:s}function J5(t,a,s,i,o,l){switch(t){case 0:F1(a,s,o);break;case 1:E1(a,s,o,l);break;case 2:U1(a,s,i,o);break;case 3:L1(a,s,i,o,l);break;case 4:T1(a,s,i,o,l);break;default:throw new Error(`Unsupported filter: ${t}`)}}const X5=new Uint16Array([255]),Z5=new Uint8Array(X5.buffer),eB=Z5[0]===255;function tB(t){const{data:a,width:s,height:i,channels:o,depth:l}=t,d=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],u=Math.ceil(l/8)*o,A=new Uint8Array(i*s*u);let p=0;for(let m=0;m<7;m++){const b=d[m],v=Math.ceil((s-b.x)/b.xStep),x=Math.ceil((i-b.y)/b.yStep);if(v<=0||x<=0)continue;const C=v*u,D=new Uint8Array(C);for(let S=0;S<x;S++){const _=a[p++],N=a.subarray(p,p+C);p+=C;const O=new Uint8Array(C);J5(_,N,O,D,C,u),D.set(O);for(let L=0;L<v;L++){const te=b.x+L*b.xStep,G=b.y+S*b.yStep;if(!(te>=s||G>=i))for(let X=0;X<u;X++)A[(G*s+te)*u+X]=O[L*u+X]}}}if(l===16){const m=new Uint16Array(A.buffer);if(eB)for(let b=0;b<m.length;b++)m[b]=aB(m[b]);return m}else return A}function aB(t){return(t&255)<<8|t>>8&255}const sB=new Uint16Array([255]),nB=new Uint8Array(sB.buffer),iB=nB[0]===255,rB=new Uint8Array(0);function av(t){const{data:a,width:s,height:i,channels:o,depth:l}=t,d=Math.ceil(l/8)*o,u=Math.ceil(l/8*o*s),A=new Uint8Array(i*u);let p=rB,m=0,b,v;for(let x=0;x<i;x++){switch(b=a.subarray(m+1,m+1+u),v=A.subarray(x*u,(x+1)*u),a[m]){case 0:F1(b,v,u);break;case 1:E1(b,v,u,d);break;case 2:U1(b,v,p,u);break;case 3:L1(b,v,p,u,d);break;case 4:T1(b,v,p,u,d);break;default:throw new Error(`Unsupported filter: ${a[m]}`)}p=v,m+=u+1}if(l===16){const x=new Uint16Array(A.buffer);if(iB)for(let C=0;C<x.length;C++)x[C]=oB(x[C]);return x}else return A}function oB(t){return(t&255)<<8|t>>8&255}const ep=Uint8Array.of(137,80,78,71,13,10,26,10);function sv(t){if(!lB(t.readBytes(ep.length)))throw new Error("wrong PNG signature")}function lB(t){if(t.length<ep.length)return!1;for(let a=0;a<ep.length;a++)if(t[a]!==ep[a])return!1;return!0}const cB="tEXt",dB=0,Q1=new TextDecoder("latin1");function AB(t){if(hB(t),t.length===0||t.length>79)throw new Error("keyword length must be between 1 and 79")}const uB=/^[\u0000-\u00FF]*$/;function hB(t){if(!uB.test(t))throw new Error("invalid latin1 text")}function pB(t,a,s){const i=R1(a);t[i]=mB(a,s-i.length-1)}function R1(t){for(t.mark();t.readByte()!==dB;);const a=t.offset;t.reset();const s=Q1.decode(t.readBytes(a-t.offset-1));return t.skip(1),AB(s),s}function mB(t,a){return Q1.decode(t.readBytes(a))}const jr={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},hf={UNKNOWN:-1,DEFLATE:0},nv={UNKNOWN:-1,ADAPTIVE:0},pf={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},_h={NONE:0,BACKGROUND:1,PREVIOUS:2},mf={SOURCE:0,OVER:1};class fB extends Kg{_checkCrc;_inflator;_png;_apng;_end;_hasPalette;_palette;_hasTransparency;_transparency;_compressionMethod;_filterMethod;_interlaceMethod;_colorType;_isAnimated;_numberOfFrames;_numberOfPlays;_frames;_writingDataChunks;constructor(a,s={}){super(a);const{checkCrc:i=!1}=s;this._checkCrc=i,this._inflator=new Z0,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=hf.UNKNOWN,this._filterMethod=nv.UNKNOWN,this._interlaceMethod=pf.UNKNOWN,this._colorType=jr.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(sv(this);!this._end;){const a=this.readUint32(),s=this.readChars(4);this.decodeChunk(a,s)}return this.decodeImage(),this._png}decodeApng(){for(sv(this);!this._end;){const a=this.readUint32(),s=this.readChars(4);this.decodeApngChunk(a,s)}return this.decodeApngImage(),this._apng}decodeChunk(a,s){const i=this.offset;switch(s){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(a);break;case"IDAT":this.decodeIDAT(a);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(a);break;case"iCCP":this.decodeiCCP(a);break;case cB:pB(this._png.text,this,a);break;case"pHYs":this.decodepHYs();break;default:this.skip(a);break}if(this.offset-i!==a)throw new Error(`Length mismatch while decoding chunk ${s}`);this._checkCrc?tv(this,a+4,s):this.skip(4)}decodeApngChunk(a,s){const i=this.offset;switch(s!=="fdAT"&&s!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),s){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(a);break;default:this.decodeChunk(a,s),this.offset=i+a;break}if(this.offset-i!==a)throw new Error(`Length mismatch while decoding chunk ${s}`);this._checkCrc?tv(this,a+4,s):this.skip(4)}decodeIHDR(){const a=this._png;a.width=this.readUint32(),a.height=this.readUint32(),a.depth=gB(this.readUint8());const s=this.readUint8();this._colorType=s;let i;switch(s){case jr.GREYSCALE:i=1;break;case jr.TRUECOLOUR:i=3;break;case jr.INDEXED_COLOUR:i=1;break;case jr.GREYSCALE_ALPHA:i=2;break;case jr.TRUECOLOUR_ALPHA:i=4;break;case jr.UNKNOWN:default:throw new Error(`Unknown color type: ${s}`)}if(this._png.channels=i,this._compressionMethod=this.readUint8(),this._compressionMethod!==hf.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const a={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(a)}decodePLTE(a){if(a%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${a}`);const s=a/3;this._hasPalette=!0;const i=[];this._palette=i;for(let o=0;o<s;o++)i.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(a){this._writingDataChunks=!0;const s=a,i=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,i,s)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(a)}decodeFDAT(a){this._writingDataChunks=!0;let s=a,i=this.offset+this.byteOffset;if(i+=4,s-=4,this._inflator.push(new Uint8Array(this.buffer,i,s)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(a)}decodetRNS(a){switch(this._colorType){case jr.GREYSCALE:case jr.TRUECOLOUR:{if(a%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${a}`);if(a/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${a/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(a/2);for(let s=0;s<a/2;s++)this._transparency[s]=this.readUint16();break}case jr.INDEXED_COLOUR:{if(a>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${a} vs ${this._palette.length})`);let s=0;for(;s<a;s++){const i=this.readByte();this._palette[s].push(i)}for(;s<this._palette.length;s++)this._palette[s].push(255);break}case jr.UNKNOWN:case jr.GREYSCALE_ALPHA:case jr.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(a){const s=R1(this),i=this.readUint8();if(i!==hf.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${i}`);const o=this.readBytes(a-s.length-2);this._png.iccEmbeddedProfile={name:s,profile:V5(o)}}decodepHYs(){const a=this.readUint32(),s=this.readUint32(),i=this.readByte();this._png.resolution={x:a,y:s,unit:i}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let a=0;a<this._numberOfFrames;a++){const s={sequenceNumber:this._frames[a].sequenceNumber,delayNumber:this._frames[a].delayNumber,delayDenominator:this._frames[a].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},i=this._frames.at(a);if(i){if(i.data=av({data:i.data,width:i.width,height:i.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),a===0||i.xOffset===0&&i.yOffset===0&&i.width===this._png.width&&i.height===this._png.height)s.data=i.data;else{const o=this._apng.frames.at(a-1);this.disposeFrame(i,o,s),this.addFrameDataToCanvas(s,i)}this._apng.frames.push(s)}}return this._apng}disposeFrame(a,s,i){switch(a.disposeOp){case _h.NONE:break;case _h.BACKGROUND:for(let o=0;o<this._png.height;o++)for(let l=0;l<this._png.width;l++){const d=(o*a.width+l)*this._png.channels;for(let u=0;u<this._png.channels;u++)i.data[d+u]=0}break;case _h.PREVIOUS:i.data.set(s.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(a,s){const i=1<<this._png.depth,o=(l,d)=>{const u=((l+s.yOffset)*this._png.width+s.xOffset+d)*this._png.channels,A=(l*s.width+d)*this._png.channels;return{index:u,frameIndex:A}};switch(s.blendOp){case mf.SOURCE:for(let l=0;l<s.height;l++)for(let d=0;d<s.width;d++){const{index:u,frameIndex:A}=o(l,d);for(let p=0;p<this._png.channels;p++)a.data[u+p]=s.data[A+p]}break;case mf.OVER:for(let l=0;l<s.height;l++)for(let d=0;d<s.width;d++){const{index:u,frameIndex:A}=o(l,d);for(let p=0;p<this._png.channels;p++){const m=s.data[A+this._png.channels-1]/i,b=p%(this._png.channels-1)===0?1:s.data[A+p],v=Math.floor(m*b+(1-m)*a.data[u+p]);a.data[u+p]+=v}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const a=this._isAnimated?(this._frames?.at(0)).data:this._inflator.result;if(this._filterMethod!==nv.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===pf.NO_INTERLACE)this._png.data=av({data:a,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===pf.ADAM7)this._png.data=tB({data:a,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const a=this._inflator.result,s=this._frames.at(-1);s?s.data=a:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:_h.NONE,blendOp:mf.SOURCE,data:a}),this._inflator=new Z0,this._writingDataChunks=!1}}function gB(t){if(t!==1&&t!==2&&t!==4&&t!==8&&t!==16)throw new Error(`invalid bit depth: ${t}`);return t}var iv;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.METRE=1]="METRE"})(iv||(iv={}));function xB(t,a){return new fB(t,a).decode()}var Ia=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function ff(){Ia.console&&typeof Ia.console.log=="function"&&Ia.console.log.apply(Ia.console,arguments)}var qs={log:ff,warn:function(t){Ia.console&&(typeof Ia.console.warn=="function"?Ia.console.warn.apply(Ia.console,arguments):ff.call(null,arguments))},error:function(t){Ia.console&&(typeof Ia.console.error=="function"?Ia.console.error.apply(Ia.console,arguments):ff(t))}};function gf(t,a,s){var i=new XMLHttpRequest;i.open("GET",t),i.responseType="blob",i.onload=function(){Tc(i.response,a,s)},i.onerror=function(){qs.error("could not download file")},i.send()}function rv(t){var a=new XMLHttpRequest;a.open("HEAD",t,!1);try{a.send()}catch{}return a.status>=200&&a.status<=299}function Nh(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{var a=document.createEvent("MouseEvents");a.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(a)}}var Tc=Ia.saveAs||((typeof window>"u"?"undefined":Ls(window))!=="object"||window!==Ia?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(t,a,s){var i=Ia.URL||Ia.webkitURL,o=document.createElement("a");a=a||t.name||"download",o.download=a,o.rel="noopener",typeof t=="string"?(o.href=t,o.origin!==location.origin?rv(o.href)?gf(t,a,s):Nh(o,o.target="_blank"):Nh(o)):(o.href=i.createObjectURL(t),setTimeout(function(){i.revokeObjectURL(o.href)},4e4),setTimeout(function(){Nh(o)},0))}:"msSaveOrOpenBlob"in navigator?function(t,a,s){if(a=a||t.name||"download",typeof t=="string")if(rv(t))gf(t,a,s);else{var i=document.createElement("a");i.href=t,i.target="_blank",setTimeout(function(){Nh(i)})}else navigator.msSaveOrOpenBlob(function(o,l){return l===void 0?l={autoBom:!1}:Ls(l)!=="object"&&(qs.warn("Deprecated: Expected third argument to be a object"),l={autoBom:!l}),l.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(o.type)?new Blob(["\uFEFF",o],{type:o.type}):o}(t,s),a)}:function(t,a,s,i){if((i=i||open("","_blank"))&&(i.document.title=i.document.body.innerText="downloading..."),typeof t=="string")return gf(t,a,s);var o=t.type==="application/octet-stream",l=/constructor/i.test(Ia.HTMLElement)||Ia.safari,d=/CriOS\/[\d]+/.test(navigator.userAgent);if((d||o&&l)&&(typeof FileReader>"u"?"undefined":Ls(FileReader))==="object"){var u=new FileReader;u.onloadend=function(){var m=u.result;m=d?m:m.replace(/^data:[^;]*;/,"data:attachment/file;"),i?i.location.href=m:location=m,i=null},u.readAsDataURL(t)}else{var A=Ia.URL||Ia.webkitURL,p=A.createObjectURL(t);i?i.location=p:location.href=p,i=null,setTimeout(function(){A.revokeObjectURL(p)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function D1(t){var a;t=t||"",this.ok=!1,t.charAt(0)=="#"&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var s=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(u){return[parseInt(u[1]),parseInt(u[2]),parseInt(u[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(u){return[parseInt(u[1],16),parseInt(u[2],16),parseInt(u[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(u){return[parseInt(u[1]+u[1],16),parseInt(u[2]+u[2],16),parseInt(u[3]+u[3],16)]}}],i=0;i<s.length;i++){var o=s[i].re,l=s[i].process,d=o.exec(t);d&&(a=l(d),this.r=a[0],this.g=a[1],this.b=a[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var u=this.r.toString(16),A=this.g.toString(16),p=this.b.toString(16);return u.length==1&&(u="0"+u),A.length==1&&(A="0"+A),p.length==1&&(p="0"+p),"#"+u+A+p}}var tp=Ia.atob.bind(Ia),ov=Ia.btoa.bind(Ia);/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function xf(t,a){var s=t[0],i=t[1],o=t[2],l=t[3];s=Fi(s,i,o,l,a[0],7,-680876936),l=Fi(l,s,i,o,a[1],12,-389564586),o=Fi(o,l,s,i,a[2],17,606105819),i=Fi(i,o,l,s,a[3],22,-1044525330),s=Fi(s,i,o,l,a[4],7,-176418897),l=Fi(l,s,i,o,a[5],12,1200080426),o=Fi(o,l,s,i,a[6],17,-1473231341),i=Fi(i,o,l,s,a[7],22,-45705983),s=Fi(s,i,o,l,a[8],7,1770035416),l=Fi(l,s,i,o,a[9],12,-1958414417),o=Fi(o,l,s,i,a[10],17,-42063),i=Fi(i,o,l,s,a[11],22,-1990404162),s=Fi(s,i,o,l,a[12],7,1804603682),l=Fi(l,s,i,o,a[13],12,-40341101),o=Fi(o,l,s,i,a[14],17,-1502002290),s=Ei(s,i=Fi(i,o,l,s,a[15],22,1236535329),o,l,a[1],5,-165796510),l=Ei(l,s,i,o,a[6],9,-1069501632),o=Ei(o,l,s,i,a[11],14,643717713),i=Ei(i,o,l,s,a[0],20,-373897302),s=Ei(s,i,o,l,a[5],5,-701558691),l=Ei(l,s,i,o,a[10],9,38016083),o=Ei(o,l,s,i,a[15],14,-660478335),i=Ei(i,o,l,s,a[4],20,-405537848),s=Ei(s,i,o,l,a[9],5,568446438),l=Ei(l,s,i,o,a[14],9,-1019803690),o=Ei(o,l,s,i,a[3],14,-187363961),i=Ei(i,o,l,s,a[8],20,1163531501),s=Ei(s,i,o,l,a[13],5,-1444681467),l=Ei(l,s,i,o,a[2],9,-51403784),o=Ei(o,l,s,i,a[7],14,1735328473),s=Ui(s,i=Ei(i,o,l,s,a[12],20,-1926607734),o,l,a[5],4,-378558),l=Ui(l,s,i,o,a[8],11,-2022574463),o=Ui(o,l,s,i,a[11],16,1839030562),i=Ui(i,o,l,s,a[14],23,-35309556),s=Ui(s,i,o,l,a[1],4,-1530992060),l=Ui(l,s,i,o,a[4],11,1272893353),o=Ui(o,l,s,i,a[7],16,-155497632),i=Ui(i,o,l,s,a[10],23,-1094730640),s=Ui(s,i,o,l,a[13],4,681279174),l=Ui(l,s,i,o,a[0],11,-358537222),o=Ui(o,l,s,i,a[3],16,-722521979),i=Ui(i,o,l,s,a[6],23,76029189),s=Ui(s,i,o,l,a[9],4,-640364487),l=Ui(l,s,i,o,a[12],11,-421815835),o=Ui(o,l,s,i,a[15],16,530742520),s=Li(s,i=Ui(i,o,l,s,a[2],23,-995338651),o,l,a[0],6,-198630844),l=Li(l,s,i,o,a[7],10,1126891415),o=Li(o,l,s,i,a[14],15,-1416354905),i=Li(i,o,l,s,a[5],21,-57434055),s=Li(s,i,o,l,a[12],6,1700485571),l=Li(l,s,i,o,a[3],10,-1894986606),o=Li(o,l,s,i,a[10],15,-1051523),i=Li(i,o,l,s,a[1],21,-2054922799),s=Li(s,i,o,l,a[8],6,1873313359),l=Li(l,s,i,o,a[15],10,-30611744),o=Li(o,l,s,i,a[6],15,-1560198380),i=Li(i,o,l,s,a[13],21,1309151649),s=Li(s,i,o,l,a[4],6,-145523070),l=Li(l,s,i,o,a[11],10,-1120210379),o=Li(o,l,s,i,a[2],15,718787259),i=Li(i,o,l,s,a[9],21,-343485551),t[0]=nc(s,t[0]),t[1]=nc(i,t[1]),t[2]=nc(o,t[2]),t[3]=nc(l,t[3])}function Sp(t,a,s,i,o,l){return a=nc(nc(a,t),nc(i,l)),nc(a<<o|a>>>32-o,s)}function Fi(t,a,s,i,o,l,d){return Sp(a&s|~a&i,t,a,o,l,d)}function Ei(t,a,s,i,o,l,d){return Sp(a&i|s&~i,t,a,o,l,d)}function Ui(t,a,s,i,o,l,d){return Sp(a^s^i,t,a,o,l,d)}function Li(t,a,s,i,o,l,d){return Sp(s^(a|~i),t,a,o,l,d)}function I1(t){var a,s=t.length,i=[1732584193,-271733879,-1732584194,271733878];for(a=64;a<=t.length;a+=64)xf(i,yB(t.substring(a-64,a)));t=t.substring(a-64);var o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(a=0;a<t.length;a++)o[a>>2]|=t.charCodeAt(a)<<(a%4<<3);if(o[a>>2]|=128<<(a%4<<3),a>55)for(xf(i,o),a=0;a<16;a++)o[a]=0;return o[14]=8*s,xf(i,o),i}function yB(t){var a,s=[];for(a=0;a<64;a+=4)s[a>>2]=t.charCodeAt(a)+(t.charCodeAt(a+1)<<8)+(t.charCodeAt(a+2)<<16)+(t.charCodeAt(a+3)<<24);return s}var lv="0123456789abcdef".split("");function vB(t){for(var a="",s=0;s<4;s++)a+=lv[t>>8*s+4&15]+lv[t>>8*s&15];return a}function bB(t){return String.fromCharCode(255&t,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function ng(t){return I1(t).map(bB).join("")}var jB=function(t){for(var a=0;a<t.length;a++)t[a]=vB(t[a]);return t.join("")}(I1("hello"))!="5d41402abc4b2a76b9719d911017c592";function nc(t,a){if(jB){var s=(65535&t)+(65535&a);return(t>>16)+(a>>16)+(s>>16)<<16|65535&s}return t+a&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function ig(t,a){var s,i,o,l;if(t!==s){for(var d=(o=t,l=1+(256/t.length|0),new Array(l+1).join(o)),u=[],A=0;A<256;A++)u[A]=A;var p=0;for(A=0;A<256;A++){var m=u[A];p=(p+m+d.charCodeAt(A))%256,u[A]=u[p],u[p]=m}s=t,i=u}else u=i;var b=a.length,v=0,x=0,C="";for(A=0;A<b;A++)x=(x+(m=u[v=(v+1)%256]))%256,u[v]=u[x],u[x]=m,d=u[(u[v]+u[x])%256],C+=String.fromCharCode(a.charCodeAt(A)^d);return C}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var cv={print:4,modify:8,copy:16,"annot-forms":32};function Td(t,a,s,i){this.v=1,this.r=2;var o=192;t.forEach(function(u){if(cv.perm!==void 0)throw new Error("Invalid permission: "+u);o+=cv[u]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var l=(a+this.padding).substr(0,32),d=(s+this.padding).substr(0,32);this.O=this.processOwnerPassword(l,d),this.P=-(1+(255^o)),this.encryptionKey=ng(l+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(i)).substr(0,5),this.U=ig(this.encryptionKey,this.padding)}function Qd(t){if(/[^\u0000-\u00ff]/.test(t))throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var a="",s=t.length,i=0;i<s;i++){var o=t.charCodeAt(i);a+=o<33||o===35||o===37||o===40||o===41||o===47||o===60||o===62||o===91||o===93||o===123||o===125||o>126?"#"+("0"+o.toString(16)).slice(-2):t[i]}return a}function dv(t){if(Ls(t)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var a={};this.subscribe=function(s,i,o){if(o=o||!1,typeof s!="string"||typeof i!="function"||typeof o!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");a.hasOwnProperty(s)||(a[s]={});var l=Math.random().toString(35);return a[s][l]=[i,!!o],l},this.unsubscribe=function(s){for(var i in a)if(a[i][s])return delete a[i][s],Object.keys(a[i]).length===0&&delete a[i],!0;return!1},this.publish=function(s){if(a.hasOwnProperty(s)){var i=Array.prototype.slice.call(arguments,1),o=[];for(var l in a[s]){var d=a[s][l];try{d[0].apply(t,i)}catch(u){Ia.console&&qs.error("jsPDF PubSub Error",u.message,u)}d[1]&&o.push(l)}o.length&&o.forEach(this.unsubscribe)}},this.getTopics=function(){return a}}function ou(t){if(!(this instanceof ou))return new ou(t);var a="opacity,stroke-opacity".split(",");for(var s in t)t.hasOwnProperty(s)&&a.indexOf(s)>=0&&(this[s]=t[s]);this.id="",this.objectNumber=-1}function P1(t,a){this.gState=t,this.matrix=a,this.id="",this.objectNumber=-1}function sc(t,a,s,i,o){if(!(this instanceof sc))return new sc(t,a,s,i,o);this.type=t==="axial"?2:3,this.coords=a,this.colors=s,P1.call(this,i,o)}function Rc(t,a,s,i,o){if(!(this instanceof Rc))return new Rc(t,a,s,i,o);this.boundingBox=t,this.xStep=a,this.yStep=s,this.stream="",this.cloneIndex=0,P1.call(this,i,o)}function ua(t){var a,s=typeof arguments[0]=="string"?arguments[0]:"p",i=arguments[1],o=arguments[2],l=arguments[3],d=[],u=1,A=16,p="S",m=null;Ls(t=t||{})==="object"&&(s=t.orientation,i=t.unit||i,o=t.format||o,l=t.compress||t.compressPdf||l,(m=t.encryption||null)!==null&&(m.userPassword=m.userPassword||"",m.ownerPassword=m.ownerPassword||"",m.userPermissions=m.userPermissions||[]),u=typeof t.userUnit=="number"?Math.abs(t.userUnit):1,t.precision!==void 0&&(a=t.precision),t.floatPrecision!==void 0&&(A=t.floatPrecision),p=t.defaultPathOperation||"S"),d=t.filters||(l===!0?["FlateEncode"]:d),i=i||"mm",s=(""+(s||"P")).toLowerCase();var b=t.putOnlyUsedFonts||!1,v={},x={internal:{},__private__:{}};x.__private__.PubSub=dv;var C="1.3",D=x.__private__.getPdfVersion=function(){return C};x.__private__.setPdfVersion=function(B){C=B};var S={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};x.__private__.getPageFormats=function(){return S};var _=x.__private__.getPageFormat=function(B){return S[B]};o=o||"a4";var N="compat",O="advanced",L=N;function te(){this.saveGraphicsState(),_e(new Qt(qt,0,0,-qt,0,ao()*qt).toString()+" cm"),this.setFontSize(this.getFontSize()/qt),p="n",L=O}function G(){this.restoreGraphicsState(),p="S",L=N}var X=x.__private__.combineFontStyleAndFontWeight=function(B,ae){if(B=="bold"&&ae=="normal"||B=="bold"&&ae==400||B=="normal"&&ae=="italic"||B=="bold"&&ae=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return ae&&(B=ae==400||ae==="normal"?B==="italic"?"italic":"normal":ae!=700&&ae!=="bold"||B!=="normal"?(ae==700?"bold":ae)+""+B:"bold"),B};x.advancedAPI=function(B){var ae=L===N;return ae&&te.call(this),typeof B!="function"||(B(this),ae&&G.call(this)),this},x.compatAPI=function(B){var ae=L===O;return ae&&G.call(this),typeof B!="function"||(B(this),ae&&te.call(this)),this},x.isAdvancedAPI=function(){return L===O};var U,E=function(B){if(L!==O)throw new Error(B+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},Y=x.roundToPrecision=x.__private__.roundToPrecision=function(B,ae){var je=a||ae;if(isNaN(B)||isNaN(je))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return B.toFixed(je).replace(/0+$/,"")};U=x.hpf=x.__private__.hpf=typeof A=="number"?function(B){if(isNaN(B))throw new Error("Invalid argument passed to jsPDF.hpf");return Y(B,A)}:A==="smart"?function(B){if(isNaN(B))throw new Error("Invalid argument passed to jsPDF.hpf");return Y(B,B>-1&&B<1?16:5)}:function(B){if(isNaN(B))throw new Error("Invalid argument passed to jsPDF.hpf");return Y(B,16)};var T=x.f2=x.__private__.f2=function(B){if(isNaN(B))throw new Error("Invalid argument passed to jsPDF.f2");return Y(B,2)},Q=x.__private__.f3=function(B){if(isNaN(B))throw new Error("Invalid argument passed to jsPDF.f3");return Y(B,3)},q=x.scale=x.__private__.scale=function(B){if(isNaN(B))throw new Error("Invalid argument passed to jsPDF.scale");return L===N?B*qt:L===O?B:void 0},ne=function(B){return q(function(ae){return L===N?ao()-ae:L===O?ae:void 0}(B))};x.__private__.setPrecision=x.setPrecision=function(B){typeof parseInt(B,10)=="number"&&(a=parseInt(B,10))};var R,z="00000000000000000000000000000000",ee=x.__private__.getFileId=function(){return z},le=x.__private__.setFileId=function(B){return z=B!==void 0&&/^[a-fA-F0-9]{32}$/.test(B)?B.toUpperCase():z.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),m!==null&&($a=new Td(m.userPermissions,m.userPassword,m.ownerPassword,z)),z};x.setFileId=function(B){return le(B),this},x.getFileId=function(){return ee()};var Be=x.__private__.convertDateToPDFDate=function(B){var ae=B.getTimezoneOffset(),je=ae<0?"+":"-",Fe=Math.floor(Math.abs(ae/60)),De=Math.abs(ae%60),ct=[je,H(Fe),"'",H(De),"'"].join("");return["D:",B.getFullYear(),H(B.getMonth()+1),H(B.getDate()),H(B.getHours()),H(B.getMinutes()),H(B.getSeconds()),ct].join("")},$=x.__private__.convertPDFDateToDate=function(B){var ae=parseInt(B.substr(2,4),10),je=parseInt(B.substr(6,2),10)-1,Fe=parseInt(B.substr(8,2),10),De=parseInt(B.substr(10,2),10),ct=parseInt(B.substr(12,2),10),bt=parseInt(B.substr(14,2),10);return new Date(ae,je,Fe,De,ct,bt,0)},ue=x.__private__.setCreationDate=function(B){var ae;if(B===void 0&&(B=new Date),B instanceof Date)ae=Be(B);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(B))throw new Error("Invalid argument passed to jsPDF.setCreationDate");ae=B}return R=ae},k=x.__private__.getCreationDate=function(B){var ae=R;return B==="jsDate"&&(ae=$(R)),ae};x.setCreationDate=function(B){return ue(B),this},x.getCreationDate=function(B){return k(B)};var I,H=x.__private__.padd2=function(B){return("0"+parseInt(B)).slice(-2)},re=x.__private__.padd2Hex=function(B){return("00"+(B=B.toString())).substr(B.length)},J=0,V=[],oe=[],K=0,Ne=[],Ee=[],st=!1,ut=oe;x.__private__.setCustomOutputDestination=function(B){st=!0,ut=B};var Ge=function(B){st||(ut=B)};x.__private__.resetCustomOutputDestination=function(){st=!1,ut=oe};var _e=x.__private__.out=function(B){return B=B.toString(),K+=B.length+1,ut.push(B),ut},Et=x.__private__.write=function(B){return _e(arguments.length===1?B.toString():Array.prototype.join.call(arguments," "))},Mt=x.__private__.getArrayBuffer=function(B){for(var ae=B.length,je=new ArrayBuffer(ae),Fe=new Uint8Array(je);ae--;)Fe[ae]=B.charCodeAt(ae);return je},Ze=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];x.__private__.getStandardFonts=function(){return Ze};var Je=t.fontSize||16;x.__private__.setFontSize=x.setFontSize=function(B){return Je=L===O?B/qt:B,this};var mt,ve=x.__private__.getFontSize=x.getFontSize=function(){return L===N?Je:Je*qt},et=t.R2L||!1;x.__private__.setR2L=x.setR2L=function(B){return et=B,this},x.__private__.getR2L=x.getR2L=function(){return et};var Oe,kt=x.__private__.setZoomMode=function(B){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(B))mt=B;else if(isNaN(B)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(B)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+B+'" is not recognized.');mt=B}else mt=parseInt(B,10)};x.__private__.getZoomMode=function(){return mt};var xt,lt=x.__private__.setPageMode=function(B){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(B)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+B+'" is not recognized.');Oe=B};x.__private__.getPageMode=function(){return Oe};var Ut=x.__private__.setLayoutMode=function(B){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(B)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+B+'" is not recognized.');xt=B};x.__private__.getLayoutMode=function(){return xt},x.__private__.setDisplayMode=x.setDisplayMode=function(B,ae,je){return kt(B),Ut(ae),lt(je),this};var _t={title:"",subject:"",author:"",keywords:"",creator:""};x.__private__.getDocumentProperty=function(B){if(Object.keys(_t).indexOf(B)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return _t[B]},x.__private__.getDocumentProperties=function(){return _t},x.__private__.setDocumentProperties=x.setProperties=x.setDocumentProperties=function(B){for(var ae in _t)_t.hasOwnProperty(ae)&&B[ae]&&(_t[ae]=B[ae]);return this},x.__private__.setDocumentProperty=function(B,ae){if(Object.keys(_t).indexOf(B)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return _t[B]=ae};var Nt,qt,Bt,Xt,ta,ie={},at={},Ot=[],Ct={},ia={},ca={},Za={},os=null,Ba=0,xa=[],Dt=new dv(x),ye=t.hotfixes||[],Ce={},Ve={},gt=[],Qt=function B(ae,je,Fe,De,ct,bt){if(!(this instanceof B))return new B(ae,je,Fe,De,ct,bt);isNaN(ae)&&(ae=1),isNaN(je)&&(je=0),isNaN(Fe)&&(Fe=0),isNaN(De)&&(De=1),isNaN(ct)&&(ct=0),isNaN(bt)&&(bt=0),this._matrix=[ae,je,Fe,De,ct,bt]};Object.defineProperty(Qt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(B){this._matrix[0]=B}}),Object.defineProperty(Qt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(B){this._matrix[1]=B}}),Object.defineProperty(Qt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(B){this._matrix[2]=B}}),Object.defineProperty(Qt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(B){this._matrix[3]=B}}),Object.defineProperty(Qt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(B){this._matrix[4]=B}}),Object.defineProperty(Qt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(B){this._matrix[5]=B}}),Object.defineProperty(Qt.prototype,"a",{get:function(){return this._matrix[0]},set:function(B){this._matrix[0]=B}}),Object.defineProperty(Qt.prototype,"b",{get:function(){return this._matrix[1]},set:function(B){this._matrix[1]=B}}),Object.defineProperty(Qt.prototype,"c",{get:function(){return this._matrix[2]},set:function(B){this._matrix[2]=B}}),Object.defineProperty(Qt.prototype,"d",{get:function(){return this._matrix[3]},set:function(B){this._matrix[3]=B}}),Object.defineProperty(Qt.prototype,"e",{get:function(){return this._matrix[4]},set:function(B){this._matrix[4]=B}}),Object.defineProperty(Qt.prototype,"f",{get:function(){return this._matrix[5]},set:function(B){this._matrix[5]=B}}),Object.defineProperty(Qt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Qt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Qt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Qt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Qt.prototype.join=function(B){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(U).join(B)},Qt.prototype.multiply=function(B){var ae=B.sx*this.sx+B.shy*this.shx,je=B.sx*this.shy+B.shy*this.sy,Fe=B.shx*this.sx+B.sy*this.shx,De=B.shx*this.shy+B.sy*this.sy,ct=B.tx*this.sx+B.ty*this.shx+this.tx,bt=B.tx*this.shy+B.ty*this.sy+this.ty;return new Qt(ae,je,Fe,De,ct,bt)},Qt.prototype.decompose=function(){var B=this.sx,ae=this.shy,je=this.shx,Fe=this.sy,De=this.tx,ct=this.ty,bt=Math.sqrt(B*B+ae*ae),na=(B/=bt)*je+(ae/=bt)*Fe;je-=B*na,Fe-=ae*na;var fa=Math.sqrt(je*je+Fe*Fe);return na/=fa,B*(Fe/=fa)<ae*(je/=fa)&&(B=-B,ae=-ae,na=-na,bt=-bt),{scale:new Qt(bt,0,0,fa,0,0),translate:new Qt(1,0,0,1,De,ct),rotate:new Qt(B,ae,-ae,B,0,0),skew:new Qt(1,0,na,1,0,0)}},Qt.prototype.toString=function(B){return this.join(" ")},Qt.prototype.inversed=function(){var B=this.sx,ae=this.shy,je=this.shx,Fe=this.sy,De=this.tx,ct=this.ty,bt=1/(B*Fe-ae*je),na=Fe*bt,fa=-ae*bt,Fa=-je*bt,Ea=B*bt;return new Qt(na,fa,Fa,Ea,-na*De-Fa*ct,-fa*De-Ea*ct)},Qt.prototype.applyToPoint=function(B){var ae=B.x*this.sx+B.y*this.shx+this.tx,je=B.x*this.shy+B.y*this.sy+this.ty;return new Zr(ae,je)},Qt.prototype.applyToRectangle=function(B){var ae=this.applyToPoint(B),je=this.applyToPoint(new Zr(B.x+B.w,B.y+B.h));return new Sr(ae.x,ae.y,je.x-ae.x,je.y-ae.y)},Qt.prototype.clone=function(){var B=this.sx,ae=this.shy,je=this.shx,Fe=this.sy,De=this.tx,ct=this.ty;return new Qt(B,ae,je,Fe,De,ct)},x.Matrix=Qt;var ja=x.matrixMult=function(B,ae){return ae.multiply(B)},va=new Qt(1,0,0,1,0,0);x.unitMatrix=x.identityMatrix=va;var _a=function(B,ae){if(!ia[B]){var je=(ae instanceof sc?"Sh":"P")+(Object.keys(Ct).length+1).toString(10);ae.id=je,ia[B]=je,Ct[je]=ae,Dt.publish("addPattern",ae)}};x.ShadingPattern=sc,x.TilingPattern=Rc,x.addShadingPattern=function(B,ae){return E("addShadingPattern()"),_a(B,ae),this},x.beginTilingPattern=function(B){E("beginTilingPattern()"),As(B.boundingBox[0],B.boundingBox[1],B.boundingBox[2]-B.boundingBox[0],B.boundingBox[3]-B.boundingBox[1],B.matrix)},x.endTilingPattern=function(B,ae){E("endTilingPattern()"),ae.stream=Ee[I].join(`
`),_a(B,ae),Dt.publish("endTilingPattern",ae),gt.pop().restore()};var Na,Pa=x.__private__.newObject=function(){var B=ls();return cs(B,!0),B},ls=x.__private__.newObjectDeferred=function(){return J++,V[J]=function(){return K},J},cs=function(B,ae){return ae=typeof ae=="boolean"&&ae,V[B]=K,ae&&_e(B+" 0 obj"),B},Gs=x.__private__.newAdditionalObject=function(){var B={objId:ls(),content:""};return Ne.push(B),B},yn=ls(),ge=ls(),it=x.__private__.decodeColorString=function(B){var ae=B.split(" ");if(ae.length!==2||ae[1]!=="g"&&ae[1]!=="G")ae.length!==5||ae[4]!=="k"&&ae[4]!=="K"||(ae=[(1-ae[0])*(1-ae[3]),(1-ae[1])*(1-ae[3]),(1-ae[2])*(1-ae[3]),"r"]);else{var je=parseFloat(ae[0]);ae=[je,je,je,"r"]}for(var Fe="#",De=0;De<3;De++)Fe+=("0"+Math.floor(255*parseFloat(ae[De])).toString(16)).slice(-2);return Fe},$e=x.__private__.encodeColorString=function(B){var ae;typeof B=="string"&&(B={ch1:B});var je=B.ch1,Fe=B.ch2,De=B.ch3,ct=B.ch4,bt=B.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof je=="string"&&je.charAt(0)!=="#"){var na=new D1(je);if(na.ok)je=na.toHex();else if(!/^\d*\.?\d*$/.test(je))throw new Error('Invalid color "'+je+'" passed to jsPDF.encodeColorString.')}if(typeof je=="string"&&/^#[0-9A-Fa-f]{3}$/.test(je)&&(je="#"+je[1]+je[1]+je[2]+je[2]+je[3]+je[3]),typeof je=="string"&&/^#[0-9A-Fa-f]{6}$/.test(je)){var fa=parseInt(je.substr(1),16);je=fa>>16&255,Fe=fa>>8&255,De=255&fa}if(Fe===void 0||ct===void 0&&je===Fe&&Fe===De)ae=typeof je=="string"?je+" "+bt[0]:B.precision===2?T(je/255)+" "+bt[0]:Q(je/255)+" "+bt[0];else if(ct===void 0||Ls(ct)==="object"){if(ct&&!isNaN(ct.a)&&ct.a===0)return["1.","1.","1.",bt[1]].join(" ");ae=typeof je=="string"?[je,Fe,De,bt[1]].join(" "):B.precision===2?[T(je/255),T(Fe/255),T(De/255),bt[1]].join(" "):[Q(je/255),Q(Fe/255),Q(De/255),bt[1]].join(" ")}else ae=typeof je=="string"?[je,Fe,De,ct,bt[2]].join(" "):B.precision===2?[T(je),T(Fe),T(De),T(ct),bt[2]].join(" "):[Q(je),Q(Fe),Q(De),Q(ct),bt[2]].join(" ");return ae},zt=x.__private__.getFilters=function(){return d},St=x.__private__.putStream=function(B){var ae=(B=B||{}).data||"",je=B.filters||zt(),Fe=B.alreadyAppliedFilters||[],De=B.addLength1||!1,ct=ae.length,bt=B.objectId,na=function(pn){return pn};if(m!==null&&bt===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");m!==null&&(na=$a.encryptor(bt,0));var fa={};je===!0&&(je=["FlateEncode"]);var Fa=B.additionalKeyValues||[],Ea=(fa=ua.API.processDataByFilters!==void 0?ua.API.processDataByFilters(ae,je):{data:ae,reverseChain:[]}).reverseChain+(Array.isArray(Fe)?Fe.join(" "):Fe.toString());if(fa.data.length!==0&&(Fa.push({key:"Length",value:fa.data.length}),De===!0&&Fa.push({key:"Length1",value:ct})),Ea.length!=0)if(Ea.split("/").length-1==1)Fa.push({key:"Filter",value:Ea});else{Fa.push({key:"Filter",value:"["+Ea+"]"});for(var ss=0;ss<Fa.length;ss+=1)if(Fa[ss].key==="DecodeParms"){for(var Ps=[],Xs=0;Xs<fa.reverseChain.split("/").length-1;Xs+=1)Ps.push("null");Ps.push(Fa[ss].value),Fa[ss].value="["+Ps.join(" ")+"]"}}_e("<<");for(var ys=0;ys<Fa.length;ys++)_e("/"+Fa[ys].key+" "+Fa[ys].value);_e(">>"),fa.data.length!==0&&(_e("stream"),_e(na(fa.data)),_e("endstream"))},yt=x.__private__.putPage=function(B){var ae=B.number,je=B.data,Fe=B.objId,De=B.contentsObjId;cs(Fe,!0),_e("<</Type /Page"),_e("/Parent "+B.rootDictionaryObjId+" 0 R"),_e("/Resources "+B.resourceDictionaryObjId+" 0 R"),_e("/MediaBox ["+parseFloat(U(B.mediaBox.bottomLeftX))+" "+parseFloat(U(B.mediaBox.bottomLeftY))+" "+U(B.mediaBox.topRightX)+" "+U(B.mediaBox.topRightY)+"]"),B.cropBox!==null&&_e("/CropBox ["+U(B.cropBox.bottomLeftX)+" "+U(B.cropBox.bottomLeftY)+" "+U(B.cropBox.topRightX)+" "+U(B.cropBox.topRightY)+"]"),B.bleedBox!==null&&_e("/BleedBox ["+U(B.bleedBox.bottomLeftX)+" "+U(B.bleedBox.bottomLeftY)+" "+U(B.bleedBox.topRightX)+" "+U(B.bleedBox.topRightY)+"]"),B.trimBox!==null&&_e("/TrimBox ["+U(B.trimBox.bottomLeftX)+" "+U(B.trimBox.bottomLeftY)+" "+U(B.trimBox.topRightX)+" "+U(B.trimBox.topRightY)+"]"),B.artBox!==null&&_e("/ArtBox ["+U(B.artBox.bottomLeftX)+" "+U(B.artBox.bottomLeftY)+" "+U(B.artBox.topRightX)+" "+U(B.artBox.topRightY)+"]"),typeof B.userUnit=="number"&&B.userUnit!==1&&_e("/UserUnit "+B.userUnit),Dt.publish("putPage",{objId:Fe,pageContext:xa[ae],pageNumber:ae,page:je}),_e("/Contents "+De+" 0 R"),_e(">>"),_e("endobj");var ct=je.join(`
`);return L===O&&(ct+=`
Q`),cs(De,!0),St({data:ct,filters:zt(),objectId:De}),_e("endobj"),Fe},Va=x.__private__.putPages=function(){var B,ae,je=[];for(B=1;B<=Ba;B++)xa[B].objId=ls(),xa[B].contentsObjId=ls();for(B=1;B<=Ba;B++)je.push(yt({number:B,data:Ee[B],objId:xa[B].objId,contentsObjId:xa[B].contentsObjId,mediaBox:xa[B].mediaBox,cropBox:xa[B].cropBox,bleedBox:xa[B].bleedBox,trimBox:xa[B].trimBox,artBox:xa[B].artBox,userUnit:xa[B].userUnit,rootDictionaryObjId:yn,resourceDictionaryObjId:ge}));cs(yn,!0),_e("<</Type /Pages");var Fe="/Kids [";for(ae=0;ae<Ba;ae++)Fe+=je[ae]+" 0 R ";_e(Fe+"]"),_e("/Count "+Ba),_e(">>"),_e("endobj"),Dt.publish("postPutPages")},Zt=function(B){Dt.publish("putFont",{font:B,out:_e,newObject:Pa,putStream:St}),B.isAlreadyPutted!==!0&&(B.objectNumber=Pa(),_e("<<"),_e("/Type /Font"),_e("/BaseFont /"+Qd(B.postScriptName)),_e("/Subtype /Type1"),typeof B.encoding=="string"&&_e("/Encoding /"+B.encoding),_e("/FirstChar 32"),_e("/LastChar 255"),_e(">>"),_e("endobj"))},W=function(B){B.objectNumber=Pa();var ae=[];ae.push({key:"Type",value:"/XObject"}),ae.push({key:"Subtype",value:"/Form"}),ae.push({key:"BBox",value:"["+[U(B.x),U(B.y),U(B.x+B.width),U(B.y+B.height)].join(" ")+"]"}),ae.push({key:"Matrix",value:"["+B.matrix.toString()+"]"});var je=B.pages[1].join(`
`);St({data:je,additionalKeyValues:ae,objectId:B.objectNumber}),_e("endobj")},me=function(B,ae){ae||(ae=21);var je=Pa(),Fe=function(bt,na){var fa,Fa=[],Ea=1/(na-1);for(fa=0;fa<1;fa+=Ea)Fa.push(fa);if(Fa.push(1),bt[0].offset!=0){var ss={offset:0,color:bt[0].color};bt.unshift(ss)}if(bt[bt.length-1].offset!=1){var Ps={offset:1,color:bt[bt.length-1].color};bt.push(Ps)}for(var Xs="",ys=0,pn=0;pn<Fa.length;pn++){for(fa=Fa[pn];fa>bt[ys+1].offset;)ys++;var Zs=bt[ys].offset,Cn=(fa-Zs)/(bt[ys+1].offset-Zs),wi=bt[ys].color,Gn=bt[ys+1].color;Xs+=re(Math.round((1-Cn)*wi[0]+Cn*Gn[0]).toString(16))+re(Math.round((1-Cn)*wi[1]+Cn*Gn[1]).toString(16))+re(Math.round((1-Cn)*wi[2]+Cn*Gn[2]).toString(16))}return Xs.trim()}(B.colors,ae),De=[];De.push({key:"FunctionType",value:"0"}),De.push({key:"Domain",value:"[0.0 1.0]"}),De.push({key:"Size",value:"["+ae+"]"}),De.push({key:"BitsPerSample",value:"8"}),De.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),De.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),St({data:Fe,additionalKeyValues:De,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:je}),_e("endobj"),B.objectNumber=Pa(),_e("<< /ShadingType "+B.type),_e("/ColorSpace /DeviceRGB");var ct="/Coords ["+U(parseFloat(B.coords[0]))+" "+U(parseFloat(B.coords[1]))+" ";B.type===2?ct+=U(parseFloat(B.coords[2]))+" "+U(parseFloat(B.coords[3])):ct+=U(parseFloat(B.coords[2]))+" "+U(parseFloat(B.coords[3]))+" "+U(parseFloat(B.coords[4]))+" "+U(parseFloat(B.coords[5])),_e(ct+="]"),B.matrix&&_e("/Matrix ["+B.matrix.toString()+"]"),_e("/Function "+je+" 0 R"),_e("/Extend [true true]"),_e(">>"),_e("endobj")},ke=function(B,ae){var je=ls(),Fe=Pa();ae.push({resourcesOid:je,objectOid:Fe}),B.objectNumber=Fe;var De=[];De.push({key:"Type",value:"/Pattern"}),De.push({key:"PatternType",value:"1"}),De.push({key:"PaintType",value:"1"}),De.push({key:"TilingType",value:"1"}),De.push({key:"BBox",value:"["+B.boundingBox.map(U).join(" ")+"]"}),De.push({key:"XStep",value:U(B.xStep)}),De.push({key:"YStep",value:U(B.yStep)}),De.push({key:"Resources",value:je+" 0 R"}),B.matrix&&De.push({key:"Matrix",value:"["+B.matrix.toString()+"]"}),St({data:B.stream,additionalKeyValues:De,objectId:B.objectNumber}),_e("endobj")},tt=function(B){for(var ae in B.objectNumber=Pa(),_e("<<"),B)switch(ae){case"opacity":_e("/ca "+T(B[ae]));break;case"stroke-opacity":_e("/CA "+T(B[ae]))}_e(">>"),_e("endobj")},ht=function(B){cs(B.resourcesOid,!0),_e("<<"),_e("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),function(){for(var ae in _e("/Font <<"),ie)ie.hasOwnProperty(ae)&&(b===!1||b===!0&&v.hasOwnProperty(ae))&&_e("/"+ae+" "+ie[ae].objectNumber+" 0 R");_e(">>")}(),function(){if(Object.keys(Ct).length>0){for(var ae in _e("/Shading <<"),Ct)Ct.hasOwnProperty(ae)&&Ct[ae]instanceof sc&&Ct[ae].objectNumber>=0&&_e("/"+ae+" "+Ct[ae].objectNumber+" 0 R");Dt.publish("putShadingPatternDict"),_e(">>")}}(),function(ae){if(Object.keys(Ct).length>0){for(var je in _e("/Pattern <<"),Ct)Ct.hasOwnProperty(je)&&Ct[je]instanceof x.TilingPattern&&Ct[je].objectNumber>=0&&Ct[je].objectNumber<ae&&_e("/"+je+" "+Ct[je].objectNumber+" 0 R");Dt.publish("putTilingPatternDict"),_e(">>")}}(B.objectOid),function(){if(Object.keys(ca).length>0){var ae;for(ae in _e("/ExtGState <<"),ca)ca.hasOwnProperty(ae)&&ca[ae].objectNumber>=0&&_e("/"+ae+" "+ca[ae].objectNumber+" 0 R");Dt.publish("putGStateDict"),_e(">>")}}(),function(){for(var ae in _e("/XObject <<"),Ce)Ce.hasOwnProperty(ae)&&Ce[ae].objectNumber>=0&&_e("/"+ae+" "+Ce[ae].objectNumber+" 0 R");Dt.publish("putXobjectDict"),_e(">>")}(),_e(">>"),_e("endobj")},Lt=function(B){at[B.fontName]=at[B.fontName]||{},at[B.fontName][B.fontStyle]=B.id},It=function(B,ae,je,Fe,De){var ct={id:"F"+(Object.keys(ie).length+1).toString(10),postScriptName:B,fontName:ae,fontStyle:je,encoding:Fe,isStandardFont:De||!1,metadata:{}};return Dt.publish("addFont",{font:ct,instance:this}),ie[ct.id]=ct,Lt(ct),ct.id},Jt=x.__private__.pdfEscape=x.pdfEscape=function(B,ae){return function(je,Fe){var De,ct,bt,na,fa,Fa,Ea,ss,Ps;if(bt=(Fe=Fe||{}).sourceEncoding||"Unicode",fa=Fe.outputEncoding,(Fe.autoencode||fa)&&ie[Nt].metadata&&ie[Nt].metadata[bt]&&ie[Nt].metadata[bt].encoding&&(na=ie[Nt].metadata[bt].encoding,!fa&&ie[Nt].encoding&&(fa=ie[Nt].encoding),!fa&&na.codePages&&(fa=na.codePages[0]),typeof fa=="string"&&(fa=na[fa]),fa)){for(Ea=!1,Fa=[],De=0,ct=je.length;De<ct;De++)(ss=fa[je.charCodeAt(De)])?Fa.push(String.fromCharCode(ss)):Fa.push(je[De]),Fa[De].charCodeAt(0)>>8&&(Ea=!0);je=Fa.join("")}for(De=je.length;Ea===void 0&&De!==0;)je.charCodeAt(De-1)>>8&&(Ea=!0),De--;if(!Ea)return je;for(Fa=Fe.noBOM?[]:[254,255],De=0,ct=je.length;De<ct;De++){if((Ps=(ss=je.charCodeAt(De))>>8)>>8)throw new Error("Character at position "+De+" of string '"+je+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Fa.push(Ps),Fa.push(ss-(Ps<<8))}return String.fromCharCode.apply(void 0,Fa)}(B,ae).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Ht=x.__private__.beginPage=function(B){Ee[++Ba]=[],xa[Ba]={objId:0,contentsObjId:0,userUnit:Number(u),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(B[0]),topRightY:Number(B[1])}},ba(Ba),Ge(Ee[I])},Wt=function(B,ae){var je,Fe,De;switch(s=ae||s,typeof B=="string"&&(je=_(B.toLowerCase()),Array.isArray(je)&&(Fe=je[0],De=je[1])),Array.isArray(B)&&(Fe=B[0]*qt,De=B[1]*qt),isNaN(Fe)&&(Fe=o[0],De=o[1]),(Fe>14400||De>14400)&&(qs.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),Fe=Math.min(14400,Fe),De=Math.min(14400,De)),o=[Fe,De],s.substr(0,1)){case"l":De>Fe&&(o=[De,Fe]);break;case"p":Fe>De&&(o=[De,Fe])}Ht(o),js(ea),_e(Ji),Ss!==0&&_e(Ss+" J"),bi!==0&&_e(bi+" j"),Dt.publish("addPage",{pageNumber:Ba})},wa=function(B){B>0&&B<=Ba&&(Ee.splice(B,1),xa.splice(B,1),Ba--,I>Ba&&(I=Ba),this.setPage(I))},ba=function(B){B>0&&B<=Ba&&(I=B)},ka=x.__private__.getNumberOfPages=x.getNumberOfPages=function(){return Ee.length-1},gs=function(B,ae,je){var Fe,De=void 0;return je=je||{},B=B!==void 0?B:ie[Nt].fontName,ae=ae!==void 0?ae:ie[Nt].fontStyle,Fe=B.toLowerCase(),at[Fe]!==void 0&&at[Fe][ae]!==void 0?De=at[Fe][ae]:at[B]!==void 0&&at[B][ae]!==void 0?De=at[B][ae]:je.disableWarning===!1&&qs.warn("Unable to look up font label for font '"+B+"', '"+ae+"'. Refer to getFontList() for available fonts."),De||je.noFallback||(De=at.times[ae])==null&&(De=at.times.normal),De},Ys=x.__private__.putInfo=function(){var B=Pa(),ae=function(Fe){return Fe};for(var je in m!==null&&(ae=$a.encryptor(B,0)),_e("<<"),_e("/Producer ("+Jt(ae("jsPDF "+ua.version))+")"),_t)_t.hasOwnProperty(je)&&_t[je]&&_e("/"+je.substr(0,1).toUpperCase()+je.substr(1)+" ("+Jt(ae(_t[je]))+")");_e("/CreationDate ("+Jt(ae(R))+")"),_e(">>"),_e("endobj")},Wi=x.__private__.putCatalog=function(B){var ae=(B=B||{}).rootDictionaryObjId||yn;switch(Pa(),_e("<<"),_e("/Type /Catalog"),_e("/Pages "+ae+" 0 R"),mt||(mt="fullwidth"),mt){case"fullwidth":_e("/OpenAction [3 0 R /FitH null]");break;case"fullheight":_e("/OpenAction [3 0 R /FitV null]");break;case"fullpage":_e("/OpenAction [3 0 R /Fit]");break;case"original":_e("/OpenAction [3 0 R /XYZ null null 1]");break;default:var je=""+mt;je.substr(je.length-1)==="%"&&(mt=parseInt(mt)/100),typeof mt=="number"&&_e("/OpenAction [3 0 R /XYZ null null "+T(mt)+"]")}switch(xt||(xt="continuous"),xt){case"continuous":_e("/PageLayout /OneColumn");break;case"single":_e("/PageLayout /SinglePage");break;case"two":case"twoleft":_e("/PageLayout /TwoColumnLeft");break;case"tworight":_e("/PageLayout /TwoColumnRight")}Oe&&_e("/PageMode /"+Oe),Dt.publish("putCatalog"),_e(">>"),_e("endobj")},ds=x.__private__.putTrailer=function(){_e("trailer"),_e("<<"),_e("/Size "+(J+1)),_e("/Root "+J+" 0 R"),_e("/Info "+(J-1)+" 0 R"),m!==null&&_e("/Encrypt "+$a.oid+" 0 R"),_e("/ID [ <"+z+"> <"+z+"> ]"),_e(">>")},Nr=x.__private__.putHeader=function(){_e("%PDF-"+C),_e("%")},Xr=x.__private__.putXRef=function(){var B="0000000000";_e("xref"),_e("0 "+(J+1)),_e("0000000000 65535 f ");for(var ae=1;ae<=J;ae++)typeof V[ae]=="function"?_e((B+V[ae]()).slice(-10)+" 00000 n "):V[ae]!==void 0?_e((B+V[ae]).slice(-10)+" 00000 n "):_e("0000000000 00000 n ")},Js=x.__private__.buildDocument=function(){var B;J=0,K=0,oe=[],V=[],Ne=[],yn=ls(),ge=ls(),Ge(oe),Dt.publish("buildDocument"),Nr(),Va(),function(){Dt.publish("putAdditionalObjects");for(var je=0;je<Ne.length;je++){var Fe=Ne[je];cs(Fe.objId,!0),_e(Fe.content),_e("endobj")}Dt.publish("postPutAdditionalObjects")}(),B=[],function(){for(var je in ie)ie.hasOwnProperty(je)&&(b===!1||b===!0&&v.hasOwnProperty(je))&&Zt(ie[je])}(),function(){var je;for(je in ca)ca.hasOwnProperty(je)&&tt(ca[je])}(),function(){for(var je in Ce)Ce.hasOwnProperty(je)&&W(Ce[je])}(),function(je){var Fe;for(Fe in Ct)Ct.hasOwnProperty(Fe)&&(Ct[Fe]instanceof sc?me(Ct[Fe]):Ct[Fe]instanceof Rc&&ke(Ct[Fe],je))}(B),Dt.publish("putResources"),B.forEach(ht),ht({resourcesOid:ge,objectOid:Number.MAX_SAFE_INTEGER}),Dt.publish("postPutResources"),m!==null&&($a.oid=Pa(),_e("<<"),_e("/Filter /Standard"),_e("/V "+$a.v),_e("/R "+$a.r),_e("/U <"+$a.toHexString($a.U)+">"),_e("/O <"+$a.toHexString($a.O)+">"),_e("/P "+$a.P),_e(">>"),_e("endobj")),Ys(),Wi();var ae=K;return Xr(),ds(),_e("startxref"),_e(""+ae),_e("%%EOF"),Ge(Ee[I]),oe.join(`
`)},vi=x.__private__.getBlob=function(B){return new Blob([Mt(B)],{type:"application/pdf"})},qa=x.output=x.__private__.output=(Na=function(B,ae){switch(typeof(ae=ae||{})=="string"?ae={filename:ae}:ae.filename=ae.filename||"generated.pdf",B){case void 0:return Js();case"save":x.save(ae.filename);break;case"arraybuffer":return Mt(Js());case"blob":return vi(Js());case"bloburi":case"bloburl":if(Ia.URL!==void 0&&typeof Ia.URL.createObjectURL=="function")return Ia.URL&&Ia.URL.createObjectURL(vi(Js()))||void 0;qs.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var je="",Fe=Js();try{je=ov(Fe)}catch{je=ov(unescape(encodeURIComponent(Fe)))}return"data:application/pdf;filename="+ae.filename+";base64,"+je;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Ia)==="[object Window]"){var De="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",ct=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';ae.pdfObjectUrl&&(De=ae.pdfObjectUrl,ct="");var bt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+De+'"'+ct+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(ae)+");<\/script></body></html>",na=Ia.open();return na!==null&&na.document.write(bt),na}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Ia)==="[object Window]"){var fa='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(ae.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+ae.filename+'" width="500px" height="400px" /></body></html>',Fa=Ia.open();if(Fa!==null){Fa.document.write(fa);var Ea=this;Fa.document.documentElement.querySelector("#pdfViewer").onload=function(){Fa.document.title=ae.filename,Fa.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Ea.output("bloburl"))}}return Fa}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Ia)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var ss='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",ae)+'"></iframe></body></html>',Ps=Ia.open();if(Ps!==null&&(Ps.document.write(ss),Ps.document.title=ae.filename),Ps||typeof safari>"u")return Ps;break;case"datauri":case"dataurl":return Ia.document.location.href=this.output("datauristring",ae);default:return null}},Na.foo=function(){try{return Na.apply(this,arguments)}catch(je){var B=je.stack||"";~B.indexOf(" at ")&&(B=B.split(" at ")[1]);var ae="Error in function "+B.split(`
`)[0].split("<")[0]+": "+je.message;if(!Ia.console)throw new Error(ae);Ia.console.error(ae,je),Ia.alert&&alert(ae)}},Na.foo.bar=Na,Na.foo),oi=function(B){return Array.isArray(ye)===!0&&ye.indexOf(B)>-1};switch(i){case"pt":qt=1;break;case"mm":qt=72/25.4;break;case"cm":qt=72/2.54;break;case"in":qt=72;break;case"px":qt=oi("px_scaling")==1?.75:96/72;break;case"pc":case"em":qt=12;break;case"ex":qt=6;break;default:if(typeof i!="number")throw new Error("Invalid unit: "+i);qt=i}var $a=null;ue(),le();var Ri=x.__private__.getPageInfo=x.getPageInfo=function(B){if(isNaN(B)||B%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:xa[B].objId,pageNumber:B,pageContext:xa[B]}},Bo=x.__private__.getPageInfoByObjId=function(B){if(isNaN(B)||B%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var ae in xa)if(xa[ae].objId===B)break;return Ri(ae)},Ar=x.__private__.getCurrentPageInfo=x.getCurrentPageInfo=function(){return{objId:xa[I].objId,pageNumber:I,pageContext:xa[I]}};x.addPage=function(){return Wt.apply(this,arguments),this},x.setPage=function(){return ba.apply(this,arguments),Ge.call(this,Ee[I]),this},x.insertPage=function(B){return this.addPage(),this.movePage(I,B),this},x.movePage=function(B,ae){var je,Fe;if(B>ae){je=Ee[B],Fe=xa[B];for(var De=B;De>ae;De--)Ee[De]=Ee[De-1],xa[De]=xa[De-1];Ee[ae]=je,xa[ae]=Fe,this.setPage(ae)}else if(B<ae){je=Ee[B],Fe=xa[B];for(var ct=B;ct<ae;ct++)Ee[ct]=Ee[ct+1],xa[ct]=xa[ct+1];Ee[ae]=je,xa[ae]=Fe,this.setPage(ae)}return this},x.deletePage=function(){return wa.apply(this,arguments),this},x.__private__.text=x.text=function(B,ae,je,Fe,De){var ct,bt,na,fa,Fa,Ea,ss,Ps,Xs,ys=(Fe=Fe||{}).scope||this;if(typeof B=="number"&&typeof ae=="number"&&(typeof je=="string"||Array.isArray(je))){var pn=je;je=ae,ae=B,B=pn}if(arguments[3]instanceof Qt==0?(na=arguments[4],fa=arguments[5],Ls(ss=arguments[3])==="object"&&ss!==null||(typeof na=="string"&&(fa=na,na=null),typeof ss=="string"&&(fa=ss,ss=null),typeof ss=="number"&&(na=ss,ss=null),Fe={flags:ss,angle:na,align:fa})):(E("The transform parameter of text() with a Matrix value"),Xs=De),isNaN(ae)||isNaN(je)||B==null)throw new Error("Invalid arguments passed to jsPDF.text");if(B.length===0)return ys;var Zs,Cn="",wi=typeof Fe.lineHeightFactor=="number"?Fe.lineHeightFactor:da,Gn=ys.internal.scaleFactor;function So(ns){return ns=ns.split("	").join(Array(Fe.TabLen||9).join(" ")),Jt(ns,ss)}function tr(ns){for(var _s,an=ns.concat(),Ms=[],Qr=an.length;Qr--;)typeof(_s=an.shift())=="string"?Ms.push(_s):Array.isArray(ns)&&(_s.length===1||_s[1]===void 0&&_s[2]===void 0)?Ms.push(_s[0]):Ms.push([_s[0],_s[1],_s[2]]);return Ms}function _i(ns,_s){var an;if(typeof ns=="string")an=_s(ns)[0];else if(Array.isArray(ns)){for(var Ms,Qr,Bl=ns.concat(),Jo=[],Wc=Bl.length;Wc--;)typeof(Ms=Bl.shift())=="string"?Jo.push(_s(Ms)[0]):Array.isArray(Ms)&&typeof Ms[0]=="string"&&(Qr=_s(Ms[0],Ms[1],Ms[2]),Jo.push([Qr[0],Qr[1],Qr[2]]));an=Jo}return an}var Fr=!1,Er=!0;if(typeof B=="string")Fr=!0;else if(Array.isArray(B)){var Ur=B.concat();bt=[];for(var pr,Sn=Ur.length;Sn--;)(typeof(pr=Ur.shift())!="string"||Array.isArray(pr)&&typeof pr[0]!="string")&&(Er=!1);Fr=Er}if(Fr===!1)throw new Error('Type of text must be string or Array. "'+B+'" is not recognized.');typeof B=="string"&&(B=B.match(/[\r?\n]/)?B.split(/\r\n|\r|\n/g):[B]);var Lr=Je/ys.internal.scaleFactor,Ni=Lr*(wi-1);switch(Fe.baseline){case"bottom":je-=Ni;break;case"top":je+=Lr-Ni;break;case"hanging":je+=Lr-2*Ni;break;case"middle":je+=Lr/2-Ni}if((Ea=Fe.maxWidth||0)>0&&(typeof B=="string"?B=ys.splitTextToSize(B,Ea):Object.prototype.toString.call(B)==="[object Array]"&&(B=B.reduce(function(ns,_s){return ns.concat(ys.splitTextToSize(_s,Ea))},[]))),ct={text:B,x:ae,y:je,options:Fe,mutex:{pdfEscape:Jt,activeFontKey:Nt,fonts:ie,activeFontSize:Je}},Dt.publish("preProcessText",ct),B=ct.text,na=(Fe=ct.options).angle,Xs instanceof Qt==0&&na&&typeof na=="number"){na*=Math.PI/180,Fe.rotationDirection===0&&(na=-na),L===O&&(na=-na);var Wo=Math.cos(na),Yo=Math.sin(na);Xs=new Qt(Wo,Yo,-Yo,Wo,0,0)}else na&&na instanceof Qt&&(Xs=na);L!==O||Xs||(Xs=va),(Fa=Fe.charSpace||Cr)!==void 0&&(Cn+=U(q(Fa))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Ps=Fe.horizontalScale)!==void 0&&(Cn+=U(100*Ps)+` Tz
`),Fe.lang;var Vs=-1,P=Fe.renderingMode!==void 0?Fe.renderingMode:Fe.stroke,Ue=ys.internal.getCurrentPageInfo().pageContext;switch(P){case 0:case!1:case"fill":Vs=0;break;case 1:case!0:case"stroke":Vs=1;break;case 2:case"fillThenStroke":Vs=2;break;case 3:case"invisible":Vs=3;break;case 4:case"fillAndAddForClipping":Vs=4;break;case 5:case"strokeAndAddPathForClipping":Vs=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Vs=6;break;case 7:case"addToPathForClipping":Vs=7}var He=Ue.usedRenderingMode!==void 0?Ue.usedRenderingMode:-1;Vs!==-1?Cn+=Vs+` Tr
`:He!==-1&&(Cn+=`0 Tr
`),Vs!==-1&&(Ue.usedRenderingMode=Vs),fa=Fe.align||"left";var Ye,Tt=Je*wi,Vt=ys.internal.pageSize.getWidth(),Pt=ie[Nt];Fa=Fe.charSpace||Cr,Ea=Fe.maxWidth||0,ss=Object.assign({autoencode:!0,noBOM:!0},Fe.flags);var Rt=[],es=function(ns){return ys.getStringUnitWidth(ns,{font:Pt,charSpace:Fa,fontSize:Je,doKerning:!1})*Je/Gn};if(Object.prototype.toString.call(B)==="[object Array]"){var Ma;bt=tr(B),fa!=="left"&&(Ye=bt.map(es));var Ga,La=0;if(fa==="right"){ae-=Ye[0],B=[],Sn=bt.length;for(var ws=0;ws<Sn;ws++)ws===0?(Ga=bn(ae),Ma=Bn(je)):(Ga=q(La-Ye[ws]),Ma=-Tt),B.push([bt[ws],Ga,Ma]),La=Ye[ws]}else if(fa==="center"){ae-=Ye[0]/2,B=[],Sn=bt.length;for(var Hs=0;Hs<Sn;Hs++)Hs===0?(Ga=bn(ae),Ma=Bn(je)):(Ga=q((La-Ye[Hs])/2),Ma=-Tt),B.push([bt[Hs],Ga,Ma]),La=Ye[Hs]}else if(fa==="left"){B=[],Sn=bt.length;for(var ci=0;ci<Sn;ci++)B.push(bt[ci])}else if(fa==="justify"&&Pt.encoding==="Identity-H"){B=[],Sn=bt.length,Ea=Ea!==0?Ea:Vt;for(var Bi=0,ks=0;ks<Sn;ks++)if(Ma=ks===0?Bn(je):-Tt,Ga=ks===0?bn(ae):Bi,ks<Sn-1){var Oa=q((Ea-Ye[ks])/(bt[ks].split(" ").length-1)),Yt=bt[ks].split(" ");B.push([Yt[0]+" ",Ga,Ma]),Bi=0;for(var vs=1;vs<Yt.length;vs++){var Ci=(es(Yt[vs-1]+" "+Yt[vs])-es(Yt[vs]))*Gn+Oa;vs==Yt.length-1?B.push([Yt[vs],Ci,0]):B.push([Yt[vs]+" ",Ci,0]),Bi-=Ci}}else B.push([bt[ks],Ga,Ma]);B.push(["",Bi,0])}else{if(fa!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(B=[],Sn=bt.length,Ea=Ea!==0?Ea:Vt,ks=0;ks<Sn;ks++){Ma=ks===0?Bn(je):-Tt,Ga=ks===0?bn(ae):0;var ko=bt[ks].split(" ").length-1,di=ko>0?(Ea-Ye[ks])/ko:0;ks<Sn-1?Rt.push(U(q(di))):Rt.push(0),B.push([bt[ks],Ga,Ma])}}}(typeof Fe.R2L=="boolean"?Fe.R2L:et)===!0&&(B=_i(B,function(ns,_s,an){return[ns.split("").reverse().join(""),_s,an]})),ct={text:B,x:ae,y:je,options:Fe,mutex:{pdfEscape:Jt,activeFontKey:Nt,fonts:ie,activeFontSize:Je}},Dt.publish("postProcessText",ct),B=ct.text,Zs=ct.mutex.isHex||!1;var Fo=ie[Nt].encoding;Fo!=="WinAnsiEncoding"&&Fo!=="StandardEncoding"||(B=_i(B,function(ns,_s,an){return[So(ns),_s,an]})),bt=tr(B),B=[];for(var Pi,Tr,Si,Hi=Array.isArray(bt[0])?1:0,ar="",so=function(ns,_s,an){var Ms="";return an instanceof Qt?(an=typeof Fe.angle=="number"?ja(an,new Qt(1,0,0,1,ns,_s)):ja(new Qt(1,0,0,1,ns,_s),an),L===O&&(an=ja(new Qt(1,0,0,-1,0,0),an)),Ms=an.join(" ")+` Tm
`):Ms=U(ns)+" "+U(_s)+` Td
`,Ms},Mi=0;Mi<bt.length;Mi++){switch(ar="",Hi){case 1:Si=(Zs?"<":"(")+bt[Mi][0]+(Zs?">":")"),Pi=parseFloat(bt[Mi][1]),Tr=parseFloat(bt[Mi][2]);break;case 0:Si=(Zs?"<":"(")+bt[Mi]+(Zs?">":")"),Pi=bn(ae),Tr=Bn(je)}Rt!==void 0&&Rt[Mi]!==void 0&&(ar=Rt[Mi]+` Tw
`),Mi===0?B.push(ar+so(Pi,Tr,Xs)+Si):Hi===0?B.push(ar+Si):Hi===1&&B.push(ar+so(Pi,Tr,Xs)+Si)}B=Hi===0?B.join(` Tj
T* `):B.join(` Tj
`),B+=` Tj
`;var Zn=`BT
/`;return Zn+=Nt+" "+Je+` Tf
`,Zn+=U(Je*wi)+` TL
`,Zn+=Di+`
`,Zn+=Cn,Zn+=B,_e(Zn+="ET"),v[Nt]=!0,ys};var vn=x.__private__.clip=x.clip=function(B){return _e(B==="evenodd"?"W*":"W"),this};x.clipEvenOdd=function(){return vn("evenodd")},x.__private__.discardPath=x.discardPath=function(){return _e("n"),this};var Mn=x.__private__.isValidStyle=function(B){var ae=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(B)!==-1&&(ae=!0),ae};x.__private__.setDefaultPathOperation=x.setDefaultPathOperation=function(B){return Mn(B)&&(p=B),this};var Br=x.__private__.getStyle=x.getStyle=function(B){var ae=p;switch(B){case"D":case"S":ae="S";break;case"F":ae="f";break;case"FD":case"DF":ae="B";break;case"f":case"f*":case"B":case"B*":ae=B}return ae},li=x.close=function(){return _e("h"),this};x.stroke=function(){return _e("S"),this},x.fill=function(B){return Ya("f",B),this},x.fillEvenOdd=function(B){return Ya("f*",B),this},x.fillStroke=function(B){return Ya("B",B),this},x.fillStrokeEvenOdd=function(B){return Ya("B*",B),this};var Ya=function(B,ae){Ls(ae)==="object"?Re(ae,B):_e(B)},Ae=function(B){B===null||L===O&&B===void 0||(B=Br(B),_e(B))};function xe(B,ae,je,Fe,De){var ct=new Rc(ae||this.boundingBox,je||this.xStep,Fe||this.yStep,this.gState,De||this.matrix);ct.stream=this.stream;var bt=B+"$$"+this.cloneIndex+++"$$";return _a(bt,ct),ct}var Re=function(B,ae){var je=ia[B.key],Fe=Ct[je];if(Fe instanceof sc)_e("q"),_e(nt(ae)),Fe.gState&&x.setGState(Fe.gState),_e(B.matrix.toString()+" cm"),_e("/"+je+" sh"),_e("Q");else if(Fe instanceof Rc){var De=new Qt(1,0,0,-1,0,ao());B.matrix&&(De=De.multiply(B.matrix||va),je=xe.call(Fe,B.key,B.boundingBox,B.xStep,B.yStep,De).id),_e("q"),_e("/Pattern cs"),_e("/"+je+" scn"),Fe.gState&&x.setGState(Fe.gState),_e(ae),_e("Q")}},nt=function(B){switch(B){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},vt=x.moveTo=function(B,ae){return _e(U(q(B))+" "+U(ne(ae))+" m"),this},ot=x.lineTo=function(B,ae){return _e(U(q(B))+" "+U(ne(ae))+" l"),this},Kt=x.curveTo=function(B,ae,je,Fe,De,ct){return _e([U(q(B)),U(ne(ae)),U(q(je)),U(ne(Fe)),U(q(De)),U(ne(ct)),"c"].join(" ")),this};x.__private__.line=x.line=function(B,ae,je,Fe,De){if(isNaN(B)||isNaN(ae)||isNaN(je)||isNaN(Fe)||!Mn(De))throw new Error("Invalid arguments passed to jsPDF.line");return L===N?this.lines([[je-B,Fe-ae]],B,ae,[1,1],De||"S"):this.lines([[je-B,Fe-ae]],B,ae,[1,1]).stroke()},x.__private__.lines=x.lines=function(B,ae,je,Fe,De,ct){var bt,na,fa,Fa,Ea,ss,Ps,Xs,ys,pn,Zs,Cn;if(typeof B=="number"&&(Cn=je,je=ae,ae=B,B=Cn),Fe=Fe||[1,1],ct=ct||!1,isNaN(ae)||isNaN(je)||!Array.isArray(B)||!Array.isArray(Fe)||!Mn(De)||typeof ct!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(vt(ae,je),bt=Fe[0],na=Fe[1],Fa=B.length,pn=ae,Zs=je,fa=0;fa<Fa;fa++)(Ea=B[fa]).length===2?(pn=Ea[0]*bt+pn,Zs=Ea[1]*na+Zs,ot(pn,Zs)):(ss=Ea[0]*bt+pn,Ps=Ea[1]*na+Zs,Xs=Ea[2]*bt+pn,ys=Ea[3]*na+Zs,pn=Ea[4]*bt+pn,Zs=Ea[5]*na+Zs,Kt(ss,Ps,Xs,ys,pn,Zs));return ct&&li(),Ae(De),this},x.path=function(B){for(var ae=0;ae<B.length;ae++){var je=B[ae],Fe=je.c;switch(je.op){case"m":vt(Fe[0],Fe[1]);break;case"l":ot(Fe[0],Fe[1]);break;case"c":Kt.apply(this,Fe);break;case"h":li()}}return this},x.__private__.rect=x.rect=function(B,ae,je,Fe,De){if(isNaN(B)||isNaN(ae)||isNaN(je)||isNaN(Fe)||!Mn(De))throw new Error("Invalid arguments passed to jsPDF.rect");return L===N&&(Fe=-Fe),_e([U(q(B)),U(ne(ae)),U(q(je)),U(q(Fe)),"re"].join(" ")),Ae(De),this},x.__private__.triangle=x.triangle=function(B,ae,je,Fe,De,ct,bt){if(isNaN(B)||isNaN(ae)||isNaN(je)||isNaN(Fe)||isNaN(De)||isNaN(ct)||!Mn(bt))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[je-B,Fe-ae],[De-je,ct-Fe],[B-De,ae-ct]],B,ae,[1,1],bt,!0),this},x.__private__.roundedRect=x.roundedRect=function(B,ae,je,Fe,De,ct,bt){if(isNaN(B)||isNaN(ae)||isNaN(je)||isNaN(Fe)||isNaN(De)||isNaN(ct)||!Mn(bt))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var na=4/3*(Math.SQRT2-1);return De=Math.min(De,.5*je),ct=Math.min(ct,.5*Fe),this.lines([[je-2*De,0],[De*na,0,De,ct-ct*na,De,ct],[0,Fe-2*ct],[0,ct*na,-De*na,ct,-De,ct],[2*De-je,0],[-De*na,0,-De,-ct*na,-De,-ct],[0,2*ct-Fe],[0,-ct*na,De*na,-ct,De,-ct]],B+De,ae,[1,1],bt,!0),this},x.__private__.ellipse=x.ellipse=function(B,ae,je,Fe,De){if(isNaN(B)||isNaN(ae)||isNaN(je)||isNaN(Fe)||!Mn(De))throw new Error("Invalid arguments passed to jsPDF.ellipse");var ct=4/3*(Math.SQRT2-1)*je,bt=4/3*(Math.SQRT2-1)*Fe;return vt(B+je,ae),Kt(B+je,ae-bt,B+ct,ae-Fe,B,ae-Fe),Kt(B-ct,ae-Fe,B-je,ae-bt,B-je,ae),Kt(B-je,ae+bt,B-ct,ae+Fe,B,ae+Fe),Kt(B+ct,ae+Fe,B+je,ae+bt,B+je,ae),Ae(De),this},x.__private__.circle=x.circle=function(B,ae,je,Fe){if(isNaN(B)||isNaN(ae)||isNaN(je)||!Mn(Fe))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(B,ae,je,je,Fe)},x.setFont=function(B,ae,je){return je&&(ae=X(ae,je)),Nt=gs(B,ae,{disableWarning:!1}),this};var aa=x.__private__.getFont=x.getFont=function(){return ie[gs.apply(x,arguments)]};x.__private__.getFontList=x.getFontList=function(){var B,ae,je={};for(B in at)if(at.hasOwnProperty(B))for(ae in je[B]=[],at[B])at[B].hasOwnProperty(ae)&&je[B].push(ae);return je},x.addFont=function(B,ae,je,Fe,De){var ct=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&ct.indexOf(arguments[3])!==-1?De=arguments[3]:arguments[3]&&ct.indexOf(arguments[3])==-1&&(je=X(je,Fe)),It.call(this,B,ae,je,De=De||"Identity-H")};var da,ea=t.lineWidth||.200025,Gt=x.__private__.getLineWidth=x.getLineWidth=function(){return ea},js=x.__private__.setLineWidth=x.setLineWidth=function(B){return ea=B,_e(U(q(B))+" w"),this};x.__private__.setLineDash=ua.API.setLineDash=ua.API.setLineDashPattern=function(B,ae){if(B=B||[],ae=ae||0,isNaN(ae)||!Array.isArray(B))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return B=B.map(function(je){return U(q(je))}).join(" "),ae=U(q(ae)),_e("["+B+"] "+ae+" d"),this};var hn=x.__private__.getLineHeight=x.getLineHeight=function(){return Je*da};x.__private__.getLineHeight=x.getLineHeight=function(){return Je*da};var Kn=x.__private__.setLineHeightFactor=x.setLineHeightFactor=function(B){return typeof(B=B||1.15)=="number"&&(da=B),this},Ts=x.__private__.getLineHeightFactor=x.getLineHeightFactor=function(){return da};Kn(t.lineHeight);var bn=x.__private__.getHorizontalCoordinate=function(B){return q(B)},Bn=x.__private__.getVerticalCoordinate=function(B){return L===O?B:xa[I].mediaBox.topRightY-xa[I].mediaBox.bottomLeftY-q(B)},Yi=x.__private__.getHorizontalCoordinateString=x.getHorizontalCoordinateString=function(B){return U(bn(B))},ur=x.__private__.getVerticalCoordinateString=x.getVerticalCoordinateString=function(B){return U(Bn(B))},Ji=t.strokeColor||"0 G";x.__private__.getStrokeColor=x.getDrawColor=function(){return it(Ji)},x.__private__.setStrokeColor=x.setDrawColor=function(B,ae,je,Fe){return Ji=$e({ch1:B,ch2:ae,ch3:je,ch4:Fe,pdfColorType:"draw",precision:2}),_e(Ji),this};var Co=t.fillColor||"0 g";x.__private__.getFillColor=x.getFillColor=function(){return it(Co)},x.__private__.setFillColor=x.setFillColor=function(B,ae,je,Fe){return Co=$e({ch1:B,ch2:ae,ch3:je,ch4:Fe,pdfColorType:"fill",precision:2}),_e(Co),this};var Di=t.textColor||"0 g",Xi=x.__private__.getTextColor=x.getTextColor=function(){return it(Di)};x.__private__.setTextColor=x.setTextColor=function(B,ae,je,Fe){return Di=$e({ch1:B,ch2:ae,ch3:je,ch4:Fe,pdfColorType:"text",precision:3}),this};var Cr=t.charSpace,jn=x.__private__.getCharSpace=x.getCharSpace=function(){return parseFloat(Cr||0)};x.__private__.setCharSpace=x.setCharSpace=function(B){if(isNaN(B))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Cr=B,this};var Ss=0;x.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},x.__private__.setLineCap=x.setLineCap=function(B){var ae=x.CapJoinStyles[B];if(ae===void 0)throw new Error("Line cap style of '"+B+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Ss=ae,_e(ae+" J"),this};var bi=0;x.__private__.setLineJoin=x.setLineJoin=function(B){var ae=x.CapJoinStyles[B];if(ae===void 0)throw new Error("Line join style of '"+B+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return bi=ae,_e(ae+" j"),this},x.__private__.setLineMiterLimit=x.__private__.setMiterLimit=x.setLineMiterLimit=x.setMiterLimit=function(B){if(B=B||0,isNaN(B))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return _e(U(q(B))+" M"),this},x.GState=ou,x.setGState=function(B){(B=typeof B=="string"?ca[Za[B]]:Zi(null,B)).equals(os)||(_e("/"+B.id+" gs"),os=B)};var Zi=function(B,ae){if(!B||!Za[B]){var je=!1;for(var Fe in ca)if(ca.hasOwnProperty(Fe)&&ca[Fe].equals(ae)){je=!0;break}if(je)ae=ca[Fe];else{var De="GS"+(Object.keys(ca).length+1).toString(10);ca[De]=ae,ae.id=De}return B&&(Za[B]=ae.id),Dt.publish("addGState",ae),ae}};x.addGState=function(B,ae){return Zi(B,ae),this},x.saveGraphicsState=function(){return _e("q"),Ot.push({key:Nt,size:Je,color:Di}),this},x.restoreGraphicsState=function(){_e("Q");var B=Ot.pop();return Nt=B.key,Je=B.size,Di=B.color,os=null,this},x.setCurrentTransformationMatrix=function(B){return _e(B.toString()+" cm"),this},x.comment=function(B){return _e("#"+B),this};var Zr=function(B,ae){var je=B||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return je},set:function(ct){isNaN(ct)||(je=parseFloat(ct))}});var Fe=ae||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return Fe},set:function(ct){isNaN(ct)||(Fe=parseFloat(ct))}});var De="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return De},set:function(ct){De=ct.toString()}}),this},Sr=function(B,ae,je,Fe){Zr.call(this,B,ae),this.type="rect";var De=je||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return De},set:function(bt){isNaN(bt)||(De=parseFloat(bt))}});var ct=Fe||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return ct},set:function(bt){isNaN(bt)||(ct=parseFloat(bt))}}),this},hr=function(){this.page=Ba,this.currentPage=I,this.pages=Ee.slice(0),this.pagesContext=xa.slice(0),this.x=Bt,this.y=Xt,this.matrix=ta,this.width=Ja(I),this.height=er(I),this.outputDestination=ut,this.id="",this.objectNumber=-1};hr.prototype.restore=function(){Ba=this.page,I=this.currentPage,xa=this.pagesContext,Ee=this.pages,Bt=this.x,Xt=this.y,ta=this.matrix,eo(I,this.width),ji(I,this.height),ut=this.outputDestination};var As=function(B,ae,je,Fe,De){gt.push(new hr),Ba=I=0,Ee=[],Bt=B,Xt=ae,ta=De,Ht([je,Fe])};for(var Ii in x.beginFormObject=function(B,ae,je,Fe,De){return As(B,ae,je,Fe,De),this},x.endFormObject=function(B){return function(ae){if(Ve[ae])gt.pop().restore();else{var je=new hr,Fe="Xo"+(Object.keys(Ce).length+1).toString(10);je.id=Fe,Ve[ae]=Fe,Ce[Fe]=je,Dt.publish("addFormObject",je),gt.pop().restore()}}(B),this},x.doFormObject=function(B,ae){var je=Ce[Ve[B]];return _e("q"),_e(ae.toString()+" cm"),_e("/"+je.id+" Do"),_e("Q"),this},x.getFormObject=function(B){var ae=Ce[Ve[B]];return{x:ae.x,y:ae.y,width:ae.width,height:ae.height,matrix:ae.matrix}},x.save=function(B,ae){return B=B||"generated.pdf",(ae=ae||{}).returnPromise=ae.returnPromise||!1,ae.returnPromise===!1?(Tc(vi(Js()),B),typeof Tc.unload=="function"&&Ia.setTimeout&&setTimeout(Tc.unload,911),this):new Promise(function(je,Fe){try{var De=Tc(vi(Js()),B);typeof Tc.unload=="function"&&Ia.setTimeout&&setTimeout(Tc.unload,911),je(De)}catch(ct){Fe(ct.message)}})},ua.API)ua.API.hasOwnProperty(Ii)&&(Ii==="events"&&ua.API.events.length?function(B,ae){var je,Fe,De;for(De=ae.length-1;De!==-1;De--)je=ae[De][0],Fe=ae[De][1],B.subscribe.apply(B,[je].concat(typeof Fe=="function"?[Fe]:Fe))}(Dt,ua.API.events):x[Ii]=ua.API[Ii]);function Ja(B){return xa[B].mediaBox.topRightX-xa[B].mediaBox.bottomLeftX}function eo(B,ae){xa[B].mediaBox.topRightX=ae+xa[B].mediaBox.bottomLeftX}function er(B){return xa[B].mediaBox.topRightY-xa[B].mediaBox.bottomLeftY}function ji(B,ae){xa[B].mediaBox.topRightY=ae+xa[B].mediaBox.bottomLeftY}var to=x.getPageWidth=function(B){return Ja(B=B||I)/qt},Nl=x.setPageWidth=function(B,ae){eo(B,ae*qt)},ao=x.getPageHeight=function(B){return er(B=B||I)/qt},kr=x.setPageHeight=function(B,ae){ji(B,ae*qt)};return x.internal={pdfEscape:Jt,getStyle:Br,getFont:aa,getFontSize:ve,getCharSpace:jn,getTextColor:Xi,getLineHeight:hn,getLineHeightFactor:Ts,getLineWidth:Gt,write:Et,getHorizontalCoordinate:bn,getVerticalCoordinate:Bn,getCoordinateString:Yi,getVerticalCoordinateString:ur,collections:{},newObject:Pa,newAdditionalObject:Gs,newObjectDeferred:ls,newObjectDeferredBegin:cs,getFilters:zt,putStream:St,events:Dt,scaleFactor:qt,pageSize:{getWidth:function(){return to(I)},setWidth:function(B){Nl(I,B)},getHeight:function(){return ao(I)},setHeight:function(B){kr(I,B)}},encryptionOptions:m,encryption:$a,getEncryptor:function(B){return m!==null?$a.encryptor(B,0):function(ae){return ae}},output:qa,getNumberOfPages:ka,pages:Ee,out:_e,f2:T,f3:Q,getPageInfo:Ri,getPageInfoByObjId:Bo,getCurrentPageInfo:Ar,getPDFVersion:D,Point:Zr,Rectangle:Sr,Matrix:Qt,hasHotfix:oi},Object.defineProperty(x.internal.pageSize,"width",{get:function(){return to(I)},set:function(B){Nl(I,B)},enumerable:!0,configurable:!0}),Object.defineProperty(x.internal.pageSize,"height",{get:function(){return ao(I)},set:function(B){kr(I,B)},enumerable:!0,configurable:!0}),(function(B){for(var ae=0,je=Ze.length;ae<je;ae++){var Fe=It.call(this,B[ae][0],B[ae][1],B[ae][2],Ze[ae][3],!0);b===!1&&(v[Fe]=!0);var De=B[ae][0].split("-");Lt({id:Fe,fontName:De[0],fontStyle:De[1]||""})}Dt.publish("addFonts",{fonts:ie,dictionary:at})}).call(x,Ze),Nt="F1",Wt(o,s),Dt.publish("initialized"),x}Td.prototype.lsbFirstWord=function(t){return String.fromCharCode(255&t,t>>8&255,t>>16&255,t>>24&255)},Td.prototype.toHexString=function(t){return t.split("").map(function(a){return("0"+(255&a.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Td.prototype.hexToBytes=function(t){for(var a=[],s=0;s<t.length;s+=2)a.push(String.fromCharCode(parseInt(t.substr(s,2),16)));return a.join("")},Td.prototype.processOwnerPassword=function(t,a){return ig(ng(a).substr(0,5),t)},Td.prototype.encryptor=function(t,a){var s=ng(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&a,a>>8&255)).substr(0,10);return function(i){return ig(s,i)}},ou.prototype.equals=function(t){var a,s="id,objectNumber,equals";if(!t||Ls(t)!==Ls(this))return!1;var i=0;for(a in this)if(!(s.indexOf(a)>=0)){if(this.hasOwnProperty(a)&&!t.hasOwnProperty(a)||this[a]!==t[a])return!1;i++}for(a in t)t.hasOwnProperty(a)&&s.indexOf(a)<0&&i--;return i===0},ua.API={events:[]},ua.version="3.0.3";var Nn=ua.API,Gg=1,$c=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Bd=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},za=function(t){return t.toFixed(2)},Zl=function(t){return t.toFixed(5)};Nn.__acroform__={};var dr=function(t,a){t.prototype=Object.create(a.prototype),t.prototype.constructor=t},Av=function(t){return t*Gg},Mo=function(t){var a=new M1,s=pa.internal.getHeight(t)||0,i=pa.internal.getWidth(t)||0;return a.BBox=[0,0,Number(za(i)),Number(za(s))],a},wB=Nn.__acroform__.setBit=function(t,a){if(t=t||0,a=a||0,isNaN(t)||isNaN(a))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|1<<a},_B=Nn.__acroform__.clearBit=function(t,a){if(t=t||0,a=a||0,isNaN(t)||isNaN(a))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&~(1<<a)},NB=Nn.__acroform__.getBit=function(t,a){if(isNaN(t)||isNaN(a))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return t&1<<a?1:0},In=Nn.__acroform__.getBitForPdf=function(t,a){if(isNaN(t)||isNaN(a))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return NB(t,a-1)},Pn=Nn.__acroform__.setBitForPdf=function(t,a){if(isNaN(t)||isNaN(a))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return wB(t,a-1)},Hn=Nn.__acroform__.clearBitForPdf=function(t,a){if(isNaN(t)||isNaN(a))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return _B(t,a-1)},BB=Nn.__acroform__.calculateCoordinates=function(t,a){var s=a.internal.getHorizontalCoordinate,i=a.internal.getVerticalCoordinate,o=t[0],l=t[1],d=t[2],u=t[3],A={};return A.lowerLeft_X=s(o)||0,A.lowerLeft_Y=i(l+u)||0,A.upperRight_X=s(o+d)||0,A.upperRight_Y=i(l)||0,[Number(za(A.lowerLeft_X)),Number(za(A.lowerLeft_Y)),Number(za(A.upperRight_X)),Number(za(A.upperRight_Y))]},CB=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var a=[],s=t._V||t.DV,i=rg(t,s),o=t.scope.internal.getFont(t.fontName,t.fontStyle).id;a.push("/Tx BMC"),a.push("q"),a.push("BT"),a.push(t.scope.__private__.encodeColorString(t.color)),a.push("/"+o+" "+za(i.fontSize)+" Tf"),a.push("1 0 0 1 0 0 Tm"),a.push(i.text),a.push("ET"),a.push("Q"),a.push("EMC");var l=Mo(t);return l.scope=t.scope,l.stream=a.join(`
`),l}},rg=function(t,a){var s=t.fontSize===0?t.maxFontSize:t.fontSize,i={text:"",fontSize:""},o=(a=(a=a.substr(0,1)=="("?a.substr(1):a).substr(a.length-1)==")"?a.substr(0,a.length-1):a).split(" ");o=t.multiline?o.map(function(T){return T.split(`
`)}):o.map(function(T){return[T]});var l=s,d=pa.internal.getHeight(t)||0;d=d<0?-d:d;var u=pa.internal.getWidth(t)||0;u=u<0?-u:u;var A=function(T,Q,q){if(T+1<o.length){var ne=Q+" "+o[T+1][0];return Bh(ne,t,q).width<=u-4}return!1};l++;e:for(;l>0;){a="",l--;var p,m,b=Bh("3",t,l).height,v=t.multiline?d-l:(d-b)/2,x=v+=2,C=0,D=0,S=0;if(l<=0){a=`(...) Tj
`,a+="% Width of Text: "+Bh(a,t,l=12).width+", FieldWidth:"+u+`
`;break}for(var _="",N=0,O=0;O<o.length;O++)if(o.hasOwnProperty(O)){var L=!1;if(o[O].length!==1&&S!==o[O].length-1){if((b+2)*(N+2)+2>d)continue e;_+=o[O][S],L=!0,D=O,O--}else{_=(_+=o[O][S]+" ").substr(_.length-1)==" "?_.substr(0,_.length-1):_;var te=parseInt(O),G=A(te,_,l),X=O>=o.length-1;if(G&&!X){_+=" ",S=0;continue}if(G||X){if(X)D=te;else if(t.multiline&&(b+2)*(N+2)+2>d)continue e}else{if(!t.multiline||(b+2)*(N+2)+2>d)continue e;D=te}}for(var U="",E=C;E<=D;E++){var Y=o[E];if(t.multiline){if(E===D){U+=Y[S]+" ",S=(S+1)%Y.length;continue}if(E===C){U+=Y[Y.length-1]+" ";continue}}U+=Y[0]+" "}switch(U=U.substr(U.length-1)==" "?U.substr(0,U.length-1):U,m=Bh(U,t,l).width,t.textAlign){case"right":p=u-m-2;break;case"center":p=(u-m)/2;break;default:p=2}a+=za(p)+" "+za(x)+` Td
`,a+="("+$c(U)+`) Tj
`,a+=-za(p)+` 0 Td
`,x=-(l+2),m=0,C=L?D:D+1,N++,_=""}break}return i.text=a,i.fontSize=l,i},Bh=function(t,a,s){var i=a.scope.internal.getFont(a.fontName,a.fontStyle),o=a.scope.getStringUnitWidth(t,{font:i,fontSize:parseFloat(s),charSpace:0})*parseFloat(s);return{height:a.scope.getStringUnitWidth("3",{font:i,fontSize:parseFloat(s),charSpace:0})*parseFloat(s)*1.5,width:o}},SB={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},kB=function(t,a){var s={type:"reference",object:t};a.internal.getPageInfo(t.page).pageContext.annotations.find(function(i){return i.type===s.type&&i.object===s.object})===void 0&&a.internal.getPageInfo(t.page).pageContext.annotations.push(s)},FB=function(t,a){if(a.scope=t,t.internal!==void 0&&(t.internal.acroformPlugin===void 0||t.internal.acroformPlugin.isInitialized===!1)){if(wo.FieldNum=0,t.internal.acroformPlugin=JSON.parse(JSON.stringify(SB)),t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");Gg=t.internal.scaleFactor,t.internal.acroformPlugin.acroFormDictionaryRoot=new O1,t.internal.acroformPlugin.acroFormDictionaryRoot.scope=t,t.internal.acroformPlugin.acroFormDictionaryRoot._eventID=t.internal.events.subscribe("postPutResources",function(){(function(s){s.internal.events.unsubscribe(s.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete s.internal.acroformPlugin.acroFormDictionaryRoot._eventID,s.internal.acroformPlugin.printedOut=!0})(t)}),t.internal.events.subscribe("buildDocument",function(){(function(s){s.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var i=s.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];l.objId=void 0,l.hasAnnotation&&kB(l,s)}})(t)}),t.internal.events.subscribe("putCatalog",function(){(function(s){if(s.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");s.internal.write("/AcroForm "+s.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(t)}),t.internal.events.subscribe("postPutPages",function(s){(function(i,o){var l=!i;for(var d in i||(o.internal.newObjectDeferredBegin(o.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),o.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),i=i||o.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(i.hasOwnProperty(d)){var u=i[d],A=[],p=u.Rect;if(u.Rect&&(u.Rect=BB(u.Rect,o)),o.internal.newObjectDeferredBegin(u.objId,!0),u.DA=pa.createDefaultAppearanceStream(u),Ls(u)==="object"&&typeof u.getKeyValueListForStream=="function"&&(A=u.getKeyValueListForStream()),u.Rect=p,u.hasAppearanceStream&&!u.appearanceStreamContent){var m=CB(u);A.push({key:"AP",value:"<</N "+m+">>"}),o.internal.acroformPlugin.xForms.push(m)}if(u.appearanceStreamContent){var b="";for(var v in u.appearanceStreamContent)if(u.appearanceStreamContent.hasOwnProperty(v)){var x=u.appearanceStreamContent[v];if(b+="/"+v+" ",b+="<<",Object.keys(x).length>=1||Array.isArray(x)){for(var d in x)if(x.hasOwnProperty(d)){var C=x[d];typeof C=="function"&&(C=C.call(o,u)),b+="/"+d+" "+C+" ",o.internal.acroformPlugin.xForms.indexOf(C)>=0||o.internal.acroformPlugin.xForms.push(C)}}else typeof(C=x)=="function"&&(C=C.call(o,u)),b+="/"+d+" "+C,o.internal.acroformPlugin.xForms.indexOf(C)>=0||o.internal.acroformPlugin.xForms.push(C);b+=">>"}A.push({key:"AP",value:`<<
`+b+">>"})}o.internal.putStream({additionalKeyValues:A,objectId:u.objId}),o.internal.out("endobj")}l&&function(D,S){for(var _ in D)if(D.hasOwnProperty(_)){var N=_,O=D[_];S.internal.newObjectDeferredBegin(O.objId,!0),Ls(O)==="object"&&typeof O.putStream=="function"&&O.putStream(),delete D[N]}}(o.internal.acroformPlugin.xForms,o)})(s,t)}),t.internal.acroformPlugin.isInitialized=!0}},H1=Nn.__acroform__.arrayToPdfArray=function(t,a,s){var i=function(d){return d};if(Array.isArray(t)){for(var o="[",l=0;l<t.length;l++)switch(l!==0&&(o+=" "),Ls(t[l])){case"boolean":case"number":case"object":o+=t[l].toString();break;case"string":t[l].substr(0,1)!=="/"?(a!==void 0&&s&&(i=s.internal.getEncryptor(a)),o+="("+$c(i(t[l].toString()))+")"):o+=t[l].toString()}return o+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},yf=function(t,a,s){var i=function(o){return o};return a!==void 0&&s&&(i=s.internal.getEncryptor(a)),(t=t||"").toString(),"("+$c(i(t))+")"},Oo=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Oo.prototype.toString=function(){return this.objId+" 0 R"},Oo.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},Oo.prototype.getKeyValueListForStream=function(){var t=[],a=Object.getOwnPropertyNames(this).filter(function(l){return l!="content"&&l!="appearanceStreamContent"&&l!="scope"&&l!="objId"&&l.substring(0,1)!="_"});for(var s in a)if(Object.getOwnPropertyDescriptor(this,a[s]).configurable===!1){var i=a[s],o=this[i];o&&(Array.isArray(o)?t.push({key:i,value:H1(o,this.objId,this.scope)}):o instanceof Oo?(o.scope=this.scope,t.push({key:i,value:o.objId+" 0 R"})):typeof o!="function"&&t.push({key:i,value:o}))}return t};var M1=function(){Oo.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,a=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return a},set:function(s){a=s}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(s){t=s.trim()},get:function(){return t||null}})};dr(M1,Oo);var O1=function(){Oo.call(this);var t,a=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return a.length>0?a:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return a}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var s=function(i){return i};return this.scope&&(s=this.scope.internal.getEncryptor(this.objId)),"("+$c(s(t))+")"}},set:function(s){t=s}})};dr(O1,Oo);var wo=function t(){Oo.call(this);var a=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return a},set:function(_){if(isNaN(_))throw new Error('Invalid value "'+_+'" for attribute F supplied.');a=_}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!In(a,3)},set:function(_){_?this.F=Pn(a,3):this.F=Hn(a,3)}});var s=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return s},set:function(_){if(isNaN(_))throw new Error('Invalid value "'+_+'" for attribute Ff supplied.');s=_}});var i=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(i.length!==0)return i},set:function(_){i=_!==void 0?_:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[0])?0:i[0]},set:function(_){i[0]=_}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[1])?0:i[1]},set:function(_){i[1]=_}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[2])?0:i[2]},set:function(_){i[2]=_}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[3])?0:i[3]},set:function(_){i[3]=_}});var o="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return o},set:function(_){switch(_){case"/Btn":case"/Tx":case"/Ch":case"/Sig":o=_;break;default:throw new Error('Invalid value "'+_+'" for attribute FT supplied.')}}});var l=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!l||l.length<1){if(this instanceof cp)return;l="FieldObject"+t.FieldNum++}var _=function(N){return N};return this.scope&&(_=this.scope.internal.getEncryptor(this.objId)),"("+$c(_(l))+")"},set:function(_){l=_.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return l},set:function(_){l=_}});var d="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return d},set:function(_){d=_}});var u="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return u},set:function(_){u=_}});var A=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return A},set:function(_){A=_}});var p=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return p===void 0?50/Gg:p},set:function(_){p=_}});var m="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return m},set:function(_){m=_}});var b="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!b||this instanceof cp||this instanceof lc))return yf(b,this.objId,this.scope)},set:function(_){_=_.toString(),b=_}});var v=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(v)return this instanceof Yn==0?yf(v,this.objId,this.scope):v},set:function(_){_=_.toString(),v=this instanceof Yn==0?_.substr(0,1)==="("?Bd(_.substr(1,_.length-2)):Bd(_):_}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Yn==1?Bd(v.substr(1,v.length-1)):v},set:function(_){_=_.toString(),v=this instanceof Yn==1?"/"+_:_}});var x=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(x)return x},set:function(_){this.V=_}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(x)return this instanceof Yn==0?yf(x,this.objId,this.scope):x},set:function(_){_=_.toString(),x=this instanceof Yn==0?_.substr(0,1)==="("?Bd(_.substr(1,_.length-2)):Bd(_):_}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Yn==1?Bd(x.substr(1,x.length-1)):x},set:function(_){_=_.toString(),x=this instanceof Yn==1?"/"+_:_}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var C,D=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return D},set:function(_){_=!!_,D=_}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(C)return C},set:function(_){C=_}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!In(this.Ff,1)},set:function(_){_?this.Ff=Pn(this.Ff,1):this.Ff=Hn(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!In(this.Ff,2)},set:function(_){_?this.Ff=Pn(this.Ff,2):this.Ff=Hn(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!In(this.Ff,3)},set:function(_){_?this.Ff=Pn(this.Ff,3):this.Ff=Hn(this.Ff,3)}});var S=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(S!==null)return S},set:function(_){if([0,1,2].indexOf(_)===-1)throw new Error('Invalid value "'+_+'" for attribute Q supplied.');S=_}}),Object.defineProperty(this,"textAlign",{get:function(){var _;switch(S){case 0:default:_="left";break;case 1:_="center";break;case 2:_="right"}return _},configurable:!0,enumerable:!0,set:function(_){switch(_){case"right":case 2:S=2;break;case"center":case 1:S=1;break;default:S=0}}})};dr(wo,Oo);var Ic=function(){wo.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(s){t=s}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(s){t=s}});var a=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return H1(a,this.objId,this.scope)},set:function(s){var i,o;o=[],typeof(i=s)=="string"&&(o=function(l,d,u){u||(u=1);for(var A,p=[];A=d.exec(l);)p.push(A[u]);return p}(i,/\((.*?)\)/g)),a=o}}),this.getOptions=function(){return a},this.setOptions=function(s){a=s,this.sort&&a.sort()},this.addOption=function(s){s=(s=s||"").toString(),a.push(s),this.sort&&a.sort()},this.removeOption=function(s,i){for(i=i||!1,s=(s=s||"").toString();a.indexOf(s)!==-1&&(a.splice(a.indexOf(s),1),i!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!In(this.Ff,18)},set:function(s){s?this.Ff=Pn(this.Ff,18):this.Ff=Hn(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!In(this.Ff,19)},set:function(s){this.combo===!0&&(s?this.Ff=Pn(this.Ff,19):this.Ff=Hn(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!In(this.Ff,20)},set:function(s){s?(this.Ff=Pn(this.Ff,20),a.sort()):this.Ff=Hn(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!In(this.Ff,22)},set:function(s){s?this.Ff=Pn(this.Ff,22):this.Ff=Hn(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!In(this.Ff,23)},set:function(s){s?this.Ff=Pn(this.Ff,23):this.Ff=Hn(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!In(this.Ff,27)},set:function(s){s?this.Ff=Pn(this.Ff,27):this.Ff=Hn(this.Ff,27)}}),this.hasAppearanceStream=!1};dr(Ic,wo);var Pc=function(){Ic.call(this),this.fontName="helvetica",this.combo=!1};dr(Pc,Ic);var Hc=function(){Pc.call(this),this.combo=!0};dr(Hc,Pc);var WA=function(){Hc.call(this),this.edit=!0};dr(WA,Hc);var Yn=function(){wo.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!In(this.Ff,15)},set:function(s){s?this.Ff=Pn(this.Ff,15):this.Ff=Hn(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!In(this.Ff,16)},set:function(s){s?this.Ff=Pn(this.Ff,16):this.Ff=Hn(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!In(this.Ff,17)},set:function(s){s?this.Ff=Pn(this.Ff,17):this.Ff=Hn(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!In(this.Ff,26)},set:function(s){s?this.Ff=Pn(this.Ff,26):this.Ff=Hn(this.Ff,26)}});var t,a={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var s=function(l){return l};if(this.scope&&(s=this.scope.internal.getEncryptor(this.objId)),Object.keys(a).length!==0){var i,o=[];for(i in o.push("<<"),a)o.push("/"+i+" ("+$c(s(a[i]))+")");return o.push(">>"),o.join(`
`)}},set:function(s){Ls(s)==="object"&&(a=s)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return a.CA||""},set:function(s){typeof s=="string"&&(a.CA=s)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(s){t=s}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(s){t="/"+s}})};dr(Yn,wo);var YA=function(){Yn.call(this),this.pushButton=!0};dr(YA,Yn);var Mc=function(){Yn.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(a){t=a!==void 0?a:[]}})};dr(Mc,Yn);var cp=function(){var t,a;wo.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(o){t=o}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return a},set:function(o){a=o}});var s,i={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var o=function(u){return u};this.scope&&(o=this.scope.internal.getEncryptor(this.objId));var l,d=[];for(l in d.push("<<"),i)d.push("/"+l+" ("+$c(o(i[l]))+")");return d.push(">>"),d.join(`
`)},set:function(o){Ls(o)==="object"&&(i=o)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return i.CA||""},set:function(o){typeof o=="string"&&(i.CA=o)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return s},set:function(o){s=o}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return s.substr(1,s.length-1)},set:function(o){s="/"+o}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=pa.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};dr(cp,wo),Mc.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var a in this.Kids)if(this.Kids.hasOwnProperty(a)){var s=this.Kids[a];s.appearanceStreamContent=t.createAppearanceStream(s.optionName),s.caption=t.getCA()}},Mc.prototype.createOption=function(t){var a=new cp;return a.Parent=this,a.optionName=t,this.Kids.push(a),EB.call(this.scope,a),a};var JA=function(){Yn.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=pa.CheckBox.createAppearanceStream()};dr(JA,Yn);var lc=function(){wo.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!In(this.Ff,13)},set:function(a){a?this.Ff=Pn(this.Ff,13):this.Ff=Hn(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!In(this.Ff,21)},set:function(a){a?this.Ff=Pn(this.Ff,21):this.Ff=Hn(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!In(this.Ff,23)},set:function(a){a?this.Ff=Pn(this.Ff,23):this.Ff=Hn(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!In(this.Ff,24)},set:function(a){a?this.Ff=Pn(this.Ff,24):this.Ff=Hn(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!In(this.Ff,25)},set:function(a){a?this.Ff=Pn(this.Ff,25):this.Ff=Hn(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!In(this.Ff,26)},set:function(a){a?this.Ff=Pn(this.Ff,26):this.Ff=Hn(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(a){t=a}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(a){Number.isInteger(a)&&(t=a)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};dr(lc,wo);var XA=function(){lc.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!In(this.Ff,14)},set:function(t){t?this.Ff=Pn(this.Ff,14):this.Ff=Hn(this.Ff,14)}}),this.password=!0};dr(XA,lc);var pa={CheckBox:{createAppearanceStream:function(){return{N:{On:pa.CheckBox.YesNormal},D:{On:pa.CheckBox.YesPushDown,Off:pa.CheckBox.OffPushDown}}},YesPushDown:function(t){var a=Mo(t);a.scope=t.scope;var s=[],i=t.scope.internal.getFont(t.fontName,t.fontStyle).id,o=t.scope.__private__.encodeColorString(t.color),l=rg(t,t.caption);return s.push("0.749023 g"),s.push("0 0 "+za(pa.internal.getWidth(t))+" "+za(pa.internal.getHeight(t))+" re"),s.push("f"),s.push("BMC"),s.push("q"),s.push("0 0 1 rg"),s.push("/"+i+" "+za(l.fontSize)+" Tf "+o),s.push("BT"),s.push(l.text),s.push("ET"),s.push("Q"),s.push("EMC"),a.stream=s.join(`
`),a},YesNormal:function(t){var a=Mo(t);a.scope=t.scope;var s=t.scope.internal.getFont(t.fontName,t.fontStyle).id,i=t.scope.__private__.encodeColorString(t.color),o=[],l=pa.internal.getHeight(t),d=pa.internal.getWidth(t),u=rg(t,t.caption);return o.push("1 g"),o.push("0 0 "+za(d)+" "+za(l)+" re"),o.push("f"),o.push("q"),o.push("0 0 1 rg"),o.push("0 0 "+za(d-1)+" "+za(l-1)+" re"),o.push("W"),o.push("n"),o.push("0 g"),o.push("BT"),o.push("/"+s+" "+za(u.fontSize)+" Tf "+i),o.push(u.text),o.push("ET"),o.push("Q"),a.stream=o.join(`
`),a},OffPushDown:function(t){var a=Mo(t);a.scope=t.scope;var s=[];return s.push("0.749023 g"),s.push("0 0 "+za(pa.internal.getWidth(t))+" "+za(pa.internal.getHeight(t))+" re"),s.push("f"),a.stream=s.join(`
`),a}},RadioButton:{Circle:{createAppearanceStream:function(t){var a={D:{Off:pa.RadioButton.Circle.OffPushDown},N:{}};return a.N[t]=pa.RadioButton.Circle.YesNormal,a.D[t]=pa.RadioButton.Circle.YesPushDown,a},getCA:function(){return"l"},YesNormal:function(t){var a=Mo(t);a.scope=t.scope;var s=[],i=pa.internal.getWidth(t)<=pa.internal.getHeight(t)?pa.internal.getWidth(t)/4:pa.internal.getHeight(t)/4;i=Number((.9*i).toFixed(5));var o=pa.internal.Bezier_C,l=Number((i*o).toFixed(5));return s.push("q"),s.push("1 0 0 1 "+Zl(pa.internal.getWidth(t)/2)+" "+Zl(pa.internal.getHeight(t)/2)+" cm"),s.push(i+" 0 m"),s.push(i+" "+l+" "+l+" "+i+" 0 "+i+" c"),s.push("-"+l+" "+i+" -"+i+" "+l+" -"+i+" 0 c"),s.push("-"+i+" -"+l+" -"+l+" -"+i+" 0 -"+i+" c"),s.push(l+" -"+i+" "+i+" -"+l+" "+i+" 0 c"),s.push("f"),s.push("Q"),a.stream=s.join(`
`),a},YesPushDown:function(t){var a=Mo(t);a.scope=t.scope;var s=[],i=pa.internal.getWidth(t)<=pa.internal.getHeight(t)?pa.internal.getWidth(t)/4:pa.internal.getHeight(t)/4;i=Number((.9*i).toFixed(5));var o=Number((2*i).toFixed(5)),l=Number((o*pa.internal.Bezier_C).toFixed(5)),d=Number((i*pa.internal.Bezier_C).toFixed(5));return s.push("0.749023 g"),s.push("q"),s.push("1 0 0 1 "+Zl(pa.internal.getWidth(t)/2)+" "+Zl(pa.internal.getHeight(t)/2)+" cm"),s.push(o+" 0 m"),s.push(o+" "+l+" "+l+" "+o+" 0 "+o+" c"),s.push("-"+l+" "+o+" -"+o+" "+l+" -"+o+" 0 c"),s.push("-"+o+" -"+l+" -"+l+" -"+o+" 0 -"+o+" c"),s.push(l+" -"+o+" "+o+" -"+l+" "+o+" 0 c"),s.push("f"),s.push("Q"),s.push("0 g"),s.push("q"),s.push("1 0 0 1 "+Zl(pa.internal.getWidth(t)/2)+" "+Zl(pa.internal.getHeight(t)/2)+" cm"),s.push(i+" 0 m"),s.push(i+" "+d+" "+d+" "+i+" 0 "+i+" c"),s.push("-"+d+" "+i+" -"+i+" "+d+" -"+i+" 0 c"),s.push("-"+i+" -"+d+" -"+d+" -"+i+" 0 -"+i+" c"),s.push(d+" -"+i+" "+i+" -"+d+" "+i+" 0 c"),s.push("f"),s.push("Q"),a.stream=s.join(`
`),a},OffPushDown:function(t){var a=Mo(t);a.scope=t.scope;var s=[],i=pa.internal.getWidth(t)<=pa.internal.getHeight(t)?pa.internal.getWidth(t)/4:pa.internal.getHeight(t)/4;i=Number((.9*i).toFixed(5));var o=Number((2*i).toFixed(5)),l=Number((o*pa.internal.Bezier_C).toFixed(5));return s.push("0.749023 g"),s.push("q"),s.push("1 0 0 1 "+Zl(pa.internal.getWidth(t)/2)+" "+Zl(pa.internal.getHeight(t)/2)+" cm"),s.push(o+" 0 m"),s.push(o+" "+l+" "+l+" "+o+" 0 "+o+" c"),s.push("-"+l+" "+o+" -"+o+" "+l+" -"+o+" 0 c"),s.push("-"+o+" -"+l+" -"+l+" -"+o+" 0 -"+o+" c"),s.push(l+" -"+o+" "+o+" -"+l+" "+o+" 0 c"),s.push("f"),s.push("Q"),a.stream=s.join(`
`),a}},Cross:{createAppearanceStream:function(t){var a={D:{Off:pa.RadioButton.Cross.OffPushDown},N:{}};return a.N[t]=pa.RadioButton.Cross.YesNormal,a.D[t]=pa.RadioButton.Cross.YesPushDown,a},getCA:function(){return"8"},YesNormal:function(t){var a=Mo(t);a.scope=t.scope;var s=[],i=pa.internal.calculateCross(t);return s.push("q"),s.push("1 1 "+za(pa.internal.getWidth(t)-2)+" "+za(pa.internal.getHeight(t)-2)+" re"),s.push("W"),s.push("n"),s.push(za(i.x1.x)+" "+za(i.x1.y)+" m"),s.push(za(i.x2.x)+" "+za(i.x2.y)+" l"),s.push(za(i.x4.x)+" "+za(i.x4.y)+" m"),s.push(za(i.x3.x)+" "+za(i.x3.y)+" l"),s.push("s"),s.push("Q"),a.stream=s.join(`
`),a},YesPushDown:function(t){var a=Mo(t);a.scope=t.scope;var s=pa.internal.calculateCross(t),i=[];return i.push("0.749023 g"),i.push("0 0 "+za(pa.internal.getWidth(t))+" "+za(pa.internal.getHeight(t))+" re"),i.push("f"),i.push("q"),i.push("1 1 "+za(pa.internal.getWidth(t)-2)+" "+za(pa.internal.getHeight(t)-2)+" re"),i.push("W"),i.push("n"),i.push(za(s.x1.x)+" "+za(s.x1.y)+" m"),i.push(za(s.x2.x)+" "+za(s.x2.y)+" l"),i.push(za(s.x4.x)+" "+za(s.x4.y)+" m"),i.push(za(s.x3.x)+" "+za(s.x3.y)+" l"),i.push("s"),i.push("Q"),a.stream=i.join(`
`),a},OffPushDown:function(t){var a=Mo(t);a.scope=t.scope;var s=[];return s.push("0.749023 g"),s.push("0 0 "+za(pa.internal.getWidth(t))+" "+za(pa.internal.getHeight(t))+" re"),s.push("f"),a.stream=s.join(`
`),a}}},createDefaultAppearanceStream:function(t){var a=t.scope.internal.getFont(t.fontName,t.fontStyle).id,s=t.scope.__private__.encodeColorString(t.color);return"/"+a+" "+t.fontSize+" Tf "+s}};pa.internal={Bezier_C:.551915024494,calculateCross:function(t){var a=pa.internal.getWidth(t),s=pa.internal.getHeight(t),i=Math.min(a,s);return{x1:{x:(a-i)/2,y:(s-i)/2+i},x2:{x:(a-i)/2+i,y:(s-i)/2},x3:{x:(a-i)/2,y:(s-i)/2},x4:{x:(a-i)/2+i,y:(s-i)/2+i}}}},pa.internal.getWidth=function(t){var a=0;return Ls(t)==="object"&&(a=Av(t.Rect[2])),a},pa.internal.getHeight=function(t){var a=0;return Ls(t)==="object"&&(a=Av(t.Rect[3])),a};var EB=Nn.addField=function(t){if(FB(this,t),!(t instanceof wo))throw new Error("Invalid argument passed to jsPDF.addField.");var a;return(a=t).scope.internal.acroformPlugin.printedOut&&(a.scope.internal.acroformPlugin.printedOut=!1,a.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),a.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(a),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};Nn.AcroFormChoiceField=Ic,Nn.AcroFormListBox=Pc,Nn.AcroFormComboBox=Hc,Nn.AcroFormEditBox=WA,Nn.AcroFormButton=Yn,Nn.AcroFormPushButton=YA,Nn.AcroFormRadioButton=Mc,Nn.AcroFormCheckBox=JA,Nn.AcroFormTextField=lc,Nn.AcroFormPasswordField=XA,Nn.AcroFormAppearance=pa,Nn.AcroForm={ChoiceField:Ic,ListBox:Pc,ComboBox:Hc,EditBox:WA,Button:Yn,PushButton:YA,RadioButton:Mc,CheckBox:JA,TextField:lc,PasswordField:XA,Appearance:pa},ua.AcroForm={ChoiceField:Ic,ListBox:Pc,ComboBox:Hc,EditBox:WA,Button:Yn,PushButton:YA,RadioButton:Mc,CheckBox:JA,TextField:lc,PasswordField:XA,Appearance:pa};ua.AcroForm;function z1(t){return t.reduce(function(a,s,i){return a[s]=i,a},{})}(function(t){var a="addImage_";t.__addimage__={};var s="UNKNOWN",i={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},o=t.__addimage__.getImageFileTypeByImageData=function(T,Q){var q,ne,R,z,ee,le=s;if((Q=Q||s)==="RGBA"||T.data!==void 0&&T.data instanceof Uint8ClampedArray&&"height"in T&&"width"in T)return"RGBA";if(G(T))for(ee in i)for(R=i[ee],q=0;q<R.length;q+=1){for(z=!0,ne=0;ne<R[q].length;ne+=1)if(R[q][ne]!==void 0&&R[q][ne]!==T[ne]){z=!1;break}if(z===!0){le=ee;break}}else for(ee in i)for(R=i[ee],q=0;q<R.length;q+=1){for(z=!0,ne=0;ne<R[q].length;ne+=1)if(R[q][ne]!==void 0&&R[q][ne]!==T.charCodeAt(ne)){z=!1;break}if(z===!0){le=ee;break}}return le===s&&Q!==s&&(le=Q),le},l=function T(Q){for(var q=this.internal.write,ne=this.internal.putStream,R=(0,this.internal.getFilters)();R.indexOf("FlateEncode")!==-1;)R.splice(R.indexOf("FlateEncode"),1);Q.objectId=this.internal.newObject();var z=[];if(z.push({key:"Type",value:"/XObject"}),z.push({key:"Subtype",value:"/Image"}),z.push({key:"Width",value:Q.width}),z.push({key:"Height",value:Q.height}),Q.colorSpace===_.INDEXED?z.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(Q.palette.length/3-1)+" "+("sMask"in Q&&Q.sMask!==void 0?Q.objectId+2:Q.objectId+1)+" 0 R]"}):(z.push({key:"ColorSpace",value:"/"+Q.colorSpace}),Q.colorSpace===_.DEVICE_CMYK&&z.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),z.push({key:"BitsPerComponent",value:Q.bitsPerComponent}),"decodeParameters"in Q&&Q.decodeParameters!==void 0&&z.push({key:"DecodeParms",value:"<<"+Q.decodeParameters+">>"}),"transparency"in Q&&Array.isArray(Q.transparency)&&Q.transparency.length>0){for(var ee="",le=0,Be=Q.transparency.length;le<Be;le++)ee+=Q.transparency[le]+" "+Q.transparency[le]+" ";z.push({key:"Mask",value:"["+ee+"]"})}Q.sMask!==void 0&&z.push({key:"SMask",value:Q.objectId+1+" 0 R"});var $=Q.filter!==void 0?["/"+Q.filter]:void 0;if(ne({data:Q.data,additionalKeyValues:z,alreadyAppliedFilters:$,objectId:Q.objectId}),q("endobj"),"sMask"in Q&&Q.sMask!==void 0){var ue,k=(ue=Q.sMaskBitsPerComponent)!==null&&ue!==void 0?ue:Q.bitsPerComponent,I={width:Q.width,height:Q.height,colorSpace:"DeviceGray",bitsPerComponent:k,data:Q.sMask};"filter"in Q&&(I.decodeParameters="/Predictor ".concat(Q.predictor," /Colors 1 /BitsPerComponent ").concat(k," /Columns ").concat(Q.width),I.filter=Q.filter),T.call(this,I)}if(Q.colorSpace===_.INDEXED){var H=this.internal.newObject();ne({data:U(new Uint8Array(Q.palette)),objectId:H}),q("endobj")}},d=function(){var T=this.internal.collections[a+"images"];for(var Q in T)l.call(this,T[Q])},u=function(){var T,Q=this.internal.collections[a+"images"],q=this.internal.write;for(var ne in Q)q("/I"+(T=Q[ne]).index,T.objectId,"0","R")},A=function(){this.internal.collections[a+"images"]||(this.internal.collections[a+"images"]={},this.internal.events.subscribe("putResources",d),this.internal.events.subscribe("putXobjectDict",u))},p=function(){var T=this.internal.collections[a+"images"];return A.call(this),T},m=function(){return Object.keys(this.internal.collections[a+"images"]).length},b=function(T){return typeof t["process"+T.toUpperCase()]=="function"},v=function(T){return Ls(T)==="object"&&T.nodeType===1},x=function(T,Q){if(T.nodeName==="IMG"&&T.hasAttribute("src")){var q=""+T.getAttribute("src");if(q.indexOf("data:image/")===0)return tp(unescape(q).split("base64,").pop());var ne=t.loadFile(q,!0);if(ne!==void 0)return ne}if(T.nodeName==="CANVAS"){if(T.width===0||T.height===0)throw new Error("Given canvas must have data. Canvas width: "+T.width+", height: "+T.height);var R;switch(Q){case"PNG":R="image/png";break;case"WEBP":R="image/webp";break;default:R="image/jpeg"}return tp(T.toDataURL(R,1).split("base64,").pop())}},C=function(T){var Q=this.internal.collections[a+"images"];if(Q){for(var q in Q)if(T===Q[q].alias)return Q[q]}},D=function(T,Q,q){return T||Q||(T=-96,Q=-96),T<0&&(T=-1*q.width*72/T/this.internal.scaleFactor),Q<0&&(Q=-1*q.height*72/Q/this.internal.scaleFactor),T===0&&(T=Q*q.width/q.height),Q===0&&(Q=T*q.height/q.width),[T,Q]},S=function(T,Q,q,ne,R,z){var ee=D.call(this,q,ne,R),le=this.internal.getCoordinateString,Be=this.internal.getVerticalCoordinateString,$=p.call(this);if(q=ee[0],ne=ee[1],$[R.index]=R,z){z*=Math.PI/180;var ue=Math.cos(z),k=Math.sin(z),I=function(re){return re.toFixed(4)},H=[I(ue),I(k),I(-1*k),I(ue),0,0,"cm"]}this.internal.write("q"),z?(this.internal.write([1,"0","0",1,le(T),Be(Q+ne),"cm"].join(" ")),this.internal.write(H.join(" ")),this.internal.write([le(q),"0","0",le(ne),"0","0","cm"].join(" "))):this.internal.write([le(q),"0","0",le(ne),le(T),Be(Q+ne),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+R.index+" Do"),this.internal.write("Q")},_=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var N=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},O=t.__addimage__.sHashCode=function(T){var Q,q,ne=0;if(typeof T=="string")for(q=T.length,Q=0;Q<q;Q++)ne=(ne<<5)-ne+T.charCodeAt(Q),ne|=0;else if(G(T))for(q=T.byteLength/2,Q=0;Q<q;Q++)ne=(ne<<5)-ne+T[Q],ne|=0;return ne},L=t.__addimage__.validateStringAsBase64=function(T){(T=T||"").toString().trim();var Q=!0;return T.length===0&&(Q=!1),T.length%4!=0&&(Q=!1),/^[A-Za-z0-9+/]+$/.test(T.substr(0,T.length-2))===!1&&(Q=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(T.substr(-2))===!1&&(Q=!1),Q},te=t.__addimage__.extractImageFromDataUrl=function(T){if(T==null||!(T=T.trim()).startsWith("data:"))return null;var Q=T.indexOf(",");return Q<0?null:T.substring(0,Q).trim().endsWith("base64")?T.substring(Q+1):null};t.__addimage__.isArrayBuffer=function(T){return T instanceof ArrayBuffer};var G=t.__addimage__.isArrayBufferView=function(T){return T instanceof Int8Array||T instanceof Uint8Array||T instanceof Uint8ClampedArray||T instanceof Int16Array||T instanceof Uint16Array||T instanceof Int32Array||T instanceof Uint32Array||T instanceof Float32Array||T instanceof Float64Array},X=t.__addimage__.binaryStringToUint8Array=function(T){for(var Q=T.length,q=new Uint8Array(Q),ne=0;ne<Q;ne++)q[ne]=T.charCodeAt(ne);return q},U=t.__addimage__.arrayBufferToBinaryString=function(T){for(var Q="",q=G(T)?T:new Uint8Array(T),ne=0;ne<q.length;ne+=8192)Q+=String.fromCharCode.apply(null,q.subarray(ne,ne+8192));return Q};t.addImage=function(){var T,Q,q,ne,R,z,ee,le,Be;if(typeof arguments[1]=="number"?(Q=s,q=arguments[1],ne=arguments[2],R=arguments[3],z=arguments[4],ee=arguments[5],le=arguments[6],Be=arguments[7]):(Q=arguments[1],q=arguments[2],ne=arguments[3],R=arguments[4],z=arguments[5],ee=arguments[6],le=arguments[7],Be=arguments[8]),Ls(T=arguments[0])==="object"&&!v(T)&&"imageData"in T){var $=T;T=$.imageData,Q=$.format||Q||s,q=$.x||q||0,ne=$.y||ne||0,R=$.w||$.width||R,z=$.h||$.height||z,ee=$.alias||ee,le=$.compression||le,Be=$.rotation||$.angle||Be}var ue=this.internal.getFilters();if(le===void 0&&ue.indexOf("FlateEncode")!==-1&&(le="SLOW"),isNaN(q)||isNaN(ne))throw new Error("Invalid coordinates passed to jsPDF.addImage");A.call(this);var k=E.call(this,T,Q,ee,le);return S.call(this,q,ne,R,z,k,Be),this};var E=function(T,Q,q,ne){var R,z,ee;if(typeof T=="string"&&o(T)===s){T=unescape(T);var le=Y(T,!1);(le!==""||(le=t.loadFile(T,!0))!==void 0)&&(T=le)}if(v(T)&&(T=x(T,Q)),Q=o(T,Q),!b(Q))throw new Error("addImage does not support files of type '"+Q+"', please ensure that a plugin for '"+Q+"' support is added.");if(((ee=q)==null||ee.length===0)&&(q=function(Be){return typeof Be=="string"||G(Be)?O(Be):G(Be.data)?O(Be.data):null}(T)),(R=C.call(this,q))||(T instanceof Uint8Array||Q==="RGBA"||(z=T,T=X(T)),R=this["process"+Q.toUpperCase()](T,m.call(this),q,function(Be){return Be&&typeof Be=="string"&&(Be=Be.toUpperCase()),Be in t.image_compression?Be:N.NONE}(ne),z)),!R)throw new Error("An unknown error occurred whilst processing the image.");return R},Y=t.__addimage__.convertBase64ToBinaryString=function(T,Q){Q=typeof Q!="boolean"||Q;var q,ne="";if(typeof T=="string"){var R;q=(R=te(T))!==null&&R!==void 0?R:T;try{ne=tp(q)}catch(z){if(Q)throw L(q)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+z.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return ne};t.getImageProperties=function(T){var Q,q,ne="";if(v(T)&&(T=x(T)),typeof T=="string"&&o(T)===s&&((ne=Y(T,!1))===""&&(ne=t.loadFile(T)||""),T=ne),q=o(T),!b(q))throw new Error("addImage does not support files of type '"+q+"', please ensure that a plugin for '"+q+"' support is added.");if(T instanceof Uint8Array||(T=X(T)),!(Q=this["process"+q.toUpperCase()](T)))throw new Error("An unknown error occurred whilst processing the image");return Q.fileType=q,Q}})(ua.API),function(t){var a=function(s){if(s!==void 0&&s!="")return!0};ua.API.events.push(["addPage",function(s){this.internal.getPageInfo(s.pageNumber).pageContext.annotations=[]}]),t.events.push(["putPage",function(s){for(var i,o,l,d=this.internal.getCoordinateString,u=this.internal.getVerticalCoordinateString,A=this.internal.getPageInfoByObjId(s.objId),p=s.pageContext.annotations,m=!1,b=0;b<p.length&&!m;b++)switch((i=p[b]).type){case"link":(a(i.options.url)||a(i.options.pageNumber))&&(m=!0);break;case"reference":case"text":case"freetext":m=!0}if(m!=0){this.internal.write("/Annots [");for(var v=0;v<p.length;v++){i=p[v];var x=this.internal.pdfEscape,C=this.internal.getEncryptor(s.objId);switch(i.type){case"reference":this.internal.write(" "+i.object.objId+" 0 R ");break;case"text":var D=this.internal.newAdditionalObject(),S=this.internal.newAdditionalObject(),_=this.internal.getEncryptor(D.objId),N=i.title||"Note";l="<</Type /Annot /Subtype /Text "+(o="/Rect ["+d(i.bounds.x)+" "+u(i.bounds.y+i.bounds.h)+" "+d(i.bounds.x+i.bounds.w)+" "+u(i.bounds.y)+"] ")+"/Contents ("+x(_(i.contents))+")",l+=" /Popup "+S.objId+" 0 R",l+=" /P "+A.objId+" 0 R",l+=" /T ("+x(_(N))+") >>",D.content=l;var O=D.objId+" 0 R";l="<</Type /Annot /Subtype /Popup "+(o="/Rect ["+d(i.bounds.x+30)+" "+u(i.bounds.y+i.bounds.h)+" "+d(i.bounds.x+i.bounds.w+30)+" "+u(i.bounds.y)+"] ")+" /Parent "+O,i.open&&(l+=" /Open true"),l+=" >>",S.content=l,this.internal.write(D.objId,"0 R",S.objId,"0 R");break;case"freetext":o="/Rect ["+d(i.bounds.x)+" "+u(i.bounds.y)+" "+d(i.bounds.x+i.bounds.w)+" "+u(i.bounds.y+i.bounds.h)+"] ";var L=i.color||"#000000";l="<</Type /Annot /Subtype /FreeText "+o+"/Contents ("+x(C(i.contents))+")",l+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+L+")",l+=" /Border [0 0 0]",l+=" >>",this.internal.write(l);break;case"link":if(i.options.name){var te=this.annotations._nameMap[i.options.name];i.options.pageNumber=te.page,i.options.top=te.y}else i.options.top||(i.options.top=0);if(o="/Rect ["+i.finalBounds.x+" "+i.finalBounds.y+" "+i.finalBounds.w+" "+i.finalBounds.h+"] ",l="",i.options.url)l="<</Type /Annot /Subtype /Link "+o+"/Border [0 0 0] /A <</S /URI /URI ("+x(C(i.options.url))+") >>";else if(i.options.pageNumber)switch(l="<</Type /Annot /Subtype /Link "+o+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(i.options.pageNumber).objId+" 0 R",i.options.magFactor=i.options.magFactor||"XYZ",i.options.magFactor){case"Fit":l+=" /Fit]";break;case"FitH":l+=" /FitH "+i.options.top+"]";break;case"FitV":i.options.left=i.options.left||0,l+=" /FitV "+i.options.left+"]";break;default:var G=u(i.options.top);i.options.left=i.options.left||0,i.options.zoom===void 0&&(i.options.zoom=0),l+=" /XYZ "+i.options.left+" "+G+" "+i.options.zoom+"]"}l!=""&&(l+=" >>",this.internal.write(l))}}this.internal.write("]")}}]),t.createAnnotation=function(s){var i=this.internal.getCurrentPageInfo();switch(s.type){case"link":this.link(s.bounds.x,s.bounds.y,s.bounds.w,s.bounds.h,s);break;case"text":case"freetext":i.pageContext.annotations.push(s)}},t.link=function(s,i,o,l,d){var u=this.internal.getCurrentPageInfo(),A=this.internal.getCoordinateString,p=this.internal.getVerticalCoordinateString;u.pageContext.annotations.push({finalBounds:{x:A(s),y:p(i),w:A(s+o),h:p(i+l)},options:d,type:"link"})},t.textWithLink=function(s,i,o,l){var d,u,A=this.getTextWidth(s),p=this.internal.getLineHeight()/this.internal.scaleFactor;if(l.maxWidth!==void 0){u=l.maxWidth;var m=this.splitTextToSize(s,u).length;d=Math.ceil(p*m)}else u=A,d=p;return this.text(s,i,o,l),o+=.2*p,l.align==="center"&&(i-=A/2),l.align==="right"&&(i-=A),this.link(i,o-p,u,d,l),A},t.getTextWidth=function(s){var i=this.internal.getFontSize();return this.getStringUnitWidth(s)*i/this.internal.scaleFactor}}(ua.API),function(t){var a={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},s={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},i={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},o=[1570,1571,1573,1575];t.__arabicParser__={};var l=t.__arabicParser__.isInArabicSubstitutionA=function(D){return a[D.charCodeAt(0)]!==void 0},d=t.__arabicParser__.isArabicLetter=function(D){return typeof D=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(D)},u=t.__arabicParser__.isArabicEndLetter=function(D){return d(D)&&l(D)&&a[D.charCodeAt(0)].length<=2},A=t.__arabicParser__.isArabicAlfLetter=function(D){return d(D)&&o.indexOf(D.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function(D){return d(D)&&l(D)&&a[D.charCodeAt(0)].length>=1};var p=t.__arabicParser__.arabicLetterHasFinalForm=function(D){return d(D)&&l(D)&&a[D.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function(D){return d(D)&&l(D)&&a[D.charCodeAt(0)].length>=3};var m=t.__arabicParser__.arabicLetterHasMedialForm=function(D){return d(D)&&l(D)&&a[D.charCodeAt(0)].length==4},b=t.__arabicParser__.resolveLigatures=function(D){var S=0,_=s,N="",O=0;for(S=0;S<D.length;S+=1)_[D.charCodeAt(S)]!==void 0?(O++,typeof(_=_[D.charCodeAt(S)])=="number"&&(N+=String.fromCharCode(_),_=s,O=0),S===D.length-1&&(_=s,N+=D.charAt(S-(O-1)),S-=O-1,O=0)):(_=s,N+=D.charAt(S-O),S-=O,O=0);return N};t.__arabicParser__.isArabicDiacritic=function(D){return D!==void 0&&i[D.charCodeAt(0)]!==void 0};var v=t.__arabicParser__.getCorrectForm=function(D,S,_){return d(D)?l(D)===!1?-1:!p(D)||!d(S)&&!d(_)||!d(_)&&u(S)||u(D)&&!d(S)||u(D)&&A(S)||u(D)&&u(S)?0:m(D)&&d(S)&&!u(S)&&d(_)&&p(_)?3:u(D)||!d(_)?1:2:-1},x=function(D){var S=0,_=0,N=0,O="",L="",te="",G=(D=D||"").split("\\s+"),X=[];for(S=0;S<G.length;S+=1){for(X.push(""),_=0;_<G[S].length;_+=1)O=G[S][_],L=G[S][_-1],te=G[S][_+1],d(O)?(N=v(O,L,te),X[S]+=N!==-1?String.fromCharCode(a[O.charCodeAt(0)][N]):O):X[S]+=O;X[S]=b(X[S])}return X.join(" ")},C=t.__arabicParser__.processArabic=t.processArabic=function(){var D,S=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,_=[];if(Array.isArray(S)){var N=0;for(_=[],N=0;N<S.length;N+=1)Array.isArray(S[N])?_.push([x(S[N][0]),S[N][1],S[N][2]]):_.push([x(S[N])]);D=_}else D=x(S);return typeof arguments[0]=="string"?D:(arguments[0].text=D,arguments[0])};t.events.push(["preProcessText",C])}(ua.API),ua.API.autoPrint=function(t){var a;return(t=t||{}).variant=t.variant||"non-conform",t.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){a=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+a+" 0 R")})),this},function(t){var a=function(){var s=void 0;Object.defineProperty(this,"pdf",{get:function(){return s},set:function(u){s=u}});var i=150;Object.defineProperty(this,"width",{get:function(){return i},set:function(u){i=isNaN(u)||Number.isInteger(u)===!1||u<0?150:u,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=i+1)}});var o=300;Object.defineProperty(this,"height",{get:function(){return o},set:function(u){o=isNaN(u)||Number.isInteger(u)===!1||u<0?300:u,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=o+1)}});var l=[];Object.defineProperty(this,"childNodes",{get:function(){return l},set:function(u){l=u}});var d={};Object.defineProperty(this,"style",{get:function(){return d},set:function(u){d=u}}),Object.defineProperty(this,"parentNode",{})};a.prototype.getContext=function(s,i){var o;if((s=s||"2d")!=="2d")return null;for(o in i)this.pdf.context2d.hasOwnProperty(o)&&(this.pdf.context2d[o]=i[o]);return this.pdf.context2d._canvas=this,this.pdf.context2d},a.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new a,this.canvas.pdf=this}])}(ua.API),function(t){var a={left:0,top:0,bottom:0,right:0},s=!1,i=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},a),this.internal.__cell__.margins.width=this.getPageWidth(),o.call(this))},o=function(){this.internal.__cell__.lastCell=new l,this.internal.__cell__.pages=1},l=function(){var A=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return A},set:function(D){A=D}});var p=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return p},set:function(D){p=D}});var m=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return m},set:function(D){m=D}});var b=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return b},set:function(D){b=D}});var v=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return v},set:function(D){v=D}});var x=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return x},set:function(D){x=D}});var C=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return C},set:function(D){C=D}}),this};l.prototype.clone=function(){return new l(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},l.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(A){return i.call(this),this.internal.__cell__.headerFunction=typeof A=="function"?A:void 0,this},t.getTextDimensions=function(A,p){i.call(this);var m=(p=p||{}).fontSize||this.getFontSize(),b=p.font||this.getFont(),v=p.scaleFactor||this.internal.scaleFactor,x=0,C=0,D=0,S=this;if(!Array.isArray(A)&&typeof A!="string"){if(typeof A!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");A=String(A)}var _=p.maxWidth;_>0?typeof A=="string"?A=this.splitTextToSize(A,_):Object.prototype.toString.call(A)==="[object Array]"&&(A=A.reduce(function(O,L){return O.concat(S.splitTextToSize(L,_))},[])):A=Array.isArray(A)?A:[A];for(var N=0;N<A.length;N++)x<(D=this.getStringUnitWidth(A[N],{font:b})*m)&&(x=D);return x!==0&&(C=A.length),{w:x/=v,h:Math.max((C*m*this.getLineHeightFactor()-m*(this.getLineHeightFactor()-1))/v,0)}},t.cellAddPage=function(){i.call(this),this.addPage();var A=this.internal.__cell__.margins||a;return this.internal.__cell__.lastCell=new l(A.left,A.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var d=t.cell=function(){var A;A=arguments[0]instanceof l?arguments[0]:new l(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),i.call(this);var p=this.internal.__cell__.lastCell,m=this.internal.__cell__.padding,b=this.internal.__cell__.margins||a,v=this.internal.__cell__.tableHeaderRow,x=this.internal.__cell__.printHeaders;return p.lineNumber!==void 0&&(p.lineNumber===A.lineNumber?(A.x=(p.x||0)+(p.width||0),A.y=p.y||0):p.y+p.height+A.height+b.bottom>this.getPageHeight()?(this.cellAddPage(),A.y=b.top,x&&v&&(this.printHeaderRow(A.lineNumber,!0),A.y+=v[0].height)):A.y=p.y+p.height||A.y),A.text[0]!==void 0&&(this.rect(A.x,A.y,A.width,A.height,s===!0?"FD":void 0),A.align==="right"?this.text(A.text,A.x+A.width-m,A.y+m,{align:"right",baseline:"top"}):A.align==="center"?this.text(A.text,A.x+A.width/2,A.y+m,{align:"center",baseline:"top",maxWidth:A.width-m-m}):this.text(A.text,A.x+m,A.y+m,{align:"left",baseline:"top",maxWidth:A.width-m-m})),this.internal.__cell__.lastCell=A,this};t.table=function(A,p,m,b,v){if(i.call(this),!m)throw new Error("No data for PDF table.");var x,C,D,S,_=[],N=[],O=[],L={},te={},G=[],X=[],U=(v=v||{}).autoSize||!1,E=v.printHeaders!==!1,Y=v.css&&v.css["font-size"]!==void 0?16*v.css["font-size"]:v.fontSize||12,T=v.margins||Object.assign({width:this.getPageWidth()},a),Q=typeof v.padding=="number"?v.padding:3,q=v.headerBackgroundColor||"#c8c8c8",ne=v.headerTextColor||"#000";if(o.call(this),this.internal.__cell__.printHeaders=E,this.internal.__cell__.margins=T,this.internal.__cell__.table_font_size=Y,this.internal.__cell__.padding=Q,this.internal.__cell__.headerBackgroundColor=q,this.internal.__cell__.headerTextColor=ne,this.setFontSize(Y),b==null)N=_=Object.keys(m[0]),O=_.map(function(){return"left"});else if(Array.isArray(b)&&Ls(b[0])==="object")for(_=b.map(function($){return $.name}),N=b.map(function($){return $.prompt||$.name||""}),O=b.map(function($){return $.align||"left"}),x=0;x<b.length;x+=1)te[b[x].name]=.7499990551181103*b[x].width;else Array.isArray(b)&&typeof b[0]=="string"&&(N=_=b,O=_.map(function(){return"left"}));if(U||Array.isArray(b)&&typeof b[0]=="string")for(x=0;x<_.length;x+=1){for(L[S=_[x]]=m.map(function($){return $[S]}),this.setFont(void 0,"bold"),G.push(this.getTextDimensions(N[x],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),C=L[S],this.setFont(void 0,"normal"),D=0;D<C.length;D+=1)G.push(this.getTextDimensions(C[D],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);te[S]=Math.max.apply(null,G)+Q+Q,G=[]}if(E){var R={};for(x=0;x<_.length;x+=1)R[_[x]]={},R[_[x]].text=N[x],R[_[x]].align=O[x];var z=u.call(this,R,te);X=_.map(function($){return new l(A,p,te[$],z,R[$].text,void 0,R[$].align)}),this.setTableHeaderRow(X),this.printHeaderRow(1,!1)}var ee=b.reduce(function($,ue){return $[ue.name]=ue.align,$},{});for(x=0;x<m.length;x+=1){"rowStart"in v&&v.rowStart instanceof Function&&v.rowStart({row:x,data:m[x]},this);var le=u.call(this,m[x],te);for(D=0;D<_.length;D+=1){var Be=m[x][_[D]];"cellStart"in v&&v.cellStart instanceof Function&&v.cellStart({row:x,col:D,data:Be},this),d.call(this,new l(A,p,te[_[D]],le,Be,x+2,ee[_[D]]))}}return this.internal.__cell__.table_x=A,this.internal.__cell__.table_y=p,this};var u=function(A,p){var m=this.internal.__cell__.padding,b=this.internal.__cell__.table_font_size,v=this.internal.scaleFactor;return Object.keys(A).map(function(x){var C=A[x];return this.splitTextToSize(C.hasOwnProperty("text")?C.text:C,p[x]-m-m)},this).map(function(x){return this.getLineHeightFactor()*x.length*b/v+m+m},this).reduce(function(x,C){return Math.max(x,C)},0)};t.setTableHeaderRow=function(A){i.call(this),this.internal.__cell__.tableHeaderRow=A},t.printHeaderRow=function(A,p){if(i.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var m;if(s=!0,typeof this.internal.__cell__.headerFunction=="function"){var b=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new l(b[0],b[1],b[2],b[3],void 0,-1)}this.setFont(void 0,"bold");for(var v=[],x=0;x<this.internal.__cell__.tableHeaderRow.length;x+=1){m=this.internal.__cell__.tableHeaderRow[x].clone(),p&&(m.y=this.internal.__cell__.margins.top||0,v.push(m)),m.lineNumber=A;var C=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),d.call(this,m),this.setTextColor(C)}v.length>0&&this.setTableHeaderRow(v),this.setFont(void 0,"normal"),s=!1}}(ua.API);var q1={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},K1=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],og=z1(K1),G1=[100,200,300,400,500,600,700,800,900],UB=z1(G1);function vf(t){var a=t.family.replace(/"|'/g,"").toLowerCase(),s=function(l){return q1[l=l||"normal"]?l:"normal"}(t.style),i=function(l){return l?typeof l=="number"?l>=100&&l<=900&&l%100==0?l:400:/^\d00$/.test(l)?parseInt(l):l==="bold"?700:400:400}(t.weight),o=function(l){return typeof og[l=l||"normal"]=="number"?l:"normal"}(t.stretch);return{family:a,style:s,weight:i,stretch:o,src:t.src||[],ref:t.ref||{name:a,style:[o,s,i].join(" ")}}}function uv(t,a,s,i){var o;for(o=s;o>=0&&o<a.length;o+=i)if(t[a[o]])return t[a[o]];for(o=s;o>=0&&o<a.length;o-=i)if(t[a[o]])return t[a[o]]}var LB={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},hv={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function pv(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function mv(t){return t.trimLeft()}function TB(t,a){for(var s=0;s<t.length;){if(t.charAt(s)===a)return[t.substring(0,s),t.substring(s+1)];s+=1}return null}function QB(t){var a=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return a===null?null:[a[0],t.substring(a[0].length)]}var Ch,fv,gv,Cd,Sh,xv,yv,vv,bf=["times"];function bv(t,a,s,i,o){var l=4,d=wv;switch(o){case ua.API.image_compression.FAST:l=1,d=jv;break;case ua.API.image_compression.MEDIUM:l=6,d=_v;break;case ua.API.image_compression.SLOW:l=9,d=Nv}t=function(A,p,m,b){for(var v,x=A.length/p,C=new Uint8Array(A.length+x),D=[RB,jv,wv,_v,Nv],S=0;S<x;S+=1){var _=S*p,N=A.subarray(_,_+p);if(b)C.set(b(N,m,v),_+S);else{for(var O=D.length,L=[],te=0;te<O;te+=1)L[te]=D[te](N,m,v);var G=IB(L.concat());C.set(L[G],_+S)}v=N}return C}(t,a,Math.ceil(s*i/8),d);var u=eg(t,{level:l});return ua.API.__addimage__.arrayBufferToBinaryString(u)}function RB(t){var a=Array.apply([],t);return a.unshift(0),a}function jv(t,a){var s=t.length,i=[];i[0]=1;for(var o=0;o<s;o+=1){var l=t[o-a]||0;i[o+1]=t[o]-l+256&255}return i}function wv(t,a,s){var i=t.length,o=[];o[0]=2;for(var l=0;l<i;l+=1){var d=s&&s[l]||0;o[l+1]=t[l]-d+256&255}return o}function _v(t,a,s){var i=t.length,o=[];o[0]=3;for(var l=0;l<i;l+=1){var d=t[l-a]||0,u=s&&s[l]||0;o[l+1]=t[l]+256-(d+u>>>1)&255}return o}function Nv(t,a,s){var i=t.length,o=[];o[0]=4;for(var l=0;l<i;l+=1){var d=DB(t[l-a]||0,s&&s[l]||0,s&&s[l-a]||0);o[l+1]=t[l]-d+256&255}return o}function DB(t,a,s){if(t===a&&a===s)return t;var i=Math.abs(a-s),o=Math.abs(t-s),l=Math.abs(t+a-s-s);return i<=o&&i<=l?t:o<=l?a:s}function IB(t){var a=t.map(function(s){return s.reduce(function(i,o){return i+Math.abs(o)},0)});return a.indexOf(Math.min.apply(null,a))}function jf(t,a,s){var i=a*s,o=Math.floor(i/8),l=16-(i-8*o+s),d=(1<<s)-1;return V1(t,o)>>l&d}function Bv(t,a,s,i){var o=s*i,l=Math.floor(o/8),d=16-(o-8*l+i),u=(1<<i)-1,A=(a&u)<<d;(function(p,m,b){if(m+1<p.byteLength)p.setUint16(m,b,!1);else{var v=b>>8&255;p.setUint8(m,v)}})(t,l,V1(t,l)&~(u<<d)&65535|A)}function V1(t,a){return a+1<t.byteLength?t.getUint16(a,!1):t.getUint8(a)<<8}function PB(t){var a=0;if(t[a++]!==71||t[a++]!==73||t[a++]!==70||t[a++]!==56||(t[a++]+1&253)!=56||t[a++]!==97)throw new Error("Invalid GIF 87a/89a header.");var s=t[a++]|t[a++]<<8,i=t[a++]|t[a++]<<8,o=t[a++],l=o>>7,d=1<<1+(7&o);t[a++],t[a++];var u=null,A=null;l&&(u=a,A=d,a+=3*d);var p=!0,m=[],b=0,v=null,x=0,C=null;for(this.width=s,this.height=i;p&&a<t.length;)switch(t[a++]){case 33:switch(t[a++]){case 255:if(t[a]!==11||t[a+1]==78&&t[a+2]==69&&t[a+3]==84&&t[a+4]==83&&t[a+5]==67&&t[a+6]==65&&t[a+7]==80&&t[a+8]==69&&t[a+9]==50&&t[a+10]==46&&t[a+11]==48&&t[a+12]==3&&t[a+13]==1&&t[a+16]==0)a+=14,C=t[a++]|t[a++]<<8,a++;else for(a+=12;;){if(!((T=t[a++])>=0))throw Error("Invalid block size");if(T===0)break;a+=T}break;case 249:if(t[a++]!==4||t[a+4]!==0)throw new Error("Invalid graphics extension block.");var D=t[a++];b=t[a++]|t[a++]<<8,v=t[a++],1&D||(v=null),x=D>>2&7,a++;break;case 254:for(;;){if(!((T=t[a++])>=0))throw Error("Invalid block size");if(T===0)break;a+=T}break;default:throw new Error("Unknown graphic control label: 0x"+t[a-1].toString(16))}break;case 44:var S=t[a++]|t[a++]<<8,_=t[a++]|t[a++]<<8,N=t[a++]|t[a++]<<8,O=t[a++]|t[a++]<<8,L=t[a++],te=L>>6&1,G=1<<1+(7&L),X=u,U=A,E=!1;L>>7&&(E=!0,X=a,U=G,a+=3*G);var Y=a;for(a++;;){var T;if(!((T=t[a++])>=0))throw Error("Invalid block size");if(T===0)break;a+=T}m.push({x:S,y:_,width:N,height:O,has_local_palette:E,palette_offset:X,palette_size:U,data_offset:Y,data_length:a-Y,transparent_index:v,interlaced:!!te,delay:b,disposal:x});break;case 59:p=!1;break;default:throw new Error("Unknown gif block: 0x"+t[a-1].toString(16))}this.numFrames=function(){return m.length},this.loopCount=function(){return C},this.frameInfo=function(Q){if(Q<0||Q>=m.length)throw new Error("Frame index out of range.");return m[Q]},this.decodeAndBlitFrameBGRA=function(Q,q){var ne=this.frameInfo(Q),R=ne.width*ne.height,z=new Uint8Array(R);Cv(t,ne.data_offset,z,R);var ee=ne.palette_offset,le=ne.transparent_index;le===null&&(le=256);var Be=ne.width,$=s-Be,ue=Be,k=4*(ne.y*s+ne.x),I=4*((ne.y+ne.height)*s+ne.x),H=k,re=4*$;ne.interlaced===!0&&(re+=4*s*7);for(var J=8,V=0,oe=z.length;V<oe;++V){var K=z[V];if(ue===0&&(ue=Be,(H+=re)>=I&&(re=4*$+4*s*(J-1),H=k+(Be+$)*(J<<1),J>>=1)),K===le)H+=4;else{var Ne=t[ee+3*K],Ee=t[ee+3*K+1],st=t[ee+3*K+2];q[H++]=st,q[H++]=Ee,q[H++]=Ne,q[H++]=255}--ue}},this.decodeAndBlitFrameRGBA=function(Q,q){var ne=this.frameInfo(Q),R=ne.width*ne.height,z=new Uint8Array(R);Cv(t,ne.data_offset,z,R);var ee=ne.palette_offset,le=ne.transparent_index;le===null&&(le=256);var Be=ne.width,$=s-Be,ue=Be,k=4*(ne.y*s+ne.x),I=4*((ne.y+ne.height)*s+ne.x),H=k,re=4*$;ne.interlaced===!0&&(re+=4*s*7);for(var J=8,V=0,oe=z.length;V<oe;++V){var K=z[V];if(ue===0&&(ue=Be,(H+=re)>=I&&(re=4*$+4*s*(J-1),H=k+(Be+$)*(J<<1),J>>=1)),K===le)H+=4;else{var Ne=t[ee+3*K],Ee=t[ee+3*K+1],st=t[ee+3*K+2];q[H++]=Ne,q[H++]=Ee,q[H++]=st,q[H++]=255}--ue}}}function Cv(t,a,s,i){for(var o=t[a++],l=1<<o,d=l+1,u=d+1,A=o+1,p=(1<<A)-1,m=0,b=0,v=0,x=t[a++],C=new Int32Array(4096),D=null;;){for(;m<16&&x!==0;)b|=t[a++]<<m,m+=8,x===1?x=t[a++]:--x;if(m<A)break;var S=b&p;if(b>>=A,m-=A,S!==l){if(S===d)break;for(var _=S<u?S:D,N=0,O=_;O>l;)O=C[O]>>8,++N;var L=O;if(v+N+(_!==S?1:0)>i)return void qs.log("Warning, gif stream longer than expected.");s[v++]=L;var te=v+=N;for(_!==S&&(s[v++]=L),O=_;N--;)O=C[O],s[--te]=255&O,O>>=8;D!==null&&u<4096&&(C[u++]=D<<8|L,u>=p+1&&A<12&&(++A,p=p<<1|1)),D=S}else u=d+1,p=(1<<(A=o+1))-1,D=null}return v!==i&&qs.log("Warning, gif stream shorter than expected."),s}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function wf(t){var a,s,i,o,l,d=Math.floor,u=new Array(64),A=new Array(64),p=new Array(64),m=new Array(64),b=new Array(65535),v=new Array(65535),x=new Array(64),C=new Array(64),D=[],S=0,_=7,N=new Array(64),O=new Array(64),L=new Array(64),te=new Array(256),G=new Array(2048),X=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],U=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],E=[0,1,2,3,4,5,6,7,8,9,10,11],Y=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],T=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],Q=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],q=[0,1,2,3,4,5,6,7,8,9,10,11],ne=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],R=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function z(k,I){for(var H=0,re=0,J=new Array,V=1;V<=16;V++){for(var oe=1;oe<=k[V];oe++)J[I[re]]=[],J[I[re]][0]=H,J[I[re]][1]=V,re++,H++;H*=2}return J}function ee(k){for(var I=k[0],H=k[1]-1;H>=0;)I&1<<H&&(S|=1<<_),H--,--_<0&&(S==255?(le(255),le(0)):le(S),_=7,S=0)}function le(k){D.push(k)}function Be(k){le(k>>8&255),le(255&k)}function $(k,I,H,re,J){for(var V,oe=J[0],K=J[240],Ne=function(Je,mt){var ve,et,Oe,kt,xt,lt,Ut,_t,Nt,qt,Bt=0;for(Nt=0;Nt<8;++Nt){ve=Je[Bt],et=Je[Bt+1],Oe=Je[Bt+2],kt=Je[Bt+3],xt=Je[Bt+4],lt=Je[Bt+5],Ut=Je[Bt+6];var Xt=ve+(_t=Je[Bt+7]),ta=ve-_t,ie=et+Ut,at=et-Ut,Ot=Oe+lt,Ct=Oe-lt,ia=kt+xt,ca=kt-xt,Za=Xt+ia,os=Xt-ia,Ba=ie+Ot,xa=ie-Ot;Je[Bt]=Za+Ba,Je[Bt+4]=Za-Ba;var Dt=.707106781*(xa+os);Je[Bt+2]=os+Dt,Je[Bt+6]=os-Dt;var ye=.382683433*((Za=ca+Ct)-(xa=at+ta)),Ce=.5411961*Za+ye,Ve=1.306562965*xa+ye,gt=.707106781*(Ba=Ct+at),Qt=ta+gt,ja=ta-gt;Je[Bt+5]=ja+Ce,Je[Bt+3]=ja-Ce,Je[Bt+1]=Qt+Ve,Je[Bt+7]=Qt-Ve,Bt+=8}for(Bt=0,Nt=0;Nt<8;++Nt){ve=Je[Bt],et=Je[Bt+8],Oe=Je[Bt+16],kt=Je[Bt+24],xt=Je[Bt+32],lt=Je[Bt+40],Ut=Je[Bt+48];var va=ve+(_t=Je[Bt+56]),_a=ve-_t,Na=et+Ut,Pa=et-Ut,ls=Oe+lt,cs=Oe-lt,Gs=kt+xt,yn=kt-xt,ge=va+Gs,it=va-Gs,$e=Na+ls,zt=Na-ls;Je[Bt]=ge+$e,Je[Bt+32]=ge-$e;var St=.707106781*(zt+it);Je[Bt+16]=it+St,Je[Bt+48]=it-St;var yt=.382683433*((ge=yn+cs)-(zt=Pa+_a)),Va=.5411961*ge+yt,Zt=1.306562965*zt+yt,W=.707106781*($e=cs+Pa),me=_a+W,ke=_a-W;Je[Bt+40]=ke+Va,Je[Bt+24]=ke-Va,Je[Bt+8]=me+Zt,Je[Bt+56]=me-Zt,Bt++}for(Nt=0;Nt<64;++Nt)qt=Je[Nt]*mt[Nt],x[Nt]=qt>0?qt+.5|0:qt-.5|0;return x}(k,I),Ee=0;Ee<64;++Ee)C[X[Ee]]=Ne[Ee];var st=C[0]-H;H=C[0],st==0?ee(re[0]):(ee(re[v[V=32767+st]]),ee(b[V]));for(var ut=63;ut>0&&C[ut]==0;)ut--;if(ut==0)return ee(oe),H;for(var Ge,_e=1;_e<=ut;){for(var Et=_e;C[_e]==0&&_e<=ut;)++_e;var Mt=_e-Et;if(Mt>=16){Ge=Mt>>4;for(var Ze=1;Ze<=Ge;++Ze)ee(K);Mt&=15}V=32767+C[_e],ee(J[(Mt<<4)+v[V]]),ee(b[V]),_e++}return ut!=63&&ee(oe),H}function ue(k){k=Math.min(Math.max(k,1),100),l!=k&&(function(I){for(var H=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],re=0;re<64;re++){var J=d((H[re]*I+50)/100);J=Math.min(Math.max(J,1),255),u[X[re]]=J}for(var V=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],oe=0;oe<64;oe++){var K=d((V[oe]*I+50)/100);K=Math.min(Math.max(K,1),255),A[X[oe]]=K}for(var Ne=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Ee=0,st=0;st<8;st++)for(var ut=0;ut<8;ut++)p[Ee]=1/(u[X[Ee]]*Ne[st]*Ne[ut]*8),m[Ee]=1/(A[X[Ee]]*Ne[st]*Ne[ut]*8),Ee++}(k<50?Math.floor(5e3/k):Math.floor(200-2*k)),l=k)}this.encode=function(k,I){I&&ue(I),D=new Array,S=0,_=7,Be(65496),Be(65504),Be(16),le(74),le(70),le(73),le(70),le(0),le(1),le(1),le(0),Be(1),Be(1),le(0),le(0),function(){Be(65499),Be(132),le(0);for(var et=0;et<64;et++)le(u[et]);le(1);for(var Oe=0;Oe<64;Oe++)le(A[Oe])}(),function(et,Oe){Be(65472),Be(17),le(8),Be(Oe),Be(et),le(3),le(1),le(17),le(0),le(2),le(17),le(1),le(3),le(17),le(1)}(k.width,k.height),function(){Be(65476),Be(418),le(0);for(var et=0;et<16;et++)le(U[et+1]);for(var Oe=0;Oe<=11;Oe++)le(E[Oe]);le(16);for(var kt=0;kt<16;kt++)le(Y[kt+1]);for(var xt=0;xt<=161;xt++)le(T[xt]);le(1);for(var lt=0;lt<16;lt++)le(Q[lt+1]);for(var Ut=0;Ut<=11;Ut++)le(q[Ut]);le(17);for(var _t=0;_t<16;_t++)le(ne[_t+1]);for(var Nt=0;Nt<=161;Nt++)le(R[Nt])}(),Be(65498),Be(12),le(3),le(1),le(0),le(2),le(17),le(3),le(17),le(0),le(63),le(0);var H=0,re=0,J=0;S=0,_=7,this.encode.displayName="_encode_";for(var V,oe,K,Ne,Ee,st,ut,Ge,_e,Et=k.data,Mt=k.width,Ze=k.height,Je=4*Mt,mt=0;mt<Ze;){for(V=0;V<Je;){for(Ee=Je*mt+V,ut=-1,Ge=0,_e=0;_e<64;_e++)st=Ee+(Ge=_e>>3)*Je+(ut=4*(7&_e)),mt+Ge>=Ze&&(st-=Je*(mt+1+Ge-Ze)),V+ut>=Je&&(st-=V+ut-Je+4),oe=Et[st++],K=Et[st++],Ne=Et[st++],N[_e]=(G[oe]+G[K+256|0]+G[Ne+512|0]>>16)-128,O[_e]=(G[oe+768|0]+G[K+1024|0]+G[Ne+1280|0]>>16)-128,L[_e]=(G[oe+1280|0]+G[K+1536|0]+G[Ne+1792|0]>>16)-128;H=$(N,p,H,a,i),re=$(O,m,re,s,o),J=$(L,m,J,s,o),V+=32}mt+=8}if(_>=0){var ve=[];ve[1]=_+1,ve[0]=(1<<_+1)-1,ee(ve)}return Be(65497),new Uint8Array(D)},t=t||50,function(){for(var k=String.fromCharCode,I=0;I<256;I++)te[I]=k(I)}(),a=z(U,E),s=z(Q,q),i=z(Y,T),o=z(ne,R),function(){for(var k=1,I=2,H=1;H<=15;H++){for(var re=k;re<I;re++)v[32767+re]=H,b[32767+re]=[],b[32767+re][1]=H,b[32767+re][0]=re;for(var J=-(I-1);J<=-k;J++)v[32767+J]=H,b[32767+J]=[],b[32767+J][1]=H,b[32767+J][0]=I-1+J;k<<=1,I<<=1}}(),function(){for(var k=0;k<256;k++)G[k]=19595*k,G[k+256|0]=38470*k,G[k+512|0]=7471*k+32768,G[k+768|0]=-11059*k,G[k+1024|0]=-21709*k,G[k+1280|0]=32768*k+8421375,G[k+1536|0]=-27439*k,G[k+1792|0]=-5329*k}(),ue(t)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function xo(t,a){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!a,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function Sv(t){function a(E){if(!E)throw Error("assert :P")}function s(E,Y,T){for(var Q=0;4>Q;Q++)if(E[Y+Q]!=T.charCodeAt(Q))return!0;return!1}function i(E,Y,T,Q,q){for(var ne=0;ne<q;ne++)E[Y+ne]=T[Q+ne]}function o(E,Y,T,Q){for(var q=0;q<Q;q++)E[Y+q]=T}function l(E){return new Int32Array(E)}function d(E,Y){for(var T=[],Q=0;Q<E;Q++)T.push(new Y);return T}function u(E,Y){var T=[];return function Q(q,ne,R){for(var z=R[ne],ee=0;ee<z&&(q.push(R.length>ne+1?[]:new Y),!(R.length<ne+1));ee++)Q(q[ee],ne+1,R)}(T,0,E),T}var A=function(){var E=this;function Y(f,y){for(var F=1<<y-1>>>0;f&F;)F>>>=1;return F?(f&F-1)+F:f}function T(f,y,F,M,se){a(!(M%F));do f[y+(M-=F)]=se;while(0<M)}function Q(f,y,F,M,se){if(a(2328>=se),512>=se)var ce=l(512);else if((ce=l(se))==null)return 0;return function(de,pe,fe,we,Le,qe){var be,Qe,Pe=pe,rt=1<<fe,ze=l(16),At=l(16);for(a(Le!=0),a(we!=null),a(de!=null),a(0<fe),Qe=0;Qe<Le;++Qe){if(15<we[Qe])return 0;++ze[we[Qe]]}if(ze[0]==Le)return 0;for(At[1]=0,be=1;15>be;++be){if(ze[be]>1<<be)return 0;At[be+1]=At[be]+ze[be]}for(Qe=0;Qe<Le;++Qe)be=we[Qe],0<we[Qe]&&(qe[At[be]++]=Qe);if(At[15]==1)return(we=new q).g=0,we.value=qe[0],T(de,Pe,1,rt,we),rt;var dt,Ft=-1,jt=rt-1,ga=0,ra=1,Ra=1,la=1<<fe;for(Qe=0,be=1,Le=2;be<=fe;++be,Le<<=1){if(ra+=Ra<<=1,0>(Ra-=ze[be]))return 0;for(;0<ze[be];--ze[be])(we=new q).g=be,we.value=qe[Qe++],T(de,Pe+ga,Le,la,we),ga=Y(ga,be)}for(be=fe+1,Le=2;15>=be;++be,Le<<=1){if(ra+=Ra<<=1,0>(Ra-=ze[be]))return 0;for(;0<ze[be];--ze[be]){if(we=new q,(ga&jt)!=Ft){for(Pe+=la,dt=1<<(Ft=be)-fe;15>Ft&&!(0>=(dt-=ze[Ft]));)++Ft,dt<<=1;rt+=la=1<<(dt=Ft-fe),de[pe+(Ft=ga&jt)].g=dt+fe,de[pe+Ft].value=Pe-pe-Ft}we.g=be-fe,we.value=qe[Qe++],T(de,Pe+(ga>>fe),Le,la,we),ga=Y(ga,be)}}return ra!=2*At[15]-1?0:rt}(f,y,F,M,se,ce)}function q(){this.value=this.g=0}function ne(){this.value=this.g=0}function R(){this.G=d(5,q),this.H=l(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=d(es,ne)}function z(f,y,F,M){a(f!=null),a(y!=null),a(2147483648>M),f.Ca=254,f.I=0,f.b=-8,f.Ka=0,f.oa=y,f.pa=F,f.Jd=y,f.Yc=F+M,f.Zc=4<=M?F+M-4+1:F,oe(f)}function ee(f,y){for(var F=0;0<y--;)F|=Ne(f,128)<<y;return F}function le(f,y){var F=ee(f,y);return K(f)?-F:F}function Be(f,y,F,M){var se,ce=0;for(a(f!=null),a(y!=null),a(4294967288>M),f.Sb=M,f.Ra=0,f.u=0,f.h=0,4<M&&(M=4),se=0;se<M;++se)ce+=y[F+se]<<8*se;f.Ra=ce,f.bb=M,f.oa=y,f.pa=F}function $(f){for(;8<=f.u&&f.bb<f.Sb;)f.Ra>>>=8,f.Ra+=f.oa[f.pa+f.bb]<<La-8>>>0,++f.bb,f.u-=8;re(f)&&(f.h=1,f.u=0)}function ue(f,y){if(a(0<=y),!f.h&&y<=Ga){var F=H(f)&Ma[y];return f.u+=y,$(f),F}return f.h=1,f.u=0}function k(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function I(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function H(f){return f.Ra>>>(f.u&La-1)>>>0}function re(f){return a(f.bb<=f.Sb),f.h||f.bb==f.Sb&&f.u>La}function J(f,y){f.u=y,f.h=re(f)}function V(f){f.u>=ws&&(a(f.u>=ws),$(f))}function oe(f){a(f!=null&&f.oa!=null),f.pa<f.Zc?(f.I=(f.oa[f.pa++]|f.I<<8)>>>0,f.b+=8):(a(f!=null&&f.oa!=null),f.pa<f.Yc?(f.b+=8,f.I=f.oa[f.pa++]|f.I<<8):f.Ka?f.b=0:(f.I<<=8,f.b+=8,f.Ka=1))}function K(f){return ee(f,1)}function Ne(f,y){var F=f.Ca;0>f.b&&oe(f);var M=f.b,se=F*y>>>8,ce=(f.I>>>M>se)+0;for(ce?(F-=se,f.I-=se+1<<M>>>0):F=se+1,M=F,se=0;256<=M;)se+=8,M>>=8;return M=7^se+Hs[M],f.b-=M,f.Ca=(F<<M)-1,ce}function Ee(f,y,F){f[y+0]=F>>24&255,f[y+1]=F>>16&255,f[y+2]=F>>8&255,f[y+3]=255&F}function st(f,y){return f[y+0]|f[y+1]<<8}function ut(f,y){return st(f,y)|f[y+2]<<16}function Ge(f,y){return st(f,y)|st(f,y+2)<<16}function _e(f,y){var F=1<<y;return a(f!=null),a(0<y),f.X=l(F),f.X==null?0:(f.Mb=32-y,f.Xa=y,1)}function Et(f,y){a(f!=null),a(y!=null),a(f.Xa==y.Xa),i(y.X,0,f.X,0,1<<y.Xa)}function Mt(){this.X=[],this.Xa=this.Mb=0}function Ze(f,y,F,M){a(F!=null),a(M!=null);var se=F[0],ce=M[0];return se==0&&(se=(f*ce+y/2)/y),ce==0&&(ce=(y*se+f/2)/f),0>=se||0>=ce?0:(F[0]=se,M[0]=ce,1)}function Je(f,y){return f+(1<<y)-1>>>y}function mt(f,y){return((4278255360&f)+(4278255360&y)>>>0&4278255360)+((16711935&f)+(16711935&y)>>>0&16711935)>>>0}function ve(f,y){E[y]=function(F,M,se,ce,de,pe,fe){var we;for(we=0;we<de;++we){var Le=E[f](pe[fe+we-1],se,ce+we);pe[fe+we]=mt(F[M+we],Le)}}}function et(){this.ud=this.hd=this.jd=0}function Oe(f,y){return((4278124286&(f^y))>>>1)+(f&y)>>>0}function kt(f){return 0<=f&&256>f?f:0>f?0:255<f?255:void 0}function xt(f,y){return kt(f+(f-y+.5>>1))}function lt(f,y,F){return Math.abs(y-F)-Math.abs(f-F)}function Ut(f,y,F,M,se,ce,de){for(M=ce[de-1],F=0;F<se;++F)ce[de+F]=M=mt(f[y+F],M)}function _t(f,y,F,M,se){var ce;for(ce=0;ce<F;++ce){var de=f[y+ce],pe=de>>8&255,fe=16711935&(fe=(fe=16711935&de)+((pe<<16)+pe));M[se+ce]=(4278255360&de)+fe>>>0}}function Nt(f,y){y.jd=255&f,y.hd=f>>8&255,y.ud=f>>16&255}function qt(f,y,F,M,se,ce){var de;for(de=0;de<M;++de){var pe=y[F+de],fe=pe>>>8,we=pe,Le=255&(Le=(Le=pe>>>16)+((f.jd<<24>>24)*(fe<<24>>24)>>>5));we=255&(we=(we+=(f.hd<<24>>24)*(fe<<24>>24)>>>5)+((f.ud<<24>>24)*(Le<<24>>24)>>>5)),se[ce+de]=(4278255360&pe)+(Le<<16)+we}}function Bt(f,y,F,M,se){E[y]=function(ce,de,pe,fe,we,Le,qe,be,Qe){for(fe=qe;fe<be;++fe)for(qe=0;qe<Qe;++qe)we[Le++]=se(pe[M(ce[de++])])},E[f]=function(ce,de,pe,fe,we,Le,qe){var be=8>>ce.b,Qe=ce.Ea,Pe=ce.K[0],rt=ce.w;if(8>be)for(ce=(1<<ce.b)-1,rt=(1<<be)-1;de<pe;++de){var ze,At=0;for(ze=0;ze<Qe;++ze)ze&ce||(At=M(fe[we++])),Le[qe++]=se(Pe[At&rt]),At>>=be}else E["VP8LMapColor"+F](fe,we,Pe,rt,Le,qe,de,pe,Qe)}}function Xt(f,y,F,M,se){for(F=y+F;y<F;){var ce=f[y++];M[se++]=ce>>16&255,M[se++]=ce>>8&255,M[se++]=255&ce}}function ta(f,y,F,M,se){for(F=y+F;y<F;){var ce=f[y++];M[se++]=ce>>16&255,M[se++]=ce>>8&255,M[se++]=255&ce,M[se++]=ce>>24&255}}function ie(f,y,F,M,se){for(F=y+F;y<F;){var ce=(de=f[y++])>>16&240|de>>12&15,de=240&de|de>>28&15;M[se++]=ce,M[se++]=de}}function at(f,y,F,M,se){for(F=y+F;y<F;){var ce=(de=f[y++])>>16&248|de>>13&7,de=de>>5&224|de>>3&31;M[se++]=ce,M[se++]=de}}function Ot(f,y,F,M,se){for(F=y+F;y<F;){var ce=f[y++];M[se++]=255&ce,M[se++]=ce>>8&255,M[se++]=ce>>16&255}}function Ct(f,y,F,M,se,ce){if(ce==0)for(F=y+F;y<F;)Ee(M,((ce=f[y++])[0]>>24|ce[1]>>8&65280|ce[2]<<8&16711680|ce[3]<<24)>>>0),se+=32;else i(M,se,f,y,F)}function ia(f,y){E[y][0]=E[f+"0"],E[y][1]=E[f+"1"],E[y][2]=E[f+"2"],E[y][3]=E[f+"3"],E[y][4]=E[f+"4"],E[y][5]=E[f+"5"],E[y][6]=E[f+"6"],E[y][7]=E[f+"7"],E[y][8]=E[f+"8"],E[y][9]=E[f+"9"],E[y][10]=E[f+"10"],E[y][11]=E[f+"11"],E[y][12]=E[f+"12"],E[y][13]=E[f+"13"],E[y][14]=E[f+"0"],E[y][15]=E[f+"0"]}function ca(f){return f==fc||f==Eo||f==io||f==kl}function Za(){this.eb=[],this.size=this.A=this.fb=0}function os(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Ba(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Za,this.f.kb=new os,this.sd=null}function xa(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Dt(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function ye(f){return alert("todo:WebPSamplerProcessPlane"),f.T}function Ce(f,y){var F=f.T,M=y.ba.f.RGBA,se=M.eb,ce=M.fb+f.ka*M.A,de=zn[y.ba.S],pe=f.y,fe=f.O,we=f.f,Le=f.N,qe=f.ea,be=f.W,Qe=y.cc,Pe=y.dc,rt=y.Mc,ze=y.Nc,At=f.ka,dt=f.ka+f.T,Ft=f.U,jt=Ft+1>>1;for(At==0?de(pe,fe,null,null,we,Le,qe,be,we,Le,qe,be,se,ce,null,null,Ft):(de(y.ec,y.fc,pe,fe,Qe,Pe,rt,ze,we,Le,qe,be,se,ce-M.A,se,ce,Ft),++F);At+2<dt;At+=2)Qe=we,Pe=Le,rt=qe,ze=be,Le+=f.Rc,be+=f.Rc,ce+=2*M.A,de(pe,(fe+=2*f.fa)-f.fa,pe,fe,Qe,Pe,rt,ze,we,Le,qe,be,se,ce-M.A,se,ce,Ft);return fe+=f.fa,f.j+dt<f.o?(i(y.ec,y.fc,pe,fe,Ft),i(y.cc,y.dc,we,Le,jt),i(y.Mc,y.Nc,qe,be,jt),F--):1&dt||de(pe,fe,null,null,we,Le,qe,be,we,Le,qe,be,se,ce+M.A,null,null,Ft),F}function Ve(f,y,F){var M=f.F,se=[f.J];if(M!=null){var ce=f.U,de=y.ba.S,pe=de==tl||de==io;y=y.ba.f.RGBA;var fe=[0],we=f.ka;fe[0]=f.T,f.Kb&&(we==0?--fe[0]:(--we,se[0]-=f.width),f.j+f.ka+f.T==f.o&&(fe[0]=f.o-f.j-we));var Le=y.eb;we=y.fb+we*y.A,f=zi(M,se[0],f.width,ce,fe,Le,we+(pe?0:3),y.A),a(F==fe),f&&ca(de)&&Cl(Le,we,pe,ce,fe,y.A)}return 0}function gt(f){var y=f.ma,F=y.ba.S,M=11>F,se=F==Sl||F==mc||F==tl||F==no||F==12||ca(F);if(y.memory=null,y.Ib=null,y.Jb=null,y.Nd=null,!Vt(y.Oa,f,se?11:12))return 0;if(se&&ca(F)&&So(),f.da)alert("todo:use_scaling");else{if(M){if(y.Ib=ye,f.Kb){if(F=f.U+1>>1,y.memory=l(f.U+2*F),y.memory==null)return 0;y.ec=y.memory,y.fc=0,y.cc=y.ec,y.dc=y.fc+f.U,y.Mc=y.cc,y.Nc=y.dc+F,y.Ib=Ce,So()}}else alert("todo:EmitYUV");se&&(y.Jb=Ve,M&&wi())}if(M&&!Nu){for(f=0;256>f;++f)qp[f]=89858*(f-128)+Fn>>Hr,yc[f]=-22014*(f-128)+Fn,Wd[f]=-45773*(f-128),En[f]=113618*(f-128)+Fn>>Hr;for(f=To;f<id;++f)y=76283*(f-16)+Fn>>Hr,vc[f-To]=Vs(y,255),Yd[f-To]=Vs(y+8>>4,15);Nu=1}return 1}function Qt(f){var y=f.ma,F=f.U,M=f.T;return a(!(1&f.ka)),0>=F||0>=M?0:(F=y.Ib(f,y),y.Jb!=null&&y.Jb(f,y,F),y.Dc+=F,1)}function ja(f){f.ma.memory=null}function va(f,y,F,M){return ue(f,8)!=47?0:(y[0]=ue(f,14)+1,F[0]=ue(f,14)+1,M[0]=ue(f,1),ue(f,3)!=0?0:!f.h)}function _a(f,y){if(4>f)return f+1;var F=f-2>>1;return(2+(1&f)<<F)+ue(y,F)+1}function Na(f,y){return 120<y?y-120:1<=(F=((F=oo[y-1])>>4)*f+(8-(15&F)))?F:1;var F}function Pa(f,y,F){var M=H(F),se=f[y+=255&M].g-8;return 0<se&&(J(F,F.u+8),M=H(F),y+=f[y].value,y+=M&(1<<se)-1),J(F,F.u+f[y].g),f[y].value}function ls(f,y,F){return F.g+=f.g,F.value+=f.value<<y>>>0,a(8>=F.g),f.g}function cs(f,y,F){var M=f.xc;return a((y=M==0?0:f.vc[f.md*(F>>M)+(y>>M)])<f.Wb),f.Ya[y]}function Gs(f,y,F,M){var se=f.ab,ce=f.c*y,de=f.C;y=de+y;var pe=F,fe=M;for(M=f.Ta,F=f.Ua;0<se--;){var we=f.gc[se],Le=de,qe=y,be=pe,Qe=fe,Pe=(fe=M,pe=F,we.Ea);switch(a(Le<qe),a(qe<=we.nc),we.hc){case 2:ks(be,Qe,(qe-Le)*Pe,fe,pe);break;case 0:var rt=Le,ze=qe,At=fe,dt=pe,Ft=(la=we).Ea;rt==0&&(ci(be,Qe,null,null,1,At,dt),Ut(be,Qe+1,0,0,Ft-1,At,dt+1),Qe+=Ft,dt+=Ft,++rt);for(var jt=1<<la.b,ga=jt-1,ra=Je(Ft,la.b),Ra=la.K,la=la.w+(rt>>la.b)*ra;rt<ze;){var ts=Ra,wn=la,Ta=1;for(Bi(be,Qe,At,dt-Ft,1,At,dt);Ta<Ft;){var Aa=(Ta&~ga)+jt;Aa>Ft&&(Aa=Ft),(0,ko[ts[wn++]>>8&15])(be,Qe+ +Ta,At,dt+Ta-Ft,Aa-Ta,At,dt+Ta),Ta=Aa}Qe+=Ft,dt+=Ft,++rt&ga||(la+=ra)}qe!=we.nc&&i(fe,pe-Pe,fe,pe+(qe-Le-1)*Pe,Pe);break;case 1:for(Pe=be,ze=Qe,Ft=(be=we.Ea)-(dt=be&~(At=(Qe=1<<we.b)-1)),rt=Je(be,we.b),jt=we.K,we=we.w+(Le>>we.b)*rt;Le<qe;){for(ga=jt,ra=we,Ra=new et,la=ze+dt,ts=ze+be;ze<la;)Nt(ga[ra++],Ra),di(Ra,Pe,ze,Qe,fe,pe),ze+=Qe,pe+=Qe;ze<ts&&(Nt(ga[ra++],Ra),di(Ra,Pe,ze,Ft,fe,pe),ze+=Ft,pe+=Ft),++Le&At||(we+=rt)}break;case 3:if(be==fe&&Qe==pe&&0<we.b){for(ze=fe,be=Pe=pe+(qe-Le)*Pe-(dt=(qe-Le)*Je(we.Ea,we.b)),Qe=fe,At=pe,rt=[],dt=(Ft=dt)-1;0<=dt;--dt)rt[dt]=Qe[At+dt];for(dt=Ft-1;0<=dt;--dt)ze[be+dt]=rt[dt];Oa(we,Le,qe,fe,Pe,fe,pe)}else Oa(we,Le,qe,be,Qe,fe,pe)}pe=M,fe=F}fe!=F&&i(M,F,pe,fe,ce)}function yn(f,y){var F=f.V,M=f.Ba+f.c*f.C,se=y-f.C;if(a(y<=f.l.o),a(16>=se),0<se){var ce=f.l,de=f.Ta,pe=f.Ua,fe=ce.width;if(Gs(f,se,F,M),se=pe=[pe],a((F=f.C)<(M=y)),a(ce.v<ce.va),M>ce.o&&(M=ce.o),F<ce.j){var we=ce.j-F;F=ce.j,se[0]+=we*fe}if(F>=M?F=0:(se[0]+=4*ce.v,ce.ka=F-ce.j,ce.U=ce.va-ce.v,ce.T=M-F,F=1),F){if(pe=pe[0],11>(F=f.ca).S){var Le=F.f.RGBA,qe=(M=F.S,se=ce.U,ce=ce.T,we=Le.eb,Le.A),be=ce;for(Le=Le.fb+f.Ma*Le.A;0<be--;){var Qe=de,Pe=pe,rt=se,ze=we,At=Le;switch(M){case ei:Fo(Qe,Pe,rt,ze,At);break;case Sl:Pi(Qe,Pe,rt,ze,At);break;case fc:Pi(Qe,Pe,rt,ze,At),Cl(ze,At,0,rt,1,0);break;case Rr:Hi(Qe,Pe,rt,ze,At);break;case mc:Ct(Qe,Pe,rt,ze,At,1);break;case Eo:Ct(Qe,Pe,rt,ze,At,1),Cl(ze,At,0,rt,1,0);break;case tl:Ct(Qe,Pe,rt,ze,At,0);break;case io:Ct(Qe,Pe,rt,ze,At,0),Cl(ze,At,1,rt,1,0);break;case no:Tr(Qe,Pe,rt,ze,At);break;case kl:Tr(Qe,Pe,rt,ze,At),Oi(ze,At,rt,1,0);break;case ed:Si(Qe,Pe,rt,ze,At);break;default:a(0)}pe+=fe,Le+=qe}f.Ma+=ce}else alert("todo:EmitRescaledRowsYUVA");a(f.Ma<=F.height)}}f.C=y,a(f.C<=f.i)}function ge(f){var y;if(0<f.ua)return 0;for(y=0;y<f.Wb;++y){var F=f.Ya[y].G,M=f.Ya[y].H;if(0<F[1][M[1]+0].g||0<F[2][M[2]+0].g||0<F[3][M[3]+0].g)return 0}return 1}function it(f,y,F,M,se,ce){if(f.Z!=0){var de=f.qd,pe=f.rd;for(a(Ir[f.Z]!=null);y<F;++y)Ir[f.Z](de,pe,M,se,M,se,ce),de=M,pe=se,se+=ce;f.qd=de,f.rd=pe}}function $e(f,y){var F=f.l.ma,M=F.Z==0||F.Z==1?f.l.j:f.C;if(M=f.C<M?M:f.C,a(y<=f.l.o),y>M){var se=f.l.width,ce=F.ca,de=F.tb+se*M,pe=f.V,fe=f.Ba+f.c*M,we=f.gc;a(f.ab==1),a(we[0].hc==3),vs(we[0],M,y,pe,fe,ce,de),it(F,M,y,ce,de,se)}f.C=f.Ma=y}function zt(f,y,F,M,se,ce,de){var pe=f.$/M,fe=f.$%M,we=f.m,Le=f.s,qe=F+f.$,be=qe;se=F+M*se;var Qe=F+M*ce,Pe=280+Le.ua,rt=f.Pb?pe:16777216,ze=0<Le.ua?Le.Wa:null,At=Le.wc,dt=qe<Qe?cs(Le,fe,pe):null;a(f.C<ce),a(Qe<=se);var Ft=!1;e:for(;;){for(;Ft||qe<Qe;){var jt=0;if(pe>=rt){var ga=qe-F;a((rt=f).Pb),rt.wd=rt.m,rt.xd=ga,0<rt.s.ua&&Et(rt.s.Wa,rt.s.vb),rt=pe+ju}if(fe&At||(dt=cs(Le,fe,pe)),a(dt!=null),dt.Qb&&(y[qe]=dt.qb,Ft=!0),!Ft)if(V(we),dt.jc){jt=we,ga=y;var ra=qe,Ra=dt.pd[H(jt)&es-1];a(dt.jc),256>Ra.g?(J(jt,jt.u+Ra.g),ga[ra]=Ra.value,jt=0):(J(jt,jt.u+Ra.g-256),a(256<=Ra.value),jt=Ra.value),jt==0&&(Ft=!0)}else jt=Pa(dt.G[0],dt.H[0],we);if(we.h)break;if(Ft||256>jt){if(!Ft)if(dt.nd)y[qe]=(dt.qb|jt<<8)>>>0;else{if(V(we),Ft=Pa(dt.G[1],dt.H[1],we),V(we),ga=Pa(dt.G[2],dt.H[2],we),ra=Pa(dt.G[3],dt.H[3],we),we.h)break;y[qe]=(ra<<24|Ft<<16|jt<<8|ga)>>>0}if(Ft=!1,++qe,++fe>=M&&(fe=0,++pe,de!=null&&pe<=ce&&!(pe%16)&&de(f,pe),ze!=null))for(;be<qe;)jt=y[be++],ze.X[(506832829*jt&4294967295)>>>ze.Mb]=jt}else if(280>jt){if(jt=_a(jt-256,we),ga=Pa(dt.G[4],dt.H[4],we),V(we),ga=Na(M,ga=_a(ga,we)),we.h)break;if(qe-F<ga||se-qe<jt)break e;for(ra=0;ra<jt;++ra)y[qe+ra]=y[qe+ra-ga];for(qe+=jt,fe+=jt;fe>=M;)fe-=M,++pe,de!=null&&pe<=ce&&!(pe%16)&&de(f,pe);if(a(qe<=se),fe&At&&(dt=cs(Le,fe,pe)),ze!=null)for(;be<qe;)jt=y[be++],ze.X[(506832829*jt&4294967295)>>>ze.Mb]=jt}else{if(!(jt<Pe))break e;for(Ft=jt-280,a(ze!=null);be<qe;)jt=y[be++],ze.X[(506832829*jt&4294967295)>>>ze.Mb]=jt;jt=qe,a(!(Ft>>>(ga=ze).Xa)),y[jt]=ga.X[Ft],Ft=!0}Ft||a(we.h==re(we))}if(f.Pb&&we.h&&qe<se)a(f.m.h),f.a=5,f.m=f.wd,f.$=f.xd,0<f.s.ua&&Et(f.s.vb,f.s.Wa);else{if(we.h)break e;de?.(f,pe>ce?ce:pe),f.a=0,f.$=qe-F}return 1}return f.a=3,0}function St(f){a(f!=null),f.vc=null,f.yc=null,f.Ya=null;var y=f.Wa;y!=null&&(y.X=null),f.vb=null,a(f!=null)}function yt(){var f=new fa;return f==null?null:(f.a=0,f.xb=Fl,ia("Predictor","VP8LPredictors"),ia("Predictor","VP8LPredictors_C"),ia("PredictorAdd","VP8LPredictorsAdd"),ia("PredictorAdd","VP8LPredictorsAdd_C"),ks=_t,di=qt,Fo=Xt,Pi=ta,Tr=ie,Si=at,Hi=Ot,E.VP8LMapColor32b=Yt,E.VP8LMapColor8b=Ci,f)}function Va(f,y,F,M,se){var ce=1,de=[f],pe=[y],fe=M.m,we=M.s,Le=null,qe=0;e:for(;;){if(F)for(;ce&&ue(fe,1);){var be=de,Qe=pe,Pe=M,rt=1,ze=Pe.m,At=Pe.gc[Pe.ab],dt=ue(ze,2);if(Pe.Oc&1<<dt)ce=0;else{switch(Pe.Oc|=1<<dt,At.hc=dt,At.Ea=be[0],At.nc=Qe[0],At.K=[null],++Pe.ab,a(4>=Pe.ab),dt){case 0:case 1:At.b=ue(ze,3)+2,rt=Va(Je(At.Ea,At.b),Je(At.nc,At.b),0,Pe,At.K),At.K=At.K[0];break;case 3:var Ft,jt=ue(ze,8)+1,ga=16<jt?0:4<jt?1:2<jt?2:3;if(be[0]=Je(At.Ea,ga),At.b=ga,Ft=rt=Va(jt,1,0,Pe,At.K)){var ra,Ra=jt,la=At,ts=1<<(8>>la.b),wn=l(ts);if(wn==null)Ft=0;else{var Ta=la.K[0],Aa=la.w;for(wn[0]=la.K[0][0],ra=1;ra<1*Ra;++ra)wn[ra]=mt(Ta[Aa+ra],wn[ra-1]);for(;ra<4*ts;++ra)wn[ra]=0;la.K[0]=null,la.K[0]=wn,Ft=1}}rt=Ft;break;case 2:break;default:a(0)}ce=rt}}if(de=de[0],pe=pe[0],ce&&ue(fe,1)&&!(ce=1<=(qe=ue(fe,4))&&11>=qe)){M.a=3;break e}var $t;if($t=ce)t:{var en,Da,Ka,ha=M,Ha=de,us=pe,Os=qe,mn=F,fn=ha.m,nn=ha.s,Xa=[null],hs=1,rn=0,Ca=sl[Os];a:for(;;){if(mn&&ue(fn,1)){var Un=ue(fn,3)+2,Gi=Je(Ha,Un),on=Je(us,Un),ui=Gi*on;if(!Va(Gi,on,0,ha,Xa))break a;for(Xa=Xa[0],nn.xc=Un,en=0;en<ui;++en){var Fs=Xa[en]>>8&65535;Xa[en]=Fs,Fs>=hs&&(hs=Fs+1)}}if(fn.h)break a;for(Da=0;5>Da;++Da){var gn=qi[Da];!Da&&0<Os&&(gn+=1<<Os),rn<gn&&(rn=gn)}var hi=d(hs*Ca,q),Vn=hs,Qs=d(Vn,R);if(Qs==null)var ms=null;else a(65536>=Vn),ms=Qs;var ti=l(rn);if(ms==null||ti==null||hi==null){ha.a=1;break a}var $n=hi;for(en=Ka=0;en<hs;++en){var Ns=ms[en],pi=Ns.G,Ln=Ns.H,Mr=0,mr=1,Tn=0;for(Da=0;5>Da;++Da){gn=qi[Da],pi[Da]=$n,Ln[Da]=Ka,!Da&&0<Os&&(gn+=1<<Os);n:{var bc,rd=gn,jc=ha,Ul=ti,Su=$n,ku=Ka,wc=0,uo=jc.m,Gp=ue(uo,1);if(o(Ul,0,0,rd),Gp){var Fu=ue(uo,1)+1,Eu=ue(uo,1),Jd=ue(uo,Eu==0?1:8);Ul[Jd]=1,Fu==2&&(Ul[Jd=ue(uo,8)]=1);var Ll=1}else{var Xd=l(19),Zd=ue(uo,4)+4;if(19<Zd){jc.a=3;var _c=0;break n}for(bc=0;bc<Zd;++bc)Xd[ro[bc]]=ue(uo,3);var od=void 0,Tl=void 0,Uu=jc,Lu=Xd,ho=rd,Nc=Ul,ld=0,fr=Uu.m,Ql=8,eA=d(128,q);s:for(;Q(eA,0,7,Lu,19);){if(ue(fr,1)){var Tu=2+2*ue(fr,3);if((od=2+ue(fr,Tu))>ho)break s}else od=ho;for(Tl=0;Tl<ho&&od--;){V(fr);var tA=eA[0+(127&H(fr))];J(fr,fr.u+tA.g);var rl=tA.value;if(16>rl)Nc[Tl++]=rl,rl!=0&&(Ql=rl);else{var Qu=rl==16,aA=rl-16,sA=ir[aA],nA=ue(fr,td[aA])+sA;if(Tl+nA>ho)break s;for(var Ru=Qu?Ql:0;0<nA--;)Nc[Tl++]=Ru}}ld=1;break s}ld||(Uu.a=3),Ll=ld}(Ll=Ll&&!uo.h)&&(wc=Q(Su,ku,8,Ul,rd)),Ll&&wc!=0?_c=wc:(jc.a=3,_c=0)}if(_c==0)break a;if(mr&&al[Da]==1&&(mr=$n[Ka].g==0),Mr+=$n[Ka].g,Ka+=_c,3>=Da){var ol,cd=ti[0];for(ol=1;ol<gn;++ol)ti[ol]>cd&&(cd=ti[ol]);Tn+=cd}}if(Ns.nd=mr,Ns.Qb=0,mr&&(Ns.qb=(pi[3][Ln[3]+0].value<<24|pi[1][Ln[1]+0].value<<16|pi[2][Ln[2]+0].value)>>>0,Mr==0&&256>pi[0][Ln[0]+0].value&&(Ns.Qb=1,Ns.qb+=pi[0][Ln[0]+0].value<<8)),Ns.jc=!Ns.Qb&&6>Tn,Ns.jc){var Bc,po=Ns;for(Bc=0;Bc<es;++Bc){var Or=Bc,mo=po.pd[Or],Cc=po.G[0][po.H[0]+Or];256<=Cc.value?(mo.g=Cc.g+256,mo.value=Cc.value):(mo.g=0,mo.value=0,Or>>=ls(Cc,8,mo),Or>>=ls(po.G[1][po.H[1]+Or],16,mo),Or>>=ls(po.G[2][po.H[2]+Or],0,mo),ls(po.G[3][po.H[3]+Or],24,mo))}}}nn.vc=Xa,nn.Wb=hs,nn.Ya=ms,nn.yc=hi,$t=1;break t}$t=0}if(!(ce=$t)){M.a=3;break e}if(0<qe){if(we.ua=1<<qe,!_e(we.Wa,qe)){M.a=1,ce=0;break e}}else we.ua=0;var Sc=M,iA=de,Du=pe,rA=Sc.s,oA=rA.xc;if(Sc.c=iA,Sc.i=Du,rA.md=Je(iA,oA),rA.wc=oA==0?-1:(1<<oA)-1,F){M.xb=_u;break e}if((Le=l(de*pe))==null){M.a=1,ce=0;break e}ce=(ce=zt(M,Le,0,de,pe,pe,null))&&!fe.h;break e}return ce?(se!=null?se[0]=Le:(a(Le==null),a(F)),M.$=0,F||St(we)):St(we),ce}function Zt(f,y){var F=f.c*f.i,M=F+y+16*y;return a(f.c<=y),f.V=l(M),f.V==null?(f.Ta=null,f.Ua=0,f.a=1,0):(f.Ta=f.V,f.Ua=f.Ba+F+y,1)}function W(f,y){var F=f.C,M=y-F,se=f.V,ce=f.Ba+f.c*F;for(a(y<=f.l.o);0<M;){var de=16<M?16:M,pe=f.l.ma,fe=f.l.width,we=fe*de,Le=pe.ca,qe=pe.tb+fe*F,be=f.Ta,Qe=f.Ua;Gs(f,de,se,ce),Xo(be,Qe,Le,qe,we),it(pe,F,F+de,Le,qe,fe),M-=de,se+=de*f.c,F+=de}a(F==y),f.C=f.Ma=y}function me(){this.ub=this.yd=this.td=this.Rb=0}function ke(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function tt(){this.Fb=this.Bb=this.Cb=0,this.Zb=l(4),this.Lb=l(4)}function ht(){this.Yb=function(){var f=[];return function y(F,M,se){for(var ce=se[M],de=0;de<ce&&(F.push(se.length>M+1?[]:0),!(se.length<M+1));de++)y(F[de],M+1,se)}(f,0,[3,11]),f}()}function Lt(){this.jb=l(3),this.Wc=u([4,8],ht),this.Xc=u([4,17],ht)}function It(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new l(4),this.od=new l(4)}function Jt(){this.ld=this.La=this.dd=this.tc=0}function Ht(){this.Na=this.la=0}function Wt(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function wa(){this.ad=l(384),this.Za=0,this.Ob=l(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function ba(){this.uc=this.M=this.Nb=0,this.wa=Array(new Jt),this.Y=0,this.ya=Array(new wa),this.aa=0,this.l=new Ys}function ka(){this.y=l(16),this.f=l(8),this.ea=l(8)}function gs(){this.cb=this.a=0,this.sc="",this.m=new k,this.Od=new me,this.Kc=new ke,this.ed=new It,this.Qa=new tt,this.Ic=this.$c=this.Aa=0,this.D=new ba,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=d(8,k),this.ia=0,this.pb=d(4,Wt),this.Pa=new Lt,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new ka),this.Hd=0,this.rb=Array(new Ht),this.sb=0,this.wa=Array(new Jt),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new wa),this.L=this.aa=0,this.gd=u([4,2],Jt),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Ys(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Wi(){var f=new gs;return f!=null&&(f.a=0,f.sc="OK",f.cb=0,f.Xb=0,kn||(kn=Js)),f}function ds(f,y,F){return f.a==0&&(f.a=y,f.sc=F,f.cb=0),0}function Nr(f,y,F){return 3<=F&&f[y+0]==157&&f[y+1]==1&&f[y+2]==42}function Xr(f,y){if(f==null)return 0;if(f.a=0,f.sc="OK",y==null)return ds(f,2,"null VP8Io passed to VP8GetHeaders()");var F=y.data,M=y.w,se=y.ha;if(4>se)return ds(f,7,"Truncated header.");var ce=F[M+0]|F[M+1]<<8|F[M+2]<<16,de=f.Od;if(de.Rb=!(1&ce),de.td=ce>>1&7,de.yd=ce>>4&1,de.ub=ce>>5,3<de.td)return ds(f,3,"Incorrect keyframe parameters.");if(!de.yd)return ds(f,4,"Frame not displayable.");M+=3,se-=3;var pe=f.Kc;if(de.Rb){if(7>se)return ds(f,7,"cannot parse picture header");if(!Nr(F,M,se))return ds(f,3,"Bad code word");pe.c=16383&(F[M+4]<<8|F[M+3]),pe.Td=F[M+4]>>6,pe.i=16383&(F[M+6]<<8|F[M+5]),pe.Ud=F[M+6]>>6,M+=7,se-=7,f.za=pe.c+15>>4,f.Ub=pe.i+15>>4,y.width=pe.c,y.height=pe.i,y.Da=0,y.j=0,y.v=0,y.va=y.width,y.o=y.height,y.da=0,y.ib=y.width,y.hb=y.height,y.U=y.width,y.T=y.height,o((ce=f.Pa).jb,0,255,ce.jb.length),a((ce=f.Qa)!=null),ce.Cb=0,ce.Bb=0,ce.Fb=1,o(ce.Zb,0,0,ce.Zb.length),o(ce.Lb,0,0,ce.Lb)}if(de.ub>se)return ds(f,7,"bad partition length");z(ce=f.m,F,M,de.ub),M+=de.ub,se-=de.ub,de.Rb&&(pe.Ld=K(ce),pe.Kd=K(ce)),pe=f.Qa;var fe,we=f.Pa;if(a(ce!=null),a(pe!=null),pe.Cb=K(ce),pe.Cb){if(pe.Bb=K(ce),K(ce)){for(pe.Fb=K(ce),fe=0;4>fe;++fe)pe.Zb[fe]=K(ce)?le(ce,7):0;for(fe=0;4>fe;++fe)pe.Lb[fe]=K(ce)?le(ce,6):0}if(pe.Bb)for(fe=0;3>fe;++fe)we.jb[fe]=K(ce)?ee(ce,8):255}else pe.Bb=0;if(ce.Ka)return ds(f,3,"cannot parse segment header");if((pe=f.ed).zd=K(ce),pe.Tb=ee(ce,6),pe.wb=ee(ce,3),pe.Pc=K(ce),pe.Pc&&K(ce)){for(we=0;4>we;++we)K(ce)&&(pe.vd[we]=le(ce,6));for(we=0;4>we;++we)K(ce)&&(pe.od[we]=le(ce,6))}if(f.L=pe.Tb==0?0:pe.zd?1:2,ce.Ka)return ds(f,3,"cannot parse filter header");var Le=se;if(se=fe=M,M=fe+Le,pe=Le,f.Xb=(1<<ee(f.m,2))-1,Le<3*(we=f.Xb))F=7;else{for(fe+=3*we,pe-=3*we,Le=0;Le<we;++Le){var qe=F[se+0]|F[se+1]<<8|F[se+2]<<16;qe>pe&&(qe=pe),z(f.Jc[+Le],F,fe,qe),fe+=qe,pe-=qe,se+=3}z(f.Jc[+we],F,fe,pe),F=fe<M?0:5}if(F!=0)return ds(f,F,"cannot parse partitions");for(F=ee(fe=f.m,7),se=K(fe)?le(fe,4):0,M=K(fe)?le(fe,4):0,pe=K(fe)?le(fe,4):0,we=K(fe)?le(fe,4):0,fe=K(fe)?le(fe,4):0,Le=f.Qa,qe=0;4>qe;++qe){if(Le.Cb){var be=Le.Zb[qe];Le.Fb||(be+=F)}else{if(0<qe){f.pb[qe]=f.pb[0];continue}be=F}var Qe=f.pb[qe];Qe.Sc[0]=gc[Vs(be+se,127)],Qe.Sc[1]=xc[Vs(be+0,127)],Qe.Eb[0]=2*gc[Vs(be+M,127)],Qe.Eb[1]=101581*xc[Vs(be+pe,127)]>>16,8>Qe.Eb[1]&&(Qe.Eb[1]=8),Qe.Qc[0]=gc[Vs(be+we,117)],Qe.Qc[1]=xc[Vs(be+fe,127)],Qe.lc=be+fe}if(!de.Rb)return ds(f,4,"Not a key frame.");for(K(ce),de=f.Pa,F=0;4>F;++F){for(se=0;8>se;++se)for(M=0;3>M;++M)for(pe=0;11>pe;++pe)we=Ne(ce,nl[F][se][M][pe])?ee(ce,8):Dr[F][se][M][pe],de.Wc[F][se].Yb[M][pe]=we;for(se=0;17>se;++se)de.Xc[F][se]=de.Wc[F][wu[se]]}return f.kc=K(ce),f.kc&&(f.Bd=ee(ce,8)),f.cb=1}function Js(f,y,F,M,se,ce,de){var pe=y[se].Yb[F];for(F=0;16>se;++se){if(!Ne(f,pe[F+0]))return se;for(;!Ne(f,pe[F+1]);)if(pe=y[++se].Yb[0],F=0,se==16)return 16;var fe=y[se+1].Yb;if(Ne(f,pe[F+2])){var we=f,Le=0;if(Ne(we,(be=pe)[(qe=F)+3]))if(Ne(we,be[qe+6])){for(pe=0,qe=2*(Le=Ne(we,be[qe+8]))+(be=Ne(we,be[qe+9+Le])),Le=0,be=sn[qe];be[pe];++pe)Le+=Le+Ne(we,be[pe]);Le+=3+(8<<qe)}else Ne(we,be[qe+7])?(Le=7+2*Ne(we,165),Le+=Ne(we,145)):Le=5+Ne(we,159);else Le=Ne(we,be[qe+4])?3+Ne(we,be[qe+5]):2;pe=fe[2]}else Le=1,pe=fe[1];fe=de+xs[se],0>(we=f).b&&oe(we);var qe,be=we.b,Qe=(qe=we.Ca>>1)-(we.I>>be)>>31;--we.b,we.Ca+=Qe,we.Ca|=1,we.I-=(qe+1&Qe)<<be,ce[fe]=((Le^Qe)-Qe)*M[(0<se)+0]}return 16}function vi(f){var y=f.rb[f.sb-1];y.la=0,y.Na=0,o(f.zc,0,0,f.zc.length),f.ja=0}function qa(f,y,F,M,se){se=f[y+F+32*M]+(se>>3),f[y+F+32*M]=-256&se?0>se?0:255:se}function oi(f,y,F,M,se,ce){qa(f,y,0,F,M+se),qa(f,y,1,F,M+ce),qa(f,y,2,F,M-ce),qa(f,y,3,F,M-se)}function $a(f){return(20091*f>>16)+f}function Ri(f,y,F,M){var se,ce=0,de=l(16);for(se=0;4>se;++se){var pe=f[y+0]+f[y+8],fe=f[y+0]-f[y+8],we=(35468*f[y+4]>>16)-$a(f[y+12]),Le=$a(f[y+4])+(35468*f[y+12]>>16);de[ce+0]=pe+Le,de[ce+1]=fe+we,de[ce+2]=fe-we,de[ce+3]=pe-Le,ce+=4,y++}for(se=ce=0;4>se;++se)pe=(f=de[ce+0]+4)+de[ce+8],fe=f-de[ce+8],we=(35468*de[ce+4]>>16)-$a(de[ce+12]),qa(F,M,0,0,pe+(Le=$a(de[ce+4])+(35468*de[ce+12]>>16))),qa(F,M,1,0,fe+we),qa(F,M,2,0,fe-we),qa(F,M,3,0,pe-Le),ce++,M+=32}function Bo(f,y,F,M){var se=f[y+0]+4,ce=35468*f[y+4]>>16,de=$a(f[y+4]),pe=35468*f[y+1]>>16;oi(F,M,0,se+de,f=$a(f[y+1]),pe),oi(F,M,1,se+ce,f,pe),oi(F,M,2,se-ce,f,pe),oi(F,M,3,se-de,f,pe)}function Ar(f,y,F,M,se){Ri(f,y,F,M),se&&Ri(f,y+16,F,M+4)}function vn(f,y,F,M){so(f,y+0,F,M,1),so(f,y+32,F,M+128,1)}function Mn(f,y,F,M){var se;for(f=f[y+0]+4,se=0;4>se;++se)for(y=0;4>y;++y)qa(F,M,y,se,f)}function Br(f,y,F,M){f[y+0]&&ns(f,y+0,F,M),f[y+16]&&ns(f,y+16,F,M+4),f[y+32]&&ns(f,y+32,F,M+128),f[y+48]&&ns(f,y+48,F,M+128+4)}function li(f,y,F,M){var se,ce=l(16);for(se=0;4>se;++se){var de=f[y+0+se]+f[y+12+se],pe=f[y+4+se]+f[y+8+se],fe=f[y+4+se]-f[y+8+se],we=f[y+0+se]-f[y+12+se];ce[0+se]=de+pe,ce[8+se]=de-pe,ce[4+se]=we+fe,ce[12+se]=we-fe}for(se=0;4>se;++se)de=(f=ce[0+4*se]+3)+ce[3+4*se],pe=ce[1+4*se]+ce[2+4*se],fe=ce[1+4*se]-ce[2+4*se],we=f-ce[3+4*se],F[M+0]=de+pe>>3,F[M+16]=we+fe>>3,F[M+32]=de-pe>>3,F[M+48]=we-fe>>3,M+=64}function Ya(f,y,F){var M,se=y-32,ce=On,de=255-f[se-1];for(M=0;M<F;++M){var pe,fe=ce,we=de+f[y-1];for(pe=0;pe<F;++pe)f[y+pe]=fe[we+f[se+pe]];y+=32}}function Ae(f,y){Ya(f,y,4)}function xe(f,y){Ya(f,y,8)}function Re(f,y){Ya(f,y,16)}function nt(f,y){var F;for(F=0;16>F;++F)i(f,y+32*F,f,y-32,16)}function vt(f,y){var F;for(F=16;0<F;--F)o(f,y,f[y-1],16),y+=32}function ot(f,y,F){var M;for(M=0;16>M;++M)o(y,F+32*M,f,16)}function Kt(f,y){var F,M=16;for(F=0;16>F;++F)M+=f[y-1+32*F]+f[y+F-32];ot(M>>5,f,y)}function aa(f,y){var F,M=8;for(F=0;16>F;++F)M+=f[y-1+32*F];ot(M>>4,f,y)}function da(f,y){var F,M=8;for(F=0;16>F;++F)M+=f[y+F-32];ot(M>>4,f,y)}function ea(f,y){ot(128,f,y)}function Gt(f,y,F){return f+2*y+F+2>>2}function js(f,y){var F,M=y-32;for(M=new Uint8Array([Gt(f[M-1],f[M+0],f[M+1]),Gt(f[M+0],f[M+1],f[M+2]),Gt(f[M+1],f[M+2],f[M+3]),Gt(f[M+2],f[M+3],f[M+4])]),F=0;4>F;++F)i(f,y+32*F,M,0,M.length)}function hn(f,y){var F=f[y-1],M=f[y-1+32],se=f[y-1+64],ce=f[y-1+96];Ee(f,y+0,16843009*Gt(f[y-1-32],F,M)),Ee(f,y+32,16843009*Gt(F,M,se)),Ee(f,y+64,16843009*Gt(M,se,ce)),Ee(f,y+96,16843009*Gt(se,ce,ce))}function Kn(f,y){var F,M=4;for(F=0;4>F;++F)M+=f[y+F-32]+f[y-1+32*F];for(M>>=3,F=0;4>F;++F)o(f,y+32*F,M,4)}function Ts(f,y){var F=f[y-1+0],M=f[y-1+32],se=f[y-1+64],ce=f[y-1-32],de=f[y+0-32],pe=f[y+1-32],fe=f[y+2-32],we=f[y+3-32];f[y+0+96]=Gt(M,se,f[y-1+96]),f[y+1+96]=f[y+0+64]=Gt(F,M,se),f[y+2+96]=f[y+1+64]=f[y+0+32]=Gt(ce,F,M),f[y+3+96]=f[y+2+64]=f[y+1+32]=f[y+0+0]=Gt(de,ce,F),f[y+3+64]=f[y+2+32]=f[y+1+0]=Gt(pe,de,ce),f[y+3+32]=f[y+2+0]=Gt(fe,pe,de),f[y+3+0]=Gt(we,fe,pe)}function bn(f,y){var F=f[y+1-32],M=f[y+2-32],se=f[y+3-32],ce=f[y+4-32],de=f[y+5-32],pe=f[y+6-32],fe=f[y+7-32];f[y+0+0]=Gt(f[y+0-32],F,M),f[y+1+0]=f[y+0+32]=Gt(F,M,se),f[y+2+0]=f[y+1+32]=f[y+0+64]=Gt(M,se,ce),f[y+3+0]=f[y+2+32]=f[y+1+64]=f[y+0+96]=Gt(se,ce,de),f[y+3+32]=f[y+2+64]=f[y+1+96]=Gt(ce,de,pe),f[y+3+64]=f[y+2+96]=Gt(de,pe,fe),f[y+3+96]=Gt(pe,fe,fe)}function Bn(f,y){var F=f[y-1+0],M=f[y-1+32],se=f[y-1+64],ce=f[y-1-32],de=f[y+0-32],pe=f[y+1-32],fe=f[y+2-32],we=f[y+3-32];f[y+0+0]=f[y+1+64]=ce+de+1>>1,f[y+1+0]=f[y+2+64]=de+pe+1>>1,f[y+2+0]=f[y+3+64]=pe+fe+1>>1,f[y+3+0]=fe+we+1>>1,f[y+0+96]=Gt(se,M,F),f[y+0+64]=Gt(M,F,ce),f[y+0+32]=f[y+1+96]=Gt(F,ce,de),f[y+1+32]=f[y+2+96]=Gt(ce,de,pe),f[y+2+32]=f[y+3+96]=Gt(de,pe,fe),f[y+3+32]=Gt(pe,fe,we)}function Yi(f,y){var F=f[y+0-32],M=f[y+1-32],se=f[y+2-32],ce=f[y+3-32],de=f[y+4-32],pe=f[y+5-32],fe=f[y+6-32],we=f[y+7-32];f[y+0+0]=F+M+1>>1,f[y+1+0]=f[y+0+64]=M+se+1>>1,f[y+2+0]=f[y+1+64]=se+ce+1>>1,f[y+3+0]=f[y+2+64]=ce+de+1>>1,f[y+0+32]=Gt(F,M,se),f[y+1+32]=f[y+0+96]=Gt(M,se,ce),f[y+2+32]=f[y+1+96]=Gt(se,ce,de),f[y+3+32]=f[y+2+96]=Gt(ce,de,pe),f[y+3+64]=Gt(de,pe,fe),f[y+3+96]=Gt(pe,fe,we)}function ur(f,y){var F=f[y-1+0],M=f[y-1+32],se=f[y-1+64],ce=f[y-1+96];f[y+0+0]=F+M+1>>1,f[y+2+0]=f[y+0+32]=M+se+1>>1,f[y+2+32]=f[y+0+64]=se+ce+1>>1,f[y+1+0]=Gt(F,M,se),f[y+3+0]=f[y+1+32]=Gt(M,se,ce),f[y+3+32]=f[y+1+64]=Gt(se,ce,ce),f[y+3+64]=f[y+2+64]=f[y+0+96]=f[y+1+96]=f[y+2+96]=f[y+3+96]=ce}function Ji(f,y){var F=f[y-1+0],M=f[y-1+32],se=f[y-1+64],ce=f[y-1+96],de=f[y-1-32],pe=f[y+0-32],fe=f[y+1-32],we=f[y+2-32];f[y+0+0]=f[y+2+32]=F+de+1>>1,f[y+0+32]=f[y+2+64]=M+F+1>>1,f[y+0+64]=f[y+2+96]=se+M+1>>1,f[y+0+96]=ce+se+1>>1,f[y+3+0]=Gt(pe,fe,we),f[y+2+0]=Gt(de,pe,fe),f[y+1+0]=f[y+3+32]=Gt(F,de,pe),f[y+1+32]=f[y+3+64]=Gt(M,F,de),f[y+1+64]=f[y+3+96]=Gt(se,M,F),f[y+1+96]=Gt(ce,se,M)}function Co(f,y){var F;for(F=0;8>F;++F)i(f,y+32*F,f,y-32,8)}function Di(f,y){var F;for(F=0;8>F;++F)o(f,y,f[y-1],8),y+=32}function Xi(f,y,F){var M;for(M=0;8>M;++M)o(y,F+32*M,f,8)}function Cr(f,y){var F,M=8;for(F=0;8>F;++F)M+=f[y+F-32]+f[y-1+32*F];Xi(M>>4,f,y)}function jn(f,y){var F,M=4;for(F=0;8>F;++F)M+=f[y+F-32];Xi(M>>3,f,y)}function Ss(f,y){var F,M=4;for(F=0;8>F;++F)M+=f[y-1+32*F];Xi(M>>3,f,y)}function bi(f,y){Xi(128,f,y)}function Zi(f,y,F){var M=f[y-F],se=f[y+0],ce=3*(se-M)+Zc[1020+f[y-2*F]-f[y+F]],de=el[112+(ce+4>>3)];f[y-F]=On[255+M+el[112+(ce+3>>3)]],f[y+0]=On[255+se-de]}function Zr(f,y,F,M){var se=f[y+0],ce=f[y+F];return nr[255+f[y-2*F]-f[y-F]]>M||nr[255+ce-se]>M}function Sr(f,y,F,M){return 4*nr[255+f[y-F]-f[y+0]]+nr[255+f[y-2*F]-f[y+F]]<=M}function hr(f,y,F,M,se){var ce=f[y-3*F],de=f[y-2*F],pe=f[y-F],fe=f[y+0],we=f[y+F],Le=f[y+2*F],qe=f[y+3*F];return 4*nr[255+pe-fe]+nr[255+de-we]>M?0:nr[255+f[y-4*F]-ce]<=se&&nr[255+ce-de]<=se&&nr[255+de-pe]<=se&&nr[255+qe-Le]<=se&&nr[255+Le-we]<=se&&nr[255+we-fe]<=se}function As(f,y,F,M){var se=2*M+1;for(M=0;16>M;++M)Sr(f,y+M,F,se)&&Zi(f,y+M,F)}function Ii(f,y,F,M){var se=2*M+1;for(M=0;16>M;++M)Sr(f,y+M*F,1,se)&&Zi(f,y+M*F,1)}function Ja(f,y,F,M){var se;for(se=3;0<se;--se)As(f,y+=4*F,F,M)}function eo(f,y,F,M){var se;for(se=3;0<se;--se)Ii(f,y+=4,F,M)}function er(f,y,F,M,se,ce,de,pe){for(ce=2*ce+1;0<se--;){if(hr(f,y,F,ce,de))if(Zr(f,y,F,pe))Zi(f,y,F);else{var fe=f,we=y,Le=F,qe=fe[we-2*Le],be=fe[we-Le],Qe=fe[we+0],Pe=fe[we+Le],rt=fe[we+2*Le],ze=27*(dt=Zc[1020+3*(Qe-be)+Zc[1020+qe-Pe]])+63>>7,At=18*dt+63>>7,dt=9*dt+63>>7;fe[we-3*Le]=On[255+fe[we-3*Le]+dt],fe[we-2*Le]=On[255+qe+At],fe[we-Le]=On[255+be+ze],fe[we+0]=On[255+Qe-ze],fe[we+Le]=On[255+Pe-At],fe[we+2*Le]=On[255+rt-dt]}y+=M}}function ji(f,y,F,M,se,ce,de,pe){for(ce=2*ce+1;0<se--;){if(hr(f,y,F,ce,de))if(Zr(f,y,F,pe))Zi(f,y,F);else{var fe=f,we=y,Le=F,qe=fe[we-Le],be=fe[we+0],Qe=fe[we+Le],Pe=el[112+(4+(rt=3*(be-qe))>>3)],rt=el[112+(rt+3>>3)],ze=Pe+1>>1;fe[we-2*Le]=On[255+fe[we-2*Le]+ze],fe[we-Le]=On[255+qe+rt],fe[we+0]=On[255+be-Pe],fe[we+Le]=On[255+Qe-ze]}y+=M}}function to(f,y,F,M,se,ce){er(f,y,F,1,16,M,se,ce)}function Nl(f,y,F,M,se,ce){er(f,y,1,F,16,M,se,ce)}function ao(f,y,F,M,se,ce){var de;for(de=3;0<de;--de)ji(f,y+=4*F,F,1,16,M,se,ce)}function kr(f,y,F,M,se,ce){var de;for(de=3;0<de;--de)ji(f,y+=4,1,F,16,M,se,ce)}function B(f,y,F,M,se,ce,de,pe){er(f,y,se,1,8,ce,de,pe),er(F,M,se,1,8,ce,de,pe)}function ae(f,y,F,M,se,ce,de,pe){er(f,y,1,se,8,ce,de,pe),er(F,M,1,se,8,ce,de,pe)}function je(f,y,F,M,se,ce,de,pe){ji(f,y+4*se,se,1,8,ce,de,pe),ji(F,M+4*se,se,1,8,ce,de,pe)}function Fe(f,y,F,M,se,ce,de,pe){ji(f,y+4,1,se,8,ce,de,pe),ji(F,M+4,1,se,8,ce,de,pe)}function De(){this.ba=new Ba,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Dt,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function ct(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function bt(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function na(){this.ua=0,this.Wa=new Mt,this.vb=new Mt,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new R,this.yc=new q}function fa(){this.xb=this.a=0,this.l=new Ys,this.ca=new Ba,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new I,this.Pb=0,this.wd=new I,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new na,this.ab=0,this.gc=d(4,bt),this.Oc=0}function Fa(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Ys,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Ea(f,y,F,M,se,ce,de){for(f=f==null?0:f[y+0],y=0;y<de;++y)se[ce+y]=f+F[M+y]&255,f=se[ce+y]}function ss(f,y,F,M,se,ce,de){var pe;if(f==null)Ea(null,null,F,M,se,ce,de);else for(pe=0;pe<de;++pe)se[ce+pe]=f[y+pe]+F[M+pe]&255}function Ps(f,y,F,M,se,ce,de){if(f==null)Ea(null,null,F,M,se,ce,de);else{var pe,fe=f[y+0],we=fe,Le=fe;for(pe=0;pe<de;++pe)we=Le+(fe=f[y+pe])-we,Le=F[M+pe]+(-256&we?0>we?0:255:we)&255,we=fe,se[ce+pe]=Le}}function Xs(f,y,F,M){var se=y.width,ce=y.o;if(a(f!=null&&y!=null),0>F||0>=M||F+M>ce)return null;if(!f.Cc){if(f.ga==null){var de;if(f.ga=new Fa,(de=f.ga==null)||(de=y.width*y.o,a(f.Gb.length==0),f.Gb=l(de),f.Uc=0,f.Gb==null?de=0:(f.mb=f.Gb,f.nb=f.Uc,f.rc=null,de=1),de=!de),!de){de=f.ga;var pe=f.Fa,fe=f.P,we=f.qc,Le=f.mb,qe=f.nb,be=fe+1,Qe=we-1,Pe=de.l;if(a(pe!=null&&Le!=null&&y!=null),Ir[0]=null,Ir[1]=Ea,Ir[2]=ss,Ir[3]=Ps,de.ca=Le,de.tb=qe,de.c=y.width,de.i=y.height,a(0<de.c&&0<de.i),1>=we)y=0;else if(de.$a=3&pe[fe+0],de.Z=pe[fe+0]>>2&3,de.Lc=pe[fe+0]>>4&3,fe=pe[fe+0]>>6&3,0>de.$a||1<de.$a||4<=de.Z||1<de.Lc||fe)y=0;else if(Pe.put=Qt,Pe.ac=gt,Pe.bc=ja,Pe.ma=de,Pe.width=y.width,Pe.height=y.height,Pe.Da=y.Da,Pe.v=y.v,Pe.va=y.va,Pe.j=y.j,Pe.o=y.o,de.$a)e:{a(de.$a==1),y=yt();t:for(;;){if(y==null){y=0;break e}if(a(de!=null),de.mc=y,y.c=de.c,y.i=de.i,y.l=de.l,y.l.ma=de,y.l.width=de.c,y.l.height=de.i,y.a=0,Be(y.m,pe,be,Qe),!Va(de.c,de.i,1,y,null)||(y.ab==1&&y.gc[0].hc==3&&ge(y.s)?(de.ic=1,pe=y.c*y.i,y.Ta=null,y.Ua=0,y.V=l(pe),y.Ba=0,y.V==null?(y.a=1,y=0):y=1):(de.ic=0,y=Zt(y,de.c)),!y))break t;y=1;break e}de.mc=null,y=0}else y=Qe>=de.c*de.i;de=!y}if(de)return null;f.ga.Lc!=1?f.Ga=0:M=ce-F}a(f.ga!=null),a(F+M<=ce);e:{if(y=(pe=f.ga).c,ce=pe.l.o,pe.$a==0){if(be=f.rc,Qe=f.Vc,Pe=f.Fa,fe=f.P+1+F*y,we=f.mb,Le=f.nb+F*y,a(fe<=f.P+f.qc),pe.Z!=0)for(a(Ir[pe.Z]!=null),de=0;de<M;++de)Ir[pe.Z](be,Qe,Pe,fe,we,Le,y),be=we,Qe=Le,Le+=y,fe+=y;else for(de=0;de<M;++de)i(we,Le,Pe,fe,y),be=we,Qe=Le,Le+=y,fe+=y;f.rc=be,f.Vc=Qe}else{if(a(pe.mc!=null),y=F+M,a((de=pe.mc)!=null),a(y<=de.i),de.C>=y)y=1;else if(pe.ic||wi(),pe.ic){pe=de.V,be=de.Ba,Qe=de.c;var rt=de.i,ze=(Pe=1,fe=de.$/Qe,we=de.$%Qe,Le=de.m,qe=de.s,de.$),At=Qe*rt,dt=Qe*y,Ft=qe.wc,jt=ze<dt?cs(qe,we,fe):null;a(ze<=At),a(y<=rt),a(ge(qe));t:for(;;){for(;!Le.h&&ze<dt;){if(we&Ft||(jt=cs(qe,we,fe)),a(jt!=null),V(Le),256>(rt=Pa(jt.G[0],jt.H[0],Le)))pe[be+ze]=rt,++ze,++we>=Qe&&(we=0,++fe<=y&&!(fe%16)&&$e(de,fe));else{if(!(280>rt)){Pe=0;break t}rt=_a(rt-256,Le);var ga,ra=Pa(jt.G[4],jt.H[4],Le);if(V(Le),!(ze>=(ra=Na(Qe,ra=_a(ra,Le)))&&At-ze>=rt)){Pe=0;break t}for(ga=0;ga<rt;++ga)pe[be+ze+ga]=pe[be+ze+ga-ra];for(ze+=rt,we+=rt;we>=Qe;)we-=Qe,++fe<=y&&!(fe%16)&&$e(de,fe);ze<dt&&we&Ft&&(jt=cs(qe,we,fe))}a(Le.h==re(Le))}$e(de,fe>y?y:fe);break t}!Pe||Le.h&&ze<At?(Pe=0,de.a=Le.h?5:3):de.$=ze,y=Pe}else y=zt(de,de.V,de.Ba,de.c,de.i,y,W);if(!y){M=0;break e}}F+M>=ce&&(f.Cc=1),M=1}if(!M)return null;if(f.Cc&&((M=f.ga)!=null&&(M.mc=null),f.ga=null,0<f.Ga))return alert("todo:WebPDequantizeLevels"),null}return f.nb+F*se}function ys(f,y,F,M,se,ce){for(;0<se--;){var de,pe=f,fe=y+(F?1:0),we=f,Le=y+(F?0:3);for(de=0;de<M;++de){var qe=we[Le+4*de];qe!=255&&(qe*=32897,pe[fe+4*de+0]=pe[fe+4*de+0]*qe>>23,pe[fe+4*de+1]=pe[fe+4*de+1]*qe>>23,pe[fe+4*de+2]=pe[fe+4*de+2]*qe>>23)}y+=ce}}function pn(f,y,F,M,se){for(;0<M--;){var ce;for(ce=0;ce<F;++ce){var de=f[y+2*ce+0],pe=15&(we=f[y+2*ce+1]),fe=4369*pe,we=(240&we|we>>4)*fe>>16;f[y+2*ce+0]=(240&de|de>>4)*fe>>16&240|(15&de|de<<4)*fe>>16>>4&15,f[y+2*ce+1]=240&we|pe}y+=se}}function Zs(f,y,F,M,se,ce,de,pe){var fe,we,Le=255;for(we=0;we<se;++we){for(fe=0;fe<M;++fe){var qe=f[y+fe];ce[de+4*fe]=qe,Le&=qe}y+=F,de+=pe}return Le!=255}function Cn(f,y,F,M,se){var ce;for(ce=0;ce<se;++ce)F[M+ce]=f[y+ce]>>8}function wi(){Cl=ys,Oi=pn,zi=Zs,Xo=Cn}function Gn(f,y,F){E[f]=function(M,se,ce,de,pe,fe,we,Le,qe,be,Qe,Pe,rt,ze,At,dt,Ft){var jt,ga=Ft-1>>1,ra=pe[fe+0]|we[Le+0]<<16,Ra=qe[be+0]|Qe[Pe+0]<<16;a(M!=null);var la=3*ra+Ra+131074>>2;for(y(M[se+0],255&la,la>>16,rt,ze),ce!=null&&(la=3*Ra+ra+131074>>2,y(ce[de+0],255&la,la>>16,At,dt)),jt=1;jt<=ga;++jt){var ts=pe[fe+jt]|we[Le+jt]<<16,wn=qe[be+jt]|Qe[Pe+jt]<<16,Ta=ra+ts+Ra+wn+524296,Aa=Ta+2*(ts+Ra)>>3;la=Aa+ra>>1,ra=(Ta=Ta+2*(ra+wn)>>3)+ts>>1,y(M[se+2*jt-1],255&la,la>>16,rt,ze+(2*jt-1)*F),y(M[se+2*jt-0],255&ra,ra>>16,rt,ze+(2*jt-0)*F),ce!=null&&(la=Ta+Ra>>1,ra=Aa+wn>>1,y(ce[de+2*jt-1],255&la,la>>16,At,dt+(2*jt-1)*F),y(ce[de+2*jt+0],255&ra,ra>>16,At,dt+(2*jt+0)*F)),ra=ts,Ra=wn}1&Ft||(la=3*ra+Ra+131074>>2,y(M[se+Ft-1],255&la,la>>16,rt,ze+(Ft-1)*F),ce!=null&&(la=3*Ra+ra+131074>>2,y(ce[de+Ft-1],255&la,la>>16,At,dt+(Ft-1)*F)))}}function So(){zn[ei]=co,zn[Sl]=Pr,zn[Rr]=Lo,zn[mc]=ad,zn[tl]=sd,zn[no]=El,zn[ed]=nd,zn[fc]=Pr,zn[Eo]=ad,zn[io]=sd,zn[kl]=El}function tr(f){return f&-16384?0>f?0:255:f>>zp}function _i(f,y){return tr((19077*f>>8)+(26149*y>>8)-14234)}function Fr(f,y,F){return tr((19077*f>>8)-(6419*y>>8)-(13320*F>>8)+8708)}function Er(f,y){return tr((19077*f>>8)+(33050*y>>8)-17685)}function Ur(f,y,F,M,se){M[se+0]=_i(f,F),M[se+1]=Fr(f,y,F),M[se+2]=Er(f,y)}function pr(f,y,F,M,se){M[se+0]=Er(f,y),M[se+1]=Fr(f,y,F),M[se+2]=_i(f,F)}function Sn(f,y,F,M,se){var ce=Fr(f,y,F);y=ce<<3&224|Er(f,y)>>3,M[se+0]=248&_i(f,F)|ce>>5,M[se+1]=y}function Lr(f,y,F,M,se){var ce=240&Er(f,y)|15;M[se+0]=240&_i(f,F)|Fr(f,y,F)>>4,M[se+1]=ce}function Ni(f,y,F,M,se){M[se+0]=255,Ur(f,y,F,M,se+1)}function Wo(f,y,F,M,se){pr(f,y,F,M,se),M[se+3]=255}function Yo(f,y,F,M,se){Ur(f,y,F,M,se),M[se+3]=255}function Vs(f,y){return 0>f?0:f>y?y:f}function P(f,y,F){E[f]=function(M,se,ce,de,pe,fe,we,Le,qe){for(var be=Le+(-2&qe)*F;Le!=be;)y(M[se+0],ce[de+0],pe[fe+0],we,Le),y(M[se+1],ce[de+0],pe[fe+0],we,Le+F),se+=2,++de,++fe,Le+=2*F;1&qe&&y(M[se+0],ce[de+0],pe[fe+0],we,Le)}}function Ue(f,y,F){return F==0?f==0?y==0?6:5:y==0?4:0:F}function He(f,y,F,M,se){switch(f>>>30){case 3:so(y,F,M,se,0);break;case 2:Mi(y,F,M,se);break;case 1:ns(y,F,M,se)}}function Ye(f,y){var F,M,se=y.M,ce=y.Nb,de=f.oc,pe=f.pc+40,fe=f.oc,we=f.pc+584,Le=f.oc,qe=f.pc+600;for(F=0;16>F;++F)de[pe+32*F-1]=129;for(F=0;8>F;++F)fe[we+32*F-1]=129,Le[qe+32*F-1]=129;for(0<se?de[pe-1-32]=fe[we-1-32]=Le[qe-1-32]=129:(o(de,pe-32-1,127,21),o(fe,we-32-1,127,9),o(Le,qe-32-1,127,9)),M=0;M<f.za;++M){var be=y.ya[y.aa+M];if(0<M){for(F=-1;16>F;++F)i(de,pe+32*F-4,de,pe+32*F+12,4);for(F=-1;8>F;++F)i(fe,we+32*F-4,fe,we+32*F+4,4),i(Le,qe+32*F-4,Le,qe+32*F+4,4)}var Qe=f.Gd,Pe=f.Hd+M,rt=be.ad,ze=be.Hc;if(0<se&&(i(de,pe-32,Qe[Pe].y,0,16),i(fe,we-32,Qe[Pe].f,0,8),i(Le,qe-32,Qe[Pe].ea,0,8)),be.Za){var At=de,dt=pe-32+16;for(0<se&&(M>=f.za-1?o(At,dt,Qe[Pe].y[15],4):i(At,dt,Qe[Pe+1].y,0,4)),F=0;4>F;F++)At[dt+128+F]=At[dt+256+F]=At[dt+384+F]=At[dt+0+F];for(F=0;16>F;++F,ze<<=2)At=de,dt=pe+il[F],Ai[be.Ob[F]](At,dt),He(ze,rt,16*+F,At,dt)}else if(At=Ue(M,se,be.Ob[0]),lo[At](de,pe),ze!=0)for(F=0;16>F;++F,ze<<=2)He(ze,rt,16*+F,de,pe+il[F]);for(F=be.Gc,At=Ue(M,se,be.Dd),Ki[At](fe,we),Ki[At](Le,qe),ze=rt,At=fe,dt=we,255&(be=0|F)&&(170&be?Zn(ze,256,At,dt):_s(ze,256,At,dt)),be=Le,ze=qe,255&(F>>=8)&&(170&F?Zn(rt,320,be,ze):_s(rt,320,be,ze)),se<f.Ub-1&&(i(Qe[Pe].y,0,de,pe+480,16),i(Qe[Pe].f,0,fe,we+224,8),i(Qe[Pe].ea,0,Le,qe+224,8)),F=8*ce*f.B,Qe=f.sa,Pe=f.ta+16*M+16*ce*f.R,rt=f.qa,be=f.ra+8*M+F,ze=f.Ha,At=f.Ia+8*M+F,F=0;16>F;++F)i(Qe,Pe+F*f.R,de,pe+32*F,16);for(F=0;8>F;++F)i(rt,be+F*f.B,fe,we+32*F,8),i(ze,At+F*f.B,Le,qe+32*F,8)}}function Tt(f,y,F,M,se,ce,de,pe,fe){var we=[0],Le=[0],qe=0,be=fe!=null?fe.kd:0,Qe=fe??new ct;if(f==null||12>F)return 7;Qe.data=f,Qe.w=y,Qe.ha=F,y=[y],F=[F],Qe.gb=[Qe.gb];e:{var Pe=y,rt=F,ze=Qe.gb;if(a(f!=null),a(rt!=null),a(ze!=null),ze[0]=0,12<=rt[0]&&!s(f,Pe[0],"RIFF")){if(s(f,Pe[0]+8,"WEBP")){ze=3;break e}var At=Ge(f,Pe[0]+4);if(12>At||4294967286<At){ze=3;break e}if(be&&At>rt[0]-8){ze=7;break e}ze[0]=At,Pe[0]+=12,rt[0]-=12}ze=0}if(ze!=0)return ze;for(At=0<Qe.gb[0],F=F[0];;){e:{var dt=f;rt=y,ze=F;var Ft=we,jt=Le,ga=Pe=[0];if((la=qe=[qe])[0]=0,8>ze[0])ze=7;else{if(!s(dt,rt[0],"VP8X")){if(Ge(dt,rt[0]+4)!=10){ze=3;break e}if(18>ze[0]){ze=7;break e}var ra=Ge(dt,rt[0]+8),Ra=1+ut(dt,rt[0]+12);if(2147483648<=Ra*(dt=1+ut(dt,rt[0]+15))){ze=3;break e}ga!=null&&(ga[0]=ra),Ft!=null&&(Ft[0]=Ra),jt!=null&&(jt[0]=dt),rt[0]+=18,ze[0]-=18,la[0]=1}ze=0}}if(qe=qe[0],Pe=Pe[0],ze!=0)return ze;if(rt=!!(2&Pe),!At&&qe)return 3;if(ce!=null&&(ce[0]=!!(16&Pe)),de!=null&&(de[0]=rt),pe!=null&&(pe[0]=0),de=we[0],Pe=Le[0],qe&&rt&&fe==null){ze=0;break}if(4>F){ze=7;break}if(At&&qe||!At&&!qe&&!s(f,y[0],"ALPH")){F=[F],Qe.na=[Qe.na],Qe.P=[Qe.P],Qe.Sa=[Qe.Sa];e:{ra=f,ze=y,At=F;var la=Qe.gb;Ft=Qe.na,jt=Qe.P,ga=Qe.Sa,Ra=22,a(ra!=null),a(At!=null),dt=ze[0];var ts=At[0];for(a(Ft!=null),a(ga!=null),Ft[0]=null,jt[0]=null,ga[0]=0;;){if(ze[0]=dt,At[0]=ts,8>ts){ze=7;break e}var wn=Ge(ra,dt+4);if(4294967286<wn){ze=3;break e}var Ta=8+wn+1&-2;if(Ra+=Ta,0<la&&Ra>la){ze=3;break e}if(!s(ra,dt,"VP8 ")||!s(ra,dt,"VP8L")){ze=0;break e}if(ts[0]<Ta){ze=7;break e}s(ra,dt,"ALPH")||(Ft[0]=ra,jt[0]=dt+8,ga[0]=wn),dt+=Ta,ts-=Ta}}if(F=F[0],Qe.na=Qe.na[0],Qe.P=Qe.P[0],Qe.Sa=Qe.Sa[0],ze!=0)break}F=[F],Qe.Ja=[Qe.Ja],Qe.xa=[Qe.xa];e:if(la=f,ze=y,At=F,Ft=Qe.gb[0],jt=Qe.Ja,ga=Qe.xa,ra=ze[0],dt=!s(la,ra,"VP8 "),Ra=!s(la,ra,"VP8L"),a(la!=null),a(At!=null),a(jt!=null),a(ga!=null),8>At[0])ze=7;else{if(dt||Ra){if(la=Ge(la,ra+4),12<=Ft&&la>Ft-12){ze=3;break e}if(be&&la>At[0]-8){ze=7;break e}jt[0]=la,ze[0]+=8,At[0]-=8,ga[0]=Ra}else ga[0]=5<=At[0]&&la[ra+0]==47&&!(la[ra+4]>>5),jt[0]=At[0];ze=0}if(F=F[0],Qe.Ja=Qe.Ja[0],Qe.xa=Qe.xa[0],y=y[0],ze!=0)break;if(4294967286<Qe.Ja)return 3;if(pe==null||rt||(pe[0]=Qe.xa?2:1),de=[de],Pe=[Pe],Qe.xa){if(5>F){ze=7;break}pe=de,be=Pe,rt=ce,f==null||5>F?f=0:5<=F&&f[y+0]==47&&!(f[y+4]>>5)?(At=[0],la=[0],Ft=[0],Be(jt=new I,f,y,F),va(jt,At,la,Ft)?(pe!=null&&(pe[0]=At[0]),be!=null&&(be[0]=la[0]),rt!=null&&(rt[0]=Ft[0]),f=1):f=0):f=0}else{if(10>F){ze=7;break}pe=Pe,f==null||10>F||!Nr(f,y+3,F-3)?f=0:(be=f[y+0]|f[y+1]<<8|f[y+2]<<16,rt=16383&(f[y+7]<<8|f[y+6]),f=16383&(f[y+9]<<8|f[y+8]),1&be||3<(be>>1&7)||!(be>>4&1)||be>>5>=Qe.Ja||!rt||!f?f=0:(de&&(de[0]=rt),pe&&(pe[0]=f),f=1))}if(!f||(de=de[0],Pe=Pe[0],qe&&(we[0]!=de||Le[0]!=Pe)))return 3;fe!=null&&(fe[0]=Qe,fe.offset=y-fe.w,a(4294967286>y-fe.w),a(fe.offset==fe.ha-F));break}return ze==0||ze==7&&qe&&fe==null?(ce!=null&&(ce[0]|=Qe.na!=null&&0<Qe.na.length),M!=null&&(M[0]=de),se!=null&&(se[0]=Pe),0):ze}function Vt(f,y,F){var M=y.width,se=y.height,ce=0,de=0,pe=M,fe=se;if(y.Da=f!=null&&0<f.Da,y.Da&&(pe=f.cd,fe=f.bd,ce=f.v,de=f.j,11>F||(ce&=-2,de&=-2),0>ce||0>de||0>=pe||0>=fe||ce+pe>M||de+fe>se))return 0;if(y.v=ce,y.j=de,y.va=ce+pe,y.o=de+fe,y.U=pe,y.T=fe,y.da=f!=null&&0<f.da,y.da){if(!Ze(pe,fe,F=[f.ib],ce=[f.hb]))return 0;y.ib=F[0],y.hb=ce[0]}return y.ob=f!=null&&f.ob,y.Kb=f==null||!f.Sd,y.da&&(y.ob=y.ib<3*M/4&&y.hb<3*se/4,y.Kb=0),1}function Pt(f){if(f==null)return 2;if(11>f.S){var y=f.f.RGBA;y.fb+=(f.height-1)*y.A,y.A=-y.A}else y=f.f.kb,f=f.height,y.O+=(f-1)*y.fa,y.fa=-y.fa,y.N+=(f-1>>1)*y.Ab,y.Ab=-y.Ab,y.W+=(f-1>>1)*y.Db,y.Db=-y.Db,y.F!=null&&(y.J+=(f-1)*y.lb,y.lb=-y.lb);return 0}function Rt(f,y,F,M){if(M==null||0>=f||0>=y)return 2;if(F!=null){if(F.Da){var se=F.cd,ce=F.bd,de=-2&F.v,pe=-2&F.j;if(0>de||0>pe||0>=se||0>=ce||de+se>f||pe+ce>y)return 2;f=se,y=ce}if(F.da){if(!Ze(f,y,se=[F.ib],ce=[F.hb]))return 2;f=se[0],y=ce[0]}}M.width=f,M.height=y;e:{var fe=M.width,we=M.height;if(f=M.S,0>=fe||0>=we||!(f>=ei&&13>f))f=2;else{if(0>=M.Rd&&M.sd==null){de=ce=se=y=0;var Le=(pe=fe*Cu[f])*we;if(11>f||(ce=(we+1)/2*(y=(fe+1)/2),f==12&&(de=(se=fe)*we)),(we=l(Le+2*ce+de))==null){f=1;break e}M.sd=we,11>f?((fe=M.f.RGBA).eb=we,fe.fb=0,fe.A=pe,fe.size=Le):((fe=M.f.kb).y=we,fe.O=0,fe.fa=pe,fe.Fd=Le,fe.f=we,fe.N=0+Le,fe.Ab=y,fe.Cd=ce,fe.ea=we,fe.W=0+Le+ce,fe.Db=y,fe.Ed=ce,f==12&&(fe.F=we,fe.J=0+Le+2*ce),fe.Tc=de,fe.lb=se)}if(y=1,se=M.S,ce=M.width,de=M.height,se>=ei&&13>se)if(11>se)f=M.f.RGBA,y&=(pe=Math.abs(f.A))*(de-1)+ce<=f.size,y&=pe>=ce*Cu[se],y&=f.eb!=null;else{f=M.f.kb,pe=(ce+1)/2,Le=(de+1)/2,fe=Math.abs(f.fa),we=Math.abs(f.Ab);var qe=Math.abs(f.Db),be=Math.abs(f.lb),Qe=be*(de-1)+ce;y&=fe*(de-1)+ce<=f.Fd,y&=we*(Le-1)+pe<=f.Cd,y=(y&=qe*(Le-1)+pe<=f.Ed)&fe>=ce&we>=pe&qe>=pe,y&=f.y!=null,y&=f.f!=null,y&=f.ea!=null,se==12&&(y&=be>=ce,y&=Qe<=f.Tc,y&=f.F!=null)}else y=0;f=y?0:2}}return f!=0||F!=null&&F.fd&&(f=Pt(M)),f}var es=64,Ma=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Ga=24,La=32,ws=8,Hs=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];ve("Predictor0","PredictorAdd0"),E.Predictor0=function(){return 4278190080},E.Predictor1=function(f){return f},E.Predictor2=function(f,y,F){return y[F+0]},E.Predictor3=function(f,y,F){return y[F+1]},E.Predictor4=function(f,y,F){return y[F-1]},E.Predictor5=function(f,y,F){return Oe(Oe(f,y[F+1]),y[F+0])},E.Predictor6=function(f,y,F){return Oe(f,y[F-1])},E.Predictor7=function(f,y,F){return Oe(f,y[F+0])},E.Predictor8=function(f,y,F){return Oe(y[F-1],y[F+0])},E.Predictor9=function(f,y,F){return Oe(y[F+0],y[F+1])},E.Predictor10=function(f,y,F){return Oe(Oe(f,y[F-1]),Oe(y[F+0],y[F+1]))},E.Predictor11=function(f,y,F){var M=y[F+0];return 0>=lt(M>>24&255,f>>24&255,(y=y[F-1])>>24&255)+lt(M>>16&255,f>>16&255,y>>16&255)+lt(M>>8&255,f>>8&255,y>>8&255)+lt(255&M,255&f,255&y)?M:f},E.Predictor12=function(f,y,F){var M=y[F+0];return(kt((f>>24&255)+(M>>24&255)-((y=y[F-1])>>24&255))<<24|kt((f>>16&255)+(M>>16&255)-(y>>16&255))<<16|kt((f>>8&255)+(M>>8&255)-(y>>8&255))<<8|kt((255&f)+(255&M)-(255&y)))>>>0},E.Predictor13=function(f,y,F){var M=y[F-1];return(xt((f=Oe(f,y[F+0]))>>24&255,M>>24&255)<<24|xt(f>>16&255,M>>16&255)<<16|xt(f>>8&255,M>>8&255)<<8|xt(255&f,255&M))>>>0};var ci=E.PredictorAdd0;E.PredictorAdd1=Ut,ve("Predictor2","PredictorAdd2"),ve("Predictor3","PredictorAdd3"),ve("Predictor4","PredictorAdd4"),ve("Predictor5","PredictorAdd5"),ve("Predictor6","PredictorAdd6"),ve("Predictor7","PredictorAdd7"),ve("Predictor8","PredictorAdd8"),ve("Predictor9","PredictorAdd9"),ve("Predictor10","PredictorAdd10"),ve("Predictor11","PredictorAdd11"),ve("Predictor12","PredictorAdd12"),ve("Predictor13","PredictorAdd13");var Bi=E.PredictorAdd2;Bt("ColorIndexInverseTransform","MapARGB","32b",function(f){return f>>8&255},function(f){return f}),Bt("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(f){return f},function(f){return f>>8&255});var ks,Oa=E.ColorIndexInverseTransform,Yt=E.MapARGB,vs=E.VP8LColorIndexInverseTransformAlpha,Ci=E.MapAlpha,ko=E.VP8LPredictorsAdd=[];ko.length=16,(E.VP8LPredictors=[]).length=16,(E.VP8LPredictorsAdd_C=[]).length=16,(E.VP8LPredictors_C=[]).length=16;var di,Fo,Pi,Tr,Si,Hi,ar,so,Mi,Zn,ns,_s,an,Ms,Qr,Bl,Jo,Wc,vu,bu,Gd,Vd,Yc,sr,Cl,Oi,zi,Xo,Jc=l(511),hc=l(2041),pc=l(225),Xc=l(767),Zo=0,Zc=hc,el=pc,On=Xc,nr=Jc,ei=0,Sl=1,Rr=2,mc=3,tl=4,no=5,ed=6,fc=7,Eo=8,io=9,kl=10,td=[2,3,7],ir=[3,3,11],qi=[280,256,256,256,40],al=[0,1,1,1,0],ro=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],oo=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],sl=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],ju=8,gc=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],xc=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],kn=null,sn=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],xs=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],Uo=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],Dr=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],$d=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],nl=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],wu=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],lo=[],Ai=[],Ki=[],_u=1,Fl=2,Ir=[],zn=[];Gn("UpsampleRgbLinePair",Ur,3),Gn("UpsampleBgrLinePair",pr,3),Gn("UpsampleRgbaLinePair",Yo,4),Gn("UpsampleBgraLinePair",Wo,4),Gn("UpsampleArgbLinePair",Ni,4),Gn("UpsampleRgba4444LinePair",Lr,2),Gn("UpsampleRgb565LinePair",Sn,2);var co=E.UpsampleRgbLinePair,Lo=E.UpsampleBgrLinePair,Pr=E.UpsampleRgbaLinePair,ad=E.UpsampleBgraLinePair,sd=E.UpsampleArgbLinePair,El=E.UpsampleRgba4444LinePair,nd=E.UpsampleRgb565LinePair,Hr=16,Fn=1<<Hr-1,To=-227,id=482,zp=6,Nu=0,qp=l(256),En=l(256),Wd=l(256),yc=l(256),vc=l(id-To),Yd=l(id-To);P("YuvToRgbRow",Ur,3),P("YuvToBgrRow",pr,3),P("YuvToRgbaRow",Yo,4),P("YuvToBgraRow",Wo,4),P("YuvToArgbRow",Ni,4),P("YuvToRgba4444Row",Lr,2),P("YuvToRgb565Row",Sn,2);var il=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Ao=[0,2,8],Kp=[8,7,6,4,4,2,2,2,1,1,1,1],Bu=1;this.WebPDecodeRGBA=function(f,y,F,M,se){var ce=Sl,de=new De,pe=new Ba;de.ba=pe,pe.S=ce,pe.width=[pe.width],pe.height=[pe.height];var fe=pe.width,we=pe.height,Le=new xa;if(Le==null||f==null)var qe=2;else a(Le!=null),qe=Tt(f,y,F,Le.width,Le.height,Le.Pd,Le.Qd,Le.format,null);if(qe!=0?fe=0:(fe!=null&&(fe[0]=Le.width[0]),we!=null&&(we[0]=Le.height[0]),fe=1),fe){pe.width=pe.width[0],pe.height=pe.height[0],M!=null&&(M[0]=pe.width),se!=null&&(se[0]=pe.height);e:{if(M=new Ys,(se=new ct).data=f,se.w=y,se.ha=F,se.kd=1,y=[0],a(se!=null),((f=Tt(se.data,se.w,se.ha,null,null,null,y,null,se))==0||f==7)&&y[0]&&(f=4),(y=f)==0){if(a(de!=null),M.data=se.data,M.w=se.w+se.offset,M.ha=se.ha-se.offset,M.put=Qt,M.ac=gt,M.bc=ja,M.ma=de,se.xa){if((f=yt())==null){de=1;break e}if(function(be,Qe){var Pe=[0],rt=[0],ze=[0];t:for(;;){if(be==null)return 0;if(Qe==null)return be.a=2,0;if(be.l=Qe,be.a=0,Be(be.m,Qe.data,Qe.w,Qe.ha),!va(be.m,Pe,rt,ze)){be.a=3;break t}if(be.xb=Fl,Qe.width=Pe[0],Qe.height=rt[0],!Va(Pe[0],rt[0],1,be,null))break t;return 1}return a(be.a!=0),0}(f,M)){if(M=(y=Rt(M.width,M.height,de.Oa,de.ba))==0){t:{M=f;a:for(;;){if(M==null){M=0;break t}if(a(M.s.yc!=null),a(M.s.Ya!=null),a(0<M.s.Wb),a((F=M.l)!=null),a((se=F.ma)!=null),M.xb!=0){if(M.ca=se.ba,M.tb=se.tb,a(M.ca!=null),!Vt(se.Oa,F,mc)){M.a=2;break a}if(!Zt(M,F.width)||F.da)break a;if((F.da||ca(M.ca.S))&&wi(),11>M.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),M.ca.f.kb.F!=null&&wi()),M.Pb&&0<M.s.ua&&M.s.vb.X==null&&!_e(M.s.vb,M.s.Wa.Xa)){M.a=1;break a}M.xb=0}if(!zt(M,M.V,M.Ba,M.c,M.i,F.o,yn))break a;se.Dc=M.Ma,M=1;break t}a(M.a!=0),M=0}M=!M}M&&(y=f.a)}else y=f.a}else{if((f=new Wi)==null){de=1;break e}if(f.Fa=se.na,f.P=se.P,f.qc=se.Sa,Xr(f,M)){if((y=Rt(M.width,M.height,de.Oa,de.ba))==0){if(f.Aa=0,F=de.Oa,a((se=f)!=null),F!=null){if(0<(fe=0>(fe=F.Md)?0:100<fe?255:255*fe/100)){for(we=Le=0;4>we;++we)12>(qe=se.pb[we]).lc&&(qe.ia=fe*Kp[0>qe.lc?0:qe.lc]>>3),Le|=qe.ia;Le&&(alert("todo:VP8InitRandom"),se.ia=1)}se.Ga=F.Id,100<se.Ga?se.Ga=100:0>se.Ga&&(se.Ga=0)}(function(be,Qe){if(be==null)return 0;if(Qe==null)return ds(be,2,"NULL VP8Io parameter in VP8Decode().");if(!be.cb&&!Xr(be,Qe))return 0;if(a(be.cb),Qe.ac==null||Qe.ac(Qe)){Qe.ob&&(be.L=0);var Pe=Ao[be.L];if(be.L==2?(be.yb=0,be.zb=0):(be.yb=Qe.v-Pe>>4,be.zb=Qe.j-Pe>>4,0>be.yb&&(be.yb=0),0>be.zb&&(be.zb=0)),be.Va=Qe.o+15+Pe>>4,be.Hb=Qe.va+15+Pe>>4,be.Hb>be.za&&(be.Hb=be.za),be.Va>be.Ub&&(be.Va=be.Ub),0<be.L){var rt=be.ed;for(Pe=0;4>Pe;++Pe){var ze;if(be.Qa.Cb){var At=be.Qa.Lb[Pe];be.Qa.Fb||(At+=rt.Tb)}else At=rt.Tb;for(ze=0;1>=ze;++ze){var dt=be.gd[Pe][ze],Ft=At;if(rt.Pc&&(Ft+=rt.vd[0],ze&&(Ft+=rt.od[0])),0<(Ft=0>Ft?0:63<Ft?63:Ft)){var jt=Ft;0<rt.wb&&(jt=4<rt.wb?jt>>2:jt>>1)>9-rt.wb&&(jt=9-rt.wb),1>jt&&(jt=1),dt.dd=jt,dt.tc=2*Ft+jt,dt.ld=40<=Ft?2:15<=Ft?1:0}else dt.tc=0;dt.La=ze}}}Pe=0}else ds(be,6,"Frame setup failed"),Pe=be.a;if(Pe=Pe==0){if(Pe){be.$c=0,0<be.Aa||(be.Ic=Bu);t:{Pe=be.Ic,rt=4*(jt=be.za);var ga=32*jt,ra=jt+1,Ra=0<be.L?jt*(0<be.Aa?2:1):0,la=(be.Aa==2?2:1)*jt;if((dt=rt+832+(ze=3*(16*Pe+Ao[be.L])/2*ga)+(At=be.Fa!=null&&0<be.Fa.length?be.Kc.c*be.Kc.i:0))!=dt)Pe=0;else{if(dt>be.Vb){if(be.Vb=0,be.Ec=l(dt),be.Fc=0,be.Ec==null){Pe=ds(be,1,"no memory during frame initialization.");break t}be.Vb=dt}dt=be.Ec,Ft=be.Fc,be.Ac=dt,be.Bc=Ft,Ft+=rt,be.Gd=d(ga,ka),be.Hd=0,be.rb=d(ra+1,Ht),be.sb=1,be.wa=Ra?d(Ra,Jt):null,be.Y=0,be.D.Nb=0,be.D.wa=be.wa,be.D.Y=be.Y,0<be.Aa&&(be.D.Y+=jt),a(!0),be.oc=dt,be.pc=Ft,Ft+=832,be.ya=d(la,wa),be.aa=0,be.D.ya=be.ya,be.D.aa=be.aa,be.Aa==2&&(be.D.aa+=jt),be.R=16*jt,be.B=8*jt,jt=(ga=Ao[be.L])*be.R,ga=ga/2*be.B,be.sa=dt,be.ta=Ft+jt,be.qa=be.sa,be.ra=be.ta+16*Pe*be.R+ga,be.Ha=be.qa,be.Ia=be.ra+8*Pe*be.B+ga,be.$c=0,Ft+=ze,be.mb=At?dt:null,be.nb=At?Ft:null,a(Ft+At<=be.Fc+be.Vb),vi(be),o(be.Ac,be.Bc,0,rt),Pe=1}}if(Pe){if(Qe.ka=0,Qe.y=be.sa,Qe.O=be.ta,Qe.f=be.qa,Qe.N=be.ra,Qe.ea=be.Ha,Qe.Vd=be.Ia,Qe.fa=be.R,Qe.Rc=be.B,Qe.F=null,Qe.J=0,!Zo){for(Pe=-255;255>=Pe;++Pe)Jc[255+Pe]=0>Pe?-Pe:Pe;for(Pe=-1020;1020>=Pe;++Pe)hc[1020+Pe]=-128>Pe?-128:127<Pe?127:Pe;for(Pe=-112;112>=Pe;++Pe)pc[112+Pe]=-16>Pe?-16:15<Pe?15:Pe;for(Pe=-255;510>=Pe;++Pe)Xc[255+Pe]=0>Pe?0:255<Pe?255:Pe;Zo=1}ar=li,so=Ar,Zn=vn,ns=Mn,_s=Br,Mi=Bo,an=to,Ms=Nl,Qr=B,Bl=ae,Jo=ao,Wc=kr,vu=je,bu=Fe,Gd=As,Vd=Ii,Yc=Ja,sr=eo,Ai[0]=Kn,Ai[1]=Ae,Ai[2]=js,Ai[3]=hn,Ai[4]=Ts,Ai[5]=Bn,Ai[6]=bn,Ai[7]=Yi,Ai[8]=Ji,Ai[9]=ur,lo[0]=Kt,lo[1]=Re,lo[2]=nt,lo[3]=vt,lo[4]=aa,lo[5]=da,lo[6]=ea,Ki[0]=Cr,Ki[1]=xe,Ki[2]=Co,Ki[3]=Di,Ki[4]=Ss,Ki[5]=jn,Ki[6]=bi,Pe=1}else Pe=0}Pe&&(Pe=function(ts,wn){for(ts.M=0;ts.M<ts.Va;++ts.M){var Ta,Aa=ts.Jc[ts.M&ts.Xb],$t=ts.m,en=ts;for(Ta=0;Ta<en.za;++Ta){var Da=$t,Ka=en,ha=Ka.Ac,Ha=Ka.Bc+4*Ta,us=Ka.zc,Os=Ka.ya[Ka.aa+Ta];if(Ka.Qa.Bb?Os.$b=Ne(Da,Ka.Pa.jb[0])?2+Ne(Da,Ka.Pa.jb[2]):Ne(Da,Ka.Pa.jb[1]):Os.$b=0,Ka.kc&&(Os.Ad=Ne(Da,Ka.Bd)),Os.Za=!Ne(Da,145)+0,Os.Za){var mn=Os.Ob,fn=0;for(Ka=0;4>Ka;++Ka){var nn,Xa=us[0+Ka];for(nn=0;4>nn;++nn){Xa=$d[ha[Ha+nn]][Xa];for(var hs=Uo[Ne(Da,Xa[0])];0<hs;)hs=Uo[2*hs+Ne(Da,Xa[hs])];Xa=-hs,ha[Ha+nn]=Xa}i(mn,fn,ha,Ha,4),fn+=4,us[0+Ka]=Xa}}else Xa=Ne(Da,156)?Ne(Da,128)?1:3:Ne(Da,163)?2:0,Os.Ob[0]=Xa,o(ha,Ha,Xa,4),o(us,0,Xa,4);Os.Dd=Ne(Da,142)?Ne(Da,114)?Ne(Da,183)?1:3:2:0}if(en.m.Ka)return ds(ts,7,"Premature end-of-partition0 encountered.");for(;ts.ja<ts.za;++ts.ja){if(en=Aa,Da=($t=ts).rb[$t.sb-1],ha=$t.rb[$t.sb+$t.ja],Ta=$t.ya[$t.aa+$t.ja],Ha=$t.kc?Ta.Ad:0)Da.la=ha.la=0,Ta.Za||(Da.Na=ha.Na=0),Ta.Hc=0,Ta.Gc=0,Ta.ia=0;else{var rn,Ca;if(Da=ha,ha=en,Ha=$t.Pa.Xc,us=$t.ya[$t.aa+$t.ja],Os=$t.pb[us.$b],Ka=us.ad,mn=0,fn=$t.rb[$t.sb-1],Xa=nn=0,o(Ka,mn,0,384),us.Za)var Un=0,Gi=Ha[3];else{hs=l(16);var on=Da.Na+fn.Na;if(on=kn(ha,Ha[1],on,Os.Eb,0,hs,0),Da.Na=fn.Na=(0<on)+0,1<on)ar(hs,0,Ka,mn);else{var ui=hs[0]+3>>3;for(hs=0;256>hs;hs+=16)Ka[mn+hs]=ui}Un=1,Gi=Ha[0]}var Fs=15&Da.la,gn=15&fn.la;for(hs=0;4>hs;++hs){var hi=1&gn;for(ui=Ca=0;4>ui;++ui)Fs=Fs>>1|(hi=(on=kn(ha,Gi,on=hi+(1&Fs),Os.Sc,Un,Ka,mn))>Un)<<7,Ca=Ca<<2|(3<on?3:1<on?2:Ka[mn+0]!=0),mn+=16;Fs>>=4,gn=gn>>1|hi<<7,nn=(nn<<8|Ca)>>>0}for(Gi=Fs,Un=gn>>4,rn=0;4>rn;rn+=2){for(Ca=0,Fs=Da.la>>4+rn,gn=fn.la>>4+rn,hs=0;2>hs;++hs){for(hi=1&gn,ui=0;2>ui;++ui)on=hi+(1&Fs),Fs=Fs>>1|(hi=0<(on=kn(ha,Ha[2],on,Os.Qc,0,Ka,mn)))<<3,Ca=Ca<<2|(3<on?3:1<on?2:Ka[mn+0]!=0),mn+=16;Fs>>=2,gn=gn>>1|hi<<5}Xa|=Ca<<4*rn,Gi|=Fs<<4<<rn,Un|=(240&gn)<<rn}Da.la=Gi,fn.la=Un,us.Hc=nn,us.Gc=Xa,us.ia=43690&Xa?0:Os.ia,Ha=!(nn|Xa)}if(0<$t.L&&($t.wa[$t.Y+$t.ja]=$t.gd[Ta.$b][Ta.Za],$t.wa[$t.Y+$t.ja].La|=!Ha),en.Ka)return ds(ts,7,"Premature end-of-file encountered.")}if(vi(ts),$t=wn,en=1,Ta=(Aa=ts).D,Da=0<Aa.L&&Aa.M>=Aa.zb&&Aa.M<=Aa.Va,Aa.Aa==0)t:{if(Ta.M=Aa.M,Ta.uc=Da,Ye(Aa,Ta),en=1,Ta=(Ca=Aa.D).Nb,Da=(Xa=Ao[Aa.L])*Aa.R,ha=Xa/2*Aa.B,hs=16*Ta*Aa.R,ui=8*Ta*Aa.B,Ha=Aa.sa,us=Aa.ta-Da+hs,Os=Aa.qa,Ka=Aa.ra-ha+ui,mn=Aa.Ha,fn=Aa.Ia-ha+ui,gn=(Fs=Ca.M)==0,nn=Fs>=Aa.Va-1,Aa.Aa==2&&Ye(Aa,Ca),Ca.uc)for(hi=(on=Aa).D.M,a(on.D.uc),Ca=on.yb;Ca<on.Hb;++Ca){Un=Ca,Gi=hi;var Vn=(Qs=(Tn=on).D).Nb;rn=Tn.R;var Qs=Qs.wa[Qs.Y+Un],ms=Tn.sa,ti=Tn.ta+16*Vn*rn+16*Un,$n=Qs.dd,Ns=Qs.tc;if(Ns!=0)if(a(3<=Ns),Tn.L==1)0<Un&&Vd(ms,ti,rn,Ns+4),Qs.La&&sr(ms,ti,rn,Ns),0<Gi&&Gd(ms,ti,rn,Ns+4),Qs.La&&Yc(ms,ti,rn,Ns);else{var pi=Tn.B,Ln=Tn.qa,Mr=Tn.ra+8*Vn*pi+8*Un,mr=Tn.Ha,Tn=Tn.Ia+8*Vn*pi+8*Un;Vn=Qs.ld,0<Un&&(Ms(ms,ti,rn,Ns+4,$n,Vn),Bl(Ln,Mr,mr,Tn,pi,Ns+4,$n,Vn)),Qs.La&&(Wc(ms,ti,rn,Ns,$n,Vn),bu(Ln,Mr,mr,Tn,pi,Ns,$n,Vn)),0<Gi&&(an(ms,ti,rn,Ns+4,$n,Vn),Qr(Ln,Mr,mr,Tn,pi,Ns+4,$n,Vn)),Qs.La&&(Jo(ms,ti,rn,Ns,$n,Vn),vu(Ln,Mr,mr,Tn,pi,Ns,$n,Vn))}}if(Aa.ia&&alert("todo:DitherRow"),$t.put!=null){if(Ca=16*Fs,Fs=16*(Fs+1),gn?($t.y=Aa.sa,$t.O=Aa.ta+hs,$t.f=Aa.qa,$t.N=Aa.ra+ui,$t.ea=Aa.Ha,$t.W=Aa.Ia+ui):(Ca-=Xa,$t.y=Ha,$t.O=us,$t.f=Os,$t.N=Ka,$t.ea=mn,$t.W=fn),nn||(Fs-=Xa),Fs>$t.o&&(Fs=$t.o),$t.F=null,$t.J=null,Aa.Fa!=null&&0<Aa.Fa.length&&Ca<Fs&&($t.J=Xs(Aa,$t,Ca,Fs-Ca),$t.F=Aa.mb,$t.F==null&&$t.F.length==0)){en=ds(Aa,3,"Could not decode alpha data.");break t}Ca<$t.j&&(Xa=$t.j-Ca,Ca=$t.j,a(!(1&Xa)),$t.O+=Aa.R*Xa,$t.N+=Aa.B*(Xa>>1),$t.W+=Aa.B*(Xa>>1),$t.F!=null&&($t.J+=$t.width*Xa)),Ca<Fs&&($t.O+=$t.v,$t.N+=$t.v>>1,$t.W+=$t.v>>1,$t.F!=null&&($t.J+=$t.v),$t.ka=Ca-$t.j,$t.U=$t.va-$t.v,$t.T=Fs-Ca,en=$t.put($t))}Ta+1!=Aa.Ic||nn||(i(Aa.sa,Aa.ta-Da,Ha,us+16*Aa.R,Da),i(Aa.qa,Aa.ra-ha,Os,Ka+8*Aa.B,ha),i(Aa.Ha,Aa.Ia-ha,mn,fn+8*Aa.B,ha))}if(!en)return ds(ts,6,"Output aborted.")}return 1}(be,Qe)),Qe.bc!=null&&Qe.bc(Qe),Pe&=1}return Pe?(be.cb=0,Pe):0})(f,M)||(y=f.a)}}else y=f.a}y==0&&de.Oa!=null&&de.Oa.fd&&(y=Pt(de.ba))}de=y}ce=de!=0?null:11>ce?pe.f.RGBA.eb:pe.f.kb.y}else ce=null;return ce};var Cu=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function p(E,Y){for(var T="",Q=0;Q<4;Q++)T+=String.fromCharCode(E[Y++]);return T}function m(E,Y){return E[Y+0]|E[Y+1]<<8}function b(E,Y){return(E[Y+0]|E[Y+1]<<8|E[Y+2]<<16)>>>0}function v(E,Y){return(E[Y+0]|E[Y+1]<<8|E[Y+2]<<16|E[Y+3]<<24)>>>0}new A;var x=[0],C=[0],D=[],S=new A,_=t,N=function(E,Y){var T={},Q=0,q=!1,ne=0,R=0;if(T.frames=[],!function(k,I){for(var H=0;H<4;H++)if(k[I+H]!="RIFF".charCodeAt(H))return!0;return!1}(E,Y)){for(v(E,Y+=4),Y+=8;Y<E.length;){var z=p(E,Y),ee=v(E,Y+=4);Y+=4;var le=ee+(1&ee);switch(z){case"VP8 ":case"VP8L":T.frames[Q]===void 0&&(T.frames[Q]={}),(ue=T.frames[Q]).src_off=q?R:Y-8,ue.src_size=ne+ee+8,Q++,q&&(q=!1,ne=0,R=0);break;case"VP8X":(ue=T.header={}).feature_flags=E[Y];var Be=Y+4;ue.canvas_width=1+b(E,Be),Be+=3,ue.canvas_height=1+b(E,Be),Be+=3;break;case"ALPH":q=!0,ne=le+8,R=Y-8;break;case"ANIM":(ue=T.header).bgcolor=v(E,Y),Be=Y+4,ue.loop_count=m(E,Be),Be+=2;break;case"ANMF":var $,ue;(ue=T.frames[Q]={}).offset_x=2*b(E,Y),Y+=3,ue.offset_y=2*b(E,Y),Y+=3,ue.width=1+b(E,Y),Y+=3,ue.height=1+b(E,Y),Y+=3,ue.duration=b(E,Y),Y+=3,$=E[Y++],ue.dispose=1&$,ue.blend=$>>1&1}z!="ANMF"&&(Y+=le)}return T}}(_,0);N.response=_,N.rgbaoutput=!0,N.dataurl=!1;var O=N.header?N.header:null,L=N.frames?N.frames:null;if(O){O.loop_counter=O.loop_count,x=[O.canvas_height],C=[O.canvas_width];for(var te=0;te<L.length&&L[te].blend!=0;te++);}var G=L[0],X=S.WebPDecodeRGBA(_,G.src_off,G.src_size,C,x);G.rgba=X,G.imgwidth=C[0],G.imgheight=x[0];for(var U=0;U<C[0]*x[0]*4;U++)D[U]=X[U];return this.width=C,this.height=x,this.data=D,this}(function(t){var a,s,i,o,l,d,u,A,p,m=function(k){return k=k||{},this.isStrokeTransparent=k.isStrokeTransparent||!1,this.strokeOpacity=k.strokeOpacity||1,this.strokeStyle=k.strokeStyle||"#000000",this.fillStyle=k.fillStyle||"#000000",this.isFillTransparent=k.isFillTransparent||!1,this.fillOpacity=k.fillOpacity||1,this.font=k.font||"10px sans-serif",this.textBaseline=k.textBaseline||"alphabetic",this.textAlign=k.textAlign||"left",this.lineWidth=k.lineWidth||1,this.lineJoin=k.lineJoin||"miter",this.lineCap=k.lineCap||"butt",this.path=k.path||[],this.transform=k.transform!==void 0?k.transform.clone():new A,this.globalCompositeOperation=k.globalCompositeOperation||"normal",this.globalAlpha=k.globalAlpha||1,this.clip_path=k.clip_path||[],this.currentPoint=k.currentPoint||new d,this.miterLimit=k.miterLimit||10,this.lastPoint=k.lastPoint||new d,this.lineDashOffset=k.lineDashOffset||0,this.lineDash=k.lineDash||[],this.margin=k.margin||[0,0,0,0],this.prevPageLastElemOffset=k.prevPageLastElemOffset||0,this.ignoreClearRect=typeof k.ignoreClearRect!="boolean"||k.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new b(this),a=this.internal.f2,s=this.internal.getCoordinateString,i=this.internal.getVerticalCoordinateString,o=this.internal.getHorizontalCoordinate,l=this.internal.getVerticalCoordinate,d=this.internal.Point,u=this.internal.Rectangle,A=this.internal.Matrix,p=new m}]);var b=function(k){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var I=k;Object.defineProperty(this,"pdf",{get:function(){return I}});var H=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return H},set:function(Ge){H=!!Ge}});var re=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return re},set:function(Ge){re=!!Ge}});var J=0;Object.defineProperty(this,"posX",{get:function(){return J},set:function(Ge){isNaN(Ge)||(J=Ge)}});var V=0;Object.defineProperty(this,"posY",{get:function(){return V},set:function(Ge){isNaN(Ge)||(V=Ge)}}),Object.defineProperty(this,"margin",{get:function(){return p.margin},set:function(Ge){var _e;typeof Ge=="number"?_e=[Ge,Ge,Ge,Ge]:((_e=new Array(4))[0]=Ge[0],_e[1]=Ge.length>=2?Ge[1]:_e[0],_e[2]=Ge.length>=3?Ge[2]:_e[0],_e[3]=Ge.length>=4?Ge[3]:_e[1]),p.margin=_e}});var oe=!1;Object.defineProperty(this,"autoPaging",{get:function(){return oe},set:function(Ge){oe=Ge}});var K=0;Object.defineProperty(this,"lastBreak",{get:function(){return K},set:function(Ge){K=Ge}});var Ne=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Ne},set:function(Ge){Ne=Ge}}),Object.defineProperty(this,"ctx",{get:function(){return p},set:function(Ge){Ge instanceof m&&(p=Ge)}}),Object.defineProperty(this,"path",{get:function(){return p.path},set:function(Ge){p.path=Ge}});var Ee=[];Object.defineProperty(this,"ctxStack",{get:function(){return Ee},set:function(Ge){Ee=Ge}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(Ge){var _e;_e=v(Ge),this.ctx.fillStyle=_e.style,this.ctx.isFillTransparent=_e.a===0,this.ctx.fillOpacity=_e.a,this.pdf.setFillColor(_e.r,_e.g,_e.b,{a:_e.a}),this.pdf.setTextColor(_e.r,_e.g,_e.b,{a:_e.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(Ge){var _e=v(Ge);this.ctx.strokeStyle=_e.style,this.ctx.isStrokeTransparent=_e.a===0,this.ctx.strokeOpacity=_e.a,_e.a===0?this.pdf.setDrawColor(255,255,255):(_e.a,this.pdf.setDrawColor(_e.r,_e.g,_e.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(Ge){["butt","round","square"].indexOf(Ge)!==-1&&(this.ctx.lineCap=Ge,this.pdf.setLineCap(Ge))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(Ge){isNaN(Ge)||(this.ctx.lineWidth=Ge,this.pdf.setLineWidth(Ge))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(Ge){["bevel","round","miter"].indexOf(Ge)!==-1&&(this.ctx.lineJoin=Ge,this.pdf.setLineJoin(Ge))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(Ge){isNaN(Ge)||(this.ctx.miterLimit=Ge,this.pdf.setMiterLimit(Ge))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(Ge){this.ctx.textBaseline=Ge}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(Ge){["right","end","center","left","start"].indexOf(Ge)!==-1&&(this.ctx.textAlign=Ge)}});var st=null,ut=null;Object.defineProperty(this,"fontFaces",{get:function(){return ut},set:function(Ge){st=null,ut=Ge}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(Ge){var _e;if(this.ctx.font=Ge,(_e=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(Ge))!==null){var Et=_e[1];_e[2];var Mt=_e[3],Ze=_e[4];_e[5];var Je=_e[6],mt=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Ze)[2];Ze=Math.floor(mt==="px"?parseFloat(Ze)*this.pdf.internal.scaleFactor:mt==="em"?parseFloat(Ze)*this.pdf.getFontSize():parseFloat(Ze)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Ze);var ve=function(qt){var Bt,Xt,ta=[],ie=qt.trim();if(ie==="")return bf;if(ie in hv)return[hv[ie]];for(;ie!=="";){switch(Xt=null,Bt=(ie=mv(ie)).charAt(0)){case'"':case"'":Xt=TB(ie.substring(1),Bt);break;default:Xt=QB(ie)}if(Xt===null||(ta.push(Xt[0]),(ie=mv(Xt[1]))!==""&&ie.charAt(0)!==","))return bf;ie=ie.replace(/^,/,"")}return ta}(Je);if(this.fontFaces){var et=function(qt,Bt){if(st===null){var Xt=function(ta){var ie=[];return Object.keys(ta).forEach(function(at){ta[at].forEach(function(Ot){var Ct=null;switch(Ot){case"bold":Ct={family:at,weight:"bold"};break;case"italic":Ct={family:at,style:"italic"};break;case"bolditalic":Ct={family:at,weight:"bold",style:"italic"};break;case"":case"normal":Ct={family:at}}Ct!==null&&(Ct.ref={name:at,style:Ot},ie.push(Ct))})}),ie}(qt.getFontList());st=function(ta){for(var ie={},at=0;at<ta.length;++at){var Ot=vf(ta[at]),Ct=Ot.family,ia=Ot.stretch,ca=Ot.style,Za=Ot.weight;ie[Ct]=ie[Ct]||{},ie[Ct][ia]=ie[Ct][ia]||{},ie[Ct][ia][ca]=ie[Ct][ia][ca]||{},ie[Ct][ia][ca][Za]=Ot}return ie}(Xt.concat(Bt))}return st}(this.pdf,this.fontFaces),Oe=ve.map(function(qt){return{family:qt,stretch:"normal",weight:Mt,style:Et}}),kt=function(qt,Bt,Xt){for(var ta=(Xt=Xt||{}).defaultFontFamily||"times",ie=Object.assign({},LB,Xt.genericFontFamilies||{}),at=null,Ot=null,Ct=0;Ct<Bt.length;++Ct)if(ie[(at=vf(Bt[Ct])).family]&&(at.family=ie[at.family]),qt.hasOwnProperty(at.family)){Ot=qt[at.family];break}if(!(Ot=Ot||qt[ta]))throw new Error("Could not find a font-family for the rule '"+pv(at)+"' and default family '"+ta+"'.");if(Ot=function(ia,ca){if(ca[ia])return ca[ia];var Za=og[ia],os=Za<=og.normal?-1:1,Ba=uv(ca,K1,Za,os);if(!Ba)throw new Error("Could not find a matching font-stretch value for "+ia);return Ba}(at.stretch,Ot),Ot=function(ia,ca){if(ca[ia])return ca[ia];for(var Za=q1[ia],os=0;os<Za.length;++os)if(ca[Za[os]])return ca[Za[os]];throw new Error("Could not find a matching font-style for "+ia)}(at.style,Ot),!(Ot=function(ia,ca){if(ca[ia])return ca[ia];if(ia===400&&ca[500])return ca[500];if(ia===500&&ca[400])return ca[400];var Za=UB[ia],os=uv(ca,G1,Za,ia<400?-1:1);if(!os)throw new Error("Could not find a matching font-weight for value "+ia);return os}(at.weight,Ot)))throw new Error("Failed to resolve a font for the rule '"+pv(at)+"'.");return Ot}(et,Oe);this.pdf.setFont(kt.ref.name,kt.ref.style)}else{var xt="";(Mt==="bold"||parseInt(Mt,10)>=700||Et==="bold")&&(xt="bold"),Et==="italic"&&(xt+="italic"),xt.length===0&&(xt="normal");for(var lt="",Ut={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},_t=0;_t<ve.length;_t++){if(this.pdf.internal.getFont(ve[_t],xt,{noFallback:!0,disableWarning:!0})!==void 0){lt=ve[_t];break}if(xt==="bolditalic"&&this.pdf.internal.getFont(ve[_t],"bold",{noFallback:!0,disableWarning:!0})!==void 0)lt=ve[_t],xt="bold";else if(this.pdf.internal.getFont(ve[_t],"normal",{noFallback:!0,disableWarning:!0})!==void 0){lt=ve[_t],xt="normal";break}}if(lt===""){for(var Nt=0;Nt<ve.length;Nt++)if(Ut[ve[Nt]]){lt=Ut[ve[Nt]];break}}lt=lt===""?"Times":lt,this.pdf.setFont(lt,xt)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(Ge){this.ctx.globalCompositeOperation=Ge}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(Ge){this.ctx.globalAlpha=Ge}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(Ge){this.ctx.lineDashOffset=Ge,ue.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(Ge){this.ctx.lineDash=Ge,ue.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(Ge){this.ctx.ignoreClearRect=!!Ge}})};b.prototype.setLineDash=function(k){this.lineDash=k},b.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},b.prototype.fill=function(){L.call(this,"fill",!1)},b.prototype.stroke=function(){L.call(this,"stroke",!1)},b.prototype.beginPath=function(){this.path=[{type:"begin"}]},b.prototype.moveTo=function(k,I){if(isNaN(k)||isNaN(I))throw qs.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var H=this.ctx.transform.applyToPoint(new d(k,I));this.path.push({type:"mt",x:H.x,y:H.y}),this.ctx.lastPoint=new d(k,I)},b.prototype.closePath=function(){var k=new d(0,0),I=0;for(I=this.path.length-1;I!==-1;I--)if(this.path[I].type==="begin"&&Ls(this.path[I+1])==="object"&&typeof this.path[I+1].x=="number"){k=new d(this.path[I+1].x,this.path[I+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new d(k.x,k.y)},b.prototype.lineTo=function(k,I){if(isNaN(k)||isNaN(I))throw qs.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var H=this.ctx.transform.applyToPoint(new d(k,I));this.path.push({type:"lt",x:H.x,y:H.y}),this.ctx.lastPoint=new d(H.x,H.y)},b.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),L.call(this,null,!0)},b.prototype.quadraticCurveTo=function(k,I,H,re){if(isNaN(H)||isNaN(re)||isNaN(k)||isNaN(I))throw qs.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var J=this.ctx.transform.applyToPoint(new d(H,re)),V=this.ctx.transform.applyToPoint(new d(k,I));this.path.push({type:"qct",x1:V.x,y1:V.y,x:J.x,y:J.y}),this.ctx.lastPoint=new d(J.x,J.y)},b.prototype.bezierCurveTo=function(k,I,H,re,J,V){if(isNaN(J)||isNaN(V)||isNaN(k)||isNaN(I)||isNaN(H)||isNaN(re))throw qs.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var oe=this.ctx.transform.applyToPoint(new d(J,V)),K=this.ctx.transform.applyToPoint(new d(k,I)),Ne=this.ctx.transform.applyToPoint(new d(H,re));this.path.push({type:"bct",x1:K.x,y1:K.y,x2:Ne.x,y2:Ne.y,x:oe.x,y:oe.y}),this.ctx.lastPoint=new d(oe.x,oe.y)},b.prototype.arc=function(k,I,H,re,J,V){if(isNaN(k)||isNaN(I)||isNaN(H)||isNaN(re)||isNaN(J))throw qs.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(V=!!V,!this.ctx.transform.isIdentity){var oe=this.ctx.transform.applyToPoint(new d(k,I));k=oe.x,I=oe.y;var K=this.ctx.transform.applyToPoint(new d(0,H)),Ne=this.ctx.transform.applyToPoint(new d(0,0));H=Math.sqrt(Math.pow(K.x-Ne.x,2)+Math.pow(K.y-Ne.y,2))}Math.abs(J-re)>=2*Math.PI&&(re=0,J=2*Math.PI),this.path.push({type:"arc",x:k,y:I,radius:H,startAngle:re,endAngle:J,counterclockwise:V})},b.prototype.arcTo=function(k,I,H,re,J){throw new Error("arcTo not implemented.")},b.prototype.rect=function(k,I,H,re){if(isNaN(k)||isNaN(I)||isNaN(H)||isNaN(re))throw qs.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(k,I),this.lineTo(k+H,I),this.lineTo(k+H,I+re),this.lineTo(k,I+re),this.lineTo(k,I),this.lineTo(k+H,I),this.lineTo(k,I)},b.prototype.fillRect=function(k,I,H,re){if(isNaN(k)||isNaN(I)||isNaN(H)||isNaN(re))throw qs.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!x.call(this)){var J={};this.lineCap!=="butt"&&(J.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(J.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(k,I,H,re),this.fill(),J.hasOwnProperty("lineCap")&&(this.lineCap=J.lineCap),J.hasOwnProperty("lineJoin")&&(this.lineJoin=J.lineJoin)}},b.prototype.strokeRect=function(k,I,H,re){if(isNaN(k)||isNaN(I)||isNaN(H)||isNaN(re))throw qs.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");C.call(this)||(this.beginPath(),this.rect(k,I,H,re),this.stroke())},b.prototype.clearRect=function(k,I,H,re){if(isNaN(k)||isNaN(I)||isNaN(H)||isNaN(re))throw qs.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(k,I,H,re))},b.prototype.save=function(k){k=typeof k!="boolean"||k;for(var I=this.pdf.internal.getCurrentPageInfo().pageNumber,H=0;H<this.pdf.internal.getNumberOfPages();H++)this.pdf.setPage(H+1),this.pdf.internal.out("q");if(this.pdf.setPage(I),k){this.ctx.fontSize=this.pdf.internal.getFontSize();var re=new m(this.ctx);this.ctxStack.push(this.ctx),this.ctx=re}},b.prototype.restore=function(k){k=typeof k!="boolean"||k;for(var I=this.pdf.internal.getCurrentPageInfo().pageNumber,H=0;H<this.pdf.internal.getNumberOfPages();H++)this.pdf.setPage(H+1),this.pdf.internal.out("Q");this.pdf.setPage(I),k&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},b.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var v=function(k){var I,H,re,J;if(k.isCanvasGradient===!0&&(k=k.getColor()),!k)return{r:0,g:0,b:0,a:0,style:k};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(k))I=0,H=0,re=0,J=0;else{var V=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(k);if(V!==null)I=parseInt(V[1]),H=parseInt(V[2]),re=parseInt(V[3]),J=1;else if((V=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(k))!==null)I=parseInt(V[1]),H=parseInt(V[2]),re=parseInt(V[3]),J=parseFloat(V[4]);else{if(J=1,typeof k=="string"&&k.charAt(0)!=="#"){var oe=new D1(k);k=oe.ok?oe.toHex():"#000000"}k.length===4?(I=k.substring(1,2),I+=I,H=k.substring(2,3),H+=H,re=k.substring(3,4),re+=re):(I=k.substring(1,3),H=k.substring(3,5),re=k.substring(5,7)),I=parseInt(I,16),H=parseInt(H,16),re=parseInt(re,16)}}return{r:I,g:H,b:re,a:J,style:k}},x=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},C=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};b.prototype.fillText=function(k,I,H,re){if(isNaN(I)||isNaN(H)||typeof k!="string")throw qs.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(re=isNaN(re)?void 0:re,!x.call(this)){var J=le(this.ctx.transform.rotation),V=this.ctx.transform.scaleX;Q.call(this,{text:k,x:I,y:H,scale:V,angle:J,align:this.textAlign,maxWidth:re})}},b.prototype.strokeText=function(k,I,H,re){if(isNaN(I)||isNaN(H)||typeof k!="string")throw qs.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!C.call(this)){re=isNaN(re)?void 0:re;var J=le(this.ctx.transform.rotation),V=this.ctx.transform.scaleX;Q.call(this,{text:k,x:I,y:H,scale:V,renderingMode:"stroke",angle:J,align:this.textAlign,maxWidth:re})}},b.prototype.measureText=function(k){if(typeof k!="string")throw qs.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var I=this.pdf,H=this.pdf.internal.scaleFactor,re=I.internal.getFontSize(),J=I.getStringUnitWidth(k)*re/I.internal.scaleFactor;return new function(V){var oe=(V=V||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return oe}}),this}({width:J*=Math.round(96*H/72*1e4)/1e4})},b.prototype.scale=function(k,I){if(isNaN(k)||isNaN(I))throw qs.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var H=new A(k,0,0,I,0,0);this.ctx.transform=this.ctx.transform.multiply(H)},b.prototype.rotate=function(k){if(isNaN(k))throw qs.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var I=new A(Math.cos(k),Math.sin(k),-Math.sin(k),Math.cos(k),0,0);this.ctx.transform=this.ctx.transform.multiply(I)},b.prototype.translate=function(k,I){if(isNaN(k)||isNaN(I))throw qs.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var H=new A(1,0,0,1,k,I);this.ctx.transform=this.ctx.transform.multiply(H)},b.prototype.transform=function(k,I,H,re,J,V){if(isNaN(k)||isNaN(I)||isNaN(H)||isNaN(re)||isNaN(J)||isNaN(V))throw qs.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var oe=new A(k,I,H,re,J,V);this.ctx.transform=this.ctx.transform.multiply(oe)},b.prototype.setTransform=function(k,I,H,re,J,V){k=isNaN(k)?1:k,I=isNaN(I)?0:I,H=isNaN(H)?0:H,re=isNaN(re)?1:re,J=isNaN(J)?0:J,V=isNaN(V)?0:V,this.ctx.transform=new A(k,I,H,re,J,V)};var D=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};b.prototype.drawImage=function(k,I,H,re,J,V,oe,K,Ne){var Ee=this.pdf.getImageProperties(k),st=1,ut=1,Ge=1,_e=1;re!==void 0&&K!==void 0&&(Ge=K/re,_e=Ne/J,st=Ee.width/re*K/re,ut=Ee.height/J*Ne/J),V===void 0&&(V=I,oe=H,I=0,H=0),re!==void 0&&K===void 0&&(K=re,Ne=J),re===void 0&&K===void 0&&(K=Ee.width,Ne=Ee.height);for(var Et,Mt=this.ctx.transform.decompose(),Ze=le(Mt.rotate.shx),Je=new A,mt=(Je=(Je=(Je=Je.multiply(Mt.translate)).multiply(Mt.skew)).multiply(Mt.scale)).applyToRectangle(new u(V-I*Ge,oe-H*_e,re*st,J*ut)),ve=S.call(this,mt),et=[],Oe=0;Oe<ve.length;Oe+=1)et.indexOf(ve[Oe])===-1&&et.push(ve[Oe]);if(O(et),this.autoPaging)for(var kt=et[0],xt=et[et.length-1],lt=kt;lt<xt+1;lt++){this.pdf.setPage(lt);var Ut=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],_t=lt===1?this.posY+this.margin[0]:this.margin[0],Nt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],qt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Bt=lt===1?0:Nt+(lt-2)*qt;if(this.ctx.clip_path.length!==0){var Xt=this.path;Et=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=N(Et,this.posX+this.margin[3],-Bt+_t+this.ctx.prevPageLastElemOffset),te.call(this,"fill",!0),this.path=Xt}var ta=JSON.parse(JSON.stringify(mt));ta=N([ta],this.posX+this.margin[3],-Bt+_t+this.ctx.prevPageLastElemOffset)[0];var ie=(lt>kt||lt<xt)&&D.call(this);ie&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ut,qt,null).clip().discardPath()),this.pdf.addImage(k,"JPEG",ta.x,ta.y,ta.w,ta.h,null,null,Ze),ie&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(k,"JPEG",mt.x,mt.y,mt.w,mt.h,null,null,Ze)};var S=function(k,I,H){var re=[];I=I||this.pdf.internal.pageSize.width,H=H||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var J=this.posY+this.ctx.prevPageLastElemOffset;switch(k.type){default:case"mt":case"lt":re.push(Math.floor((k.y+J)/H)+1);break;case"arc":re.push(Math.floor((k.y+J-k.radius)/H)+1),re.push(Math.floor((k.y+J+k.radius)/H)+1);break;case"qct":var V=Be(this.ctx.lastPoint.x,this.ctx.lastPoint.y,k.x1,k.y1,k.x,k.y);re.push(Math.floor((V.y+J)/H)+1),re.push(Math.floor((V.y+V.h+J)/H)+1);break;case"bct":var oe=$(this.ctx.lastPoint.x,this.ctx.lastPoint.y,k.x1,k.y1,k.x2,k.y2,k.x,k.y);re.push(Math.floor((oe.y+J)/H)+1),re.push(Math.floor((oe.y+oe.h+J)/H)+1);break;case"rect":re.push(Math.floor((k.y+J)/H)+1),re.push(Math.floor((k.y+k.h+J)/H)+1)}for(var K=0;K<re.length;K+=1)for(;this.pdf.internal.getNumberOfPages()<re[K];)_.call(this);return re},_=function(){var k=this.fillStyle,I=this.strokeStyle,H=this.font,re=this.lineCap,J=this.lineWidth,V=this.lineJoin;this.pdf.addPage(),this.fillStyle=k,this.strokeStyle=I,this.font=H,this.lineCap=re,this.lineWidth=J,this.lineJoin=V},N=function(k,I,H){for(var re=0;re<k.length;re++)switch(k[re].type){case"bct":k[re].x2+=I,k[re].y2+=H;case"qct":k[re].x1+=I,k[re].y1+=H;default:k[re].x+=I,k[re].y+=H}return k},O=function(k){return k.sort(function(I,H){return I-H})},L=function(k,I){for(var H,re,J=this.fillStyle,V=this.strokeStyle,oe=this.lineCap,K=this.lineWidth,Ne=Math.abs(K*this.ctx.transform.scaleX),Ee=this.lineJoin,st=JSON.parse(JSON.stringify(this.path)),ut=JSON.parse(JSON.stringify(this.path)),Ge=[],_e=0;_e<ut.length;_e++)if(ut[_e].x!==void 0)for(var Et=S.call(this,ut[_e]),Mt=0;Mt<Et.length;Mt+=1)Ge.indexOf(Et[Mt])===-1&&Ge.push(Et[Mt]);for(var Ze=0;Ze<Ge.length;Ze++)for(;this.pdf.internal.getNumberOfPages()<Ge[Ze];)_.call(this);if(O(Ge),this.autoPaging)for(var Je=Ge[0],mt=Ge[Ge.length-1],ve=Je;ve<mt+1;ve++){this.pdf.setPage(ve),this.fillStyle=J,this.strokeStyle=V,this.lineCap=oe,this.lineWidth=Ne,this.lineJoin=Ee;var et=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Oe=ve===1?this.posY+this.margin[0]:this.margin[0],kt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],xt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],lt=ve===1?0:kt+(ve-2)*xt;if(this.ctx.clip_path.length!==0){var Ut=this.path;H=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=N(H,this.posX+this.margin[3],-lt+Oe+this.ctx.prevPageLastElemOffset),te.call(this,k,!0),this.path=Ut}if(re=JSON.parse(JSON.stringify(st)),this.path=N(re,this.posX+this.margin[3],-lt+Oe+this.ctx.prevPageLastElemOffset),I===!1||ve===0){var _t=(ve>Je||ve<mt)&&D.call(this);_t&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],et,xt,null).clip().discardPath()),te.call(this,k,I),_t&&this.pdf.restoreGraphicsState()}this.lineWidth=K}else this.lineWidth=Ne,te.call(this,k,I),this.lineWidth=K;this.path=st},te=function(k,I){if((k!=="stroke"||I||!C.call(this))&&(k==="stroke"||I||!x.call(this))){for(var H,re,J=[],V=this.path,oe=0;oe<V.length;oe++){var K=V[oe];switch(K.type){case"begin":J.push({begin:!0});break;case"close":J.push({close:!0});break;case"mt":J.push({start:K,deltas:[],abs:[]});break;case"lt":var Ne=J.length;if(V[oe-1]&&!isNaN(V[oe-1].x)&&(H=[K.x-V[oe-1].x,K.y-V[oe-1].y],Ne>0)){for(;Ne>=0;Ne--)if(J[Ne-1].close!==!0&&J[Ne-1].begin!==!0){J[Ne-1].deltas.push(H),J[Ne-1].abs.push(K);break}}break;case"bct":H=[K.x1-V[oe-1].x,K.y1-V[oe-1].y,K.x2-V[oe-1].x,K.y2-V[oe-1].y,K.x-V[oe-1].x,K.y-V[oe-1].y],J[J.length-1].deltas.push(H);break;case"qct":var Ee=V[oe-1].x+2/3*(K.x1-V[oe-1].x),st=V[oe-1].y+2/3*(K.y1-V[oe-1].y),ut=K.x+2/3*(K.x1-K.x),Ge=K.y+2/3*(K.y1-K.y),_e=K.x,Et=K.y;H=[Ee-V[oe-1].x,st-V[oe-1].y,ut-V[oe-1].x,Ge-V[oe-1].y,_e-V[oe-1].x,Et-V[oe-1].y],J[J.length-1].deltas.push(H);break;case"arc":J.push({deltas:[],abs:[],arc:!0}),Array.isArray(J[J.length-1].abs)&&J[J.length-1].abs.push(K)}}re=I?null:k==="stroke"?"stroke":"fill";for(var Mt=!1,Ze=0;Ze<J.length;Ze++)if(J[Ze].arc)for(var Je=J[Ze].abs,mt=0;mt<Je.length;mt++){var ve=Je[mt];ve.type==="arc"?U.call(this,ve.x,ve.y,ve.radius,ve.startAngle,ve.endAngle,ve.counterclockwise,void 0,I,!Mt):q.call(this,ve.x,ve.y),Mt=!0}else if(J[Ze].close===!0)this.pdf.internal.out("h"),Mt=!1;else if(J[Ze].begin!==!0){var et=J[Ze].start.x,Oe=J[Ze].start.y;ne.call(this,J[Ze].deltas,et,Oe),Mt=!0}re&&E.call(this,re),I&&Y.call(this)}},G=function(k){var I=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,H=I*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return k-H;case"top":return k+I-H;case"hanging":return k+I-2*H;case"middle":return k+I/2-H;default:return k}},X=function(k){return k+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};b.prototype.createLinearGradient=function(){var k=function(){};return k.colorStops=[],k.addColorStop=function(I,H){this.colorStops.push([I,H])},k.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},k.isCanvasGradient=!0,k},b.prototype.createPattern=function(){return this.createLinearGradient()},b.prototype.createRadialGradient=function(){return this.createLinearGradient()};var U=function(k,I,H,re,J,V,oe,K,Ne){for(var Ee=z.call(this,H,re,J,V),st=0;st<Ee.length;st++){var ut=Ee[st];st===0&&(Ne?T.call(this,ut.x1+k,ut.y1+I):q.call(this,ut.x1+k,ut.y1+I)),R.call(this,k,I,ut.x2,ut.y2,ut.x3,ut.y3,ut.x4,ut.y4)}K?Y.call(this):E.call(this,oe)},E=function(k){switch(k){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},Y=function(){this.pdf.clip(),this.pdf.discardPath()},T=function(k,I){this.pdf.internal.out(s(k)+" "+i(I)+" m")},Q=function(k){var I;switch(k.align){case"right":case"end":I="right";break;case"center":I="center";break;default:I="left"}var H=this.pdf.getTextDimensions(k.text),re=G.call(this,k.y),J=X.call(this,re)-H.h,V=this.ctx.transform.applyToPoint(new d(k.x,re)),oe=this.ctx.transform.decompose(),K=new A;K=(K=(K=K.multiply(oe.translate)).multiply(oe.skew)).multiply(oe.scale);for(var Ne,Ee,st,ut=this.ctx.transform.applyToRectangle(new u(k.x,re,H.w,H.h)),Ge=K.applyToRectangle(new u(k.x,J,H.w,H.h)),_e=S.call(this,Ge),Et=[],Mt=0;Mt<_e.length;Mt+=1)Et.indexOf(_e[Mt])===-1&&Et.push(_e[Mt]);if(O(Et),this.autoPaging)for(var Ze=Et[0],Je=Et[Et.length-1],mt=Ze;mt<Je+1;mt++){this.pdf.setPage(mt);var ve=mt===1?this.posY+this.margin[0]:this.margin[0],et=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Oe=this.pdf.internal.pageSize.height-this.margin[2],kt=Oe-this.margin[0],xt=this.pdf.internal.pageSize.width-this.margin[1],lt=xt-this.margin[3],Ut=mt===1?0:et+(mt-2)*kt;if(this.ctx.clip_path.length!==0){var _t=this.path;Ne=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=N(Ne,this.posX+this.margin[3],-1*Ut+ve),te.call(this,"fill",!0),this.path=_t}var Nt=N([JSON.parse(JSON.stringify(Ge))],this.posX+this.margin[3],-Ut+ve+this.ctx.prevPageLastElemOffset)[0];k.scale>=.01&&(Ee=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Ee*k.scale),st=this.lineWidth,this.lineWidth=st*k.scale);var qt=this.autoPaging!=="text";if(qt||Nt.y+Nt.h<=Oe){if(qt||Nt.y>=ve&&Nt.x<=xt){var Bt=qt?k.text:this.pdf.splitTextToSize(k.text,k.maxWidth||xt-Nt.x)[0],Xt=N([JSON.parse(JSON.stringify(ut))],this.posX+this.margin[3],-Ut+ve+this.ctx.prevPageLastElemOffset)[0],ta=qt&&(mt>Ze||mt<Je)&&D.call(this);ta&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],lt,kt,null).clip().discardPath()),this.pdf.text(Bt,Xt.x,Xt.y,{angle:k.angle,align:I,renderingMode:k.renderingMode}),ta&&this.pdf.restoreGraphicsState()}}else Nt.y<Oe&&(this.ctx.prevPageLastElemOffset+=Oe-Nt.y);k.scale>=.01&&(this.pdf.setFontSize(Ee),this.lineWidth=st)}else k.scale>=.01&&(Ee=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Ee*k.scale),st=this.lineWidth,this.lineWidth=st*k.scale),this.pdf.text(k.text,V.x+this.posX,V.y+this.posY,{angle:k.angle,align:I,renderingMode:k.renderingMode,maxWidth:k.maxWidth}),k.scale>=.01&&(this.pdf.setFontSize(Ee),this.lineWidth=st)},q=function(k,I,H,re){H=H||0,re=re||0,this.pdf.internal.out(s(k+H)+" "+i(I+re)+" l")},ne=function(k,I,H){return this.pdf.lines(k,I,H,null,null)},R=function(k,I,H,re,J,V,oe,K){this.pdf.internal.out([a(o(H+k)),a(l(re+I)),a(o(J+k)),a(l(V+I)),a(o(oe+k)),a(l(K+I)),"c"].join(" "))},z=function(k,I,H,re){for(var J=2*Math.PI,V=Math.PI/2;I>H;)I-=J;var oe=Math.abs(H-I);oe<J&&re&&(oe=J-oe);for(var K=[],Ne=re?-1:1,Ee=I;oe>1e-5;){var st=Ee+Ne*Math.min(oe,V);K.push(ee.call(this,k,Ee,st)),oe-=Math.abs(st-Ee),Ee=st}return K},ee=function(k,I,H){var re=(H-I)/2,J=k*Math.cos(re),V=k*Math.sin(re),oe=J,K=-V,Ne=oe*oe+K*K,Ee=Ne+oe*J+K*V,st=4/3*(Math.sqrt(2*Ne*Ee)-Ee)/(oe*V-K*J),ut=oe-st*K,Ge=K+st*oe,_e=ut,Et=-Ge,Mt=re+I,Ze=Math.cos(Mt),Je=Math.sin(Mt);return{x1:k*Math.cos(I),y1:k*Math.sin(I),x2:ut*Ze-Ge*Je,y2:ut*Je+Ge*Ze,x3:_e*Ze-Et*Je,y3:_e*Je+Et*Ze,x4:k*Math.cos(H),y4:k*Math.sin(H)}},le=function(k){return 180*k/Math.PI},Be=function(k,I,H,re,J,V){var oe=k+.5*(H-k),K=I+.5*(re-I),Ne=J+.5*(H-J),Ee=V+.5*(re-V),st=Math.min(k,J,oe,Ne),ut=Math.max(k,J,oe,Ne),Ge=Math.min(I,V,K,Ee),_e=Math.max(I,V,K,Ee);return new u(st,Ge,ut-st,_e-Ge)},$=function(k,I,H,re,J,V,oe,K){var Ne,Ee,st,ut,Ge,_e,Et,Mt,Ze,Je,mt,ve,et,Oe,kt=H-k,xt=re-I,lt=J-H,Ut=V-re,_t=oe-J,Nt=K-V;for(Ee=0;Ee<41;Ee++)Ze=(Et=(st=k+(Ne=Ee/40)*kt)+Ne*((Ge=H+Ne*lt)-st))+Ne*(Ge+Ne*(J+Ne*_t-Ge)-Et),Je=(Mt=(ut=I+Ne*xt)+Ne*((_e=re+Ne*Ut)-ut))+Ne*(_e+Ne*(V+Ne*Nt-_e)-Mt),Ee==0?(mt=Ze,ve=Je,et=Ze,Oe=Je):(mt=Math.min(mt,Ze),ve=Math.min(ve,Je),et=Math.max(et,Ze),Oe=Math.max(Oe,Je));return new u(Math.round(mt),Math.round(ve),Math.round(et-mt),Math.round(Oe-ve))},ue=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var k,I,H=(k=this.ctx.lineDash,I=this.ctx.lineDashOffset,JSON.stringify({lineDash:k,lineDashOffset:I}));this.prevLineDash!==H&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=H)}}})(ua.API),function(t){var a=function(d){var u,A,p,m,b,v,x,C,D,S;for(A=[],p=0,m=(d+=u="\0\0\0\0".slice(d.length%4||4)).length;m>p;p+=4)(b=(d.charCodeAt(p)<<24)+(d.charCodeAt(p+1)<<16)+(d.charCodeAt(p+2)<<8)+d.charCodeAt(p+3))!==0?(v=(b=((b=((b=((b=(b-(S=b%85))/85)-(D=b%85))/85)-(C=b%85))/85)-(x=b%85))/85)%85,A.push(v+33,x+33,C+33,D+33,S+33)):A.push(122);return function(_,N){for(var O=N;O>0;O--)_.pop()}(A,u.length),String.fromCharCode.apply(String,A)+"~>"},s=function(d){var u,A,p,m,b,v=String,x="length",C=255,D="charCodeAt",S="slice",_="replace";for(d[S](-2),d=d[S](0,-2)[_](/\s/g,"")[_]("z","!!!!!"),p=[],m=0,b=(d+=u="uuuuu"[S](d[x]%5||5))[x];b>m;m+=5)A=52200625*(d[D](m)-33)+614125*(d[D](m+1)-33)+7225*(d[D](m+2)-33)+85*(d[D](m+3)-33)+(d[D](m+4)-33),p.push(C&A>>24,C&A>>16,C&A>>8,C&A);return function(N,O){for(var L=O;L>0;L--)N.pop()}(p,u[x]),v.fromCharCode.apply(v,p)},i=function(d){return d.split("").map(function(u){return("0"+u.charCodeAt().toString(16)).slice(-2)}).join("")+">"},o=function(d){var u=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((d=d.replace(/\s/g,"")).indexOf(">")!==-1&&(d=d.substr(0,d.indexOf(">"))),d.length%2&&(d+="0"),u.test(d)===!1)return"";for(var A="",p=0;p<d.length;p+=2)A+=String.fromCharCode("0x"+(d[p]+d[p+1]));return A},l=function(d){for(var u=new Uint8Array(d.length),A=d.length;A--;)u[A]=d.charCodeAt(A);return(u=eg(u)).reduce(function(p,m){return p+String.fromCharCode(m)},"")};t.processDataByFilters=function(d,u){var A=0,p=d||"",m=[];for(typeof(u=u||[])=="string"&&(u=[u]),A=0;A<u.length;A+=1)switch(u[A]){case"ASCII85Decode":case"/ASCII85Decode":p=s(p),m.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":p=a(p),m.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":p=o(p),m.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":p=i(p),m.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":p=l(p),m.push("/FlateDecode");break;default:throw new Error('The filter: "'+u[A]+'" is not implemented')}return{data:p,reverseChain:m.reverse().join(" ")}}}(ua.API),function(t){t.loadFile=function(a,s,i){return function(o,l,d){l=l!==!1,d=typeof d=="function"?d:function(){};var u=void 0;try{u=function(A,p,m){var b=new XMLHttpRequest,v=0,x=function(C){var D=C.length,S=[],_=String.fromCharCode;for(v=0;v<D;v+=1)S.push(_(255&C.charCodeAt(v)));return S.join("")};if(b.open("GET",A,!p),b.overrideMimeType("text/plain; charset=x-user-defined"),p===!1&&(b.onload=function(){b.status===200?m(x(this.responseText)):m(void 0)}),b.send(null),p&&b.status===200)return x(b.responseText)}(o,l,d)}catch{}return u}(a,s,i)},t.loadImageFile=t.loadFile}(ua.API),function(t){function a(){return(Ia.html2canvas?Promise.resolve(Ia.html2canvas):cr(()=>Promise.resolve().then(()=>Au),void 0)).catch(function(u){return Promise.reject(new Error("Could not load html2canvas: "+u))}).then(function(u){return u.default?u.default:u})}function s(){return(Ia.DOMPurify?Promise.resolve(Ia.DOMPurify):cr(()=>import("./purify.es-B6FQ9oRL.js"),[])).catch(function(u){return Promise.reject(new Error("Could not load dompurify: "+u))}).then(function(u){return u.default?u.default:u})}var i=function(u){var A=Ls(u);return A==="undefined"?"undefined":A==="string"||u instanceof String?"string":A==="number"||u instanceof Number?"number":A==="function"||u instanceof Function?"function":u&&u.constructor===Array?"array":u&&u.nodeType===1?"element":A==="object"?"object":"unknown"},o=function(u,A){var p=document.createElement(u);for(var m in A.className&&(p.className=A.className),A.innerHTML&&A.dompurify&&(p.innerHTML=A.dompurify.sanitize(A.innerHTML)),A.style)p.style[m]=A.style[m];return p},l=function u(A,p){for(var m=A.nodeType===3?document.createTextNode(A.nodeValue):A.cloneNode(!1),b=A.firstChild;b;b=b.nextSibling)p!==!0&&b.nodeType===1&&b.nodeName==="SCRIPT"||m.appendChild(u(b,p));return A.nodeType===1&&(A.nodeName==="CANVAS"?(m.width=A.width,m.height=A.height,m.getContext("2d").drawImage(A,0,0)):A.nodeName!=="TEXTAREA"&&A.nodeName!=="SELECT"||(m.value=A.value),m.addEventListener("load",function(){m.scrollTop=A.scrollTop,m.scrollLeft=A.scrollLeft},!0)),m},d=function u(A){var p=Object.assign(u.convert(Promise.resolve()),JSON.parse(JSON.stringify(u.template))),m=u.convert(Promise.resolve(),p);return(m=m.setProgress(1,u,1,[u])).set(A)};(d.prototype=Object.create(Promise.prototype)).constructor=d,d.convert=function(u,A){return u.__proto__=A||d.prototype,u},d.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},d.prototype.from=function(u,A){return this.then(function(){switch(A=A||function(p){switch(i(p)){case"string":return"string";case"element":return p.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(u),A){case"string":return this.then(s).then(function(p){return this.set({src:o("div",{innerHTML:u,dompurify:p})})});case"element":return this.set({src:u});case"canvas":return this.set({canvas:u});case"img":return this.set({img:u});default:return this.error("Unknown source type.")}})},d.prototype.to=function(u){switch(u){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},d.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var u={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},A=l(this.prop.src,this.opt.html2canvas.javascriptEnabled);A.tagName==="BODY"&&(u.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=o("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=o("div",{className:"html2pdf__container",style:u}),this.prop.container.appendChild(A),this.prop.container.firstChild.appendChild(o("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},d.prototype.toCanvas=function(){var u=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(u).then(a).then(function(A){var p=Object.assign({},this.opt.html2canvas);return delete p.onrendered,A(this.prop.container,p)}).then(function(A){(this.opt.html2canvas.onrendered||function(){})(A),this.prop.canvas=A,document.body.removeChild(this.prop.overlay)})},d.prototype.toContext2d=function(){var u=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(u).then(a).then(function(A){var p=this.opt.jsPDF,m=this.opt.fontFaces,b=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,v=Object.assign({async:!0,allowTaint:!0,scale:b,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete v.onrendered,p.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,p.context2d.posX=this.opt.x,p.context2d.posY=this.opt.y,p.context2d.margin=this.opt.margin,p.context2d.fontFaces=m,m)for(var x=0;x<m.length;++x){var C=m[x],D=C.src.find(function(S){return S.format==="truetype"});D&&p.addFont(D.url,C.ref.name,C.ref.style)}return v.windowHeight=v.windowHeight||0,v.windowHeight=v.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):v.windowHeight,p.context2d.save(!0),A(this.prop.container,v)}).then(function(A){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(A),this.prop.canvas=A,document.body.removeChild(this.prop.overlay)})},d.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var u=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=u})},d.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},d.prototype.output=function(u,A,p){return(p=p||"pdf").toLowerCase()==="img"||p.toLowerCase()==="image"?this.outputImg(u,A):this.outputPdf(u,A)},d.prototype.outputPdf=function(u,A){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(u,A)})},d.prototype.outputImg=function(u){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(u){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+u+'" is not supported.'}})},d.prototype.save=function(u){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(u?{filename:u}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},d.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},d.prototype.set=function(u){if(i(u)!=="object")return this;var A=Object.keys(u||{}).map(function(p){if(p in d.template.prop)return function(){this.prop[p]=u[p]};switch(p){case"margin":return this.setMargin.bind(this,u.margin);case"jsPDF":return function(){return this.opt.jsPDF=u.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,u.pageSize);default:return function(){this.opt[p]=u[p]}}},this);return this.then(function(){return this.thenList(A)})},d.prototype.get=function(u,A){return this.then(function(){var p=u in d.template.prop?this.prop[u]:this.opt[u];return A?A(p):p})},d.prototype.setMargin=function(u){return this.then(function(){switch(i(u)){case"number":u=[u,u,u,u];case"array":if(u.length===2&&(u=[u[0],u[1],u[0],u[1]]),u.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=u}).then(this.setPageSize)},d.prototype.setPageSize=function(u){function A(p,m){return Math.floor(p*m/72*96)}return this.then(function(){(u=u||ua.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(u.inner={width:u.width-this.opt.margin[1]-this.opt.margin[3],height:u.height-this.opt.margin[0]-this.opt.margin[2]},u.inner.px={width:A(u.inner.width,u.k),height:A(u.inner.height,u.k)},u.inner.ratio=u.inner.height/u.inner.width),this.prop.pageSize=u})},d.prototype.setProgress=function(u,A,p,m){return u!=null&&(this.progress.val=u),A!=null&&(this.progress.state=A),p!=null&&(this.progress.n=p),m!=null&&(this.progress.stack=m),this.progress.ratio=this.progress.val/this.progress.state,this},d.prototype.updateProgress=function(u,A,p,m){return this.setProgress(u?this.progress.val+u:null,A||null,p?this.progress.n+p:null,m?this.progress.stack.concat(m):null)},d.prototype.then=function(u,A){var p=this;return this.thenCore(u,A,function(m,b){return p.updateProgress(null,null,1,[m]),Promise.prototype.then.call(this,function(v){return p.updateProgress(null,m),v}).then(m,b).then(function(v){return p.updateProgress(1),v})})},d.prototype.thenCore=function(u,A,p){p=p||Promise.prototype.then;var m=this;u&&(u=u.bind(m)),A&&(A=A.bind(m));var b=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?m:d.convert(Object.assign({},m),Promise.prototype),v=p.call(b,u,A);return d.convert(v,m.__proto__)},d.prototype.thenExternal=function(u,A){return Promise.prototype.then.call(this,u,A)},d.prototype.thenList=function(u){var A=this;return u.forEach(function(p){A=A.thenCore(p)}),A},d.prototype.catch=function(u){u&&(u=u.bind(this));var A=Promise.prototype.catch.call(this,u);return d.convert(A,this)},d.prototype.catchExternal=function(u){return Promise.prototype.catch.call(this,u)},d.prototype.error=function(u){return this.then(function(){throw new Error(u)})},d.prototype.using=d.prototype.set,d.prototype.saveAs=d.prototype.save,d.prototype.export=d.prototype.output,d.prototype.run=d.prototype.then,ua.getPageSize=function(u,A,p){if(Ls(u)==="object"){var m=u;u=m.orientation,A=m.unit||A,p=m.format||p}A=A||"mm",p=p||"a4",u=(""+(u||"P")).toLowerCase();var b,v=(""+p).toLowerCase(),x={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(A){case"pt":b=1;break;case"mm":b=72/25.4;break;case"cm":b=72/2.54;break;case"in":b=72;break;case"px":b=.75;break;case"pc":case"em":b=12;break;case"ex":b=6;break;default:throw"Invalid unit: "+A}var C,D=0,S=0;if(x.hasOwnProperty(v))D=x[v][1]/b,S=x[v][0]/b;else try{D=p[1],S=p[0]}catch{throw new Error("Invalid format: "+p)}if(u==="p"||u==="portrait")u="p",S>D&&(C=S,S=D,D=C);else{if(u!=="l"&&u!=="landscape")throw"Invalid orientation: "+u;u="l",D>S&&(C=S,S=D,D=C)}return{width:S,height:D,unit:A,k:b,orientation:u}},t.html=function(u,A){(A=A||{}).callback=A.callback||function(){},A.html2canvas=A.html2canvas||{},A.html2canvas.canvas=A.html2canvas.canvas||this.canvas,A.jsPDF=A.jsPDF||this,A.fontFaces=A.fontFaces?A.fontFaces.map(vf):null;var p=new d(A);return A.worker?p:p.from(u).doCallback()}}(ua.API),ua.API.addJS=function(t){return gv=t,this.internal.events.subscribe("postPutResources",function(){Ch=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Ch+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),fv=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+gv+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){Ch!==void 0&&fv!==void 0&&this.internal.out("/Names <</JavaScript "+Ch+" 0 R>>")}),this},function(t){var a;t.events.push(["postPutResources",function(){var s=this,i=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var o=s.outline.render().split(/\r\n/),l=0;l<o.length;l++){var d=o[l],u=i.exec(d);if(u!=null){var A=u[1];s.internal.newObjectDeferredBegin(A,!1)}s.internal.write(d)}if(this.outline.createNamedDestinations){var p=this.internal.pages.length,m=[];for(l=0;l<p;l++){var b=s.internal.newObject();m.push(b);var v=s.internal.getPageInfo(l+1);s.internal.write("<< /D["+v.objId+" 0 R /XYZ null null null]>> endobj")}var x=s.internal.newObject();for(s.internal.write("<< /Names [ "),l=0;l<m.length;l++)s.internal.write("(page_"+(l+1)+")"+m[l]+" 0 R");s.internal.write(" ] >>","endobj"),a=s.internal.newObject(),s.internal.write("<< /Dests "+x+" 0 R"),s.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){var s=this;s.outline.root.children.length>0&&(s.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&s.internal.write("/Names "+a+" 0 R"))}]),t.events.push(["initialized",function(){var s=this;s.outline={createNamedDestinations:!1,root:{children:[]}},s.outline.add=function(i,o,l){var d={title:o,options:l,children:[]};return i==null&&(i=this.root),i.children.push(d),d},s.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=s,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},s.outline.genIds_r=function(i){i.id=s.internal.newObjectDeferred();for(var o=0;o<i.children.length;o++)this.genIds_r(i.children[o])},s.outline.renderRoot=function(i){this.objStart(i),this.line("/Type /Outlines"),i.children.length>0&&(this.line("/First "+this.makeRef(i.children[0])),this.line("/Last "+this.makeRef(i.children[i.children.length-1]))),this.line("/Count "+this.count_r({count:0},i)),this.objEnd()},s.outline.renderItems=function(i){for(var o=this.ctx.pdf.internal.getVerticalCoordinateString,l=0;l<i.children.length;l++){var d=i.children[l];this.objStart(d),this.line("/Title "+this.makeString(d.title)),this.line("/Parent "+this.makeRef(i)),l>0&&this.line("/Prev "+this.makeRef(i.children[l-1])),l<i.children.length-1&&this.line("/Next "+this.makeRef(i.children[l+1])),d.children.length>0&&(this.line("/First "+this.makeRef(d.children[0])),this.line("/Last "+this.makeRef(d.children[d.children.length-1])));var u=this.count=this.count_r({count:0},d);if(u>0&&this.line("/Count "+u),d.options&&d.options.pageNumber){var A=s.internal.getPageInfo(d.options.pageNumber);this.line("/Dest ["+A.objId+" 0 R /XYZ 0 "+o(0)+" 0]")}this.objEnd()}for(var p=0;p<i.children.length;p++)this.renderItems(i.children[p])},s.outline.line=function(i){this.ctx.val+=i+`\r
`},s.outline.makeRef=function(i){return i.id+" 0 R"},s.outline.makeString=function(i){return"("+s.internal.pdfEscape(i)+")"},s.outline.objStart=function(i){this.ctx.val+=`\r
`+i.id+` 0 obj\r
<<\r
`},s.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},s.outline.count_r=function(i,o){for(var l=0;l<o.children.length;l++)i.count++,this.count_r(i,o.children[l]);return i.count}}])}(ua.API),function(t){var a=[192,193,194,195,196,197,198,199];t.processJPEG=function(s,i,o,l,d,u){var A,p=this.decode.DCT_DECODE,m=null;if(typeof s=="string"||this.__addimage__.isArrayBuffer(s)||this.__addimage__.isArrayBufferView(s)){switch(s=d||s,s=this.__addimage__.isArrayBuffer(s)?new Uint8Array(s):s,A=function(b){for(var v,x=256*b.charCodeAt(4)+b.charCodeAt(5),C=b.length,D={width:0,height:0,numcomponents:1},S=4;S<C;S+=2){if(S+=x,a.indexOf(b.charCodeAt(S+1))!==-1){v=256*b.charCodeAt(S+5)+b.charCodeAt(S+6),D={width:256*b.charCodeAt(S+7)+b.charCodeAt(S+8),height:v,numcomponents:b.charCodeAt(S+9)};break}x=256*b.charCodeAt(S+2)+b.charCodeAt(S+3)}return D}(s=this.__addimage__.isArrayBufferView(s)?this.__addimage__.arrayBufferToBinaryString(s):s),A.numcomponents){case 1:u=this.color_spaces.DEVICE_GRAY;break;case 4:u=this.color_spaces.DEVICE_CMYK;break;case 3:u=this.color_spaces.DEVICE_RGB}m={data:s,width:A.width,height:A.height,colorSpace:u,bitsPerComponent:8,filter:p,index:i,alias:o}}return m}}(ua.API),ua.API.processPNG=function(t,a,s,i){if(this.__addimage__.isArrayBuffer(t)&&(t=new Uint8Array(t)),this.__addimage__.isArrayBufferView(t)){var o,l=xB(t,{checkCrc:!0}),d=l.width,u=l.height,A=l.channels,p=l.palette,m=l.depth;o=p&&A===1?function(U){for(var E=U.width,Y=U.height,T=U.data,Q=U.palette,q=U.depth,ne=!1,R=[],z=[],ee=void 0,le=!1,Be=0,$=0;$<Q.length;$++){var ue=b0(Q[$],4),k=ue[0],I=ue[1],H=ue[2],re=ue[3];R.push(k,I,H),re!=null&&(re===0?(Be++,z.length<1&&z.push($)):re<255&&(le=!0))}if(le||Be>1){ne=!0,z=void 0;var J=E*Y;ee=new Uint8Array(J);for(var V=new DataView(T.buffer),oe=0;oe<J;oe++){var K=jf(V,oe,q),Ne=b0(Q[K],4)[3];ee[oe]=Ne}}else Be===0&&(z=void 0);return{colorSpace:"Indexed",colorsPerPixel:1,sMaskBitsPerComponent:ne?8:void 0,colorBytes:T,alphaBytes:ee,needSMask:ne,palette:R,mask:z}}(l):A===2||A===4?function(U){for(var E=U.data,Y=U.width,T=U.height,Q=U.channels,q=U.depth,ne=Q===2?"DeviceGray":"DeviceRGB",R=Q-1,z=Y*T,ee=R,le=z*ee,Be=1*z,$=Math.ceil(le*q/8),ue=Math.ceil(Be*q/8),k=new Uint8Array($),I=new Uint8Array(ue),H=new DataView(E.buffer),re=new DataView(k.buffer),J=new DataView(I.buffer),V=!1,oe=0;oe<z;oe++){for(var K=oe*Q,Ne=0;Ne<ee;Ne++)Bv(re,jf(H,K+Ne,q),oe*ee+Ne,q);var Ee=jf(H,K+ee,q);Ee<(1<<q)-1&&(V=!0),Bv(J,Ee,1*oe,q)}return{colorSpace:ne,colorsPerPixel:R,sMaskBitsPerComponent:V?q:void 0,colorBytes:k,alphaBytes:I,needSMask:V}}(l):function(U){var E=U.data,Y=U.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:Y,colorsPerPixel:Y==="DeviceGray"?1:3,colorBytes:E instanceof Uint16Array?function(T){for(var Q=T.length,q=new Uint8Array(2*Q),ne=new DataView(q.buffer,q.byteOffset,q.byteLength),R=0;R<Q;R++)ne.setUint16(2*R,T[R],!1);return q}(E):E,needSMask:!1}}(l);var b,v,x,C=o,D=C.colorSpace,S=C.colorsPerPixel,_=C.sMaskBitsPerComponent,N=C.colorBytes,O=C.alphaBytes,L=C.needSMask,te=C.palette,G=C.mask,X=null;return i!==ua.API.image_compression.NONE&&typeof eg=="function"?(X=function(U){var E;switch(U){case ua.API.image_compression.FAST:E=11;break;case ua.API.image_compression.MEDIUM:E=13;break;case ua.API.image_compression.SLOW:E=14;break;default:E=12}return E}(i),b=this.decode.FLATE_DECODE,v="/Predictor ".concat(X," /Colors ").concat(S," /BitsPerComponent ").concat(m," /Columns ").concat(d),t=bv(N,Math.ceil(d*S*m/8),S,m,i),L&&(x=bv(O,Math.ceil(d*_/8),1,_,i))):(b=void 0,v=void 0,t=N,L&&(x=O)),(this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t))&&(t=this.__addimage__.arrayBufferToBinaryString(t)),(x&&this.__addimage__.isArrayBuffer(x)||this.__addimage__.isArrayBufferView(x))&&(x=this.__addimage__.arrayBufferToBinaryString(x)),{alias:s,data:t,index:a,filter:b,decodeParameters:v,transparency:G,palette:te,sMask:x,predictor:X,width:d,height:u,bitsPerComponent:m,sMaskBitsPerComponent:_,colorSpace:D}}},function(t){t.processGIF89A=function(a,s,i,o){var l=new PB(a),d=l.width,u=l.height,A=[];l.decodeAndBlitFrameRGBA(0,A);var p={data:A,width:d,height:u},m=new wf(100).encode(p,100);return t.processJPEG.call(this,m,s,i,o)},t.processGIF87A=t.processGIF89A}(ua.API),xo.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var a=0;a<t;a++){var s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),l=this.datav.getUint8(this.pos++,!0);this.palette[a]={red:o,green:i,blue:s,quad:l}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},xo.prototype.parseBGR=function(){this.pos=this.offset;try{var t="bit"+this.bitPP,a=this.width*this.height*4;this.data=new Uint8Array(a),this[t]()}catch(s){qs.log("bit decode error:"+s)}},xo.prototype.bit1=function(){var t,a=Math.ceil(this.width/8),s=a%4;for(t=this.height-1;t>=0;t--){for(var i=this.bottom_up?t:this.height-1-t,o=0;o<a;o++)for(var l=this.datav.getUint8(this.pos++,!0),d=i*this.width*4+8*o*4,u=0;u<8&&8*o+u<this.width;u++){var A=this.palette[l>>7-u&1];this.data[d+4*u]=A.blue,this.data[d+4*u+1]=A.green,this.data[d+4*u+2]=A.red,this.data[d+4*u+3]=255}s!==0&&(this.pos+=4-s)}},xo.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),a=t%4,s=this.height-1;s>=0;s--){for(var i=this.bottom_up?s:this.height-1-s,o=0;o<t;o++){var l=this.datav.getUint8(this.pos++,!0),d=i*this.width*4+2*o*4,u=l>>4,A=15&l,p=this.palette[u];if(this.data[d]=p.blue,this.data[d+1]=p.green,this.data[d+2]=p.red,this.data[d+3]=255,2*o+1>=this.width)break;p=this.palette[A],this.data[d+4]=p.blue,this.data[d+4+1]=p.green,this.data[d+4+2]=p.red,this.data[d+4+3]=255}a!==0&&(this.pos+=4-a)}},xo.prototype.bit8=function(){for(var t=this.width%4,a=this.height-1;a>=0;a--){for(var s=this.bottom_up?a:this.height-1-a,i=0;i<this.width;i++){var o=this.datav.getUint8(this.pos++,!0),l=s*this.width*4+4*i;if(o<this.palette.length){var d=this.palette[o];this.data[l]=d.red,this.data[l+1]=d.green,this.data[l+2]=d.blue,this.data[l+3]=255}else this.data[l]=255,this.data[l+1]=255,this.data[l+2]=255,this.data[l+3]=255}t!==0&&(this.pos+=4-t)}},xo.prototype.bit15=function(){for(var t=this.width%3,a=parseInt("11111",2),s=this.height-1;s>=0;s--){for(var i=this.bottom_up?s:this.height-1-s,o=0;o<this.width;o++){var l=this.datav.getUint16(this.pos,!0);this.pos+=2;var d=(l&a)/a*255|0,u=(l>>5&a)/a*255|0,A=(l>>10&a)/a*255|0,p=l>>15?255:0,m=i*this.width*4+4*o;this.data[m]=A,this.data[m+1]=u,this.data[m+2]=d,this.data[m+3]=p}this.pos+=t}},xo.prototype.bit16=function(){for(var t=this.width%3,a=parseInt("11111",2),s=parseInt("111111",2),i=this.height-1;i>=0;i--){for(var o=this.bottom_up?i:this.height-1-i,l=0;l<this.width;l++){var d=this.datav.getUint16(this.pos,!0);this.pos+=2;var u=(d&a)/a*255|0,A=(d>>5&s)/s*255|0,p=(d>>11)/a*255|0,m=o*this.width*4+4*l;this.data[m]=p,this.data[m+1]=A,this.data[m+2]=u,this.data[m+3]=255}this.pos+=t}},xo.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var a=this.bottom_up?t:this.height-1-t,s=0;s<this.width;s++){var i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),l=this.datav.getUint8(this.pos++,!0),d=a*this.width*4+4*s;this.data[d]=l,this.data[d+1]=o,this.data[d+2]=i,this.data[d+3]=255}this.pos+=this.width%4}},xo.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var a=this.bottom_up?t:this.height-1-t,s=0;s<this.width;s++){var i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),l=this.datav.getUint8(this.pos++,!0),d=this.datav.getUint8(this.pos++,!0),u=a*this.width*4+4*s;this.data[u]=l,this.data[u+1]=o,this.data[u+2]=i,this.data[u+3]=d}},xo.prototype.getData=function(){return this.data},function(t){t.processBMP=function(a,s,i,o){var l=new xo(a,!1),d=l.width,u=l.height,A={data:l.getData(),width:d,height:u},p=new wf(100).encode(A,100);return t.processJPEG.call(this,p,s,i,o)}}(ua.API),Sv.prototype.getData=function(){return this.data},function(t){t.processWEBP=function(a,s,i,o){var l=new Sv(a),d=l.width,u=l.height,A={data:l.getData(),width:d,height:u},p=new wf(100).encode(A,100);return t.processJPEG.call(this,p,s,i,o)}}(ua.API),ua.API.processRGBA=function(t,a,s){for(var i=t.data,o=i.length,l=new Uint8Array(o/4*3),d=new Uint8Array(o/4),u=0,A=0,p=0;p<o;p+=4){var m=i[p],b=i[p+1],v=i[p+2],x=i[p+3];l[u++]=m,l[u++]=b,l[u++]=v,d[A++]=x}var C=this.__addimage__.arrayBufferToBinaryString(l);return{alpha:this.__addimage__.arrayBufferToBinaryString(d),data:C,index:a,alias:s,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},ua.API.setLanguage=function(t){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]!==void 0&&(this.internal.languageSettings.languageCode=t,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Cd=ua.API,Sh=Cd.getCharWidthsArray=function(t,a){var s,i,o=(a=a||{}).font||this.internal.getFont(),l=a.fontSize||this.internal.getFontSize(),d=a.charSpace||this.internal.getCharSpace(),u=a.widths?a.widths:o.metadata.Unicode.widths,A=u.fof?u.fof:1,p=a.kerning?a.kerning:o.metadata.Unicode.kerning,m=p.fof?p.fof:1,b=a.doKerning!==!1,v=0,x=t.length,C=0,D=u[0]||A,S=[];for(s=0;s<x;s++)i=t.charCodeAt(s),typeof o.metadata.widthOfString=="function"?S.push((o.metadata.widthOfGlyph(o.metadata.characterToGlyph(i))+d*(1e3/l)||0)/1e3):(v=b&&Ls(p[i])==="object"&&!isNaN(parseInt(p[i][C],10))?p[i][C]/m:0,S.push((u[i]||D)/A+v)),C=i;return S},xv=Cd.getStringUnitWidth=function(t,a){var s=(a=a||{}).fontSize||this.internal.getFontSize(),i=a.font||this.internal.getFont(),o=a.charSpace||this.internal.getCharSpace();return Cd.processArabic&&(t=Cd.processArabic(t)),typeof i.metadata.widthOfString=="function"?i.metadata.widthOfString(t,s,o)/s:Sh.apply(this,arguments).reduce(function(l,d){return l+d},0)},yv=function(t,a,s,i){for(var o=[],l=0,d=t.length,u=0;l!==d&&u+a[l]<s;)u+=a[l],l++;o.push(t.slice(0,l));var A=l;for(u=0;l!==d;)u+a[l]>i&&(o.push(t.slice(A,l)),u=0,A=l),u+=a[l],l++;return A!==l&&o.push(t.slice(A,l)),o},vv=function(t,a,s){s||(s={});var i,o,l,d,u,A,p,m=[],b=[m],v=s.textIndent||0,x=0,C=0,D=t.split(" "),S=Sh.apply(this,[" ",s])[0];if(A=s.lineIndent===-1?D[0].length+2:s.lineIndent||0){var _=Array(A).join(" "),N=[];D.map(function(L){(L=L.split(/\s*\n/)).length>1?N=N.concat(L.map(function(te,G){return(G&&te.length?`
`:"")+te})):N.push(L[0])}),D=N,A=xv.apply(this,[_,s])}for(l=0,d=D.length;l<d;l++){var O=0;if(i=D[l],A&&i[0]==`
`&&(i=i.substr(1),O=1),v+x+(C=(o=Sh.apply(this,[i,s])).reduce(function(L,te){return L+te},0))>a||O){if(C>a){for(u=yv.apply(this,[i,o,a-(v+x),a]),m.push(u.shift()),m=[u.pop()];u.length;)b.push([u.shift()]);C=o.slice(i.length-(m[0]?m[0].length:0)).reduce(function(L,te){return L+te},0)}else m=[i];b.push(m),v=C+A,x=S}else m.push(i),v+=x+C,x=S}return p=A?function(L,te){return(te?_:"")+L.join(" ")}:function(L){return L.join(" ")},b.map(p)},Cd.splitTextToSize=function(t,a,s){var i,o=(s=s||{}).fontSize||this.internal.getFontSize(),l=(function(m){if(m.widths&&m.kerning)return{widths:m.widths,kerning:m.kerning};var b=this.internal.getFont(m.fontName,m.fontStyle),v="Unicode";return b.metadata[v]?{widths:b.metadata[v].widths||{0:1},kerning:b.metadata[v].kerning||{}}:{font:b.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,s);i=Array.isArray(t)?t:String(t).split(/\r?\n/);var d=1*this.internal.scaleFactor*a/o;l.textIndent=s.textIndent?1*s.textIndent*this.internal.scaleFactor/o:0,l.lineIndent=s.lineIndent;var u,A,p=[];for(u=0,A=i.length;u<A;u++)p=p.concat(vv.apply(this,[i[u],d,l]));return p},function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var a="0123456789abcdef",s="klmnopqrstuvwxyz",i={},o={},l=0;l<16;l++)i[s[l]]=a[l],o[a[l]]=s[l];var d=function(v){return"0x"+parseInt(v,10).toString(16)},u=t.__fontmetrics__.compress=function(v){var x,C,D,S,_=["{"];for(var N in v){if(x=v[N],isNaN(parseInt(N,10))?C="'"+N+"'":(N=parseInt(N,10),C=(C=d(N).slice(2)).slice(0,-1)+o[C.slice(-1)]),typeof x=="number")x<0?(D=d(x).slice(3),S="-"):(D=d(x).slice(2),S=""),D=S+D.slice(0,-1)+o[D.slice(-1)];else{if(Ls(x)!=="object")throw new Error("Don't know what to do with value type "+Ls(x)+".");D=u(x)}_.push(C+D)}return _.push("}"),_.join("")},A=t.__fontmetrics__.uncompress=function(v){if(typeof v!="string")throw new Error("Invalid argument passed to uncompress.");for(var x,C,D,S,_={},N=1,O=_,L=[],te="",G="",X=v.length-1,U=1;U<X;U+=1)(S=v[U])=="'"?x?(D=x.join(""),x=void 0):x=[]:x?x.push(S):S=="{"?(L.push([O,D]),O={},D=void 0):S=="}"?((C=L.pop())[0][C[1]]=O,D=void 0,O=C[0]):S=="-"?N=-1:D===void 0?i.hasOwnProperty(S)?(te+=i[S],D=parseInt(te,16)*N,N=1,te=""):te+=S:i.hasOwnProperty(S)?(G+=i[S],O[D]=parseInt(G,16)*N,N=1,D=void 0,G=""):G+=S;return _},p={codePages:["WinAnsiEncoding"],WinAnsiEncoding:A("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},m={Unicode:{Courier:p,"Courier-Bold":p,"Courier-BoldOblique":p,"Courier-Oblique":p,Helvetica:p,"Helvetica-Bold":p,"Helvetica-BoldOblique":p,"Helvetica-Oblique":p,"Times-Roman":p,"Times-Bold":p,"Times-BoldItalic":p,"Times-Italic":p}},b={Unicode:{"Courier-Oblique":A("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":A("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":A("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:A("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":A("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":A("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:A("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:A("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":A("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:A("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":A("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":A("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":A("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":A("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(v){var x=v.font,C=b.Unicode[x.postScriptName];C&&(x.metadata.Unicode={},x.metadata.Unicode.widths=C.widths,x.metadata.Unicode.kerning=C.kerning);var D=m.Unicode[x.postScriptName];D&&(x.metadata.Unicode.encoding=D,x.encoding=D.codePages[0])}])}(ua.API),function(t){var a=function(s){for(var i=s.length,o=new Uint8Array(i),l=0;l<i;l++)o[l]=s.charCodeAt(l);return o};t.API.events.push(["addFont",function(s){var i=void 0,o=s.font,l=s.instance;if(!o.isStandardFont){if(l===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+o.postScriptName+"').");if(typeof(i=l.existsFileInVFS(o.postScriptName)===!1?l.loadFile(o.postScriptName):l.getFileFromVFS(o.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+o.postScriptName+"').");(function(d,u){u=/^\x00\x01\x00\x00/.test(u)?a(u):a(tp(u)),d.metadata=t.API.TTFFont.open(u),d.metadata.Unicode=d.metadata.Unicode||{encoding:{},kerning:{},widths:[]},d.metadata.glyIdsUsed=[0]})(o,i)}}])}(ua),ua.API.addSvgAsImage=function(t,a,s,i,o,l,d,u){if(isNaN(a)||isNaN(s))throw qs.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(i)||isNaN(o))throw qs.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var A=document.createElement("canvas");A.width=i,A.height=o;var p=A.getContext("2d");p.fillStyle="#fff",p.fillRect(0,0,A.width,A.height);var m={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},b=this;return(Ia.canvg?Promise.resolve(Ia.canvg):cr(()=>import("./index.es-C7KinsPF.js"),[])).catch(function(v){return Promise.reject(new Error("Could not load canvg: "+v))}).then(function(v){return v.default?v.default:v}).then(function(v){return v.fromString(p,t,m)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(v){return v.render(m)}).then(function(){b.addImage(A.toDataURL("image/jpeg",1),a,s,i,o,d,u)})},ua.API.putTotalPages=function(t){var a,s=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(a=new RegExp(t,"g"),s=this.internal.getNumberOfPages()):(a=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),s=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var i=1;i<=this.internal.getNumberOfPages();i++)for(var o=0;o<this.internal.pages[i].length;o++)this.internal.pages[i][o]=this.internal.pages[i][o].replace(a,s);return this},ua.API.viewerPreferences=function(t,a){var s;t=t||{},a=a||!1;var i,o,l,d={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},u=Object.keys(d),A=[],p=0,m=0,b=0;function v(C,D){var S,_=!1;for(S=0;S<C.length;S+=1)C[S]===D&&(_=!0);return _}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(d)),this.internal.viewerpreferences.isSubscribed=!1),s=this.internal.viewerpreferences.configuration,t==="reset"||a===!0){var x=u.length;for(b=0;b<x;b+=1)s[u[b]].value=s[u[b]].defaultValue,s[u[b]].explicitSet=!1}if(Ls(t)==="object"){for(o in t)if(l=t[o],v(u,o)&&l!==void 0){if(s[o].type==="boolean"&&typeof l=="boolean")s[o].value=l;else if(s[o].type==="name"&&v(s[o].valueSet,l))s[o].value=l;else if(s[o].type==="integer"&&Number.isInteger(l))s[o].value=l;else if(s[o].type==="array"){for(p=0;p<l.length;p+=1)if(i=!0,l[p].length===1&&typeof l[p][0]=="number")A.push(String(l[p]-1));else if(l[p].length>1){for(m=0;m<l[p].length;m+=1)typeof l[p][m]!="number"&&(i=!1);i===!0&&A.push([l[p][0]-1,l[p][1]-1].join(" "))}s[o].value="["+A.join(" ")+"]"}else s[o].value=s[o].defaultValue;s[o].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var C,D=[];for(C in s)s[C].explicitSet===!0&&(s[C].type==="name"?D.push("/"+C+" /"+s[C].value):D.push("/"+C+" "+s[C].value));D.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+D.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=s,this},function(t){var a=function(){var i='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',o=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),l=unescape(encodeURIComponent(i)),d=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),u=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),A=unescape(encodeURIComponent("</x:xmpmeta>")),p=l.length+d.length+u.length+o.length+A.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+p+" >>"),this.internal.write("stream"),this.internal.write(o+l+d+u+A),this.internal.write("endstream"),this.internal.write("endobj")},s=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};t.addMetadata=function(i,o){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:i,namespaceuri:o||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",s),this.internal.events.subscribe("postPutResources",a)),this}}(ua.API),function(t){var a=t.API,s=a.pdfEscape16=function(l,d){for(var u,A=d.metadata.Unicode.widths,p=["","0","00","000","0000"],m=[""],b=0,v=l.length;b<v;++b){if(u=d.metadata.characterToGlyph(l.charCodeAt(b)),d.metadata.glyIdsUsed.push(u),d.metadata.toUnicode[u]=l.charCodeAt(b),A.indexOf(u)==-1&&(A.push(u),A.push([parseInt(d.metadata.widthOfGlyph(u),10)])),u=="0")return m.join("");u=u.toString(16),m.push(p[4-u.length],u)}return m.join("")},i=function(l){var d,u,A,p,m,b,v;for(m=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,A=[],b=0,v=(u=Object.keys(l).sort(function(x,C){return x-C})).length;b<v;b++)d=u[b],A.length>=100&&(m+=`
`+A.length+` beginbfchar
`+A.join(`
`)+`
endbfchar`,A=[]),l[d]!==void 0&&l[d]!==null&&typeof l[d].toString=="function"&&(p=("0000"+l[d].toString(16)).slice(-4),d=("0000"+(+d).toString(16)).slice(-4),A.push("<"+d+"><"+p+">"));return A.length&&(m+=`
`+A.length+` beginbfchar
`+A.join(`
`)+`
endbfchar
`),m+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};a.events.push(["putFont",function(l){(function(d){var u=d.font,A=d.out,p=d.newObject,m=d.putStream;if(u.metadata instanceof t.API.TTFFont&&u.encoding==="Identity-H"){for(var b=u.metadata.Unicode.widths,v=u.metadata.subset.encode(u.metadata.glyIdsUsed,1),x="",C=0;C<v.length;C++)x+=String.fromCharCode(v[C]);var D=p();m({data:x,addLength1:!0,objectId:D}),A("endobj");var S=p();m({data:i(u.metadata.toUnicode),addLength1:!0,objectId:S}),A("endobj");var _=p();A("<<"),A("/Type /FontDescriptor"),A("/FontName /"+Qd(u.fontName)),A("/FontFile2 "+D+" 0 R"),A("/FontBBox "+t.API.PDFObject.convert(u.metadata.bbox)),A("/Flags "+u.metadata.flags),A("/StemV "+u.metadata.stemV),A("/ItalicAngle "+u.metadata.italicAngle),A("/Ascent "+u.metadata.ascender),A("/Descent "+u.metadata.decender),A("/CapHeight "+u.metadata.capHeight),A(">>"),A("endobj");var N=p();A("<<"),A("/Type /Font"),A("/BaseFont /"+Qd(u.fontName)),A("/FontDescriptor "+_+" 0 R"),A("/W "+t.API.PDFObject.convert(b)),A("/CIDToGIDMap /Identity"),A("/DW 1000"),A("/Subtype /CIDFontType2"),A("/CIDSystemInfo"),A("<<"),A("/Supplement 0"),A("/Registry (Adobe)"),A("/Ordering ("+u.encoding+")"),A(">>"),A(">>"),A("endobj"),u.objectNumber=p(),A("<<"),A("/Type /Font"),A("/Subtype /Type0"),A("/ToUnicode "+S+" 0 R"),A("/BaseFont /"+Qd(u.fontName)),A("/Encoding /"+u.encoding),A("/DescendantFonts ["+N+" 0 R]"),A(">>"),A("endobj"),u.isAlreadyPutted=!0}})(l)}]),a.events.push(["putFont",function(l){(function(d){var u=d.font,A=d.out,p=d.newObject,m=d.putStream;if(u.metadata instanceof t.API.TTFFont&&u.encoding==="WinAnsiEncoding"){for(var b=u.metadata.rawData,v="",x=0;x<b.length;x++)v+=String.fromCharCode(b[x]);var C=p();m({data:v,addLength1:!0,objectId:C}),A("endobj");var D=p();m({data:i(u.metadata.toUnicode),addLength1:!0,objectId:D}),A("endobj");var S=p();A("<<"),A("/Descent "+u.metadata.decender),A("/CapHeight "+u.metadata.capHeight),A("/StemV "+u.metadata.stemV),A("/Type /FontDescriptor"),A("/FontFile2 "+C+" 0 R"),A("/Flags 96"),A("/FontBBox "+t.API.PDFObject.convert(u.metadata.bbox)),A("/FontName /"+Qd(u.fontName)),A("/ItalicAngle "+u.metadata.italicAngle),A("/Ascent "+u.metadata.ascender),A(">>"),A("endobj"),u.objectNumber=p();for(var _=0;_<u.metadata.hmtx.widths.length;_++)u.metadata.hmtx.widths[_]=parseInt(u.metadata.hmtx.widths[_]*(1e3/u.metadata.head.unitsPerEm));A("<</Subtype/TrueType/Type/Font/ToUnicode "+D+" 0 R/BaseFont/"+Qd(u.fontName)+"/FontDescriptor "+S+" 0 R/Encoding/"+u.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(u.metadata.hmtx.widths)+">>"),A("endobj"),u.isAlreadyPutted=!0}})(l)}]);var o=function(l){var d,u=l.text||"",A=l.x,p=l.y,m=l.options||{},b=l.mutex||{},v=b.pdfEscape,x=b.activeFontKey,C=b.fonts,D=x,S="",_=0,N="",O=C[D].encoding;if(C[D].encoding!=="Identity-H")return{text:u,x:A,y:p,options:m,mutex:b};for(N=u,D=x,Array.isArray(u)&&(N=u[0]),_=0;_<N.length;_+=1)C[D].metadata.hasOwnProperty("cmap")&&(d=C[D].metadata.cmap.unicode.codeMap[N[_].charCodeAt(0)]),d||N[_].charCodeAt(0)<256&&C[D].metadata.hasOwnProperty("Unicode")?S+=N[_]:S+="";var L="";return parseInt(D.slice(1))<14||O==="WinAnsiEncoding"?L=v(S,D).split("").map(function(te){return te.charCodeAt(0).toString(16)}).join(""):O==="Identity-H"&&(L=s(S,C[D])),b.isHex=!0,{text:L,x:A,y:p,options:m,mutex:b}};a.events.push(["postProcessText",function(l){var d=l.text||"",u=[],A={text:d,x:l.x,y:l.y,options:l.options,mutex:l.mutex};if(Array.isArray(d)){var p=0;for(p=0;p<d.length;p+=1)Array.isArray(d[p])&&d[p].length===3?u.push([o(Object.assign({},A,{text:d[p][0]})).text,d[p][1],d[p][2]]):u.push(o(Object.assign({},A,{text:d[p]})).text);l.text=u}else l.text=o(Object.assign({},A,{text:d})).text}])}(ua),function(t){var a=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(s){return a.call(this),this.internal.vFS[s]!==void 0},t.addFileToVFS=function(s,i){return a.call(this),this.internal.vFS[s]=i,this},t.getFileFromVFS=function(s){return a.call(this),this.internal.vFS[s]!==void 0?this.internal.vFS[s]:null}}(ua.API),function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(i){var o,l,d,u,A,p,m,b=a,v=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],x=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],C={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},D={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},S=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],_=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),N=!1,O=0;this.__bidiEngine__={};var L=function(T){var Q=T.charCodeAt(),q=Q>>8,ne=D[q];return ne!==void 0?b[256*ne+(255&Q)]:q===252||q===253?"AL":_.test(q)?"L":q===8?"R":"N"},te=function(T){for(var Q,q=0;q<T.length;q++){if((Q=L(T.charAt(q)))==="L")return!1;if(Q==="R")return!0}return!1},G=function(T,Q,q,ne){var R,z,ee,le,Be=Q[ne];switch(Be){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":N=!1;break;case"N":case"AN":break;case"EN":N&&(Be="AN");break;case"AL":N=!0,Be="R";break;case"WS":case"BN":Be="N";break;case"CS":ne<1||ne+1>=Q.length||(R=q[ne-1])!=="EN"&&R!=="AN"||(z=Q[ne+1])!=="EN"&&z!=="AN"?Be="N":N&&(z="AN"),Be=z===R?z:"N";break;case"ES":Be=(R=ne>0?q[ne-1]:"B")==="EN"&&ne+1<Q.length&&Q[ne+1]==="EN"?"EN":"N";break;case"ET":if(ne>0&&q[ne-1]==="EN"){Be="EN";break}if(N){Be="N";break}for(ee=ne+1,le=Q.length;ee<le&&Q[ee]==="ET";)ee++;Be=ee<le&&Q[ee]==="EN"?"EN":"N";break;case"NSM":if(d&&!u){for(le=Q.length,ee=ne+1;ee<le&&Q[ee]==="NSM";)ee++;if(ee<le){var $=T[ne],ue=$>=1425&&$<=2303||$===64286;if(R=Q[ee],ue&&(R==="R"||R==="AL")){Be="R";break}}}Be=ne<1||(R=Q[ne-1])==="B"?"N":q[ne-1];break;case"B":N=!1,o=!0,Be=O;break;case"S":l=!0,Be="N"}return Be},X=function(T,Q,q){var ne=T.split("");return q&&U(ne,q,{hiLevel:O}),ne.reverse(),Q&&Q.reverse(),ne.join("")},U=function(T,Q,q){var ne,R,z,ee,le,Be=-1,$=T.length,ue=0,k=[],I=O?x:v,H=[];for(N=!1,o=!1,l=!1,R=0;R<$;R++)H[R]=L(T[R]);for(z=0;z<$;z++){if(le=ue,k[z]=G(T,H,k,z),ne=240&(ue=I[le][C[k[z]]]),ue&=15,Q[z]=ee=I[ue][5],ne>0)if(ne===16){for(R=Be;R<z;R++)Q[R]=1;Be=-1}else Be=-1;if(I[ue][6])Be===-1&&(Be=z);else if(Be>-1){for(R=Be;R<z;R++)Q[R]=ee;Be=-1}H[z]==="B"&&(Q[z]=0),q.hiLevel|=ee}l&&function(re,J,V){for(var oe=0;oe<V;oe++)if(re[oe]==="S"){J[oe]=O;for(var K=oe-1;K>=0&&re[K]==="WS";K--)J[K]=O}}(H,Q,$)},E=function(T,Q,q,ne,R){if(!(R.hiLevel<T)){if(T===1&&O===1&&!o)return Q.reverse(),void(q&&q.reverse());for(var z,ee,le,Be,$=Q.length,ue=0;ue<$;){if(ne[ue]>=T){for(le=ue+1;le<$&&ne[le]>=T;)le++;for(Be=ue,ee=le-1;Be<ee;Be++,ee--)z=Q[Be],Q[Be]=Q[ee],Q[ee]=z,q&&(z=q[Be],q[Be]=q[ee],q[ee]=z);ue=le}ue++}}},Y=function(T,Q,q){var ne=T.split(""),R={hiLevel:O};return q||(q=[]),U(ne,q,R),function(z,ee,le){if(le.hiLevel!==0&&m)for(var Be,$=0;$<z.length;$++)ee[$]===1&&(Be=S.indexOf(z[$]))>=0&&(z[$]=S[Be+1])}(ne,q,R),E(2,ne,Q,q,R),E(1,ne,Q,q,R),ne.join("")};return this.__bidiEngine__.doBidiReorder=function(T,Q,q){if(function(R,z){if(z)for(var ee=0;ee<R.length;ee++)z[ee]=ee;u===void 0&&(u=te(R)),p===void 0&&(p=te(R))}(T,Q),d||!A||p)if(d&&A&&u^p)O=u?1:0,T=X(T,Q,q);else if(!d&&A&&p)O=u?1:0,T=Y(T,Q,q),T=X(T,Q);else if(!d||u||A||p){if(d&&!A&&u^p)T=X(T,Q),u?(O=0,T=Y(T,Q,q)):(O=1,T=Y(T,Q,q),T=X(T,Q));else if(d&&u&&!A&&p)O=1,T=Y(T,Q,q),T=X(T,Q);else if(!d&&!A&&u^p){var ne=m;u?(O=1,T=Y(T,Q,q),O=0,m=!1,T=Y(T,Q,q),m=ne):(O=0,T=Y(T,Q,q),T=X(T,Q),O=1,m=!1,T=Y(T,Q,q),m=ne,T=X(T,Q))}}else O=0,T=Y(T,Q,q);else O=u?1:0,T=Y(T,Q,q);return T},this.__bidiEngine__.setOptions=function(T){T&&(d=T.isInputVisual,A=T.isOutputVisual,u=T.isInputRtl,p=T.isOutputRtl,m=T.isSymmetricSwapping)},this.__bidiEngine__.setOptions(i),this.__bidiEngine__};var a=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],s=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(i){var o=i.text;i.x,i.y;var l=i.options||{};i.mutex,l.lang;var d=[];if(l.isInputVisual=typeof l.isInputVisual!="boolean"||l.isInputVisual,s.setOptions(l),Object.prototype.toString.call(o)==="[object Array]"){var u=0;for(d=[],u=0;u<o.length;u+=1)Object.prototype.toString.call(o[u])==="[object Array]"?d.push([s.doBidiReorder(o[u][0]),o[u][1],o[u][2]]):d.push([s.doBidiReorder(o[u])]);i.text=d}else i.text=s.doBidiReorder(o);s.setOptions({isInputVisual:!0})}])}(ua),ua.API.TTFFont=function(){function t(a){var s;if(this.rawData=a,s=this.contents=new Ac(a),this.contents.pos=4,s.readString(4)==="ttcf")throw new Error("TTCF not supported.");s.pos=0,this.parse(),this.subset=new eC(this),this.registerTTF()}return t.open=function(a){return new t(a)},t.prototype.parse=function(){return this.directory=new HB(this.contents),this.head=new OB(this),this.name=new VB(this),this.cmap=new $1(this),this.toUnicode={},this.hhea=new zB(this),this.maxp=new $B(this),this.hmtx=new WB(this),this.post=new KB(this),this.os2=new qB(this),this.loca=new ZB(this),this.glyf=new YB(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var a,s,i,o,l;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var d,u,A,p;for(p=[],d=0,u=(A=this.bbox).length;d<u;d++)a=A[d],p.push(Math.round(a*this.scaleFactor));return p}).call(this),this.stemV=0,this.post.exists?(i=255&(o=this.post.italic_angle),32768&(s=o>>16)&&(s=-(1+(65535^s))),this.italicAngle=+(s+"."+i)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(l=this.familyClass)===1||l===2||l===3||l===4||l===5||l===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(a){var s;return((s=this.cmap.unicode)!=null?s.codeMap[a]:void 0)||0},t.prototype.widthOfGlyph=function(a){var s;return s=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(a).advance*s},t.prototype.widthOfString=function(a,s,i){var o,l,d,u;for(d=0,l=0,u=(a=""+a).length;0<=u?l<u:l>u;l=0<=u?++l:--l)o=a.charCodeAt(l),d+=this.widthOfGlyph(this.characterToGlyph(o))+i*(1e3/s)||0;return d*(s/1e3)},t.prototype.lineHeight=function(a,s){var i;return s==null&&(s=!1),i=s?this.lineGap:0,(this.ascender+i-this.decender)/1e3*a},t}();var _o,Ac=function(){function t(a){this.data=a??[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(a){return this.data[this.pos++]=a},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(a){return this.writeByte(a>>>24&255),this.writeByte(a>>16&255),this.writeByte(a>>8&255),this.writeByte(255&a)},t.prototype.readInt32=function(){var a;return(a=this.readUInt32())>=2147483648?a-4294967296:a},t.prototype.writeInt32=function(a){return a<0&&(a+=4294967296),this.writeUInt32(a)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(a){return this.writeByte(a>>8&255),this.writeByte(255&a)},t.prototype.readInt16=function(){var a;return(a=this.readUInt16())>=32768?a-65536:a},t.prototype.writeInt16=function(a){return a<0&&(a+=65536),this.writeUInt16(a)},t.prototype.readString=function(a){var s,i;for(i=[],s=0;0<=a?s<a:s>a;s=0<=a?++s:--s)i[s]=String.fromCharCode(this.readByte());return i.join("")},t.prototype.writeString=function(a){var s,i,o;for(o=[],s=0,i=a.length;0<=i?s<i:s>i;s=0<=i?++s:--s)o.push(this.writeByte(a.charCodeAt(s)));return o},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(a){return this.writeInt16(a)},t.prototype.readLongLong=function(){var a,s,i,o,l,d,u,A;return a=this.readByte(),s=this.readByte(),i=this.readByte(),o=this.readByte(),l=this.readByte(),d=this.readByte(),u=this.readByte(),A=this.readByte(),128&a?-1*(72057594037927940*(255^a)+281474976710656*(255^s)+1099511627776*(255^i)+4294967296*(255^o)+16777216*(255^l)+65536*(255^d)+256*(255^u)+(255^A)+1):72057594037927940*a+281474976710656*s+1099511627776*i+4294967296*o+16777216*l+65536*d+256*u+A},t.prototype.writeLongLong=function(a){var s,i;return s=Math.floor(a/4294967296),i=4294967295&a,this.writeByte(s>>24&255),this.writeByte(s>>16&255),this.writeByte(s>>8&255),this.writeByte(255&s),this.writeByte(i>>24&255),this.writeByte(i>>16&255),this.writeByte(i>>8&255),this.writeByte(255&i)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(a){return this.writeInt32(a)},t.prototype.read=function(a){var s,i;for(s=[],i=0;0<=a?i<a:i>a;i=0<=a?++i:--i)s.push(this.readByte());return s},t.prototype.write=function(a){var s,i,o,l;for(l=[],i=0,o=a.length;i<o;i++)s=a[i],l.push(this.writeByte(s));return l},t}(),HB=function(){var t;function a(s){var i,o,l;for(this.scalarType=s.readInt(),this.tableCount=s.readShort(),this.searchRange=s.readShort(),this.entrySelector=s.readShort(),this.rangeShift=s.readShort(),this.tables={},o=0,l=this.tableCount;0<=l?o<l:o>l;o=0<=l?++o:--o)i={tag:s.readString(4),checksum:s.readInt(),offset:s.readInt(),length:s.readInt()},this.tables[i.tag]=i}return a.prototype.encode=function(s){var i,o,l,d,u,A,p,m,b,v,x,C,D;for(D in x=Object.keys(s).length,A=Math.log(2),b=16*Math.floor(Math.log(x)/A),d=Math.floor(b/A),m=16*x-b,(o=new Ac).writeInt(this.scalarType),o.writeShort(x),o.writeShort(b),o.writeShort(d),o.writeShort(m),l=16*x,p=o.pos+l,u=null,C=[],s)for(v=s[D],o.writeString(D),o.writeInt(t(v)),o.writeInt(p),o.writeInt(v.length),C=C.concat(v),D==="head"&&(u=p),p+=v.length;p%4;)C.push(0),p++;return o.write(C),i=2981146554-t(o.data),o.pos=u+8,o.writeUInt32(i),o.data},t=function(s){var i,o,l,d;for(s=W1.call(s);s.length%4;)s.push(0);for(l=new Ac(s),o=0,i=0,d=s.length;i<d;i=i+=4)o+=l.readUInt32();return 4294967295&o},a}(),MB={}.hasOwnProperty,Go=function(t,a){for(var s in a)MB.call(a,s)&&(t[s]=a[s]);function i(){this.constructor=t}return i.prototype=a.prototype,t.prototype=new i,t.__super__=a.prototype,t};_o=function(){function t(a){var s;this.file=a,s=this.file.directory.tables[this.tag],this.exists=!!s,s&&(this.offset=s.offset,this.length=s.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t}();var OB=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Go(t,_o),t.prototype.tag="head",t.prototype.parse=function(a){return a.pos=this.offset,this.version=a.readInt(),this.revision=a.readInt(),this.checkSumAdjustment=a.readInt(),this.magicNumber=a.readInt(),this.flags=a.readShort(),this.unitsPerEm=a.readShort(),this.created=a.readLongLong(),this.modified=a.readLongLong(),this.xMin=a.readShort(),this.yMin=a.readShort(),this.xMax=a.readShort(),this.yMax=a.readShort(),this.macStyle=a.readShort(),this.lowestRecPPEM=a.readShort(),this.fontDirectionHint=a.readShort(),this.indexToLocFormat=a.readShort(),this.glyphDataFormat=a.readShort()},t.prototype.encode=function(a){var s;return(s=new Ac).writeInt(this.version),s.writeInt(this.revision),s.writeInt(this.checkSumAdjustment),s.writeInt(this.magicNumber),s.writeShort(this.flags),s.writeShort(this.unitsPerEm),s.writeLongLong(this.created),s.writeLongLong(this.modified),s.writeShort(this.xMin),s.writeShort(this.yMin),s.writeShort(this.xMax),s.writeShort(this.yMax),s.writeShort(this.macStyle),s.writeShort(this.lowestRecPPEM),s.writeShort(this.fontDirectionHint),s.writeShort(a),s.writeShort(this.glyphDataFormat),s.data},t}(),kv=function(){function t(a,s){var i,o,l,d,u,A,p,m,b,v,x,C,D,S,_,N,O;switch(this.platformID=a.readUInt16(),this.encodingID=a.readShort(),this.offset=s+a.readInt(),b=a.pos,a.pos=this.offset,this.format=a.readUInt16(),this.length=a.readUInt16(),this.language=a.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(A=0;A<256;++A)this.codeMap[A]=a.readByte();break;case 4:for(x=a.readUInt16(),v=x/2,a.pos+=6,l=function(){var L,te;for(te=[],A=L=0;0<=v?L<v:L>v;A=0<=v?++L:--L)te.push(a.readUInt16());return te}(),a.pos+=2,D=function(){var L,te;for(te=[],A=L=0;0<=v?L<v:L>v;A=0<=v?++L:--L)te.push(a.readUInt16());return te}(),p=function(){var L,te;for(te=[],A=L=0;0<=v?L<v:L>v;A=0<=v?++L:--L)te.push(a.readUInt16());return te}(),m=function(){var L,te;for(te=[],A=L=0;0<=v?L<v:L>v;A=0<=v?++L:--L)te.push(a.readUInt16());return te}(),o=(this.length-a.pos+this.offset)/2,u=function(){var L,te;for(te=[],A=L=0;0<=o?L<o:L>o;A=0<=o?++L:--L)te.push(a.readUInt16());return te}(),A=_=0,O=l.length;_<O;A=++_)for(S=l[A],i=N=C=D[A];C<=S?N<=S:N>=S;i=C<=S?++N:--N)m[A]===0?d=i+p[A]:(d=u[m[A]/2+(i-C)-(v-A)]||0)!==0&&(d+=p[A]),this.codeMap[i]=65535&d}a.pos=b}return t.encode=function(a,s){var i,o,l,d,u,A,p,m,b,v,x,C,D,S,_,N,O,L,te,G,X,U,E,Y,T,Q,q,ne,R,z,ee,le,Be,$,ue,k,I,H,re,J,V,oe,K,Ne,Ee,st;switch(ne=new Ac,d=Object.keys(a).sort(function(ut,Ge){return ut-Ge}),s){case"macroman":for(D=0,S=function(){var ut=[];for(C=0;C<256;++C)ut.push(0);return ut}(),N={0:0},l={},R=0,Be=d.length;R<Be;R++)N[K=a[o=d[R]]]==null&&(N[K]=++D),l[o]={old:a[o],new:N[a[o]]},S[o]=N[a[o]];return ne.writeUInt16(1),ne.writeUInt16(0),ne.writeUInt32(12),ne.writeUInt16(0),ne.writeUInt16(262),ne.writeUInt16(0),ne.write(S),{charMap:l,subtable:ne.data,maxGlyphID:D+1};case"unicode":for(Q=[],b=[],O=0,N={},i={},_=p=null,z=0,$=d.length;z<$;z++)N[te=a[o=d[z]]]==null&&(N[te]=++O),i[o]={old:te,new:N[te]},u=N[te]-o,_!=null&&u===p||(_&&b.push(_),Q.push(o),p=u),_=o;for(_&&b.push(_),b.push(65535),Q.push(65535),Y=2*(E=Q.length),U=2*Math.pow(Math.log(E)/Math.LN2,2),v=Math.log(U/2)/Math.LN2,X=2*E-U,A=[],G=[],x=[],C=ee=0,ue=Q.length;ee<ue;C=++ee){if(T=Q[C],m=b[C],T===65535){A.push(0),G.push(0);break}if(T-(q=i[T].new)>=32768)for(A.push(0),G.push(2*(x.length+E-C)),o=le=T;T<=m?le<=m:le>=m;o=T<=m?++le:--le)x.push(i[o].new);else A.push(q-T),G.push(0)}for(ne.writeUInt16(3),ne.writeUInt16(1),ne.writeUInt32(12),ne.writeUInt16(4),ne.writeUInt16(16+8*E+2*x.length),ne.writeUInt16(0),ne.writeUInt16(Y),ne.writeUInt16(U),ne.writeUInt16(v),ne.writeUInt16(X),V=0,k=b.length;V<k;V++)o=b[V],ne.writeUInt16(o);for(ne.writeUInt16(0),oe=0,I=Q.length;oe<I;oe++)o=Q[oe],ne.writeUInt16(o);for(Ne=0,H=A.length;Ne<H;Ne++)u=A[Ne],ne.writeUInt16(u);for(Ee=0,re=G.length;Ee<re;Ee++)L=G[Ee],ne.writeUInt16(L);for(st=0,J=x.length;st<J;st++)D=x[st],ne.writeUInt16(D);return{charMap:i,subtable:ne.data,maxGlyphID:O+1}}},t}(),$1=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Go(t,_o),t.prototype.tag="cmap",t.prototype.parse=function(a){var s,i,o;for(a.pos=this.offset,this.version=a.readUInt16(),o=a.readUInt16(),this.tables=[],this.unicode=null,i=0;0<=o?i<o:i>o;i=0<=o?++i:--i)s=new kv(a,this.offset),this.tables.push(s),s.isUnicode&&this.unicode==null&&(this.unicode=s);return!0},t.encode=function(a,s){var i,o;return s==null&&(s="macroman"),i=kv.encode(a,s),(o=new Ac).writeUInt16(0),o.writeUInt16(1),i.table=o.data.concat(i.subtable),i},t}(),zB=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Go(t,_o),t.prototype.tag="hhea",t.prototype.parse=function(a){return a.pos=this.offset,this.version=a.readInt(),this.ascender=a.readShort(),this.decender=a.readShort(),this.lineGap=a.readShort(),this.advanceWidthMax=a.readShort(),this.minLeftSideBearing=a.readShort(),this.minRightSideBearing=a.readShort(),this.xMaxExtent=a.readShort(),this.caretSlopeRise=a.readShort(),this.caretSlopeRun=a.readShort(),this.caretOffset=a.readShort(),a.pos+=8,this.metricDataFormat=a.readShort(),this.numberOfMetrics=a.readUInt16()},t}(),qB=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Go(t,_o),t.prototype.tag="OS/2",t.prototype.parse=function(a){if(a.pos=this.offset,this.version=a.readUInt16(),this.averageCharWidth=a.readShort(),this.weightClass=a.readUInt16(),this.widthClass=a.readUInt16(),this.type=a.readShort(),this.ySubscriptXSize=a.readShort(),this.ySubscriptYSize=a.readShort(),this.ySubscriptXOffset=a.readShort(),this.ySubscriptYOffset=a.readShort(),this.ySuperscriptXSize=a.readShort(),this.ySuperscriptYSize=a.readShort(),this.ySuperscriptXOffset=a.readShort(),this.ySuperscriptYOffset=a.readShort(),this.yStrikeoutSize=a.readShort(),this.yStrikeoutPosition=a.readShort(),this.familyClass=a.readShort(),this.panose=function(){var s,i;for(i=[],s=0;s<10;++s)i.push(a.readByte());return i}(),this.charRange=function(){var s,i;for(i=[],s=0;s<4;++s)i.push(a.readInt());return i}(),this.vendorID=a.readString(4),this.selection=a.readShort(),this.firstCharIndex=a.readShort(),this.lastCharIndex=a.readShort(),this.version>0&&(this.ascent=a.readShort(),this.descent=a.readShort(),this.lineGap=a.readShort(),this.winAscent=a.readShort(),this.winDescent=a.readShort(),this.codePageRange=function(){var s,i;for(i=[],s=0;s<2;s=++s)i.push(a.readInt());return i}(),this.version>1))return this.xHeight=a.readShort(),this.capHeight=a.readShort(),this.defaultChar=a.readShort(),this.breakChar=a.readShort(),this.maxContext=a.readShort()},t}(),KB=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Go(t,_o),t.prototype.tag="post",t.prototype.parse=function(a){var s,i,o;switch(a.pos=this.offset,this.format=a.readInt(),this.italicAngle=a.readInt(),this.underlinePosition=a.readShort(),this.underlineThickness=a.readShort(),this.isFixedPitch=a.readInt(),this.minMemType42=a.readInt(),this.maxMemType42=a.readInt(),this.minMemType1=a.readInt(),this.maxMemType1=a.readInt(),this.format){case 65536:case 196608:break;case 131072:var l;for(i=a.readUInt16(),this.glyphNameIndex=[],l=0;0<=i?l<i:l>i;l=0<=i?++l:--l)this.glyphNameIndex.push(a.readUInt16());for(this.names=[],o=[];a.pos<this.offset+this.length;)s=a.readByte(),o.push(this.names.push(a.readString(s)));return o;case 151552:return i=a.readUInt16(),this.offsets=a.read(i);case 262144:return this.map=(function(){var d,u,A;for(A=[],l=d=0,u=this.file.maxp.numGlyphs;0<=u?d<u:d>u;l=0<=u?++d:--d)A.push(a.readUInt32());return A}).call(this)}},t}(),GB=function(t,a){this.raw=t,this.length=t.length,this.platformID=a.platformID,this.encodingID=a.encodingID,this.languageID=a.languageID},VB=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Go(t,_o),t.prototype.tag="name",t.prototype.parse=function(a){var s,i,o,l,d,u,A,p,m,b,v;for(a.pos=this.offset,a.readShort(),s=a.readShort(),u=a.readShort(),i=[],l=0;0<=s?l<s:l>s;l=0<=s?++l:--l)i.push({platformID:a.readShort(),encodingID:a.readShort(),languageID:a.readShort(),nameID:a.readShort(),length:a.readShort(),offset:this.offset+u+a.readShort()});for(A={},l=m=0,b=i.length;m<b;l=++m)o=i[l],a.pos=o.offset,p=a.readString(o.length),d=new GB(p,o),A[v=o.nameID]==null&&(A[v]=[]),A[o.nameID].push(d);this.strings=A,this.copyright=A[0],this.fontFamily=A[1],this.fontSubfamily=A[2],this.uniqueSubfamily=A[3],this.fontName=A[4],this.version=A[5];try{this.postscriptName=A[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=A[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=A[7],this.manufacturer=A[8],this.designer=A[9],this.description=A[10],this.vendorUrl=A[11],this.designerUrl=A[12],this.license=A[13],this.licenseUrl=A[14],this.preferredFamily=A[15],this.preferredSubfamily=A[17],this.compatibleFull=A[18],this.sampleText=A[19]},t}(),$B=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Go(t,_o),t.prototype.tag="maxp",t.prototype.parse=function(a){return a.pos=this.offset,this.version=a.readInt(),this.numGlyphs=a.readUInt16(),this.maxPoints=a.readUInt16(),this.maxContours=a.readUInt16(),this.maxCompositePoints=a.readUInt16(),this.maxComponentContours=a.readUInt16(),this.maxZones=a.readUInt16(),this.maxTwilightPoints=a.readUInt16(),this.maxStorage=a.readUInt16(),this.maxFunctionDefs=a.readUInt16(),this.maxInstructionDefs=a.readUInt16(),this.maxStackElements=a.readUInt16(),this.maxSizeOfInstructions=a.readUInt16(),this.maxComponentElements=a.readUInt16(),this.maxComponentDepth=a.readUInt16()},t}(),WB=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Go(t,_o),t.prototype.tag="hmtx",t.prototype.parse=function(a){var s,i,o,l,d,u,A;for(a.pos=this.offset,this.metrics=[],s=0,u=this.file.hhea.numberOfMetrics;0<=u?s<u:s>u;s=0<=u?++s:--s)this.metrics.push({advance:a.readUInt16(),lsb:a.readInt16()});for(o=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var p,m;for(m=[],s=p=0;0<=o?p<o:p>o;s=0<=o?++p:--p)m.push(a.readInt16());return m}(),this.widths=(function(){var p,m,b,v;for(v=[],p=0,m=(b=this.metrics).length;p<m;p++)l=b[p],v.push(l.advance);return v}).call(this),i=this.widths[this.widths.length-1],A=[],s=d=0;0<=o?d<o:d>o;s=0<=o?++d:--d)A.push(this.widths.push(i));return A},t.prototype.forGlyph=function(a){return a in this.metrics?this.metrics[a]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[a-this.metrics.length]}},t}(),W1=[].slice,YB=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Go(t,_o),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(a){var s,i,o,l,d,u,A,p,m,b;return a in this.cache?this.cache[a]:(l=this.file.loca,s=this.file.contents,i=l.indexOf(a),(o=l.lengthOf(a))===0?this.cache[a]=null:(s.pos=this.offset+i,d=(u=new Ac(s.read(o))).readShort(),p=u.readShort(),b=u.readShort(),A=u.readShort(),m=u.readShort(),this.cache[a]=d===-1?new XB(u,p,b,A,m):new JB(u,d,p,b,A,m),this.cache[a]))},t.prototype.encode=function(a,s,i){var o,l,d,u,A;for(d=[],l=[],u=0,A=s.length;u<A;u++)o=a[s[u]],l.push(d.length),o&&(d=d.concat(o.encode(i)));return l.push(d.length),{table:d,offsets:l}},t}(),JB=function(){function t(a,s,i,o,l,d){this.raw=a,this.numberOfContours=s,this.xMin=i,this.yMin=o,this.xMax=l,this.yMax=d,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t}(),XB=function(){function t(a,s,i,o,l){var d,u;for(this.raw=a,this.xMin=s,this.yMin=i,this.xMax=o,this.yMax=l,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],d=this.raw;u=d.readShort(),this.glyphOffsets.push(d.pos),this.glyphIDs.push(d.readUInt16()),32&u;)d.pos+=1&u?4:2,128&u?d.pos+=8:64&u?d.pos+=4:8&u&&(d.pos+=2)}return t.prototype.encode=function(){var a,s,i;for(s=new Ac(W1.call(this.raw.data)),a=0,i=this.glyphIDs.length;a<i;++a)s.pos=this.glyphOffsets[a];return s.data},t}(),ZB=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Go(t,_o),t.prototype.tag="loca",t.prototype.parse=function(a){var s,i;return a.pos=this.offset,s=this.file.head.indexToLocFormat,this.offsets=s===0?(function(){var o,l;for(l=[],i=0,o=this.length;i<o;i+=2)l.push(2*a.readUInt16());return l}).call(this):(function(){var o,l;for(l=[],i=0,o=this.length;i<o;i+=4)l.push(a.readUInt32());return l}).call(this)},t.prototype.indexOf=function(a){return this.offsets[a]},t.prototype.lengthOf=function(a){return this.offsets[a+1]-this.offsets[a]},t.prototype.encode=function(a,s){for(var i=new Uint32Array(this.offsets.length),o=0,l=0,d=0;d<i.length;++d)if(i[d]=o,l<s.length&&s[l]==d){++l,i[d]=o;var u=this.offsets[d],A=this.offsets[d+1]-u;A>0&&(o+=A)}for(var p=new Array(4*i.length),m=0;m<i.length;++m)p[4*m+3]=255&i[m],p[4*m+2]=(65280&i[m])>>8,p[4*m+1]=(16711680&i[m])>>16,p[4*m]=(4278190080&i[m])>>24;return p},t}(),eC=function(){function t(a){this.font=a,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var a,s,i,o,l;for(s in o=this.font.cmap.tables[0].codeMap,a={},l=this.subset)i=l[s],a[s]=o[i];return a},t.prototype.glyphsFor=function(a){var s,i,o,l,d,u,A;for(o={},d=0,u=a.length;d<u;d++)o[l=a[d]]=this.font.glyf.glyphFor(l);for(l in s=[],o)(i=o[l])!=null&&i.compound&&s.push.apply(s,i.glyphIDs);if(s.length>0)for(l in A=this.glyphsFor(s))i=A[l],o[l]=i;return o},t.prototype.encode=function(a,s){var i,o,l,d,u,A,p,m,b,v,x,C,D,S,_;for(o in i=$1.encode(this.generateCmap(),"unicode"),d=this.glyphsFor(a),x={0:0},_=i.charMap)x[(A=_[o]).old]=A.new;for(C in v=i.maxGlyphID,d)C in x||(x[C]=v++);return m=function(N){var O,L;for(O in L={},N)L[N[O]]=O;return L}(x),b=Object.keys(m).sort(function(N,O){return N-O}),D=function(){var N,O,L;for(L=[],N=0,O=b.length;N<O;N++)u=b[N],L.push(m[u]);return L}(),l=this.font.glyf.encode(d,D,x),p=this.font.loca.encode(l.offsets,D),S={cmap:this.font.cmap.raw(),glyf:l.table,loca:p,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(s)},this.font.os2.exists&&(S["OS/2"]=this.font.os2.raw()),this.font.directory.encode(S)},t}();ua.API.PDFObject=function(){var t;function a(){}return t=function(s,i){return(Array(i+1).join("0")+s).slice(-i)},a.convert=function(s){var i,o,l,d;if(Array.isArray(s))return"["+function(){var u,A,p;for(p=[],u=0,A=s.length;u<A;u++)i=s[u],p.push(a.convert(i));return p}().join(" ")+"]";if(typeof s=="string")return"/"+s;if(s?.isString)return"("+s+")";if(s instanceof Date)return"(D:"+t(s.getUTCFullYear(),4)+t(s.getUTCMonth(),2)+t(s.getUTCDate(),2)+t(s.getUTCHours(),2)+t(s.getUTCMinutes(),2)+t(s.getUTCSeconds(),2)+"Z)";if({}.toString.call(s)==="[object Object]"){for(o in l=["<<"],s)d=s[o],l.push("/"+o+" "+a.convert(d));return l.push(">>"),l.join(`
`)}return""+s},a}();const Vg=Object.freeze(Object.defineProperty({__proto__:null,AcroFormAppearance:pa,AcroFormButton:Yn,AcroFormCheckBox:JA,AcroFormChoiceField:Ic,AcroFormComboBox:Hc,AcroFormEditBox:WA,AcroFormListBox:Pc,AcroFormPasswordField:XA,AcroFormPushButton:YA,AcroFormRadioButton:Mc,AcroFormTextField:lc,GState:ou,ShadingPattern:sc,TilingPattern:Rc,default:ua,jsPDF:ua},Symbol.toStringTag,{value:"Module"}));/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var lg=function(t,a){return lg=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,i){s.__proto__=i}||function(s,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(s[o]=i[o])},lg(t,a)};function No(t,a){if(typeof a!="function"&&a!==null)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");lg(t,a);function s(){this.constructor=t}t.prototype=a===null?Object.create(a):(s.prototype=a.prototype,new s)}var cg=function(){return cg=Object.assign||function(a){for(var s,i=1,o=arguments.length;i<o;i++){s=arguments[i];for(var l in s)Object.prototype.hasOwnProperty.call(s,l)&&(a[l]=s[l])}return a},cg.apply(this,arguments)};function Vi(t,a,s,i){function o(l){return l instanceof s?l:new s(function(d){d(l)})}return new(s||(s=Promise))(function(l,d){function u(m){try{p(i.next(m))}catch(b){d(b)}}function A(m){try{p(i.throw(m))}catch(b){d(b)}}function p(m){m.done?l(m.value):o(m.value).then(u,A)}p((i=i.apply(t,[])).next())})}function Ti(t,a){var s={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},i,o,l,d;return d={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(d[Symbol.iterator]=function(){return this}),d;function u(p){return function(m){return A([p,m])}}function A(p){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,o&&(l=p[0]&2?o.return:p[0]?o.throw||((l=o.return)&&l.call(o),0):o.next)&&!(l=l.call(o,p[1])).done)return l;switch(o=0,l&&(p=[p[0]&2,l.value]),p[0]){case 0:case 1:l=p;break;case 4:return s.label++,{value:p[1],done:!1};case 5:s.label++,o=p[1],p=[0];continue;case 7:p=s.ops.pop(),s.trys.pop();continue;default:if(l=s.trys,!(l=l.length>0&&l[l.length-1])&&(p[0]===6||p[0]===2)){s=0;continue}if(p[0]===3&&(!l||p[1]>l[0]&&p[1]<l[3])){s.label=p[1];break}if(p[0]===6&&s.label<l[1]){s.label=l[1],l=p;break}if(l&&s.label<l[2]){s.label=l[2],s.ops.push(p);break}l[2]&&s.ops.pop(),s.trys.pop();continue}p=a.call(t,s)}catch(m){p=[6,m],o=0}finally{i=l=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}}function kh(t,a,s){if(arguments.length===2)for(var i=0,o=a.length,l;i<o;i++)(l||!(i in a))&&(l||(l=Array.prototype.slice.call(a,0,i)),l[i]=a[i]);return t.concat(l||a)}var _l=function(){function t(a,s,i,o){this.left=a,this.top=s,this.width=i,this.height=o}return t.prototype.add=function(a,s,i,o){return new t(this.left+a,this.top+s,this.width+i,this.height+o)},t.fromClientRect=function(a,s){return new t(s.left+a.windowBounds.left,s.top+a.windowBounds.top,s.width,s.height)},t.fromDOMRectList=function(a,s){var i=Array.from(s).find(function(o){return o.width!==0});return i?new t(i.left+a.windowBounds.left,i.top+a.windowBounds.top,i.width,i.height):t.EMPTY},t.EMPTY=new t(0,0,0,0),t}(),kp=function(t,a){return _l.fromClientRect(t,a.getBoundingClientRect())},tC=function(t){var a=t.body,s=t.documentElement;if(!a||!s)throw new Error("Unable to get document size");var i=Math.max(Math.max(a.scrollWidth,s.scrollWidth),Math.max(a.offsetWidth,s.offsetWidth),Math.max(a.clientWidth,s.clientWidth)),o=Math.max(Math.max(a.scrollHeight,s.scrollHeight),Math.max(a.offsetHeight,s.offsetHeight),Math.max(a.clientHeight,s.clientHeight));return new _l(0,0,i,o)},Fp=function(t){for(var a=[],s=0,i=t.length;s<i;){var o=t.charCodeAt(s++);if(o>=55296&&o<=56319&&s<i){var l=t.charCodeAt(s++);(l&64512)===56320?a.push(((o&1023)<<10)+(l&1023)+65536):(a.push(o),s--)}else a.push(o)}return a},Dn=function(){for(var t=[],a=0;a<arguments.length;a++)t[a]=arguments[a];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var s=t.length;if(!s)return"";for(var i=[],o=-1,l="";++o<s;){var d=t[o];d<=65535?i.push(d):(d-=65536,i.push((d>>10)+55296,d%1024+56320)),(o+1===s||i.length>16384)&&(l+=String.fromCharCode.apply(String,i),i.length=0)}return l},Fv="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",aC=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Fh=0;Fh<Fv.length;Fh++)aC[Fv.charCodeAt(Fh)]=Fh;var Ev="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",HA=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Eh=0;Eh<Ev.length;Eh++)HA[Ev.charCodeAt(Eh)]=Eh;var sC=function(t){var a=t.length*.75,s=t.length,i,o=0,l,d,u,A;t[t.length-1]==="="&&(a--,t[t.length-2]==="="&&a--);var p=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(a):new Array(a),m=Array.isArray(p)?p:new Uint8Array(p);for(i=0;i<s;i+=4)l=HA[t.charCodeAt(i)],d=HA[t.charCodeAt(i+1)],u=HA[t.charCodeAt(i+2)],A=HA[t.charCodeAt(i+3)],m[o++]=l<<2|d>>4,m[o++]=(d&15)<<4|u>>2,m[o++]=(u&3)<<6|A&63;return p},nC=function(t){for(var a=t.length,s=[],i=0;i<a;i+=2)s.push(t[i+1]<<8|t[i]);return s},iC=function(t){for(var a=t.length,s=[],i=0;i<a;i+=4)s.push(t[i+3]<<24|t[i+2]<<16|t[i+1]<<8|t[i]);return s},Oc=5,$g=11,_f=2,rC=$g-Oc,Y1=65536>>Oc,oC=1<<Oc,Nf=oC-1,lC=1024>>Oc,cC=Y1+lC,dC=cC,AC=32,uC=dC+AC,hC=65536>>$g,pC=1<<rC,mC=pC-1,Uv=function(t,a,s){return t.slice?t.slice(a,s):new Uint16Array(Array.prototype.slice.call(t,a,s))},fC=function(t,a,s){return t.slice?t.slice(a,s):new Uint32Array(Array.prototype.slice.call(t,a,s))},gC=function(t,a){var s=sC(t),i=Array.isArray(s)?iC(s):new Uint32Array(s),o=Array.isArray(s)?nC(s):new Uint16Array(s),l=24,d=Uv(o,l/2,i[4]/2),u=i[5]===2?Uv(o,(l+i[4])/2):fC(i,Math.ceil((l+i[4])/4));return new xC(i[0],i[1],i[2],i[3],d,u)},xC=function(){function t(a,s,i,o,l,d){this.initialValue=a,this.errorValue=s,this.highStart=i,this.highValueIndex=o,this.index=l,this.data=d}return t.prototype.get=function(a){var s;if(a>=0){if(a<55296||a>56319&&a<=65535)return s=this.index[a>>Oc],s=(s<<_f)+(a&Nf),this.data[s];if(a<=65535)return s=this.index[Y1+(a-55296>>Oc)],s=(s<<_f)+(a&Nf),this.data[s];if(a<this.highStart)return s=uC-hC+(a>>$g),s=this.index[s],s+=a>>Oc&mC,s=this.index[s],s=(s<<_f)+(a&Nf),this.data[s];if(a<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t}(),Lv="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",yC=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Uh=0;Uh<Lv.length;Uh++)yC[Lv.charCodeAt(Uh)]=Uh;var vC="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",Tv=50,bC=1,J1=2,X1=3,jC=4,wC=5,Qv=7,Z1=8,Rv=9,ic=10,dg=11,Dv=12,Ag=13,_C=14,MA=15,ug=16,Lh=17,RA=18,NC=19,Iv=20,hg=21,DA=22,Bf=23,Sd=24,wr=25,OA=26,zA=27,kd=28,BC=29,Qc=30,CC=31,Th=32,Qh=33,pg=34,mg=35,fg=36,lu=37,gg=38,ap=39,sp=40,Cf=41,ej=42,SC=43,kC=[9001,65288],tj="!",ps="",Rh="",xg=gC(vC),gl=[Qc,fg],yg=[bC,J1,X1,wC],aj=[ic,Z1],Pv=[zA,OA],FC=yg.concat(aj),Hv=[gg,ap,sp,pg,mg],EC=[MA,Ag],UC=function(t,a){a===void 0&&(a="strict");var s=[],i=[],o=[];return t.forEach(function(l,d){var u=xg.get(l);if(u>Tv?(o.push(!0),u-=Tv):o.push(!1),["normal","auto","loose"].indexOf(a)!==-1&&[8208,8211,12316,12448].indexOf(l)!==-1)return i.push(d),s.push(ug);if(u===jC||u===dg){if(d===0)return i.push(d),s.push(Qc);var A=s[d-1];return FC.indexOf(A)===-1?(i.push(i[d-1]),s.push(A)):(i.push(d),s.push(Qc))}if(i.push(d),u===CC)return s.push(a==="strict"?hg:lu);if(u===ej||u===BC)return s.push(Qc);if(u===SC)return l>=131072&&l<=196605||l>=196608&&l<=262141?s.push(lu):s.push(Qc);s.push(u)}),[i,s,o]},Sf=function(t,a,s,i){var o=i[s];if(Array.isArray(t)?t.indexOf(o)!==-1:t===o)for(var l=s;l<=i.length;){l++;var d=i[l];if(d===a)return!0;if(d!==ic)break}if(o===ic)for(var l=s;l>0;){l--;var u=i[l];if(Array.isArray(t)?t.indexOf(u)!==-1:t===u)for(var A=s;A<=i.length;){A++;var d=i[A];if(d===a)return!0;if(d!==ic)break}if(u!==ic)break}return!1},Mv=function(t,a){for(var s=t;s>=0;){var i=a[s];if(i===ic)s--;else return i}return 0},LC=function(t,a,s,i,o){if(s[i]===0)return ps;var l=i-1;if(Array.isArray(o)&&o[l]===!0)return ps;var d=l-1,u=l+1,A=a[l],p=d>=0?a[d]:0,m=a[u];if(A===J1&&m===X1)return ps;if(yg.indexOf(A)!==-1)return tj;if(yg.indexOf(m)!==-1||aj.indexOf(m)!==-1)return ps;if(Mv(l,a)===Z1)return Rh;if(xg.get(t[l])===dg||(A===Th||A===Qh)&&xg.get(t[u])===dg||A===Qv||m===Qv||A===Rv||[ic,Ag,MA].indexOf(A)===-1&&m===Rv||[Lh,RA,NC,Sd,kd].indexOf(m)!==-1||Mv(l,a)===DA||Sf(Bf,DA,l,a)||Sf([Lh,RA],hg,l,a)||Sf(Dv,Dv,l,a))return ps;if(A===ic)return Rh;if(A===Bf||m===Bf)return ps;if(m===ug||A===ug)return Rh;if([Ag,MA,hg].indexOf(m)!==-1||A===_C||p===fg&&EC.indexOf(A)!==-1||A===kd&&m===fg||m===Iv||gl.indexOf(m)!==-1&&A===wr||gl.indexOf(A)!==-1&&m===wr||A===zA&&[lu,Th,Qh].indexOf(m)!==-1||[lu,Th,Qh].indexOf(A)!==-1&&m===OA||gl.indexOf(A)!==-1&&Pv.indexOf(m)!==-1||Pv.indexOf(A)!==-1&&gl.indexOf(m)!==-1||[zA,OA].indexOf(A)!==-1&&(m===wr||[DA,MA].indexOf(m)!==-1&&a[u+1]===wr)||[DA,MA].indexOf(A)!==-1&&m===wr||A===wr&&[wr,kd,Sd].indexOf(m)!==-1)return ps;if([wr,kd,Sd,Lh,RA].indexOf(m)!==-1)for(var b=l;b>=0;){var v=a[b];if(v===wr)return ps;if([kd,Sd].indexOf(v)!==-1)b--;else break}if([zA,OA].indexOf(m)!==-1)for(var b=[Lh,RA].indexOf(A)!==-1?d:l;b>=0;){var v=a[b];if(v===wr)return ps;if([kd,Sd].indexOf(v)!==-1)b--;else break}if(gg===A&&[gg,ap,pg,mg].indexOf(m)!==-1||[ap,pg].indexOf(A)!==-1&&[ap,sp].indexOf(m)!==-1||[sp,mg].indexOf(A)!==-1&&m===sp||Hv.indexOf(A)!==-1&&[Iv,OA].indexOf(m)!==-1||Hv.indexOf(m)!==-1&&A===zA||gl.indexOf(A)!==-1&&gl.indexOf(m)!==-1||A===Sd&&gl.indexOf(m)!==-1||gl.concat(wr).indexOf(A)!==-1&&m===DA&&kC.indexOf(t[u])===-1||gl.concat(wr).indexOf(m)!==-1&&A===RA)return ps;if(A===Cf&&m===Cf){for(var x=s[l],C=1;x>0&&(x--,a[x]===Cf);)C++;if(C%2!==0)return ps}return A===Th&&m===Qh?ps:Rh},TC=function(t,a){a||(a={lineBreak:"normal",wordBreak:"normal"});var s=UC(t,a.lineBreak),i=s[0],o=s[1],l=s[2];(a.wordBreak==="break-all"||a.wordBreak==="break-word")&&(o=o.map(function(u){return[wr,Qc,ej].indexOf(u)!==-1?lu:u}));var d=a.wordBreak==="keep-all"?l.map(function(u,A){return u&&t[A]>=19968&&t[A]<=40959}):void 0;return[i,o,d]},QC=function(){function t(a,s,i,o){this.codePoints=a,this.required=s===tj,this.start=i,this.end=o}return t.prototype.slice=function(){return Dn.apply(void 0,this.codePoints.slice(this.start,this.end))},t}(),RC=function(t,a){var s=Fp(t),i=TC(s,a),o=i[0],l=i[1],d=i[2],u=s.length,A=0,p=0;return{next:function(){if(p>=u)return{done:!0,value:null};for(var m=ps;p<u&&(m=LC(s,l,o,++p,d))===ps;);if(m!==ps||p===u){var b=new QC(s,m,A,p);return A=p,{value:b,done:!1}}return{done:!0,value:null}}}},DC=1,IC=2,gu=4,Ov=8,dp=10,zv=47,ZA=92,PC=9,HC=32,Dh=34,IA=61,MC=35,OC=36,zC=37,Ih=39,Ph=40,PA=41,qC=95,lr=45,KC=33,GC=60,VC=62,$C=64,WC=91,YC=93,JC=61,XC=123,Hh=63,ZC=125,qv=124,eS=126,tS=128,Kv=65533,kf=42,Dc=43,aS=44,sS=58,nS=59,cu=46,iS=0,rS=8,oS=11,lS=14,cS=31,dS=127,Ho=-1,sj=48,nj=97,ij=101,AS=102,uS=117,hS=122,rj=65,oj=69,lj=70,pS=85,mS=90,Qi=function(t){return t>=sj&&t<=57},fS=function(t){return t>=55296&&t<=57343},Fd=function(t){return Qi(t)||t>=rj&&t<=lj||t>=nj&&t<=AS},gS=function(t){return t>=nj&&t<=hS},xS=function(t){return t>=rj&&t<=mS},yS=function(t){return gS(t)||xS(t)},vS=function(t){return t>=tS},Mh=function(t){return t===dp||t===PC||t===HC},Ap=function(t){return yS(t)||vS(t)||t===qC},Gv=function(t){return Ap(t)||Qi(t)||t===lr},bS=function(t){return t>=iS&&t<=rS||t===oS||t>=lS&&t<=cS||t===dS},ac=function(t,a){return t!==ZA?!1:a!==dp},Oh=function(t,a,s){return t===lr?Ap(a)||ac(a,s):Ap(t)?!0:!!(t===ZA&&ac(t,a))},Ff=function(t,a,s){return t===Dc||t===lr?Qi(a)?!0:a===cu&&Qi(s):Qi(t===cu?a:t)},jS=function(t){var a=0,s=1;(t[a]===Dc||t[a]===lr)&&(t[a]===lr&&(s=-1),a++);for(var i=[];Qi(t[a]);)i.push(t[a++]);var o=i.length?parseInt(Dn.apply(void 0,i),10):0;t[a]===cu&&a++;for(var l=[];Qi(t[a]);)l.push(t[a++]);var d=l.length,u=d?parseInt(Dn.apply(void 0,l),10):0;(t[a]===oj||t[a]===ij)&&a++;var A=1;(t[a]===Dc||t[a]===lr)&&(t[a]===lr&&(A=-1),a++);for(var p=[];Qi(t[a]);)p.push(t[a++]);var m=p.length?parseInt(Dn.apply(void 0,p),10):0;return s*(o+u*Math.pow(10,-d))*Math.pow(10,A*m)},wS={type:2},_S={type:3},NS={type:4},BS={type:13},CS={type:8},SS={type:21},kS={type:9},FS={type:10},ES={type:11},US={type:12},LS={type:14},zh={type:23},TS={type:1},QS={type:25},RS={type:24},DS={type:26},IS={type:27},PS={type:28},HS={type:29},MS={type:31},vg={type:32},cj=function(){function t(){this._value=[]}return t.prototype.write=function(a){this._value=this._value.concat(Fp(a))},t.prototype.read=function(){for(var a=[],s=this.consumeToken();s!==vg;)a.push(s),s=this.consumeToken();return a},t.prototype.consumeToken=function(){var a=this.consumeCodePoint();switch(a){case Dh:return this.consumeStringToken(Dh);case MC:var s=this.peekCodePoint(0),i=this.peekCodePoint(1),o=this.peekCodePoint(2);if(Gv(s)||ac(i,o)){var l=Oh(s,i,o)?IC:DC,d=this.consumeName();return{type:5,value:d,flags:l}}break;case OC:if(this.peekCodePoint(0)===IA)return this.consumeCodePoint(),BS;break;case Ih:return this.consumeStringToken(Ih);case Ph:return wS;case PA:return _S;case kf:if(this.peekCodePoint(0)===IA)return this.consumeCodePoint(),LS;break;case Dc:if(Ff(a,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(a),this.consumeNumericToken();break;case aS:return NS;case lr:var u=a,A=this.peekCodePoint(0),p=this.peekCodePoint(1);if(Ff(u,A,p))return this.reconsumeCodePoint(a),this.consumeNumericToken();if(Oh(u,A,p))return this.reconsumeCodePoint(a),this.consumeIdentLikeToken();if(A===lr&&p===VC)return this.consumeCodePoint(),this.consumeCodePoint(),RS;break;case cu:if(Ff(a,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(a),this.consumeNumericToken();break;case zv:if(this.peekCodePoint(0)===kf)for(this.consumeCodePoint();;){var m=this.consumeCodePoint();if(m===kf&&(m=this.consumeCodePoint(),m===zv))return this.consumeToken();if(m===Ho)return this.consumeToken()}break;case sS:return DS;case nS:return IS;case GC:if(this.peekCodePoint(0)===KC&&this.peekCodePoint(1)===lr&&this.peekCodePoint(2)===lr)return this.consumeCodePoint(),this.consumeCodePoint(),QS;break;case $C:var b=this.peekCodePoint(0),v=this.peekCodePoint(1),x=this.peekCodePoint(2);if(Oh(b,v,x)){var d=this.consumeName();return{type:7,value:d}}break;case WC:return PS;case ZA:if(ac(a,this.peekCodePoint(0)))return this.reconsumeCodePoint(a),this.consumeIdentLikeToken();break;case YC:return HS;case JC:if(this.peekCodePoint(0)===IA)return this.consumeCodePoint(),CS;break;case XC:return ES;case ZC:return US;case uS:case pS:var C=this.peekCodePoint(0),D=this.peekCodePoint(1);return C===Dc&&(Fd(D)||D===Hh)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(a),this.consumeIdentLikeToken();case qv:if(this.peekCodePoint(0)===IA)return this.consumeCodePoint(),kS;if(this.peekCodePoint(0)===qv)return this.consumeCodePoint(),SS;break;case eS:if(this.peekCodePoint(0)===IA)return this.consumeCodePoint(),FS;break;case Ho:return vg}return Mh(a)?(this.consumeWhiteSpace(),MS):Qi(a)?(this.reconsumeCodePoint(a),this.consumeNumericToken()):Ap(a)?(this.reconsumeCodePoint(a),this.consumeIdentLikeToken()):{type:6,value:Dn(a)}},t.prototype.consumeCodePoint=function(){var a=this._value.shift();return typeof a>"u"?-1:a},t.prototype.reconsumeCodePoint=function(a){this._value.unshift(a)},t.prototype.peekCodePoint=function(a){return a>=this._value.length?-1:this._value[a]},t.prototype.consumeUnicodeRangeToken=function(){for(var a=[],s=this.consumeCodePoint();Fd(s)&&a.length<6;)a.push(s),s=this.consumeCodePoint();for(var i=!1;s===Hh&&a.length<6;)a.push(s),s=this.consumeCodePoint(),i=!0;if(i){var o=parseInt(Dn.apply(void 0,a.map(function(A){return A===Hh?sj:A})),16),l=parseInt(Dn.apply(void 0,a.map(function(A){return A===Hh?lj:A})),16);return{type:30,start:o,end:l}}var d=parseInt(Dn.apply(void 0,a),16);if(this.peekCodePoint(0)===lr&&Fd(this.peekCodePoint(1))){this.consumeCodePoint(),s=this.consumeCodePoint();for(var u=[];Fd(s)&&u.length<6;)u.push(s),s=this.consumeCodePoint();var l=parseInt(Dn.apply(void 0,u),16);return{type:30,start:d,end:l}}else return{type:30,start:d,end:d}},t.prototype.consumeIdentLikeToken=function(){var a=this.consumeName();return a.toLowerCase()==="url"&&this.peekCodePoint(0)===Ph?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===Ph?(this.consumeCodePoint(),{type:19,value:a}):{type:20,value:a}},t.prototype.consumeUrlToken=function(){var a=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===Ho)return{type:22,value:""};var s=this.peekCodePoint(0);if(s===Ih||s===Dh){var i=this.consumeStringToken(this.consumeCodePoint());return i.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===Ho||this.peekCodePoint(0)===PA)?(this.consumeCodePoint(),{type:22,value:i.value}):(this.consumeBadUrlRemnants(),zh)}for(;;){var o=this.consumeCodePoint();if(o===Ho||o===PA)return{type:22,value:Dn.apply(void 0,a)};if(Mh(o))return this.consumeWhiteSpace(),this.peekCodePoint(0)===Ho||this.peekCodePoint(0)===PA?(this.consumeCodePoint(),{type:22,value:Dn.apply(void 0,a)}):(this.consumeBadUrlRemnants(),zh);if(o===Dh||o===Ih||o===Ph||bS(o))return this.consumeBadUrlRemnants(),zh;if(o===ZA)if(ac(o,this.peekCodePoint(0)))a.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),zh;else a.push(o)}},t.prototype.consumeWhiteSpace=function(){for(;Mh(this.peekCodePoint(0));)this.consumeCodePoint()},t.prototype.consumeBadUrlRemnants=function(){for(;;){var a=this.consumeCodePoint();if(a===PA||a===Ho)return;ac(a,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},t.prototype.consumeStringSlice=function(a){for(var s=5e4,i="";a>0;){var o=Math.min(s,a);i+=Dn.apply(void 0,this._value.splice(0,o)),a-=o}return this._value.shift(),i},t.prototype.consumeStringToken=function(a){var s="",i=0;do{var o=this._value[i];if(o===Ho||o===void 0||o===a)return s+=this.consumeStringSlice(i),{type:0,value:s};if(o===dp)return this._value.splice(0,i),TS;if(o===ZA){var l=this._value[i+1];l!==Ho&&l!==void 0&&(l===dp?(s+=this.consumeStringSlice(i),i=-1,this._value.shift()):ac(o,l)&&(s+=this.consumeStringSlice(i),s+=Dn(this.consumeEscapedCodePoint()),i=-1))}i++}while(!0)},t.prototype.consumeNumber=function(){var a=[],s=gu,i=this.peekCodePoint(0);for((i===Dc||i===lr)&&a.push(this.consumeCodePoint());Qi(this.peekCodePoint(0));)a.push(this.consumeCodePoint());i=this.peekCodePoint(0);var o=this.peekCodePoint(1);if(i===cu&&Qi(o))for(a.push(this.consumeCodePoint(),this.consumeCodePoint()),s=Ov;Qi(this.peekCodePoint(0));)a.push(this.consumeCodePoint());i=this.peekCodePoint(0),o=this.peekCodePoint(1);var l=this.peekCodePoint(2);if((i===oj||i===ij)&&((o===Dc||o===lr)&&Qi(l)||Qi(o)))for(a.push(this.consumeCodePoint(),this.consumeCodePoint()),s=Ov;Qi(this.peekCodePoint(0));)a.push(this.consumeCodePoint());return[jS(a),s]},t.prototype.consumeNumericToken=function(){var a=this.consumeNumber(),s=a[0],i=a[1],o=this.peekCodePoint(0),l=this.peekCodePoint(1),d=this.peekCodePoint(2);if(Oh(o,l,d)){var u=this.consumeName();return{type:15,number:s,flags:i,unit:u}}return o===zC?(this.consumeCodePoint(),{type:16,number:s,flags:i}):{type:17,number:s,flags:i}},t.prototype.consumeEscapedCodePoint=function(){var a=this.consumeCodePoint();if(Fd(a)){for(var s=Dn(a);Fd(this.peekCodePoint(0))&&s.length<6;)s+=Dn(this.consumeCodePoint());Mh(this.peekCodePoint(0))&&this.consumeCodePoint();var i=parseInt(s,16);return i===0||fS(i)||i>1114111?Kv:i}return a===Ho?Kv:a},t.prototype.consumeName=function(){for(var a="";;){var s=this.consumeCodePoint();if(Gv(s))a+=Dn(s);else if(ac(s,this.peekCodePoint(0)))a+=Dn(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(s),a}},t}(),dj=function(){function t(a){this._tokens=a}return t.create=function(a){var s=new cj;return s.write(a),new t(s.read())},t.parseValue=function(a){return t.create(a).parseComponentValue()},t.parseValues=function(a){return t.create(a).parseComponentValues()},t.prototype.parseComponentValue=function(){for(var a=this.consumeToken();a.type===31;)a=this.consumeToken();if(a.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(a);var s=this.consumeComponentValue();do a=this.consumeToken();while(a.type===31);if(a.type===32)return s;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},t.prototype.parseComponentValues=function(){for(var a=[];;){var s=this.consumeComponentValue();if(s.type===32)return a;a.push(s),a.push()}},t.prototype.consumeComponentValue=function(){var a=this.consumeToken();switch(a.type){case 11:case 28:case 2:return this.consumeSimpleBlock(a.type);case 19:return this.consumeFunction(a)}return a},t.prototype.consumeSimpleBlock=function(a){for(var s={type:a,values:[]},i=this.consumeToken();;){if(i.type===32||zS(i,a))return s;this.reconsumeToken(i),s.values.push(this.consumeComponentValue()),i=this.consumeToken()}},t.prototype.consumeFunction=function(a){for(var s={name:a.value,values:[],type:18};;){var i=this.consumeToken();if(i.type===32||i.type===3)return s;this.reconsumeToken(i),s.values.push(this.consumeComponentValue())}},t.prototype.consumeToken=function(){var a=this._tokens.shift();return typeof a>"u"?vg:a},t.prototype.reconsumeToken=function(a){this._tokens.unshift(a)},t}(),xu=function(t){return t.type===15},Kd=function(t){return t.type===17},Is=function(t){return t.type===20},OS=function(t){return t.type===0},bg=function(t,a){return Is(t)&&t.value===a},Aj=function(t){return t.type!==31},Hd=function(t){return t.type!==31&&t.type!==4},Vo=function(t){var a=[],s=[];return t.forEach(function(i){if(i.type===4){if(s.length===0)throw new Error("Error parsing function args, zero tokens for arg");a.push(s),s=[];return}i.type!==31&&s.push(i)}),s.length&&a.push(s),a},zS=function(t,a){return a===11&&t.type===12||a===28&&t.type===29?!0:a===2&&t.type===3},uc=function(t){return t.type===17||t.type===15},qn=function(t){return t.type===16||uc(t)},uj=function(t){return t.length>1?[t[0],t[1]]:[t[0]]},yi={type:17,number:0,flags:gu},Wg={type:16,number:50,flags:gu},rc={type:16,number:100,flags:gu},qA=function(t,a,s){var i=t[0],o=t[1];return[Ws(i,a),Ws(typeof o<"u"?o:i,s)]},Ws=function(t,a){if(t.type===16)return t.number/100*a;if(xu(t))switch(t.unit){case"rem":case"em":return 16*t.number;case"px":default:return t.number}return t.number},hj="deg",pj="grad",mj="rad",fj="turn",Ep={name:"angle",parse:function(t,a){if(a.type===15)switch(a.unit){case hj:return Math.PI*a.number/180;case pj:return Math.PI/200*a.number;case mj:return a.number;case fj:return Math.PI*2*a.number}throw new Error("Unsupported angle type")}},gj=function(t){return t.type===15&&(t.unit===hj||t.unit===pj||t.unit===mj||t.unit===fj)},xj=function(t){var a=t.filter(Is).map(function(s){return s.value}).join(" ");switch(a){case"to bottom right":case"to right bottom":case"left top":case"top left":return[yi,yi];case"to top":case"bottom":return Wr(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[yi,rc];case"to right":case"left":return Wr(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[rc,rc];case"to bottom":case"top":return Wr(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[rc,yi];case"to left":case"right":return Wr(270)}return 0},Wr=function(t){return Math.PI*t/180},cc={name:"color",parse:function(t,a){if(a.type===18){var s=qS[a.name];if(typeof s>"u")throw new Error('Attempting to parse an unsupported color function "'+a.name+'"');return s(t,a.values)}if(a.type===5){if(a.value.length===3){var i=a.value.substring(0,1),o=a.value.substring(1,2),l=a.value.substring(2,3);return oc(parseInt(i+i,16),parseInt(o+o,16),parseInt(l+l,16),1)}if(a.value.length===4){var i=a.value.substring(0,1),o=a.value.substring(1,2),l=a.value.substring(2,3),d=a.value.substring(3,4);return oc(parseInt(i+i,16),parseInt(o+o,16),parseInt(l+l,16),parseInt(d+d,16)/255)}if(a.value.length===6){var i=a.value.substring(0,2),o=a.value.substring(2,4),l=a.value.substring(4,6);return oc(parseInt(i,16),parseInt(o,16),parseInt(l,16),1)}if(a.value.length===8){var i=a.value.substring(0,2),o=a.value.substring(2,4),l=a.value.substring(4,6),d=a.value.substring(6,8);return oc(parseInt(i,16),parseInt(o,16),parseInt(l,16),parseInt(d,16)/255)}}if(a.type===20){var u=jl[a.value.toUpperCase()];if(typeof u<"u")return u}return jl.TRANSPARENT}},dc=function(t){return(255&t)===0},ri=function(t){var a=255&t,s=255&t>>8,i=255&t>>16,o=255&t>>24;return a<255?"rgba("+o+","+i+","+s+","+a/255+")":"rgb("+o+","+i+","+s+")"},oc=function(t,a,s,i){return(t<<24|a<<16|s<<8|Math.round(i*255)<<0)>>>0},Vv=function(t,a){if(t.type===17)return t.number;if(t.type===16){var s=a===3?1:255;return a===3?t.number/100*s:Math.round(t.number/100*s)}return 0},$v=function(t,a){var s=a.filter(Hd);if(s.length===3){var i=s.map(Vv),o=i[0],l=i[1],d=i[2];return oc(o,l,d,1)}if(s.length===4){var u=s.map(Vv),o=u[0],l=u[1],d=u[2],A=u[3];return oc(o,l,d,A)}return 0};function Ef(t,a,s){return s<0&&(s+=1),s>=1&&(s-=1),s<1/6?(a-t)*s*6+t:s<1/2?a:s<2/3?(a-t)*6*(2/3-s)+t:t}var Wv=function(t,a){var s=a.filter(Hd),i=s[0],o=s[1],l=s[2],d=s[3],u=(i.type===17?Wr(i.number):Ep.parse(t,i))/(Math.PI*2),A=qn(o)?o.number/100:0,p=qn(l)?l.number/100:0,m=typeof d<"u"&&qn(d)?Ws(d,1):1;if(A===0)return oc(p*255,p*255,p*255,1);var b=p<=.5?p*(A+1):p+A-p*A,v=p*2-b,x=Ef(v,b,u+1/3),C=Ef(v,b,u),D=Ef(v,b,u-1/3);return oc(x*255,C*255,D*255,m)},qS={hsl:Wv,hsla:Wv,rgb:$v,rgba:$v},eu=function(t,a){return cc.parse(t,dj.create(a).parseComponentValue())},jl={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},KS={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(t,a){return a.map(function(s){if(Is(s))switch(s.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},GS={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Up=function(t,a){var s=cc.parse(t,a[0]),i=a[1];return i&&qn(i)?{color:s,stop:i}:{color:s,stop:null}},Yv=function(t,a){var s=t[0],i=t[t.length-1];s.stop===null&&(s.stop=yi),i.stop===null&&(i.stop=rc);for(var o=[],l=0,d=0;d<t.length;d++){var u=t[d].stop;if(u!==null){var A=Ws(u,a);A>l?o.push(A):o.push(l),l=A}else o.push(null)}for(var p=null,d=0;d<o.length;d++){var m=o[d];if(m===null)p===null&&(p=d);else if(p!==null){for(var b=d-p,v=o[p-1],x=(m-v)/(b+1),C=1;C<=b;C++)o[p+C-1]=x*C;p=null}}return t.map(function(D,S){var _=D.color;return{color:_,stop:Math.max(Math.min(1,o[S]/a),0)}})},VS=function(t,a,s){var i=a/2,o=s/2,l=Ws(t[0],a)-i,d=o-Ws(t[1],s);return(Math.atan2(d,l)+Math.PI*2)%(Math.PI*2)},$S=function(t,a,s){var i=typeof t=="number"?t:VS(t,a,s),o=Math.abs(a*Math.sin(i))+Math.abs(s*Math.cos(i)),l=a/2,d=s/2,u=o/2,A=Math.sin(i-Math.PI/2)*u,p=Math.cos(i-Math.PI/2)*u;return[o,l-p,l+p,d-A,d+A]},yo=function(t,a){return Math.sqrt(t*t+a*a)},Jv=function(t,a,s,i,o){var l=[[0,0],[0,a],[t,0],[t,a]];return l.reduce(function(d,u){var A=u[0],p=u[1],m=yo(s-A,i-p);return(o?m<d.optimumDistance:m>d.optimumDistance)?{optimumCorner:u,optimumDistance:m}:d},{optimumDistance:o?1/0:-1/0,optimumCorner:null}).optimumCorner},WS=function(t,a,s,i,o){var l=0,d=0;switch(t.size){case 0:t.shape===0?l=d=Math.min(Math.abs(a),Math.abs(a-i),Math.abs(s),Math.abs(s-o)):t.shape===1&&(l=Math.min(Math.abs(a),Math.abs(a-i)),d=Math.min(Math.abs(s),Math.abs(s-o)));break;case 2:if(t.shape===0)l=d=Math.min(yo(a,s),yo(a,s-o),yo(a-i,s),yo(a-i,s-o));else if(t.shape===1){var u=Math.min(Math.abs(s),Math.abs(s-o))/Math.min(Math.abs(a),Math.abs(a-i)),A=Jv(i,o,a,s,!0),p=A[0],m=A[1];l=yo(p-a,(m-s)/u),d=u*l}break;case 1:t.shape===0?l=d=Math.max(Math.abs(a),Math.abs(a-i),Math.abs(s),Math.abs(s-o)):t.shape===1&&(l=Math.max(Math.abs(a),Math.abs(a-i)),d=Math.max(Math.abs(s),Math.abs(s-o)));break;case 3:if(t.shape===0)l=d=Math.max(yo(a,s),yo(a,s-o),yo(a-i,s),yo(a-i,s-o));else if(t.shape===1){var u=Math.max(Math.abs(s),Math.abs(s-o))/Math.max(Math.abs(a),Math.abs(a-i)),b=Jv(i,o,a,s,!1),p=b[0],m=b[1];l=yo(p-a,(m-s)/u),d=u*l}break}return Array.isArray(t.size)&&(l=Ws(t.size[0],i),d=t.size.length===2?Ws(t.size[1],o):l),[l,d]},YS=function(t,a){var s=Wr(180),i=[];return Vo(a).forEach(function(o,l){if(l===0){var d=o[0];if(d.type===20&&d.value==="to"){s=xj(o);return}else if(gj(d)){s=Ep.parse(t,d);return}}var u=Up(t,o);i.push(u)}),{angle:s,stops:i,type:1}},qh=function(t,a){var s=Wr(180),i=[];return Vo(a).forEach(function(o,l){if(l===0){var d=o[0];if(d.type===20&&["top","left","right","bottom"].indexOf(d.value)!==-1){s=xj(o);return}else if(gj(d)){s=(Ep.parse(t,d)+Wr(270))%Wr(360);return}}var u=Up(t,o);i.push(u)}),{angle:s,stops:i,type:1}},JS=function(t,a){var s=Wr(180),i=[],o=1,l=0,d=3,u=[];return Vo(a).forEach(function(A,p){var m=A[0];if(p===0){if(Is(m)&&m.value==="linear"){o=1;return}else if(Is(m)&&m.value==="radial"){o=2;return}}if(m.type===18){if(m.name==="from"){var b=cc.parse(t,m.values[0]);i.push({stop:yi,color:b})}else if(m.name==="to"){var b=cc.parse(t,m.values[0]);i.push({stop:rc,color:b})}else if(m.name==="color-stop"){var v=m.values.filter(Hd);if(v.length===2){var b=cc.parse(t,v[1]),x=v[0];Kd(x)&&i.push({stop:{type:16,number:x.number*100,flags:x.flags},color:b})}}}}),o===1?{angle:(s+Wr(180))%Wr(360),stops:i,type:o}:{size:d,shape:l,stops:i,position:u,type:o}},yj="closest-side",vj="farthest-side",bj="closest-corner",jj="farthest-corner",wj="circle",_j="ellipse",Nj="cover",Bj="contain",XS=function(t,a){var s=0,i=3,o=[],l=[];return Vo(a).forEach(function(d,u){var A=!0;if(u===0){var p=!1;A=d.reduce(function(b,v){if(p)if(Is(v))switch(v.value){case"center":return l.push(Wg),b;case"top":case"left":return l.push(yi),b;case"right":case"bottom":return l.push(rc),b}else(qn(v)||uc(v))&&l.push(v);else if(Is(v))switch(v.value){case wj:return s=0,!1;case _j:return s=1,!1;case"at":return p=!0,!1;case yj:return i=0,!1;case Nj:case vj:return i=1,!1;case Bj:case bj:return i=2,!1;case jj:return i=3,!1}else if(uc(v)||qn(v))return Array.isArray(i)||(i=[]),i.push(v),!1;return b},A)}if(A){var m=Up(t,d);o.push(m)}}),{size:i,shape:s,stops:o,position:l,type:2}},Kh=function(t,a){var s=0,i=3,o=[],l=[];return Vo(a).forEach(function(d,u){var A=!0;if(u===0?A=d.reduce(function(m,b){if(Is(b))switch(b.value){case"center":return l.push(Wg),!1;case"top":case"left":return l.push(yi),!1;case"right":case"bottom":return l.push(rc),!1}else if(qn(b)||uc(b))return l.push(b),!1;return m},A):u===1&&(A=d.reduce(function(m,b){if(Is(b))switch(b.value){case wj:return s=0,!1;case _j:return s=1,!1;case Bj:case yj:return i=0,!1;case vj:return i=1,!1;case bj:return i=2,!1;case Nj:case jj:return i=3,!1}else if(uc(b)||qn(b))return Array.isArray(i)||(i=[]),i.push(b),!1;return m},A)),A){var p=Up(t,d);o.push(p)}}),{size:i,shape:s,stops:o,position:l,type:2}},ZS=function(t){return t.type===1},e4=function(t){return t.type===2},Yg={name:"image",parse:function(t,a){if(a.type===22){var s={url:a.value,type:0};return t.cache.addImage(a.value),s}if(a.type===18){var i=Cj[a.name];if(typeof i>"u")throw new Error('Attempting to parse an unsupported image function "'+a.name+'"');return i(t,a.values)}throw new Error("Unsupported image type "+a.type)}};function t4(t){return!(t.type===20&&t.value==="none")&&(t.type!==18||!!Cj[t.name])}var Cj={"linear-gradient":YS,"-moz-linear-gradient":qh,"-ms-linear-gradient":qh,"-o-linear-gradient":qh,"-webkit-linear-gradient":qh,"radial-gradient":XS,"-moz-radial-gradient":Kh,"-ms-radial-gradient":Kh,"-o-radial-gradient":Kh,"-webkit-radial-gradient":Kh,"-webkit-gradient":JS},a4={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(t,a){if(a.length===0)return[];var s=a[0];return s.type===20&&s.value==="none"?[]:a.filter(function(i){return Hd(i)&&t4(i)}).map(function(i){return Yg.parse(t,i)})}},s4={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(t,a){return a.map(function(s){if(Is(s))switch(s.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},n4={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(t,a){return Vo(a).map(function(s){return s.filter(qn)}).map(uj)}},i4={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(t,a){return Vo(a).map(function(s){return s.filter(Is).map(function(i){return i.value}).join(" ")}).map(r4)}},r4=function(t){switch(t){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},Pd;(function(t){t.AUTO="auto",t.CONTAIN="contain",t.COVER="cover"})(Pd||(Pd={}));var o4={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(t,a){return Vo(a).map(function(s){return s.filter(l4)})}},l4=function(t){return Is(t)||qn(t)},Lp=function(t){return{name:"border-"+t+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},c4=Lp("top"),d4=Lp("right"),A4=Lp("bottom"),u4=Lp("left"),Tp=function(t){return{name:"border-radius-"+t,initialValue:"0 0",prefix:!1,type:1,parse:function(a,s){return uj(s.filter(qn))}}},h4=Tp("top-left"),p4=Tp("top-right"),m4=Tp("bottom-right"),f4=Tp("bottom-left"),Qp=function(t){return{name:"border-"+t+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(a,s){switch(s){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},g4=Qp("top"),x4=Qp("right"),y4=Qp("bottom"),v4=Qp("left"),Rp=function(t){return{name:"border-"+t+"-width",initialValue:"0",type:0,prefix:!1,parse:function(a,s){return xu(s)?s.number:0}}},b4=Rp("top"),j4=Rp("right"),w4=Rp("bottom"),_4=Rp("left"),N4={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},B4={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(t,a){switch(a){case"rtl":return 1;case"ltr":default:return 0}}},C4={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(t,a){return a.filter(Is).reduce(function(s,i){return s|S4(i.value)},0)}},S4=function(t){switch(t){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},k4={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(t,a){switch(a){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},F4={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(t,a){return a.type===20&&a.value==="normal"?0:a.type===17||a.type===15?a.number:0}},up;(function(t){t.NORMAL="normal",t.STRICT="strict"})(up||(up={}));var E4={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(t,a){switch(a){case"strict":return up.STRICT;case"normal":default:return up.NORMAL}}},U4={name:"line-height",initialValue:"normal",prefix:!1,type:4},Xv=function(t,a){return Is(t)&&t.value==="normal"?1.2*a:t.type===17?a*t.number:qn(t)?Ws(t,a):a},L4={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(t,a){return a.type===20&&a.value==="none"?null:Yg.parse(t,a)}},T4={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(t,a){switch(a){case"inside":return 0;case"outside":default:return 1}}},jg={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(t,a){switch(a){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},Dp=function(t){return{name:"margin-"+t,initialValue:"0",prefix:!1,type:4}},Q4=Dp("top"),R4=Dp("right"),D4=Dp("bottom"),I4=Dp("left"),P4={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(t,a){return a.filter(Is).map(function(s){switch(s.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},H4={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(t,a){switch(a){case"break-word":return"break-word";case"normal":default:return"normal"}}},Ip=function(t){return{name:"padding-"+t,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},M4=Ip("top"),O4=Ip("right"),z4=Ip("bottom"),q4=Ip("left"),K4={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(t,a){switch(a){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},G4={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(t,a){switch(a){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},V4={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,a){return a.length===1&&bg(a[0],"none")?[]:Vo(a).map(function(s){for(var i={color:jl.TRANSPARENT,offsetX:yi,offsetY:yi,blur:yi},o=0,l=0;l<s.length;l++){var d=s[l];uc(d)?(o===0?i.offsetX=d:o===1?i.offsetY=d:i.blur=d,o++):i.color=cc.parse(t,d)}return i})}},$4={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(t,a){switch(a){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},W4={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(t,a){if(a.type===20&&a.value==="none")return null;if(a.type===18){var s=X4[a.name];if(typeof s>"u")throw new Error('Attempting to parse an unsupported transform function "'+a.name+'"');return s(a.values)}return null}},Y4=function(t){var a=t.filter(function(s){return s.type===17}).map(function(s){return s.number});return a.length===6?a:null},J4=function(t){var a=t.filter(function(A){return A.type===17}).map(function(A){return A.number}),s=a[0],i=a[1];a[2],a[3];var o=a[4],l=a[5];a[6],a[7],a[8],a[9],a[10],a[11];var d=a[12],u=a[13];return a[14],a[15],a.length===16?[s,i,o,l,d,u]:null},X4={matrix:Y4,matrix3d:J4},Zv={type:16,number:50,flags:gu},Z4=[Zv,Zv],ek={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(t,a){var s=a.filter(qn);return s.length!==2?Z4:[s[0],s[1]]}},tk={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(t,a){switch(a){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},tu;(function(t){t.NORMAL="normal",t.BREAK_ALL="break-all",t.KEEP_ALL="keep-all"})(tu||(tu={}));var ak={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(t,a){switch(a){case"break-all":return tu.BREAK_ALL;case"keep-all":return tu.KEEP_ALL;case"normal":default:return tu.NORMAL}}},sk={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(t,a){if(a.type===20)return{auto:!0,order:0};if(Kd(a))return{auto:!1,order:a.number};throw new Error("Invalid z-index number parsed")}},Sj={name:"time",parse:function(t,a){if(a.type===15)switch(a.unit.toLowerCase()){case"s":return 1e3*a.number;case"ms":return a.number}throw new Error("Unsupported time type")}},nk={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(t,a){return Kd(a)?a.number:1}},ik={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},rk={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(t,a){return a.filter(Is).map(function(s){switch(s.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(s){return s!==0})}},ok={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(t,a){var s=[],i=[];return a.forEach(function(o){switch(o.type){case 20:case 0:s.push(o.value);break;case 17:s.push(o.number.toString());break;case 4:i.push(s.join(" ")),s.length=0;break}}),s.length&&i.push(s.join(" ")),i.map(function(o){return o.indexOf(" ")===-1?o:"'"+o+"'"})}},lk={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},ck={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(t,a){if(Kd(a))return a.number;if(Is(a))switch(a.value){case"bold":return 700;case"normal":default:return 400}return 400}},dk={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(t,a){return a.filter(Is).map(function(s){return s.value})}},Ak={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(t,a){switch(a){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},Jn=function(t,a){return(t&a)!==0},uk={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(t,a){if(a.length===0)return[];var s=a[0];return s.type===20&&s.value==="none"?[]:a}},hk={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(t,a){if(a.length===0)return null;var s=a[0];if(s.type===20&&s.value==="none")return null;for(var i=[],o=a.filter(Aj),l=0;l<o.length;l++){var d=o[l],u=o[l+1];if(d.type===20){var A=u&&Kd(u)?u.number:1;i.push({counter:d.value,increment:A})}}return i}},pk={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(t,a){if(a.length===0)return[];for(var s=[],i=a.filter(Aj),o=0;o<i.length;o++){var l=i[o],d=i[o+1];if(Is(l)&&l.value!=="none"){var u=d&&Kd(d)?d.number:0;s.push({counter:l.value,reset:u})}}return s}},mk={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(t,a){return a.filter(xu).map(function(s){return Sj.parse(t,s)})}},fk={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(t,a){if(a.length===0)return null;var s=a[0];if(s.type===20&&s.value==="none")return null;var i=[],o=a.filter(OS);if(o.length%2!==0)return null;for(var l=0;l<o.length;l+=2){var d=o[l].value,u=o[l+1].value;i.push({open:d,close:u})}return i}},eb=function(t,a,s){if(!t)return"";var i=t[Math.min(a,t.length-1)];return i?s?i.open:i.close:""},gk={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,a){return a.length===1&&bg(a[0],"none")?[]:Vo(a).map(function(s){for(var i={color:255,offsetX:yi,offsetY:yi,blur:yi,spread:yi,inset:!1},o=0,l=0;l<s.length;l++){var d=s[l];bg(d,"inset")?i.inset=!0:uc(d)?(o===0?i.offsetX=d:o===1?i.offsetY=d:o===2?i.blur=d:i.spread=d,o++):i.color=cc.parse(t,d)}return i})}},xk={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(t,a){var s=[0,1,2],i=[];return a.filter(Is).forEach(function(o){switch(o.value){case"stroke":i.push(1);break;case"fill":i.push(0);break;case"markers":i.push(2);break}}),s.forEach(function(o){i.indexOf(o)===-1&&i.push(o)}),i}},yk={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},vk={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(t,a){return xu(a)?a.number:0}},bk=function(){function t(a,s){var i,o;this.animationDuration=oa(a,mk,s.animationDuration),this.backgroundClip=oa(a,KS,s.backgroundClip),this.backgroundColor=oa(a,GS,s.backgroundColor),this.backgroundImage=oa(a,a4,s.backgroundImage),this.backgroundOrigin=oa(a,s4,s.backgroundOrigin),this.backgroundPosition=oa(a,n4,s.backgroundPosition),this.backgroundRepeat=oa(a,i4,s.backgroundRepeat),this.backgroundSize=oa(a,o4,s.backgroundSize),this.borderTopColor=oa(a,c4,s.borderTopColor),this.borderRightColor=oa(a,d4,s.borderRightColor),this.borderBottomColor=oa(a,A4,s.borderBottomColor),this.borderLeftColor=oa(a,u4,s.borderLeftColor),this.borderTopLeftRadius=oa(a,h4,s.borderTopLeftRadius),this.borderTopRightRadius=oa(a,p4,s.borderTopRightRadius),this.borderBottomRightRadius=oa(a,m4,s.borderBottomRightRadius),this.borderBottomLeftRadius=oa(a,f4,s.borderBottomLeftRadius),this.borderTopStyle=oa(a,g4,s.borderTopStyle),this.borderRightStyle=oa(a,x4,s.borderRightStyle),this.borderBottomStyle=oa(a,y4,s.borderBottomStyle),this.borderLeftStyle=oa(a,v4,s.borderLeftStyle),this.borderTopWidth=oa(a,b4,s.borderTopWidth),this.borderRightWidth=oa(a,j4,s.borderRightWidth),this.borderBottomWidth=oa(a,w4,s.borderBottomWidth),this.borderLeftWidth=oa(a,_4,s.borderLeftWidth),this.boxShadow=oa(a,gk,s.boxShadow),this.color=oa(a,N4,s.color),this.direction=oa(a,B4,s.direction),this.display=oa(a,C4,s.display),this.float=oa(a,k4,s.cssFloat),this.fontFamily=oa(a,ok,s.fontFamily),this.fontSize=oa(a,lk,s.fontSize),this.fontStyle=oa(a,Ak,s.fontStyle),this.fontVariant=oa(a,dk,s.fontVariant),this.fontWeight=oa(a,ck,s.fontWeight),this.letterSpacing=oa(a,F4,s.letterSpacing),this.lineBreak=oa(a,E4,s.lineBreak),this.lineHeight=oa(a,U4,s.lineHeight),this.listStyleImage=oa(a,L4,s.listStyleImage),this.listStylePosition=oa(a,T4,s.listStylePosition),this.listStyleType=oa(a,jg,s.listStyleType),this.marginTop=oa(a,Q4,s.marginTop),this.marginRight=oa(a,R4,s.marginRight),this.marginBottom=oa(a,D4,s.marginBottom),this.marginLeft=oa(a,I4,s.marginLeft),this.opacity=oa(a,nk,s.opacity);var l=oa(a,P4,s.overflow);this.overflowX=l[0],this.overflowY=l[l.length>1?1:0],this.overflowWrap=oa(a,H4,s.overflowWrap),this.paddingTop=oa(a,M4,s.paddingTop),this.paddingRight=oa(a,O4,s.paddingRight),this.paddingBottom=oa(a,z4,s.paddingBottom),this.paddingLeft=oa(a,q4,s.paddingLeft),this.paintOrder=oa(a,xk,s.paintOrder),this.position=oa(a,G4,s.position),this.textAlign=oa(a,K4,s.textAlign),this.textDecorationColor=oa(a,ik,(i=s.textDecorationColor)!==null&&i!==void 0?i:s.color),this.textDecorationLine=oa(a,rk,(o=s.textDecorationLine)!==null&&o!==void 0?o:s.textDecoration),this.textShadow=oa(a,V4,s.textShadow),this.textTransform=oa(a,$4,s.textTransform),this.transform=oa(a,W4,s.transform),this.transformOrigin=oa(a,ek,s.transformOrigin),this.visibility=oa(a,tk,s.visibility),this.webkitTextStrokeColor=oa(a,yk,s.webkitTextStrokeColor),this.webkitTextStrokeWidth=oa(a,vk,s.webkitTextStrokeWidth),this.wordBreak=oa(a,ak,s.wordBreak),this.zIndex=oa(a,sk,s.zIndex)}return t.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},t.prototype.isTransparent=function(){return dc(this.backgroundColor)},t.prototype.isTransformed=function(){return this.transform!==null},t.prototype.isPositioned=function(){return this.position!==0},t.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},t.prototype.isFloating=function(){return this.float!==0},t.prototype.isInlineLevel=function(){return Jn(this.display,4)||Jn(this.display,33554432)||Jn(this.display,268435456)||Jn(this.display,536870912)||Jn(this.display,67108864)||Jn(this.display,134217728)},t}(),jk=function(){function t(a,s){this.content=oa(a,uk,s.content),this.quotes=oa(a,fk,s.quotes)}return t}(),tb=function(){function t(a,s){this.counterIncrement=oa(a,hk,s.counterIncrement),this.counterReset=oa(a,pk,s.counterReset)}return t}(),oa=function(t,a,s){var i=new cj,o=s!==null&&typeof s<"u"?s.toString():a.initialValue;i.write(o);var l=new dj(i.read());switch(a.type){case 2:var d=l.parseComponentValue();return a.parse(t,Is(d)?d.value:a.initialValue);case 0:return a.parse(t,l.parseComponentValue());case 1:return a.parse(t,l.parseComponentValues());case 4:return l.parseComponentValue();case 3:switch(a.format){case"angle":return Ep.parse(t,l.parseComponentValue());case"color":return cc.parse(t,l.parseComponentValue());case"image":return Yg.parse(t,l.parseComponentValue());case"length":var u=l.parseComponentValue();return uc(u)?u:yi;case"length-percentage":var A=l.parseComponentValue();return qn(A)?A:yi;case"time":return Sj.parse(t,l.parseComponentValue())}break}},wk="data-html2canvas-debug",_k=function(t){var a=t.getAttribute(wk);switch(a){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},wg=function(t,a){var s=_k(t);return s===1||a===s},$o=function(){function t(a,s){if(this.context=a,this.textNodes=[],this.elements=[],this.flags=0,wg(s,3))debugger;this.styles=new bk(a,window.getComputedStyle(s,null)),Bg(s)&&(this.styles.animationDuration.some(function(i){return i>0})&&(s.style.animationDuration="0s"),this.styles.transform!==null&&(s.style.transform="none")),this.bounds=kp(this.context,s),wg(s,4)&&(this.flags|=16)}return t}(),Nk="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",ab="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",KA=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Gh=0;Gh<ab.length;Gh++)KA[ab.charCodeAt(Gh)]=Gh;var Bk=function(t){var a=t.length*.75,s=t.length,i,o=0,l,d,u,A;t[t.length-1]==="="&&(a--,t[t.length-2]==="="&&a--);var p=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(a):new Array(a),m=Array.isArray(p)?p:new Uint8Array(p);for(i=0;i<s;i+=4)l=KA[t.charCodeAt(i)],d=KA[t.charCodeAt(i+1)],u=KA[t.charCodeAt(i+2)],A=KA[t.charCodeAt(i+3)],m[o++]=l<<2|d>>4,m[o++]=(d&15)<<4|u>>2,m[o++]=(u&3)<<6|A&63;return p},Ck=function(t){for(var a=t.length,s=[],i=0;i<a;i+=2)s.push(t[i+1]<<8|t[i]);return s},Sk=function(t){for(var a=t.length,s=[],i=0;i<a;i+=4)s.push(t[i+3]<<24|t[i+2]<<16|t[i+1]<<8|t[i]);return s},zc=5,Jg=11,Uf=2,kk=Jg-zc,kj=65536>>zc,Fk=1<<zc,Lf=Fk-1,Ek=1024>>zc,Uk=kj+Ek,Lk=Uk,Tk=32,Qk=Lk+Tk,Rk=65536>>Jg,Dk=1<<kk,Ik=Dk-1,sb=function(t,a,s){return t.slice?t.slice(a,s):new Uint16Array(Array.prototype.slice.call(t,a,s))},Pk=function(t,a,s){return t.slice?t.slice(a,s):new Uint32Array(Array.prototype.slice.call(t,a,s))},Hk=function(t,a){var s=Bk(t),i=Array.isArray(s)?Sk(s):new Uint32Array(s),o=Array.isArray(s)?Ck(s):new Uint16Array(s),l=24,d=sb(o,l/2,i[4]/2),u=i[5]===2?sb(o,(l+i[4])/2):Pk(i,Math.ceil((l+i[4])/4));return new Mk(i[0],i[1],i[2],i[3],d,u)},Mk=function(){function t(a,s,i,o,l,d){this.initialValue=a,this.errorValue=s,this.highStart=i,this.highValueIndex=o,this.index=l,this.data=d}return t.prototype.get=function(a){var s;if(a>=0){if(a<55296||a>56319&&a<=65535)return s=this.index[a>>zc],s=(s<<Uf)+(a&Lf),this.data[s];if(a<=65535)return s=this.index[kj+(a-55296>>zc)],s=(s<<Uf)+(a&Lf),this.data[s];if(a<this.highStart)return s=Qk-Rk+(a>>Jg),s=this.index[s],s+=a>>zc&Ik,s=this.index[s],s=(s<<Uf)+(a&Lf),this.data[s];if(a<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t}(),nb="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ok=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Vh=0;Vh<nb.length;Vh++)Ok[nb.charCodeAt(Vh)]=Vh;var zk=1,Tf=2,Qf=3,ib=4,rb=5,qk=7,ob=8,Rf=9,Df=10,lb=11,cb=12,db=13,Ab=14,If=15,Kk=function(t){for(var a=[],s=0,i=t.length;s<i;){var o=t.charCodeAt(s++);if(o>=55296&&o<=56319&&s<i){var l=t.charCodeAt(s++);(l&64512)===56320?a.push(((o&1023)<<10)+(l&1023)+65536):(a.push(o),s--)}else a.push(o)}return a},Gk=function(){for(var t=[],a=0;a<arguments.length;a++)t[a]=arguments[a];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var s=t.length;if(!s)return"";for(var i=[],o=-1,l="";++o<s;){var d=t[o];d<=65535?i.push(d):(d-=65536,i.push((d>>10)+55296,d%1024+56320)),(o+1===s||i.length>16384)&&(l+=String.fromCharCode.apply(String,i),i.length=0)}return l},Vk=Hk(Nk),Gr="",Pf="",$k=function(t){return Vk.get(t)},Wk=function(t,a,s){var i=s-2,o=a[i],l=a[s-1],d=a[s];if(l===Tf&&d===Qf)return Gr;if(l===Tf||l===Qf||l===ib||d===Tf||d===Qf||d===ib)return Pf;if(l===ob&&[ob,Rf,lb,cb].indexOf(d)!==-1||(l===lb||l===Rf)&&(d===Rf||d===Df)||(l===cb||l===Df)&&d===Df||d===db||d===rb||d===qk||l===zk)return Gr;if(l===db&&d===Ab){for(;o===rb;)o=a[--i];if(o===Ab)return Gr}if(l===If&&d===If){for(var u=0;o===If;)u++,o=a[--i];if(u%2===0)return Gr}return Pf},Yk=function(t){var a=Kk(t),s=a.length,i=0,o=0,l=a.map($k);return{next:function(){if(i>=s)return{done:!0,value:null};for(var d=Gr;i<s&&(d=Wk(a,l,++i))===Gr;);if(d!==Gr||i===s){var u=Gk.apply(null,a.slice(o,i));return o=i,{value:u,done:!1}}return{done:!0,value:null}}}},Jk=function(t){for(var a=Yk(t),s=[],i;!(i=a.next()).done;)i.value&&s.push(i.value.slice());return s},Xk=function(t){var a=123;if(t.createRange){var s=t.createRange();if(s.getBoundingClientRect){var i=t.createElement("boundtest");i.style.height=a+"px",i.style.display="block",t.body.appendChild(i),s.selectNode(i);var o=s.getBoundingClientRect(),l=Math.round(o.height);if(t.body.removeChild(i),l===a)return!0}}return!1},Zk=function(t){var a=t.createElement("boundtest");a.style.width="50px",a.style.display="block",a.style.fontSize="12px",a.style.letterSpacing="0px",a.style.wordSpacing="0px",t.body.appendChild(a);var s=t.createRange();a.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var i=a.firstChild,o=Fp(i.data).map(function(A){return Dn(A)}),l=0,d={},u=o.every(function(A,p){s.setStart(i,l),s.setEnd(i,l+A.length);var m=s.getBoundingClientRect();l+=A.length;var b=m.x>d.x||m.y>d.y;return d=m,p===0?!0:b});return t.body.removeChild(a),u},e3=function(){return typeof new Image().crossOrigin<"u"},t3=function(){return typeof new XMLHttpRequest().responseType=="string"},a3=function(t){var a=new Image,s=t.createElement("canvas"),i=s.getContext("2d");if(!i)return!1;a.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{i.drawImage(a,0,0),s.toDataURL()}catch{return!1}return!0},ub=function(t){return t[0]===0&&t[1]===255&&t[2]===0&&t[3]===255},s3=function(t){var a=t.createElement("canvas"),s=100;a.width=s,a.height=s;var i=a.getContext("2d");if(!i)return Promise.reject(!1);i.fillStyle="rgb(0, 255, 0)",i.fillRect(0,0,s,s);var o=new Image,l=a.toDataURL();o.src=l;var d=_g(s,s,0,0,o);return i.fillStyle="red",i.fillRect(0,0,s,s),hb(d).then(function(u){i.drawImage(u,0,0);var A=i.getImageData(0,0,s,s).data;i.fillStyle="red",i.fillRect(0,0,s,s);var p=t.createElement("div");return p.style.backgroundImage="url("+l+")",p.style.height=s+"px",ub(A)?hb(_g(s,s,0,0,p)):Promise.reject(!1)}).then(function(u){return i.drawImage(u,0,0),ub(i.getImageData(0,0,s,s).data)}).catch(function(){return!1})},_g=function(t,a,s,i,o){var l="http://www.w3.org/2000/svg",d=document.createElementNS(l,"svg"),u=document.createElementNS(l,"foreignObject");return d.setAttributeNS(null,"width",t.toString()),d.setAttributeNS(null,"height",a.toString()),u.setAttributeNS(null,"width","100%"),u.setAttributeNS(null,"height","100%"),u.setAttributeNS(null,"x",s.toString()),u.setAttributeNS(null,"y",i.toString()),u.setAttributeNS(null,"externalResourcesRequired","true"),d.appendChild(u),u.appendChild(o),d},hb=function(t){return new Promise(function(a,s){var i=new Image;i.onload=function(){return a(i)},i.onerror=s,i.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(t))})},xi={get SUPPORT_RANGE_BOUNDS(){var t=Xk(document);return Object.defineProperty(xi,"SUPPORT_RANGE_BOUNDS",{value:t}),t},get SUPPORT_WORD_BREAKING(){var t=xi.SUPPORT_RANGE_BOUNDS&&Zk(document);return Object.defineProperty(xi,"SUPPORT_WORD_BREAKING",{value:t}),t},get SUPPORT_SVG_DRAWING(){var t=a3(document);return Object.defineProperty(xi,"SUPPORT_SVG_DRAWING",{value:t}),t},get SUPPORT_FOREIGNOBJECT_DRAWING(){var t=typeof Array.from=="function"&&typeof window.fetch=="function"?s3(document):Promise.resolve(!1);return Object.defineProperty(xi,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:t}),t},get SUPPORT_CORS_IMAGES(){var t=e3();return Object.defineProperty(xi,"SUPPORT_CORS_IMAGES",{value:t}),t},get SUPPORT_RESPONSE_TYPE(){var t=t3();return Object.defineProperty(xi,"SUPPORT_RESPONSE_TYPE",{value:t}),t},get SUPPORT_CORS_XHR(){var t="withCredentials"in new XMLHttpRequest;return Object.defineProperty(xi,"SUPPORT_CORS_XHR",{value:t}),t},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var t=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(xi,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:t}),t}},au=function(){function t(a,s){this.text=a,this.bounds=s}return t}(),n3=function(t,a,s,i){var o=o3(a,s),l=[],d=0;return o.forEach(function(u){if(s.textDecorationLine.length||u.trim().length>0)if(xi.SUPPORT_RANGE_BOUNDS){var A=pb(i,d,u.length).getClientRects();if(A.length>1){var p=Xg(u),m=0;p.forEach(function(v){l.push(new au(v,_l.fromDOMRectList(t,pb(i,m+d,v.length).getClientRects()))),m+=v.length})}else l.push(new au(u,_l.fromDOMRectList(t,A)))}else{var b=i.splitText(u.length);l.push(new au(u,i3(t,i))),i=b}else xi.SUPPORT_RANGE_BOUNDS||(i=i.splitText(u.length));d+=u.length}),l},i3=function(t,a){var s=a.ownerDocument;if(s){var i=s.createElement("html2canvaswrapper");i.appendChild(a.cloneNode(!0));var o=a.parentNode;if(o){o.replaceChild(i,a);var l=kp(t,i);return i.firstChild&&o.replaceChild(i.firstChild,i),l}}return _l.EMPTY},pb=function(t,a,s){var i=t.ownerDocument;if(!i)throw new Error("Node has no owner document");var o=i.createRange();return o.setStart(t,a),o.setEnd(t,a+s),o},Xg=function(t){if(xi.SUPPORT_NATIVE_TEXT_SEGMENTATION){var a=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(a.segment(t)).map(function(s){return s.segment})}return Jk(t)},r3=function(t,a){if(xi.SUPPORT_NATIVE_TEXT_SEGMENTATION){var s=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(s.segment(t)).map(function(i){return i.segment})}return c3(t,a)},o3=function(t,a){return a.letterSpacing!==0?Xg(t):r3(t,a)},l3=[32,160,4961,65792,65793,4153,4241],c3=function(t,a){for(var s=RC(t,{lineBreak:a.lineBreak,wordBreak:a.overflowWrap==="break-word"?"break-word":a.wordBreak}),i=[],o,l=function(){if(o.value){var d=o.value.slice(),u=Fp(d),A="";u.forEach(function(p){l3.indexOf(p)===-1?A+=Dn(p):(A.length&&i.push(A),i.push(Dn(p)),A="")}),A.length&&i.push(A)}};!(o=s.next()).done;)l();return i},d3=function(){function t(a,s,i){this.text=A3(s.data,i.textTransform),this.textBounds=n3(a,this.text,i,s)}return t}(),A3=function(t,a){switch(a){case 1:return t.toLowerCase();case 3:return t.replace(u3,h3);case 2:return t.toUpperCase();default:return t}},u3=/(^|\s|:|-|\(|\))([a-z])/g,h3=function(t,a,s){return t.length>0?a+s.toUpperCase():t},Fj=function(t){No(a,t);function a(s,i){var o=t.call(this,s,i)||this;return o.src=i.currentSrc||i.src,o.intrinsicWidth=i.naturalWidth,o.intrinsicHeight=i.naturalHeight,o.context.cache.addImage(o.src),o}return a}($o),Ej=function(t){No(a,t);function a(s,i){var o=t.call(this,s,i)||this;return o.canvas=i,o.intrinsicWidth=i.width,o.intrinsicHeight=i.height,o}return a}($o),Uj=function(t){No(a,t);function a(s,i){var o=t.call(this,s,i)||this,l=new XMLSerializer,d=kp(s,i);return i.setAttribute("width",d.width+"px"),i.setAttribute("height",d.height+"px"),o.svg="data:image/svg+xml,"+encodeURIComponent(l.serializeToString(i)),o.intrinsicWidth=i.width.baseVal.value,o.intrinsicHeight=i.height.baseVal.value,o.context.cache.addImage(o.svg),o}return a}($o),Lj=function(t){No(a,t);function a(s,i){var o=t.call(this,s,i)||this;return o.value=i.value,o}return a}($o),Ng=function(t){No(a,t);function a(s,i){var o=t.call(this,s,i)||this;return o.start=i.start,o.reversed=typeof i.reversed=="boolean"&&i.reversed===!0,o}return a}($o),p3=[{type:15,flags:0,unit:"px",number:3}],m3=[{type:16,flags:0,number:50}],f3=function(t){return t.width>t.height?new _l(t.left+(t.width-t.height)/2,t.top,t.height,t.height):t.width<t.height?new _l(t.left,t.top+(t.height-t.width)/2,t.width,t.width):t},g3=function(t){var a=t.type===x3?new Array(t.value.length+1).join(""):t.value;return a.length===0?t.placeholder||"":a},hp="checkbox",pp="radio",x3="password",mb=707406591,Zg=function(t){No(a,t);function a(s,i){var o=t.call(this,s,i)||this;switch(o.type=i.type.toLowerCase(),o.checked=i.checked,o.value=g3(i),(o.type===hp||o.type===pp)&&(o.styles.backgroundColor=3739148031,o.styles.borderTopColor=o.styles.borderRightColor=o.styles.borderBottomColor=o.styles.borderLeftColor=2779096575,o.styles.borderTopWidth=o.styles.borderRightWidth=o.styles.borderBottomWidth=o.styles.borderLeftWidth=1,o.styles.borderTopStyle=o.styles.borderRightStyle=o.styles.borderBottomStyle=o.styles.borderLeftStyle=1,o.styles.backgroundClip=[0],o.styles.backgroundOrigin=[0],o.bounds=f3(o.bounds)),o.type){case hp:o.styles.borderTopRightRadius=o.styles.borderTopLeftRadius=o.styles.borderBottomRightRadius=o.styles.borderBottomLeftRadius=p3;break;case pp:o.styles.borderTopRightRadius=o.styles.borderTopLeftRadius=o.styles.borderBottomRightRadius=o.styles.borderBottomLeftRadius=m3;break}return o}return a}($o),Tj=function(t){No(a,t);function a(s,i){var o=t.call(this,s,i)||this,l=i.options[i.selectedIndex||0];return o.value=l&&l.text||"",o}return a}($o),Qj=function(t){No(a,t);function a(s,i){var o=t.call(this,s,i)||this;return o.value=i.value,o}return a}($o),Rj=function(t){No(a,t);function a(s,i){var o=t.call(this,s,i)||this;o.src=i.src,o.width=parseInt(i.width,10)||0,o.height=parseInt(i.height,10)||0,o.backgroundColor=o.styles.backgroundColor;try{if(i.contentWindow&&i.contentWindow.document&&i.contentWindow.document.documentElement){o.tree=Ij(s,i.contentWindow.document.documentElement);var l=i.contentWindow.document.documentElement?eu(s,getComputedStyle(i.contentWindow.document.documentElement).backgroundColor):jl.TRANSPARENT,d=i.contentWindow.document.body?eu(s,getComputedStyle(i.contentWindow.document.body).backgroundColor):jl.TRANSPARENT;o.backgroundColor=dc(l)?dc(d)?o.styles.backgroundColor:d:l}}catch{}return o}return a}($o),y3=["OL","UL","MENU"],np=function(t,a,s,i){for(var o=a.firstChild,l=void 0;o;o=l)if(l=o.nextSibling,Pj(o)&&o.data.trim().length>0)s.textNodes.push(new d3(t,o,s.styles));else if(Id(o))if(zj(o)&&o.assignedNodes)o.assignedNodes().forEach(function(u){return np(t,u,s,i)});else{var d=Dj(t,o);d.styles.isVisible()&&(v3(o,d,i)?d.flags|=4:b3(d.styles)&&(d.flags|=2),y3.indexOf(o.tagName)!==-1&&(d.flags|=8),s.elements.push(d),o.slot,o.shadowRoot?np(t,o.shadowRoot,d,i):!mp(o)&&!Hj(o)&&!fp(o)&&np(t,o,d,i))}},Dj=function(t,a){return Cg(a)?new Fj(t,a):Mj(a)?new Ej(t,a):Hj(a)?new Uj(t,a):j3(a)?new Lj(t,a):w3(a)?new Ng(t,a):_3(a)?new Zg(t,a):fp(a)?new Tj(t,a):mp(a)?new Qj(t,a):Oj(a)?new Rj(t,a):new $o(t,a)},Ij=function(t,a){var s=Dj(t,a);return s.flags|=4,np(t,a,s,s),s},v3=function(t,a,s){return a.styles.isPositionedWithZIndex()||a.styles.opacity<1||a.styles.isTransformed()||ex(t)&&s.styles.isTransparent()},b3=function(t){return t.isPositioned()||t.isFloating()},Pj=function(t){return t.nodeType===Node.TEXT_NODE},Id=function(t){return t.nodeType===Node.ELEMENT_NODE},Bg=function(t){return Id(t)&&typeof t.style<"u"&&!ip(t)},ip=function(t){return typeof t.className=="object"},j3=function(t){return t.tagName==="LI"},w3=function(t){return t.tagName==="OL"},_3=function(t){return t.tagName==="INPUT"},N3=function(t){return t.tagName==="HTML"},Hj=function(t){return t.tagName==="svg"},ex=function(t){return t.tagName==="BODY"},Mj=function(t){return t.tagName==="CANVAS"},fb=function(t){return t.tagName==="VIDEO"},Cg=function(t){return t.tagName==="IMG"},Oj=function(t){return t.tagName==="IFRAME"},gb=function(t){return t.tagName==="STYLE"},B3=function(t){return t.tagName==="SCRIPT"},mp=function(t){return t.tagName==="TEXTAREA"},fp=function(t){return t.tagName==="SELECT"},zj=function(t){return t.tagName==="SLOT"},xb=function(t){return t.tagName.indexOf("-")>0},C3=function(){function t(){this.counters={}}return t.prototype.getCounterValue=function(a){var s=this.counters[a];return s&&s.length?s[s.length-1]:1},t.prototype.getCounterValues=function(a){var s=this.counters[a];return s||[]},t.prototype.pop=function(a){var s=this;a.forEach(function(i){return s.counters[i].pop()})},t.prototype.parse=function(a){var s=this,i=a.counterIncrement,o=a.counterReset,l=!0;i!==null&&i.forEach(function(u){var A=s.counters[u.counter];A&&u.increment!==0&&(l=!1,A.length||A.push(1),A[Math.max(0,A.length-1)]+=u.increment)});var d=[];return l&&o.forEach(function(u){var A=s.counters[u.counter];d.push(u.counter),A||(A=s.counters[u.counter]=[]),A.push(u.reset)}),d},t}(),yb={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},vb={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},S3={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},k3={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},Ed=function(t,a,s,i,o,l){return t<a||t>s?du(t,o,l.length>0):i.integers.reduce(function(d,u,A){for(;t>=u;)t-=u,d+=i.values[A];return d},"")+l},qj=function(t,a,s,i){var o="";do s||t--,o=i(t)+o,t/=a;while(t*a>=a);return o},Rn=function(t,a,s,i,o){var l=s-a+1;return(t<0?"-":"")+(qj(Math.abs(t),l,i,function(d){return Dn(Math.floor(d%l)+a)})+o)},Lc=function(t,a,s){s===void 0&&(s=". ");var i=a.length;return qj(Math.abs(t),i,!1,function(o){return a[Math.floor(o%i)]})+s},Rd=1,ec=2,tc=4,GA=8,xl=function(t,a,s,i,o,l){if(t<-9999||t>9999)return du(t,4,o.length>0);var d=Math.abs(t),u=o;if(d===0)return a[0]+u;for(var A=0;d>0&&A<=4;A++){var p=d%10;p===0&&Jn(l,Rd)&&u!==""?u=a[p]+u:p>1||p===1&&A===0||p===1&&A===1&&Jn(l,ec)||p===1&&A===1&&Jn(l,tc)&&t>100||p===1&&A>1&&Jn(l,GA)?u=a[p]+(A>0?s[A-1]:"")+u:p===1&&A>0&&(u=s[A-1]+u),d=Math.floor(d/10)}return(t<0?i:"")+u},bb="",jb="",wb="",Hf="",du=function(t,a,s){var i=s?". ":"",o=s?"":"",l=s?", ":"",d=s?" ":"";switch(a){case 0:return""+d;case 1:return""+d;case 2:return""+d;case 5:var u=Rn(t,48,57,!0,i);return u.length<4?"0"+u:u;case 4:return Lc(t,"",o);case 6:return Ed(t,1,3999,yb,3,i).toLowerCase();case 7:return Ed(t,1,3999,yb,3,i);case 8:return Rn(t,945,969,!1,i);case 9:return Rn(t,97,122,!1,i);case 10:return Rn(t,65,90,!1,i);case 11:return Rn(t,1632,1641,!0,i);case 12:case 49:return Ed(t,1,9999,vb,3,i);case 35:return Ed(t,1,9999,vb,3,i).toLowerCase();case 13:return Rn(t,2534,2543,!0,i);case 14:case 30:return Rn(t,6112,6121,!0,i);case 15:return Lc(t,"",o);case 16:return Lc(t,"",o);case 17:case 48:return xl(t,"",bb,"",o,ec|tc|GA);case 47:return xl(t,"",jb,"",o,Rd|ec|tc|GA);case 42:return xl(t,"",bb,"",o,ec|tc|GA);case 41:return xl(t,"",jb,"",o,Rd|ec|tc|GA);case 26:return xl(t,"","",wb,o,0);case 25:return xl(t,"","",wb,o,Rd|ec|tc);case 31:return xl(t,"","",Hf,l,Rd|ec|tc);case 33:return xl(t,"","",Hf,l,0);case 32:return xl(t,"","",Hf,l,Rd|ec|tc);case 18:return Rn(t,2406,2415,!0,i);case 20:return Ed(t,1,19999,k3,3,i);case 21:return Rn(t,2790,2799,!0,i);case 22:return Rn(t,2662,2671,!0,i);case 22:return Ed(t,1,10999,S3,3,i);case 23:return Lc(t,"");case 24:return Lc(t,"");case 27:return Rn(t,3302,3311,!0,i);case 28:return Lc(t,"",o);case 29:return Lc(t,"",o);case 34:return Rn(t,3792,3801,!0,i);case 37:return Rn(t,6160,6169,!0,i);case 38:return Rn(t,4160,4169,!0,i);case 39:return Rn(t,2918,2927,!0,i);case 40:return Rn(t,1776,1785,!0,i);case 43:return Rn(t,3046,3055,!0,i);case 44:return Rn(t,3174,3183,!0,i);case 45:return Rn(t,3664,3673,!0,i);case 46:return Rn(t,3872,3881,!0,i);case 3:default:return Rn(t,48,57,!0,i)}},Kj="data-html2canvas-ignore",_b=function(){function t(a,s,i){if(this.context=a,this.options=i,this.scrolledElements=[],this.referenceElement=s,this.counters=new C3,this.quoteDepth=0,!s.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(s.ownerDocument.documentElement,!1)}return t.prototype.toIFrame=function(a,s){var i=this,o=F3(a,s);if(!o.contentWindow)return Promise.reject("Unable to find iframe window");var l=a.defaultView.pageXOffset,d=a.defaultView.pageYOffset,u=o.contentWindow,A=u.document,p=L3(o).then(function(){return Vi(i,void 0,void 0,function(){var m,b;return Ti(this,function(v){switch(v.label){case 0:return this.scrolledElements.forEach(D3),u&&(u.scrollTo(s.left,s.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(u.scrollY!==s.top||u.scrollX!==s.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(u.scrollX-s.left,u.scrollY-s.top,0,0))),m=this.options.onclone,b=this.clonedReferenceElement,typeof b>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:A.fonts&&A.fonts.ready?[4,A.fonts.ready]:[3,2];case 1:v.sent(),v.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,U3(A)]:[3,4];case 3:v.sent(),v.label=4;case 4:return typeof m=="function"?[2,Promise.resolve().then(function(){return m(A,b)}).then(function(){return o})]:[2,o]}})})});return A.open(),A.write(Q3(document.doctype)+"<html></html>"),R3(this.referenceElement.ownerDocument,l,d),A.replaceChild(A.adoptNode(this.documentElement),A.documentElement),A.close(),p},t.prototype.createElementClone=function(a){if(wg(a,2))debugger;if(Mj(a))return this.createCanvasClone(a);if(fb(a))return this.createVideoClone(a);if(gb(a))return this.createStyleClone(a);var s=a.cloneNode(!1);return Cg(s)&&(Cg(a)&&a.currentSrc&&a.currentSrc!==a.src&&(s.src=a.currentSrc,s.srcset=""),s.loading==="lazy"&&(s.loading="eager")),xb(s)?this.createCustomElementClone(s):s},t.prototype.createCustomElementClone=function(a){var s=document.createElement("html2canvascustomelement");return Mf(a.style,s),s},t.prototype.createStyleClone=function(a){try{var s=a.sheet;if(s&&s.cssRules){var i=[].slice.call(s.cssRules,0).reduce(function(l,d){return d&&typeof d.cssText=="string"?l+d.cssText:l},""),o=a.cloneNode(!1);return o.textContent=i,o}}catch(l){if(this.context.logger.error("Unable to access cssRules property",l),l.name!=="SecurityError")throw l}return a.cloneNode(!1)},t.prototype.createCanvasClone=function(a){var s;if(this.options.inlineImages&&a.ownerDocument){var i=a.ownerDocument.createElement("img");try{return i.src=a.toDataURL(),i}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",a)}}var o=a.cloneNode(!1);try{o.width=a.width,o.height=a.height;var l=a.getContext("2d"),d=o.getContext("2d");if(d)if(!this.options.allowTaint&&l)d.putImageData(l.getImageData(0,0,a.width,a.height),0,0);else{var u=(s=a.getContext("webgl2"))!==null&&s!==void 0?s:a.getContext("webgl");if(u){var A=u.getContextAttributes();A?.preserveDrawingBuffer===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",a)}d.drawImage(a,0,0)}return o}catch{this.context.logger.info("Unable to clone canvas as it is tainted",a)}return o},t.prototype.createVideoClone=function(a){var s=a.ownerDocument.createElement("canvas");s.width=a.offsetWidth,s.height=a.offsetHeight;var i=s.getContext("2d");try{return i&&(i.drawImage(a,0,0,s.width,s.height),this.options.allowTaint||i.getImageData(0,0,s.width,s.height)),s}catch{this.context.logger.info("Unable to clone video as it is tainted",a)}var o=a.ownerDocument.createElement("canvas");return o.width=a.offsetWidth,o.height=a.offsetHeight,o},t.prototype.appendChildNode=function(a,s,i){(!Id(s)||!B3(s)&&!s.hasAttribute(Kj)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(s)))&&(!this.options.copyStyles||!Id(s)||!gb(s))&&a.appendChild(this.cloneNode(s,i))},t.prototype.cloneChildNodes=function(a,s,i){for(var o=this,l=a.shadowRoot?a.shadowRoot.firstChild:a.firstChild;l;l=l.nextSibling)if(Id(l)&&zj(l)&&typeof l.assignedNodes=="function"){var d=l.assignedNodes();d.length&&d.forEach(function(u){return o.appendChildNode(s,u,i)})}else this.appendChildNode(s,l,i)},t.prototype.cloneNode=function(a,s){if(Pj(a))return document.createTextNode(a.data);if(!a.ownerDocument)return a.cloneNode(!1);var i=a.ownerDocument.defaultView;if(i&&Id(a)&&(Bg(a)||ip(a))){var o=this.createElementClone(a);o.style.transitionProperty="none";var l=i.getComputedStyle(a),d=i.getComputedStyle(a,":before"),u=i.getComputedStyle(a,":after");this.referenceElement===a&&Bg(o)&&(this.clonedReferenceElement=o),ex(o)&&H3(o);var A=this.counters.parse(new tb(this.context,l)),p=this.resolvePseudoContent(a,o,d,su.BEFORE);xb(a)&&(s=!0),fb(a)||this.cloneChildNodes(a,o,s),p&&o.insertBefore(p,o.firstChild);var m=this.resolvePseudoContent(a,o,u,su.AFTER);return m&&o.appendChild(m),this.counters.pop(A),(l&&(this.options.copyStyles||ip(a))&&!Oj(a)||s)&&Mf(l,o),(a.scrollTop!==0||a.scrollLeft!==0)&&this.scrolledElements.push([o,a.scrollLeft,a.scrollTop]),(mp(a)||fp(a))&&(mp(o)||fp(o))&&(o.value=a.value),o}return a.cloneNode(!1)},t.prototype.resolvePseudoContent=function(a,s,i,o){var l=this;if(i){var d=i.content,u=s.ownerDocument;if(!(!u||!d||d==="none"||d==="-moz-alt-content"||i.display==="none")){this.counters.parse(new tb(this.context,i));var A=new jk(this.context,i),p=u.createElement("html2canvaspseudoelement");Mf(i,p),A.content.forEach(function(b){if(b.type===0)p.appendChild(u.createTextNode(b.value));else if(b.type===22){var v=u.createElement("img");v.src=b.value,v.style.opacity="1",p.appendChild(v)}else if(b.type===18){if(b.name==="attr"){var x=b.values.filter(Is);x.length&&p.appendChild(u.createTextNode(a.getAttribute(x[0].value)||""))}else if(b.name==="counter"){var C=b.values.filter(Hd),D=C[0],S=C[1];if(D&&Is(D)){var _=l.counters.getCounterValue(D.value),N=S&&Is(S)?jg.parse(l.context,S.value):3;p.appendChild(u.createTextNode(du(_,N,!1)))}}else if(b.name==="counters"){var O=b.values.filter(Hd),D=O[0],L=O[1],S=O[2];if(D&&Is(D)){var te=l.counters.getCounterValues(D.value),G=S&&Is(S)?jg.parse(l.context,S.value):3,X=L&&L.type===0?L.value:"",U=te.map(function(T){return du(T,G,!1)}).join(X);p.appendChild(u.createTextNode(U))}}}else if(b.type===20)switch(b.value){case"open-quote":p.appendChild(u.createTextNode(eb(A.quotes,l.quoteDepth++,!0)));break;case"close-quote":p.appendChild(u.createTextNode(eb(A.quotes,--l.quoteDepth,!1)));break;default:p.appendChild(u.createTextNode(b.value))}}),p.className=Sg+" "+kg;var m=o===su.BEFORE?" "+Sg:" "+kg;return ip(s)?s.className.baseValue+=m:s.className+=m,p}}},t.destroy=function(a){return a.parentNode?(a.parentNode.removeChild(a),!0):!1},t}(),su;(function(t){t[t.BEFORE=0]="BEFORE",t[t.AFTER=1]="AFTER"})(su||(su={}));var F3=function(t,a){var s=t.createElement("iframe");return s.className="html2canvas-container",s.style.visibility="hidden",s.style.position="fixed",s.style.left="-10000px",s.style.top="0px",s.style.border="0",s.width=a.width.toString(),s.height=a.height.toString(),s.scrolling="no",s.setAttribute(Kj,"true"),t.body.appendChild(s),s},E3=function(t){return new Promise(function(a){if(t.complete){a();return}if(!t.src){a();return}t.onload=a,t.onerror=a})},U3=function(t){return Promise.all([].slice.call(t.images,0).map(E3))},L3=function(t){return new Promise(function(a,s){var i=t.contentWindow;if(!i)return s("No window assigned for iframe");var o=i.document;i.onload=t.onload=function(){i.onload=t.onload=null;var l=setInterval(function(){o.body.childNodes.length>0&&o.readyState==="complete"&&(clearInterval(l),a(t))},50)}})},T3=["all","d","content"],Mf=function(t,a){for(var s=t.length-1;s>=0;s--){var i=t.item(s);T3.indexOf(i)===-1&&a.style.setProperty(i,t.getPropertyValue(i))}return a},Q3=function(t){var a="";return t&&(a+="<!DOCTYPE ",t.name&&(a+=t.name),t.internalSubset&&(a+=t.internalSubset),t.publicId&&(a+='"'+t.publicId+'"'),t.systemId&&(a+='"'+t.systemId+'"'),a+=">"),a},R3=function(t,a,s){t&&t.defaultView&&(a!==t.defaultView.pageXOffset||s!==t.defaultView.pageYOffset)&&t.defaultView.scrollTo(a,s)},D3=function(t){var a=t[0],s=t[1],i=t[2];a.scrollLeft=s,a.scrollTop=i},I3=":before",P3=":after",Sg="___html2canvas___pseudoelement_before",kg="___html2canvas___pseudoelement_after",Nb=`{
    content: "" !important;
    display: none !important;
}`,H3=function(t){M3(t,"."+Sg+I3+Nb+`
         .`+kg+P3+Nb)},M3=function(t,a){var s=t.ownerDocument;if(s){var i=s.createElement("style");i.textContent=a,t.appendChild(i)}},Gj=function(){function t(){}return t.getOrigin=function(a){var s=t._link;return s?(s.href=a,s.href=s.href,s.protocol+s.hostname+s.port):"about:blank"},t.isSameOrigin=function(a){return t.getOrigin(a)===t._origin},t.setContext=function(a){t._link=a.document.createElement("a"),t._origin=t.getOrigin(a.location.href)},t._origin="about:blank",t}(),O3=function(){function t(a,s){this.context=a,this._options=s,this._cache={}}return t.prototype.addImage=function(a){var s=Promise.resolve();return this.has(a)||(zf(a)||G3(a))&&(this._cache[a]=this.loadImage(a)).catch(function(){}),s},t.prototype.match=function(a){return this._cache[a]},t.prototype.loadImage=function(a){return Vi(this,void 0,void 0,function(){var s,i,o,l,d=this;return Ti(this,function(u){switch(u.label){case 0:return s=Gj.isSameOrigin(a),i=!Of(a)&&this._options.useCORS===!0&&xi.SUPPORT_CORS_IMAGES&&!s,o=!Of(a)&&!s&&!zf(a)&&typeof this._options.proxy=="string"&&xi.SUPPORT_CORS_XHR&&!i,!s&&this._options.allowTaint===!1&&!Of(a)&&!zf(a)&&!o&&!i?[2]:(l=a,o?[4,this.proxy(l)]:[3,2]);case 1:l=u.sent(),u.label=2;case 2:return this.context.logger.debug("Added image "+a.substring(0,256)),[4,new Promise(function(A,p){var m=new Image;m.onload=function(){return A(m)},m.onerror=p,(V3(l)||i)&&(m.crossOrigin="anonymous"),m.src=l,m.complete===!0&&setTimeout(function(){return A(m)},500),d._options.imageTimeout>0&&setTimeout(function(){return p("Timed out ("+d._options.imageTimeout+"ms) loading image")},d._options.imageTimeout)})];case 3:return[2,u.sent()]}})})},t.prototype.has=function(a){return typeof this._cache[a]<"u"},t.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},t.prototype.proxy=function(a){var s=this,i=this._options.proxy;if(!i)throw new Error("No proxy defined");var o=a.substring(0,256);return new Promise(function(l,d){var u=xi.SUPPORT_RESPONSE_TYPE?"blob":"text",A=new XMLHttpRequest;A.onload=function(){if(A.status===200)if(u==="text")l(A.response);else{var b=new FileReader;b.addEventListener("load",function(){return l(b.result)},!1),b.addEventListener("error",function(v){return d(v)},!1),b.readAsDataURL(A.response)}else d("Failed to proxy resource "+o+" with status code "+A.status)},A.onerror=d;var p=i.indexOf("?")>-1?"&":"?";if(A.open("GET",""+i+p+"url="+encodeURIComponent(a)+"&responseType="+u),u!=="text"&&A instanceof XMLHttpRequest&&(A.responseType=u),s._options.imageTimeout){var m=s._options.imageTimeout;A.timeout=m,A.ontimeout=function(){return d("Timed out ("+m+"ms) proxying "+o)}}A.send()})},t}(),z3=/^data:image\/svg\+xml/i,q3=/^data:image\/.*;base64,/i,K3=/^data:image\/.*/i,G3=function(t){return xi.SUPPORT_SVG_DRAWING||!$3(t)},Of=function(t){return K3.test(t)},V3=function(t){return q3.test(t)},zf=function(t){return t.substr(0,4)==="blob"},$3=function(t){return t.substr(-3).toLowerCase()==="svg"||z3.test(t)},sa=function(){function t(a,s){this.type=0,this.x=a,this.y=s}return t.prototype.add=function(a,s){return new t(this.x+a,this.y+s)},t}(),Ud=function(t,a,s){return new sa(t.x+(a.x-t.x)*s,t.y+(a.y-t.y)*s)},$h=function(){function t(a,s,i,o){this.type=1,this.start=a,this.startControl=s,this.endControl=i,this.end=o}return t.prototype.subdivide=function(a,s){var i=Ud(this.start,this.startControl,a),o=Ud(this.startControl,this.endControl,a),l=Ud(this.endControl,this.end,a),d=Ud(i,o,a),u=Ud(o,l,a),A=Ud(d,u,a);return s?new t(this.start,i,d,A):new t(A,u,l,this.end)},t.prototype.add=function(a,s){return new t(this.start.add(a,s),this.startControl.add(a,s),this.endControl.add(a,s),this.end.add(a,s))},t.prototype.reverse=function(){return new t(this.end,this.endControl,this.startControl,this.start)},t}(),Vr=function(t){return t.type===1},W3=function(){function t(a){var s=a.styles,i=a.bounds,o=qA(s.borderTopLeftRadius,i.width,i.height),l=o[0],d=o[1],u=qA(s.borderTopRightRadius,i.width,i.height),A=u[0],p=u[1],m=qA(s.borderBottomRightRadius,i.width,i.height),b=m[0],v=m[1],x=qA(s.borderBottomLeftRadius,i.width,i.height),C=x[0],D=x[1],S=[];S.push((l+A)/i.width),S.push((C+b)/i.width),S.push((d+D)/i.height),S.push((p+v)/i.height);var _=Math.max.apply(Math,S);_>1&&(l/=_,d/=_,A/=_,p/=_,b/=_,v/=_,C/=_,D/=_);var N=i.width-A,O=i.height-v,L=i.width-b,te=i.height-D,G=s.borderTopWidth,X=s.borderRightWidth,U=s.borderBottomWidth,E=s.borderLeftWidth,Y=Ws(s.paddingTop,a.bounds.width),T=Ws(s.paddingRight,a.bounds.width),Q=Ws(s.paddingBottom,a.bounds.width),q=Ws(s.paddingLeft,a.bounds.width);this.topLeftBorderDoubleOuterBox=l>0||d>0?dn(i.left+E/3,i.top+G/3,l-E/3,d-G/3,Bs.TOP_LEFT):new sa(i.left+E/3,i.top+G/3),this.topRightBorderDoubleOuterBox=l>0||d>0?dn(i.left+N,i.top+G/3,A-X/3,p-G/3,Bs.TOP_RIGHT):new sa(i.left+i.width-X/3,i.top+G/3),this.bottomRightBorderDoubleOuterBox=b>0||v>0?dn(i.left+L,i.top+O,b-X/3,v-U/3,Bs.BOTTOM_RIGHT):new sa(i.left+i.width-X/3,i.top+i.height-U/3),this.bottomLeftBorderDoubleOuterBox=C>0||D>0?dn(i.left+E/3,i.top+te,C-E/3,D-U/3,Bs.BOTTOM_LEFT):new sa(i.left+E/3,i.top+i.height-U/3),this.topLeftBorderDoubleInnerBox=l>0||d>0?dn(i.left+E*2/3,i.top+G*2/3,l-E*2/3,d-G*2/3,Bs.TOP_LEFT):new sa(i.left+E*2/3,i.top+G*2/3),this.topRightBorderDoubleInnerBox=l>0||d>0?dn(i.left+N,i.top+G*2/3,A-X*2/3,p-G*2/3,Bs.TOP_RIGHT):new sa(i.left+i.width-X*2/3,i.top+G*2/3),this.bottomRightBorderDoubleInnerBox=b>0||v>0?dn(i.left+L,i.top+O,b-X*2/3,v-U*2/3,Bs.BOTTOM_RIGHT):new sa(i.left+i.width-X*2/3,i.top+i.height-U*2/3),this.bottomLeftBorderDoubleInnerBox=C>0||D>0?dn(i.left+E*2/3,i.top+te,C-E*2/3,D-U*2/3,Bs.BOTTOM_LEFT):new sa(i.left+E*2/3,i.top+i.height-U*2/3),this.topLeftBorderStroke=l>0||d>0?dn(i.left+E/2,i.top+G/2,l-E/2,d-G/2,Bs.TOP_LEFT):new sa(i.left+E/2,i.top+G/2),this.topRightBorderStroke=l>0||d>0?dn(i.left+N,i.top+G/2,A-X/2,p-G/2,Bs.TOP_RIGHT):new sa(i.left+i.width-X/2,i.top+G/2),this.bottomRightBorderStroke=b>0||v>0?dn(i.left+L,i.top+O,b-X/2,v-U/2,Bs.BOTTOM_RIGHT):new sa(i.left+i.width-X/2,i.top+i.height-U/2),this.bottomLeftBorderStroke=C>0||D>0?dn(i.left+E/2,i.top+te,C-E/2,D-U/2,Bs.BOTTOM_LEFT):new sa(i.left+E/2,i.top+i.height-U/2),this.topLeftBorderBox=l>0||d>0?dn(i.left,i.top,l,d,Bs.TOP_LEFT):new sa(i.left,i.top),this.topRightBorderBox=A>0||p>0?dn(i.left+N,i.top,A,p,Bs.TOP_RIGHT):new sa(i.left+i.width,i.top),this.bottomRightBorderBox=b>0||v>0?dn(i.left+L,i.top+O,b,v,Bs.BOTTOM_RIGHT):new sa(i.left+i.width,i.top+i.height),this.bottomLeftBorderBox=C>0||D>0?dn(i.left,i.top+te,C,D,Bs.BOTTOM_LEFT):new sa(i.left,i.top+i.height),this.topLeftPaddingBox=l>0||d>0?dn(i.left+E,i.top+G,Math.max(0,l-E),Math.max(0,d-G),Bs.TOP_LEFT):new sa(i.left+E,i.top+G),this.topRightPaddingBox=A>0||p>0?dn(i.left+Math.min(N,i.width-X),i.top+G,N>i.width+X?0:Math.max(0,A-X),Math.max(0,p-G),Bs.TOP_RIGHT):new sa(i.left+i.width-X,i.top+G),this.bottomRightPaddingBox=b>0||v>0?dn(i.left+Math.min(L,i.width-E),i.top+Math.min(O,i.height-U),Math.max(0,b-X),Math.max(0,v-U),Bs.BOTTOM_RIGHT):new sa(i.left+i.width-X,i.top+i.height-U),this.bottomLeftPaddingBox=C>0||D>0?dn(i.left+E,i.top+Math.min(te,i.height-U),Math.max(0,C-E),Math.max(0,D-U),Bs.BOTTOM_LEFT):new sa(i.left+E,i.top+i.height-U),this.topLeftContentBox=l>0||d>0?dn(i.left+E+q,i.top+G+Y,Math.max(0,l-(E+q)),Math.max(0,d-(G+Y)),Bs.TOP_LEFT):new sa(i.left+E+q,i.top+G+Y),this.topRightContentBox=A>0||p>0?dn(i.left+Math.min(N,i.width+E+q),i.top+G+Y,N>i.width+E+q?0:A-E+q,p-(G+Y),Bs.TOP_RIGHT):new sa(i.left+i.width-(X+T),i.top+G+Y),this.bottomRightContentBox=b>0||v>0?dn(i.left+Math.min(L,i.width-(E+q)),i.top+Math.min(O,i.height+G+Y),Math.max(0,b-(X+T)),v-(U+Q),Bs.BOTTOM_RIGHT):new sa(i.left+i.width-(X+T),i.top+i.height-(U+Q)),this.bottomLeftContentBox=C>0||D>0?dn(i.left+E+q,i.top+te,Math.max(0,C-(E+q)),D-(U+Q),Bs.BOTTOM_LEFT):new sa(i.left+E+q,i.top+i.height-(U+Q))}return t}(),Bs;(function(t){t[t.TOP_LEFT=0]="TOP_LEFT",t[t.TOP_RIGHT=1]="TOP_RIGHT",t[t.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",t[t.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(Bs||(Bs={}));var dn=function(t,a,s,i,o){var l=4*((Math.sqrt(2)-1)/3),d=s*l,u=i*l,A=t+s,p=a+i;switch(o){case Bs.TOP_LEFT:return new $h(new sa(t,p),new sa(t,p-u),new sa(A-d,a),new sa(A,a));case Bs.TOP_RIGHT:return new $h(new sa(t,a),new sa(t+d,a),new sa(A,p-u),new sa(A,p));case Bs.BOTTOM_RIGHT:return new $h(new sa(A,a),new sa(A,a+u),new sa(t+d,p),new sa(t,p));case Bs.BOTTOM_LEFT:default:return new $h(new sa(A,p),new sa(A-d,p),new sa(t,a+u),new sa(t,a))}},gp=function(t){return[t.topLeftBorderBox,t.topRightBorderBox,t.bottomRightBorderBox,t.bottomLeftBorderBox]},Y3=function(t){return[t.topLeftContentBox,t.topRightContentBox,t.bottomRightContentBox,t.bottomLeftContentBox]},xp=function(t){return[t.topLeftPaddingBox,t.topRightPaddingBox,t.bottomRightPaddingBox,t.bottomLeftPaddingBox]},J3=function(){function t(a,s,i){this.offsetX=a,this.offsetY=s,this.matrix=i,this.type=0,this.target=6}return t}(),Wh=function(){function t(a,s){this.path=a,this.target=s,this.type=1}return t}(),X3=function(){function t(a){this.opacity=a,this.type=2,this.target=6}return t}(),Z3=function(t){return t.type===0},Vj=function(t){return t.type===1},eF=function(t){return t.type===2},Bb=function(t,a){return t.length===a.length?t.some(function(s,i){return s===a[i]}):!1},tF=function(t,a,s,i,o){return t.map(function(l,d){switch(d){case 0:return l.add(a,s);case 1:return l.add(a+i,s);case 2:return l.add(a+i,s+o);case 3:return l.add(a,s+o)}return l})},$j=function(){function t(a){this.element=a,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return t}(),Wj=function(){function t(a,s){if(this.container=a,this.parent=s,this.effects=[],this.curves=new W3(this.container),this.container.styles.opacity<1&&this.effects.push(new X3(this.container.styles.opacity)),this.container.styles.transform!==null){var i=this.container.bounds.left+this.container.styles.transformOrigin[0].number,o=this.container.bounds.top+this.container.styles.transformOrigin[1].number,l=this.container.styles.transform;this.effects.push(new J3(i,o,l))}if(this.container.styles.overflowX!==0){var d=gp(this.curves),u=xp(this.curves);Bb(d,u)?this.effects.push(new Wh(d,6)):(this.effects.push(new Wh(d,2)),this.effects.push(new Wh(u,4)))}}return t.prototype.getEffects=function(a){for(var s=[2,3].indexOf(this.container.styles.position)===-1,i=this.parent,o=this.effects.slice(0);i;){var l=i.effects.filter(function(A){return!Vj(A)});if(s||i.container.styles.position!==0||!i.parent){if(o.unshift.apply(o,l),s=[2,3].indexOf(i.container.styles.position)===-1,i.container.styles.overflowX!==0){var d=gp(i.curves),u=xp(i.curves);Bb(d,u)||o.unshift(new Wh(u,6))}}else o.unshift.apply(o,l);i=i.parent}return o.filter(function(A){return Jn(A.target,a)})},t}(),Fg=function(t,a,s,i){t.container.elements.forEach(function(o){var l=Jn(o.flags,4),d=Jn(o.flags,2),u=new Wj(o,t);Jn(o.styles.display,2048)&&i.push(u);var A=Jn(o.flags,8)?[]:i;if(l||d){var p=l||o.styles.isPositioned()?s:a,m=new $j(u);if(o.styles.isPositioned()||o.styles.opacity<1||o.styles.isTransformed()){var b=o.styles.zIndex.order;if(b<0){var v=0;p.negativeZIndex.some(function(C,D){return b>C.element.container.styles.zIndex.order?(v=D,!1):v>0}),p.negativeZIndex.splice(v,0,m)}else if(b>0){var x=0;p.positiveZIndex.some(function(C,D){return b>=C.element.container.styles.zIndex.order?(x=D+1,!1):x>0}),p.positiveZIndex.splice(x,0,m)}else p.zeroOrAutoZIndexOrTransformedOrOpacity.push(m)}else o.styles.isFloating()?p.nonPositionedFloats.push(m):p.nonPositionedInlineLevel.push(m);Fg(u,m,l?m:s,A)}else o.styles.isInlineLevel()?a.inlineLevel.push(u):a.nonInlineLevel.push(u),Fg(u,a,s,A);Jn(o.flags,8)&&Yj(o,A)})},Yj=function(t,a){for(var s=t instanceof Ng?t.start:1,i=t instanceof Ng?t.reversed:!1,o=0;o<a.length;o++){var l=a[o];l.container instanceof Lj&&typeof l.container.value=="number"&&l.container.value!==0&&(s=l.container.value),l.listValue=du(s,l.container.styles.listStyleType,!0),s+=i?-1:1}},aF=function(t){var a=new Wj(t,null),s=new $j(a),i=[];return Fg(a,s,s,i),Yj(a.container,i),s},Cb=function(t,a){switch(a){case 0:return Yr(t.topLeftBorderBox,t.topLeftPaddingBox,t.topRightBorderBox,t.topRightPaddingBox);case 1:return Yr(t.topRightBorderBox,t.topRightPaddingBox,t.bottomRightBorderBox,t.bottomRightPaddingBox);case 2:return Yr(t.bottomRightBorderBox,t.bottomRightPaddingBox,t.bottomLeftBorderBox,t.bottomLeftPaddingBox);case 3:default:return Yr(t.bottomLeftBorderBox,t.bottomLeftPaddingBox,t.topLeftBorderBox,t.topLeftPaddingBox)}},sF=function(t,a){switch(a){case 0:return Yr(t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox,t.topRightBorderBox,t.topRightBorderDoubleOuterBox);case 1:return Yr(t.topRightBorderBox,t.topRightBorderDoubleOuterBox,t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox);case 2:return Yr(t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox,t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox);case 3:default:return Yr(t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox,t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox)}},nF=function(t,a){switch(a){case 0:return Yr(t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox,t.topRightBorderDoubleInnerBox,t.topRightPaddingBox);case 1:return Yr(t.topRightBorderDoubleInnerBox,t.topRightPaddingBox,t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox);case 2:return Yr(t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox,t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox);case 3:default:return Yr(t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox,t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox)}},iF=function(t,a){switch(a){case 0:return Yh(t.topLeftBorderStroke,t.topRightBorderStroke);case 1:return Yh(t.topRightBorderStroke,t.bottomRightBorderStroke);case 2:return Yh(t.bottomRightBorderStroke,t.bottomLeftBorderStroke);case 3:default:return Yh(t.bottomLeftBorderStroke,t.topLeftBorderStroke)}},Yh=function(t,a){var s=[];return Vr(t)?s.push(t.subdivide(.5,!1)):s.push(t),Vr(a)?s.push(a.subdivide(.5,!0)):s.push(a),s},Yr=function(t,a,s,i){var o=[];return Vr(t)?o.push(t.subdivide(.5,!1)):o.push(t),Vr(s)?o.push(s.subdivide(.5,!0)):o.push(s),Vr(i)?o.push(i.subdivide(.5,!0).reverse()):o.push(i),Vr(a)?o.push(a.subdivide(.5,!1).reverse()):o.push(a),o},Jj=function(t){var a=t.bounds,s=t.styles;return a.add(s.borderLeftWidth,s.borderTopWidth,-(s.borderRightWidth+s.borderLeftWidth),-(s.borderTopWidth+s.borderBottomWidth))},yp=function(t){var a=t.styles,s=t.bounds,i=Ws(a.paddingLeft,s.width),o=Ws(a.paddingRight,s.width),l=Ws(a.paddingTop,s.width),d=Ws(a.paddingBottom,s.width);return s.add(i+a.borderLeftWidth,l+a.borderTopWidth,-(a.borderRightWidth+a.borderLeftWidth+i+o),-(a.borderTopWidth+a.borderBottomWidth+l+d))},rF=function(t,a){return t===0?a.bounds:t===2?yp(a):Jj(a)},oF=function(t,a){return t===0?a.bounds:t===2?yp(a):Jj(a)},qf=function(t,a,s){var i=rF(Dd(t.styles.backgroundOrigin,a),t),o=oF(Dd(t.styles.backgroundClip,a),t),l=lF(Dd(t.styles.backgroundSize,a),s,i),d=l[0],u=l[1],A=qA(Dd(t.styles.backgroundPosition,a),i.width-d,i.height-u),p=cF(Dd(t.styles.backgroundRepeat,a),A,l,i,o),m=Math.round(i.left+A[0]),b=Math.round(i.top+A[1]);return[p,m,b,d,u]},Ld=function(t){return Is(t)&&t.value===Pd.AUTO},Jh=function(t){return typeof t=="number"},lF=function(t,a,s){var i=a[0],o=a[1],l=a[2],d=t[0],u=t[1];if(!d)return[0,0];if(qn(d)&&u&&qn(u))return[Ws(d,s.width),Ws(u,s.height)];var A=Jh(l);if(Is(d)&&(d.value===Pd.CONTAIN||d.value===Pd.COVER)){if(Jh(l)){var p=s.width/s.height;return p<l!=(d.value===Pd.COVER)?[s.width,s.width/l]:[s.height*l,s.height]}return[s.width,s.height]}var m=Jh(i),b=Jh(o),v=m||b;if(Ld(d)&&(!u||Ld(u))){if(m&&b)return[i,o];if(!A&&!v)return[s.width,s.height];if(v&&A){var x=m?i:o*l,C=b?o:i/l;return[x,C]}var D=m?i:s.width,S=b?o:s.height;return[D,S]}if(A){var _=0,N=0;return qn(d)?_=Ws(d,s.width):qn(u)&&(N=Ws(u,s.height)),Ld(d)?_=N*l:(!u||Ld(u))&&(N=_/l),[_,N]}var O=null,L=null;if(qn(d)?O=Ws(d,s.width):u&&qn(u)&&(L=Ws(u,s.height)),O!==null&&(!u||Ld(u))&&(L=m&&b?O/i*o:s.height),L!==null&&Ld(d)&&(O=m&&b?L/o*i:s.width),O!==null&&L!==null)return[O,L];throw new Error("Unable to calculate background-size for element")},Dd=function(t,a){var s=t[a];return typeof s>"u"?t[0]:s},cF=function(t,a,s,i,o){var l=a[0],d=a[1],u=s[0],A=s[1];switch(t){case 2:return[new sa(Math.round(i.left),Math.round(i.top+d)),new sa(Math.round(i.left+i.width),Math.round(i.top+d)),new sa(Math.round(i.left+i.width),Math.round(A+i.top+d)),new sa(Math.round(i.left),Math.round(A+i.top+d))];case 3:return[new sa(Math.round(i.left+l),Math.round(i.top)),new sa(Math.round(i.left+l+u),Math.round(i.top)),new sa(Math.round(i.left+l+u),Math.round(i.height+i.top)),new sa(Math.round(i.left+l),Math.round(i.height+i.top))];case 1:return[new sa(Math.round(i.left+l),Math.round(i.top+d)),new sa(Math.round(i.left+l+u),Math.round(i.top+d)),new sa(Math.round(i.left+l+u),Math.round(i.top+d+A)),new sa(Math.round(i.left+l),Math.round(i.top+d+A))];default:return[new sa(Math.round(o.left),Math.round(o.top)),new sa(Math.round(o.left+o.width),Math.round(o.top)),new sa(Math.round(o.left+o.width),Math.round(o.height+o.top)),new sa(Math.round(o.left),Math.round(o.height+o.top))]}},dF="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",Sb="Hidden Text",AF=function(){function t(a){this._data={},this._document=a}return t.prototype.parseMetrics=function(a,s){var i=this._document.createElement("div"),o=this._document.createElement("img"),l=this._document.createElement("span"),d=this._document.body;i.style.visibility="hidden",i.style.fontFamily=a,i.style.fontSize=s,i.style.margin="0",i.style.padding="0",i.style.whiteSpace="nowrap",d.appendChild(i),o.src=dF,o.width=1,o.height=1,o.style.margin="0",o.style.padding="0",o.style.verticalAlign="baseline",l.style.fontFamily=a,l.style.fontSize=s,l.style.margin="0",l.style.padding="0",l.appendChild(this._document.createTextNode(Sb)),i.appendChild(l),i.appendChild(o);var u=o.offsetTop-l.offsetTop+2;i.removeChild(l),i.appendChild(this._document.createTextNode(Sb)),i.style.lineHeight="normal",o.style.verticalAlign="super";var A=o.offsetTop-i.offsetTop+2;return d.removeChild(i),{baseline:u,middle:A}},t.prototype.getMetrics=function(a,s){var i=a+" "+s;return typeof this._data[i]>"u"&&(this._data[i]=this.parseMetrics(a,s)),this._data[i]},t}(),Xj=function(){function t(a,s){this.context=a,this.options=s}return t}(),uF=1e4,hF=function(t){No(a,t);function a(s,i){var o=t.call(this,s,i)||this;return o._activeEffects=[],o.canvas=i.canvas?i.canvas:document.createElement("canvas"),o.ctx=o.canvas.getContext("2d"),i.canvas||(o.canvas.width=Math.floor(i.width*i.scale),o.canvas.height=Math.floor(i.height*i.scale),o.canvas.style.width=i.width+"px",o.canvas.style.height=i.height+"px"),o.fontMetrics=new AF(document),o.ctx.scale(o.options.scale,o.options.scale),o.ctx.translate(-i.x,-i.y),o.ctx.textBaseline="bottom",o._activeEffects=[],o.context.logger.debug("Canvas renderer initialized ("+i.width+"x"+i.height+") with scale "+i.scale),o}return a.prototype.applyEffects=function(s){for(var i=this;this._activeEffects.length;)this.popEffect();s.forEach(function(o){return i.applyEffect(o)})},a.prototype.applyEffect=function(s){this.ctx.save(),eF(s)&&(this.ctx.globalAlpha=s.opacity),Z3(s)&&(this.ctx.translate(s.offsetX,s.offsetY),this.ctx.transform(s.matrix[0],s.matrix[1],s.matrix[2],s.matrix[3],s.matrix[4],s.matrix[5]),this.ctx.translate(-s.offsetX,-s.offsetY)),Vj(s)&&(this.path(s.path),this.ctx.clip()),this._activeEffects.push(s)},a.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},a.prototype.renderStack=function(s){return Vi(this,void 0,void 0,function(){var i;return Ti(this,function(o){switch(o.label){case 0:return i=s.element.container.styles,i.isVisible()?[4,this.renderStackContent(s)]:[3,2];case 1:o.sent(),o.label=2;case 2:return[2]}})})},a.prototype.renderNode=function(s){return Vi(this,void 0,void 0,function(){return Ti(this,function(i){switch(i.label){case 0:if(Jn(s.container.flags,16))debugger;return s.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(s)]:[3,3];case 1:return i.sent(),[4,this.renderNodeContent(s)];case 2:i.sent(),i.label=3;case 3:return[2]}})})},a.prototype.renderTextWithLetterSpacing=function(s,i,o){var l=this;if(i===0)this.ctx.fillText(s.text,s.bounds.left,s.bounds.top+o);else{var d=Xg(s.text);d.reduce(function(u,A){return l.ctx.fillText(A,u,s.bounds.top+o),u+l.ctx.measureText(A).width},s.bounds.left)}},a.prototype.createFontStyle=function(s){var i=s.fontVariant.filter(function(d){return d==="normal"||d==="small-caps"}).join(""),o=xF(s.fontFamily).join(", "),l=xu(s.fontSize)?""+s.fontSize.number+s.fontSize.unit:s.fontSize.number+"px";return[[s.fontStyle,i,s.fontWeight,l,o].join(" "),o,l]},a.prototype.renderTextNode=function(s,i){return Vi(this,void 0,void 0,function(){var o,l,d,u,A,p,m,b,v=this;return Ti(this,function(x){return o=this.createFontStyle(i),l=o[0],d=o[1],u=o[2],this.ctx.font=l,this.ctx.direction=i.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",A=this.fontMetrics.getMetrics(d,u),p=A.baseline,m=A.middle,b=i.paintOrder,s.textBounds.forEach(function(C){b.forEach(function(D){switch(D){case 0:v.ctx.fillStyle=ri(i.color),v.renderTextWithLetterSpacing(C,i.letterSpacing,p);var S=i.textShadow;S.length&&C.text.trim().length&&(S.slice(0).reverse().forEach(function(_){v.ctx.shadowColor=ri(_.color),v.ctx.shadowOffsetX=_.offsetX.number*v.options.scale,v.ctx.shadowOffsetY=_.offsetY.number*v.options.scale,v.ctx.shadowBlur=_.blur.number,v.renderTextWithLetterSpacing(C,i.letterSpacing,p)}),v.ctx.shadowColor="",v.ctx.shadowOffsetX=0,v.ctx.shadowOffsetY=0,v.ctx.shadowBlur=0),i.textDecorationLine.length&&(v.ctx.fillStyle=ri(i.textDecorationColor||i.color),i.textDecorationLine.forEach(function(_){switch(_){case 1:v.ctx.fillRect(C.bounds.left,Math.round(C.bounds.top+p),C.bounds.width,1);break;case 2:v.ctx.fillRect(C.bounds.left,Math.round(C.bounds.top),C.bounds.width,1);break;case 3:v.ctx.fillRect(C.bounds.left,Math.ceil(C.bounds.top+m),C.bounds.width,1);break}}));break;case 1:i.webkitTextStrokeWidth&&C.text.trim().length&&(v.ctx.strokeStyle=ri(i.webkitTextStrokeColor),v.ctx.lineWidth=i.webkitTextStrokeWidth,v.ctx.lineJoin=window.chrome?"miter":"round",v.ctx.strokeText(C.text,C.bounds.left,C.bounds.top+p)),v.ctx.strokeStyle="",v.ctx.lineWidth=0,v.ctx.lineJoin="miter";break}})}),[2]})})},a.prototype.renderReplacedElement=function(s,i,o){if(o&&s.intrinsicWidth>0&&s.intrinsicHeight>0){var l=yp(s),d=xp(i);this.path(d),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(o,0,0,s.intrinsicWidth,s.intrinsicHeight,l.left,l.top,l.width,l.height),this.ctx.restore()}},a.prototype.renderNodeContent=function(s){return Vi(this,void 0,void 0,function(){var i,o,l,d,u,A,N,N,p,m,b,v,L,x,C,te,D,S,_,N,O,L,te;return Ti(this,function(G){switch(G.label){case 0:this.applyEffects(s.getEffects(4)),i=s.container,o=s.curves,l=i.styles,d=0,u=i.textNodes,G.label=1;case 1:return d<u.length?(A=u[d],[4,this.renderTextNode(A,l)]):[3,4];case 2:G.sent(),G.label=3;case 3:return d++,[3,1];case 4:if(!(i instanceof Fj))return[3,8];G.label=5;case 5:return G.trys.push([5,7,,8]),[4,this.context.cache.match(i.src)];case 6:return N=G.sent(),this.renderReplacedElement(i,o,N),[3,8];case 7:return G.sent(),this.context.logger.error("Error loading image "+i.src),[3,8];case 8:if(i instanceof Ej&&this.renderReplacedElement(i,o,i.canvas),!(i instanceof Uj))return[3,12];G.label=9;case 9:return G.trys.push([9,11,,12]),[4,this.context.cache.match(i.svg)];case 10:return N=G.sent(),this.renderReplacedElement(i,o,N),[3,12];case 11:return G.sent(),this.context.logger.error("Error loading svg "+i.svg.substring(0,255)),[3,12];case 12:return i instanceof Rj&&i.tree?(p=new a(this.context,{scale:this.options.scale,backgroundColor:i.backgroundColor,x:0,y:0,width:i.width,height:i.height}),[4,p.render(i.tree)]):[3,14];case 13:m=G.sent(),i.width&&i.height&&this.ctx.drawImage(m,0,0,i.width,i.height,i.bounds.left,i.bounds.top,i.bounds.width,i.bounds.height),G.label=14;case 14:if(i instanceof Zg&&(b=Math.min(i.bounds.width,i.bounds.height),i.type===hp?i.checked&&(this.ctx.save(),this.path([new sa(i.bounds.left+b*.39363,i.bounds.top+b*.79),new sa(i.bounds.left+b*.16,i.bounds.top+b*.5549),new sa(i.bounds.left+b*.27347,i.bounds.top+b*.44071),new sa(i.bounds.left+b*.39694,i.bounds.top+b*.5649),new sa(i.bounds.left+b*.72983,i.bounds.top+b*.23),new sa(i.bounds.left+b*.84,i.bounds.top+b*.34085),new sa(i.bounds.left+b*.39363,i.bounds.top+b*.79)]),this.ctx.fillStyle=ri(mb),this.ctx.fill(),this.ctx.restore()):i.type===pp&&i.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(i.bounds.left+b/2,i.bounds.top+b/2,b/4,0,Math.PI*2,!0),this.ctx.fillStyle=ri(mb),this.ctx.fill(),this.ctx.restore())),pF(i)&&i.value.length){switch(v=this.createFontStyle(l),L=v[0],x=v[1],C=this.fontMetrics.getMetrics(L,x).baseline,this.ctx.font=L,this.ctx.fillStyle=ri(l.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=fF(i.styles.textAlign),te=yp(i),D=0,i.styles.textAlign){case 1:D+=te.width/2;break;case 2:D+=te.width;break}S=te.add(D,0,0,-te.height/2+1),this.ctx.save(),this.path([new sa(te.left,te.top),new sa(te.left+te.width,te.top),new sa(te.left+te.width,te.top+te.height),new sa(te.left,te.top+te.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new au(i.value,S),l.letterSpacing,C),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!Jn(i.styles.display,2048))return[3,20];if(i.styles.listStyleImage===null)return[3,19];if(_=i.styles.listStyleImage,_.type!==0)return[3,18];N=void 0,O=_.url,G.label=15;case 15:return G.trys.push([15,17,,18]),[4,this.context.cache.match(O)];case 16:return N=G.sent(),this.ctx.drawImage(N,i.bounds.left-(N.width+10),i.bounds.top),[3,18];case 17:return G.sent(),this.context.logger.error("Error loading list-style-image "+O),[3,18];case 18:return[3,20];case 19:s.listValue&&i.styles.listStyleType!==-1&&(L=this.createFontStyle(l)[0],this.ctx.font=L,this.ctx.fillStyle=ri(l.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",te=new _l(i.bounds.left,i.bounds.top+Ws(i.styles.paddingTop,i.bounds.width),i.bounds.width,Xv(l.lineHeight,l.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new au(s.listValue,te),l.letterSpacing,Xv(l.lineHeight,l.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),G.label=20;case 20:return[2]}})})},a.prototype.renderStackContent=function(s){return Vi(this,void 0,void 0,function(){var i,o,_,l,d,_,u,A,_,p,m,_,b,v,_,x,C,_,D,S,_;return Ti(this,function(N){switch(N.label){case 0:if(Jn(s.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(s.element)];case 1:N.sent(),i=0,o=s.negativeZIndex,N.label=2;case 2:return i<o.length?(_=o[i],[4,this.renderStack(_)]):[3,5];case 3:N.sent(),N.label=4;case 4:return i++,[3,2];case 5:return[4,this.renderNodeContent(s.element)];case 6:N.sent(),l=0,d=s.nonInlineLevel,N.label=7;case 7:return l<d.length?(_=d[l],[4,this.renderNode(_)]):[3,10];case 8:N.sent(),N.label=9;case 9:return l++,[3,7];case 10:u=0,A=s.nonPositionedFloats,N.label=11;case 11:return u<A.length?(_=A[u],[4,this.renderStack(_)]):[3,14];case 12:N.sent(),N.label=13;case 13:return u++,[3,11];case 14:p=0,m=s.nonPositionedInlineLevel,N.label=15;case 15:return p<m.length?(_=m[p],[4,this.renderStack(_)]):[3,18];case 16:N.sent(),N.label=17;case 17:return p++,[3,15];case 18:b=0,v=s.inlineLevel,N.label=19;case 19:return b<v.length?(_=v[b],[4,this.renderNode(_)]):[3,22];case 20:N.sent(),N.label=21;case 21:return b++,[3,19];case 22:x=0,C=s.zeroOrAutoZIndexOrTransformedOrOpacity,N.label=23;case 23:return x<C.length?(_=C[x],[4,this.renderStack(_)]):[3,26];case 24:N.sent(),N.label=25;case 25:return x++,[3,23];case 26:D=0,S=s.positiveZIndex,N.label=27;case 27:return D<S.length?(_=S[D],[4,this.renderStack(_)]):[3,30];case 28:N.sent(),N.label=29;case 29:return D++,[3,27];case 30:return[2]}})})},a.prototype.mask=function(s){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(s.slice(0).reverse()),this.ctx.closePath()},a.prototype.path=function(s){this.ctx.beginPath(),this.formatPath(s),this.ctx.closePath()},a.prototype.formatPath=function(s){var i=this;s.forEach(function(o,l){var d=Vr(o)?o.start:o;l===0?i.ctx.moveTo(d.x,d.y):i.ctx.lineTo(d.x,d.y),Vr(o)&&i.ctx.bezierCurveTo(o.startControl.x,o.startControl.y,o.endControl.x,o.endControl.y,o.end.x,o.end.y)})},a.prototype.renderRepeat=function(s,i,o,l){this.path(s),this.ctx.fillStyle=i,this.ctx.translate(o,l),this.ctx.fill(),this.ctx.translate(-o,-l)},a.prototype.resizeImage=function(s,i,o){var l;if(s.width===i&&s.height===o)return s;var d=(l=this.canvas.ownerDocument)!==null&&l!==void 0?l:document,u=d.createElement("canvas");u.width=Math.max(1,i),u.height=Math.max(1,o);var A=u.getContext("2d");return A.drawImage(s,0,0,s.width,s.height,0,0,i,o),u},a.prototype.renderBackgroundImage=function(s){return Vi(this,void 0,void 0,function(){var i,o,l,d,u,A;return Ti(this,function(p){switch(p.label){case 0:i=s.styles.backgroundImage.length-1,o=function(m){var b,v,x,Y,z,ee,q,ne,U,C,Y,z,ee,q,ne,D,S,_,N,O,L,te,G,X,U,E,Y,T,Q,q,ne,R,z,ee,le,Be,$,ue,k,I,H,re;return Ti(this,function(J){switch(J.label){case 0:if(m.type!==0)return[3,5];b=void 0,v=m.url,J.label=1;case 1:return J.trys.push([1,3,,4]),[4,l.context.cache.match(v)];case 2:return b=J.sent(),[3,4];case 3:return J.sent(),l.context.logger.error("Error loading background-image "+v),[3,4];case 4:return b&&(x=qf(s,i,[b.width,b.height,b.width/b.height]),Y=x[0],z=x[1],ee=x[2],q=x[3],ne=x[4],U=l.ctx.createPattern(l.resizeImage(b,q,ne),"repeat"),l.renderRepeat(Y,U,z,ee)),[3,6];case 5:ZS(m)?(C=qf(s,i,[null,null,null]),Y=C[0],z=C[1],ee=C[2],q=C[3],ne=C[4],D=$S(m.angle,q,ne),S=D[0],_=D[1],N=D[2],O=D[3],L=D[4],te=document.createElement("canvas"),te.width=q,te.height=ne,G=te.getContext("2d"),X=G.createLinearGradient(_,O,N,L),Yv(m.stops,S).forEach(function(V){return X.addColorStop(V.stop,ri(V.color))}),G.fillStyle=X,G.fillRect(0,0,q,ne),q>0&&ne>0&&(U=l.ctx.createPattern(te,"repeat"),l.renderRepeat(Y,U,z,ee))):e4(m)&&(E=qf(s,i,[null,null,null]),Y=E[0],T=E[1],Q=E[2],q=E[3],ne=E[4],R=m.position.length===0?[Wg]:m.position,z=Ws(R[0],q),ee=Ws(R[R.length-1],ne),le=WS(m,z,ee,q,ne),Be=le[0],$=le[1],Be>0&&$>0&&(ue=l.ctx.createRadialGradient(T+z,Q+ee,0,T+z,Q+ee,Be),Yv(m.stops,Be*2).forEach(function(V){return ue.addColorStop(V.stop,ri(V.color))}),l.path(Y),l.ctx.fillStyle=ue,Be!==$?(k=s.bounds.left+.5*s.bounds.width,I=s.bounds.top+.5*s.bounds.height,H=$/Be,re=1/H,l.ctx.save(),l.ctx.translate(k,I),l.ctx.transform(1,0,0,H,0,0),l.ctx.translate(-k,-I),l.ctx.fillRect(T,re*(Q-I)+I,q,ne*re),l.ctx.restore()):l.ctx.fill())),J.label=6;case 6:return i--,[2]}})},l=this,d=0,u=s.styles.backgroundImage.slice(0).reverse(),p.label=1;case 1:return d<u.length?(A=u[d],[5,o(A)]):[3,4];case 2:p.sent(),p.label=3;case 3:return d++,[3,1];case 4:return[2]}})})},a.prototype.renderSolidBorder=function(s,i,o){return Vi(this,void 0,void 0,function(){return Ti(this,function(l){return this.path(Cb(o,i)),this.ctx.fillStyle=ri(s),this.ctx.fill(),[2]})})},a.prototype.renderDoubleBorder=function(s,i,o,l){return Vi(this,void 0,void 0,function(){var d,u;return Ti(this,function(A){switch(A.label){case 0:return i<3?[4,this.renderSolidBorder(s,o,l)]:[3,2];case 1:return A.sent(),[2];case 2:return d=sF(l,o),this.path(d),this.ctx.fillStyle=ri(s),this.ctx.fill(),u=nF(l,o),this.path(u),this.ctx.fill(),[2]}})})},a.prototype.renderNodeBackgroundAndBorders=function(s){return Vi(this,void 0,void 0,function(){var i,o,l,d,u,A,p,m,b=this;return Ti(this,function(v){switch(v.label){case 0:return this.applyEffects(s.getEffects(2)),i=s.container.styles,o=!dc(i.backgroundColor)||i.backgroundImage.length,l=[{style:i.borderTopStyle,color:i.borderTopColor,width:i.borderTopWidth},{style:i.borderRightStyle,color:i.borderRightColor,width:i.borderRightWidth},{style:i.borderBottomStyle,color:i.borderBottomColor,width:i.borderBottomWidth},{style:i.borderLeftStyle,color:i.borderLeftColor,width:i.borderLeftWidth}],d=mF(Dd(i.backgroundClip,0),s.curves),o||i.boxShadow.length?(this.ctx.save(),this.path(d),this.ctx.clip(),dc(i.backgroundColor)||(this.ctx.fillStyle=ri(i.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(s.container)]):[3,2];case 1:v.sent(),this.ctx.restore(),i.boxShadow.slice(0).reverse().forEach(function(x){b.ctx.save();var C=gp(s.curves),D=x.inset?0:uF,S=tF(C,-D+(x.inset?1:-1)*x.spread.number,(x.inset?1:-1)*x.spread.number,x.spread.number*(x.inset?-2:2),x.spread.number*(x.inset?-2:2));x.inset?(b.path(C),b.ctx.clip(),b.mask(S)):(b.mask(C),b.ctx.clip(),b.path(S)),b.ctx.shadowOffsetX=x.offsetX.number+D,b.ctx.shadowOffsetY=x.offsetY.number,b.ctx.shadowColor=ri(x.color),b.ctx.shadowBlur=x.blur.number,b.ctx.fillStyle=x.inset?ri(x.color):"rgba(0,0,0,1)",b.ctx.fill(),b.ctx.restore()}),v.label=2;case 2:u=0,A=0,p=l,v.label=3;case 3:return A<p.length?(m=p[A],m.style!==0&&!dc(m.color)&&m.width>0?m.style!==2?[3,5]:[4,this.renderDashedDottedBorder(m.color,m.width,u,s.curves,2)]:[3,11]):[3,13];case 4:return v.sent(),[3,11];case 5:return m.style!==3?[3,7]:[4,this.renderDashedDottedBorder(m.color,m.width,u,s.curves,3)];case 6:return v.sent(),[3,11];case 7:return m.style!==4?[3,9]:[4,this.renderDoubleBorder(m.color,m.width,u,s.curves)];case 8:return v.sent(),[3,11];case 9:return[4,this.renderSolidBorder(m.color,u,s.curves)];case 10:v.sent(),v.label=11;case 11:u++,v.label=12;case 12:return A++,[3,3];case 13:return[2]}})})},a.prototype.renderDashedDottedBorder=function(s,i,o,l,d){return Vi(this,void 0,void 0,function(){var u,A,p,m,b,v,x,C,D,S,_,N,O,L,te,G,te,G;return Ti(this,function(X){return this.ctx.save(),u=iF(l,o),A=Cb(l,o),d===2&&(this.path(A),this.ctx.clip()),Vr(A[0])?(p=A[0].start.x,m=A[0].start.y):(p=A[0].x,m=A[0].y),Vr(A[1])?(b=A[1].end.x,v=A[1].end.y):(b=A[1].x,v=A[1].y),o===0||o===2?x=Math.abs(p-b):x=Math.abs(m-v),this.ctx.beginPath(),d===3?this.formatPath(u):this.formatPath(A.slice(0,2)),C=i<3?i*3:i*2,D=i<3?i*2:i,d===3&&(C=i,D=i),S=!0,x<=C*2?S=!1:x<=C*2+D?(_=x/(2*C+D),C*=_,D*=_):(N=Math.floor((x+D)/(C+D)),O=(x-N*C)/(N-1),L=(x-(N+1)*C)/N,D=L<=0||Math.abs(D-O)<Math.abs(D-L)?O:L),S&&(d===3?this.ctx.setLineDash([0,C+D]):this.ctx.setLineDash([C,D])),d===3?(this.ctx.lineCap="round",this.ctx.lineWidth=i):this.ctx.lineWidth=i*2+1.1,this.ctx.strokeStyle=ri(s),this.ctx.stroke(),this.ctx.setLineDash([]),d===2&&(Vr(A[0])&&(te=A[3],G=A[0],this.ctx.beginPath(),this.formatPath([new sa(te.end.x,te.end.y),new sa(G.start.x,G.start.y)]),this.ctx.stroke()),Vr(A[1])&&(te=A[1],G=A[2],this.ctx.beginPath(),this.formatPath([new sa(te.end.x,te.end.y),new sa(G.start.x,G.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},a.prototype.render=function(s){return Vi(this,void 0,void 0,function(){var i;return Ti(this,function(o){switch(o.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=ri(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),i=aF(s),[4,this.renderStack(i)];case 1:return o.sent(),this.applyEffects([]),[2,this.canvas]}})})},a}(Xj),pF=function(t){return t instanceof Qj||t instanceof Tj?!0:t instanceof Zg&&t.type!==pp&&t.type!==hp},mF=function(t,a){switch(t){case 0:return gp(a);case 2:return Y3(a);case 1:default:return xp(a)}},fF=function(t){switch(t){case 1:return"center";case 2:return"right";case 0:default:return"left"}},gF=["-apple-system","system-ui"],xF=function(t){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?t.filter(function(a){return gF.indexOf(a)===-1}):t},yF=function(t){No(a,t);function a(s,i){var o=t.call(this,s,i)||this;return o.canvas=i.canvas?i.canvas:document.createElement("canvas"),o.ctx=o.canvas.getContext("2d"),o.options=i,o.canvas.width=Math.floor(i.width*i.scale),o.canvas.height=Math.floor(i.height*i.scale),o.canvas.style.width=i.width+"px",o.canvas.style.height=i.height+"px",o.ctx.scale(o.options.scale,o.options.scale),o.ctx.translate(-i.x,-i.y),o.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+i.width+"x"+i.height+" at "+i.x+","+i.y+") with scale "+i.scale),o}return a.prototype.render=function(s){return Vi(this,void 0,void 0,function(){var i,o;return Ti(this,function(l){switch(l.label){case 0:return i=_g(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,s),[4,vF(i)];case 1:return o=l.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=ri(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(o,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},a}(Xj),vF=function(t){return new Promise(function(a,s){var i=new Image;i.onload=function(){a(i)},i.onerror=s,i.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(t))})},bF=function(){function t(a){var s=a.id,i=a.enabled;this.id=s,this.enabled=i,this.start=Date.now()}return t.prototype.debug=function(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,kh([this.id,this.getTime()+"ms"],a)):this.info.apply(this,a))},t.prototype.getTime=function(){return Date.now()-this.start},t.prototype.info=function(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,kh([this.id,this.getTime()+"ms"],a))},t.prototype.warn=function(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,kh([this.id,this.getTime()+"ms"],a)):this.info.apply(this,a))},t.prototype.error=function(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,kh([this.id,this.getTime()+"ms"],a)):this.info.apply(this,a))},t.instances={},t}(),jF=function(){function t(a,s){var i;this.windowBounds=s,this.instanceName="#"+t.instanceCount++,this.logger=new bF({id:this.instanceName,enabled:a.logging}),this.cache=(i=a.cache)!==null&&i!==void 0?i:new O3(this,a)}return t.instanceCount=1,t}(),Gc=function(t,a){return a===void 0&&(a={}),wF(t,a)};typeof window<"u"&&Gj.setContext(window);var wF=function(t,a){return Vi(void 0,void 0,void 0,function(){var s,i,o,l,d,u,A,p,m,b,v,x,C,D,S,_,N,O,L,te,X,G,X,U,E,Y,T,Q,q,ne,R,z,ee,le,Be,$,ue,k,I,H;return Ti(this,function(re){switch(re.label){case 0:if(!t||typeof t!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(s=t.ownerDocument,!s)throw new Error("Element is not attached to a Document");if(i=s.defaultView,!i)throw new Error("Document is not attached to a Window");return o={allowTaint:(U=a.allowTaint)!==null&&U!==void 0?U:!1,imageTimeout:(E=a.imageTimeout)!==null&&E!==void 0?E:15e3,proxy:a.proxy,useCORS:(Y=a.useCORS)!==null&&Y!==void 0?Y:!1},l=cg({logging:(T=a.logging)!==null&&T!==void 0?T:!0,cache:a.cache},o),d={windowWidth:(Q=a.windowWidth)!==null&&Q!==void 0?Q:i.innerWidth,windowHeight:(q=a.windowHeight)!==null&&q!==void 0?q:i.innerHeight,scrollX:(ne=a.scrollX)!==null&&ne!==void 0?ne:i.pageXOffset,scrollY:(R=a.scrollY)!==null&&R!==void 0?R:i.pageYOffset},u=new _l(d.scrollX,d.scrollY,d.windowWidth,d.windowHeight),A=new jF(l,u),p=(z=a.foreignObjectRendering)!==null&&z!==void 0?z:!1,m={allowTaint:(ee=a.allowTaint)!==null&&ee!==void 0?ee:!1,onclone:a.onclone,ignoreElements:a.ignoreElements,inlineImages:p,copyStyles:p},A.logger.debug("Starting document clone with size "+u.width+"x"+u.height+" scrolled to "+-u.left+","+-u.top),b=new _b(A,t,m),v=b.clonedReferenceElement,v?[4,b.toIFrame(s,u)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return x=re.sent(),C=ex(v)||N3(v)?tC(v.ownerDocument):kp(A,v),D=C.width,S=C.height,_=C.left,N=C.top,O=_F(A,v,a.backgroundColor),L={canvas:a.canvas,backgroundColor:O,scale:(Be=(le=a.scale)!==null&&le!==void 0?le:i.devicePixelRatio)!==null&&Be!==void 0?Be:1,x:(($=a.x)!==null&&$!==void 0?$:0)+_,y:((ue=a.y)!==null&&ue!==void 0?ue:0)+N,width:(k=a.width)!==null&&k!==void 0?k:Math.ceil(D),height:(I=a.height)!==null&&I!==void 0?I:Math.ceil(S)},p?(A.logger.debug("Document cloned, using foreign object rendering"),X=new yF(A,L),[4,X.render(v)]):[3,3];case 2:return te=re.sent(),[3,5];case 3:return A.logger.debug("Document cloned, element located at "+_+","+N+" with size "+D+"x"+S+" using computed rendering"),A.logger.debug("Starting DOM parsing"),G=Ij(A,v),O===G.styles.backgroundColor&&(G.styles.backgroundColor=jl.TRANSPARENT),A.logger.debug("Starting renderer for element at "+L.x+","+L.y+" with size "+L.width+"x"+L.height),X=new hF(A,L),[4,X.render(G)];case 4:te=re.sent(),re.label=5;case 5:return(!((H=a.removeContainer)!==null&&H!==void 0)||H)&&(_b.destroy(x)||A.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),A.logger.debug("Finished rendering"),[2,te]}})})},_F=function(t,a,s){var i=a.ownerDocument,o=i.documentElement?eu(t,getComputedStyle(i.documentElement).backgroundColor):jl.TRANSPARENT,l=i.body?eu(t,getComputedStyle(i.body).backgroundColor):jl.TRANSPARENT,d=typeof s=="string"?eu(t,s):s===null?jl.TRANSPARENT:4294967295;return a===i.documentElement?dc(o)?dc(l)?d:l:o:d};const Au=Object.freeze(Object.defineProperty({__proto__:null,default:Gc},Symbol.toStringTag,{value:"Module"})),NF=({options:t,value:a,onChange:s,placeholder:i})=>{const[o,l]=w.useState(!1),[d,u]=w.useState(""),[A,p]=w.useState(t),m=w.useRef(null);w.useEffect(()=>{if(d){const v=t.filter(x=>x.toLowerCase().includes(d.toLowerCase()));p(v)}else p(t)},[d,t]),w.useEffect(()=>{const v=x=>{m.current&&!m.current.contains(x.target)&&l(!1)};return document.addEventListener("mousedown",v),()=>{document.removeEventListener("mousedown",v)}},[]);const b=v=>{s(v),l(!1),u("")};return e.jsxs("div",{className:"searchable-dropdown",ref:m,children:[e.jsxs("div",{className:"dropdown-input-container",children:[e.jsx("input",{type:"text",className:"dropdown-input",value:a||d,onChange:v=>{u(v.target.value),o||l(!0),v.target.value||s("")},onClick:()=>l(!0),placeholder:i||"Search..."}),e.jsx("div",{className:"dropdown-arrow",onClick:()=>l(!o),children:""})]}),o&&e.jsx("ul",{className:"dropdown-options",children:A.length>0?A.map((v,x)=>e.jsx("li",{onClick:()=>b(v),className:a===v?"selected":"",children:v},x)):e.jsx("li",{className:"no-options",children:"No matches found"})})]})},$r={Thiruvananthapuram:{Municipalities:["Thiruvananthapuram Corporation","Attingal","Nedumangad","Varkala"],Panchayats:["Aruvikkara","Kallara","Karakulam","Karode","Kattakada","Manickal","Mangalapuram","Nagaroor","Pallichal","Parassala","Peringammala","Pullampara","Thirupuram","Uzhamalackal","Vellanad","Venganoor","Vilavoorkkal"]},Kollam:{Municipalities:["Kollam Corporation","Karunagappally","Kottarakkara","Paravur","Punalur"],Panchayats:["Adichanalloor","Alayamon","Chavara","Chithara","Clappana","Elamadu","Ittiva","Kareepra","Karunagappally","Kulakkada","Kulathupuzha","Mayyanad","Nedumpana","Neendakara","Oachira","Panmana","Pathanapuram","Perayam","Perinad","Poothakkulam","Sasthamcotta","Thazhava","Thekkumbhagam","Thevalakkara","Thrikkadavoor","Veliyam","Vilakkudy","West Kallada"]},Pathanamthitta:{Municipalities:["Pathanamthitta","Adoor","Pandalam","Thiruvalla"],Panchayats:["Aranmula","Cherukole","Chittar","Enadimangalam","Eraviperoor","Ezhamkulam","Kadapra","Kalanjoor","Kallooppara","Kaviyoor","Kodumon","Konni","Kozhencherry","Kumbazha","Kunnamthanam","Mallappally","Malayalappuzha","Mezhuveli","Mylapra","Naranganam","Nariyapuram","Niranam","Omalloor","Pallickal","Peringara","Pramadom","Puramattom","Ranni","Seethathode","Thottappuzhassery","Vadasserikara","Vechoochira"]},Alappuzha:{Municipalities:["Alappuzha","Chengannur","Cherthala","Kayamkulam","Mavelikkara"],Panchayats:["Ala","Ambalappuzha North","Ambalappuzha South","Arattupuzha","Arookutty","Aroor","Budhanoor","Champakulam","Chennam Pallippuram","Cheppad","Cheriyanad","Chingoli","Devikulangara","Edathua","Ezhupunna","Harippad","Kadakkarappally","Kainakary","Kanjikuzhy","Karthikappally","Kavalam","Kodamthurath","Krishnapuram","Kumarapuram","Kuthiyathode","Mannancherry","Mararikulam North","Mararikulam South","Muttar","Neelamperoor","Nedumudy","Panavally","Pandanad","Pattanakkad","Pulincunnu","Puliyoor","Punnapra North","Punnapra South","Purakad","Ramankary","Thaicattussery","Thakazhy","Thannermukkom","Thazhakkara","Thuravoor","Veeyapuram","Veliyanad"]},Kottayam:{Municipalities:["Kottayam","Changanassery","Ettumanoor","Kanjirappally","Pala","Vaikom"],Panchayats:["Akalakunnam","Arpookara","Athirampuzha","Ayarkunnam","Aymanam","Bharananganam","Chempu","Chirakkadavu","Elikulam","Erattupetta","Erumely","Ettumanoor","Kadanad","Kadaplamattam","Kaduthuruthy","Kanakkary","Kangazha","Kanjirappally","Karoor","Karukachal","Kidangoor","Kooroppada","Koottickal","Koruthodu","Kozhuvanal","Kumarakom","Kuravilangad","Madappally","Manjoor","Mannanam","Marangattupilly","Maravanthuruth","Meenachil","Meenadom","Melukavu","Moonnilavu","Mulakulam","Mundakkayam","Mutholy","Nedumkunnam","Neendoor","Pala","Pallickathodu","Pampady","Panachikkad","Parathodu","Paippadu","Poonjar","Puthuppally","Ramapuram","Teekoy","Thalayazham","Thalayolaparambu","Thidanadu","Thiruvarppu","TV Puram","Udayanapuram","Uzhavoor","Vaikom","Vakathanam","Vazhappally","Vazhoor","Vechoor","Veliyannoor","Vellavoor","Vijayapuram"]},Idukki:{Municipalities:["Thodupuzha","Kattappana"],Panchayats:["Adimaly","Alackode","Arakkulam","Azhutha","Bisonvalley","Chakkupallam","Edavetty","Elappara","Erattayar","Idukki","Kanchiyar","Karunapuram","Kattappana","Kodikulam","Kumily","Konnathady","Kudayathoor","Manakkadu","Mankulam","Mariyapuram","Munnar","Murikkassery","Nedumkandam","Pallivasal","Pampadumpara","Peerumedu","Purapuzha","Rajakumary","Rajakkad","Santhanpara","Senapathy","Thodupuzha","Udumbannoor","Upputhara","Vagamon","Vandiperiyar","Vandanmedu","Vazhathope","Vathikudy"]},Ernakulam:{Municipalities:["Kochi Corporation","Aluva","Angamaly","Kalamassery","Kothamangalam","Muvattupuzha","Perumbavoor","Thrikkakara","Tripunithura"],Panchayats:["Aikaranad","Alangad","Amballoor","Asamannoor","Avoly","Ayavana","Chellanam","Cheranalloor","Chittattukara","Choornikkara","Chottanikkara","Edakkattuvayal","Edathala","Edavanakkad","Elanji","Eloor","Ezhikkara","Kadungalloor","Kalady","Kalamassery","Karukutty","Karumalloor","Keezhmad","Kochi","Koothattukulam","Koovappady","Kottuvally","Kumbalam","Kumbalangy","Kunnathunad","Kuzhippilly","Malayattoor","Manjalloor","Maneed","Maradu","Mazhuvannoor","Mudakkuzha","Mulavukad","Mulanthuruthy","Nayarambalam","Nedumbassery","Njarakkal","Okkal","Paingottoor","Pallarimangalam","Pallipuram","Paravoor","Parakkadave","Pindimana","Piravam","Pootrikka","Pothanikkad","Puthencruz","Puthenvelikkara","Ramamangalam","Rayamangalam","Sreemoolanagaram","Thirumarady","Thiruvaniyoor","Thrikkakkara","Thuravoor","Vadakkekkara","Vadavucode","Varapuzha","Vazhakulam","Velloorkunnam"]}};$r.Thrissur={Municipalities:["Thrissur Corporation","Chalakudy","Chavakkad","Guruvayur","Irinjalakuda","Kodungallur","Kunnamkulam","Mala","Wadakkanchery"],Panchayats:["Adat","Aloor","Annamanada","Anthikkad","Arimpur","Athirappilly","Avanoor","Avinissery","Chalakudy","Chazhur","Chelakkara","Cheppara","Cherpu","Choondal","Desamangalam","Edakkulam","Edavilangu","Elavally","Engandiyur","Eriyad","Erumapetty","Kadangode","Kadavallur","Kadukutty","Kaipamangalam","Kandanassery","Karalam","Karupadanna","Kattur","Kodakara","Kodannur","Koratty","Kottapadi","Kuzhur","Madakkathara","Manalur","Mathilakam","Mattathur","Melur","Mullassery","Mullurkkara","Muriyad","Nadathara","Nenmanikkara","Nattika","Orumanayur","Padiyur","Pananchery","Paralam","Parappukkara","Pavaratty","Pazhayanur","Poomangalam","Porathissery","Poyya","Pudukad","Puzhakkal","Sreenarayanapuram","Talikulam","Thalikulam","Thekkumkara","Thessa","Thiruvallur","Thiruvilwamala","Thrissur","Vadakkekad","Vadanappally","Valappad","Varandarappilly","Velookkara","Venkitangu","Wadakkanchery"]};$r.Palakkad={Municipalities:["Palakkad","Chittur-Thathamangalam","Mannarkkad","Ottappalam","Pattambi","Shoranur"],Panchayats:["Agali","Akathethara","Alathur","Anakkara","Ananganadi","Chalissery","Elavanchery","Elappully","Erimayur","Eruthenpathy","Kadambazhipuram","Kannadi","Kannambra","Kappur","Karimpuzha","Kavassery","Keralassery","Kodumba","Koduvayur","Koottanad","Koppam","Kozhinjampara","Kulukkallur","Kumaramputhur","Kuzhalmannam","Lakkidi Perur","Malampuzha","Mathur","Melarcode","Muthalamada","Nallepilly","Nalleppilly","Nemmara","Nenmeni","Palakkad","Pallassana","Parali","Pattanchery","Peringottukurissi","Peruvemba","Pirayiri","Polpully","Pudunagaram","Pudussery Central","Pudussery East","Pudussery West","Sholayur","Sreekrishnapuram","Tarur","Thachampara","Thenkara","Thirumittakode","Thrithala","Vadakarapathy","Vadakkenchery","Vadavannur","Vallapuzha","Vaniyamkulam","Vilayur"]};$r.Malappuram={Municipalities:["Malappuram","Manjeri","Nilambur","Ponnani","Tirur","Tanur","Kottakkal","Perinthalmanna","Parappanangadi","Valanchery"],Panchayats:["Abdurahiman Nagar","Anakkayam","Areacode","Athavanad","Chelembra","Cheekkode","Cheriyamundam","Cherukara","Chokkad","Edakkara","Edappal","Edarikkode","Irimbiliyam","Kalikavu","Kaladi","Karuvarakundu","Keezhattur","Kizhisseri","Kondotty","Kuruva","Kuttippuram","Makkaraparamba","Mampad","Mangalam","Mankada","Marakkara","Melattur","Moorkkanad","Moothedam","Munniyur","Nannambra","Narukara","Niramaruthur","Oorakam","Othukkungal","Pandikkad","Perumanna Klari","Perumpadappu","Ponmala","Porur","Pulamanthol","Pulikkal","Purathur","Tanalur","Tanur","Thavanur","Thennala","Thirunavaya","Thirurangadi","Trikkalangode","Triprangode","Urangattiri","Valavannur","Vazhakkad","Vazhayur","Vettom","Wandoor"]};$r.Kozhikode={Municipalities:["Kozhikode Corporation","Feroke","Koyilandy","Ramanattukara","Vadakara"],Panchayats:["Atholi","Ayanchery","Balussery","Changaroth","Chelannur","Chemancheri","Chengottukavu","Cheruvannur","Eramala","Kakkodi","Kakkur","Karassery","Kayanna","Keezhariyur","Kizhakkoth","Kodanchery","Kodiyathur","Koduvally","Koothali","Kunnamangalam","Kunnummal","Kuruvattoor","Kuttiadi","Maniyur","Maruthonkara","Mavoor","Melady","Memunda","Meppayur","Nadapuram","Naduvannur","Narikkuni","Nochad","Omassery","Onchiyam","Payyoli","Perambra","Perumanna","Purameri","Thikkodi","Thiruvallur","Thuneri","Thurayur","Thodannur","Ulliyeri","Unnikulam","Valayam","Villiappally"]};$r.Wayanad={Municipalities:["Kalpetta","Mananthavady","Sulthan Bathery"],Panchayats:["Edavaka","Kalpetta","Kaniyambetta","Mananthavady","Meenangadi","Meppadi","Mullankolly","Muttil","Nenmeni","Noolpuzha","Panamaram","Poothadi","Pulpally","Sulthan Bathery","Thariyode","Thavinjal","Thirunelly","Thondernad","Vellamunda","Vythiri"]};$r.Kannur={Municipalities:["Kannur","Thalassery","Mattannur","Payyannur","Taliparamba"],Panchayats:["Alakode","Ancharakandy","Aralam","Ayyankunnu","Azhikode","Chapparapadavu","Chekkiad","Cheruthazham","Chirakkal","Chittariparamba","Chokli","Dharmadam","Edakkad","Eramam Kuttoor","Eranholi","Iritty","Kadannappalli Panniyannur","Kadavathur","Kalliasseri","Kannapuram","Kannur","Kannadiparamba","Karivellur Peralam","Karthikapuram","Kelakam","Koodali","Korom","Kottayam Malabar","Kottiyoor","Kunhimangalam","Kurumathoor","Madayi","Malappattam","Mangattidam","Mayyil","Munderi","Muzhappilangad","Narath","Padiyoor","Panoor","Panniyannur","Pariyaram","Pathiriyad","Pattuvam","Payam","Payyavoor","Peralasseri","Peringome Vayakkara","Pinarayi","Puzhathi","Sreekandapuram","Thillenkeri","Thripangottur","Ulikkal","Varam"]};$r.Kasaragod={Municipalities:["Kasaragod","Kanhangad","Nileshwar"],Panchayats:["Ajanur","Badiadka","Balal","Bedadka","Bellur","Chemnad","Cheruvathur","Chittarikkal","Delampady","Enmakaje","Karadka","Kumbala","Kumbdaje","Madhur","Manjeshwar","Manjeswaram","Mogral Puthur","Muliyar","Paivalike","Pallikkara","Panathady","Pilicode","Pullur Periya","Puthige","Thrikkaripur","Udma","Vorkady"]};function Eg(t){switch(String(t||"").toLowerCase()){case"approved":case"accepted":case"active":case"success":return"accepted";case"rejected":case"declined":case"error":case"suspended":return"rejected";case"pending":case"awaiting":case"in_review":case"processing":default:return"pending"}}function vp(t){if(!t)return"Pending";const a=String(t).toLowerCase();return{pending:"Pending",awaiting:"Awaiting",in_review:"In Review",processing:"Processing",approved:"Approved",accepted:"Accepted",rejected:"Rejected",declined:"Declined",suspended:"Suspended",finalized:"Finalized",shortlisted:"Shortlisted",completed:"Completed",active:"Active",inactive:"Inactive",success:"Success",error:"Error"}[a]||a.charAt(0).toUpperCase()+a.slice(1)}const BF=({project:t})=>{const[a,s]=w.useState({weeks:[],planned:[],actual:[]});return w.useEffect(()=>{t&&t.progressData?s({weeks:t.progressData.labels||[],planned:t.progressData.datasets?.[0]?.data||[],actual:t.progressData.datasets?.[1]?.data||[]}):s({weeks:[],planned:[],actual:[]})},[t]),a.weeks.length?e.jsxs("div",{className:"progress-chart-container",children:[e.jsxs("div",{className:"chart-legend",children:[e.jsxs("div",{className:"legend-item",children:[e.jsx("div",{className:"legend-color",style:{backgroundColor:"#2563eb"}}),e.jsx("span",{children:"Planned Progress"})]}),e.jsxs("div",{className:"legend-item",children:[e.jsx("div",{className:"legend-color",style:{backgroundColor:"#10b981"}}),e.jsx("span",{children:"Actual Progress"})]})]}),e.jsx("div",{className:"simple-chart",children:a.weeks.map((i,o)=>e.jsxs("div",{className:"chart-column",children:[e.jsxs("div",{className:"chart-bars",children:[e.jsx("div",{className:"chart-bar planned",style:{height:`${a.planned[o]}%`},title:`Planned: ${a.planned[o]}%`}),e.jsx("div",{className:"chart-bar actual",style:{height:`${a.actual[o]}%`},title:`Actual: ${a.actual[o]}%`})]}),e.jsx("div",{className:"chart-label",children:i})]},o))})]}):e.jsx("div",{className:"empty-state",children:"No progress data available"})},CF=({project:t})=>{const[a,s]=w.useState(null);if(w.useEffect(()=>{t&&t.budgetData?s(t.budgetData):s(null)},[t]),!a)return e.jsx("div",{className:"empty-state",children:"No budget data available"});const i=Math.round(a.spent/a.totalBudget*100);return e.jsxs("div",{className:"budget-tracker",children:[e.jsxs("div",{className:"budget-summary",children:[e.jsxs("div",{className:"budget-total",children:[e.jsx("h3",{children:"Total Budget"}),e.jsxs("p",{className:"budget-amount",children:["$",a.totalBudget.toLocaleString()]})]}),e.jsxs("div",{className:"budget-progress",children:[e.jsx("div",{className:"progress-bar-container",children:e.jsx("div",{className:"progress-bar",style:{width:`${i}%`}})}),e.jsxs("div",{className:"budget-stats",children:[e.jsxs("div",{className:"stat",children:[e.jsx("span",{className:"label",children:"Spent"}),e.jsxs("span",{className:"value",children:["$",a.spent.toLocaleString()," (",i,"%)"]})]}),e.jsxs("div",{className:"stat",children:[e.jsx("span",{className:"label",children:"Remaining"}),e.jsxs("span",{className:"value",children:["$",a.remaining.toLocaleString()]})]})]})]})]}),e.jsxs("div",{className:"budget-categories",children:[e.jsx("h3",{children:"Budget Breakdown"}),a.categories.map((o,l)=>{const d=Math.round(o.spent/o.allocated*100);return e.jsxs("div",{className:"category",children:[e.jsxs("div",{className:"category-header",children:[e.jsx("span",{className:"category-name",children:o.name}),e.jsxs("span",{className:"category-figures",children:[e.jsxs("span",{className:"spent",children:["$",o.spent.toLocaleString()]}),e.jsxs("span",{className:"allocated",children:["/$",o.allocated.toLocaleString()]})]})]}),e.jsx("div",{className:"category-progress-container",children:e.jsx("div",{className:"category-progress",style:{width:`${d}%`}})})]},l)})]})]})};var Zj={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},kb=An.createContext&&An.createContext(Zj),SF=["attr","size","title"];function kF(t,a){if(t==null)return{};var s=FF(t,a),i,o;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(o=0;o<l.length;o++)i=l[o],!(a.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(t,i)&&(s[i]=t[i])}return s}function FF(t,a){if(t==null)return{};var s={};for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){if(a.indexOf(i)>=0)continue;s[i]=t[i]}return s}function bp(){return bp=Object.assign?Object.assign.bind():function(t){for(var a=1;a<arguments.length;a++){var s=arguments[a];for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(t[i]=s[i])}return t},bp.apply(this,arguments)}function Fb(t,a){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);a&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),s.push.apply(s,i)}return s}function jp(t){for(var a=1;a<arguments.length;a++){var s=arguments[a]!=null?arguments[a]:{};a%2?Fb(Object(s),!0).forEach(function(i){EF(t,i,s[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):Fb(Object(s)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(s,i))})}return t}function EF(t,a,s){return a=UF(a),a in t?Object.defineProperty(t,a,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[a]=s,t}function UF(t){var a=LF(t,"string");return typeof a=="symbol"?a:a+""}function LF(t,a){if(typeof t!="object"||!t)return t;var s=t[Symbol.toPrimitive];if(s!==void 0){var i=s.call(t,a);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(t)}function ew(t){return t&&t.map((a,s)=>An.createElement(a.tag,jp({key:s},a.attr),ew(a.child)))}function TF(t){return a=>An.createElement(QF,bp({attr:jp({},t.attr)},a),ew(t.child))}function QF(t){var a=s=>{var{attr:i,size:o,title:l}=t,d=kF(t,SF),u=o||s.size||"1em",A;return s.className&&(A=s.className),t.className&&(A=(A?A+" ":"")+t.className),An.createElement("svg",bp({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},s.attr,i,d,{className:A,style:jp(jp({color:t.color||s.color},s.style),t.style),height:u,width:u,xmlns:"http://www.w3.org/2000/svg"}),l&&An.createElement("title",null,l),t.children)};return kb!==void 0?An.createElement(kb.Consumer,null,s=>a(s)):a(Zj)}function RF(t){return TF({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 512c35.32 0 63.97-28.65 63.97-64H160.03c0 35.35 28.65 64 63.97 64zm215.39-149.71c-19.32-20.76-55.47-51.99-55.47-154.29 0-77.7-54.48-139.9-127.94-155.16V32c0-17.67-14.32-32-31.98-32s-31.98 14.33-31.98 32v20.84C118.56 68.1 64.08 130.3 64.08 208c0 102.3-36.15 133.53-55.47 154.29-6 6.45-8.66 14.16-8.61 21.71.11 16.4 12.98 32 32.1 32h383.8c19.12 0 32-15.6 32.1-32 .05-7.55-2.61-15.27-8.61-21.71z"},child:[]}]})(t)}const DF=({isOpen:t,onClose:a,userId:s})=>{const[i,o]=w.useState("notifications"),[l,d]=w.useState([]),[u,A]=w.useState([]),[p,m]=w.useState([]),[b,v]=w.useState(null),[x,C]=w.useState(!1),[D,S]=w.useState(0);console.log("MessageCenter render - isOpen:",t,"userId:",s),w.useEffect(()=>{t&&s&&(console.log("MessageCenter opened, loading data..."),_(),N())},[t,s]);const _=async()=>{C(!0);try{const X=await(await fetch("/buildhub/backend/api/homeowner/get_notifications.php",{credentials:"include"})).json();X.success&&(d(X.notifications||[]),S(X.unread_count||0))}catch(G){console.error("Error loading notifications:",G)}finally{C(!1)}},N=async()=>{try{const X=await(await fetch("/buildhub/backend/api/homeowner/get_messages.php",{credentials:"include"})).json();X.success&&(A(X.messages||[]),m(X.threads||[]))}catch(G){console.error("Error loading messages:",G)}},O=async(G,X=null)=>{try{const U={notification_ids:G};X&&(U.source=X),await fetch("/buildhub/backend/api/homeowner/mark_notifications_read.php",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(U)}),_()}catch(U){console.error("Error marking as read:",U)}},L=G=>{switch(G){case"acknowledgment":return"";case"estimate_received":return"";case"layout_approved":return"";case"construction_started":return"";case"message_sent":return"";case"message_received":return"";case"payment_required":return"";case"project_completed":return"";case"contractor_acknowledgment":return"";default:return""}},te=G=>{const X=new Date(G),E=Math.floor((new Date-X)/1e3);return E<60?"Just now":E<3600?`${Math.floor(E/60)}m ago`:E<86400?`${Math.floor(E/3600)}h ago`:E<604800?`${Math.floor(E/86400)}d ago`:X.toLocaleDateString()};return t?e.jsx("div",{className:"message-center-overlay",onClick:a,children:e.jsxs("div",{className:"message-center",onClick:G=>G.stopPropagation(),children:[e.jsxs("div",{className:"message-center-header",children:[e.jsxs("h2",{children:[i==="notifications"?" Notifications":" Messages",D>0&&e.jsx("span",{className:"unread-badge",children:D})]}),e.jsx("button",{className:"close-btn",onClick:a,children:""})]}),e.jsxs("div",{className:"message-center-tabs",children:[e.jsxs("button",{className:`tab-btn ${i==="notifications"?"active":""}`,onClick:()=>o("notifications"),children:[" Notifications",D>0&&e.jsx("span",{className:"tab-badge",children:D})]}),e.jsxs("button",{className:`tab-btn ${i==="messages"?"active":""}`,onClick:()=>o("messages"),children:[" Messages",p.reduce((G,X)=>G+(X.unread_count||0),0)>0&&e.jsx("span",{className:"tab-badge",children:p.reduce((G,X)=>G+(X.unread_count||0),0)})]})]}),e.jsx("div",{className:"message-center-content",children:x?e.jsxs("div",{className:"loading-state",children:[e.jsx("div",{className:"spinner"}),e.jsx("p",{children:"Loading..."})]}):i==="notifications"?e.jsx("div",{className:"notifications-list",children:l.length===0?e.jsxs("div",{className:"empty-state",children:[e.jsx("div",{className:"empty-icon",children:""}),e.jsx("h3",{children:"No Notifications"}),e.jsx("p",{children:"You're all caught up! New notifications will appear here."})]}):l.map(G=>e.jsxs("div",{className:`notification-item ${G.is_read?"":"unread"}`,onClick:()=>{G.is_read||O([G.id],[G.source])},children:[e.jsx("div",{className:"notification-icon",children:L(G.type)}),e.jsxs("div",{className:"notification-content",children:[e.jsx("h4",{children:G.title}),e.jsx("p",{children:G.message}),e.jsx("span",{className:"notification-time",children:te(G.created_at)})]}),!G.is_read&&e.jsx("div",{className:"unread-indicator"})]},G.id))}):e.jsx("div",{className:"messages-section",children:b?e.jsxs("div",{className:"thread-view",children:[e.jsxs("div",{className:"thread-header",children:[e.jsx("button",{className:"back-btn",onClick:()=>v(null),children:" Back"}),e.jsxs("h3",{children:[b.first_name," ",b.last_name]}),e.jsx("span",{className:"thread-role-badge",children:b.role})]}),e.jsx("div",{className:"thread-messages",children:u.filter(G=>G.from_user_id===b.other_user_id&&G.to_user_id===s||G.from_user_id===s&&G.to_user_id===b.other_user_id).map(G=>e.jsx("div",{className:`message-item ${G.from_user_id===s?"sent":"received"}`,children:e.jsxs("div",{className:"message-content",children:[e.jsx("h5",{children:G.subject}),e.jsx("p",{children:G.message}),e.jsx("span",{className:"message-time",children:te(G.created_at)})]})},G.id))})]}):e.jsx("div",{className:"threads-list",children:p.length===0?e.jsxs("div",{className:"empty-state",children:[e.jsx("div",{className:"empty-icon",children:""}),e.jsx("h3",{children:"No Messages"}),e.jsx("p",{children:"Your conversations with contractors and architects will appear here."})]}):p.map(G=>e.jsxs("div",{className:`thread-item ${G.unread_count>0?"unread":""}`,onClick:()=>v(G),children:[e.jsxs("div",{className:"thread-avatar",children:[G.first_name?.charAt(0),G.last_name?.charAt(0)]}),e.jsxs("div",{className:"thread-content",children:[e.jsxs("h4",{children:[G.first_name," ",G.last_name]}),e.jsx("p",{className:"thread-role",children:G.role}),e.jsx("span",{className:"thread-time",children:te(G.last_message_time)})]}),G.unread_count>0&&e.jsx("div",{className:"thread-unread-count",children:G.unread_count})]},G.other_user_id))})})}),i==="notifications"&&l.some(G=>!G.is_read)&&e.jsx("div",{className:"message-center-footer",children:e.jsx("button",{className:"mark-all-read-btn",onClick:()=>{const G=l.filter(E=>!E.is_read),X=G.map(E=>E.id),U=G.map(E=>E.source);O(X,U)},children:"Mark All as Read"})})]})}):null},IF=({userId:t})=>{const[a,s]=w.useState([]),[i,o]=w.useState(0),[l,d]=w.useState(!1),[u,A]=w.useState(!1);return w.useEffect(()=>{const p=async()=>{if(!t){s([]),o(0);return}try{const v=await(await fetch("/buildhub/backend/api/homeowner/get_notifications.php",{credentials:"include"})).json();v.success?(s(v.notifications||[]),o(v.unread_count||0)):(console.error("Failed to fetch notifications:",v.message),s([]),o(0))}catch(b){console.error("Error fetching notifications:",b),s([]),o(0)}};p();const m=setInterval(()=>{p()},3e4);return()=>clearInterval(m)},[t]),w.useEffect(()=>{Notification.permission!=="granted"&&Notification.permission!=="denied"&&Notification.requestPermission()},[]),e.jsxs("div",{className:"notification-system",children:[e.jsxs("div",{className:"notification-bell",onClick:()=>A(!0),children:[e.jsx("span",{className:"bell-icon",children:e.jsx(RF,{})}),i>0&&e.jsx("span",{className:"notification-badge",children:i})]}),e.jsx(DF,{isOpen:u,onClose:()=>A(!1),userId:t})]})},tx=({data:t,raw:a,title:s="Requirements",expandable:i=!0})=>{const[o,l]=w.useState(!1);let d=null;if(t&&typeof t=="object")d=t;else if(typeof a=="string"){const p=a.trim().replace(/^<[^>]+>/,"").replace(/<\/[^>]+>$/,"").trim();try{d=JSON.parse(p)}catch{d=null}}const u=d?[{key:"plot_shape",label:"Plot Shape"},{key:"topography",label:"Topography"},{key:"development_laws",label:"Development Laws"},{key:"family_needs",label:"Family Needs"},{key:"rooms",label:"Rooms"},{key:"aesthetic",label:"Aesthetic"},{key:"notes",label:"Notes"}].filter(({key:p})=>d[p]!==void 0&&d[p]!==null&&String(d[p]).trim()!==""):[],A=()=>{i&&l(!o)};return e.jsxs("div",{className:"json-card",children:[e.jsxs("div",{className:`json-card__header ${i?"json-card__header--clickable":""}`,onClick:A,style:{cursor:i?"pointer":"default"},children:[e.jsx("div",{className:"json-card__icon","aria-hidden":!0,children:""}),e.jsx("h4",{className:"json-card__title",children:s}),i&&e.jsx("div",{className:"json-card__expand-icon",children:o?"":""})]}),i?o&&(d?e.jsx("div",{className:"json-card__body",children:u.length?e.jsx("dl",{className:"json-grid",children:u.map(({key:p,label:m})=>e.jsxs("div",{className:"json-row",children:[e.jsx("dt",{className:"json-label",children:m}),e.jsx("dd",{className:"json-value",children:String(d[p])})]},p))}):e.jsx("div",{className:"json-empty",children:"No details provided"})}):e.jsx("pre",{className:"json-raw",children:(a||"").trim()})):d?e.jsx("div",{className:"json-card__body",children:u.length?e.jsx("dl",{className:"json-grid",children:u.map(({key:p,label:m})=>e.jsxs("div",{className:"json-row",children:[e.jsx("dt",{className:"json-label",children:m}),e.jsx("dd",{className:"json-value",children:String(d[p])})]},p))}):e.jsx("div",{className:"json-empty",children:"No details provided"})}):e.jsx("pre",{className:"json-raw",children:(a||"").trim()})]})},vl=({technicalDetails:t,startExpanded:a=!1})=>{const[s,i]=w.useState("floor-plans"),[o,l]=w.useState(!a),[d,u]=w.useState(!1);if(!t||Object.keys(t).length===0)return e.jsx("div",{className:"technical-details-display",children:e.jsx("div",{className:"no-technical-details",children:e.jsx("p",{children:"No technical details provided for this design."})})});const A=[{id:"floor-plans",title:" Floor Plans & Layout",icon:""},{id:"site-orientation",title:" Site & Orientation",icon:""},{id:"structural",title:" Structural Elements",icon:""},{id:"elevations",title:" Key Elevations & Sections",icon:""},{id:"construction",title:" Construction Notes",icon:""}],p=()=>{const _=t.floor_plans||{};return e.jsxs("div",{className:"technical-section-content",children:[_.layout_description&&e.jsxs("div",{className:"detail-item",children:[e.jsx("h4",{children:"Floor Plan Layout"}),e.jsx("p",{children:_.layout_description})]}),(_.living_room_dimensions||_.master_bedroom_dimensions||_.kitchen_dimensions||_.other_room_dimensions)&&e.jsxs("div",{className:"detail-item",children:[e.jsx("h4",{children:"Room Dimensions"}),e.jsxs("div",{className:"dimensions-list",children:[_.living_room_dimensions&&e.jsxs("div",{className:"dimension-item",children:[e.jsx("strong",{children:"Living Room:"})," ",_.living_room_dimensions]}),_.master_bedroom_dimensions&&e.jsxs("div",{className:"dimension-item",children:[e.jsx("strong",{children:"Master Bedroom:"})," ",_.master_bedroom_dimensions]}),_.kitchen_dimensions&&e.jsxs("div",{className:"dimension-item",children:[e.jsx("strong",{children:"Kitchen:"})," ",_.kitchen_dimensions]}),_.other_room_dimensions&&e.jsxs("div",{className:"dimension-item",children:[e.jsx("strong",{children:"Other Rooms:"}),e.jsx("div",{className:"other-rooms",children:_.other_room_dimensions})]})]})]}),_.door_window_positions&&e.jsxs("div",{className:"detail-item",children:[e.jsx("h4",{children:"Door & Window Positions"}),e.jsx("p",{children:_.door_window_positions})]}),_.circulation_paths&&e.jsxs("div",{className:"detail-item",children:[e.jsx("h4",{children:"Main Circulation Paths"}),e.jsx("p",{children:_.circulation_paths})]})]})},m=()=>{const _=t.site_orientation||{};return e.jsxs("div",{className:"technical-section-content",children:[_.plot_boundaries&&e.jsxs("div",{className:"detail-item",children:[e.jsx("h4",{children:"Plot Boundaries"}),e.jsx("p",{children:_.plot_boundaries})]}),_.orientation&&e.jsxs("div",{className:"detail-item",children:[e.jsx("h4",{children:"Orientation (North Direction)"}),e.jsx("p",{children:_.orientation})]}),_.access_points&&e.jsxs("div",{className:"detail-item",children:[e.jsx("h4",{children:"Access Points"}),e.jsx("p",{children:_.access_points})]})]})},b=()=>{const _=t.structural||{};return e.jsxs("div",{className:"technical-section-content",children:[_.load_bearing_walls&&e.jsxs("div",{className:"detail-item",children:[e.jsx("h4",{children:"Load-bearing Walls"}),e.jsx("p",{children:_.load_bearing_walls})]}),_.column_positions&&e.jsxs("div",{className:"detail-item",children:[e.jsx("h4",{children:"Column Positions"}),e.jsx("p",{children:_.column_positions})]}),_.foundation_outline&&e.jsxs("div",{className:"detail-item",children:[e.jsx("h4",{children:"Foundation Outline"}),e.jsx("p",{children:_.foundation_outline})]}),_.roof_outline&&e.jsxs("div",{className:"detail-item",children:[e.jsx("h4",{children:"Roof Outline"}),e.jsx("p",{children:_.roof_outline})]})]})},v=()=>{const _=t.elevations||{};return e.jsxs("div",{className:"technical-section-content",children:[_.front_elevation&&e.jsxs("div",{className:"detail-item",children:[e.jsx("h4",{children:"Front Elevation"}),e.jsx("p",{children:_.front_elevation})]}),_.cross_sections&&e.jsxs("div",{className:"detail-item",children:[e.jsx("h4",{children:"Cross Sections"}),e.jsx("p",{children:_.cross_sections})]}),_.height_details&&e.jsxs("div",{className:"detail-item",children:[e.jsx("h4",{children:"Height Details"}),e.jsx("p",{children:_.height_details})]})]})},x=()=>{const _=t.construction||{};return e.jsxs("div",{className:"technical-section-content",children:[_.wall_thickness&&e.jsxs("div",{className:"detail-item",children:[e.jsx("h4",{children:"Wall Thickness"}),e.jsx("p",{children:_.wall_thickness})]}),_.ceiling_heights&&e.jsxs("div",{className:"detail-item",children:[e.jsx("h4",{children:"Ceiling Heights"}),e.jsx("p",{children:_.ceiling_heights})]}),_.building_codes&&e.jsxs("div",{className:"detail-item",children:[e.jsx("h4",{children:"Building Codes"}),e.jsx("p",{children:_.building_codes})]}),_.critical_instructions&&e.jsxs("div",{className:"detail-item",children:[e.jsx("h4",{children:"Critical Instructions"}),e.jsx("p",{children:_.critical_instructions})]})]})},C=()=>{switch(s){case"floor-plans":return p();case"site-orientation":return m();case"structural":return b();case"elevations":return v();case"construction":return x();default:return p()}},D=_=>{const N=t[_];return N?Object.values(N).some(O=>O&&O.trim()!==""):!1},S=async()=>{u(!0);try{const _=new Date().toLocaleDateString("en-IN",{year:"numeric",month:"long",day:"numeric"}),N=ne=>ne?typeof ne=="object"?JSON.stringify(ne,null,2):String(ne):"",O=`
        <div style="font-family: 'Times New Roman', serif; color: #1a1a1a; margin: 0; padding: 20px; line-height: 1.6; background: white;">
          <div style="text-align: center; margin-bottom: 30px; border-bottom: 3px solid #2c3e50; padding-bottom: 20px;">
            <div style="font-size: 28px; font-weight: bold; color: #2c3e50; margin-bottom: 8px;">Technical Details Report</div>
            <div style="font-size: 14px; color: #6c757d;">Generated: ${_}</div>
          </div>
          
          ${Object.entries(t).map(([ne,R])=>!R||typeof R=="object"&&Object.keys(R).length===0?"":`
              <div style="margin-bottom: 24px; page-break-inside: avoid;">
                <h3 style="color: #2c3e50; border-bottom: 2px solid #2c3e50; padding-bottom: 8px; margin-bottom: 16px;">${ne.replace(/_/g," ").replace(/\b\w/g,ee=>ee.toUpperCase())}</h3>
                ${typeof R=="object"?Object.entries(R).map(([ee,le])=>`
                    <div style="margin: 12px 0; padding: 12px; background: #f8f9fa; border-left: 4px solid #2c3e50;">
                      <strong style="display: block; margin-bottom: 6px; color: #2c3e50;">${ee.replace(/_/g," ").replace(/\b\w/g,Be=>Be.toUpperCase())}:</strong>
                      <div style="color: #495057; white-space: pre-wrap;">${N(le)}</div>
                    </div>
                  `).join(""):`
                  <div style="padding: 12px; background: #f8f9fa; border-left: 4px solid #2c3e50;">
                    <div style="color: #495057; white-space: pre-wrap;">${N(R)}</div>
                  </div>
                `}
              </div>
            `).filter(Boolean).join("")}
        </div>`,L=document.createElement("div");L.style.position="absolute",L.style.left="-9999px",L.style.width="210mm",L.style.padding="20mm",L.style.backgroundColor="white",L.innerHTML=O,document.body.appendChild(L);const te=await Gc(L,{scale:2,useCORS:!0,allowTaint:!0,backgroundColor:"#ffffff"});document.body.removeChild(L);const G=new ua("p","mm","a4"),X=te.toDataURL("image/png"),U=210,E=295,Y=te.height*U/te.width;let T=Y,Q=0;for(G.addImage(X,"PNG",0,Q,U,Y),T-=E;T>=0;)Q=T-Y,G.addPage(),G.addImage(X,"PNG",0,Q,U,Y),T-=E;const q=`Technical_Details_${Date.now().toString().slice(-6)}.pdf`;G.save(q)}catch(_){console.error("Error generating PDF:",_),alert("Error generating PDF")}finally{u(!1)}};return e.jsxs("div",{className:"technical-details-display",children:[e.jsx("div",{className:"technical-header",style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",padding:"20px",borderRadius:"12px",marginBottom:"20px",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)"},children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{children:[e.jsx("h3",{style:{margin:"0 0 8px 0",fontSize:"20px",fontWeight:"600"},children:"Technical Design Details"}),e.jsx("p",{style:{margin:0,fontSize:"14px",opacity:.9},children:"Comprehensive architectural specifications and construction details"})]}),e.jsxs("div",{style:{display:"flex",gap:"8px"},children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>l(_=>!_),style:{background:"rgba(255,255,255,0.2)",border:"1px solid rgba(255,255,255,0.3)",color:"white"},children:o?" View details":" Hide details"}),e.jsx("button",{type:"button",className:"btn btn-primary",onClick:S,disabled:d,style:{background:"#10b981",border:"1px solid #10b981",color:"white"},children:d?" Generating...":" Download PDF"})]})]})}),!o&&e.jsx("div",{className:"technical-layout",children:A.some(N=>D(N.id))?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"technical-sidebar",children:e.jsx("div",{className:"section-nav",children:A.map(N=>D(N.id)?e.jsxs("button",{className:`section-nav-item ${s===N.id?"active":""}`,onClick:()=>i(N.id),children:[e.jsx("span",{className:"section-icon",children:N.icon}),e.jsx("span",{className:"section-title",children:N.title})]},N.id):null)})}),e.jsx("div",{className:"technical-content",children:C()})]}):e.jsx("div",{className:"technical-grid",children:Object.entries(t).map(([N,O])=>e.jsxs("div",{style:{padding:"16px",background:"linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%)",borderRadius:"10px",border:"1px solid #e5e7eb",boxShadow:"0 2px 6px rgba(0, 0, 0, 0.05)",transition:"all 0.2s ease",height:"100%",display:"flex",flexDirection:"column"},onMouseEnter:L=>{L.currentTarget.style.transform="translateY(-2px)",L.currentTarget.style.boxShadow="0 6px 12px rgba(0, 0, 0, 0.08)"},onMouseLeave:L=>{L.currentTarget.style.transform="translateY(0)",L.currentTarget.style.boxShadow="0 2px 6px rgba(0, 0, 0, 0.05)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:"10px",paddingBottom:"8px",borderBottom:"2px solid #667eea"},children:[e.jsx("span",{style:{fontSize:"20px",marginRight:"8px"},children:N.includes("floor")?"":N.includes("site")?"":N.includes("structural")?"":N.includes("elevation")?"":N.includes("construction")?"":N.includes("room")?"":N.includes("cost")||N.includes("price")?"":N.includes("material")?"":N.includes("labor")?"":""}),e.jsx("h4",{style:{margin:0,color:"#374151",fontSize:"14px",fontWeight:"600",lineHeight:"1.3"},children:N.replace(/_/g," ").replace(/\b\w/g,L=>L.toUpperCase())})]}),e.jsx("div",{style:{color:"#6b7280",whiteSpace:"pre-wrap",lineHeight:"1.5",fontSize:"13px",flex:1},children:typeof O=="object"&&O!==null?Object.entries(O).map(([L,te])=>e.jsxs("div",{style:{margin:"6px 0",padding:"6px",background:"white",borderRadius:"4px",borderLeft:"2px solid #667eea",fontSize:"12px"},children:[e.jsxs("strong",{style:{color:"#495057",fontSize:"12px"},children:[L.replace(/_/g," ").replace(/\b\w/g,G=>G.toUpperCase()),":"," "]}),e.jsx("span",{style:{color:"#6b7280",fontSize:"12px"},children:typeof te=="object"?JSON.stringify(te,null,2):String(te)})]},L)):e.jsx("div",{style:{fontSize:"13px",lineHeight:"1.4",wordBreak:"break-word"},children:String(O)})})]},N))})})]})},PF=({user:t,onLogout:a,className:s="",showRole:i=!0,size:o="medium",position:l="bottom-right"})=>{const d=$i(),[u,A]=w.useState(!1),p=w.useRef(null);w.useEffect(()=>{const S=_=>{p.current&&!p.current.contains(_.target)&&A(!1)};return u&&document.addEventListener("mousedown",S),()=>{document.removeEventListener("mousedown",S)}},[u]);const m=()=>{A(!u)},b=()=>{A(!1)},v=()=>{A(!1),d("/homeowner/profile")},x=()=>{A(!1),a&&a()},C=()=>{if(t?.first_name&&t?.last_name)return`${t.first_name.charAt(0)}${t.last_name.charAt(0)}`.toUpperCase();if(t?.name){const S=t.name.split(" ");return`${S[0]?.[0]||""}${S[1]?.[0]||""}`.toUpperCase()}return t?.email?t.email.charAt(0).toUpperCase():"H"},D=()=>{if(!i)return null;const S=t?.role||"Homeowner";return S.charAt(0).toUpperCase()+S.slice(1)};return e.jsxs("div",{ref:p,className:`profile-button-container ${s}`,children:[e.jsxs("button",{className:`profile-button ${o}`,onClick:m,"aria-haspopup":"menu","aria-expanded":u,children:[e.jsx("div",{className:"profile-avatar",children:t?.avatar_url?e.jsx("img",{src:t.avatar_url,alt:"Profile",style:{width:"100%",height:"100%",borderRadius:"50%",objectFit:"cover"}}):C()}),e.jsx("div",{className:"profile-info",children:i&&e.jsx("div",{className:"profile-role",children:D()})}),e.jsx("div",{className:`profile-arrow ${u?"open":""}`,children:""})]}),e.jsx(HF,{isOpen:u,onClose:b,user:t,position:l,onProfileSetup:v,onLogout:x})]})},HF=({isOpen:t,onClose:a,user:s,position:i,onProfileSetup:o,onLogout:l})=>{const d=w.useRef(null);return w.useEffect(()=>{const u=A=>{d.current&&!d.current.contains(A.target)&&a()};return t&&document.addEventListener("mousedown",u),()=>{document.removeEventListener("mousedown",u)}},[t,a]),t?e.jsx("div",{ref:d,className:`profile-popup ${i}`,children:e.jsxs("div",{className:"profile-popup-content",children:[e.jsxs("div",{className:"profile-popup-header",children:[e.jsx("div",{className:"profile-popup-avatar",children:s?.avatar_url?e.jsx("img",{src:s.avatar_url,alt:"Profile",style:{width:"100%",height:"100%",borderRadius:"50%",objectFit:"cover"}}):s?.first_name?.charAt(0)+s?.last_name?.charAt(0)}),e.jsxs("div",{className:"profile-popup-info",children:[e.jsxs("div",{className:"profile-popup-name",children:[s?.first_name," ",s?.last_name]}),e.jsx("div",{className:"profile-popup-role",children:s?.role?.charAt(0).toUpperCase()+s?.role?.slice(1)})]})]}),e.jsx("div",{className:"profile-popup-divider"}),e.jsxs("div",{className:"profile-popup-menu",children:[e.jsxs("button",{className:"profile-popup-item",onClick:o,children:[e.jsx("span",{className:"profile-popup-icon",children:""}),e.jsx("span",{children:"Profile Settings"})]}),e.jsxs("button",{className:"profile-popup-item logout",onClick:l,children:[e.jsx("span",{className:"profile-popup-icon",children:""}),e.jsx("span",{children:"Logout"})]})]})]})}):null},tw=({paymentId:t,paymentMethod:a,amount:s,onUploadComplete:i,onCancel:o,show:l=!1})=>{const d=Xn(),u=w.useRef(null),[A,p]=w.useState(!1),[m,b]=w.useState([]),[v,x]=w.useState(0),[C,D]=w.useState({transaction_reference:"",payment_date:new Date().toISOString().split("T")[0],payment_method:a||"bank_transfer",notes:""});An.useEffect(()=>(l?(document.body.style.overflow="hidden",document.body.classList.add("modal-open")):(document.body.style.overflow="",document.body.classList.remove("modal-open")),()=>{document.body.style.overflow="",document.body.classList.remove("modal-open")}),[l]),An.useEffect(()=>{const E=Y=>{Y.key==="Escape"&&l&&!A&&o()};return l&&document.addEventListener("keydown",E),()=>{document.removeEventListener("keydown",E)}},[l,A,o]);const S=E=>{const T=Array.from(E.target.files).filter(Q=>{const q=Q.type.startsWith("image/")||Q.type==="application/pdf",ne=Q.size<=10*1024*1024;return q?ne?!0:(d.error(`${Q.name} is too large. Maximum file size is 10MB.`),!1):(d.error(`${Q.name} is not a valid file type. Please upload images or PDF files.`),!1)});b(T)},_=E=>{E.preventDefault(),E.stopPropagation()},N=E=>{E.preventDefault(),E.stopPropagation();const T=Array.from(E.dataTransfer.files).filter(Q=>{const q=Q.type.startsWith("image/")||Q.type==="application/pdf",ne=Q.size<=10*1024*1024;return q&&ne});b(T)},O=E=>{b(Y=>Y.filter((T,Q)=>Q!==E))},L=E=>{const{name:Y,value:T}=E.target;D(Q=>({...Q,[Y]:T}))},te=async()=>{if(m.length===0){d.error("Please select at least one receipt file to upload");return}if(!C.transaction_reference.trim()){d.error("Please enter the transaction reference number");return}if(!C.payment_date){d.error("Please select the payment date");return}try{p(!0),x(0);const E=new FormData;E.append("payment_id",t),E.append("transaction_reference",C.transaction_reference),E.append("payment_date",C.payment_date),E.append("payment_method",C.payment_method),E.append("notes",C.notes),m.forEach((Q,q)=>{E.append("receipt_files[]",Q)});const T=await(await fetch("/buildhub/backend/api/homeowner/upload_payment_receipt.php",{method:"POST",credentials:"include",body:E})).json();T.success?(d.success("Receipt uploaded successfully! Contractor will verify the payment."),x(100),i&&i(T.data)):d.error("Failed to upload receipt: "+T.message)}catch(E){console.error("Receipt upload error:",E),d.error("Error uploading receipt: "+E.message)}finally{p(!1)}},G=E=>{if(E===0)return"0 Bytes";const Y=1024,T=["Bytes","KB","MB","GB"],Q=Math.floor(Math.log(E)/Math.log(Y));return parseFloat((E/Math.pow(Y,Q)).toFixed(2))+" "+T[Q]},X=E=>{switch(E){case"bank_transfer":return"";case"upi":return"";case"cash":return"";case"cheque":return"";default:return""}},U=E=>{switch(E){case"bank_transfer":return"Bank Transfer";case"upi":return"UPI Payment";case"cash":return"Cash Payment";case"cheque":return"Cheque Payment";default:return"Payment"}};return l?e.jsx("div",{className:"receipt-upload-modal",children:e.jsx("div",{className:"modal-overlay",onClick:E=>{E.target===E.currentTarget&&!A&&o()},children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("div",{children:e.jsxs("h2",{children:[X(a)," Upload Payment Receipt"]})}),e.jsxs("div",{className:"header-actions",children:[e.jsx("button",{className:"secondary-btn",onClick:o,disabled:A,children:"Cancel"}),e.jsx("button",{className:"upload-btn",onClick:te,disabled:A||m.length===0,children:A?"Uploading...":`Upload Receipt${m.length>1?"s":""}`})]})]}),e.jsxs("div",{className:"modal-body",children:[e.jsxs("div",{className:"payment-summary",children:[e.jsx("h3",{children:"Payment Details"}),e.jsxs("div",{className:"summary-grid",children:[e.jsxs("div",{className:"summary-item",children:[e.jsx("label",{children:"Payment Method:"}),e.jsx("span",{children:U(a)})]}),e.jsxs("div",{className:"summary-item",children:[e.jsx("label",{children:"Amount:"}),e.jsxs("span",{children:["",s?.toLocaleString("en-IN")]})]}),e.jsxs("div",{className:"summary-item",children:[e.jsx("label",{children:"Payment ID:"}),e.jsxs("span",{children:["#",t]})]})]})]}),e.jsxs("div",{className:"transaction-details",children:[e.jsx("h3",{children:"Transaction Details"}),e.jsxs("div",{className:"form-grid",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"transaction_reference",children:"Transaction Reference Number *"}),e.jsx("input",{type:"text",id:"transaction_reference",name:"transaction_reference",value:C.transaction_reference,onChange:L,placeholder:a==="bank_transfer"?"NEFT/RTGS Reference Number":a==="upi"?"UPI Transaction ID":a==="cheque"?"Cheque Number":"Transaction Reference",required:!0}),e.jsxs("div",{className:"field-info",children:[a==="bank_transfer"&&"Enter the NEFT/RTGS reference number from your bank",a==="upi"&&"Enter the UPI transaction ID from your payment app",a==="cheque"&&"Enter the cheque number",a==="cash"&&"Enter any reference number or receipt number"]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"payment_date",children:"Payment Date *"}),e.jsx("input",{type:"date",id:"payment_date",name:"payment_date",value:C.payment_date,onChange:L,max:new Date().toISOString().split("T")[0],required:!0}),e.jsx("div",{className:"field-info",children:"Select the date when you made the payment"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"payment_method",children:"Payment Method *"}),e.jsxs("select",{id:"payment_method",name:"payment_method",value:C.payment_method,onChange:L,required:!0,children:[e.jsx("option",{value:"bank_transfer",children:" Bank Transfer"}),e.jsx("option",{value:"upi",children:" UPI Payment"}),e.jsx("option",{value:"cash",children:" Cash Payment"}),e.jsx("option",{value:"cheque",children:" Cheque Payment"}),e.jsx("option",{value:"other",children:" Other"})]}),e.jsx("div",{className:"field-info",children:"Select the method you used to make the payment"})]}),e.jsxs("div",{className:"form-group full-width",children:[e.jsx("label",{htmlFor:"notes",children:"Additional Notes"}),e.jsx("textarea",{id:"notes",name:"notes",value:C.notes,onChange:L,placeholder:"Any additional information about the payment...",rows:"3",maxLength:"500"}),e.jsxs("div",{className:"field-info",children:[C.notes.length,"/500 characters"]})]})]})]}),e.jsxs("div",{className:"file-upload-section",children:[e.jsx("h3",{children:"Upload Receipt/Proof"}),e.jsxs("div",{className:"upload-instructions",children:[e.jsx("p",{children:"Please upload clear photos or scanned copies of your payment receipt/proof:"}),e.jsxs("ul",{children:[e.jsx("li",{children:" Bank transfer receipt/confirmation"}),e.jsx("li",{children:" UPI payment screenshot"}),e.jsx("li",{children:" Cheque photo (front and back)"}),e.jsx("li",{children:" Cash receipt from contractor"}),e.jsx("li",{children:" Supported formats: JPG, PNG, PDF (max 10MB each)"})]})]}),e.jsxs("div",{className:"file-drop-zone",onDragOver:_,onDrop:N,onClick:()=>u.current?.click(),children:[e.jsxs("div",{className:"drop-zone-content",children:[e.jsx("div",{className:"upload-icon",children:""}),e.jsx("p",{children:"Drag and drop files here or click to browse"}),e.jsx("p",{className:"file-types",children:"Images (JPG, PNG) or PDF files, max 10MB each"})]}),e.jsx("input",{ref:u,type:"file",multiple:!0,accept:"image/*,.pdf",onChange:S,style:{display:"none"}})]}),m.length>0&&e.jsxs("div",{className:"selected-files",children:[e.jsxs("h4",{children:["Selected Files (",m.length,")"]}),e.jsx("div",{className:"files-list",children:m.map((E,Y)=>e.jsxs("div",{className:"file-item",children:[e.jsxs("div",{className:"file-info",children:[e.jsx("div",{className:"file-icon",children:E.type.startsWith("image/")?"":""}),e.jsxs("div",{className:"file-details",children:[e.jsx("div",{className:"file-name",children:E.name}),e.jsx("div",{className:"file-size",children:G(E.size)})]})]}),e.jsx("button",{className:"remove-file-btn",onClick:()=>O(Y),disabled:A,children:""})]},Y))})]}),A&&e.jsxs("div",{className:"upload-progress",children:[e.jsx("div",{className:"progress-bar",children:e.jsx("div",{className:"progress-fill",style:{width:`${v}%`}})}),e.jsxs("p",{children:["Uploading receipt... ",v,"%"]})]})]}),e.jsxs("div",{className:"verification-info",children:[e.jsx("h4",{children:" What happens next?"}),e.jsxs("ol",{children:[e.jsx("li",{children:"Your receipt will be uploaded securely"}),e.jsx("li",{children:"The contractor will be notified to verify the payment"}),e.jsx("li",{children:"Verification typically takes 1-2 business days"}),e.jsx("li",{children:"You'll receive a notification once verified"}),e.jsx("li",{children:'Payment status will be updated to "Completed"'})]})]})]})]})})}):null},MF=({amount:t,paymentRequest:a,onPaymentInitiated:s,onCancel:i,show:o=!1})=>{const l=Xn(),[d,u]=w.useState(!1),[A,p]=w.useState(null),[m,b]=w.useState(null),[v,x]=w.useState(!1),[C,D]=w.useState(!1),[S,_]=w.useState(null),[N,O]=w.useState(null),[L,te]=w.useState(null);w.useEffect(()=>{o&&t>0?(G(),document.body.style.overflow="hidden",document.body.classList.add("modal-open")):o||(document.body.style.overflow="",document.body.classList.remove("modal-open"))},[o,t]),w.useEffect(()=>{const R=z=>{z.key==="Escape"&&o&&i()};return o&&document.addEventListener("keydown",R),()=>{document.removeEventListener("keydown",R)}},[o,i]);const G=async()=>{try{u(!0);const z=await(await fetch("/buildhub/backend/api/homeowner/get_payment_methods.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({amount:t})})).json();z.success?p(z.data):l.error("Failed to load payment methods: "+z.message)}catch(R){console.error("Error loading payment methods:",R),l.error("Error loading payment methods")}finally{u(!1)}},X=async(R,z)=>{b({key:R,...z}),R==="razorpay"?await U():await E(R)},U=async()=>{try{u(!0);let R=0;for(;(!window.Razorpay||window._razorpayLoading)&&R<20;)await new Promise($=>setTimeout($,100)),R++;if(!window.Razorpay){l.error("Payment system not loaded. Please refresh the page and try again.");return}const ee=await(await fetch("/buildhub/backend/api/homeowner/initiate_stage_payment.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({payment_request_id:a.id,amount:t})})).json();if(!ee.success){l.error("Failed to create payment order: "+ee.message);return}const le={key:ee.data.razorpay_key_id,amount:ee.data.amount,currency:ee.data.currency,name:"BuildHub",description:`Payment for ${a.stage_name} stage`,order_id:ee.data.razorpay_order_id,handler:async function($){try{const k=await(await fetch("/buildhub/backend/api/homeowner/verify_stage_payment.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({payment_request_id:a.id,razorpay_order_id:$.razorpay_order_id,razorpay_payment_id:$.razorpay_payment_id,razorpay_signature:$.razorpay_signature})})).json();k.success?(l.success("Payment completed successfully!"),s&&s(k.data)):l.error("Payment verification failed: "+k.message)}catch(ue){console.error("Payment verification error:",ue),l.error("Payment verification failed")}},prefill:{name:a.homeowner_name||"",email:a.homeowner_email||"",contact:a.homeowner_phone||""},theme:{color:"#007bff"}};new window.Razorpay(le).open()}catch(R){console.error("Razorpay payment error:",R),l.error("Failed to initiate payment: "+R.message)}finally{u(!1)}},E=async R=>{try{u(!0);const ee=await(await fetch("/buildhub/backend/api/homeowner/initiate_alternative_payment.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({payment_type:"stage_payment",reference_id:a.id,payment_method:R,amount:t,notes:`Payment for ${a.stage_name} stage`})})).json();ee.success?(_(ee.data.instructions),O(ee.data.bank_details),te(ee.data.payment_id),x(!0),l.success(`${m.name} payment initiated. Please follow the instructions.`),s&&s(ee.data)):l.error("Failed to initiate payment: "+ee.message)}catch(z){console.error("Alternative payment error:",z),l.error("Failed to initiate payment: "+z.message)}finally{u(!1)}},Y=R=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0,maximumFractionDigits:0}).format(R),T=()=>{x(!1),D(!0)},Q=R=>{D(!1),l.success("Receipt uploaded successfully! The contractor will verify your payment."),s&&s(R)},q=()=>{D(!1),x(!0)},ne=(R,z)=>{navigator.clipboard.writeText(R).then(()=>{l.success(`${z} copied to clipboard!`)}).catch(()=>{l.error("Failed to copy to clipboard")})};return o?v&&S?e.jsx("div",{className:"payment-method-modal",children:e.jsx("div",{className:"modal-overlay",onClick:R=>{R.target===R.currentTarget&&i()},children:e.jsxs("div",{className:"modal-content instructions-modal",children:[e.jsxs("div",{className:"modal-header",children:[e.jsxs("h2",{children:[m.icon," ",S.title]}),e.jsx("button",{className:"close-btn",onClick:i,children:""})]}),e.jsxs("div",{className:"modal-body",children:[e.jsxs("div",{className:"amount-display",children:[e.jsxs("h3",{children:["Amount: ",Y(t)]}),e.jsx("div",{className:"processing-time",children:e.jsxs("span",{className:"time-badge",children:[" ",S.processing_time]})})]}),N&&e.jsxs("div",{className:"bank-details-section",children:[e.jsx("h4",{children:" Bank Details:"}),e.jsxs("div",{className:"bank-details-grid",children:[e.jsxs("div",{className:"detail-item",children:[e.jsx("label",{children:"Account Name:"}),e.jsxs("div",{className:"copyable-field",children:[e.jsx("span",{children:N.account_name}),e.jsx("button",{className:"copy-btn",onClick:()=>ne(N.account_name,"Account Name"),children:""})]})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("label",{children:"Account Number:"}),e.jsxs("div",{className:"copyable-field",children:[e.jsx("span",{children:N.account_number}),e.jsx("button",{className:"copy-btn",onClick:()=>ne(N.account_number,"Account Number"),children:""})]})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("label",{children:"IFSC Code:"}),e.jsxs("div",{className:"copyable-field",children:[e.jsx("span",{children:N.ifsc_code}),e.jsx("button",{className:"copy-btn",onClick:()=>ne(N.ifsc_code,"IFSC Code"),children:""})]})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("label",{children:"Bank Name:"}),e.jsx("span",{children:N.bank_name})]}),N.upi_id&&e.jsxs("div",{className:"detail-item",children:[e.jsx("label",{children:"UPI ID:"}),e.jsxs("div",{className:"copyable-field",children:[e.jsx("span",{children:N.upi_id}),e.jsx("button",{className:"copy-btn",onClick:()=>ne(N.upi_id,"UPI ID"),children:""})]})]})]})]}),N&&N.upi_id&&m.key==="upi"&&e.jsxs("div",{className:"upi-qr-section",children:[e.jsx("h4",{children:" UPI QR Code:"}),e.jsxs("div",{className:"qr-code-container",children:[e.jsx("img",{src:`https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=${encodeURIComponent(`upi://pay?pa=${N.upi_id}&am=${t}&tn=BuildHub Payment for Project ${a.id}`)}`,alt:"UPI QR Code",className:"upi-qr-code"}),e.jsx("p",{children:"Scan this QR code with any UPI app"})]})]}),e.jsxs("div",{className:"instructions-section",children:[e.jsx("h4",{children:" Step-by-Step Instructions:"}),e.jsx("ol",{className:"instruction-steps",children:S.steps.map((R,z)=>e.jsx("li",{children:R},z))})]}),S.safety_note&&e.jsxs("div",{className:"safety-note",children:[e.jsx("h4",{children:" Safety Note:"}),e.jsx("p",{children:S.safety_note})]}),e.jsxs("div",{className:"verification-note",children:[e.jsx("h4",{children:" Verification Required:"}),e.jsx("p",{children:"After completing the payment, please upload your receipt/proof for verification. The payment will be marked as completed once verified by the contractor or admin."})]})]}),e.jsxs("div",{className:"modal-actions",children:[e.jsx("button",{className:"secondary-btn",onClick:i,children:"Close Instructions"}),e.jsx("button",{className:"upload-receipt-btn",onClick:T,children:" Upload Receipt"})]})]})})}):e.jsxs("div",{className:"payment-method-modal",children:[e.jsx("div",{className:"modal-overlay",onClick:R=>{R.target===R.currentTarget&&i()},children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h2",{children:" Choose Payment Method"}),e.jsx("button",{className:"close-btn",onClick:i,children:""})]}),e.jsx("div",{className:"modal-body",children:d?e.jsxs("div",{className:"loading-spinner",children:[e.jsx("div",{className:"spinner"}),e.jsx("p",{children:"Loading payment methods..."})]}):A?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"amount-display",children:e.jsxs("h3",{children:["Amount: ",A.formatted_amount]})}),e.jsx("div",{className:"methods-grid",children:Object.entries(A.available_methods).map(([R,z])=>e.jsxs("div",{className:`method-card ${R===A.recommended_method?"recommended":""} ${z.status==="unavailable"?"disabled":""}`,onClick:()=>z.status!=="unavailable"&&X(R,z),children:[e.jsx("div",{className:"method-icon",children:z.icon}),e.jsxs("div",{className:"method-info",children:[e.jsx("h4",{children:z.name}),e.jsx("p",{className:"method-description",children:z.description}),e.jsxs("div",{className:"method-details",children:[e.jsxs("span",{className:"processing-time",children:[" ",z.processing_time]}),e.jsx("span",{className:"fees",children:z.fees})]}),z.status==="unavailable"?e.jsxs("div",{className:"status-badge unavailable",children:[" ",z.message]}):z.status==="limited"?e.jsxs("div",{className:"status-badge limited",children:[" ",z.message]}):e.jsx("div",{className:"status-badge available",children:" Available"}),R===A.recommended_method&&e.jsx("div",{className:"recommended-badge",children:" Recommended"})]})]},R))}),A.recommendations&&A.recommendations.length>0&&e.jsxs("div",{className:"recommendations",children:[e.jsx("h4",{children:" Recommendations:"}),e.jsx("ul",{children:A.recommendations.map((R,z)=>e.jsxs("li",{children:[e.jsxs("strong",{children:[A.available_methods[R.method]?.name,":"]})," ",R.reason]},z))})]})]}):e.jsxs("div",{className:"error-message",children:[e.jsx("p",{children:"Failed to load payment methods. Please try again."}),e.jsx("button",{className:"retry-btn",onClick:G,children:" Retry"})]})}),e.jsx("div",{className:"modal-actions",children:e.jsx("button",{className:"secondary-btn",onClick:i,children:"Cancel"})})]})}),e.jsx(tw,{show:C,paymentId:L,paymentMethod:m?.key,amount:t,onUploadComplete:Q,onCancel:q})]}):null},OF=({activeTab:t,isVisible:a=!0})=>{const s=Xn(),[i,o]=w.useState([]),[l,d]=w.useState([]),[u,A]=w.useState(null),[p,m]=w.useState(null),[b,v]=w.useState(!1),[x,C]=w.useState(!1),[D,S]=w.useState(!1),[_,N]=w.useState(!1),[O,L]=w.useState(!1),[te,G]=w.useState(!1),[X,U]=w.useState("all"),[E,Y]=w.useState(!1),T=async()=>{L(!0);try{const Ne=await(await fetch("/buildhub/backend/api/homeowner/get_progress_reports.php",{credentials:"include"})).json();Ne.success?o(Ne.data.reports||[]):s.error("Failed to load progress reports: "+Ne.message)}catch(K){console.error("Error loading progress reports:",K),s.error("Error loading progress reports")}finally{L(!1)}},Q=async()=>{G(!0);try{const Ne=await(await fetch("/buildhub/backend/api/homeowner/get_payment_requests.php",{credentials:"include"})).json();Ne.success?d(Ne.data.requests||[]):s.error("Failed to load payment requests: "+Ne.message)}catch(K){console.error("Error loading payment requests:",K),s.error("Error loading payment requests")}finally{G(!1)}},q=async K=>{try{const Ee=await(await fetch(`/buildhub/backend/api/homeowner/view_progress_report.php?report_id=${K}`,{credentials:"include"})).json();Ee.success?(A(Ee.data),v(!0)):s.error("Failed to load report details: "+Ee.message)}catch(Ne){console.error("Error loading report details:",Ne),s.error("Error loading report details")}},ne=K=>{m(K),C(!0),document.body.style.overflow="hidden",document.body.classList.add("modal-open")},R=async(K,Ne,Ee="",st="")=>{try{const Ge=await(await fetch("/buildhub/backend/api/homeowner/respond_payment_request.php",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({request_id:K,action:Ne,homeowner_notes:Ee,rejection_reason:st})})).json();Ge.success?(s.success(Ge.message),Q(),C(!1),document.body.style.overflow="",document.body.classList.remove("modal-open")):s.error("Failed to respond to payment request: "+Ge.message)}catch(ut){console.error("Error responding to payment request:",ut),s.error("Error responding to payment request")}},z=async K=>{m(K),S(!0)},ee=K=>{S(!1),m(null),Q(),C(!1),document.body.style.overflow="",document.body.classList.remove("modal-open")},le=()=>{S(!1),m(null)},Be=()=>{N(!0)},$=K=>{N(!1),s.success("Receipt uploaded successfully! The contractor will verify your payment."),Q()},ue=()=>{N(!1)},k=async(K,Ne="")=>{try{const st=await(await fetch("/buildhub/backend/api/homeowner/view_progress_report.php",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({report_id:K,notes:Ne})})).json();st.success?(s.success("Report acknowledged successfully"),T(),v(!1)):s.error("Failed to acknowledge report: "+st.message)}catch(Ee){console.error("Error acknowledging report:",Ee),s.error("Error acknowledging report")}};if(w.useEffect(()=>{t==="progress"&&a&&(T(),Q())},[t,a]),w.useEffect(()=>{const K=Ne=>{Ne.key==="Escape"&&x&&(C(!1),document.body.style.overflow="",document.body.classList.remove("modal-open"))};return x&&document.addEventListener("keydown",K),()=>{document.removeEventListener("keydown",K)}},[x]),!a)return null;const I=K=>new Date(K).toLocaleDateString("en-IN",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),H=K=>{const Ne={sent:{color:"#007bff",bg:"#e3f2fd",text:" Sent"},viewed:{color:"#28a745",bg:"#e8f5e9",text:" Viewed"},acknowledged:{color:"#6f42c1",bg:"#f3e5f5",text:" Acknowledged"}},Ee=Ne[K]||Ne.sent;return e.jsx("span",{style:{background:Ee.bg,color:Ee.color,padding:"4px 12px",borderRadius:"20px",fontSize:"12px",fontWeight:"600",border:`1px solid ${Ee.color}20`},children:Ee.text})},re=K=>({daily:"",weekly:"",monthly:""})[K]||"",J=K=>{const Ne={pending:{color:"#ffc107",bg:"#fff3cd",text:" Pending Review"},approved:{color:"#28a745",bg:"#d4edda",text:" Approved"},paid:{color:"#6f42c1",bg:"#f3e5f5",text:" Paid"},rejected:{color:"#dc3545",bg:"#f8d7da",text:" Rejected"}},Ee=Ne[K]||Ne.pending;return e.jsx("span",{style:{background:Ee.bg,color:Ee.color,padding:"6px 12px",borderRadius:"20px",fontSize:"12px",fontWeight:"600",border:`1px solid ${Ee.color}30`},children:Ee.text})},V=i.filter(K=>X==="all"?!0:X==="payment_requests"||X==="payment_history"?!1:K.report_type===X),oe=X==="payment_requests"?l.filter(K=>K.status!=="paid"&&K.verification_status!=="verified"):X==="payment_history"?l.filter(K=>K.status==="paid"||K.verification_status==="verified"):[];return e.jsxs("div",{className:"section-card",style:{marginTop:"1rem"},children:[e.jsx("div",{className:"section-header",children:e.jsxs("div",{className:"header-content",children:[e.jsxs("div",{children:[e.jsx("h2",{children:" Construction Progress Reports"}),e.jsx("p",{children:"View detailed progress reports submitted by your contractor with comprehensive project updates"})]}),e.jsx("button",{className:"btn btn-primary",onClick:T,disabled:O,children:O?" Loading...":" Refresh Reports"})]})}),e.jsx("div",{className:"progress-filters",style:{display:"flex",gap:"10px",marginBottom:"20px",borderBottom:"1px solid #e9ecef",paddingBottom:"15px",flexWrap:"wrap"},children:["all","daily","weekly","monthly","payment_requests","payment_history"].map(K=>e.jsx("button",{className:`filter-btn ${X===K?"active":""}`,onClick:()=>U(K),style:{padding:"8px 16px",border:"2px solid #007bff",background:X===K?"#007bff":"transparent",color:X===K?"white":"#007bff",borderRadius:"6px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease",textTransform:"capitalize"},children:K==="all"?" All Reports":K==="payment_requests"?" Payment Requests":K==="payment_history"?" Payment History":`${re(K)} ${K} Reports`},K))}),e.jsxs("div",{className:"section-content",children:[X==="payment_requests"&&e.jsx(e.Fragment,{children:te?e.jsxs("div",{style:{textAlign:"center",padding:"40px"},children:[e.jsx("div",{style:{fontSize:"48px",marginBottom:"16px"},children:""}),e.jsx("h3",{children:"Loading Payment Requests..."}),e.jsx("p",{children:"Fetching payment requests from your contractors"})]}):oe.length===0?e.jsxs("div",{style:{textAlign:"center",padding:"40px"},children:[e.jsx("div",{style:{fontSize:"48px",marginBottom:"16px"},children:""}),e.jsx("h3",{children:"No Pending Payment Requests"}),e.jsx("p",{children:"All payment requests have been processed. Check Payment History for completed payments."})]}):e.jsx("div",{className:"payment-requests-grid",style:{display:"grid",gap:"20px",gridTemplateColumns:"repeat(auto-fill, minmax(450px, 1fr))"},children:oe.map(K=>e.jsxs("div",{className:"payment-request-card",style:{background:"white",border:"1px solid #e9ecef",borderRadius:"12px",padding:"20px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)",transition:"all 0.3s ease",position:"relative"},children:[e.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,height:"4px",background:K.status==="pending"?"linear-gradient(135deg, #ffc107 0%, #ff8c00 100%)":K.status==="approved"?"linear-gradient(135deg, #28a745 0%, #20c997 100%)":K.status==="paid"?"linear-gradient(135deg, #6f42c1 0%, #e83e8c 100%)":"linear-gradient(135deg, #dc3545 0%, #fd7e14 100%)",borderRadius:"12px 12px 0 0"}}),e.jsxs("div",{className:"payment-header",style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"15px",marginTop:"10px"},children:[e.jsxs("div",{children:[e.jsxs("h3",{style:{margin:"0 0 8px 0",color:"#2c3e50",display:"flex",alignItems:"center",gap:"8px"},children:[" ",K.stage_name," Stage"]}),e.jsxs("p",{style:{margin:"0",color:"#6c757d",fontSize:"14px",fontWeight:"500"},children:[K.contractor_first_name," ",K.contractor_last_name]})]}),J(K.status)]}),e.jsxs("div",{className:"payment-amount",style:{background:"#f8f9fa",padding:"15px",borderRadius:"8px",marginBottom:"15px",textAlign:"center"},children:[e.jsxs("div",{style:{fontSize:"24px",fontWeight:"700",color:"#667eea"},children:["",parseFloat(K.requested_amount).toLocaleString()]}),e.jsxs("div",{style:{fontSize:"12px",color:"#6c757d"},children:[K.completion_percentage,"% of ",K.stage_name," stage completed"]})]}),e.jsx("div",{className:"payment-details",style:{marginBottom:"15px"},children:e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"10px",fontSize:"13px",color:"#6c757d"},children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Requested:"})," ",I(K.request_date)]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Workers:"})," ",K.labor_count||"N/A"]}),K.work_start_date&&e.jsxs("div",{children:[e.jsx("strong",{children:"Work Started:"})," ",new Date(K.work_start_date).toLocaleDateString("en-IN")]}),K.work_end_date&&e.jsxs("div",{children:[e.jsx("strong",{children:"Work Ended:"})," ",new Date(K.work_end_date).toLocaleDateString("en-IN")]})]})}),K.work_description&&e.jsxs("div",{className:"work-description",style:{background:"#f8f9fa",padding:"12px",borderRadius:"6px",marginBottom:"15px",fontSize:"14px",lineHeight:"1.4"},children:[e.jsx("strong",{children:"Work Description:"}),e.jsx("br",{}),K.work_description.length>100?K.work_description.substring(0,100)+"...":K.work_description]}),e.jsxs("div",{className:"payment-actions",style:{display:"flex",gap:"10px",justifyContent:"flex-end"},children:[e.jsx("button",{onClick:()=>ne(K),style:{background:"transparent",border:"2px solid #007bff",color:"#007bff",padding:"8px 16px",borderRadius:"6px",cursor:"pointer",fontSize:"14px",fontWeight:"600"},children:" View Details"}),K.status==="pending"&&e.jsx("button",{onClick:()=>R(K.id,"approve"),style:{background:"#28a745",border:"none",color:"white",padding:"8px 16px",borderRadius:"6px",cursor:"pointer",fontSize:"14px",fontWeight:"600"},children:" Approve"}),K.status==="approved"&&e.jsx("button",{onClick:()=>z(K),disabled:E,style:{background:"#667eea",border:"none",color:"white",padding:"8px 16px",borderRadius:"6px",cursor:E?"not-allowed":"pointer",fontSize:"14px",fontWeight:"600",opacity:E?.7:1},children:E?" Processing...":" Pay Now"})]}),K.is_overdue&&e.jsxs("div",{style:{marginTop:"10px",padding:"8px 12px",background:"#fff3cd",border:"1px solid #ffeaa7",borderRadius:"4px",fontSize:"12px",color:"#856404"},children:[" This request is overdue (",K.days_since_request," days old)"]})]},K.id))})}),X==="payment_history"&&e.jsx(e.Fragment,{children:te?e.jsxs("div",{style:{textAlign:"center",padding:"40px"},children:[e.jsx("div",{style:{fontSize:"48px",marginBottom:"16px"},children:""}),e.jsx("h3",{children:"Loading Payment History..."}),e.jsx("p",{children:"Fetching your payment history"})]}):oe.length===0?e.jsxs("div",{style:{textAlign:"center",padding:"40px"},children:[e.jsx("div",{style:{fontSize:"48px",marginBottom:"16px"},children:""}),e.jsx("h3",{children:"No Payment History Yet"}),e.jsx("p",{children:"Completed payments and payments awaiting verification will appear here."})]}):e.jsx("div",{className:"payment-history-grid",style:{display:"grid",gap:"20px",gridTemplateColumns:"repeat(auto-fill, minmax(450px, 1fr))"},children:oe.map(K=>e.jsxs("div",{className:"payment-history-card",style:{background:"white",border:"1px solid #e9ecef",borderRadius:"12px",padding:"20px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)",transition:"all 0.3s ease",position:"relative"},children:[e.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,height:"4px",background:K.status==="paid"&&K.verification_status==="verified"?"linear-gradient(135deg, #28a745 0%, #20c997 100%)":"linear-gradient(135deg, #ffc107 0%, #ff8c00 100%)",borderRadius:"12px 12px 0 0"}}),e.jsxs("div",{className:"payment-header",style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"15px",marginTop:"10px"},children:[e.jsxs("div",{children:[e.jsxs("h3",{style:{margin:"0 0 8px 0",color:"#2c3e50",display:"flex",alignItems:"center",gap:"8px"},children:[" ",K.stage_name," Stage"]}),e.jsxs("p",{style:{margin:"0",color:"#6c757d",fontSize:"14px",fontWeight:"500"},children:[K.contractor_first_name," ",K.contractor_last_name]})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"6px",alignItems:"flex-end"},children:[J(K.status),K.verification_status&&e.jsxs("span",{style:{background:K.verification_status==="verified"?"#d4edda":K.verification_status==="pending"?"#fff3cd":"#f8d7da",color:K.verification_status==="verified"?"#155724":K.verification_status==="pending"?"#856404":"#721c24",padding:"4px 10px",borderRadius:"20px",fontSize:"11px",fontWeight:"600",border:`1px solid ${K.verification_status==="verified"?"#c3e6cb":K.verification_status==="pending"?"#ffeaa7":"#f5c6cb"}`},children:[K.verification_status==="verified"&&" Verified",K.verification_status==="pending"&&" Verifying",K.verification_status==="rejected"&&" Rejected"]})]})]}),e.jsxs("div",{className:"payment-amount",style:{background:"#f8f9fa",padding:"15px",borderRadius:"8px",marginBottom:"15px",textAlign:"center"},children:[e.jsxs("div",{style:{fontSize:"24px",fontWeight:"700",color:"#28a745"},children:["",parseFloat(K.requested_amount).toLocaleString()]}),e.jsxs("div",{style:{fontSize:"12px",color:"#6c757d"},children:[K.completion_percentage,"% of ",K.stage_name," stage completed"]})]}),e.jsx("div",{className:"payment-details",style:{marginBottom:"15px"},children:e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"10px",fontSize:"13px",color:"#6c757d"},children:[K.payment_date&&e.jsxs("div",{children:[e.jsx("strong",{children:"Paid On:"})," ",K.payment_date_formatted]}),K.payment_method&&e.jsxs("div",{children:[e.jsx("strong",{children:"Method:"})," ",K.payment_method==="bank_transfer"?" Bank":K.payment_method==="upi"?" UPI":K.payment_method==="cash"?" Cash":K.payment_method==="cheque"?" Cheque":K.payment_method==="razorpay"?" Razorpay":" Other"]}),K.transaction_reference&&e.jsxs("div",{style:{gridColumn:"1 / -1"},children:[e.jsx("strong",{children:"Ref:"})," ",K.transaction_reference]}),K.verified_at&&e.jsxs("div",{style:{gridColumn:"1 / -1"},children:[e.jsx("strong",{children:"Verified:"})," ",K.verified_at_formatted]})]})}),K.verification_notes&&e.jsxs("div",{className:"verification-notes",style:{background:"#e3f2fd",padding:"12px",borderRadius:"6px",marginBottom:"15px",fontSize:"14px",lineHeight:"1.4",border:"1px solid #bbdefb"},children:[e.jsx("strong",{style:{color:"#1976d2"},children:"Verification Notes:"}),e.jsx("br",{}),e.jsx("span",{style:{color:"#1565c0"},children:K.verification_notes})]}),e.jsxs("div",{className:"payment-actions",style:{display:"flex",gap:"10px",justifyContent:"flex-end"},children:[e.jsx("button",{onClick:()=>ne(K),style:{background:"transparent",border:"2px solid #007bff",color:"#007bff",padding:"8px 16px",borderRadius:"6px",cursor:"pointer",fontSize:"14px",fontWeight:"600"},children:" View Details"}),K.receipt_files&&K.receipt_files.length>0&&e.jsx("button",{onClick:()=>{window.open(`/buildhub/backend/${K.receipt_files[0].file_path}`,"_blank")},style:{background:"#28a745",border:"none",color:"white",padding:"8px 16px",borderRadius:"6px",cursor:"pointer",fontSize:"14px",fontWeight:"600"},children:" View Receipt"})]}),K.verification_status==="pending"&&e.jsx("div",{style:{marginTop:"10px",padding:"8px 12px",background:"#fff3cd",border:"1px solid #ffeaa7",borderRadius:"4px",fontSize:"12px",color:"#856404"},children:" Payment receipt is being verified by the contractor"})]},K.id))})}),X!=="payment_requests"&&X!=="payment_history"&&e.jsx(e.Fragment,{children:O?e.jsxs("div",{style:{textAlign:"center",padding:"40px"},children:[e.jsx("div",{style:{fontSize:"48px",marginBottom:"16px"},children:""}),e.jsx("h3",{children:"Loading Progress Reports..."}),e.jsx("p",{children:"Fetching your latest construction progress updates"})]}):V.length===0?e.jsxs("div",{style:{textAlign:"center",padding:"40px"},children:[e.jsx("div",{style:{fontSize:"48px",marginBottom:"16px"},children:""}),e.jsx("h3",{children:"No Progress Reports Yet"}),e.jsx("p",{children:"Your contractor will submit progress reports here as work progresses on your project."})]}):e.jsx("div",{className:"reports-grid",style:{display:"grid",gap:"20px",gridTemplateColumns:"repeat(auto-fill, minmax(400px, 1fr))"},children:V.map(K=>e.jsxs("div",{className:"report-card",style:{background:"white",border:"1px solid #e9ecef",borderRadius:"12px",padding:"20px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)",transition:"all 0.3s ease",cursor:"pointer",position:"relative"},onClick:()=>q(K.id),onMouseOver:Ne=>{Ne.currentTarget.style.transform="translateY(-2px)",Ne.currentTarget.style.boxShadow="0 4px 16px rgba(0,0,0,0.15)"},onMouseOut:Ne=>{Ne.currentTarget.style.transform="translateY(0)",Ne.currentTarget.style.boxShadow="0 2px 8px rgba(0,0,0,0.1)"},children:[e.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,height:"4px",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",borderRadius:"12px 12px 0 0"}}),e.jsxs("div",{className:"report-header",style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"15px",marginTop:"10px"},children:[e.jsxs("div",{children:[e.jsxs("h3",{style:{margin:"0 0 8px 0",color:"#2c3e50",display:"flex",alignItems:"center",gap:"8px"},children:[re(K.report_type)," ",K.report_type.charAt(0).toUpperCase()+K.report_type.slice(1)," Report"]}),e.jsx("p",{style:{margin:"0",color:"#6c757d",fontSize:"14px",fontWeight:"500"},children:K.project_name})]}),H(K.status)]}),e.jsx("div",{className:"report-meta",style:{marginBottom:"15px"},children:e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"10px",fontSize:"13px",color:"#6c757d"},children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Contractor:"})," ",K.contractor_name]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Submitted:"})," ",I(K.created_at)]}),K.period_start&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Period Start:"})," ",new Date(K.period_start).toLocaleDateString("en-IN")]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Period End:"})," ",new Date(K.period_end).toLocaleDateString("en-IN")]})]})]})}),K.summary&&e.jsxs("div",{className:"report-summary",style:{background:"#f8f9fa",padding:"15px",borderRadius:"8px",marginBottom:"15px"},children:[e.jsx("h4",{style:{margin:"0 0 10px 0",color:"#2c3e50",fontSize:"14px"},children:" Summary"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"8px",fontSize:"12px"},children:[K.summary.total_days>0&&e.jsxs("div",{children:[e.jsx("strong",{children:"Working Days:"})," ",K.summary.total_days]}),K.summary.total_workers>0&&e.jsxs("div",{children:[e.jsx("strong",{children:"Workers:"})," ",K.summary.total_workers]}),K.summary.total_hours>0&&e.jsxs("div",{children:[e.jsx("strong",{children:"Hours:"})," ",K.summary.total_hours,"h"]}),K.summary.progress_percentage>0&&e.jsxs("div",{children:[e.jsx("strong",{children:"Progress:"})," ",K.summary.progress_percentage,"%"]}),K.summary.photos_count>0&&e.jsxs("div",{children:[e.jsx("strong",{children:"Photos:"})," ",K.summary.photos_count]})]})]}),e.jsxs("div",{className:"report-actions",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("div",{style:{fontSize:"12px",color:"#6c757d"},children:K.has_photos&&" Contains Photos"}),e.jsx("div",{style:{color:"#007bff",fontSize:"14px",fontWeight:"600",display:"flex",alignItems:"center",gap:"4px"},children:" View Details"})]})]},K.id))})})]}),x&&p&&e.jsx("div",{className:"modal-overlay payment-details-modal",onClick:K=>{K.target===K.currentTarget&&(C(!1),document.body.style.overflow="",document.body.classList.remove("modal-open"))},style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.8)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:999999,padding:"20px",overflowY:"auto"},children:e.jsxs("div",{className:"modal-content",style:{background:"white",borderRadius:"16px",maxWidth:"800px",width:"100%",maxHeight:"calc(100vh - 40px)",overflow:"auto",boxShadow:"0 20px 60px rgba(0,0,0,0.3)",position:"relative",zIndex:1e6},children:[e.jsxs("div",{className:"modal-header",style:{padding:"24px",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",borderRadius:"16px 16px 0 0",display:"flex",justifyContent:"space-between",alignItems:"center",position:"sticky",top:0,zIndex:1000001},children:[e.jsxs("div",{children:[e.jsxs("h2",{style:{margin:"0 0 8px 0"},children:[" Payment Request: ",p.stage_name," Stage"]}),e.jsxs("p",{style:{margin:"0",opacity:"0.9"},children:["Requested by ",p.contractor_first_name," ",p.contractor_last_name," on ",I(p.request_date)]})]}),e.jsx("button",{onClick:()=>{C(!1),document.body.style.overflow="",document.body.classList.remove("modal-open")},style:{background:"rgba(255,255,255,0.2)",border:"none",color:"white",fontSize:"24px",width:"40px",height:"40px",borderRadius:"50%",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:""})]}),e.jsxs("div",{className:"modal-body",style:{padding:"24px",maxHeight:"calc(100vh - 200px)",overflowY:"auto"},children:[e.jsxs("div",{className:"payment-summary",style:{background:"#f8f9fa",padding:"20px",borderRadius:"12px",marginBottom:"24px",textAlign:"center"},children:[e.jsxs("div",{style:{fontSize:"32px",fontWeight:"700",color:"#667eea",marginBottom:"8px"},children:["",parseFloat(p.requested_amount).toLocaleString()]}),e.jsxs("div",{style:{fontSize:"16px",color:"#6c757d",marginBottom:"12px"},children:[p.completion_percentage,"% of ",p.stage_name," stage completed"]}),J(p.status)]}),e.jsxs("div",{className:"work-details",style:{marginBottom:"24px"},children:[e.jsx("h3",{style:{color:"#2c3e50",borderBottom:"2px solid #e9ecef",paddingBottom:"10px"},children:" Work Details"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"15px",marginTop:"15px",marginBottom:"20px"},children:[e.jsxs("div",{style:{textAlign:"center",padding:"15px",background:"#f8f9fa",borderRadius:"8px"},children:[e.jsx("div",{style:{fontSize:"1.2rem",fontWeight:"600",color:"#667eea"},children:p.labor_count||"N/A"}),e.jsx("div",{style:{fontSize:"0.9rem",color:"#6c757d"},children:"Workers"})]}),p.work_start_date&&e.jsxs("div",{style:{textAlign:"center",padding:"15px",background:"#f8f9fa",borderRadius:"8px"},children:[e.jsx("div",{style:{fontSize:"1rem",fontWeight:"600",color:"#667eea"},children:new Date(p.work_start_date).toLocaleDateString("en-IN")}),e.jsx("div",{style:{fontSize:"0.9rem",color:"#6c757d"},children:"Start Date"})]}),p.work_end_date&&e.jsxs("div",{style:{textAlign:"center",padding:"15px",background:"#f8f9fa",borderRadius:"8px"},children:[e.jsx("div",{style:{fontSize:"1rem",fontWeight:"600",color:"#667eea"},children:new Date(p.work_end_date).toLocaleDateString("en-IN")}),e.jsx("div",{style:{fontSize:"0.9rem",color:"#6c757d"},children:"End Date"})]})]}),p.work_description&&e.jsxs("div",{style:{background:"#f8f9fa",padding:"15px",borderRadius:"8px",marginBottom:"15px"},children:[e.jsx("h4",{style:{margin:"0 0 10px 0",color:"#2c3e50"},children:"Work Description"}),e.jsx("p",{style:{margin:"0",lineHeight:"1.5"},children:p.work_description})]}),p.materials_used&&e.jsxs("div",{style:{background:"#f8f9fa",padding:"15px",borderRadius:"8px",marginBottom:"15px"},children:[e.jsx("h4",{style:{margin:"0 0 10px 0",color:"#2c3e50"},children:"Materials Used"}),e.jsx("p",{style:{margin:"0",lineHeight:"1.5"},children:p.materials_used})]}),p.contractor_notes&&e.jsxs("div",{style:{background:"#e3f2fd",padding:"15px",borderRadius:"8px",border:"1px solid #bbdefb"},children:[e.jsx("h4",{style:{margin:"0 0 10px 0",color:"#1976d2"},children:"Contractor Notes"}),e.jsx("p",{style:{margin:"0",lineHeight:"1.5"},children:p.contractor_notes})]})]}),e.jsxs("div",{className:"quality-checks",style:{marginBottom:"24px"},children:[e.jsx("h3",{style:{color:"#2c3e50",borderBottom:"2px solid #e9ecef",paddingBottom:"10px"},children:" Quality & Compliance"}),e.jsxs("div",{style:{display:"flex",gap:"20px",marginTop:"15px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",padding:"10px 15px",background:p.quality_check?"#d4edda":"#f8d7da",borderRadius:"8px",border:`1px solid ${p.quality_check?"#c3e6cb":"#f5c6cb"}`},children:[e.jsx("span",{style:{fontSize:"18px"},children:p.quality_check?"":""}),e.jsxs("span",{style:{color:p.quality_check?"#155724":"#721c24",fontWeight:"600"},children:["Quality Check ",p.quality_check?"Completed":"Pending"]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",padding:"10px 15px",background:p.safety_compliance?"#d4edda":"#f8d7da",borderRadius:"8px",border:`1px solid ${p.safety_compliance?"#c3e6cb":"#f5c6cb"}`},children:[e.jsx("span",{style:{fontSize:"18px"},children:p.safety_compliance?"":""}),e.jsxs("span",{style:{color:p.safety_compliance?"#155724":"#721c24",fontWeight:"600"},children:["Safety Compliance ",p.safety_compliance?"Verified":"Pending"]})]})]})]}),e.jsxs("div",{className:"payment-actions",style:{display:"flex",gap:"15px",justifyContent:"center",marginTop:"30px"},children:[p.status==="pending"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>{const K=prompt("Please provide a reason for rejection:");K&&R(p.id,"reject","",K)},style:{background:"#dc3545",border:"none",color:"white",padding:"12px 24px",borderRadius:"8px",cursor:"pointer",fontSize:"16px",fontWeight:"600"},children:" Reject Request"}),e.jsx("button",{onClick:()=>R(p.id,"approve"),style:{background:"#28a745",border:"none",color:"white",padding:"12px 24px",borderRadius:"8px",cursor:"pointer",fontSize:"16px",fontWeight:"600"},children:" Approve Request"})]}),p.status==="approved"&&e.jsx("button",{onClick:()=>z(p),disabled:E,style:{background:"#667eea",border:"none",color:"white",padding:"15px 30px",borderRadius:"8px",cursor:E?"not-allowed":"pointer",fontSize:"18px",fontWeight:"600",opacity:E?.7:1},children:E?" Processing Payment...":" Pay "+parseFloat(p.requested_amount).toLocaleString()}),p.status==="paid"&&e.jsxs("div",{style:{padding:"15px 30px",background:"#d4edda",border:"1px solid #c3e6cb",borderRadius:"8px",textAlign:"center",color:"#155724",fontWeight:"600"},children:[" Payment Completed on ",p.payment_date_formatted]}),p.status==="rejected"&&e.jsxs("div",{style:{padding:"15px 30px",background:"#f8d7da",border:"1px solid #f5c6cb",borderRadius:"8px",textAlign:"center",color:"#721c24",fontWeight:"600"},children:[" Request Rejected: ",p.rejection_reason]}),(p.status==="approved"||p.status==="paid")&&e.jsx("div",{style:{marginTop:"30px"},children:p.receipt_files&&p.receipt_files.length>0?e.jsxs("div",{style:{background:"#e3f2fd",padding:"20px",borderRadius:"12px",border:"1px solid #bbdefb"},children:[e.jsx("h3",{style:{color:"#1976d2",marginBottom:"15px",display:"flex",alignItems:"center",gap:"8px"},children:" Uploaded Payment Receipt"}),e.jsxs("div",{style:{marginBottom:"15px"},children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"12px",marginBottom:"15px"},children:[p.payment_method&&e.jsxs("div",{style:{background:"white",padding:"12px",borderRadius:"6px"},children:[e.jsx("strong",{style:{fontSize:"12px",color:"#1565c0",display:"block",marginBottom:"4px"},children:"PAYMENT METHOD"}),e.jsxs("span",{style:{color:"#1976d2",fontWeight:"500"},children:[p.payment_method==="bank_transfer"&&" Bank Transfer",p.payment_method==="upi"&&" UPI Payment",p.payment_method==="cash"&&" Cash Payment",p.payment_method==="cheque"&&" Cheque Payment",p.payment_method==="other"&&" Other"]})]}),p.transaction_reference&&e.jsxs("div",{style:{background:"white",padding:"12px",borderRadius:"6px"},children:[e.jsx("strong",{style:{fontSize:"12px",color:"#1565c0",display:"block",marginBottom:"4px"},children:"TRANSACTION REFERENCE"}),e.jsx("span",{style:{color:"#1976d2",fontWeight:"500"},children:p.transaction_reference})]}),p.payment_date&&e.jsxs("div",{style:{background:"white",padding:"12px",borderRadius:"6px"},children:[e.jsx("strong",{style:{fontSize:"12px",color:"#1565c0",display:"block",marginBottom:"4px"},children:"PAYMENT DATE"}),e.jsx("span",{style:{color:"#1976d2",fontWeight:"500"},children:p.payment_date_formatted||new Date(p.payment_date).toLocaleDateString("en-IN")})]}),p.verification_status&&e.jsxs("div",{style:{background:"white",padding:"12px",borderRadius:"6px"},children:[e.jsx("strong",{style:{fontSize:"12px",color:"#1565c0",display:"block",marginBottom:"4px"},children:"VERIFICATION STATUS"}),e.jsxs("span",{style:{padding:"4px 8px",borderRadius:"12px",fontSize:"12px",fontWeight:"600",background:p.verification_status==="pending"?"#fff3cd":p.verification_status==="verified"?"#d4edda":"#f8d7da",color:p.verification_status==="pending"?"#856404":p.verification_status==="verified"?"#155724":"#721c24"},children:[p.verification_status==="pending"&&" Pending Verification",p.verification_status==="verified"&&" Verified",p.verification_status==="rejected"&&" Rejected"]})]})]}),e.jsxs("div",{style:{background:"white",padding:"16px",borderRadius:"8px",border:"1px solid #bbdefb"},children:[e.jsx("strong",{style:{display:"block",marginBottom:"12px",color:"#1976d2"},children:"Uploaded Files:"}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:p.receipt_files.map((K,Ne)=>e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",padding:"12px",background:"#f8f9fa",border:"1px solid #e9ecef",borderRadius:"6px"},children:[e.jsx("span",{style:{fontSize:"20px"},children:K.file_type&&K.file_type.startsWith("image/")?"":""}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{fontWeight:"500",color:"#2c3e50",fontSize:"14px"},children:K.original_name}),K.file_size&&e.jsxs("div",{style:{fontSize:"12px",color:"#6c757d"},children:[(K.file_size/1024/1024).toFixed(2)," MB"]})]}),e.jsx("a",{href:`/buildhub/backend/${K.file_path}`,target:"_blank",rel:"noopener noreferrer",style:{background:"#2196f3",color:"white",padding:"6px 12px",borderRadius:"4px",textDecoration:"none",fontSize:"12px",fontWeight:"500"},children:" View"})]},Ne))})]}),p.verification_notes&&e.jsxs("div",{style:{background:"white",padding:"12px",borderRadius:"6px",border:"1px solid #bbdefb",marginTop:"12px"},children:[e.jsx("strong",{style:{display:"block",marginBottom:"8px",color:"#1976d2"},children:"Verification Notes:"}),e.jsx("p",{style:{margin:"0",color:"#1565c0",fontSize:"14px",lineHeight:"1.5"},children:p.verification_notes})]}),p.verified_at&&e.jsx("div",{style:{textAlign:"right",paddingTop:"8px",borderTop:"1px solid #e3f2fd"},children:e.jsxs("small",{style:{color:"#6c757d",fontSize:"12px"},children:["Verified on ",p.verified_at_formatted||I(p.verified_at)]})})]})]}):e.jsxs("div",{style:{background:"#e3f2fd",padding:"20px",borderRadius:"12px",border:"1px solid #bbdefb"},children:[e.jsx("h3",{style:{color:"#1976d2",marginBottom:"15px",display:"flex",alignItems:"center",gap:"8px"},children:" Payment Receipt Upload"}),e.jsx("p",{style:{margin:"0 0 15px 0",color:"#1565c0",lineHeight:"1.5"},children:"If you've made payment via bank transfer, UPI, or other methods, please upload your payment receipt for verification."}),e.jsx("button",{onClick:Be,style:{background:"linear-gradient(135deg, #1976d2 0%, #1565c0 100%)",border:"none",color:"white",padding:"12px 24px",borderRadius:"8px",cursor:"pointer",fontSize:"16px",fontWeight:"600",display:"flex",alignItems:"center",gap:"8px"},children:" Upload Payment Receipt"})]})})]})]})]})}),b&&u&&e.jsx("div",{className:"modal-overlay",style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.8)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"20px"},children:e.jsxs("div",{className:"modal-content",style:{background:"white",borderRadius:"16px",maxWidth:"1000px",width:"100%",maxHeight:"90vh",overflow:"auto",boxShadow:"0 20px 60px rgba(0,0,0,0.3)"},children:[e.jsxs("div",{className:"modal-header",style:{padding:"24px",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",borderRadius:"16px 16px 0 0",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{children:[e.jsxs("h2",{style:{margin:"0 0 8px 0"},children:[re(u.report_type)," ",u.report_type.charAt(0).toUpperCase()+u.report_type.slice(1)," Progress Report"]}),e.jsxs("p",{style:{margin:"0",opacity:"0.9"},children:["Submitted by ",u.contractor.name," on ",I(u.created_at)]})]}),e.jsx("button",{onClick:()=>v(!1),style:{background:"rgba(255,255,255,0.2)",border:"none",color:"white",fontSize:"24px",width:"40px",height:"40px",borderRadius:"50%",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:""})]}),e.jsxs("div",{className:"modal-body",style:{padding:"24px"},children:[u.report_data&&e.jsxs("div",{children:[u.report_data.summary&&e.jsxs("div",{className:"report-section",style:{marginBottom:"30px"},children:[e.jsx("h3",{style:{color:"#2c3e50",borderBottom:"2px solid #e9ecef",paddingBottom:"10px"},children:" Executive Summary"}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"15px",marginTop:"15px"},children:Object.entries(u.report_data.summary).map(([K,Ne])=>e.jsxs("div",{style:{textAlign:"center",padding:"15px",background:"#f8f9fa",borderRadius:"8px",border:"1px solid #dee2e6"},children:[e.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#667eea"},children:Ne}),e.jsx("div",{style:{fontSize:"0.9rem",color:"#6c757d",textTransform:"capitalize"},children:K.replace(/_/g," ")})]},K))})]}),u.report_data.daily_updates&&u.report_data.daily_updates.length>0&&e.jsxs("div",{className:"report-section",style:{marginBottom:"30px"},children:[e.jsx("h3",{style:{color:"#2c3e50",borderBottom:"2px solid #e9ecef",paddingBottom:"10px"},children:" Work Progress Details"}),u.report_data.daily_updates.map((K,Ne)=>e.jsxs("div",{style:{marginTop:"15px",padding:"15px",background:"#f8f9fa",borderRadius:"8px",borderLeft:"4px solid #667eea"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"10px"},children:[e.jsx("h4",{style:{margin:"0",color:"#2c3e50"},children:I(K.update_date)}),e.jsx("span",{style:{background:"#667eea",color:"white",padding:"4px 12px",borderRadius:"20px",fontSize:"12px"},children:K.construction_stage})]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Work Done:"})," ",K.work_done_today]}),e.jsxs("div",{style:{display:"flex",gap:"20px",fontSize:"14px",color:"#6c757d"},children:[e.jsxs("span",{children:["Progress: +",K.incremental_completion_percentage,"%"]}),e.jsxs("span",{children:["Hours: ",K.working_hours,"h"]}),e.jsxs("span",{children:["Weather: ",K.weather_condition]})]})]},Ne))]}),u.report_data.photos&&u.report_data.photos.length>0&&e.jsxs("div",{className:"report-section",style:{marginBottom:"30px"},children:[e.jsx("h3",{style:{color:"#2c3e50",borderBottom:"2px solid #e9ecef",paddingBottom:"10px"},children:" Progress Photos"}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"15px",marginTop:"15px"},children:u.report_data.photos.slice(0,6).map((K,Ne)=>e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("img",{src:K.url,alt:`Progress ${Ne+1}`,style:{width:"100%",height:"150px",objectFit:"cover",borderRadius:"8px",border:"1px solid #dee2e6"}}),e.jsxs("div",{style:{marginTop:"8px",fontSize:"12px",color:"#6c757d"},children:[e.jsx("div",{children:I(K.date)}),e.jsx("div",{children:K.location})]})]},Ne))})]})]}),u.status!=="acknowledged"&&e.jsxs("div",{className:"acknowledgment-section",style:{marginTop:"30px",padding:"20px",background:"#e3f2fd",borderRadius:"8px",border:"1px solid #bbdefb"},children:[e.jsx("h4",{style:{margin:"0 0 15px 0",color:"#1976d2"},children:" Acknowledge This Report"}),e.jsx("p",{style:{margin:"0 0 15px 0",fontSize:"14px",color:"#424242"},children:"Acknowledge that you have reviewed this progress report. You can optionally add feedback or comments."}),e.jsxs("div",{style:{display:"flex",gap:"10px",alignItems:"center"},children:[e.jsx("button",{onClick:()=>k(u.id),style:{background:"#28a745",color:"white",border:"none",padding:"10px 20px",borderRadius:"6px",fontWeight:"600",cursor:"pointer"},children:" Acknowledge Report"}),e.jsx("span",{style:{fontSize:"12px",color:"#6c757d"},children:"This will notify your contractor that you've reviewed the report"})]})]}),u.status==="acknowledged"&&e.jsx("div",{style:{marginTop:"20px",padding:"15px",background:"#d4edda",borderRadius:"8px",border:"1px solid #c3e6cb",textAlign:"center"},children:e.jsxs("span",{style:{color:"#155724",fontWeight:"600"},children:[" Report Acknowledged on ",I(u.acknowledged_at)]})})]})]})}),e.jsx(MF,{show:D,amount:p?.approved_amount||p?.requested_amount||0,paymentRequest:p,onPaymentInitiated:ee,onCancel:le}),e.jsx(tw,{show:_,paymentId:p?.id,paymentMethod:p?.payment_method||"bank_transfer",amount:p?.requested_amount,onUploadComplete:$,onCancel:ue})]})},aw=({isOpen:t,onClose:a,onConfirm:s,title:i="Confirm Action",message:o="Are you sure you want to proceed?",confirmText:l="Confirm",cancelText:d="Cancel",type:u="danger"})=>{if(!t)return null;const A=b=>{b.target===b.currentTarget&&a()},p=()=>{switch(u){case"danger":return"";case"warning":return"";case"info":return"";default:return""}},m=()=>{switch(u){case"danger":return"btn-danger";case"warning":return"btn-warning";case"info":return"btn-info";default:return"btn-primary"}};return e.jsx("div",{className:"confirm-modal-overlay",onClick:A,children:e.jsxs("div",{className:"confirm-modal",children:[e.jsxs("div",{className:"confirm-modal-header",children:[e.jsx("div",{className:"confirm-modal-icon",children:p()}),e.jsx("h3",{className:"confirm-modal-title",children:i})]}),e.jsx("div",{className:"confirm-modal-body",children:e.jsx("p",{className:"confirm-modal-message",children:o})}),e.jsxs("div",{className:"confirm-modal-footer",children:[e.jsx("button",{className:"btn btn-secondary",onClick:a,children:d}),e.jsx("button",{className:`btn ${m()}`,onClick:()=>{s(),a()},children:l})]})]})})},zF=({show:t,onClose:a})=>{const s=Xn(),i=w.useRef(null);An.useEffect(()=>{console.log(" RoomImprovementAssistant show state changed:",t)},[t]);const[o,l]=w.useState({room_type:"",improvement_notes:"",selected_file:null}),[d,u]=w.useState(!1),[A,p]=w.useState(null),[m,b]=w.useState(null),[v,x]=w.useState(null),[C,D]=w.useState(null),S=[{value:"bedroom",label:"Bedroom",icon:""},{value:"living_room",label:"Living Room",icon:""},{value:"kitchen",label:"Kitchen",icon:""},{value:"dining_room",label:"Dining Room",icon:""},{value:"other",label:"Other",icon:""}];An.useEffect(()=>(t?(document.body.style.overflow="hidden",document.body.classList.add("modal-open")):(document.body.style.overflow="",document.body.classList.remove("modal-open")),()=>{document.body.style.overflow="",document.body.classList.remove("modal-open")}),[t]),An.useEffect(()=>{const T=Q=>{Q.key==="Escape"&&t&&!d&&_()};return t&&document.addEventListener("keydown",T),()=>{document.removeEventListener("keydown",T)}},[t,d]);const _=()=>{d||(l({room_type:"",improvement_notes:"",selected_file:null}),p(null),b(null),a())},N=T=>{const Q=T.target.files[0];if(!Q)return;if(!Q.type.startsWith("image/")){s.error("Please select a valid image file (JPG or PNG)"),i.current&&(i.current.value="");return}if(Q.size>5*1024*1024){s.error("Image file size must be less than 5MB"),i.current&&(i.current.value="");return}if(!["image/jpeg","image/jpg","image/png"].includes(Q.type)){s.error("Only JPG and PNG image formats are supported"),i.current&&(i.current.value="");return}l(ne=>({...ne,selected_file:Q}));const q=new FileReader;q.onload=ne=>{b(ne.target.result)},q.onerror=()=>{s.error("Failed to read the selected file"),l(ne=>({...ne,selected_file:null}))},q.readAsDataURL(Q)},O=T=>{T.preventDefault(),T.stopPropagation()},L=T=>{T.preventDefault(),T.stopPropagation();const Q=Array.from(T.dataTransfer.files);if(Q.length>0){const q=Q[0];q.type.startsWith("image/")?N({target:{files:[q]}}):s.error("Please drop a valid image file")}},te=()=>{l(T=>({...T,selected_file:null})),b(null),i.current&&(i.current.value="")},G=T=>{const{name:Q,value:q}=T.target;l(ne=>({...ne,[Q]:q}))},X=async()=>{if(!o.room_type){s.error("Please select a room type");return}if(!o.selected_file){s.error("Please upload a room image");return}try{u(!0),x(null),D(null),s.info(" Analyzing room image and generating improvement concepts...");const T=new FormData;T.append("room_type",o.room_type),T.append("improvement_notes",o.improvement_notes),T.append("room_image",o.selected_file),console.log("Sending analysis request:",{room_type:o.room_type,improvement_notes:o.improvement_notes,file_name:o.selected_file.name,file_size:o.selected_file.size,file_type:o.selected_file.type});const Q=await fetch("/buildhub/backend/api/homeowner/analyze_room_improvement.php",{method:"POST",credentials:"include",body:T});if(console.log("Response status:",Q.status),!Q.ok)throw new Error(`HTTP error! status: ${Q.status}`);const q=await Q.json();console.log("Response data:",q),q.success?(p(q.analysis),s.success(" Room improvement concept generated successfully!"),U(q.analysis)):(console.error("API error:",q),s.error(q.message||"Failed to analyze room. Please try again."))}catch(T){console.error("Room analysis error:",T),T.name==="TypeError"&&T.message.includes("fetch")?s.error("Network error. Please check your connection and try again."):T.message.includes("HTTP error")?s.error(`Server error (${T.message}). Please try again later.`):s.error("An unexpected error occurred. Please try again.")}finally{u(!1)}},U=async T=>{try{x({status:"starting",message:"Starting real AI image generation with Stable Diffusion..."});const Q={analysis_data:T,room_type:o.room_type,improvement_notes:o.improvement_notes};console.log("Starting async image generation:",Q);const ne=await(await fetch("/buildhub/backend/api/homeowner/generate_conceptual_image.php",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(Q)})).json();if(console.log("Async image generation response:",ne),ne.success&&ne.async_generation&&ne.async_generation.job_id){const R=ne.async_generation.job_id;D(R),x({status:"pending",message:"Real AI image generation started. Generating conceptual visualization...",job_id:R,estimated_completion_time:ne.async_generation.estimated_completion_time}),s.info(" Real AI image generation started in background..."),E(R)}else console.error("Failed to start async image generation:",ne),x({status:"failed",message:ne.message||"Failed to start image generation",error:ne.async_generation?.error||"Unknown error"}),s.error("Failed to start AI image generation")}catch(Q){console.error("Error starting async image generation:",Q),x({status:"failed",message:"Error starting image generation",error:Q.message}),s.error("Error starting AI image generation")}},E=T=>{const ne=Date.now(),R=async()=>{try{const ee=await(await fetch("/buildhub/backend/api/homeowner/check_image_status.php",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({job_id:T})})).json();if(console.log(" [DEBUG] Status poll response - Full data:",ee),console.log(" [DEBUG] Status poll response - data.success:",ee.success),console.log(" [DEBUG] Status poll response - data.status:",ee.status),console.log(" [DEBUG] Status poll response - data.conceptual_visualization:",ee.conceptual_visualization),ee.success){if(ee.status==="completed"){x({status:"completed",message:"Real AI image generated successfully!",conceptual_visualization:ee.conceptual_visualization}),console.log(" [DEBUG] Async polling completed - Full response data:"),console.log(" [DEBUG] - data.success:",ee.success),console.log(" [DEBUG] - data.conceptual_visualization:",ee.conceptual_visualization),console.log(" [DEBUG] - data.conceptual_visualization.success:",ee.conceptual_visualization?.success),console.log(" [DEBUG] - data.conceptual_visualization.image_url:",ee.conceptual_visualization?.image_url),console.log(" [DEBUG] - data.conceptual_visualization.image_path:",ee.conceptual_visualization?.image_path),p(le=>{const Be={...le,ai_enhancements:{...le.ai_enhancements,conceptual_visualization:ee.conceptual_visualization}};if(console.log(" [DEBUG] Updated analysis result:"),console.log(" [DEBUG] - updatedResult.ai_enhancements.conceptual_visualization:",Be.ai_enhancements.conceptual_visualization),console.log(" [DEBUG] - updatedResult.ai_enhancements.conceptual_visualization.success:",Be.ai_enhancements.conceptual_visualization?.success),console.log(" [DEBUG] - updatedResult.ai_enhancements.conceptual_visualization.image_url:",Be.ai_enhancements.conceptual_visualization?.image_url),ee.conceptual_visualization?.image_url){const $=ee.conceptual_visualization.image_url,ue=`http://localhost${$}`;console.log(" [DEBUG] Final URL construction:"),console.log(" [DEBUG] - Image URL from backend:",$),console.log(" [DEBUG] - Final Apache URL:",ue),console.log(" [DEBUG] - Expected file: C:/xampp/htdocs"+$)}return Be}),s.success(" Real AI conceptual image generated successfully!");return}else if(ee.status==="failed"){x({status:"failed",message:"Real AI image generation failed",error:ee.conceptual_visualization?.error||"Generation failed"}),s.error("AI image generation failed");return}else ee.status==="processing"?x({status:"processing",message:ee.progress?.progress_message||"Generating real AI image with Stable Diffusion...",estimated_remaining_seconds:ee.progress?.estimated_remaining_seconds}):x({status:"pending",message:ee.progress?.progress_message||"Image generation queued..."});Date.now()-ne<12e4&&ee.polling_instructions?.continue_polling!==!1?setTimeout(R,3e3):Date.now()-ne>=12e4&&(x({status:"timeout",message:"Image generation is taking longer than expected",note:"The image may still be generating in the background"}),s.warning("Image generation is taking longer than expected"))}else console.error("Status poll error:",ee),x({status:"error",message:"Error checking image generation status",error:ee.message})}catch(z){console.error("Status polling error:",z),x({status:"error",message:"Error checking image generation status",error:z.message})}};setTimeout(R,3e3)},Y=()=>{l({room_type:"",improvement_notes:"",selected_file:null}),p(null),b(null),x(null),D(null),i.current&&(i.current.value="")};return t?(console.log(" RoomImprovementAssistant: show is true, rendering modal"),e.jsx("div",{className:"room-improvement-modal-overlay",style:{zIndex:1e6,position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.75)",display:"flex",alignItems:"center",justifyContent:"center",padding:"1rem"},children:e.jsxs("div",{className:"room-improvement-modal",children:[e.jsxs("div",{className:"room-improvement-header",children:[e.jsxs("div",{className:"header-content",children:[e.jsx("div",{className:"header-icon",children:""}),e.jsxs("div",{children:[e.jsx("h2",{children:"Post-Construction Room Improvement Assistant"}),e.jsx("p",{children:"Upload your completed room photo to receive AI-assisted improvement and renovation concepts"})]})]}),e.jsx("button",{className:"close-button",onClick:_,disabled:d,"aria-label":"Close",children:""})]}),e.jsx("div",{className:"room-improvement-content",children:A?e.jsx("div",{className:"analysis-results",children:e.jsxs("div",{className:"concept-card",children:[e.jsxs("div",{className:"concept-header",children:[e.jsx("h3",{className:"concept-name",children:A.concept_name}),e.jsx("div",{className:"concept-type",children:e.jsx("span",{className:"type-badge",children:"AI-Assisted Concept"})})]}),e.jsxs("div",{className:"concept-sections",children:[v&&e.jsxs("div",{className:"concept-section",children:[e.jsx("h4",{children:" Real AI Image Generation Status"}),e.jsxs("div",{className:"async-image-status",children:[v.status==="starting"&&e.jsxs("div",{className:"status-starting",children:[e.jsx("div",{className:"status-icon",children:""}),e.jsxs("div",{className:"status-content",children:[e.jsx("h5",{children:"Starting Real AI Image Generation"}),e.jsx("p",{children:v.message})]})]}),v.status==="pending"&&e.jsxs("div",{className:"status-pending",children:[e.jsx("div",{className:"status-icon",children:""}),e.jsxs("div",{className:"status-content",children:[e.jsx("h5",{children:"Image Generation Queued"}),e.jsx("p",{children:v.message}),v.estimated_completion_time&&e.jsxs("small",{children:["Estimated completion: ",v.estimated_completion_time]})]})]}),v.status==="processing"&&e.jsxs("div",{className:"status-processing",children:[e.jsx("div",{className:"status-icon",children:e.jsx("div",{className:"spinner"})}),e.jsxs("div",{className:"status-content",children:[e.jsx("h5",{children:"Generating Real AI Image"}),e.jsx("p",{children:v.message}),v.estimated_remaining_seconds&&e.jsxs("div",{className:"progress-info",children:[e.jsxs("small",{children:["Estimated remaining: ~",v.estimated_remaining_seconds," seconds"]}),e.jsx("div",{className:"progress-note",children:e.jsx("em",{children:"Stable Diffusion is creating your conceptual visualization..."})})]})]})]}),v.status==="completed"&&e.jsxs("div",{className:"status-completed",children:[e.jsx("div",{className:"status-icon",children:""}),e.jsxs("div",{className:"status-content",children:[e.jsx("h5",{children:"Real AI Image Generated Successfully!"}),e.jsx("p",{children:v.message}),e.jsx("div",{className:"completion-note",children:e.jsx("em",{children:"Your conceptual visualization is now available below."})})]})]}),v.status==="failed"&&e.jsxs("div",{className:"status-failed",children:[e.jsx("div",{className:"status-icon",children:""}),e.jsxs("div",{className:"status-content",children:[e.jsx("h5",{children:"Image Generation Failed"}),e.jsx("p",{children:v.message}),e.jsx("div",{className:"error-details",children:e.jsxs("small",{children:["Error: ",v.error]})}),e.jsx("div",{className:"fallback-note",children:e.jsx("em",{children:"Your room analysis and improvement suggestions are still available."})})]})]}),v.status==="timeout"&&e.jsxs("div",{className:"status-timeout",children:[e.jsx("div",{className:"status-icon",children:""}),e.jsxs("div",{className:"status-content",children:[e.jsx("h5",{children:"Generation Taking Longer Than Expected"}),e.jsx("p",{children:v.message}),e.jsx("div",{className:"timeout-note",children:e.jsx("em",{children:v.note})})]})]}),v.status==="error"&&e.jsxs("div",{className:"status-error",children:[e.jsx("div",{className:"status-icon",children:""}),e.jsxs("div",{className:"status-content",children:[e.jsx("h5",{children:"Status Check Error"}),e.jsx("p",{children:v.message}),e.jsx("div",{className:"error-details",children:e.jsxs("small",{children:["Error: ",v.error]})})]})]})]})]}),e.jsxs("div",{className:"concept-section",children:[e.jsx("h4",{children:" Current Room Analysis"}),e.jsxs("div",{className:"analysis-content",children:[e.jsx("p",{children:A.room_condition_summary}),A.visual_observations&&e.jsxs("div",{className:"visual-observations",children:[e.jsx("h5",{children:"Visual Intelligence Observations:"}),e.jsx("ul",{children:A.visual_observations.map((T,Q)=>e.jsx("li",{children:T},Q))})]}),A.visual_intelligence&&A.visual_intelligence.extracted_features&&e.jsxs("div",{className:"visual-features",children:[e.jsx("h5",{children:"Image Analysis Results:"}),e.jsx("div",{className:"analysis-method-note",children:e.jsx("span",{className:"method-badge",children:A.visual_intelligence.analysis_method==="advanced_gd_processing"?" Advanced Visual Processing":" Basic Visual Analysis"})}),e.jsxs("div",{className:"feature-grid",children:[e.jsxs("div",{className:"feature-item",children:[e.jsx("span",{className:"feature-label",children:"Brightness:"}),e.jsxs("span",{className:"feature-value",children:[A.visual_intelligence.extracted_features.brightness,"/255"]})]}),e.jsxs("div",{className:"feature-item",children:[e.jsx("span",{className:"feature-label",children:"Contrast:"}),e.jsxs("span",{className:"feature-value",children:[A.visual_intelligence.extracted_features.contrast,"%"]})]}),e.jsxs("div",{className:"feature-item",children:[e.jsx("span",{className:"feature-label",children:"Color Tone:"}),e.jsx("span",{className:"feature-value",children:A.visual_intelligence.extracted_features.color_temperature.category})]}),e.jsxs("div",{className:"feature-item",children:[e.jsx("span",{className:"feature-label",children:"Saturation:"}),e.jsxs("span",{className:"feature-value",children:[A.visual_intelligence.extracted_features.saturation_level,"%"]})]})]}),A.visual_intelligence.analysis_method!=="advanced_gd_processing"&&e.jsx("div",{className:"analysis-note",children:e.jsx("p",{children:e.jsx("em",{children:"Note: Using heuristic-based analysis. Results are based on file characteristics and intelligent estimation."})})})]})]})]}),e.jsxs("div",{className:"concept-section",children:[e.jsx("h4",{children:" Improvement Suggestions"}),e.jsxs("div",{className:"suggestions-grid",children:[A.improvement_suggestions.lighting&&e.jsxs("div",{className:"suggestion-item",children:[e.jsx("h5",{children:" Lighting Enhancement"}),e.jsx("p",{children:A.improvement_suggestions.lighting})]}),A.improvement_suggestions.color_ambience&&e.jsxs("div",{className:"suggestion-item",children:[e.jsx("h5",{children:" Color & Ambience"}),e.jsx("p",{children:A.improvement_suggestions.color_ambience})]}),A.improvement_suggestions.furniture_layout&&e.jsxs("div",{className:"suggestion-item",children:[e.jsx("h5",{children:" Furniture & Layout"}),e.jsx("p",{children:A.improvement_suggestions.furniture_layout})]})]})]}),e.jsxs("div",{className:"concept-section",children:[e.jsx("h4",{children:" Style Recommendation"}),e.jsxs("div",{className:"style-recommendation",children:[e.jsx("div",{className:"style-name",children:A.style_recommendation.style}),e.jsx("p",{children:A.style_recommendation.description}),A.style_recommendation.confidence&&e.jsxs("div",{className:"style-confidence",children:[e.jsx("span",{className:"confidence-label",children:"Visual Analysis Confidence:"}),e.jsxs("span",{className:"confidence-value",children:[A.style_recommendation.confidence,"%"]})]}),A.style_recommendation.key_elements&&e.jsxs("div",{className:"key-elements",children:[e.jsx("h5",{children:"Key Elements:"}),e.jsx("div",{className:"elements-tags",children:A.style_recommendation.key_elements.map((T,Q)=>e.jsx("span",{className:"element-tag",children:T},Q))})]})]})]}),A.visual_reference&&e.jsxs("div",{className:"concept-section",children:[e.jsx("h4",{children:" Visual Reference"}),e.jsxs("div",{className:"visual-reference",children:[e.jsxs("div",{className:"reference-note",children:[e.jsx("strong",{children:"Note:"})," This is a conceptual and inspirational reference only. Actual implementation may vary based on your specific room conditions and preferences."]}),e.jsx("p",{children:A.visual_reference}),(()=>{const T=!!A.ai_enhancements,Q=!!A.ai_enhancements?.conceptual_visualization,q=A.ai_enhancements?.conceptual_visualization?.success,ne=!!A.ai_enhancements?.conceptual_visualization?.image_url,R=A.ai_enhancements?.conceptual_visualization?.image_url;console.log(" [DEBUG] Visual Reference conditional rendering check:"),console.log(" [DEBUG] - hasAiEnhancements:",T),console.log(" [DEBUG] - hasConceptualVisualization:",Q),console.log(" [DEBUG] - isSuccess:",q),console.log(" [DEBUG] - hasImageUrl:",ne),console.log(" [DEBUG] - imageUrl value:",R),console.log(" [DEBUG] - Full conceptual_visualization object:",A.ai_enhancements?.conceptual_visualization);const z=T&&Q&&q&&ne;return console.log(" [DEBUG] - Should render image:",z),z?e.jsxs("div",{className:"visual-reference-image",children:[e.jsx("h5",{children:" Real AI-Generated Conceptual Visualization"}),e.jsxs("div",{className:"generated-image-container",children:[(()=>{const ee=`http://localhost${R}`;return console.log(" [DEBUG] Visual Reference - Final image rendering:"),console.log(" [DEBUG] - Original image_url from backend:",R),console.log(" [DEBUG] - Final Apache URL for <img src>:",ee),console.log(" [DEBUG] - About to render <img> element with src:",ee),e.jsx("img",{src:ee,alt:"Real AI-generated conceptual visualization using Stable Diffusion",className:"generated-image",onLoad:()=>{console.log(" [DEBUG] Visual Reference - Image loaded successfully from Apache:",ee)},onError:le=>{console.error(" [DEBUG] Visual Reference - Failed to load image from Apache:",le.target.src),console.error(" [DEBUG] Visual Reference - Expected file location: C:/xampp/htdocs"+R),console.error(" [DEBUG] Visual Reference - Error event:",le),le.target.style.display="none",le.target.nextSibling.style.display="block"}})})(),e.jsxs("div",{className:"image-error-message",style:{display:"none",color:"#dc3545",padding:"10px",textAlign:"center"},children:[" Real AI image generated but not accessible via Apache",e.jsx("br",{}),e.jsx("small",{children:"Image file exists but Apache cannot serve it"}),e.jsxs("div",{style:{marginTop:"5px",fontSize:"11px",fontFamily:"monospace"},children:["File: C:/xampp/htdocs",R,e.jsx("br",{}),"URL: http://localhost",R]})]})]}),e.jsxs("div",{className:"image-disclaimer",children:[e.jsx("small",{children:e.jsx("em",{children:A.ai_enhancements.conceptual_visualization.disclaimer})}),e.jsxs("div",{className:"ai-generation-info",children:[e.jsx("span",{className:"generation-badge",children:"Generated by Stable Diffusion AI"}),A.ai_enhancements.conceptual_visualization.generation_metadata?.model_id&&e.jsxs("span",{className:"model-info",children:["Model: ",A.ai_enhancements.conceptual_visualization.generation_metadata.model_id]})]})]})]}):(console.log(" [DEBUG] - Image NOT rendered due to conditional check failure"),null)})(),A.ai_enhancements?.conceptual_visualization&&!A.ai_enhancements.conceptual_visualization.success&&e.jsxs("div",{className:"visual-reference-fallback",children:[e.jsx("p",{children:e.jsx("strong",{children:" Real AI image generation attempted but unavailable for display"})}),e.jsx("p",{children:"Stable Diffusion AI attempted to create a visualization based on your room analysis."}),e.jsx("p",{children:e.jsx("strong",{children:"Design Concept Details:"})}),e.jsx("p",{children:e.jsx("em",{children:A.ai_enhancements.design_description||"AI-generated design concept available in analysis results."})}),e.jsxs("div",{className:"fallback-info",children:[e.jsxs("small",{children:["Error: ",A.ai_enhancements.conceptual_visualization.error||"Image generation service temporarily unavailable"]}),e.jsx("div",{style:{marginTop:"5px",fontSize:"11px",fontFamily:"monospace"},children:"Expected Apache path: C:/xampp/htdocs/buildhub/uploads/conceptual_images/"})]})]})]})]}),A.ai_enhancements?.conceptual_visualization&&e.jsxs("div",{className:"concept-section",children:[e.jsx("h4",{children:" Conceptual Visualization"}),e.jsx("div",{className:"conceptual-visualization",children:A.ai_enhancements.conceptual_visualization.success?e.jsxs("div",{className:"visualization-content",children:[e.jsxs("div",{className:"visualization-disclaimer",children:[e.jsx("div",{className:"disclaimer-badge",children:"Conceptual Preview"}),e.jsx("p",{children:"This AI-generated image is an inspirational visualization based on your room analysis. It represents design concepts and mood rather than an exact reconstruction of your space."})]}),A.ai_enhancements.conceptual_visualization.image_url&&e.jsxs("div",{className:"generated-image-container",children:[(()=>{const T=A.ai_enhancements.conceptual_visualization.image_url,Q=`http://localhost${T}`;return console.log(" [Conceptual Visualization] Loading image from Apache:",Q),console.log(" [Conceptual Visualization] Original image_url from backend:",T),e.jsx("img",{src:Q,alt:"Real AI conceptual room improvement visualization using Stable Diffusion",className:"generated-image",onLoad:()=>console.log(" [Conceptual Visualization] Real AI image loaded from Apache:",Q),onError:q=>{console.error(" [Conceptual Visualization] Failed to load real AI image from Apache:",q.target.src),console.error(" [Conceptual Visualization] Expected file location: C:/xampp/htdocs"+T),q.target.style.display="none",q.target.nextSibling.style.display="block"}})})(),e.jsxs("div",{className:"image-error",style:{display:"none"},children:[e.jsx("p",{children:" Real AI image generated but not accessible via Apache"}),e.jsx("p",{children:"Image file exists but Apache cannot serve it"}),e.jsxs("small",{children:["File: C:/xampp/htdocs",A.ai_enhancements.conceptual_visualization.image_url]}),e.jsxs("div",{style:{marginTop:"5px",fontSize:"11px",fontFamily:"monospace"},children:["Apache URL: http://localhost",A.ai_enhancements.conceptual_visualization.image_url]})]})]}),A.ai_enhancements.conceptual_visualization.design_description&&e.jsxs("div",{className:"design-description",children:[e.jsx("h5",{children:"Design Concept Description:"}),e.jsxs("div",{className:"description-content",children:[A.ai_enhancements.conceptual_visualization.design_description.room_characteristics&&e.jsxs("div",{className:"description-section",children:[e.jsx("h6",{children:"Room Characteristics:"}),e.jsxs("ul",{children:[e.jsxs("li",{children:["Style: ",A.ai_enhancements.conceptual_visualization.design_description.room_characteristics.current_style]}),e.jsxs("li",{children:["Lighting: ",A.ai_enhancements.conceptual_visualization.design_description.room_characteristics.lighting_condition]}),e.jsxs("li",{children:["Color Palette: ",A.ai_enhancements.conceptual_visualization.design_description.room_characteristics.color_palette]})]})]}),A.ai_enhancements.conceptual_visualization.design_description.improvement_directions&&e.jsxs("div",{className:"description-section",children:[e.jsx("h6",{children:"Improvement Directions:"}),e.jsxs("ul",{children:[A.ai_enhancements.conceptual_visualization.design_description.improvement_directions.lighting_mood&&e.jsxs("li",{children:["Lighting Mood: ",A.ai_enhancements.conceptual_visualization.design_description.improvement_directions.lighting_mood]}),A.ai_enhancements.conceptual_visualization.design_description.improvement_directions.color_direction&&e.jsxs("li",{children:["Color Direction: ",A.ai_enhancements.conceptual_visualization.design_description.improvement_directions.color_direction]}),A.ai_enhancements.conceptual_visualization.design_description.improvement_directions.style_enhancement&&e.jsxs("li",{children:["Style Enhancement: ",A.ai_enhancements.conceptual_visualization.design_description.improvement_directions.style_enhancement]})]})]})]})]}),A.ai_enhancements.conceptual_visualization.text_prompt&&e.jsxs("div",{className:"generation-details",children:[e.jsx("h5",{children:"AI Generation Prompt:"}),e.jsxs("p",{className:"generation-prompt",children:['"',A.ai_enhancements.conceptual_visualization.text_prompt,'"']})]}),e.jsxs("div",{className:"visualization-footer",children:[e.jsxs("div",{className:"generation-info",children:[e.jsxs("span",{className:"info-item",children:[e.jsx("strong",{children:"Generated:"})," ",A.ai_enhancements.conceptual_visualization.generation_metadata?.generation_timestamp]}),e.jsxs("span",{className:"info-item",children:[e.jsx("strong",{children:"Model:"})," ",A.ai_enhancements.conceptual_visualization.generation_metadata?.model_id||"Stable Diffusion"]})]}),e.jsx("div",{className:"professional-note",children:e.jsx("p",{children:e.jsx("em",{children:" Use this visualization as design inspiration. Consult with interior design professionals for implementation guidance."})})})]})]}):e.jsxs("div",{className:"visualization-unavailable",children:[e.jsx("div",{className:"unavailable-icon",children:""}),e.jsx("h5",{children:"Conceptual Visualization Unavailable"}),e.jsx("p",{children:A.ai_enhancements.conceptual_visualization.error||A.ai_enhancements.conceptual_visualization.note||"Conceptual image generation is temporarily unavailable."}),e.jsx("p",{className:"fallback-note",children:"Your room analysis and improvement suggestions are still available above."})]})})]}),A.ai_enhancements&&e.jsxs("div",{className:"concept-section",children:[e.jsx("h4",{children:" Collaborative AI Pipeline Results"}),e.jsxs("div",{className:"ai-pipeline-results",children:[e.jsxs("div",{className:"pipeline-status",children:[e.jsxs("div",{className:"pipeline-header",children:[e.jsx("span",{className:"pipeline-badge",children:A.ai_enhancements.ai_metadata?.pipeline_type==="collaborative_ai_hybrid"?" Collaborative AI Pipeline":" AI Enhancement"}),e.jsxs("span",{className:"stages-completed",children:[A.ai_enhancements.ai_metadata?.stages_completed||2,"/4 stages completed"]})]}),e.jsxs("div",{className:"pipeline-stages",children:[e.jsxs("div",{className:"stage-item completed",children:[e.jsx("span",{className:"stage-icon",children:""}),e.jsx("span",{className:"stage-name",children:"Vision Analysis"})]}),e.jsxs("div",{className:"stage-item completed",children:[e.jsx("span",{className:"stage-icon",children:""}),e.jsx("span",{className:"stage-name",children:"Rule-Based Reasoning"})]}),e.jsxs("div",{className:`stage-item ${A.ai_enhancements.design_description?"completed":"pending"}`,children:[e.jsx("span",{className:"stage-icon",children:""}),e.jsx("span",{className:"stage-name",children:"Gemini Description"})]}),e.jsxs("div",{className:`stage-item ${A.ai_enhancements.conceptual_visualization?.success?"completed":"pending"}`,children:[e.jsx("span",{className:"stage-icon",children:""}),e.jsx("span",{className:"stage-name",children:"Diffusion Visualization"})]})]})]}),A.ai_enhancements.design_description&&e.jsxs("div",{className:"ai-section gemini-section",children:[e.jsx("h5",{children:" AI-Generated Design Description"}),e.jsxs("div",{className:"gemini-description",children:[e.jsx("div",{className:"description-content",children:e.jsx("p",{children:A.ai_enhancements.design_description})}),e.jsxs("div",{className:"ai-attribution",children:[e.jsx("span",{className:"attribution-badge",children:"Generated by Google Gemini AI"}),e.jsx("span",{className:"gemini-status",children:A.ai_enhancements.ai_metadata?.gemini_api_available?" Gemini Available":" Gemini Unavailable"})]})]})]}),A.ai_enhancements.conceptual_visualization&&e.jsxs("div",{className:"ai-section visualization-section",children:[e.jsx("h5",{children:" Collaborative Conceptual Visualization"}),e.jsx("div",{className:"conceptual-visualization",children:A.ai_enhancements.conceptual_visualization.success?e.jsxs("div",{className:"visualization-content",children:[e.jsxs("div",{className:"visualization-disclaimer",children:[e.jsx("div",{className:"disclaimer-badge",children:"Conceptual Visualization / Inspirational Preview"}),e.jsx("p",{children:"This image combines AI vision analysis, rule-based reasoning, Gemini description generation, and diffusion-based visualization to create an inspirational concept."})]}),A.ai_enhancements.conceptual_visualization.image_url&&e.jsxs("div",{className:"generated-image-container",children:[(()=>{const T=A.ai_enhancements.conceptual_visualization.image_url,Q=`http://localhost${T}`;return console.log(" [Collaborative AI] Loading image from Apache:",Q),console.log(" [Collaborative AI] Original image_url from backend:",T),e.jsx("img",{src:Q,alt:"Real AI collaborative conceptual visualization using Stable Diffusion",className:"generated-image",onLoad:()=>console.log(" [Collaborative AI] Real AI image loaded from Apache:",Q),onError:q=>{console.error(" [Collaborative AI] Failed to load real AI image from Apache:",q.target.src),console.error(" [Collaborative AI] Expected file location: C:/xampp/htdocs"+T),q.target.style.display="none",q.target.nextSibling.style.display="block"}})})(),e.jsx("div",{className:"image-error",style:{display:"none"},children:e.jsxs("div",{className:"error-content",children:[e.jsx("span",{className:"error-icon",children:""}),e.jsx("p",{children:"Real AI visualization generated but not accessible via Apache"}),e.jsx("small",{children:"Image file exists but Apache cannot serve it"}),e.jsxs("div",{style:{marginTop:"5px",fontSize:"11px",fontFamily:"monospace"},children:["File: C:/xampp/htdocs",A.ai_enhancements.conceptual_visualization.image_url,e.jsx("br",{}),"Apache URL: http://localhost",A.ai_enhancements.conceptual_visualization.image_url]})]})})]}),e.jsxs("div",{className:"pipeline-details",children:[e.jsx("h6",{children:"Collaborative Pipeline Details:"}),e.jsxs("div",{className:"pipeline-info",children:[e.jsxs("div",{className:"info-item",children:[e.jsx("span",{className:"info-label",children:"Vision Analysis:"}),e.jsxs("span",{className:"info-value",children:[A.ai_enhancements.detected_objects?.total_objects||0," objects detected"]})]}),e.jsxs("div",{className:"info-item",children:[e.jsx("span",{className:"info-label",children:"Spatial Reasoning:"}),e.jsxs("span",{className:"info-value",children:[A.ai_enhancements.spatial_guidance?.placement_recommendations?.length||0," recommendations"]})]}),e.jsxs("div",{className:"info-item",children:[e.jsx("span",{className:"info-label",children:"Description Generation:"}),e.jsx("span",{className:"info-value",children:A.ai_enhancements.design_description?"Gemini AI":"Rule-based fallback"})]}),e.jsxs("div",{className:"info-item",children:[e.jsx("span",{className:"info-label",children:"Image Generation:"}),e.jsx("span",{className:"info-value",children:A.ai_enhancements.ai_metadata?.diffusion_device||"Stable Diffusion"})]})]})]}),e.jsxs("div",{className:"visualization-footer",children:[e.jsx("div",{className:"generation-metadata",children:A.ai_enhancements.conceptual_visualization.generation_metadata&&e.jsxs("small",{children:["Generated: ",new Date(A.ai_enhancements.conceptual_visualization.generation_metadata.generation_time).toLocaleString()]})}),e.jsx("div",{className:"professional-note",children:e.jsx("p",{children:e.jsx("em",{children:" This collaborative AI visualization combines multiple AI technologies for inspirational design concepts."})})})]})]}):e.jsx("div",{className:"visualization-unavailable",children:e.jsxs("div",{className:"unavailable-content",children:[e.jsx("span",{className:"unavailable-icon",children:""}),e.jsx("h6",{children:"Conceptual Visualization Unavailable"}),e.jsx("p",{children:A.ai_enhancements.conceptual_visualization.fallback_message||"Conceptual image generation temporarily unavailable"}),e.jsx("small",{children:"Vision analysis and improvement suggestions remain available"})]})})})]}),A.ai_enhancements.detected_objects&&e.jsxs("div",{className:"ai-section detection-section",children:[e.jsx("h5",{children:" AI Vision Analysis"}),e.jsxs("div",{className:"detection-results",children:[e.jsxs("div",{className:"detection-summary",children:[e.jsxs("span",{className:"summary-stat",children:[e.jsx("strong",{children:A.ai_enhancements.detected_objects.total_objects||0})," objects detected"]}),A.ai_enhancements.detected_objects.detection_confidence&&e.jsxs("span",{className:"summary-stat",children:[e.jsxs("strong",{children:[Math.round(A.ai_enhancements.detected_objects.detection_confidence*100),"%"]})," avg confidence"]})]}),A.ai_enhancements.detected_objects.major_items?.length>0&&e.jsxs("div",{className:"detected-objects",children:[e.jsx("h6",{children:"Major Items Detected:"}),e.jsx("div",{className:"objects-grid",children:A.ai_enhancements.detected_objects.major_items.slice(0,8).map((T,Q)=>e.jsx("div",{className:"object-tag",children:T},Q))})]}),A.ai_enhancements.detected_objects.furniture_categories?.length>0&&e.jsxs("div",{className:"furniture-categories",children:[e.jsx("h6",{children:"Furniture Categories:"}),e.jsx("div",{className:"category-tags",children:A.ai_enhancements.detected_objects.furniture_categories.map((T,Q)=>e.jsx("span",{className:"category-tag",children:T},Q))})]})]})]}),A.ai_enhancements.spatial_guidance&&e.jsxs("div",{className:"ai-section spatial-section",children:[e.jsx("h5",{children:" AI Spatial Intelligence"}),e.jsxs("div",{className:"spatial-results",children:[A.ai_enhancements.spatial_guidance.placement_recommendations?.length>0&&e.jsxs("div",{className:"placement-guidance",children:[e.jsx("h6",{children:"Placement Recommendations:"}),e.jsx("div",{className:"recommendations-list",children:A.ai_enhancements.spatial_guidance.placement_recommendations.slice(0,4).map((T,Q)=>e.jsx("div",{className:"recommendation-item",children:e.jsx("div",{className:"rec-content",children:typeof T=="object"?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"rec-object",children:T.object||"Item"}),e.jsx("span",{className:"rec-suggestion",children:T.suggestion||T.description}),T.reasoning&&e.jsx("small",{className:"rec-reasoning",children:T.reasoning})]}):e.jsx("span",{className:"rec-suggestion",children:T})})},Q))})]}),A.ai_enhancements.spatial_guidance.layout_improvements?.length>0&&e.jsxs("div",{className:"layout-improvements",children:[e.jsx("h6",{children:"Layout Improvements:"}),e.jsx("ul",{className:"improvements-list",children:A.ai_enhancements.spatial_guidance.layout_improvements.slice(0,3).map((T,Q)=>e.jsx("li",{children:T},Q))})]}),A.ai_enhancements.spatial_guidance.safety_considerations?.length>0&&e.jsxs("div",{className:"safety-considerations",children:[e.jsx("h6",{children:" Safety Considerations:"}),e.jsx("ul",{className:"safety-list",children:A.ai_enhancements.spatial_guidance.safety_considerations.slice(0,2).map((T,Q)=>e.jsx("li",{children:T},Q))})]})]})]}),e.jsx("div",{className:"ai-system-status",children:e.jsxs("div",{className:"status-grid",children:[e.jsxs("div",{className:"status-item",children:[e.jsx("span",{className:"status-label",children:"Pipeline Type:"}),e.jsx("span",{className:"status-value",children:A.ai_enhancements.ai_metadata?.pipeline_type||"Standard AI"})]}),e.jsxs("div",{className:"status-item",children:[e.jsx("span",{className:"status-label",children:"Gemini API:"}),e.jsx("span",{className:`status-value ${A.ai_enhancements.ai_metadata?.gemini_api_available?"available":"unavailable"}`,children:A.ai_enhancements.ai_metadata?.gemini_api_available?" Available":" Unavailable"})]}),e.jsxs("div",{className:"status-item",children:[e.jsx("span",{className:"status-label",children:"Processing:"}),e.jsx("span",{className:"status-value",children:A.ai_enhancements.ai_metadata?.diffusion_device||"CPU/GPU"})]}),e.jsxs("div",{className:"status-item",children:[e.jsx("span",{className:"status-label",children:"Analysis Time:"}),e.jsx("span",{className:"status-value",children:A.ai_enhancements.ai_metadata?.analysis_timestamp?new Date(A.ai_enhancements.ai_metadata.analysis_timestamp).toLocaleTimeString():"N/A"})]})]})})]})]})]}),e.jsxs("div",{className:"concept-footer",children:[e.jsxs("div",{className:"system-info",children:[e.jsx("div",{className:"analysis-type",children:e.jsx("span",{className:"system-badge",children:A.analysis_metadata?.system_type==="hybrid_ai_visual_rules"?" Hybrid AI: Advanced Visual Analysis + Rules":A.analysis_metadata?.system_type==="hybrid_ai_basic_rules"?" Hybrid AI: Basic Visual Analysis + Rules":" Rule-Based Analysis"})}),A.visual_intelligence&&A.visual_intelligence.feature_influence&&e.jsxs("div",{className:"feature-influence",children:[e.jsx("h5",{children:"How Visual Analysis Influenced Recommendations:"}),e.jsx("div",{className:"influence-items",children:Object.entries(A.visual_intelligence.feature_influence).map(([T,Q])=>e.jsxs("div",{className:"influence-item",children:[e.jsx("span",{className:"influence-type",children:T.replace("_influence","").replace("_"," ")}),e.jsxs("span",{className:`influence-impact impact-${Q.impact}`,children:[Q.impact," impact"]})]},T))})]})]}),e.jsx("div",{className:"disclaimer",children:e.jsxs("p",{children:[e.jsx("strong",{children:"Important:"})," This analysis combines visual image analysis with rule-based AI reasoning to provide intelligent suggestions for decision support. Results are advisory and inspirational. Consult with interior design professionals for detailed implementation."]})}),e.jsxs("div",{className:"concept-actions",children:[e.jsx("button",{className:"new-analysis-btn",onClick:Y,children:"Analyze Another Room"}),e.jsx("button",{className:"close-results-btn",onClick:_,children:"Close"})]})]})]})}):e.jsxs("div",{className:"upload-form",children:[e.jsxs("div",{className:"form-section",children:[e.jsxs("label",{className:"form-label",children:[e.jsx("span",{className:"label-text",children:"Room Type *"}),e.jsx("span",{className:"label-description",children:"Select the type of room you want to improve"})]}),e.jsx("div",{className:"room-type-grid",children:S.map(T=>e.jsxs("button",{type:"button",className:`room-type-option ${o.room_type===T.value?"selected":""}`,onClick:()=>l(Q=>({...Q,room_type:T.value})),disabled:d,children:[e.jsx("span",{className:"room-icon",children:T.icon}),e.jsx("span",{className:"room-label",children:T.label})]},T.value))})]}),e.jsxs("div",{className:"form-section",children:[e.jsxs("label",{className:"form-label",children:[e.jsx("span",{className:"label-text",children:"Room Image *"}),e.jsx("span",{className:"label-description",children:"Upload a clear photo of your completed room (JPG/PNG, max 5MB)"})]}),m?e.jsxs("div",{className:"image-preview",children:[e.jsx("img",{src:m,alt:"Room preview"}),e.jsx("button",{className:"remove-image-btn",onClick:te,disabled:d,"aria-label":"Remove image",children:""})]}):e.jsxs("div",{className:"file-upload-area",onDragOver:O,onDrop:L,onClick:()=>i.current?.click(),children:[e.jsx("div",{className:"upload-icon",children:""}),e.jsxs("div",{className:"upload-text",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Click to upload"})," or drag and drop"]}),e.jsx("p",{children:"JPG or PNG (max 5MB)"})]}),e.jsx("input",{ref:i,type:"file",accept:"image/jpeg,image/jpg,image/png",onChange:N,style:{display:"none"},disabled:d})]})]}),e.jsxs("div",{className:"form-section",children:[e.jsxs("label",{className:"form-label",children:[e.jsx("span",{className:"label-text",children:"What would you like to improve? (Optional)"}),e.jsx("span",{className:"label-description",children:"Describe specific aspects you'd like to enhance (lighting, style, comfort, etc.)"})]}),e.jsx("textarea",{name:"improvement_notes",value:o.improvement_notes,onChange:G,placeholder:"e.g., The room feels too dark, I want to make it more cozy, need better storage solutions...",className:"improvement-notes",rows:"3",disabled:d})]}),e.jsxs("div",{className:"form-actions",children:[e.jsx("button",{className:"cancel-btn",onClick:_,disabled:d,children:"Cancel"}),e.jsx("button",{className:"analyze-btn",onClick:X,disabled:d||!o.room_type||!o.selected_file,children:d?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"spinner"}),"Analyzing Room..."]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"analyze-icon",children:""}),"Analyze Room & Generate Concept"]})})]})]})})]})})):(console.log(" RoomImprovementAssistant: show is false, not rendering modal"),null)},qF=()=>{const t=Xn(),a=w.useRef(null),[s,i]=w.useState({room_type:"",improvement_notes:"",selected_file:null}),[o,l]=w.useState(!1),[d,u]=w.useState(null),[A,p]=w.useState(null),[m,b]=w.useState(!1),[v,x]=w.useState(!1),[C,D]=w.useState(null),[S,_]=w.useState(null),N=[{value:"bedroom",label:"Bedroom",icon:""},{value:"living_room",label:"Living Room",icon:""},{value:"kitchen",label:"Kitchen",icon:""},{value:"dining_room",label:"Dining Room",icon:""},{value:"other",label:"Other",icon:""}],O=T=>{const Q=T.target.files[0];if(!Q)return;if(!Q.type.startsWith("image/")){t.error("Please select a valid image file (JPG or PNG)"),a.current&&(a.current.value="");return}if(Q.size>5*1024*1024){t.error("Image file size must be less than 5MB"),a.current&&(a.current.value="");return}if(!["image/jpeg","image/jpg","image/png"].includes(Q.type)){t.error("Only JPG and PNG image formats are supported"),a.current&&(a.current.value="");return}i(ne=>({...ne,selected_file:Q}));const q=new FileReader;q.onload=ne=>{p(ne.target.result)},q.onerror=()=>{t.error("Failed to read the selected file"),i(ne=>({...ne,selected_file:null}))},q.readAsDataURL(Q)},L=()=>{i(T=>({...T,selected_file:null})),p(null),a.current&&(a.current.value="")},te=T=>{const{name:Q,value:q}=T.target;i(ne=>({...ne,[Q]:q}))},G=async()=>{if(!s.room_type){t.error("Please select a room type");return}if(!s.selected_file){t.error("Please upload a room image");return}try{l(!0),t.info(" Analyzing room image and generating improvement concepts...");const T=new FormData;T.append("room_type",s.room_type),T.append("improvement_notes",s.improvement_notes),T.append("room_image",s.selected_file),console.log("Sending analysis request:",{room_type:s.room_type,improvement_notes:s.improvement_notes,file_name:s.selected_file.name,file_size:s.selected_file.size,file_type:s.selected_file.type});const Q=await fetch("/buildhub/backend/api/homeowner/analyze_room_improvement.php",{method:"POST",credentials:"include",body:T});if(console.log("Response status:",Q.status),!Q.ok)throw new Error(`HTTP error! status: ${Q.status}`);const q=await Q.json();if(console.log("Response data:",q),q.success){if(u(q.analysis),t.success(" Room improvement concept generated successfully!"),q.analysis.ai_enhancements?.async_image_generation?.job_id){const ne=q.analysis.ai_enhancements.async_image_generation.job_id;D(ne),x(!0),_("pending"),t.info(" Starting real AI image generation..."),U(ne)}}else console.error("API error:",q),t.error(q.message||"Failed to analyze room. Please try again.")}catch(T){console.error("Room analysis error:",T),T.name==="TypeError"&&T.message.includes("fetch")?t.error("Network error. Please check your connection and try again."):T.message.includes("HTTP error")?t.error(`Server error (${T.message}). Please try again later.`):t.error("An unexpected error occurred. Please try again.")}finally{l(!1)}},X=async(T,Q)=>{try{t.info(" Preparing image download...");const q=await fetch(T);if(!q.ok)throw new Error("Failed to fetch image");const ne=await q.blob(),R=window.URL.createObjectURL(ne),z=document.createElement("a");z.href=R,z.download=Q||"ai-generated-room-concept.png",document.body.appendChild(z),z.click(),document.body.removeChild(z),window.URL.revokeObjectURL(R),t.success(" Image downloaded successfully!")}catch(q){console.error("Download error:",q),t.error(" Failed to download image: "+q.message)}},U=async T=>{let q=0;const ne=async()=>{try{q++;const R=await fetch(`/buildhub/backend/api/homeowner/check_image_status.php?job_id=${T}`,{method:"GET",credentials:"include"});if(!R.ok)throw new Error(`HTTP error! status: ${R.status}`);const z=await R.json();if(z.success){if(_(z.status),z.status==="completed"){x(!1),t.success(" Real AI image generated successfully!"),u(ee=>({...ee,ai_enhancements:{...ee.ai_enhancements,conceptual_visualization:{success:!0,image_url:z.image_url,image_path:z.image_path,disclaimer:z.disclaimer,generation_metadata:z.generation_metadata}}}));return}else if(z.status==="failed"){x(!1),_("failed"),t.error(" Real AI image generation failed: "+(z.error_message||"Unknown error"));return}else if(z.status==="processing"){const ee=z.estimated_remaining_seconds||30;t.info(` Generating real AI image... (~${ee}s remaining)`)}else t.info(" Real AI image generation queued...");q<60?setTimeout(ne,5e3):(x(!1),_("timeout"),t.error(" Image generation timed out. The image may still be processing in the background."))}else throw new Error(z.message||"Failed to check image status")}catch(R){console.error("Image status polling error:",R),q<60?setTimeout(ne,5e3):(x(!1),_("error"),t.error(" Failed to check image generation status"))}};ne()},E=async()=>{if(!(!d||v))try{x(!0),t.info(" Generating conceptual visualization...");const T=await fetch("/buildhub/backend/api/homeowner/generate_conceptual_image.php",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({analysis_data:d,room_type:s.room_type,improvement_notes:s.improvement_notes})});if(!T.ok)throw new Error(`HTTP error! status: ${T.status}`);const Q=await T.json();console.log("Image generation response:",Q),Q.success?(u(q=>({...q,ai_enhancements:{...q.ai_enhancements,conceptual_visualization:Q.conceptual_visualization}})),t.success(" Conceptual visualization generated successfully!")):t.error(Q.message||"Failed to generate conceptual image. Please try again.")}catch(T){console.error("Image generation error:",T),t.error("Failed to generate conceptual image: "+T.message)}finally{x(!1)}},Y=()=>{i({room_type:"",improvement_notes:"",selected_file:null}),u(null),p(null),b(!1),x(!1),D(null),_(null),a.current&&(a.current.value="")};return e.jsx("div",{className:"inline-room-improvement",children:!m&&!d?e.jsxs("div",{className:"room-improvement-intro",children:[e.jsx("div",{className:"intro-card",children:e.jsxs("div",{className:"intro-content",children:[e.jsx("h3",{children:" Transform Your Completed Spaces"}),e.jsx("p",{children:"Your construction is complete, but the journey doesn't end there! Use our AI-powered Room Improvement Assistant to discover new possibilities for enhancing your living spaces."}),e.jsxs("div",{className:"feature-highlights",children:[e.jsxs("div",{className:"feature-item",children:[e.jsx("span",{className:"feature-icon",children:""}),e.jsxs("div",{children:[e.jsx("strong",{children:"Upload Room Photos"}),e.jsx("p",{children:"Share clear images of your completed rooms"})]})]}),e.jsxs("div",{className:"feature-item",children:[e.jsx("span",{className:"feature-icon",children:""}),e.jsxs("div",{children:[e.jsx("strong",{children:"AI Analysis"}),e.jsx("p",{children:"Get intelligent insights about lighting, colors, and layout"})]})]}),e.jsxs("div",{className:"feature-item",children:[e.jsx("span",{className:"feature-icon",children:""}),e.jsxs("div",{children:[e.jsx("strong",{children:"Improvement Concepts"}),e.jsx("p",{children:"Receive personalized renovation and enhancement ideas"})]})]})]}),e.jsx("div",{className:"intro-actions",children:e.jsxs("button",{className:"btn btn-primary btn-large",onClick:()=>b(!0),children:[e.jsx("span",{className:"btn-icon",children:""}),"Start Room Analysis"]})})]})}),e.jsxs("div",{className:"disclaimer-card",children:[e.jsxs("div",{className:"disclaimer-header",children:[e.jsx("span",{className:"disclaimer-icon",children:""}),e.jsx("strong",{children:"Important Information"})]}),e.jsx("div",{className:"disclaimer-content",children:e.jsxs("ul",{children:[e.jsxs("li",{children:["This feature provides ",e.jsx("strong",{children:"AI-assisted suggestions"})," for decision support and inspiration"]}),e.jsxs("li",{children:["Results are ",e.jsx("strong",{children:"advisory and conceptual"})," - not final designs or construction plans"]}),e.jsx("li",{children:"For detailed implementation, consult with interior design professionals"}),e.jsx("li",{children:"The system analyzes visual aspects and generates improvement concepts, not exact redesigns"})]})})]})]}):m&&!d?e.jsxs("div",{className:"upload-form-section",children:[e.jsxs("div",{className:"form-header",children:[e.jsx("h3",{children:" Room Improvement Analysis"}),e.jsx("p",{children:"Upload your room photo and get AI-powered improvement suggestions"})]}),e.jsxs("div",{className:"upload-form",children:[e.jsxs("div",{className:"form-section",children:[e.jsxs("label",{className:"form-label",children:[e.jsx("span",{className:"label-text",children:"Room Type *"}),e.jsx("span",{className:"label-description",children:"Select the type of room you want to improve"})]}),e.jsx("div",{className:"room-type-grid",children:N.map(T=>e.jsxs("button",{type:"button",className:`room-type-option ${s.room_type===T.value?"selected":""}`,onClick:()=>i(Q=>({...Q,room_type:T.value})),disabled:o,children:[e.jsx("span",{className:"room-icon",children:T.icon}),e.jsx("span",{className:"room-label",children:T.label})]},T.value))})]}),e.jsxs("div",{className:"form-section",children:[e.jsxs("label",{className:"form-label",children:[e.jsx("span",{className:"label-text",children:"Room Image *"}),e.jsx("span",{className:"label-description",children:"Upload a clear photo of your completed room (JPG/PNG, max 5MB)"})]}),A?e.jsxs("div",{className:"image-preview",children:[e.jsx("img",{src:A,alt:"Room preview"}),e.jsx("button",{className:"remove-image-btn",onClick:L,disabled:o,"aria-label":"Remove image",children:""})]}):e.jsxs("div",{className:"file-upload-area",onClick:()=>a.current?.click(),children:[e.jsx("div",{className:"upload-icon",children:""}),e.jsxs("div",{className:"upload-text",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Click to upload"})," or drag and drop"]}),e.jsx("p",{children:"JPG or PNG (max 5MB)"})]}),e.jsx("input",{ref:a,type:"file",accept:"image/jpeg,image/jpg,image/png",onChange:O,style:{display:"none"},disabled:o})]})]}),e.jsxs("div",{className:"form-section",children:[e.jsxs("label",{className:"form-label",children:[e.jsx("span",{className:"label-text",children:"What would you like to improve? (Optional)"}),e.jsx("span",{className:"label-description",children:"Describe specific aspects you'd like to enhance (lighting, style, comfort, etc.)"})]}),e.jsx("textarea",{name:"improvement_notes",value:s.improvement_notes,onChange:te,placeholder:"e.g., The room feels too dark, I want to make it more cozy, need better storage solutions...",className:"improvement-notes",rows:"3",disabled:o})]}),e.jsxs("div",{className:"form-actions",children:[e.jsx("button",{className:"cancel-btn",onClick:()=>b(!1),disabled:o,children:"Back"}),e.jsx("button",{className:"analyze-btn",onClick:G,disabled:o||!s.room_type||!s.selected_file,children:o?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"spinner"}),"Analyzing Room..."]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"analyze-icon",children:""}),"Analyze Room & Generate Concept"]})})]})]})]}):e.jsxs("div",{className:"analysis-results-section",children:[e.jsxs("div",{className:"results-header",children:[e.jsx("h3",{children:" Room Improvement Analysis Complete"}),e.jsx("p",{children:"Here are your personalized improvement suggestions"})]}),e.jsxs("div",{className:"concept-card",children:[e.jsxs("div",{className:"concept-header",children:[e.jsx("h4",{className:"concept-name",children:d.concept_name}),e.jsx("div",{className:"concept-type",children:e.jsx("span",{className:"type-badge",children:"AI-Assisted Concept"})})]}),e.jsxs("div",{className:"concept-sections",children:[e.jsxs("div",{className:"concept-section",children:[e.jsx("h5",{children:" Current Room Analysis"}),e.jsxs("div",{className:"analysis-content",children:[e.jsx("p",{children:d.room_condition_summary}),d.visual_observations&&e.jsxs("div",{className:"visual-observations",children:[e.jsx("h6",{children:"Visual Observations:"}),e.jsx("ul",{children:d.visual_observations.map((T,Q)=>e.jsx("li",{children:T},Q))})]})]})]}),e.jsxs("div",{className:"concept-section",children:[e.jsx("h5",{children:" Improvement Suggestions"}),e.jsxs("div",{className:"suggestions-grid",children:[d.improvement_suggestions.lighting&&e.jsxs("div",{className:"suggestion-item",children:[e.jsx("h6",{children:" Lighting Enhancement"}),e.jsx("p",{children:d.improvement_suggestions.lighting})]}),d.improvement_suggestions.color_ambience&&e.jsxs("div",{className:"suggestion-item",children:[e.jsx("h6",{children:" Color & Ambience"}),e.jsx("p",{children:d.improvement_suggestions.color_ambience})]}),d.improvement_suggestions.furniture_layout&&e.jsxs("div",{className:"suggestion-item",children:[e.jsx("h6",{children:" Furniture & Layout"}),e.jsx("p",{children:d.improvement_suggestions.furniture_layout})]})]})]}),e.jsxs("div",{className:"concept-section",children:[e.jsx("h5",{children:" Style Recommendation"}),e.jsxs("div",{className:"style-recommendation",children:[e.jsx("div",{className:"style-name",children:d.style_recommendation.style}),e.jsx("p",{children:d.style_recommendation.description}),d.style_recommendation.key_elements&&e.jsxs("div",{className:"key-elements",children:[e.jsx("h6",{children:"Key Elements:"}),e.jsx("div",{className:"elements-tags",children:d.style_recommendation.key_elements.map((T,Q)=>e.jsx("span",{className:"element-tag",children:T},Q))})]})]})]}),e.jsxs("div",{className:"concept-section",children:[e.jsx("h5",{children:" Visual Reference"}),e.jsxs("div",{className:"visual-reference",children:[e.jsxs("div",{className:"reference-note",children:[e.jsx("strong",{children:"Note:"})," This is a conceptual and inspirational reference only. Actual implementation may vary based on your specific room conditions and preferences."]}),d.ai_enhancements?.conceptual_visualization?e.jsx("div",{className:"conceptual-visualization",children:d.ai_enhancements.conceptual_visualization.success?e.jsxs("div",{className:"generated-image-container",children:[d.ai_enhancements.conceptual_visualization.image_url?e.jsxs("div",{className:"conceptual-image-wrapper",children:[e.jsx("img",{src:d.ai_enhancements.conceptual_visualization.image_url,alt:"AI-generated room improvement concept",className:"conceptual-image",onError:T=>{T.target.style.display="none",T.target.nextElementSibling.style.display="block"}}),e.jsxs("div",{className:"image-fallback",style:{display:"none"},children:[e.jsx("div",{className:"fallback-icon",children:""}),e.jsx("p",{children:"Real AI image generated but not available for display"}),e.jsx("p",{children:"The AI successfully created a visualization based on your room analysis."})]}),e.jsx("div",{className:"image-actions",children:e.jsxs("button",{className:"download-btn",onClick:()=>{const T=d.ai_enhancements.conceptual_visualization.image_url,Q=s.room_type.replace("_","-"),q=new Date().toISOString().slice(0,19).replace(/:/g,"-"),ne=`ai-room-concept-${Q}-${q}.png`;X(T,ne)},title:"Download AI-generated room concept image",children:[e.jsx("span",{className:"download-icon",children:""}),"Download Image"]})})]}):e.jsxs("div",{className:"image-placeholder",children:[e.jsx("div",{className:"placeholder-icon",children:""}),e.jsx("p",{children:"Real AI conceptual visualization generated"}),e.jsx("p",{children:"Image processing completed successfully"})]}),e.jsxs("div",{className:"generation-details",children:[e.jsx("h6",{children:" Real AI Image Generated:"}),e.jsxs("div",{className:"generation-info",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Model:"})," Stable Diffusion v1.5"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Quality:"})," 512512 photorealistic"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Type:"})," Real AI-generated interior design"]})]})]})]}):e.jsxs("div",{className:"generation-error",children:[e.jsx("div",{className:"error-icon",children:""}),e.jsx("h6",{children:"Conceptual Visualization Unavailable"}),e.jsx("p",{children:d.ai_enhancements.conceptual_visualization.error||d.ai_enhancements.conceptual_visualization.note||"Conceptual image generation is temporarily unavailable."}),e.jsx("p",{className:"error-note",children:"Your room analysis and improvement suggestions are still available above."})]})}):v?e.jsx("div",{className:"async-generation-status",children:e.jsxs("div",{className:"generation-progress",children:[e.jsx("div",{className:"progress-icon",children:""}),e.jsx("h6",{children:"Generating Real AI Image..."}),e.jsxs("div",{className:"progress-details",children:[S==="pending"&&e.jsx("p",{children:" Image generation queued..."}),S==="processing"&&e.jsx("p",{children:" Creating real AI interior design image..."}),e.jsx("div",{className:"progress-bar",children:e.jsx("div",{className:"progress-fill"})}),e.jsxs("p",{className:"progress-note",children:[e.jsx("strong",{children:"Note:"})," Real AI image generation takes 1-5 minutes depending on system performance. The page will automatically update when complete."]})]})]})}):d.ai_enhancements?.async_image_generation?.job_id?e.jsxs("div",{className:"async-generation-info",children:[e.jsx("div",{className:"info-icon",children:""}),e.jsx("h6",{children:"Real AI Image Generation Available"}),e.jsx("p",{children:"A real AI image was requested but generation is still in progress."}),e.jsx("button",{className:"check-status-btn",onClick:()=>{x(!0),U(d.ai_enhancements.async_image_generation.job_id)},children:" Check Generation Status"})]}):e.jsxs("div",{className:"default-visual-reference",children:[e.jsx("p",{children:d.visual_reference||"A space perfectly tailored to your needs through intelligent visual analysis."}),e.jsx("div",{className:"manual-generation-section",children:e.jsxs("div",{className:"generation-prompt",children:[e.jsx("p",{children:"Want to see a visual concept of your improved room?"}),e.jsx("button",{className:"generate-image-btn",onClick:()=>E(),disabled:o||v,children:v?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"spinner"}),"Generating Image..."]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"btn-icon",children:""}),"Generate Visual Concept"]})})]})})]})]})]})]}),e.jsxs("div",{className:"concept-footer",children:[e.jsx("div",{className:"disclaimer",children:e.jsxs("p",{children:[e.jsx("strong",{children:"Important:"})," This analysis provides AI-assisted suggestions for decision support. Results are advisory and inspirational. Consult with interior design professionals for detailed implementation."]})}),e.jsx("div",{className:"concept-actions",children:e.jsx("button",{className:"new-analysis-btn",onClick:Y,children:"Analyze Another Room"})})]})]})]})})},KF=()=>{const t=$i(),a=Xn(),[s,i]=w.useState("dashboard"),[o,l]=w.useState("all"),[d,u]=w.useState([]),[A,p]=w.useState({}),[m,b]=w.useState({}),[v,x]=w.useState({}),[C,D]=w.useState(null),[S,_]=w.useState([]),[N,O]=w.useState(!1),[L,te]=w.useState(0),[G,X]=w.useState(!1),[U,E]=w.useState([]),[Y,T]=w.useState([]),[Q,q]=w.useState([]),[ne,R]=w.useState(!1),[z,ee]=w.useState(""),[le,Be]=w.useState(""),[$,ue]=w.useState(!1),[k,I]=w.useState(!1),[H,re]=w.useState(null),[J,V]=w.useState({plot_size:"",building_size:"",budget_range:"",plot_shape:"",num_floors:"",topography:"",development_laws:"",family_needs:[],rooms:[],aesthetic:"",style_preferences:{},location:"",district:"",panchayat_municipality:"",timeline:"",requirements:"",selected_layout_id:null,layout_type:"custom",custom_budget:""}),[oe,K]=w.useState(null),[Ne,Ee]=w.useState(!1),[st,ut]=w.useState({}),[Ge,_e]=w.useState(!1),[Et,Mt]=w.useState(!1),[Ze,Je]=w.useState(!1),[mt,ve]=w.useState(""),[et,Oe]=w.useState(null),[kt,xt]=w.useState({}),[lt,Ut]=w.useState([]),[_t,Nt]=w.useState({}),[qt,Bt]=w.useState({}),[Xt,ta]=w.useState(!1),[ie,at]=w.useState(null),[Ot,Ct]=w.useState(!1),[ia,ca]=w.useState(""),[Za,os]=w.useState(null),[Ba,xa]=w.useState({}),[Dt,ye]=w.useState(!1);w.useEffect(()=>{console.log(" HomeownerDashboard: showRoomImprovementModal state changed to:",Dt)},[Dt]);const[Ce,Ve]=w.useState({isOpen:!1,title:"",message:"",onConfirm:null,type:"danger"}),gt=(P,Ue,He,Ye="danger")=>{Ve({isOpen:!0,title:P,message:Ue,onConfirm:He,type:Ye})};w.useEffect(()=>{console.log("Modal state changed to:",Xt),console.log("Selected estimate changed to:",ie)},[Xt,ie]),w.useEffect(()=>{if(!localStorage.getItem("buildhub_dashboard_tour_completed")){const Ue=setTimeout(()=>{X(!0),te(0)},2e3);return()=>clearTimeout(Ue)}},[]),w.useEffect(()=>{try{const P=JSON.parse(localStorage.getItem("bh_paid_layouts")||"[]");if(Array.isArray(P)&&P.length){const Ue={};P.forEach(He=>{Ue[He]=!0}),xt(He=>({...He,...Ue}))}}catch{}},[]),w.useEffect(()=>{let P=!0;const Ue=async()=>{try{const Ye=JSON.parse(sessionStorage.getItem("user")||"{}");if(!Ye?.id){console.log("No user ID found for fetching estimates");return}console.log("Fetching estimates for homeowner:",Ye.id);const Vt=await(await fetch(`/buildhub/backend/api/homeowner/get_estimates.php?homeowner_id=${Ye.id}`,{credentials:"include"})).json().catch(()=>({}));if(console.log("Estimates API response:",Vt),P&&Vt?.success){console.log("Setting estimates:",Array.isArray(Vt.estimates)?Vt.estimates:[]),Ut(Array.isArray(Vt.estimates)?Vt.estimates:[]);const Pt={};Array.isArray(Vt.estimates)&&Vt.estimates.forEach(Rt=>{(Rt.status==="approved_with_message"||Rt.homeowner_feedback)&&(Pt[Rt.id]=!0)}),xa(Pt)}else console.log("Estimates fetch failed:",Vt.message)}catch(Ye){console.error("Error fetching estimates:",Ye)}};Ue();const He=setInterval(Ue,6e4);return()=>{P=!1,clearInterval(He)}},[]);const Qt=async P=>{try{if(!(Number(P.is_paid||0)>0)){let Oa=0;for(;(!window.Razorpay||window._razorpayLoading)&&Oa<20;)await new Promise(di=>setTimeout(di,100)),Oa++;if(!window.Razorpay){a.error("Payment system not loaded. Please refresh the page and try again.");return}const Yt=JSON.parse(sessionStorage.getItem("user")||"{}"),Ci=await(await fetch("/buildhub/backend/api/homeowner/initiate_estimate_payment.php",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({homeowner_id:Yt.id,estimate_id:P.id})})).json();if(!Ci?.success){a.error(Ci?.message||"Failed to start payment");return}const ko={key:Ci.razorpay_key_id,amount:Ci.amount,currency:Ci.currency||"INR",name:"BuildHub",description:`Unlock Contractor Estimate #${P.id}`,order_id:Ci.razorpay_order_id,handler:async function(di){try{const Pi=await(await fetch("/buildhub/backend/api/homeowner/verify_estimate_payment.php",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({razorpay_payment_id:di.razorpay_payment_id,razorpay_order_id:di.razorpay_order_id,razorpay_signature:di.razorpay_signature,payment_id:Ci.payment_id})})).json();if(Pi?.success){try{const Tr=JSON.parse(sessionStorage.getItem("user")||"{}"),Hi=await(await fetch(`/buildhub/backend/api/homeowner/get_estimates.php?homeowner_id=${Tr.id}`,{credentials:"include"})).json().catch(()=>({}));Hi?.success&&Ut(Array.isArray(Hi.estimates)?Hi.estimates:[])}catch{}a.success("Payment successful. Estimate unlocked. Click again to download.")}else a.error(Pi?.message||"Payment verification failed")}catch{a.error("Verification error")}},prefill:{name:Yt?.first_name||"Homeowner",email:Yt?.email||""}};try{new window.Razorpay(ko).open()}catch(di){console.error("Razorpay error:",di),a.error("Failed to open payment gateway. Please try again.")}return}const He=(()=>{try{return P.structured?JSON.parse(P.structured):null}catch{return null}})(),Ye=Oa=>Oa==null||Oa===""||isNaN(Number(Oa))?"0":`${Number(Oa).toLocaleString("en-IN")}`,Tt=P.contractor_name||"Contractor Name",Vt=new Date().toLocaleDateString("en-IN",{year:"numeric",month:"long",day:"numeric"}),Pt=`
        <div style="font-family: 'Times New Roman', serif; color: #1a1a1a; margin: 0; padding: 0; line-height: 1.4; background: white;">
      <!-- Company Header -->
          <div style="text-align: center; margin-bottom: 30px; border-bottom: 3px solid #2c3e50; padding-bottom: 20px;">
            <div style="width: 120px; height: 120px; margin: 0 auto 15px; border: 2px solid #2c3e50; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 48px; font-weight: bold; color: #2c3e50; background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);"></div>
            <div style="font-size: 28px; font-weight: bold; color: #2c3e50; margin: 10px 0 5px 0; text-transform: uppercase; letter-spacing: 2px;">${Tt} Construction</div>
            <div style="font-size: 14px; color: #6c757d; font-style: italic; margin-bottom: 10px;">Professional Construction Services</div>
            <div style="font-size: 12px; color: #495057; line-height: 1.3;">
           Email: ${P.contractor_email||"contact@company.com"} | 
           Phone: ${P.contractor_phone||"+91-XXXXX-XXXXX"} | 
           License: ${P.contractor_license||"LIC-XXXXX"}
        </div>
      </div>

      <!-- Document Title -->
          <div style="text-align: center; margin: 30px 0; font-size: 24px; font-weight: bold; color: #2c3e50; text-transform: uppercase; letter-spacing: 1px;">Cost Estimate Report</div>

      <!-- Estimate Information -->
          <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 30px; padding: 15px; background: #f8f9fa; border-left: 4px solid #2c3e50;">
            <div>
              <h3 style="margin: 0 0 10px 0; font-size: 16px; color: #2c3e50; border-bottom: 1px solid #dee2e6; padding-bottom: 5px;">Project Details</h3>
              <p style="margin: 5px 0; font-size: 14px;"><strong>Project Name:</strong> ${He?.project_name||"Construction Project"}</p>
              <p style="margin: 5px 0; font-size: 14px;"><strong>Location:</strong> ${He?.project_address||"Project Location"}</p>
              <p style="margin: 5px 0; font-size: 14px;"><strong>Client:</strong> ${P.client_name||"Client Name"}</p>
              <p style="margin: 5px 0; font-size: 14px;"><strong>Plot Size:</strong> ${He?.plot_size||""}</p>
              <p style="margin: 5px 0; font-size: 14px;"><strong>Built-up Area:</strong> ${He?.built_up_area||""}</p>
              <p style="margin: 5px 0; font-size: 14px;"><strong>Floors:</strong> ${He?.floors||""}</p>
        </div>
            <div>
              <h3 style="margin: 0 0 10px 0; font-size: 16px; color: #2c3e50; border-bottom: 1px solid #dee2e6; padding-bottom: 5px;">Estimate Information</h3>
              <p style="margin: 5px 0; font-size: 14px;"><strong>Estimate Date:</strong> ${Vt}</p>
              <p style="margin: 5px 0; font-size: 14px;"><strong>Estimate Valid Until:</strong> ${new Date(Date.now()+720*60*60*1e3).toLocaleDateString("en-IN")}</p>
              <p style="margin: 5px 0; font-size: 14px;"><strong>Project Duration:</strong> ${P.timeline||"90 days"}</p>
              <p style="margin: 5px 0; font-size: 14px;"><strong>Estimate #:</strong> EST-${P.id}</p>
        </div>
      </div>

      <!-- Cost Breakdown -->
          <div style="margin: 30px 0;">
            <h2 style="font-size: 20px; color: #2c3e50; border-bottom: 2px solid #2c3e50; padding-bottom: 10px; margin-bottom: 20px;">Detailed Cost Breakdown</h2>
            <table style="width: 100%; border-collapse: collapse; margin-bottom: 20px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
          <thead>
            <tr>
                  <th style="background: #2c3e50; color: white; padding: 12px; text-align: left; font-weight: bold; font-size: 14px;">Item Description</th>
                  <th style="background: #2c3e50; color: white; padding: 12px; text-align: left; font-weight: bold; font-size: 14px;">Quantity</th>
                  <th style="background: #2c3e50; color: white; padding: 12px; text-align: left; font-weight: bold; font-size: 14px;">Unit Rate ()</th>
                  <th style="background: #2c3e50; color: white; padding: 12px; text-align: left; font-weight: bold; font-size: 14px;">Amount ()</th>
            </tr>
          </thead>
          <tbody>
                ${He&&He.materials?Object.entries(He.materials).filter(([Oa,Yt])=>Yt&&typeof Yt=="object"&&(Yt.name||Yt.amount)).map(([Oa,Yt],vs)=>`
                  <tr style="background: ${vs%2===0?"#f8f9fa":"white"};">
                    <td style="padding: 10px 12px; border-bottom: 1px solid #dee2e6; font-size: 14px;">${Yt.name||Oa}</td>
                    <td style="padding: 10px 12px; border-bottom: 1px solid #dee2e6; font-size: 14px;">${Yt.qty||""}</td>
                    <td style="padding: 10px 12px; border-bottom: 1px solid #dee2e6; font-size: 14px;">${Yt.rate||""}</td>
                    <td style="padding: 10px 12px; border-bottom: 1px solid #dee2e6; font-size: 14px;">${Ye(Yt.amount)}</td>
              </tr>
            `).join(""):""}
                ${He&&He.labor?Object.entries(He.labor).filter(([Oa,Yt])=>Yt&&typeof Yt=="object"&&(Yt.name||Yt.amount)).map(([Oa,Yt],vs)=>`
                  <tr style="background: ${vs%2===0?"#f8f9fa":"white"};">
                    <td style="padding: 10px 12px; border-bottom: 1px solid #dee2e6; font-size: 14px;">${Yt.name||Oa}</td>
                    <td style="padding: 10px 12px; border-bottom: 1px solid #dee2e6; font-size: 14px;">${Yt.qty||""}</td>
                    <td style="padding: 10px 12px; border-bottom: 1px solid #dee2e6; font-size: 14px;">${Yt.rate||""}</td>
                    <td style="padding: 10px 12px; border-bottom: 1px solid #dee2e6; font-size: 14px;">${Ye(Yt.amount)}</td>
              </tr>
            `).join(""):""}
                ${He&&He.utilities?Object.entries(He.utilities).filter(([Oa,Yt])=>Yt&&typeof Yt=="object"&&(Yt.name||Yt.amount)).map(([Oa,Yt],vs)=>`
                  <tr style="background: ${vs%2===0?"#f8f9fa":"white"};">
                    <td style="padding: 10px 12px; border-bottom: 1px solid #dee2e6; font-size: 14px;">${Yt.name||Oa}</td>
                    <td style="padding: 10px 12px; border-bottom: 1px solid #dee2e6; font-size: 14px;">${Yt.qty||""}</td>
                    <td style="padding: 10px 12px; border-bottom: 1px solid #dee2e6; font-size: 14px;">${Yt.rate||""}</td>
                    <td style="padding: 10px 12px; border-bottom: 1px solid #dee2e6; font-size: 14px;">${Ye(Yt.amount)}</td>
              </tr>
            `).join(""):""}
                ${He&&He.misc?Object.entries(He.misc).filter(([Oa,Yt])=>Yt&&typeof Yt=="object"&&(Yt.name||Yt.amount)).map(([Oa,Yt],vs)=>`
                  <tr style="background: ${vs%2===0?"#f8f9fa":"white"};">
                    <td style="padding: 10px 12px; border-bottom: 1px solid #dee2e6; font-size: 14px;">${Yt.name||Oa}</td>
                    <td style="padding: 10px 12px; border-bottom: 1px solid #dee2e6; font-size: 14px;">${Yt.qty||""}</td>
                    <td style="padding: 10px 12px; border-bottom: 1px solid #dee2e6; font-size: 14px;">${Yt.rate||""}</td>
                    <td style="padding: 10px 12px; border-bottom: 1px solid #dee2e6; font-size: 14px;">${Ye(Yt.amount)}</td>
              </tr>
            `).join(""):""}
          </tbody>
        </table>
      </div>

      <!-- Total Section -->
          <div style="margin: 30px 0; padding: 20px; background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%); color: white; border-radius: 8px;">
            <h2 style="margin: 0 0 15px 0; font-size: 18px; text-align: center;">Cost Summary</h2>
            <div style="display: flex; justify-content: space-between; margin: 8px 0; font-size: 16px;">
          <span>Materials Cost:</span>
          <span>${Ye(He?.totals?.materials||0)}</span>
        </div>
            <div style="display: flex; justify-content: space-between; margin: 8px 0; font-size: 16px;">
          <span>Labor Cost:</span>
          <span>${Ye(He?.totals?.labor||0)}</span>
        </div>
            <div style="display: flex; justify-content: space-between; margin: 8px 0; font-size: 16px;">
          <span>Utilities:</span>
          <span>${Ye(He?.totals?.utilities||0)}</span>
        </div>
            <div style="display: flex; justify-content: space-between; margin: 8px 0; font-size: 16px;">
          <span>Miscellaneous:</span>
          <span>${Ye(He?.totals?.misc||0)}</span>
        </div>
            <div style="display: flex; justify-content: space-between; margin: 8px 0; font-size: 16px;">
          <span>Transportation:</span>
          <span>${Ye(He?.totals?.transport||0)}</span>
        </div>
            <div style="display: flex; justify-content: space-between; margin: 8px 0; font-size: 16px;">
          <span>Contingency (5%):</span>
          <span>${Ye(He?.totals?.contingency||0)}</span>
        </div>
            <div style="display: flex; justify-content: space-between; margin: 8px 0; font-size: 18px; font-weight: bold; border-top: 2px solid white; padding-top: 10px; margin-top: 15px;">
          <span>GRAND TOTAL:</span>
          <span>${Ye(He?.totals?.grand||P.total_cost)}</span>
        </div>
      </div>

      <!-- Terms and Conditions -->
          <div style="margin: 30px 0; padding: 20px; background: #f8f9fa; border-left: 4px solid #28a745;">
            <h3 style="margin: 0 0 15px 0; color: #28a745; font-size: 16px;">Terms & Conditions</h3>
            <p style="margin: 8px 0; font-size: 14px; line-height: 1.5;"><strong>Payment Terms:</strong> 30% advance, 40% on completion of foundation, 30% on completion</p>
            <p style="margin: 8px 0; font-size: 14px; line-height: 1.5;"><strong>Validity:</strong> This estimate is valid for 30 days from the date of issue</p>
            <p style="margin: 8px 0; font-size: 14px; line-height: 1.5;"><strong>Materials:</strong> All materials will be of standard quality as per specifications</p>
            <p style="margin: 8px 0; font-size: 14px; line-height: 1.5;"><strong>Timeline:</strong> Project completion within ${P.timeline||"90"} days from commencement</p>
            <p style="margin: 8px 0; font-size: 14px; line-height: 1.5;"><strong>Warranty:</strong> 1 year warranty on workmanship, 5 years on structural elements</p>
            <p style="margin: 8px 0; font-size: 14px; line-height: 1.5;"><strong>Notes:</strong> ${P.notes?P.notes.replace(/\n/g,"<br/>"):"All work to be done as per approved drawings and specifications"}</p>
      </div>

      <!-- Signature Section -->
          <div style="margin-top: 50px; display: grid; grid-template-columns: 1fr 1fr; gap: 40px;">
            <div style="text-align: center; padding: 20px; border: 2px solid #2c3e50; border-radius: 8px; background: #f8f9fa;">
              <div style="border-bottom: 2px solid #2c3e50; margin: 40px 0 10px 0; height: 2px;"></div>
              <div style="font-size: 14px; font-weight: bold; color: #2c3e50; margin-top: 10px;">Client Signature</div>
          <p style="margin-top: 10px; font-size: 12px; color: #6c757d;">Date: _______________</p>
        </div>
            <div style="text-align: center; padding: 20px; border: 2px solid #2c3e50; border-radius: 8px; background: #f8f9fa;">
              <div style="width: 100px; height: 100px; border: 3px solid #dc3545; border-radius: 50%; margin: 0 auto 15px; display: flex; align-items: center; justify-content: center; font-size: 12px; font-weight: bold; color: #dc3545; background: white; text-align: center; line-height: 1.2;">
            <div>OFFICIAL<br/>SEAL</div>
          </div>
              <div style="border-bottom: 2px solid #2c3e50; margin: 40px 0 10px 0; height: 2px;"></div>
              <div style="font-size: 14px; font-weight: bold; color: #2c3e50; margin-top: 10px;">${Tt}</div>
          <p style="margin-top: 5px; font-size: 12px; color: #6c757d;">Authorized Contractor</p>
          <p style="margin-top: 5px; font-size: 12px; color: #6c757d;">Date: ${Vt}</p>
        </div>
      </div>

      <!-- Footer -->
          <div style="margin-top: 40px; text-align: center; font-size: 12px; color: #6c757d; border-top: 1px solid #dee2e6; padding-top: 15px;">
        <p>This is a computer-generated estimate. For any clarifications, please contact us.</p>
        <p> ${new Date().getFullYear()} ${Tt} Construction. All rights reserved.</p>
      </div>
        </div>`,Rt=document.createElement("div");Rt.style.position="absolute",Rt.style.left="-9999px",Rt.style.top="-9999px",Rt.style.width="210mm",Rt.style.padding="20mm",Rt.style.backgroundColor="white",Rt.style.fontFamily="Times New Roman, serif",Rt.style.fontSize="12px",Rt.style.lineHeight="1.4",Rt.style.color="#1a1a1a",Rt.innerHTML=Pt,document.body.appendChild(Rt),console.log("Converting HTML to canvas...");const es=await Gc(Rt,{scale:2,useCORS:!0,allowTaint:!0,backgroundColor:"#ffffff"});console.log("Canvas created:",es.width,"x",es.height),document.body.removeChild(Rt),console.log("Creating PDF...");const Ma=new ua("p","mm","a4"),Ga=es.toDataURL("image/png"),La=210,ws=295,Hs=es.height*La/es.width;let ci=Hs;console.log("Image dimensions:",La,"x",Hs);let Bi=0;for(Ma.addImage(Ga,"PNG",0,Bi,La,Hs),ci-=ws;ci>=0;)Bi=ci-Hs,Ma.addPage(),Ma.addImage(Ga,"PNG",0,Bi,La,Hs),ci-=ws;const ks=`Estimate_${Tt.replace(/\s+/g,"_")}_${Date.now().toString().slice(-6)}.pdf`;console.log("Saving PDF as:",ks);try{const Oa=Ma.output("blob"),Yt=URL.createObjectURL(Oa),vs=document.createElement("a");vs.href=Yt,vs.download=ks,vs.style.display="none",document.body.appendChild(vs),vs.click(),document.body.removeChild(vs),URL.revokeObjectURL(Yt),console.log("PDF downloaded via blob method")}catch(Oa){console.log("Blob method failed, trying direct save:",Oa),Ma.save(ks)}console.log("PDF save method called")}catch(Ue){console.error("Error generating PDF report:",Ue),a.error("Error generating PDF report")}},ja=async P=>{try{const He=(()=>{try{return P.structured?JSON.parse(P.structured):null}catch{return null}})()?.technical_details||{};if(!He||Object.keys(He).length===0){a.warning("No technical details available for this estimate");return}const Ye=P.contractor_name||"Contractor",Tt=new Date().toLocaleDateString("en-IN",{year:"numeric",month:"long",day:"numeric"}),Vt=Oa=>Oa?typeof Oa=="object"?JSON.stringify(Oa,null,2):String(Oa):"",Pt=`
        <div style="font-family: 'Times New Roman', serif; color: #1a1a1a; margin: 0; padding: 20px; line-height: 1.4; background: white;">
          <div style="text-align: center; margin-bottom: 30px; border-bottom: 3px solid #2c3e50; padding-bottom: 20px;">
            <div style="font-size: 28px; font-weight: bold; color: #2c3e50;">Technical Details Report</div>
            <div style="font-size: 14px; color: #6c757d; margin-top: 8px;">Contractor: ${Ye}</div>
            <div style="font-size: 12px; color: #9ca3af;">Date: ${Tt}</div>
          </div>
          
          ${He.room_dimensions?`
          <div style="margin-bottom: 24px;">
            <h3 style="color: #2c3e50; border-bottom: 2px solid #2c3e50; padding-bottom: 8px;">Room Dimensions</h3>
            <div style="margin-top: 12px;">
              ${Object.entries(He.room_dimensions).map(([Oa,Yt])=>`
                <div style="padding: 8px 12px; margin: 4px 0; background: #f8f9fa; border-left: 3px solid #2c3e50;">
                  <strong>${Oa}:</strong> ${Vt(Yt)}
                </div>
              `).join("")}
            </div>
          </div>
          `:""}

          ${He.floor_plans?`
          <div style="margin-bottom: 24px;">
            <h3 style="color: #2c3e50; border-bottom: 2px solid #2c3e50; padding-bottom: 8px;">Floor Plans</h3>
            <div style="margin-top: 12px;">
              ${Object.entries(He.floor_plans).map(([Oa,Yt])=>`
                <div style="padding: 8px 12px; margin: 4px 0; background: #f8f9fa; border-left: 3px solid #2c3e50;">
                  <strong>${Oa.replace(/_/g," ")}:</strong> ${Vt(Yt)}
                </div>
              `).join("")}
            </div>
          </div>
          `:""}

          ${He.structural_elements?`
          <div style="margin-bottom: 24px;">
            <h3 style="color: #2c3e50; border-bottom: 2px solid #2c3e50; padding-bottom: 8px;">Structural Elements</h3>
            <div style="margin-top: 12px;">
              ${Object.entries(He.structural_elements).map(([Oa,Yt])=>`
                <div style="padding: 8px 12px; margin: 4px 0; background: #f8f9fa; border-left: 3px solid #2c3e50;">
                  <strong>${Oa.replace(/_/g," ")}:</strong> ${Vt(Yt)}
                </div>
              `).join("")}
            </div>
          </div>
          `:""}

          ${He.material_specifications?`
          <div style="margin-bottom: 24px;">
            <h3 style="color: #2c3e50; border-bottom: 2px solid #2c3e50; padding-bottom: 8px;">Material Specifications</h3>
            <div style="margin-top: 12px;">
              ${Object.entries(He.material_specifications).map(([Oa,Yt])=>`
                <div style="padding: 8px 12px; margin: 4px 0; background: #f8f9fa; border-left: 3px solid #2c3e50;">
                  <strong>${Oa.replace(/_/g," ")}:</strong> ${Vt(Yt)}
                </div>
              `).join("")}
            </div>
          </div>
          `:""}
        </div>`,Rt=document.createElement("div");Rt.style.position="absolute",Rt.style.left="-9999px",Rt.style.top="-9999px",Rt.style.width="210mm",Rt.style.padding="20mm",Rt.style.backgroundColor="white",Rt.innerHTML=Pt,document.body.appendChild(Rt);const es=await Gc(Rt,{scale:2,useCORS:!0,allowTaint:!0,backgroundColor:"#ffffff"});document.body.removeChild(Rt);const Ma=new ua("p","mm","a4"),Ga=es.toDataURL("image/png"),La=210,ws=295,Hs=es.height*La/es.width;let ci=Hs,Bi=0;for(Ma.addImage(Ga,"PNG",0,Bi,La,Hs),ci-=ws;ci>=0;)Bi=ci-Hs,Ma.addPage(),Ma.addImage(Ga,"PNG",0,Bi,La,Hs),ci-=ws;const ks=`Technical_Details_${Ye.replace(/\s+/g,"_")}_${Date.now().toString().slice(-6)}.pdf`;Ma.save(ks),a.success("Technical details PDF downloaded successfully")}catch(Ue){console.error("Error generating technical details PDF:",Ue),a.error("Error generating PDF")}},va=async(P,Ue,He="")=>{try{const Ye=JSON.parse(sessionStorage.getItem("user")||"{}"),Vt=await(await fetch("/buildhub/backend/api/homeowner/respond_to_estimate.php",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({homeowner_id:Ye.id,estimate_id:P.id,action:Ue,message:He})})).json();if(Vt?.success){try{const es=await(await fetch(`/buildhub/backend/api/homeowner/get_estimates.php?homeowner_id=${Ye.id}`,{credentials:"include"})).json().catch(()=>({}));es?.success&&Ut(Array.isArray(es.estimates)?es.estimates:[])}catch{}const Pt=Ue==="accept"?"Accepted. Contractor will be notified.":Ue==="changes"?"Change request sent.":"Estimate rejected.";try{a.success(Pt)}catch{}}else try{a.error(Vt?.message||"Failed to update")}catch{}}catch{}},_a=async P=>{try{const Ue=JSON.parse(sessionStorage.getItem("user")||"{}");if(!Ue?.id){a.error("Not logged in");return}if(!P?.id){a.error("Invalid estimate");return}const Ye=await(await fetch("/buildhub/backend/api/homeowner/start_construction.php",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({homeowner_id:Ue.id,estimate_id:P.id})})).json().catch(()=>({}));if(Ye?.success){a.success("Construction started successfully! Contractor can now submit progress updates.");try{const Vt=await(await fetch(`/buildhub/backend/api/homeowner/get_estimates.php?homeowner_id=${Ue.id}`,{credentials:"include"})).json().catch(()=>({}));Vt?.success&&Ut(Array.isArray(Vt.estimates)?Vt.estimates:[])}catch{}}else a.error(Ye?.message||"Failed to start construction")}catch(Ue){console.error("Error starting construction:",Ue),a.error("Error starting construction")}},Na=async P=>{P&&gt("Remove Estimate","Are you sure you want to remove this estimate? This action cannot be undone.",async()=>{try{const He=await(await fetch("/buildhub/backend/api/homeowner/delete_estimate.php",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({estimate_id:P})})).json();He.success?(Ut(Ye=>Ye.filter(Tt=>Tt.id!==P)),a.success("Estimate removed successfully")):a.error(He.message||"Failed to remove estimate")}catch(Ue){console.error("Error removing estimate:",Ue),a.error("Error removing estimate. Please try again.")}})},Pa=async P=>{try{console.log("=== SEND MESSAGE DEBUG ==="),console.log("Estimate object:",P);const Ue=JSON.parse(sessionStorage.getItem("user")||"{}");if(console.log("User:",Ue),!Ue?.id){console.log("No user ID found");try{a.error("Not logged in")}catch{}return}if(!P?.id||!P?.contractor_id){console.log("Invalid estimate data:",{id:P?.id,contractor_id:P?.contractor_id});try{a.error("Invalid estimate data")}catch{}return}console.log("Sending direct message for estimate:",P.id),console.log("Contractor ID:",P.contractor_id),console.log("Homeowner ID:",Ue.id);const He={homeowner_id:Ue.id,estimate_id:P.id,contractor_id:P.contractor_id,project_title:P.project_title||`Estimate #${P.id}`,message:"I am satisfied with this estimate and ready to start the construction project. Please let me know the next steps and when we can begin work."};console.log("Request data:",He);const Ye=await fetch("/buildhub/backend/api/homeowner/send_estimate_message.php",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(He)});console.log("Response status:",Ye.status);const Tt=await Ye.json();if(console.log("Response data:",Tt),Tt?.success){console.log("Message sent successfully!");try{a.success("Message sent to contractor successfully!")}catch{}xa(Vt=>({...Vt,[P.id]:!0}));try{const Pt=await(await fetch(`/buildhub/backend/api/homeowner/get_estimates.php?homeowner_id=${Ue.id}`,{credentials:"include"})).json().catch(()=>({}));Pt?.success&&Ut(Array.isArray(Pt.estimates)?Pt.estimates:[])}catch{}}else{console.log("Failed to send message:",Tt);try{a.error(Tt?.message||"Failed to send message")}catch{}}}catch(Ue){console.error("Error sending message:",Ue);try{a.error("Error sending message: "+Ue.message)}catch{}}},ls=Array.isArray(S)?S.length:0,cs=Array.isArray(d)?d.length:0;Array.isArray(Y)&&Y.length,Array.isArray(U)&&U.length;const Gs=Array.isArray(Q)?Q.length:0;w.useEffect(()=>{let P=!0;const Ue=async()=>{try{const Tt=await(await fetch("/buildhub/backend/api/homeowner/get_my_requests.php")).json().catch(()=>({}));if(P&&Tt?.success){const Vt=Array.isArray(Tt.requests)?Tt.requests:[];_(Vt.filter(Pt=>Pt.status!=="deleted"))}}catch{}try{const Tt=await(await fetch("/buildhub/backend/api/homeowner/get_contractor_requests.php")).json().catch(()=>({}));if(P&&Tt?.success){const Vt=Array.isArray(Tt.requests)?Tt.requests:[];E(Vt.filter(Pt=>Pt.status!=="deleted"))}}catch{}try{const Tt=await(await fetch("/buildhub/backend/api/homeowner/get_received_designs.php",{credentials:"include"})).json().catch(()=>({}));P&&Tt?.success&&u(Array.isArray(Tt.designs)?Tt.designs:[])}catch{}try{const Tt=await(await fetch("/buildhub/backend/api/homeowner/get_my_projects.php")).json().catch(()=>({}));P&&Tt?.success&&T(Array.isArray(Tt.projects)?Tt.projects:[])}catch{}try{const Tt=await(await fetch("/buildhub/backend/api/homeowner/get_layout_library.php",{credentials:"include"})).json().catch(()=>({}));P&&Tt?.success&&q(Array.isArray(Tt.layouts)?Tt.layouts:[])}catch{}};Ue();const He=setInterval(Ue,6e4);return()=>{P=!1,clearInterval(He)}},[]);const yn=P=>{const Ue=Number(P?.sqft||P?.area||0);if(Ue>0)return Ue;const He=P?.technical_details||P?.technicalDetails||{},Ye=Number(He?.sqft||He?.area_sqft||He?.total_sqft||He?.totalSqft||0);if(Ye>0)return Ye;const Tt=P?.meta||{},Vt=Number(Tt?.sqft||Tt?.area_sqft||0);return Vt>0?Vt:0},ge=P=>{if(P?.view_price&&P.view_price>0)return parseFloat(P.view_price);const Ue=yn(P),He=8e3,Ye=Ue>0?Ue*10:0;return He+Ye},it=async P=>{ve(""),Je(!0),Oe(P.id);try{const He=await(await fetch("/buildhub/backend/api/homeowner/initiate_layout_payment.php",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({design_id:P.id,amount_override:ge(P)})})).json();if(!He?.success){ve(He?.message||"Failed to initiate payment");return}const Ye={key:He.razorpay_key_id,amount:He.amount,currency:He.currency||"INR",name:"BuildHub",description:`View layout: ${He.design_title||P.title||P.design_title||"Layout"}`,order_id:He.razorpay_order_id,handler:async function(Vt){try{const Rt=await(await fetch("/buildhub/backend/api/homeowner/verify_layout_payment.php",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({razorpay_payment_id:Vt.razorpay_payment_id,razorpay_order_id:Vt.razorpay_order_id,razorpay_signature:Vt.razorpay_signature,payment_id:He.payment_id,design_id:P.id})})).json();if(Rt?.success){const Ma=await(await fetch("/buildhub/backend/api/homeowner/get_received_designs.php",{credentials:"include"})).json().catch(()=>({}));Ma?.success&&u(Array.isArray(Ma.designs)?Ma.designs:[]),xt(Ga=>{const La={...Ga,[P.id]:!0};try{const ws=JSON.parse(localStorage.getItem("bh_paid_layouts")||"[]"),Hs=new Set(Array.isArray(ws)?ws:[]);Hs.add(P.id),localStorage.setItem("bh_paid_layouts",JSON.stringify(Array.from(Hs)))}catch{}return La}),ve("")}else ve(Rt?.message||"Payment verification failed")}catch{ve("Payment verification failed")}},prefill:{name:`${C?.first_name||""} ${C?.last_name||""}`.trim()||void 0,email:C?.email},theme:{color:"#2563eb"}};new window.Razorpay(Ye).open()}catch{ve("Network error during payment")}finally{Je(!1),Oe(null)}},$e=P=>!!(P?.payment_status==="completed"||P?.unlocked===!0||kt?.[P?.id]),zt=async P=>{ve(""),Je(!0),Oe(P.id);try{let Ue=0;for(;(!window.Razorpay||window._razorpayLoading)&&Ue<20;)await new Promise(Vt=>setTimeout(Vt,100)),Ue++;if(!window.Razorpay){ve("Payment system not loaded. Please refresh the page and try again.");return}const Ye=await(await fetch("/buildhub/backend/api/homeowner/initiate_technical_details_payment.php",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({house_plan_id:P.house_plan_id})})).json();if(!Ye?.success){ve(Ye?.message||"Failed to initiate payment");return}const Tt={key:Ye.razorpay_key_id,amount:Ye.amount,currency:Ye.currency||"INR",name:"BuildHub",description:Ye.description||`Unlock Technical Details: ${P.design_title}`,order_id:Ye.razorpay_order_id,handler:async function(Vt){try{const Rt=await(await fetch("/buildhub/backend/api/homeowner/verify_technical_details_payment.php",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({razorpay_payment_id:Vt.razorpay_payment_id,razorpay_order_id:Vt.razorpay_order_id,razorpay_signature:Vt.razorpay_signature,payment_id:Ye.payment_id})})).json();Rt?.success?(await ct(),ve(""),a?.success("Technical details unlocked successfully!")):ve(Rt?.message||"Payment verification failed")}catch(Pt){console.error("Payment verification error:",Pt),ve("Payment verification failed")}},prefill:{name:`${C?.first_name||""} ${C?.last_name||""}`.trim()||void 0,email:C?.email},theme:{color:"#2563eb"}};try{new window.Razorpay(Tt).open()}catch(Vt){console.error("Razorpay error:",Vt),ve("Failed to open payment gateway. Please try again.")}}catch(Ue){console.error("Payment initiation error:",Ue),ve("Network error during payment")}finally{Je(!1),Oe(null)}},[St,yt]=w.useState([]),[Va,Zt]=w.useState(!1),[W,me]=w.useState(""),[ke,tt]=w.useState(""),[ht,Lt]=w.useState(""),[It,Jt]=w.useState(""),Ht=w.useRef("");w.useEffect(()=>{Ht.current=ht},[ht]),w.useEffect(()=>{const P=setTimeout(()=>{const Ue=Ht.current;typeof Ue=="string"&&Ue.trim().length>0&&Xs({status:"approved",search:ke,specialization:Ue,min_experience:It})},350);return()=>clearTimeout(P)},[ht,ke,It]);const[Wt,wa]=w.useState(!1),[ba,ka]=w.useState(null),[gs,Ys]=w.useState([]),[Wi,ds]=w.useState(!1),[Nr,Xr]=w.useState(!1),[Js,vi]=w.useState(null),[qa,oi]=w.useState([]),[$a,Ri]=w.useState(""),[Bo,Ar]=w.useState(!1),[vn,Mn]=w.useState({subject:"",category:"general",message:""}),[Br,li]=w.useState(!1),[Ya,Ae]=w.useState([]),[xe,Re]=w.useState(null),[nt,vt]=w.useState([]),[ot,Kt]=w.useState(!1),[aa,da]=w.useState(!1),[ea,Gt]=w.useState({title:"",layoutType:"",bedrooms:"",bathrooms:"",area:"",priceRange:"",description:"",previewImage:null,layoutFile:null}),[js,hn]=w.useState([]),[Kn,Ts]=w.useState([]),[bn,Bn]=w.useState({open:!1,src:"",title:""}),[Yi,ur]=w.useState(!1),[Ji,Co]=w.useState([]),[Di,Xi]=w.useState(!1),[Cr,jn]=w.useState(""),[Ss,bi]=w.useState([]),[Zi,Zr]=w.useState(""),[Sr,hr]=w.useState(!1),[As,Ii]=w.useState(null),[Ja,eo]=w.useState(null),er=w.useRef(null);w.useEffect(()=>{const P=He=>{er.current&&!er.current.contains(He.target)&&_e(!1)},Ue=He=>{He.key==="Escape"&&_e(!1)};return document.addEventListener("mousedown",P),document.addEventListener("keydown",Ue),()=>{document.removeEventListener("mousedown",P),document.removeEventListener("keydown",Ue)}},[]),w.useEffect(()=>{const P=JSON.parse(sessionStorage.getItem("user")||"{}");console.log("User data loaded:",P),D(P)},[]),w.useEffect(()=>{console.log("Profile menu open state changed:",Ge)},[Ge]),w.useEffect(()=>{C?.id&&console.log("Loading notifications for user:",C.id)},[C?.id]),w.useEffect(()=>{cr(async()=>{const{preventCache:P,verifyServerSession:Ue}=await import("./session-DODIVVdM.js");return{preventCache:P,verifyServerSession:Ue}},[]).then(({preventCache:P,verifyServerSession:Ue})=>{P(),(async()=>{const He=JSON.parse(sessionStorage.getItem("user")||"{}"),Ye=await Ue();if(!He.id||He.role!=="homeowner"||!Ye){sessionStorage.removeItem("user"),localStorage.removeItem("bh_user"),t("/login",{replace:!0});return}})()})},[]);const ji=async()=>{try{const Ue=await(await fetch("/buildhub/backend/api/support/get_issues.php",{credentials:"include"})).json();Ue.success&&Ae(Ue.issues||[])}catch{}},to=async P=>{try{const He=await(await fetch(`/buildhub/backend/api/support/get_issues.php?issue_id=${P}`,{credentials:"include"})).json();He.success&&(Re(He.issue),vt(He.replies||[]))}catch{}},Nl=async()=>{if(!(!vn.subject.trim()||!vn.message.trim())){li(!0);try{const Ue=await(await fetch("/buildhub/backend/api/support/create_issue.php",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(vn)})).json();Ue.success?(Mn({subject:"",category:"general",message:""}),Be("Issue reported to admin"),await ji(),Ue.issue_id?await to(Ue.issue_id):Re(null)):ee(Ue.message||"Failed to submit issue")}catch{ee("Network error submitting issue")}finally{li(!1)}}},ao=async()=>{try{await fetch("/buildhub/backend/api/logout.php",{method:"POST",credentials:"include"})}catch{}localStorage.removeItem("bh_user"),sessionStorage.removeItem("user"),t("/login",{replace:!0})},kr=async()=>{R(!0);try{const Ue=await(await fetch("/buildhub/backend/api/homeowner/get_my_requests.php")).json();if(Ue.success){const He=Array.isArray(Ue.requests)?Ue.requests:[];_(He.filter(Ye=>Ye.status!=="deleted"))}}catch(P){console.error("Error fetching requests:",P)}finally{R(!1)}},B=async()=>{try{const Ue=await(await fetch("/buildhub/backend/api/homeowner/get_my_projects.php")).json();Ue.success&&T(Ue.projects||[])}catch(P){console.error("Error fetching projects:",P)}},ae=async()=>{try{R(!0);const Ue=await(await fetch("/buildhub/backend/api/homeowner/get_contractor_requests.php")).json();if(Ue.success){const He=Array.isArray(Ue.requests)?Ue.requests:[];E(He.filter(Ye=>Ye.status!=="deleted"))}}catch(P){console.error("Error fetching contractor requests:",P)}finally{R(!1)}},je=async P=>{if(P)try{const He=await(await fetch("/buildhub/backend/api/homeowner/delete_request.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({layout_request_id:P})})).json();He.success?(_(Ye=>Ye.filter(Tt=>Tt.id!==P)),E(Ye=>Ye.filter(Tt=>Tt.id!==P)),Be("Request removed")):ee(He.message||"Failed to remove request")}catch{ee("Error removing request")}},Fe=async()=>{try{const Ue=await(await fetch("/buildhub/backend/api/homeowner/get_layout_library.php")).json();Ue.success&&q(Ue.layouts||[])}catch(P){console.error("Error fetching layout library:",P)}},De=async P=>{P.preventDefault(),da(!1),Gt({title:"",layoutType:"",bedrooms:"",bathrooms:"",area:"",priceRange:"",description:"",previewImage:null,layoutFile:null}),Be("Layout added to library (placeholder)")},ct=async()=>{try{const Ue=await(await fetch("/buildhub/backend/api/homeowner/get_received_designs.php",{credentials:"include"})).json();if(Ue.success){const He=Ue.designs||[];u(He);const Ye=He.find(Tt=>Tt.status==="finalized");Ye?Gn(Ye):(hn(So()),Ts(tr()))}}catch(P){console.error("Error fetching designs:",P)}},bt=P=>/\.(png|jpe?g|gif|webp|bmp|svg|heic)$/i.test(P||""),na=P=>/\.(pdf)$/i.test(P||""),fa=async P=>{if(!P)return;const Ue=typeof P=="string"&&P.startsWith("hp_");try{if(Ue){const He=P.replace("hp_",""),Tt=await(await fetch("/buildhub/backend/api/homeowner/delete_house_plan.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({house_plan_id:parseInt(He)})})).json();Tt.success?(u(Vt=>Vt.filter(Pt=>Pt.id!==P)),Be("House plan deleted successfully")):ee(Tt.message||"Failed to delete house plan")}else{const Ye=await(await fetch("/buildhub/backend/api/homeowner/delete_design.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({design_id:P})})).json();Ye.success?(u(Tt=>Tt.filter(Vt=>Vt.id!==P)),Be("Design deleted successfully")):ee(Ye.message||"Failed to delete design")}}catch{ee("Error deleting "+(Ue?"house plan":"design"))}},Fa=(P,Ue)=>{const He=typeof P=="string"&&P.startsWith("hp_"),Ye=He?"house plan":"design";window.confirm(`Are you sure you want to delete this ${Ye}?

"${Ue}"

This action cannot be undone.${He?`

Note: This will also delete all associated files and payment records.`:""}`)&&fa(P)},Ea=async(P,Ue)=>{try{const Ye=await(await fetch("/buildhub/backend/api/homeowner/update_design_selection.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({design_id:P,action:Ue})})).json();Ye.success?(Be(Ue==="finalize"?"Design finalized":Ue==="shortlist"?"Added to shortlist":"Removed from shortlist"),await ct()):ee(Ye.message||"Failed to update selection")}catch{ee("Error updating selection")}},ss=async P=>{try{const He=await(await fetch(`/buildhub/backend/api/comments/get_comments.php?design_id=${P}`)).json();He.success&&p(Ye=>({...Ye,[P]:He.comments}))}catch{}},Ps=async P=>{const Ue=(m[P]||"").trim(),He=Number(v[P]||0);if(Ue)try{const Tt=await(await fetch("/buildhub/backend/api/comments/post_comment.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({design_id:P,message:Ue})})).json(),Vt=d.find(Pt=>Pt.id===P);if(Vt?.architect_id)try{await fetch("/buildhub/backend/api/reviews/post_review.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({architect_id:Vt.architect_id,design_id:P,rating:He>0?He:5,comment:Ue})})}catch{}Tt.success?(b(Rt=>({...Rt,[P]:""})),x(Rt=>({...Rt,[P]:0})),ss(P),Be("Comment & review posted"),d.find(Rt=>Rt.id===P)?.status==="finalized"&&Gn(d.find(Rt=>Rt.id===P))):ee(Tt.message||"Failed to post comment")}catch{ee("Error posting comment")}},Xs=async(P={})=>{Zt(!0),me("");try{const Ue=new URLSearchParams({...P.search?{search:P.search}:{},...P.specialization?{specialization:P.specialization}:{},...P.min_experience?{min_experience:P.min_experience}:{},...P.layout_request_id?{layout_request_id:P.layout_request_id}:{}}).toString(),Ye=await(await fetch(`/buildhub/backend/api/homeowner/get_architects.php${Ue?`?${Ue}`:""}`,{credentials:"include"})).json();if(Ye.success){const Tt=Ye.architects||[];yt(Tt)}else me(Ye.message||"Failed to load architects")}catch{me("Error loading architects")}finally{Zt(!1)}},ys=async(P={})=>{Xi(!0),jn("");try{const Ue=new URLSearchParams({...P.search?{search:P.search}:{},...P.specialization?{specialization:P.specialization}:{},...P.min_experience?{min_experience:P.min_experience}:{}}).toString(),Ye=await(await fetch(`/buildhub/backend/api/homeowner/get_contractors.php${Ue?`?${Ue}`:""}`,{credentials:"include"})).json();Ye.success?Co(Ye.contractors||[]):jn(Ye.message||"Failed to load contractors")}catch{jn("Error loading contractors")}finally{Xi(!1)}},pn=P=>{vi(P),oi(null),Ri(""),Mt(!0),Xs({status:"approved",search:ke,specialization:ht,min_experience:It,layout_request_id:P?.id})},Zs=P=>{re(P),bi([]),Zr(""),ur(!0),ys()},Cn=P=>{Ii(P||null);const Ue=P?.selected_layout_id;re(Ue?{id:Ue,title:"Selected Layout"}:null),bi([]),ur(!0),ys(),(async()=>{if(Ue){if(Array.isArray(Q)&&Q.length>0){const Ye=Q.find(Tt=>Number(Tt.id)===Number(Ue));if(Ye){re(Ye);return}}try{const Tt=await(await fetch("/buildhub/backend/api/homeowner/get_layout_library.php",{credentials:"include"})).json();if(Tt?.success&&Array.isArray(Tt.layouts)){const Vt=Tt.layouts.find(Pt=>Number(Pt.id)===Number(Ue));Vt&&re(Vt)}}catch{}}})()},wi=async()=>{const P=H?.id||As?.selected_layout_id;if(!Ss||Ss.length===0){ee("Please select at least one contractor");return}const Ue=As?.source_type==="house_plan";if(!P&&!!!As){ee("Please select a layout to send");return}hr(!0);const Ye=[],Tt=[];try{for(const Vt of Ss)try{let Pt,Rt;if(Ue){const es={house_plan_id:As.house_plan_id,plan_name:As.design_title,plot_dimensions:As.plot_dimensions,total_area:As.total_area,technical_details:As.technical_details,plan_data:As.plan_data,architect_info:As.architect,layout_images:As.files?.filter(Ma=>Ma.type==="layout_image")||[],notes:As.description};Pt=await fetch("/buildhub/backend/api/homeowner/send_house_plan_to_contractor.php",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({contractor_id:Vt.id,house_plan_data:es,message:""})})}else Pt=await fetch("/buildhub/backend/api/homeowner/send_to_contractor.php",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({layout_id:P||null,contractor_id:Vt.id,homeowner_id:C?.id,contractor_message:"",forwarded_design:As?{id:As.id,title:As.design_title,description:As.description,files:Array.isArray(As.files)?As.files:[],technical_details:As.technical_details||null,created_at:As.created_at}:null,plot_size:H?.plot_size||J.plot_size||null,building_size:H?.building_size||J.building_size||null})});Rt=await Pt.json(),Rt.success?Ye.push(Rt.contractor_name||Vt.first_name):Tt.push(`${Vt.first_name}: ${Rt.message||"Failed"}`)}catch{Tt.push(`${Vt.first_name}: Network error`)}Ye.length>0&&(Be(`${Ue?"House plan":"Layout"} sent to ${Ye.length} contractor(s): ${Ye.join(", ")}`),ur(!1),bi([]),re(null),Ii(null),kr(),setTimeout(()=>Be(""),5e3)),Tt.length>0&&ee(Tt.join("; ")),Ye.length===0&&Tt.length>0&&ee("Failed to send to any contractors: "+Tt.join("; "))}catch{ee("Network error. Please try again.")}finally{hr(!1)}},Gn=P=>{const Ue=So(),He=tr(),Ye=(P?.description||"").trim();if(Ye.startsWith("{")||Ye.startsWith("["))try{const Ga=JSON.parse(Ye),La=_i(Ga);if(La&&Array.isArray(La.rooms)&&Array.isArray(La.walls)){hn(La.rooms.length?La.rooms:Ue),Ts(La.walls.length?La.walls:He);return}}catch{}if(P?.layout_json)try{const Ga=JSON.parse(P.layout_json),La=_i(Ga);if(La&&Array.isArray(La.rooms)&&Array.isArray(La.walls)){hn(La.rooms.length?La.rooms:Ue),Ts(La.walls.length?La.walls:He);return}}catch{}const Tt=Array.isArray(P?.files)?P.files:[];if(!Tt.length){hn(Ue),Ts(He);return}const Vt=Tt.map(Ga=>(Ga.original||Ga.stored||"").toLowerCase()),Pt=Ga=>Vt.some(La=>La.includes(Ga)),Rt=[];Pt("living")&&Rt.push({name:"Living Room",position:[-1.4,0,1],size:[2.8,2],color:"#eef6ff"}),Pt("kitchen")&&Rt.push({name:"Kitchen",position:[1.5,0,1],size:[2.4,2],color:"#fff6e9"}),(Pt("bed")||Pt("master"))&&Rt.push({name:"Bedroom",position:[-1.6,0,-1],size:[2.6,1.8],color:"#f3e8ff"}),(Pt("bath")||Pt("toilet")||Pt("wc"))&&Rt.push({name:"Bath",position:[1.2,0,-1],size:[2,1.2],color:"#fdecec"}),(Pt("hall")||Pt("corridor")||Pt("foyer"))&&Rt.push({name:"Hallway",position:[1.2,0,-2.1],size:[2,.6],color:"#ecfdf5"});const es=Rt.length?Rt:Ue,Ma=[{position:[0,.175,2.25],rotation:[0,0,0],length:6.2},{position:[0,.175,-2.25],rotation:[0,0,0],length:6.2},{position:[-3.1,.175,0],rotation:[0,Math.PI/2,0],length:4.5},{position:[3.1,.175,0],rotation:[0,Math.PI/2,0],length:4.5},{position:[.15,.175,0],rotation:[0,Math.PI/2,0],length:4.2},{position:[-.25,.175,-2],rotation:[0,0,0],length:4},{position:[2.2,.175,-1.6],rotation:[0,Math.PI/2,0],length:1.8}];hn(es),Ts(Ma)},So=()=>[],tr=()=>[],_i=P=>{if(P&&Array.isArray(P.rooms)){const Ye=Number(P.scale||1),Tt=P.rooms.map((Pt,Rt)=>({name:Pt.name||`Room ${Rt+1}`,position:[Number(Pt.x||0)*Ye,0,Number(Pt.z||0)*Ye],size:[Number(Pt.width||2)*Ye,Number(Pt.depth||2)*Ye],color:Pt.color||void 0})),Vt=Array.isArray(P.walls)?P.walls.map(Pt=>({position:[Number(Pt.x||0)*Ye,.175,Number(Pt.z||0)*Ye],rotation:[0,Fr(Number(Pt.rotation||0)),0],length:Number(Pt.length||2)*Ye,thickness:Number(Pt.thickness||.06)*(Ye>0?Ye:1),height:Number(Pt.height||.35)*(Ye>0?Ye:1)})):[];return{rooms:Tt,walls:Vt}}const Ue=(P?.rooms||"").toString().toLowerCase();return Ue.includes("3")||Ue.includes("3bhk")||Ue.includes("3-bhk"),(P?.aesthetic||"").toString().toLowerCase().includes("modern"),{rooms:So(),walls:tr()}},Fr=P=>P*Math.PI/180,Er=async()=>{if(!Js){me("No request selected");return}const P=Array.isArray(qa)?qa:qa?[qa]:[];if(P.length===0){me("Please select at least one architect");return}try{if(Zt(!0),!Js?.id){me("Please select a request first"),Zt(!1);return}const He=await(await fetch("/buildhub/backend/api/homeowner/assign_architect.php",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({layout_request_id:Js.id,architect_ids:P,message:$a})})).json();He.success?(Be("Request sent to selected architect(s)"),Mt(!1),vi(null),oi(null)):me(He.message||"Failed to send request")}catch{me("Error sending request")}finally{Zt(!1)}},Ur=async P=>{if(P.preventDefault(),!J.plot_size||!J.budget_range||!J.requirements){ee("Please fill all required fields");return}if(J.budget_range==="Custom"&&!J.custom_budget){ee("Please enter a custom budget amount");return}try{R(!0);const Ue={...J,budget_range:J.budget_range==="Custom"?J.custom_budget:J.budget_range},Ye=await(await fetch("/buildhub/backend/api/homeowner/submit_request.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Ue)})).json();if(Ye.success){const Tt=Ye.request_id,Vt=Array.isArray(qa)?qa:qa?[qa]:[];Vt.length>0&&localStorage.setItem(`pending_architects_${Tt}`,JSON.stringify({architect_ids:Vt,message:$a||"Custom design request from dashboard"})),Be(`Your layout request has been submitted successfully! It will be reviewed by our admin team and you'll be notified once approved. ${Vt.length>0?"Your selected architects will be notified once the request is approved.":""}`),ue(!1),oi(null),Ri(""),V({plot_size:"",plot_shape:"",topography:"",development_laws:"",family_needs:[],rooms:[],budget_range:"",aesthetic:"",requirements:"",location:"",timeline:"",selected_layout_id:null,layout_type:"custom",custom_budget:""}),kr()}else ee("Failed to submit request: "+Ye.message)}catch{ee("Error submitting request")}finally{R(!1)}},pr=P=>{re(P),V({...J,selected_layout_id:P.id,layout_type:"library"}),I(!1),t(`/homeowner/request?selected_layout_id=${P.id}&layout_type=library`)},Sn=async(P,Ue,He="")=>{try{const Tt=await(await fetch("/buildhub/backend/api/unified/assign_architect.php",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({layout_request_id:P,architect_ids:Ue,message:He})})).json();return Tt.success?(Be(`Successfully assigned to ${Tt.assigned_count} architect(s)`),kr(),!0):(ee("Failed to assign architects: "+Tt.message),!1)}catch{return ee("Error assigning architects"),!1}},Lr=async()=>{S.forEach(async P=>{if(P.status==="approved"){const Ue=`pending_architects_${P.id}`,He=localStorage.getItem(Ue);if(He)try{const{architect_ids:Ye,message:Tt}=JSON.parse(He);await Sn(P.id,Ye,Tt)&&localStorage.removeItem(Ue)}catch(Ye){console.error("Error processing pending assignment:",Ye),localStorage.removeItem(Ue)}}})};An.useEffect(()=>{S.length>0&&Lr()},[S]);const Ni=()=>e.jsxs("div",{children:[e.jsx("div",{className:"hero-card",children:e.jsxs("div",{className:"hero-content",children:[e.jsxs("div",{children:[e.jsxs("h1",{children:["Welcome back, ",C?.first_name||"Homeowner"," ",e.jsx("span",{role:"img","aria-label":"wave"})]}),e.jsx("p",{children:"Plan and track your home project. Request designs, review proposals, and manage progress."})]}),e.jsx("div",{className:"hero-actions",children:e.jsx("button",{className:"btn btn-primary",onClick:()=>{X(!0),te(0)},style:{padding:"12px 24px",backgroundColor:"#007bff",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"16px",fontWeight:"600",boxShadow:"0 2px 4px rgba(0,0,0,0.1)",transition:"all 0.2s ease"},children:" Take a Tour Guide"})})]})}),e.jsxs("div",{className:"stats-grid",children:[e.jsx("div",{className:"stat-card w-blue",children:e.jsxs("div",{className:"stat-content",children:[e.jsx("div",{className:"stat-icon requests",children:""}),e.jsxs("div",{className:"stat-info",children:[e.jsx("h3",{children:S.length}),e.jsx("p",{children:"Layout Requests"})]})]})}),e.jsx("div",{className:"stat-card w-green",children:e.jsxs("div",{className:"stat-content",children:[e.jsx("div",{className:"stat-icon projects",children:""}),e.jsxs("div",{className:"stat-info",children:[e.jsx("h3",{children:Y.length}),e.jsx("p",{children:"Active Projects"})]})]})}),e.jsx("div",{className:"stat-card w-purple",children:e.jsxs("div",{className:"stat-content",children:[e.jsx("div",{className:"stat-icon library",children:""}),e.jsxs("div",{className:"stat-info",children:[e.jsx("h3",{children:Q.length}),e.jsx("p",{children:"Available Layouts"})]})]})}),e.jsx("div",{className:"stat-card w-orange",children:e.jsxs("div",{className:"stat-content",children:[e.jsx("div",{className:"stat-icon completed",children:""}),e.jsxs("div",{className:"stat-info",children:[e.jsx("h3",{children:S.filter(P=>P.status==="approved").length}),e.jsx("p",{children:"Approved Requests"})]})]})})]}),e.jsxs("div",{className:"section-card",children:[e.jsxs("div",{className:"section-header",children:[e.jsx("h2",{children:"Quick Actions"}),e.jsx("p",{children:"Get started with your construction project"})]}),e.jsx("div",{className:"section-content",children:e.jsxs("div",{className:"quick-actions float-grid stagger-children",children:[e.jsxs("button",{className:"float-rect w-blue",onClick:()=>t("/homeowner/request"),children:[e.jsx("div",{className:"fr-icon",children:""}),e.jsx("div",{className:"fr-title",children:"Request Custom Design"}),e.jsx("div",{className:"fr-sub",children:"Get professional architectural designs for your plot"}),e.jsx("div",{className:"fr-help",style:{position:"absolute",top:"8px",right:"8px",background:"rgba(255,255,255,0.2)",borderRadius:"50%",width:"24px",height:"24px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"12px",cursor:"pointer"},title:"New to custom design requests? Click for a guided tour!"})]}),e.jsxs("button",{className:"float-rect w-purple",onClick:()=>{I(!0),Fe()},children:[e.jsx("div",{className:"fr-icon",children:""}),e.jsx("div",{className:"fr-title",children:"Browse Layout Library"}),e.jsx("div",{className:"fr-sub",children:"Choose from pre-designed layouts and customize them"})]}),e.jsxs("button",{className:"float-rect w-orange",onClick:()=>{i("requests"),kr()},children:[e.jsx("div",{className:"fr-icon",children:""}),e.jsx("div",{className:"fr-title",children:"View My Requests"}),e.jsx("div",{className:"fr-sub",children:"Track the status of your layout requests"})]}),e.jsxs("button",{className:"float-rect w-green",onClick:()=>{i("projects"),B()},children:[e.jsx("div",{className:"fr-icon",children:""}),e.jsx("div",{className:"fr-title",children:"Manage Projects"}),e.jsx("div",{className:"fr-sub",children:"Monitor your ongoing construction projects"})]})]})})]}),e.jsxs("div",{className:"section-card",children:[e.jsxs("div",{className:"section-header",children:[e.jsx("h2",{children:"Project Progress"}),e.jsx("p",{children:"Track the progress of your active projects"})]}),e.jsx("div",{className:"section-content",children:e.jsxs("div",{className:"widgets-grid",children:[e.jsxs("div",{className:"widget-container",children:[e.jsxs("div",{className:"widget-header",children:[e.jsx("h3",{className:"widget-title",children:"Progress Overview"}),e.jsx("div",{className:"widget-actions",children:e.jsx("button",{className:"icon-btn",title:"Refresh",onClick:B,children:""})})]}),e.jsx(BF,{projects:Y})]}),e.jsxs("div",{className:"widget-container",children:[e.jsxs("div",{className:"widget-header",children:[e.jsx("h3",{className:"widget-title",children:"Budget Tracker"}),e.jsx("div",{className:"widget-actions",children:e.jsx("button",{className:"icon-btn",title:"View Details",children:""})})]}),e.jsx(CF,{projects:Y})]})]})})]}),e.jsxs("div",{className:"section-header",children:[e.jsx("h2",{children:"Recent Activity"}),e.jsx("p",{children:"Latest updates on your requests and projects"})]}),e.jsx("div",{className:"section-content",children:e.jsxs("div",{className:"item-list",children:[S.slice(0,5).map(P=>{const Ue=Number(P?.accepted_count)>0||P?.status==="approved"||P?.status==="accepted"?"accepted":P?.status,He=Ue==="accepted"?"":Ue==="rejected"?"":"";return e.jsxs("div",{className:"list-item",children:[e.jsx("div",{className:"item-icon",children:He}),e.jsxs("div",{className:"item-content",children:[e.jsxs("h4",{className:"item-title",children:["Layout Request - ",P.plot_size]}),e.jsxs("p",{className:"item-subtitle",children:["Budget: ",P.budget_range]}),e.jsxs("p",{className:"item-meta",children:["Submitted: ",new Date(P.created_at).toLocaleDateString()]})]}),e.jsx("div",{className:"item-actions",children:e.jsx("span",{className:`status-badge ${Eg(Ue)}`,children:vp(Ue)})})]},P.id)}),S.length===0&&e.jsxs("div",{className:"empty-state",children:[e.jsx("div",{className:"empty-icon",children:""}),e.jsx("h3",{children:"No Requests Yet"}),e.jsx("p",{children:"Start by submitting your first layout request!"}),e.jsxs("div",{className:"empty-actions",children:[e.jsx("button",{className:"btn btn-primary",onClick:()=>ue(!0),children:"Request Custom Design"}),e.jsx("button",{className:"btn btn-secondary",onClick:()=>{I(!0),Fe()},children:"Browse Library"})]})]})]})})]}),Wo=()=>e.jsxs("div",{children:[e.jsx("div",{className:"main-header",children:e.jsxs("div",{className:"header-content",children:[e.jsxs("div",{children:[e.jsx("h1",{children:"My Layout Requests"}),e.jsx("p",{children:"Track your architectural design requests and their progress"})]}),e.jsx("div",{className:"header-actions",children:e.jsx("button",{className:"btn btn-secondary",onClick:()=>{I(!0),Fe()},children:" Browse Library"})})]})}),e.jsxs("div",{className:"tab-navigation",style:{marginBottom:"20px",borderBottom:"1px solid #e5e7eb"},children:[e.jsx("button",{className:`tab-button ${o==="all"?"active":""}`,onClick:()=>l("all"),style:{padding:"12px 24px",border:"none",background:"transparent",borderBottom:o==="all"?"2px solid #3b82f6":"2px solid transparent",color:o==="all"?"#3b82f6":"#6b7280",cursor:"pointer",fontWeight:o==="all"?"600":"400"},children:"All Requests"}),e.jsx("button",{className:`tab-button ${o==="contractors"?"active":""}`,onClick:()=>{l("contractors"),ae()},style:{padding:"12px 24px",border:"none",background:"transparent",borderBottom:o==="contractors"?"2px solid #3b82f6":"2px solid transparent",color:o==="contractors"?"#3b82f6":"#6b7280",cursor:"pointer",fontWeight:o==="contractors"?"600":"400"},children:"Sent to Contractors"})]}),e.jsxs("div",{className:"section-card",children:[e.jsxs("div",{className:"section-header",children:[e.jsx("h2",{children:o==="all"?"Request History":"Contractor Requests"}),e.jsx("p",{children:o==="all"?"All your submitted layout requests":"Requests sent to contractors for proposals"})]}),e.jsx("div",{className:"section-content",children:ne?e.jsx("div",{className:"loading",children:"Loading requests..."}):(o==="all"?S:U).length===0?e.jsxs("div",{className:"empty-state",children:[e.jsx("div",{className:"empty-icon",children:o==="all"?"":""}),e.jsx("h3",{children:o==="all"?"No Requests Yet":"No Contractor Requests"}),e.jsx("p",{children:o==="all"?"Submit your first layout request to get started!":"Send requests to contractors to get started!"}),e.jsxs("div",{className:"empty-actions",children:[e.jsx("button",{className:"btn btn-primary",onClick:()=>t("/homeowner/request"),children:"Request Custom Design"}),e.jsx("button",{className:"btn btn-secondary",onClick:()=>{I(!0),Fe()},children:"Browse Library"})]})]}):e.jsx("div",{className:"item-list",children:(o==="all"?S:U).map(P=>e.jsx(GF,{request:P,onAssignArchitect:()=>pn(P),onRemove:()=>je(P.id),showContractorInfo:o==="contractors"},P.id))})})]})]}),Yo=()=>e.jsxs("div",{children:[e.jsx("div",{className:"main-header",children:e.jsxs("div",{className:"header-content",children:[e.jsxs("div",{children:[e.jsx("h1",{children:"Received Designs"}),e.jsx("p",{children:"Review designs, shortlist your favorites, and finalize one"})]}),e.jsx("button",{className:"btn btn-secondary",onClick:ct,children:" Refresh"})]})}),e.jsxs("div",{className:"section-card",children:[e.jsxs("div",{className:"section-header",children:[e.jsx("h2",{children:"All Designs & House Plans"}),e.jsx("p",{children:"Designs sent by architects and house plans with technical specifications"})]}),e.jsx("div",{className:"section-content",children:d.length===0?e.jsxs("div",{className:"empty-state",children:[e.jsx("div",{className:"empty-icon",children:""}),e.jsx("h3",{children:"No Designs Yet"}),e.jsx("p",{children:"Assigned architects will send designs here for your review."})]}):e.jsx("div",{className:"item-list",children:d.map(P=>e.jsxs("div",{className:"list-item",children:[e.jsx("div",{className:"item-icon",children:P.source_type==="house_plan"?"":P.status==="finalized"?"":P.status==="shortlisted"?"":""}),e.jsxs("div",{className:"item-content",style:{flex:1},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:10},children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"item-title",style:{margin:0},children:[P.design_title,P.source_type==="house_plan"&&e.jsx("span",{style:{marginLeft:"8px",padding:"2px 6px",background:"#e3f2fd",color:"#1976d2",borderRadius:"4px",fontSize:"12px",fontWeight:"normal"},children:"House Plan"})]}),e.jsxs("p",{className:"item-subtitle",style:{margin:"2px 0 0 0"},children:["By ",P.architect?.name||"Architect","  ",new Date(P.created_at).toLocaleString(),P.source_type==="house_plan"&&P.plot_dimensions&&e.jsxs("span",{style:{marginLeft:"8px",color:"#666"},children:[" Plot: ",P.plot_dimensions,"  Area: ",P.total_area," sq ft"]})]}),e.jsx("button",{className:"btn btn-secondary",style:{marginTop:6},onClick:()=>ut(Ue=>({...Ue,[P.id]:!Ue[P.id]})),children:st[P.id]?"Hide Details":"View Details"}),st[P.id]&&e.jsxs("div",{className:"details-panel",children:[e.jsxs("div",{className:"details-grid",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Sent By:"})," ",P.architect?.name||"Architect"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Architect Email:"})," ",P.architect?.email||"-"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Design ID:"})," ",P.id]}),P.layout_request_id?e.jsxs("div",{children:[e.jsx("strong",{children:"Request ID:"})," ",P.layout_request_id]}):e.jsxs("div",{children:[e.jsx("strong",{children:"Request:"})," Direct upload"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Status:"})," ",e.jsx("span",{className:`status-chip ${P.status}`,children:P.status})]}),P.source_type==="house_plan"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("strong",{children:"House Plan Status:"})," ",e.jsx("span",{className:`status-chip ${P.house_plan_status}`,children:P.house_plan_status})]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Plot Dimensions:"})," ",P.plot_dimensions]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Total Area:"})," ",P.total_area," sq ft"]})]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Uploaded:"})," ",new Date(P.created_at).toLocaleString()]})]}),P.description&&e.jsxs("div",{className:"description-section",children:[e.jsx("strong",{children:"Description:"}),e.jsx("div",{className:"description-content",children:P.source_type==="house_plan"?e.jsx("p",{children:P.description}):e.jsx(tx,{raw:P.description,title:"Requirements"})})]}),P.technical_details&&e.jsxs("div",{className:"technical-details-section",style:{marginTop:16},children:[e.jsxs("h3",{style:{margin:"0 0 12px 0",fontSize:"16px",fontWeight:600,color:"#374151"},children:[P.source_type==="house_plan"?"House Plan Technical Specifications":"Technical Details",P.source_type==="house_plan"&&!P.is_technical_details_unlocked&&e.jsxs("span",{style:{marginLeft:"8px",padding:"2px 6px",background:"#fef3c7",color:"#92400e",borderRadius:"4px",fontSize:"12px",fontWeight:"normal"},children:[" Locked - Pay ",parseFloat(P.unlock_price||8e3).toLocaleString("en-IN")," to unlock"]}),P.source_type==="house_plan"&&P.is_technical_details_unlocked&&e.jsx("span",{style:{marginLeft:"8px",padding:"2px 6px",background:"#d1fae5",color:"#065f46",borderRadius:"4px",fontSize:"12px",fontWeight:"normal"},children:" Unlocked"})]}),P.source_type==="house_plan"&&!P.is_technical_details_unlocked?e.jsxs("div",{style:{padding:"16px",background:"#fffbeb",border:"1px solid #fbbf24",borderRadius:"8px",textAlign:"center"},children:[e.jsxs("div",{style:{fontSize:"14px",color:"#92400e",marginBottom:"8px"},children:["Technical details are locked. Pay ",parseFloat(P.unlock_price||8e3).toLocaleString("en-IN")," to unlock complete specifications."]}),e.jsx("button",{className:"btn btn-primary",onClick:()=>zt(P),disabled:Ze&&et===P.id,style:{fontSize:"14px",padding:"8px 16px"},children:Ze&&et===P.id?"Processing...":`Pay ${parseFloat(P.unlock_price||8e3).toLocaleString("en-IN")} to Unlock`})]}):e.jsx(vl,{technicalDetails:P.technical_details,startExpanded:!0})]}),P.source_type==="house_plan"&&P.plan_data&&e.jsxs("div",{className:"plan-data-section",style:{marginTop:16},children:[e.jsx("h3",{style:{margin:"0 0 12px 0",fontSize:"16px",fontWeight:600,color:"#374151"},children:"Plan Information"}),e.jsxs("div",{className:"plan-info-grid",style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"12px"},children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Plot Size:"})," ",P.plot_dimensions]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Total Area:"})," ",P.total_area," sq ft"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Floors:"})," ",P.plan_data.floors?.total_floors||1]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Rooms:"})," ",P.plan_data.rooms?.length||0]}),P.plan_data.scale_ratio&&e.jsxs("div",{children:[e.jsx("strong",{children:"Scale Ratio:"})," ",P.plan_data.scale_ratio]})]})]})]})]}),e.jsx("button",{className:"btn btn-danger",onClick:()=>Fa(P.id,P.design_title),children:" Delete"})]}),e.jsxs("p",{className:"item-meta",style:{marginTop:6},children:["Status: ",e.jsx("span",{className:`status-badge ${P.status}`,children:P.status})]}),P.source_type==="house_plan"&&!P.is_technical_details_unlocked||P.source_type!=="house_plan"&&!$e(P)?e.jsxs("div",{style:{margin:"12px 0",padding:"12px",border:"1px solid #f59e0b",background:"#fffbeb",borderRadius:8},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:12},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:600,color:"#92400e"},children:P.source_type==="house_plan"?"Payment required to unlock technical details":"Payment required to view files"}),e.jsx("div",{style:{color:"#92400e",fontSize:14},children:P.source_type==="house_plan"?`Unlock Price: ${parseFloat(P.unlock_price||8e3).toLocaleString("en-IN")}`:P?.view_price&&P.view_price>0?`Architect-set price: ${parseFloat(P.view_price).toLocaleString("en-IN")}`:`Price based on sqft: ${ge(P).toLocaleString("en-IN")}`})]}),e.jsx("button",{className:"btn btn-primary",onClick:()=>P.source_type==="house_plan"?zt(P):it(P),disabled:Ze&&et===P.id,children:Ze&&et===P.id?"Processing":P.source_type==="house_plan"?`Pay ${parseFloat(P.unlock_price||8e3).toLocaleString("en-IN")} to Unlock`:"Pay to View"})]}),mt&&e.jsx("div",{style:{marginTop:8,color:"#991b1b",background:"#fef2f2",border:"1px solid #fecaca",borderRadius:6,padding:"8px 10px"},children:mt})]}):null,(P.source_type==="house_plan"&&P.is_technical_details_unlocked||P.source_type!=="house_plan"&&$e(P))&&e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(180px, 1fr))",gap:"10px",marginTop:"10px"},children:(()=>{const Ue=Array.isArray(P.files)?P.files:[];if(P.source_type==="house_plan"){const He=Ue.filter(Rt=>Rt.type==="layout_image"),Ye=Ue.filter(Rt=>Rt.type==="elevation_images"),Tt=Ue.filter(Rt=>Rt.type==="section_drawings"),Vt=Ue.filter(Rt=>Rt.type==="renders_3d");return[...He,...Ye,...Tt,...Vt].map((Rt,es)=>{const Ma=Rt.path||`/buildhub/backend/uploads/house_plans/${Rt.stored||Rt.original}`,Ga=(Rt.ext||"").toLowerCase(),La=["jpg","jpeg","png","gif","webp","svg","heic"].includes(Ga);let ws="";switch(Rt.type){case"layout_image":ws="Layout";break;case"elevation_images":ws="Elevation";break;case"section_drawings":ws="Section";break;case"renders_3d":ws="3D Render";break;default:ws="File"}return e.jsxs("div",{className:"file-card",style:{cursor:"default"},children:[La?e.jsx("img",{src:Ma,alt:Rt.original,style:{width:"100%",height:120,objectFit:"cover",borderRadius:6},onClick:()=>Bn({open:!0,src:Ma,title:Rt.original||Rt.stored}),onError:Hs=>{Hs.target.style.display="none",Hs.target.nextSibling.style.display="flex"}}):null,La&&e.jsxs("div",{className:"file-thumb",style:{height:120,display:"none",alignItems:"center",justifyContent:"center",background:"#f5f5f7",borderRadius:6,flexDirection:"column",color:"#6b7280"},children:[e.jsx("span",{style:{fontSize:"2rem",marginBottom:8},children:""}),e.jsx("span",{style:{fontSize:"0.75rem",textAlign:"center"},children:"Image not found"})]}),!La&&e.jsx("div",{className:"file-thumb",style:{height:120,display:"flex",alignItems:"center",justifyContent:"center",background:"#f5f5f7",borderRadius:6},children:e.jsx("span",{style:{fontSize:"2rem"},children:""})}),e.jsxs("div",{className:"file-name",style:{fontSize:"0.85rem",marginTop:6,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},title:Rt.original||Rt.stored,children:[ws,": ",Rt.original||Rt.stored]}),e.jsxs("div",{style:{display:"flex",gap:8,marginTop:6},children:[La?e.jsx("button",{type:"button",className:"btn btn-secondary",style:{padding:"6px 10px"},onClick:()=>Bn({open:!0,src:Ma,title:Rt.original||Rt.stored}),children:"View"}):e.jsx("a",{href:Ma,target:"_blank",rel:"noreferrer",className:"btn btn-secondary",style:{padding:"6px 10px"},children:"Open"}),e.jsx("a",{href:Ma,download:!0,className:"btn",style:{padding:"6px 10px"},children:"Download"})]})]},es)})}else{const He=Ue.find(Pt=>Pt.tag==="preview")||Ue.find(Pt=>/preview|thumb|cover/i.test(Pt.original||"")),Ye=Ue.find(Pt=>Pt.tag==="layout")||Ue.find(Pt=>/layout|plan|floor|design/i.test(Pt.original||"")),Tt=Ue.filter(Pt=>Pt!==He&&Pt!==Ye);return[He,Ye,...Tt].filter(Boolean).map((Pt,Rt)=>{const es=Pt.path||`/buildhub/backend/uploads/designs/${Pt.stored||Pt.original}`,Ma=(Pt.ext||"").toLowerCase(),Ga=["jpg","jpeg","png","gif","webp","svg","heic"].includes(Ma),La=Pt.tag==="preview"?"Preview":Pt.tag==="layout"?"Layout":void 0;return e.jsxs("div",{className:"file-card",style:{cursor:"default"},children:[Ga?e.jsx("img",{src:es,alt:Pt.original,style:{width:"100%",height:120,objectFit:"cover",borderRadius:6},onClick:()=>Bn({open:!0,src:es,title:Pt.original||Pt.stored}),onError:ws=>{ws.target.style.display="none",ws.target.nextSibling.style.display="flex"}}):null,Ga&&e.jsxs("div",{className:"file-thumb",style:{height:120,display:"none",alignItems:"center",justifyContent:"center",background:"#f5f5f7",borderRadius:6,flexDirection:"column",color:"#6b7280"},children:[e.jsx("span",{style:{fontSize:"2rem",marginBottom:8},children:""}),e.jsx("span",{style:{fontSize:"0.75rem",textAlign:"center"},children:"Image not found"})]}),!Ga&&e.jsx("div",{className:"file-thumb",style:{height:120,display:"flex",alignItems:"center",justifyContent:"center",background:"#f5f5f7",borderRadius:6},children:e.jsx("span",{style:{fontSize:"2rem"},children:""})}),e.jsxs("div",{className:"file-name",style:{fontSize:"0.85rem",marginTop:6,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},title:Pt.original||Pt.stored,children:[La?`${La}: `:"",Pt.original||Pt.stored]}),e.jsxs("div",{style:{display:"flex",gap:8,marginTop:6},children:[Ga?e.jsx("button",{type:"button",className:"btn btn-secondary",style:{padding:"6px 10px"},onClick:()=>Bn({open:!0,src:es,title:Pt.original||Pt.stored}),children:"View"}):e.jsx("a",{href:es,target:"_blank",rel:"noreferrer",className:"btn btn-secondary",style:{padding:"6px 10px"},children:"Open"}),e.jsx("a",{href:es,download:!0,className:"btn",style:{padding:"6px 10px"},children:"Download"})]})]},Rt)})}})()}),e.jsxs("div",{className:"comment-section",children:[e.jsx("button",{className:"btn btn-secondary",onClick:()=>ss(P.id),children:"Load comments"}),e.jsxs("div",{className:"comment-list",children:[(A[P.id]||[]).map(Ue=>e.jsxs("div",{className:"comment-item",children:[e.jsx("div",{className:"comment-author",children:Ue.author}),e.jsx("div",{className:"comment-message",children:Ue.message}),e.jsx("div",{className:"comment-date",children:new Date(Ue.created_at).toLocaleString()})]},Ue.id)),e.jsxs("div",{className:"comment-compose",children:[e.jsx("div",{className:"star-input",children:[1,2,3,4,5].map(Ue=>e.jsx("span",{role:"button",onClick:()=>x(He=>({...He,[P.id]:Ue})),style:{color:(v[P.id]||0)>=Ue?"#f5a623":"#ddd"},title:`${Ue} star${Ue>1?"s":""}`,children:""},Ue))}),e.jsx("input",{type:"text",value:m[P.id]||"",onChange:Ue=>b(He=>({...He,[P.id]:Ue.target.value})),placeholder:"Write a comment... (will also be posted as a review)"}),e.jsx("button",{onClick:()=>Ps(P.id),children:"Post"})]})]})]})]}),e.jsxs("div",{className:"item-actions",style:{display:"flex",flexDirection:"column",gap:6},children:[e.jsx("button",{className:"btn",onClick:()=>Cn(P),children:"Send to Contractor"}),P.source_type==="house_plan"?e.jsx("div",{style:{padding:"8px",background:"#f0f9ff",border:"1px solid #0ea5e9",borderRadius:"4px",fontSize:"12px",color:"#0369a1"},children:"House Plan - Review in House Plans tab for approval/rejection"}):e.jsxs(e.Fragment,{children:[P.status!=="shortlisted"&&P.status!=="finalized"&&e.jsx("button",{className:"btn",onClick:()=>Ea(P.id,"shortlist"),children:" Shortlist"}),P.status==="shortlisted"&&e.jsx("button",{className:"btn",onClick:()=>Ea(P.id,"remove-shortlist"),children:"Remove shortlist"}),P.status!=="finalized"&&e.jsx("button",{className:"btn btn-primary",onClick:()=>Ea(P.id,"finalize"),children:" Finalize"})]})]})]},P.id))})})]})]}),Vs=()=>e.jsxs("div",{children:[e.jsx("div",{className:"main-header",children:e.jsx("div",{className:"header-content",children:e.jsxs("div",{children:[e.jsx("h1",{children:"Layout Library"}),e.jsx("p",{children:"Browse and select from our collection of pre-designed layouts"})]})})}),e.jsxs("div",{className:"section-card",children:[e.jsxs("div",{className:"section-header",children:[e.jsx("h2",{children:"Available Layouts"}),e.jsx("p",{children:"Choose from professionally designed layouts and customize them for your needs"})]}),e.jsx("div",{className:"section-content",children:ne?e.jsx("div",{className:"loading",children:"Loading layouts..."}):Q.length===0?e.jsxs("div",{className:"empty-state",children:[e.jsx("div",{className:"empty-icon",children:""}),e.jsx("h3",{children:"No Layouts Available"}),e.jsx("p",{children:"Check back later for new layout designs!"})]}):e.jsx("div",{className:"layout-grid",children:Q.map(P=>e.jsx(Eb,{layout:P,onSelect:()=>pr(P),onPreview:()=>K(P),isImageUrl:bt,isPdfUrl:na,onSendToContractor:Zs,onViewDetails:eo},P.id))})})]})]});return e.jsxs("div",{className:"dashboard-container",children:[e.jsx("button",{className:"mobile-menu-btn",onClick:()=>Ee(!Ne),children:""}),e.jsxs("div",{className:`dashboard-sidebar soft-sidebar expanded ${Ne?"open":""}`,children:[e.jsx("div",{className:"sidebar-header sb-brand",children:e.jsxs("a",{href:"#",className:"sidebar-logo",children:[e.jsx("div",{className:"logo-icon",children:""}),e.jsx("span",{className:"logo-text sb-title",children:"BUILDHUB"})]})}),e.jsxs("nav",{className:"sidebar-nav sb-nav",children:[e.jsx("a",{href:"#",className:`nav-item sb-item ${s==="dashboard"?"active":""}`,"data-title":"Dashboard",onClick:P=>{P.preventDefault(),i("dashboard"),B(),ct()},children:e.jsx("span",{className:"nav-label sb-label",children:"Dashboard"})}),e.jsxs("a",{href:"#",className:`nav-item sb-item ${s==="library"?"active":""}`,"data-title":"Layout Library",onClick:P=>{P.preventDefault(),i("library"),Fe()},children:[e.jsx("span",{className:"nav-label sb-label",children:"Layout Library"}),Gs>0&&e.jsx("span",{className:"nav-badge pulse",style:{marginLeft:"auto"},children:Gs})]}),e.jsxs("a",{href:"#",className:`nav-item sb-item ${s==="requests"?"active":""}`,"data-title":"My Requests",onClick:P=>{P.preventDefault(),i("requests"),kr()},children:[e.jsx("span",{className:"nav-label sb-label",children:"My Requests"}),ls>0&&e.jsx("span",{className:"nav-badge pulse",style:{marginLeft:"auto"},children:ls})]}),e.jsxs("a",{href:"#",className:`nav-item sb-item ${s==="designs"?"active":""}`,"data-title":"Received Designs",onClick:P=>{P.preventDefault(),i("designs"),ct()},children:[e.jsx("span",{className:"nav-label sb-label",children:"Received Designs"}),cs>0&&e.jsx("span",{className:"nav-badge pulse",style:{marginLeft:"auto"},children:cs})]}),e.jsx("a",{href:"#",className:`nav-item sb-item ${s==="house-plans"?"active":""}`,"data-title":"House Plans",onClick:P=>{P.preventDefault(),i("house-plans")},children:e.jsx("span",{className:"nav-label sb-label",children:"House Plans"})}),e.jsxs("a",{href:"#",className:`nav-item sb-item ${s==="estimates"?"active":""}`,"data-title":"Estimations",onClick:P=>{P.preventDefault(),i("estimates")},children:[e.jsx("span",{className:"nav-label sb-label",children:"Estimations"}),lt.length>0&&e.jsx("span",{className:"nav-badge pulse",style:{marginLeft:"auto"},children:lt.length})]}),e.jsx("a",{href:"#",className:`nav-item sb-item ${s==="progress"?"active":""}`,"data-title":"Construction Progress",onClick:P=>{P.preventDefault(),i("progress")},children:e.jsx("span",{className:"nav-label sb-label",children:"Construction Progress"})}),e.jsx("a",{href:"#",className:`nav-item sb-item ${s==="photos"?"active":""}`,"data-title":"Construction Photos",onClick:P=>{P.preventDefault(),i("photos")},children:e.jsx("span",{className:"nav-label sb-label",children:"Construction Photos"})}),e.jsx("a",{href:"#",className:`nav-item sb-item ${s==="room-improvement"?"active":""}`,"data-title":"Room Improvement Assistant",onClick:P=>{P.preventDefault(),i("room-improvement")},children:e.jsx("span",{className:"nav-label sb-label",children:"Room Improvement Assistant"})})]})]}),e.jsxs("div",{className:"dashboard-main soft-main shifted",children:[e.jsxs("div",{className:"top-glassbar",children:[e.jsx("div",{className:"left",children:e.jsxs("div",{className:"search",children:[e.jsx("span",{className:"icon",children:""}),e.jsx("input",{type:"text",placeholder:"Search tasks, requests, designs...","aria-label":"Search"})]})}),e.jsxs("div",{className:"right",children:[e.jsx(IF,{userId:C?.id||null}),e.jsx("button",{className:"icon-btn",title:"Help",onClick:()=>{Ar(!0),ji()},children:""}),e.jsx(PF,{user:C,position:"bottom-right",onLogout:ao})]})]}),e.jsxs("div",{style:{position:"fixed",top:20,right:20,zIndex:1e3,display:"flex",flexDirection:"column",gap:10},children:[z&&e.jsxs("div",{className:"alert alert-error",style:{minWidth:280},children:[z,e.jsx("button",{onClick:()=>ee(""),className:"alert-close",children:""})]}),le&&e.jsxs("div",{className:"alert alert-success",style:{minWidth:280},children:[le,e.jsx("button",{onClick:()=>Be(""),className:"alert-close",children:""})]})]}),s==="dashboard"&&Ni(),s==="library"&&Vs(),s==="requests"&&Wo(),s==="designs"&&Yo(),s==="house-plans"&&e.jsx(uN,{}),s==="estimates"&&e.jsxs("div",{className:"section-card",style:{marginTop:"1rem"},children:[e.jsxs("div",{className:"section-header",children:[e.jsx("h2",{children:"Contractor Estimates"}),e.jsx("p",{children:"Submitted cost estimates for your layouts/designs"})]}),e.jsxs("div",{className:"section-content",children:[(console.log("Rendering estimates tab. Count:",lt.length),console.log("Estimates data:",lt),null),lt.length===0?e.jsxs("div",{className:"empty-state",children:[e.jsx("div",{className:"empty-icon",children:""}),e.jsx("h3",{children:"No Estimates Yet"}),e.jsx("p",{children:"When contractors submit estimates, they will appear here."})]}):e.jsx("div",{className:"item-list",children:lt.map(P=>e.jsxs("div",{className:"list-item",children:[e.jsx("div",{className:"item-icon",children:""}),e.jsxs("div",{className:"item-content",style:{flex:1},children:[e.jsxs("h4",{className:"item-title",style:{margin:0},children:["Estimate #",P.id]}),e.jsxs("p",{className:"item-subtitle",style:{margin:"2px 0 0 0"},children:["Total: ",P.total_cost??"","  ",new Date(P.created_at).toLocaleString()]}),P.timeline&&e.jsxs("p",{className:"item-meta",children:["Timeline: ",P.timeline]}),P.notes&&e.jsxs("p",{className:"item-meta",children:["Notes: ",P.notes]}),e.jsxs("p",{className:"item-meta",children:["Contractor: ",P.contractor_name||"Unknown",P.contractor_email?`  ${P.contractor_email}`:""]}),e.jsxs("p",{className:"item-meta",style:{fontSize:"12px",color:"#666"},children:["Status: ",P.status||"unknown"]}),P.acknowledged_at&&e.jsxs("div",{style:{marginTop:"12px",padding:"12px",background:"linear-gradient(135deg, #eff6ff 0%, #dbeafe 100%)",borderRadius:"8px",border:"1px solid #3b82f6"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:"6px"},children:[e.jsx("span",{style:{fontSize:"16px",marginRight:"8px"},children:""}),e.jsx("strong",{style:{color:"#1e40af",fontSize:"13px"},children:"Acknowledged by Contractor"})]}),e.jsxs("div",{style:{color:"#1e3a8a",fontSize:"12px",paddingLeft:"24px"},children:["Acknowledged: ",new Date(P.acknowledged_at).toLocaleString(),P.due_date&&e.jsxs("span",{children:["  Due: ",new Date(P.due_date).toLocaleDateString()]})]})]}),Number(P.is_paid||0)===0&&e.jsx("span",{className:"status-badge pending",children:"Locked  Pay 100 to view"})]}),e.jsxs("div",{className:"item-actions",style:{display:"flex",gap:6,alignItems:"center",flexWrap:"wrap"},children:[e.jsx("button",{className:"btn btn-primary",onClick:()=>Qt(P),children:Number(P.is_paid||0)===0?"Pay 100 to Unlock":"Download Report"}),Number(P.is_paid||0)===1&&e.jsx(e.Fragment,{children:e.jsx("button",{className:"btn btn-secondary",onClick:()=>ja(P),style:{background:"#10b981",color:"white",border:"1px solid #10b981"},children:" Download Tech Details"})}),Number(P.is_paid||0)===1&&e.jsxs(e.Fragment,{children:[P.status==="submitted"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"btn btn-secondary",onClick:()=>va(P,"accept"),children:"Accept"}),e.jsx("button",{className:"btn btn-secondary",onClick:()=>va(P,"reject"),children:"Reject"})]}),P.status==="accepted"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"btn btn-secondary",onClick:()=>Nt(Ue=>({...Ue,[P.id]:!Ue[P.id]})),children:_t[P.id]?"Close Changes":"Request Changes"}),e.jsx("button",{className:Ba[P.id]?"btn btn-success":"btn btn-primary",onClick:()=>{console.log("Send message button clicked for estimate:",P.id),Pa(P)},style:Ba[P.id]?{backgroundColor:"#10b981",borderColor:"#10b981",color:"white"}:{},children:Ba[P.id]?" Message Sent":" Send Message"}),e.jsx("button",{type:"button",className:"btn btn-success",onClick:Ue=>{Ue.preventDefault(),Ue.stopPropagation(),console.log("Button clicked!",P),_a(P)},style:{cursor:"pointer"},children:" Start Construction"})]}),(P.status==="construction_started"||P.status==="changes_requested")&&e.jsxs(e.Fragment,{children:[e.jsx("button",{className:Ba[P.id]?"btn btn-success":"btn btn-primary",onClick:()=>{console.log("Send message button clicked for estimate:",P.id),Pa(P)},style:Ba[P.id]?{backgroundColor:"#10b981",borderColor:"#10b981",color:"white"}:{},children:Ba[P.id]?" Message Sent":" Send Message"}),P.status==="changes_requested"&&e.jsx("button",{className:"btn btn-secondary",onClick:()=>Nt(Ue=>({...Ue,[P.id]:!Ue[P.id]})),children:_t[P.id]?"Close Changes":"Request Changes"})]}),P.status==="rejected"&&e.jsx("span",{className:"status-badge rejected",children:"Rejected"})]}),e.jsx("button",{className:"btn btn-danger",onClick:()=>Na(P.id),style:{background:"#ef4444",color:"white",border:"1px solid #ef4444",fontSize:"12px",padding:"6px 12px"},title:"Remove estimate",children:" Remove"})]}),_t[P.id]&&e.jsxs("div",{className:"card",style:{marginTop:8},children:[e.jsx("div",{style:{fontWeight:600,marginBottom:6},children:"Request Changes"}),e.jsx("textarea",{placeholder:"Describe the changes you want the contractor to make",rows:3,value:qt[P.id]||"",onChange:Ue=>Bt(He=>({...He,[P.id]:Ue.target.value})),style:{width:"100%",border:"1px solid #e5e7eb",borderRadius:6,padding:8}}),e.jsxs("div",{style:{display:"flex",gap:8,marginTop:8},children:[e.jsx("button",{className:"btn btn-primary",onClick:()=>{const Ue=(qt[P.id]||"").trim();if(!Ue){try{a.warning("Please describe the changes.")}catch{}return}va(P,"changes",Ue),Nt(He=>({...He,[P.id]:!1})),Bt(He=>({...He,[P.id]:""}))},children:"Send"}),e.jsx("button",{className:"btn btn-secondary",onClick:()=>Nt(Ue=>({...Ue,[P.id]:!1})),children:"Cancel"})]})]})]},P.id))})]})]}),e.jsx(OF,{activeTab:s,isVisible:s==="progress"}),s==="photos"&&e.jsxs("div",{className:"section-card",style:{marginTop:"1rem"},children:[e.jsxs("div",{className:"section-header",children:[e.jsx("h2",{children:" Construction Progress Photos"}),e.jsx("p",{children:"View geo-located photos sent by your contractor with location details and timestamps"})]}),e.jsx("div",{className:"section-content",children:e.jsx(AN,{homeownerId:C?.id,projectId:null})})]}),s==="room-improvement"&&e.jsxs("div",{className:"section-card",style:{marginTop:"1rem"},children:[e.jsx("div",{className:"section-header",children:e.jsxs("div",{className:"section-title",children:[e.jsx("span",{className:"section-icon",children:""}),e.jsxs("div",{children:[e.jsx("h2",{children:"Post-Construction Room Improvement Assistant"}),e.jsx("p",{children:"Upload photos of your completed rooms to receive AI-assisted improvement and renovation concepts"})]})]})}),e.jsx("div",{className:"section-content",children:e.jsx(qF,{})})]}),s==="scene3d"&&e.jsxs("div",{className:"section-card",children:[e.jsxs("div",{className:"section-header",children:[e.jsx("h2",{children:"Finalized Layout  3D View"}),e.jsx("p",{children:"View your finalized floor plan in 3D. Click rooms to highlight."})]}),e.jsx("div",{className:"section-content",children:e.jsx("div",{className:"home-3d-panel",role:"region","aria-label":"3D home layout",children:e.jsx(Home3DLayout,{rooms:js,walls:Kn,onSelectRoom:P=>Be(`${P} selected`)})})})]}),Bo&&e.jsx("div",{className:"support-modal-overlay",onClick:()=>Ar(!1),children:e.jsxs("div",{className:"support-modal-content",onClick:P=>P.stopPropagation(),children:[e.jsxs("div",{className:"support-modal-header",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"support-modal-title",children:" Help & Support"}),e.jsx("p",{className:"support-modal-subtitle",children:"Report issues and get help from our admin team"})]}),e.jsxs("div",{className:"support-modal-actions",children:[e.jsx("button",{className:"support-btn support-btn-secondary",onClick:()=>{Re(null),Kt(!0),ji()},children:" My Reports"}),e.jsx("button",{className:"support-btn support-btn-secondary",onClick:()=>Ar(!1),children:" Close"})]})]}),e.jsxs("div",{className:`support-modal-body ${xe?"has-thread":""}`,children:[e.jsxs("div",{className:`support-form-panel ${xe?"has-thread":""}`,children:[e.jsxs("div",{className:`support-form-container ${xe?"compact":""}`,children:[e.jsx("h4",{className:"support-form-title",children:" Report New Issue"}),e.jsxs("form",{className:"support-form",onSubmit:P=>{P.preventDefault(),Nl()},children:[e.jsxs("div",{className:"support-form-group",children:[e.jsx("label",{className:"support-form-label",children:"Subject *"}),e.jsx("input",{type:"text",className:"support-form-input",value:vn.subject,onChange:P=>Mn({...vn,subject:P.target.value}),placeholder:"Brief description of your issue",required:!0})]}),e.jsxs("div",{className:"support-form-group",children:[e.jsx("label",{className:"support-form-label",children:"Category"}),e.jsxs("select",{className:"support-form-select",value:vn.category,onChange:P=>Mn({...vn,category:P.target.value}),children:[e.jsx("option",{value:"general",children:"General Support"}),e.jsx("option",{value:"bug",children:"Bug Report"}),e.jsx("option",{value:"billing",children:"Billing Issue"}),e.jsx("option",{value:"account",children:"Account Problem"}),e.jsx("option",{value:"feature",children:"Feature Request"})]})]}),e.jsxs("div",{className:"support-form-group",children:[e.jsx("label",{className:"support-form-label",children:"Message *"}),e.jsx("textarea",{className:"support-form-textarea",rows:xe?6:8,value:vn.message,onChange:P=>Mn({...vn,message:P.target.value}),placeholder:"Describe your issue in detail. Include steps to reproduce if it's a bug.",required:!0})]}),e.jsxs("div",{className:"support-form-actions",children:[e.jsx("button",{type:"submit",className:"support-btn support-btn-primary",disabled:Br,children:Br?" Sending...":" Send to Admin"}),e.jsx("button",{type:"button",className:"support-btn support-btn-secondary",onClick:()=>{ji(),Re(null),Kt(!0)},children:" View Reports"})]})]})]}),ot&&e.jsxs("div",{className:"support-reports-section",children:[e.jsx("div",{className:`support-reports-header ${xe?"compact":""}`,children:e.jsxs("h4",{className:"support-reports-title",children:[" My Reports (",Ya.length,")"]})}),e.jsx("div",{className:`support-reports-list ${xe?"compact":""}`,children:Ya.length===0?e.jsxs("div",{className:"support-empty-state",children:[e.jsx("div",{className:"support-empty-icon",children:""}),e.jsx("h3",{className:"support-empty-title",children:"No Reports Yet"}),e.jsx("p",{className:"support-empty-text",children:"Submit your first issue using the form above and it will appear here."})]}):Ya.map(P=>e.jsxs("div",{className:`support-report-item ${xe?.id===P.id?"selected":""}`,onClick:()=>to(P.id),children:[e.jsxs("div",{className:"support-report-header",children:[e.jsx("div",{className:"support-report-icon",children:P.status==="replied"?"":P.status==="closed"?"":""}),e.jsxs("div",{className:"support-report-content",children:[e.jsx("h4",{className:"support-report-title",children:P.subject}),e.jsxs("p",{className:"support-report-meta",children:["#",P.id,"  ",P.category,"  ",new Date(P.created_at).toLocaleDateString()," at ",new Date(P.created_at).toLocaleTimeString()]})]})]}),e.jsx("div",{className:"support-report-status",children:e.jsx("span",{className:`support-status-badge ${P.status}`,children:P.status})})]},P.id))})]})]}),xe&&e.jsxs("div",{className:"support-thread-panel",children:[e.jsxs("div",{className:"support-thread-header",children:[e.jsx("h4",{className:"support-thread-title",children:xe.subject}),e.jsxs("div",{className:"support-thread-meta",children:["Category: ",xe.category,"  Status: ",xe.status,"  Opened: ",new Date(xe.created_at).toLocaleDateString()," at ",new Date(xe.created_at).toLocaleTimeString()]})]}),e.jsxs("div",{className:"support-thread-messages",children:[e.jsxs("div",{className:"support-message user",children:[e.jsx("div",{className:"support-message-header",children:"You"}),e.jsx("div",{className:"support-message-body",children:xe.message}),e.jsxs("div",{className:"support-message-time",children:[new Date(xe.created_at).toLocaleDateString()," at ",new Date(xe.created_at).toLocaleTimeString()]})]}),nt.map(P=>e.jsxs("div",{className:`support-message ${P.sender==="admin"?"admin":"user"}`,children:[e.jsx("div",{className:"support-message-header",children:P.sender==="admin"?"Admin Support":"You"}),e.jsx("div",{className:"support-message-body",children:P.message}),e.jsxs("div",{className:"support-message-time",children:[new Date(P.created_at).toLocaleDateString()," at ",new Date(P.created_at).toLocaleTimeString()]})]},P.id)),nt.length===0&&xe.status==="open"&&e.jsxs("div",{className:"support-empty-state",children:[e.jsx("div",{className:"support-empty-icon",children:""}),e.jsx("h3",{className:"support-empty-title",children:"Waiting for Response"}),e.jsx("p",{className:"support-empty-text",children:"Our admin team will respond to your issue soon. You'll see their reply here."})]})]})]})]})]})}),$&&e.jsx("div",{className:"form-modal",children:e.jsxs("div",{className:"form-content",children:[e.jsxs("div",{className:"form-header",children:[e.jsx("h3",{children:J.layout_type==="library"?"Customize Selected Layout":"Submit Layout Request"}),e.jsx("p",{children:J.layout_type==="library"?"Provide your requirements to customize the selected layout":"Get professional architectural designs for your construction project"})]}),J.layout_type==="library"&&H&&e.jsxs("div",{className:"selected-layout-display",children:[e.jsxs("h4",{children:["Selected Layout: ",H.title]}),e.jsxs("div",{className:"layout-preview",children:[e.jsx("img",{src:H.image_url||"/images/default-layout.jpg",alt:H.title,className:"layout-image"}),e.jsxs("div",{className:"layout-details",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Type:"})," ",H.layout_type]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Bedrooms:"})," ",H.bedrooms]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Bathrooms:"})," ",H.bathrooms]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Area:"})," ",H.area," sq ft"]})]})]}),H.technical_details&&e.jsxs("div",{style:{marginTop:"12px",padding:"12px",background:"#f8f9fa",borderRadius:"6px",border:"1px solid #e9ecef"},children:[e.jsx("h5",{style:{margin:"0 0 8px 0",fontSize:"0.9rem",color:"#495057"},children:"Technical Specifications"}),e.jsx(vl,{technicalDetails:H.technical_details,compact:!0})]})]}),e.jsxs("form",{onSubmit:Ur,children:[e.jsxs("div",{className:"form-section",children:[e.jsx("h4",{className:"section-title",children:"Basic Information"}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Plot Size (sq ft) *"}),e.jsx("input",{type:"number",value:J.plot_size,onChange:P=>V({...J,plot_size:P.target.value}),placeholder:"e.g., 1200",required:!0,min:"100",className:"form-control"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Building Size (sq ft)"}),e.jsx("input",{type:"number",value:J.building_size,onChange:P=>V({...J,building_size:P.target.value}),placeholder:"e.g., 800",min:"100",className:"form-control"})]})]}),e.jsx("div",{className:"form-row",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Budget Range () *"}),e.jsxs("select",{value:J.budget_range,onChange:P=>V({...J,budget_range:P.target.value}),required:!0,className:"form-control",children:[e.jsx("option",{value:"",children:"Select budget range"}),e.jsx("option",{value:"5-10 Lakhs",children:"5-10 Lakhs"}),e.jsx("option",{value:"10-20 Lakhs",children:"10-20 Lakhs"}),e.jsx("option",{value:"20-30 Lakhs",children:"20-30 Lakhs"}),e.jsx("option",{value:"30-50 Lakhs",children:"30-50 Lakhs"}),e.jsx("option",{value:"50-75 Lakhs",children:"50-75 Lakhs"}),e.jsx("option",{value:"75 Lakhs - 1 Crore",children:"75 Lakhs - 1 Crore"}),e.jsx("option",{value:"1-2 Crores",children:"1-2 Crores"}),e.jsx("option",{value:"2-5 Crores",children:"2-5 Crores"}),e.jsx("option",{value:"5+ Crores",children:"5+ Crores"}),e.jsx("option",{value:"Custom",children:"Custom Amount"})]}),J.budget_range==="Custom"&&e.jsx("input",{type:"number",placeholder:"Enter custom budget amount in rupees",value:J.custom_budget||"",onChange:P=>V({...J,custom_budget:P.target.value}),min:"0",step:"10000",className:"form-control",style:{marginTop:"8px"}})]})})]}),e.jsxs("div",{className:"form-section",children:[e.jsx("h4",{className:"section-title",children:"Site Details"}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Plot Shape"}),e.jsxs("select",{value:J.plot_shape,onChange:P=>V({...J,plot_shape:P.target.value}),className:"form-control",children:[e.jsx("option",{value:"",children:"Select plot shape"}),e.jsx("option",{value:"Rectangular",children:"Rectangular"}),e.jsx("option",{value:"Square",children:"Square"}),e.jsx("option",{value:"L-shaped",children:"L-shaped"}),e.jsx("option",{value:"U-shaped",children:"U-shaped"}),e.jsx("option",{value:"Triangular",children:"Triangular"}),e.jsx("option",{value:"Irregular",children:"Irregular"}),e.jsx("option",{value:"Corner Plot",children:"Corner Plot"}),e.jsx("option",{value:"Trapezoidal",children:"Trapezoidal"}),e.jsx("option",{value:"Other",children:"Other"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Number of Floors *"}),e.jsxs("select",{value:J.num_floors,onChange:P=>V({...J,num_floors:P.target.value}),required:!0,className:"form-control",children:[e.jsx("option",{value:"",children:"Select number of floors"}),e.jsx("option",{value:"1",children:"1 Floor (Ground Floor Only)"}),e.jsx("option",{value:"2",children:"2 Floors (G+1)"}),e.jsx("option",{value:"3",children:"3 Floors (G+2)"}),e.jsx("option",{value:"4",children:"4 Floors (G+3)"}),e.jsx("option",{value:"5",children:"5 Floors (G+4)"}),e.jsx("option",{value:"6+",children:"6+ Floors"})]})]})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Topography"}),e.jsxs("select",{value:J.topography,onChange:P=>V({...J,topography:P.target.value}),className:"form-control",children:[e.jsx("option",{value:"",children:"Select topography"}),e.jsx("option",{value:"Flat",children:"Flat"}),e.jsx("option",{value:"Slightly Sloped",children:"Slightly Sloped"}),e.jsx("option",{value:"Moderately Sloped",children:"Moderately Sloped"}),e.jsx("option",{value:"Steeply Sloped",children:"Steeply Sloped"}),e.jsx("option",{value:"Rocky",children:"Rocky"}),e.jsx("option",{value:"Sandy",children:"Sandy"}),e.jsx("option",{value:"Clayey",children:"Clayey"}),e.jsx("option",{value:"Mixed Terrain",children:"Mixed Terrain"}),e.jsx("option",{value:"Other",children:"Other"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Local Development Laws / Restrictions"}),e.jsx("input",{type:"text",value:J.development_laws,onChange:P=>V({...J,development_laws:P.target.value}),placeholder:"e.g., Setbacks, FSI/FAR, height limits",className:"form-control"})]})]})]}),e.jsxs("div",{className:"form-section",children:[e.jsx("h4",{className:"section-title",children:"Family & Design Preferences"}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Family Needs"}),e.jsxs("select",{multiple:!0,value:Array.isArray(J.family_needs)?J.family_needs:[],onChange:P=>{const Ue=Array.from(P.target.selectedOptions,He=>He.value);V({...J,family_needs:Ue})},className:"form-control multi-select",style:{height:"120px"},children:[e.jsx("option",{value:"Elder-friendly",children:"Elder-friendly"}),e.jsx("option",{value:"Work-from-home",children:"Work-from-home"}),e.jsx("option",{value:"Kids play area",children:"Kids play area"}),e.jsx("option",{value:"Pet-friendly",children:"Pet-friendly"}),e.jsx("option",{value:"Wheelchair accessible",children:"Wheelchair accessible"}),e.jsx("option",{value:"Home office",children:"Home office"}),e.jsx("option",{value:"Guest accommodation",children:"Guest accommodation"}),e.jsx("option",{value:"Storage space",children:"Storage space"}),e.jsx("option",{value:"Garden/Outdoor space",children:"Garden/Outdoor space"}),e.jsx("option",{value:"Security features",children:"Security features"}),e.jsx("option",{value:"Energy efficient",children:"Energy efficient"}),e.jsx("option",{value:"Low maintenance",children:"Low maintenance"})]}),e.jsx("small",{className:"form-text text-muted",children:"Hold Ctrl/Cmd to select multiple options"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Rooms"}),e.jsxs("select",{multiple:!0,value:Array.isArray(J.rooms)?J.rooms:[],onChange:P=>{const Ue=Array.from(P.target.selectedOptions,He=>He.value);V({...J,rooms:Ue})},className:"form-control multi-select",style:{height:"120px"},children:[e.jsx("option",{value:"1 Bedroom",children:"1 Bedroom"}),e.jsx("option",{value:"2 Bedrooms",children:"2 Bedrooms"}),e.jsx("option",{value:"3 Bedrooms",children:"3 Bedrooms"}),e.jsx("option",{value:"4 Bedrooms",children:"4 Bedrooms"}),e.jsx("option",{value:"5+ Bedrooms",children:"5+ Bedrooms"}),e.jsx("option",{value:"1 Bathroom",children:"1 Bathroom"}),e.jsx("option",{value:"2 Bathrooms",children:"2 Bathrooms"}),e.jsx("option",{value:"3 Bathrooms",children:"3 Bathrooms"}),e.jsx("option",{value:"4+ Bathrooms",children:"4+ Bathrooms"}),e.jsx("option",{value:"Living Room",children:"Living Room"}),e.jsx("option",{value:"Dining Room",children:"Dining Room"}),e.jsx("option",{value:"Kitchen",children:"Kitchen"}),e.jsx("option",{value:"Study Room",children:"Study Room"}),e.jsx("option",{value:"Puja Room",children:"Puja Room"}),e.jsx("option",{value:"Guest Room",children:"Guest Room"}),e.jsx("option",{value:"Store Room",children:"Store Room"}),e.jsx("option",{value:"Balcony",children:"Balcony"}),e.jsx("option",{value:"Terrace",children:"Terrace"}),e.jsx("option",{value:"Garage",children:"Garage"}),e.jsx("option",{value:"Utility Area",children:"Utility Area"})]}),e.jsx("small",{className:"form-text text-muted",children:"Hold Ctrl/Cmd to select multiple options"})]})]}),e.jsx("div",{className:"form-row",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"House Aesthetic / Style"}),e.jsxs("select",{value:J.aesthetic,onChange:P=>V({...J,aesthetic:P.target.value}),className:"form-control",children:[e.jsx("option",{value:"",children:"Select house style"}),e.jsx("option",{value:"Modern",children:"Modern"}),e.jsx("option",{value:"Contemporary",children:"Contemporary"}),e.jsx("option",{value:"Traditional",children:"Traditional"}),e.jsx("option",{value:"Minimalist",children:"Minimalist"}),e.jsx("option",{value:"Luxury",children:"Luxury"}),e.jsx("option",{value:"Mediterranean",children:"Mediterranean"}),e.jsx("option",{value:"Colonial",children:"Colonial"}),e.jsx("option",{value:"Victorian",children:"Victorian"}),e.jsx("option",{value:"Art Deco",children:"Art Deco"}),e.jsx("option",{value:"Scandinavian",children:"Scandinavian"}),e.jsx("option",{value:"Industrial",children:"Industrial"}),e.jsx("option",{value:"Rustic",children:"Rustic"}),e.jsx("option",{value:"Farmhouse",children:"Farmhouse"}),e.jsx("option",{value:"Craftsman",children:"Craftsman"}),e.jsx("option",{value:"Tudor",children:"Tudor"}),e.jsx("option",{value:"Ranch",children:"Ranch"}),e.jsx("option",{value:"Cape Cod",children:"Cape Cod"}),e.jsx("option",{value:"Other",children:"Other"})]})]})}),e.jsx("div",{className:"form-row",children:e.jsxs("div",{className:"form-group",style:{width:"100%"},children:[e.jsx("label",{children:" Style Preferences (AI Matching)"}),e.jsx("p",{style:{fontSize:"0.9rem",color:"#666",margin:"4px 0 12px 0"},children:"Select your preferred styles to get AI-recommended architects"}),e.jsx("div",{className:"style-preferences-grid",children:[{key:"modern",label:"Modern",icon:""},{key:"contemporary",label:"Contemporary",icon:""},{key:"minimalist",label:"Minimalist",icon:""},{key:"traditional",label:"Traditional",icon:""},{key:"luxury",label:"Luxury",icon:""},{key:"sustainable",label:"Sustainable",icon:""},{key:"eco_friendly",label:"Eco-friendly",icon:""},{key:"natural",label:"Natural",icon:""},{key:"aesthetic",label:"Aesthetic",icon:""},{key:"functional",label:"Functional",icon:""},{key:"elegant",label:"Elegant",icon:""},{key:"innovative",label:"Innovative",icon:""}].map(P=>e.jsxs("button",{type:"button",className:`style-preference-option ${J.style_preferences[P.key]?"selected":""}`,onClick:()=>{const Ue={...J.style_preferences};Ue[P.key]?delete Ue[P.key]:Ue[P.key]=1,V({...J,style_preferences:Ue})},children:[e.jsx("span",{className:"style-icon",children:P.icon}),e.jsx("span",{className:"style-label",children:P.label})]},P.key))})]})})]}),e.jsxs("div",{className:"form-section location-timeline-section",children:[e.jsx("h4",{className:"section-title",children:"Location & Timeline"}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"District (Kerala) *"}),e.jsxs("select",{value:J.district,onChange:P=>V({...J,district:P.target.value,panchayat_municipality:"",location:"Kerala"}),className:"form-control",required:!0,children:[e.jsx("option",{value:"",children:"Select District"}),e.jsx("option",{value:"Alappuzha",children:"Alappuzha"}),e.jsx("option",{value:"Ernakulam",children:"Ernakulam"}),e.jsx("option",{value:"Idukki",children:"Idukki"}),e.jsx("option",{value:"Kannur",children:"Kannur"}),e.jsx("option",{value:"Kasaragod",children:"Kasaragod"}),e.jsx("option",{value:"Kollam",children:"Kollam"}),e.jsx("option",{value:"Kottayam",children:"Kottayam"}),e.jsx("option",{value:"Kozhikode",children:"Kozhikode"}),e.jsx("option",{value:"Malappuram",children:"Malappuram"}),e.jsx("option",{value:"Palakkad",children:"Palakkad"}),e.jsx("option",{value:"Pathanamthitta",children:"Pathanamthitta"}),e.jsx("option",{value:"Thiruvananthapuram",children:"Thiruvananthapuram"}),e.jsx("option",{value:"Thrissur",children:"Thrissur"}),e.jsx("option",{value:"Wayanad",children:"Wayanad"})]})]}),J.district&&$r[J.district]&&e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Panchayat / Municipality *"}),e.jsxs("select",{value:J.panchayat_municipality,onChange:P=>V({...J,panchayat_municipality:P.target.value}),className:"form-control",required:!0,children:[e.jsx("option",{value:"",children:"Select Panchayat / Municipality"}),$r[J.district].Municipalities&&e.jsx("optgroup",{label:"Municipalities",children:$r[J.district].Municipalities.map(P=>e.jsx("option",{value:P,children:P},P))}),$r[J.district].Panchayats&&e.jsx("optgroup",{label:"Panchayats",children:$r[J.district].Panchayats.map(P=>e.jsx("option",{value:P,children:P},P))})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Timeline"}),e.jsxs("select",{value:J.timeline,onChange:P=>V({...J,timeline:P.target.value}),className:"form-control timeline-select",children:[e.jsx("option",{value:"",children:"Select timeline"}),e.jsx("option",{value:"0-6 months",children:"0-6 months"}),e.jsx("option",{value:"6-12 months",children:"6-12 months"}),e.jsx("option",{value:"12-18 months",children:"12-18 months"}),e.jsx("option",{value:"18-24 months",children:"18-24 months"})]})]})]})]}),e.jsxs("div",{className:"form-section",children:[e.jsx("h4",{className:"section-title",children:J.layout_type==="library"?"Customization Requirements":"Additional Notes"}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:J.layout_type==="library"?"Describe your modifications *":"Any other preferences or constraints"}),e.jsx("textarea",{value:J.requirements,onChange:P=>V({...J,requirements:P.target.value}),placeholder:J.layout_type==="library"?"Describe any modifications you'd like to make to the selected layout: room changes, additional features, material preferences, etc.":"Any other preferences or constraints",rows:"4",required:J.layout_type==="library",className:"form-control"})]})]}),e.jsxs("div",{className:"form-card architect-selection-card",children:[e.jsx(Yf,{selectedArchitectIds:Array.isArray(qa)?qa:qa?[qa]:[],onSelectionChange:P=>{oi(P),Xr(P.length>0)},layoutRequestId:null,showAIRecommendations:Object.keys(J.style_preferences||{}).length>0,stylePreferences:J.style_preferences||{}}),Nr?e.jsxs("div",{className:"form-group",style:{marginTop:8},children:[e.jsx("label",{children:"Message to architect (optional)"}),e.jsx("textarea",{value:$a,onChange:P=>Ri(P.target.value),placeholder:"Add any notes for the architect",rows:"2"})]}):e.jsx("div",{className:"muted",style:{marginTop:8},children:"Select an approved architect above to proceed."})]}),e.jsxs("div",{className:"form-actions",children:[e.jsx("button",{type:"button",onClick:()=>{ue(!1),re(null),V({plot_size:"",budget_range:"",requirements:"",location:"",timeline:"",selected_layout_id:null,layout_type:"custom"})},className:"btn btn-secondary",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:ne||!Nr&&Array.isArray(qa)&&qa.length>0&&!$a,className:"btn btn-primary",children:ne?"Submitting...":J.layout_type==="library"?"Submit Customization Request":"Submit Request"})]})]})]})}),Et&&e.jsx("div",{className:"form-modal",children:e.jsxs("div",{className:"form-content architect-modal",style:{maxWidth:"min(1200px, 95vw)",maxHeight:"90vh",height:"90vh",overflowY:"auto",scrollbarWidth:"thin",scrollbarColor:"rgb(203, 213, 224) rgb(247, 250, 252)",padding:"20px",position:"relative",scrollBehavior:"smooth",display:"flex",flexDirection:"column",alignItems:"center"},children:[e.jsx("div",{className:"modal-close-container",style:{position:"absolute",top:"16px",right:"16px",zIndex:10},children:e.jsx("button",{className:"modal-close",onClick:()=>Mt(!1),style:{background:"rgba(0,0,0,0.1)",border:"none",borderRadius:"50%",width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",fontSize:"18px",color:"#666"},children:""})}),e.jsx("div",{style:{width:"100%",maxWidth:"1000px",marginBottom:"24px",marginTop:"10px"},children:!Js||!Js.id?e.jsxs("div",{className:"form-group request-selector",style:{width:"100%",background:"#f8fafc",padding:"20px",borderRadius:"12px",border:"1px solid #e5e7eb"},children:[e.jsx("label",{style:{fontSize:"18px",fontWeight:"700",color:"#1f2937",marginBottom:"12px",display:"block"},children:" Select Your Request"}),e.jsx("p",{style:{fontSize:"14px",color:"#6b7280",marginBottom:"16px"},children:"Choose which project you want to assign an architect to"}),e.jsxs("select",{value:Js?.id||"",onChange:P=>{const Ue=S.find(He=>String(He.id)===P.target.value);vi(Ue||null)},className:"form-control",style:{width:"100%",padding:"14px 18px",border:"2px solid #d1d5db",borderRadius:"10px",fontSize:"16px",background:"white"},children:[e.jsx("option",{value:"",children:"-- Select request --"}),S.map(P=>e.jsxs("option",{value:P.id,children:["#",P.id,"  ",P.layout_type==="library"?P.selected_layout_title||"Library":"Custom","  ",P.plot_size," sq ft"]},P.id))]})]}):e.jsx("div",{className:"info-row",style:{width:"100%",background:"linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%)",padding:"20px",borderRadius:"12px",border:"2px solid #bae6fd",textAlign:"center"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"12px"},children:[e.jsx("span",{style:{fontSize:"20px"},children:""}),e.jsxs("span",{className:"status-chip success",style:{fontSize:"16px",fontWeight:"700",color:"#0369a1"},children:["Working on Request #",Js.id]})]})})}),e.jsx("div",{className:"form-card architect-selection-card",style:{width:"100%",maxWidth:"1000px",background:"transparent",borderRadius:"16px",boxShadow:"none",border:"none"},children:e.jsx(Yf,{selectedArchitectIds:Array.isArray(qa)?qa:qa?[qa]:[],onSelectionChange:P=>{oi(P),Xr(P.length>0)},layoutRequestId:Js?.id,showAIRecommendations:Object.keys(J.style_preferences||{}).length>0,stylePreferences:J.style_preferences||{}})}),e.jsxs("div",{className:"form-actions",style:{display:"flex",gap:"12px",justifyContent:"center",marginTop:"20px",width:"100%",maxWidth:"600px"},children:[e.jsx("button",{className:"btn btn-secondary",onClick:()=>Mt(!1),children:"Cancel"}),e.jsx("button",{className:"btn btn-primary",disabled:Va||!qa,onClick:Er,children:Va?"Sending...":"Send Request"})]})]})}),e.jsx(dN,{open:Wt,onClose:()=>wa(!1),architect:ba,reviews:gs,loading:Wi}),Yi&&e.jsx("div",{className:"form-modal",children:e.jsxs("div",{className:"form-content simple-contractor-modal",children:[e.jsxs("div",{className:"simple-modal-header",children:[e.jsx("div",{className:"header-left",children:e.jsx("h3",{children:"Send to Contractors"})}),e.jsx("button",{className:"modal-close",onClick:()=>ur(!1),children:""})]}),e.jsx("div",{className:"project-info-simple",children:As?.source_type==="house_plan"?e.jsxs("div",{className:"info-row",children:[e.jsx("strong",{children:"House Plan:"})," ",As.design_title]}):H?e.jsxs("div",{className:"info-row",children:[e.jsx("strong",{children:"Layout:"})," ",H.title]}):As?e.jsxs("div",{className:"info-row",children:[e.jsx("strong",{children:"Design:"})," ",As.design_title]}):null}),e.jsx("div",{className:"search-simple",children:e.jsxs("div",{className:"search-container",children:[e.jsx("input",{type:"text",placeholder:"Search contractors by name, email, or location...",value:ke,onChange:P=>tt(P.target.value),className:"search-input-simple"}),e.jsx("span",{className:"search-icon",children:""}),e.jsx("button",{className:"search-btn-simple",onClick:()=>ys({search:ke}),children:" Search"})]})}),Ss.length>0&&e.jsxs("div",{className:"selection-info",children:[Ss.length," contractor",Ss.length>1?"s":""," selected"]}),Cr&&e.jsx("div",{className:"error-simple",children:Cr}),e.jsx("div",{className:"contractors-list-simple",children:Di?e.jsx("div",{className:"loading-simple",children:"Loading contractors..."}):Ji.length===0?e.jsx("div",{className:"empty-simple",children:e.jsx("p",{children:"No contractors found"})}):e.jsx("div",{className:"contractors-simple",children:Ji.map(P=>{const Ue=Ss.some(He=>He.id===P.id);return e.jsxs("label",{className:`contractor-item ${Ue?"selected":""}`,children:[e.jsx("input",{type:"checkbox",checked:Ue,onChange:He=>{He.target.checked?bi([...Ss,P]):bi(Ss.filter(Ye=>Ye.id!==P.id))}}),e.jsxs("div",{className:"contractor-info-simple",children:[e.jsxs("div",{className:"contractor-name-simple",children:[P.first_name," ",P.last_name]}),e.jsxs("div",{className:"contractor-details-simple",children:[e.jsxs("div",{className:"detail-line",children:[e.jsx("span",{className:"detail-icon",children:""}),e.jsx("span",{children:P.email})]}),e.jsxs("div",{className:"detail-line",children:[e.jsx("span",{className:"detail-icon",children:""}),e.jsx("span",{children:P.license?"Licensed Contractor":"License Pending"})]}),e.jsxs("div",{className:"detail-line",children:[e.jsx("span",{className:"detail-icon",children:""}),e.jsxs("span",{children:["Member since ",P.created_at?new Date(P.created_at).getFullYear():"N/A"]})]})]}),e.jsxs("div",{className:"contractor-rating",children:[e.jsx("div",{className:"rating-stars",children:[1,2,3,4,5].map(He=>e.jsx("span",{className:`rating-star ${(P.avg_rating||0)>=He?"":"empty"}`,children:""},He))}),e.jsxs("span",{className:"rating-text",children:[P.avg_rating||0,"/5 (",P.review_count||0," reviews)"]})]})]})]},P.id)})})}),e.jsxs("div",{className:"modal-actions-simple",children:[e.jsx("button",{className:"btn-cancel",onClick:()=>ur(!1),children:"Cancel"}),e.jsx("button",{className:"btn-send",disabled:Di||!Ss||Ss.length===0||Sr,onClick:wi,children:Sr?`Sending to ${Ss.length} contractor${Ss.length>1?"s":""}...`:`Send to ${Ss.length||0} Contractor${Ss.length>1?"s":""}`})]})]})}),k&&e.jsx("div",{className:"form-modal",children:e.jsxs("div",{className:"form-content library-modal",children:[e.jsxs("div",{className:"form-header",children:[e.jsx("h3",{children:"Layout Library"}),e.jsx("p",{children:"Choose from our collection of professionally designed layouts"}),e.jsx("button",{className:"modal-close",onClick:()=>I(!1),children:""}),e.jsx("button",{className:"btn btn-primary",onClick:()=>da(!0),style:{marginTop:10},children:"Add Layout"})]}),e.jsx("div",{className:"library-content",children:ne?e.jsx("div",{className:"loading",children:"Loading layouts..."}):Q.length===0?e.jsxs("div",{className:"empty-state",children:[e.jsx("div",{className:"empty-icon",children:""}),e.jsx("h3",{children:"No Layouts Available"}),e.jsx("p",{children:"Check back later for new layout designs!"})]}):e.jsx("div",{className:"layout-grid",children:Q.map(P=>e.jsx(Eb,{layout:P,onSelect:()=>pr(P),onPreview:()=>K(P),isImageUrl:bt,isPdfUrl:na,isModal:!0,onSendToContractor:Zs,onViewDetails:eo},P.id))})})]})}),aa&&e.jsx("div",{className:"form-modal",children:e.jsxs("div",{className:"form-content",style:{maxWidth:920,maxHeight:"90vh",height:"90vh",overflowY:"auto",scrollbarWidth:"thin",scrollbarColor:"rgb(203, 213, 224) rgb(247, 250, 252)",paddingRight:12,marginRight:8,position:"relative",scrollBehavior:"smooth"},children:[e.jsx("div",{className:"fade-top"}),e.jsxs("div",{className:"form-header",children:[e.jsx("h3",{children:"Add Layout"}),e.jsx("p",{children:"Publish a new layout to the library"}),e.jsx("div",{className:"step-indicator",style:{marginTop:10,display:"flex",gap:10},children:e.jsx("span",{className:"step active",children:"Basic Info & Files"})}),e.jsx("button",{className:"modal-close",onClick:()=>da(!1),children:""})]}),e.jsxs("form",{onSubmit:De,children:[e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Title"}),e.jsx("input",{placeholder:"e.g., Modern 3BHK House",required:!0,type:"text",value:ea.title,onChange:P=>Gt({...ea,title:P.target.value})})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Layout Type"}),e.jsxs("select",{required:!0,value:ea.layoutType,onChange:P=>Gt({...ea,layoutType:P.target.value}),children:[e.jsx("option",{value:"",children:"Select Type"}),e.jsx("option",{value:"Residential",children:"Residential"}),e.jsx("option",{value:"Commercial",children:"Commercial"}),e.jsx("option",{value:"Mixed Use",children:"Mixed Use"})]})]})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Bedrooms"}),e.jsx("input",{min:"1",required:!0,type:"number",value:ea.bedrooms,onChange:P=>Gt({...ea,bedrooms:P.target.value})})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Bathrooms"}),e.jsx("input",{min:"1",required:!0,type:"number",value:ea.bathrooms,onChange:P=>Gt({...ea,bathrooms:P.target.value})})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{children:["Area (sq ft)",e.jsx("div",{className:"info-popup-container",style:{position:"relative",display:"inline-block"},children:e.jsx("span",{style:{marginLeft:8,cursor:"pointer",color:"rgb(107, 114, 128)"},children:""})})]}),e.jsx("input",{min:"100",required:!0,type:"number",value:ea.area,onChange:P=>Gt({...ea,area:P.target.value})})]})]}),e.jsx("div",{className:"form-row",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Price Range"}),e.jsx("input",{placeholder:"e.g., 20-30 Lakhs",type:"text",value:ea.priceRange,onChange:P=>Gt({...ea,priceRange:P.target.value})})]})}),e.jsxs("div",{className:"form-section",style:{marginTop:20,padding:16,border:"1px solid rgb(229, 231, 235)",borderRadius:8,background:"rgb(249, 250, 251)"},children:[e.jsx("h4",{style:{margin:"0px 0px 16px",color:"rgb(55, 65, 81)"},children:"Files & Media"}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Preview Image *"}),e.jsx("input",{accept:"image/*",required:!0,type:"file",onChange:P=>Gt({...ea,previewImage:P.target.files[0]})}),e.jsx("p",{className:"form-help",style:{margin:"4px 0px 0px",fontSize:"0.8rem",color:"rgb(107, 114, 128)"},children:"Upload a preview image (JPG, PNG, GIF, WebP)"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Layout Design File *"}),e.jsx("input",{accept:".pdf,.jpg,.jpeg,.png,.gif,.webp,.svg,.dwg,.dxf,.ifc,.rvt,.skp,.3dm,.obj,.stl",required:!0,type:"file",onChange:P=>Gt({...ea,layoutFile:P.target.files[0]})}),e.jsx("p",{className:"form-help",style:{margin:"4px 0px 0px",fontSize:"0.8rem",color:"rgb(107, 114, 128)"},children:"Upload layout file (PDF, Images, CAD files, 3D models)"})]})]}),e.jsxs("div",{className:"form-row",children:[e.jsx("div",{className:"form-group"}),e.jsx("div",{className:"form-group"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Description"}),e.jsx("textarea",{rows:"6",placeholder:"Describe the layout features and design highlights...",style:{minHeight:120},value:ea.description,onChange:P=>Gt({...ea,description:P.target.value})})]}),e.jsxs("div",{className:"form-actions",style:{marginTop:30,paddingBottom:30,borderTop:"1px solid rgb(229, 231, 235)",paddingTop:20},children:[e.jsx("button",{type:"submit",className:"btn btn-primary",children:"Add Layout"}),e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>da(!1),children:"Cancel"})]})]}),e.jsx("div",{className:"fade-bottom"})]})}),oe&&e.jsx("div",{className:"form-modal",onClick:()=>K(null),children:e.jsxs("div",{className:"form-content",onClick:P=>P.stopPropagation(),style:{maxWidth:"min(1200px, 96vw)"},children:[e.jsxs("div",{className:"form-header",children:[e.jsx("h3",{children:oe.title}),e.jsx("p",{children:"Preview Image and Layout"}),(oe.architect_name||oe.architect_email)&&e.jsxs("div",{style:{marginTop:6,color:"#6b7280"},children:[oe.architect_name&&e.jsxs("div",{children:[e.jsx("strong",{children:"Architect:"})," ",oe.architect_name]}),oe.architect_email&&e.jsxs("div",{children:[e.jsx("strong",{children:"Email:"})," ",oe.architect_email]})]})]}),e.jsxs("div",{className:"form-row",style:{gap:"16px"},children:[e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{children:"Preview Image"}),bt(oe.image_url)?e.jsx("img",{src:oe.image_url,alt:"Preview",style:{width:"100%",maxHeight:"70vh",objectFit:"contain",borderRadius:8}}):e.jsx("div",{style:{padding:12,background:"#fafafa",border:"1px dashed #ddd",borderRadius:8},children:"No image"})]}),e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{children:"Layout"}),bt(oe.design_file_url)?e.jsx("img",{src:oe.design_file_url,alt:"Layout",style:{width:"100%",maxHeight:"70vh",objectFit:"contain",borderRadius:8}}):na(oe.design_file_url)?e.jsx("iframe",{title:"Layout PDF",src:oe.design_file_url,style:{width:"100%",height:"70vh",border:"1px solid #eee",borderRadius:8}}):oe.design_file_url?e.jsx("a",{className:"btn btn-link",href:oe.design_file_url,target:"_blank",rel:"noreferrer",children:"Open/Download Layout"}):e.jsx("div",{style:{padding:12,background:"#fafafa",border:"1px dashed #ddd",borderRadius:8},children:"No layout file"})]})]}),oe.technical_details&&e.jsxs("div",{style:{marginTop:"16px",padding:"12px",background:"#f8f9fa",borderRadius:"6px",border:"1px solid #e9ecef"},children:[e.jsx("h5",{style:{margin:"0 0 8px 0",fontSize:"0.9rem",color:"#495057"},children:"Technical Specifications"}),e.jsx(vl,{technicalDetails:oe.technical_details,compact:!0})]}),e.jsx("div",{className:"form-actions",children:e.jsx("button",{type:"button",className:"btn btn-primary",onClick:()=>K(null),children:"Close"})})]})}),Ja&&e.jsx("div",{className:"form-modal",onClick:()=>eo(null),children:e.jsxs("div",{className:"form-content",onClick:P=>P.stopPropagation(),style:{maxWidth:"min(1000px, 95vw)",maxHeight:"90vh"},children:[e.jsxs("div",{className:"form-header",children:[e.jsxs("h3",{children:["Layout Details - ",Ja.title]}),e.jsx("p",{children:"Complete layout information and specifications"}),(Ja.architect_name||Ja.architect_email)&&e.jsxs("div",{style:{marginTop:6,color:"#6b7280"},children:[Ja.architect_name&&e.jsxs("div",{children:[e.jsx("strong",{children:"Architect:"})," ",Ja.architect_name]}),Ja.architect_email&&e.jsxs("div",{children:[e.jsx("strong",{children:"Email:"})," ",Ja.architect_email]})]})]}),e.jsxs("div",{style:{overflowY:"auto",maxHeight:"70vh",paddingRight:"8px"},children:[e.jsxs("div",{style:{marginBottom:"24px",padding:"16px",background:"#f8f9fa",borderRadius:"8px",border:"1px solid #e9ecef"},children:[e.jsx("h4",{style:{margin:"0 0 12px 0",color:"#495057"},children:"Basic Information"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"12px"},children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Title:"})," ",Ja.title||"N/A"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Type:"})," ",Ja.layout_type||"N/A"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Bedrooms:"})," ",Ja.bedrooms||"N/A"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Bathrooms:"})," ",Ja.bathrooms||"N/A"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Area:"})," ",Ja.area?`${Ja.area} sq ft`:"N/A"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Price Range:"})," ",Ja.price_range||"N/A"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Status:"})," ",Ja.status||"N/A"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Created:"})," ",Ja.created_at?new Date(Ja.created_at).toLocaleDateString():"N/A"]})]}),Ja.description&&e.jsxs("div",{style:{marginTop:"12px"},children:[e.jsx("strong",{children:"Description:"}),e.jsx("p",{style:{margin:"4px 0 0 0",color:"#6c757d"},children:Ja.description})]})]}),Ja.technical_details&&e.jsxs("div",{style:{marginBottom:"24px"},children:[e.jsx("h4",{style:{margin:"0 0 12px 0",color:"#495057"},children:"Technical Specifications"}),e.jsx(vl,{technicalDetails:Ja.technical_details,compact:!1})]}),e.jsxs("div",{style:{padding:"16px",background:"#f8f9fa",borderRadius:"8px",border:"1px solid #e9ecef"},children:[e.jsx("h4",{style:{margin:"0 0 12px 0",color:"#495057"},children:"Files & Media"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"16px"},children:[Ja.image_url&&e.jsxs("div",{children:[e.jsx("strong",{children:"Preview Image:"}),e.jsx("div",{style:{marginTop:"8px"},children:e.jsx("img",{src:Ja.image_url,alt:"Preview",style:{maxWidth:"100%",maxHeight:"200px",borderRadius:"6px",objectFit:"cover"}})})]}),Ja.design_file_url&&e.jsxs("div",{children:[e.jsx("strong",{children:"Layout File:"}),e.jsx("div",{style:{marginTop:"8px",padding:"8px",background:"#fff",borderRadius:"6px",border:"1px solid #dee2e6"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("span",{style:{fontSize:"1.5rem"},children:Ja.design_file_url.toLowerCase().endsWith(".pdf")?"":Ja.design_file_url.toLowerCase().match(/\.(jpg|jpeg|png|gif|webp)$/)?"":Ja.design_file_url.toLowerCase().match(/\.(dwg|dxf)$/)?"":Ja.design_file_url.toLowerCase().match(/\.(skp|3dm|obj|stl)$/)?"":""}),e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:"500"},children:Ja.design_file_url.split("/").pop()}),e.jsx("a",{href:Ja.design_file_url,target:"_blank",rel:"noreferrer",style:{fontSize:"0.8rem",color:"#3b82f6"},children:"View File"})]})]})})]})]})]})]}),e.jsx("div",{className:"form-actions",children:e.jsx("button",{type:"button",className:"btn btn-primary",onClick:()=>eo(null),children:"Close"})})]})})]}),e.jsx(VF,{viewer:bn,setViewer:Bn})]})},GF=({request:t,onAssignArchitect:a,onRemove:s,showContractorInfo:i=!1})=>{const[o,l]=An.useState(!1),d=A=>{if(!A)return{};try{return typeof A=="string"?JSON.parse(A):A}catch{return{}}};if(t.type==="direct_send"||t.id?.toString().startsWith("send_"))return e.jsxs("div",{className:"list-item",style:{background:"white",borderRadius:"12px",border:"1px solid #e5e7eb",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.1)",padding:"20px",marginBottom:"16px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"12px"},children:[e.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"12px",background:"linear-gradient(135deg, #f59e0b 0%, #d97706 100%)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"20px",color:"white"},children:""}),e.jsxs("div",{style:{flex:1},children:[e.jsx("h4",{style:{margin:0,fontSize:"18px",fontWeight:"600",color:"#1f2937"},children:"Sent to Contractor"}),e.jsxs("p",{style:{margin:"4px 0 0 0",fontSize:"14px",color:"#6b7280"},children:[t.contractor_name||"Contractor","  ",t.layout_title||"Layout"]}),e.jsxs("div",{style:{margin:"4px 0 0 0",fontSize:"12px",color:"#9ca3af"},children:[e.jsxs("div",{children:[" Sent: ",new Date(t.created_at).toLocaleString()]}),t.acknowledged_at&&e.jsxs("div",{style:{color:"#10b981",marginTop:"2px"},children:[" Acknowledged: ",new Date(t.acknowledged_at).toLocaleString()]}),t.due_date&&e.jsxs("div",{style:{color:"#f59e0b",marginTop:"2px"},children:[" Due: ",new Date(t.due_date).toLocaleDateString()]})]})]}),e.jsx("span",{className:`status-badge ${t.acknowledged_at?"accepted":"pending"}`,style:{marginLeft:"auto"},children:t.acknowledged_at?"Acknowledged":"Sent"})]}),t.message&&e.jsxs("div",{style:{marginTop:"12px",padding:"12px",background:"#f9fafb",borderRadius:"8px",border:"1px solid #e5e7eb"},children:[e.jsx("strong",{style:{fontSize:"13px",color:"#374151"},children:"Message:"}),e.jsx("p",{style:{margin:"4px 0 0 0",fontSize:"14px",color:"#6b7280",whiteSpace:"pre-wrap"},children:t.message})]})]});const u=()=>{const A=d(t.requirements),p=A.forwarded_design;if(!p)return null;const m=Array.isArray(p.files)?p.files:[],b=p.technical_details||{},v=C=>{if(!C)return"-";if(typeof C=="string"){try{const D=JSON.parse(C);if(typeof D=="object"&&D!==null)return Object.entries(D).map(([S,_])=>` ${S.replace(/_/g," ")}: ${String(_)}`).join(`
`)}catch{}return C.replace(/\\n/g,`
`).replace(/\n\s*\n/g,`
`).trim()}return typeof C=="object"&&C!==null?Object.entries(C).map(([D,S])=>` ${D.replace(/_/g," ")}: ${String(S)}`).join(`
`):String(C)},x=C=>!C||typeof C!="object"?null:e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(280px, 1fr))",gap:12},children:Object.entries(C).map(([D,S])=>e.jsxs("div",{style:{padding:"12px",background:"#fff",border:"1px solid #e5e7eb",borderRadius:8,boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[e.jsx("div",{style:{fontSize:13,fontWeight:600,color:"#374151",marginBottom:8,textTransform:"capitalize"},children:D.replaceAll("_"," ").replace(/\b\w/g,_=>_.toUpperCase())}),e.jsx("div",{style:{fontSize:14,lineHeight:1.5,color:"#6b7280",whiteSpace:"pre-wrap"},children:v(S)})]},D))});return e.jsxs("div",{className:"forwarded-design",style:{marginTop:10},children:[e.jsxs("div",{className:"details-grid",style:{marginBottom:8},children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Design Title:"})," ",p.title||"-"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Uploaded:"})," ",p.created_at?new Date(p.created_at).toLocaleString():"-"]})]}),p.description&&e.jsxs("div",{className:"description-section",style:{marginBottom:8},children:[e.jsx("strong",{children:"Description:"}),e.jsx("div",{className:"description-content",children:p.description})]}),A.contractor_message&&e.jsxs("div",{className:"description-section",style:{marginBottom:8},children:[e.jsx("strong",{children:"Message to contractor:"}),e.jsx("div",{className:"description-content",children:A.contractor_message})]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(200px, 1fr))",gap:"12px"},children:m.map((C,D)=>{const S=C.path||`/buildhub/backend/uploads/designs/${C.stored||C.original}`,_=(C.ext||"").toLowerCase(),N=["jpg","jpeg","png","gif","webp","svg","heic"].includes(_);return e.jsxs("div",{className:"file-card-interactive",style:{position:"relative",cursor:"pointer",borderRadius:8,overflow:"hidden",boxShadow:"0 2px 8px rgba(0,0,0,0.1)",transition:"transform 0.2s ease",":hover":{transform:"scale(1.02)"}},children:[N?e.jsxs("div",{style:{position:"relative",width:"100%",height:140},children:[e.jsx("img",{src:S,alt:C.original,style:{width:"100%",height:"100%",objectFit:"cover"},onClick:O=>{O.stopPropagation();const L=O.currentTarget.nextSibling;L.style.display=L.style.display==="flex"?"none":"flex"},onError:O=>{O.target.style.display="none";const L=document.createElement("div");L.style.cssText="width: 100%; height: 100%; display: flex; align-items: center; justify-content: center; background: #f5f5f7; flex-direction: column; color: #6b7280;",L.innerHTML='<span style="font-size: 2rem; margin-bottom: 8px;"></span><span style="font-size: 0.75rem;">Image not found</span>',O.target.parentNode.insertBefore(L,O.target)}}),e.jsxs("div",{className:"image-overlay",style:{position:"absolute",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.7)",display:"none",alignItems:"center",justifyContent:"center",gap:10,zIndex:10},children:[e.jsx("a",{href:S,target:"_blank",rel:"noreferrer",className:"btn btn-light",style:{padding:"8px 16px",fontSize:"14px"},onClick:O=>O.stopPropagation(),children:" View"}),e.jsx("a",{href:S,download:!0,className:"btn btn-light",style:{padding:"8px 16px",fontSize:"14px"},onClick:O=>O.stopPropagation(),children:" Download"})]})]}):e.jsxs("div",{style:{height:140,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",background:"#f8fafc",border:"2px dashed #cbd5e1"},children:[e.jsx("span",{style:{fontSize:"2.5rem",marginBottom:8},children:""}),e.jsxs("div",{style:{display:"flex",gap:8},children:[e.jsx("a",{href:S,target:"_blank",rel:"noreferrer",className:"btn btn-secondary btn-sm",children:"View"}),e.jsx("a",{href:S,download:!0,className:"btn btn-primary btn-sm",children:"Download"})]})]}),e.jsxs("div",{style:{padding:"8px",background:"#fff",borderTop:"1px solid #e5e7eb"},children:[e.jsx("div",{style:{fontSize:"13px",fontWeight:500,color:"#374151",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},title:C.original||C.stored,children:C.original||C.stored}),e.jsxs("div",{style:{fontSize:"11px",color:"#9ca3af",marginTop:2},children:[_.toUpperCase(),"  Click to ",N?"view":"download"]})]})]},D)})}),b&&Object.keys(b).length>0&&e.jsxs("div",{style:{marginTop:16},children:[e.jsx("h4",{style:{margin:"10px 0"},children:"Technical Details"}),b.floor_plans&&e.jsxs("div",{style:{marginBottom:12},children:[e.jsx("div",{style:{fontWeight:600,marginBottom:6},children:"Floor Plans"}),x(b.floor_plans)]}),b.site_orientation&&e.jsxs("div",{style:{marginBottom:12},children:[e.jsx("div",{style:{fontWeight:600,marginBottom:6},children:"Site Orientation"}),x(b.site_orientation)]}),b.structural&&e.jsxs("div",{style:{marginBottom:12},children:[e.jsx("div",{style:{fontWeight:600,marginBottom:6},children:"Structural"}),x(b.structural)]}),b.elevations&&e.jsxs("div",{style:{marginBottom:12},children:[e.jsx("div",{style:{fontWeight:600,marginBottom:6},children:"Elevations"}),x(b.elevations)]}),b.construction&&e.jsxs("div",{style:{marginBottom:12},children:[e.jsx("div",{style:{fontWeight:600,marginBottom:6},children:"Construction"}),x(b.construction)]})]})]})};return e.jsxs("div",{className:"list-item",style:{background:"white",borderRadius:"12px",border:"1px solid #e5e7eb",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.1)",padding:"20px",marginBottom:"16px",transition:"all 0.2s ease",position:"relative",overflow:"hidden"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"flex-start",justifyContent:"space-between",marginBottom:"16px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[e.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"12px",background:t.layout_type==="library"?"linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%)":"linear-gradient(135deg, #10b981 0%, #059669 100%)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"20px",color:"white",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.15)"},children:t.layout_type==="library"?"":Number(t?.accepted_count)>0||t?.status==="approved"||t?.status==="accepted"?"":t.status==="rejected"?"":""}),e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"4px"},children:[e.jsxs("span",{style:{background:"#eef2ff",color:"#3730a3",padding:"2px 8px",borderRadius:"6px",fontSize:"12px",fontWeight:"600"},children:["#",t.id]}),e.jsx("h4",{style:{margin:0,fontSize:"18px",fontWeight:"600",color:"#1f2937",lineHeight:"1.3"},children:t.layout_type==="library"?`Library Layout: ${t.selected_layout_title||"Selected Layout"}`:`Custom Layout Request - ${t.plot_size} sq ft`})]}),e.jsxs("p",{style:{margin:0,fontSize:"14px",color:"#6b7280",lineHeight:"1.4"},children:["Budget: ",t.budget_range,t.layout_type==="library"&&t.selected_layout_type&&e.jsx("span",{style:{background:"#f0fdf4",color:"#166534",padding:"2px 6px",borderRadius:"4px",marginLeft:"8px",fontSize:"12px",fontWeight:"500"},children:t.selected_layout_type})]})]})]}),e.jsx("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:(()=>{const A=Number(t?.accepted_count)>0||t?.status==="approved"||t?.status==="accepted"?"accepted":t?.status;return e.jsx("span",{style:{background:A==="accepted"?"#d1fae5":A==="rejected"?"#fee2e2":A==="pending"?"#fef3c7":"#f3f4f6",color:A==="accepted"?"#065f46":A==="rejected"?"#991b1b":A==="pending"?"#92400e":"#6b7280",padding:"6px 12px",borderRadius:"20px",fontSize:"12px",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.5px"},children:A==="deleted"?"Deleted":vp(A)})})()})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"16px",marginBottom:"16px"},children:[e.jsxs("div",{style:{background:"#f8fafc",padding:"12px",borderRadius:"8px",border:"1px solid #e2e8f0"},children:[e.jsx("div",{style:{fontSize:"12px",color:"#6b7280",marginBottom:"4px",fontWeight:"500"},children:"Submitted"}),e.jsx("div",{style:{fontSize:"14px",color:"#1f2937",fontWeight:"600"},children:new Date(t.created_at).toLocaleDateString()})]}),t.location&&e.jsxs("div",{style:{background:"#f8fafc",padding:"12px",borderRadius:"8px",border:"1px solid #e2e8f0"},children:[e.jsx("div",{style:{fontSize:"12px",color:"#6b7280",marginBottom:"4px",fontWeight:"500"},children:"Location"}),e.jsx("div",{style:{fontSize:"14px",color:"#1f2937",fontWeight:"600"},children:t.location})]}),e.jsxs("div",{style:{background:"#f8fafc",padding:"12px",borderRadius:"8px",border:"1px solid #e2e8f0"},children:[e.jsx("div",{style:{fontSize:"12px",color:"#6b7280",marginBottom:"4px",fontWeight:"500"},children:"Designs"}),e.jsx("div",{style:{fontSize:"14px",color:"#1f2937",fontWeight:"600"},children:t.design_count||0})]}),e.jsxs("div",{style:{background:"#f8fafc",padding:"12px",borderRadius:"8px",border:"1px solid #e2e8f0"},children:[e.jsx("div",{style:{fontSize:"12px",color:"#6b7280",marginBottom:"4px",fontWeight:"500"},children:"Proposals"}),e.jsx("div",{style:{fontSize:"14px",color:"#1f2937",fontWeight:"600"},children:t.proposal_count||0})]})]}),e.jsxs("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap",marginBottom:"16px"},children:[e.jsxs("span",{style:{background:"#e0f2fe",color:"#0369a1",padding:"4px 10px",borderRadius:"12px",fontSize:"12px",fontWeight:"500"},children:["Sent: ",t.sent_count||0]}),e.jsxs("span",{style:{background:"#d1fae5",color:"#065f46",padding:"4px 10px",borderRadius:"12px",fontSize:"12px",fontWeight:"500"},children:["Accepted: ",t.accepted_count||0]}),e.jsxs("span",{style:{background:"#fee2e2",color:"#991b1b",padding:"4px 10px",borderRadius:"12px",fontSize:"12px",fontWeight:"500"},children:["Rejected: ",t.rejected_count||0]})]}),i&&e.jsxs("div",{style:{background:"linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%)",padding:"16px",borderRadius:"8px",border:"1px solid #e2e8f0",marginBottom:"16px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:[e.jsx("span",{style:{fontWeight:"600",color:"#374151",fontSize:"14px"},children:"Contractor Assignments"}),e.jsxs("span",{style:{background:"#dbeafe",color:"#1e40af",padding:"4px 10px",borderRadius:"12px",fontSize:"12px",fontWeight:"500"},children:[t.assignment_count||0," assigned"]})]}),t.assigned_contractors&&t.assigned_contractors.length>0?e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"13px",color:"#6b7280",marginBottom:"8px",fontWeight:"500"},children:"Assigned Contractors:"}),e.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"6px"},children:t.assigned_contractors.map((A,p)=>e.jsx("span",{style:{background:"#ecfdf5",color:"#065f46",padding:"4px 8px",borderRadius:"8px",fontSize:"12px",fontWeight:"500"},children:A},p))}),t.assignment_statuses&&t.assignment_statuses.length>0&&e.jsxs("div",{style:{marginTop:"8px",fontSize:"12px",color:"#6b7280"},children:["Status: ",t.assignment_statuses.join(", ")]})]}):e.jsx("div",{style:{fontSize:"14px",color:"#6b7280",fontStyle:"italic"},children:"No contractors assigned yet"}),e.jsxs("div",{style:{marginTop:"12px",fontSize:"12px",color:"#6b7280",fontWeight:"500"},children:["Proposals received: ",t.proposal_count||0]})]}),o&&e.jsx("div",{style:{background:"linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%)",padding:"20px",borderRadius:"12px",border:"1px solid #e2e8f0",marginBottom:"16px"},children:e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"16px"},children:[e.jsxs("div",{style:{background:"white",padding:"12px",borderRadius:"8px",border:"1px solid #e5e7eb"},children:[e.jsx("div",{style:{fontSize:"12px",color:"#6b7280",marginBottom:"4px",fontWeight:"500"},children:"Request Type"}),e.jsx("div",{style:{fontSize:"14px",fontWeight:"600",color:"#1f2937"},children:t.layout_type==="library"?"Library Layout":"Custom Request"})]}),e.jsxs("div",{style:{background:"white",padding:"12px",borderRadius:"8px",border:"1px solid #e5e7eb"},children:[e.jsx("div",{style:{fontSize:"12px",color:"#6b7280",marginBottom:"4px",fontWeight:"500"},children:"Plot Size"}),e.jsx("div",{style:{fontSize:"14px",fontWeight:"600",color:"#1f2937"},children:t.plot_size||"-"})]}),e.jsxs("div",{style:{background:"white",padding:"12px",borderRadius:"8px",border:"1px solid #e5e7eb"},children:[e.jsx("div",{style:{fontSize:"12px",color:"#6b7280",marginBottom:"4px",fontWeight:"500"},children:"Budget Range"}),e.jsx("div",{style:{fontSize:"14px",fontWeight:"600",color:"#1f2937"},children:t.budget_range||"-"})]}),e.jsxs("div",{style:{background:"white",padding:"12px",borderRadius:"8px",border:"1px solid #e5e7eb"},children:[e.jsx("div",{style:{fontSize:"12px",color:"#6b7280",marginBottom:"4px",fontWeight:"500"},children:"Location"}),e.jsx("div",{style:{fontSize:"14px",fontWeight:"600",color:"#1f2937"},children:t.location||"-"})]}),e.jsxs("div",{style:{background:"white",padding:"12px",borderRadius:"8px",border:"1px solid #e5e7eb"},children:[e.jsx("div",{style:{fontSize:"12px",color:"#6b7280",marginBottom:"4px",fontWeight:"500"},children:"Timeline"}),e.jsx("div",{style:{fontSize:"14px",fontWeight:"600",color:"#1f2937"},children:t.timeline||"-"})]}),t.layout_type==="library"&&e.jsxs("div",{style:{background:"white",padding:"12px",borderRadius:"8px",border:"1px solid #e5e7eb",gridColumn:"1 / -1"},children:[e.jsx("div",{style:{fontSize:"12px",color:"#6b7280",marginBottom:"4px",fontWeight:"500"},children:"Selected Layout"}),e.jsx("div",{style:{fontSize:"14px",fontWeight:"600",color:"#1f2937"},children:t.selected_layout_title||"Selected Layout"})]}),t.layout_type==="library"&&(t.selected_layout_architect_name||t.selected_layout_architect_email)&&e.jsxs("div",{style:{background:"white",padding:"12px",borderRadius:"8px",border:"1px solid #e5e7eb",gridColumn:"1 / -1",display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"12px"},children:[t.selected_layout_architect_name&&e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"12px",color:"#6b7280",marginBottom:"4px",fontWeight:"500"},children:"Architect"}),e.jsx("div",{style:{fontSize:"14px",fontWeight:"600",color:"#1f2937"},children:t.selected_layout_architect_name})]}),t.selected_layout_architect_email&&e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"12px",color:"#6b7280",marginBottom:"4px",fontWeight:"500"},children:"Email"}),e.jsx("div",{style:{fontSize:"14px",fontWeight:"600",color:"#1f2937"},children:t.selected_layout_architect_email})]})]}),t.requirements&&e.jsx("div",{style:{gridColumn:"1 / -1"},children:e.jsx(tx,{raw:t.requirements,title:"Requirements"})}),i&&e.jsxs("div",{style:{gridColumn:"1 / -1"},children:[e.jsx("div",{style:{fontSize:"12px",color:"#6b7280",marginBottom:"6px",fontWeight:"500"},children:"Forwarded to Contractor"}),u()]})]})}),e.jsxs("div",{style:{display:"flex",gap:"12px",flexWrap:"wrap",alignItems:"center",justifyContent:"flex-end",paddingTop:"16px",borderTop:"1px solid #e5e7eb"},children:[e.jsx("button",{style:{background:"#f3f4f6",color:"#374151",border:"1px solid #d1d5db",padding:"8px 16px",borderRadius:"8px",fontSize:"14px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease"},onClick:()=>l(A=>!A),onMouseEnter:A=>{A.target.style.background="#e5e7eb",A.target.style.borderColor="#9ca3af"},onMouseLeave:A=>{A.target.style.background="#f3f4f6",A.target.style.borderColor="#d1d5db"},children:o?"Hide Details":"View Details"}),e.jsx("button",{style:{background:"linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%)",color:"white",border:"none",padding:"8px 16px",borderRadius:"8px",fontSize:"14px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease",boxShadow:"0 2px 4px rgba(59, 130, 246, 0.3)"},onClick:a,title:"Send this request to a selected architect",onMouseEnter:A=>{A.target.style.transform="translateY(-1px)",A.target.style.boxShadow="0 4px 8px rgba(59, 130, 246, 0.4)"},onMouseLeave:A=>{A.target.style.transform="translateY(0)",A.target.style.boxShadow="0 2px 4px rgba(59, 130, 246, 0.3)"},children:"Send to Architect"}),e.jsx("button",{style:{background:"linear-gradient(135deg, #ef4444 0%, #dc2626 100%)",color:"white",border:"none",padding:"8px 16px",borderRadius:"8px",fontSize:"14px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease",boxShadow:"0 2px 4px rgba(239, 68, 68, 0.3)"},onClick:s,title:"Remove request",onMouseEnter:A=>{A.target.style.transform="translateY(-1px)",A.target.style.boxShadow="0 4px 8px rgba(239, 68, 68, 0.4)"},onMouseLeave:A=>{A.target.style.transform="translateY(0)",A.target.style.boxShadow="0 2px 4px rgba(239, 68, 68, 0.3)"},children:"Remove"})]})]})},Eb=({layout:t,onSelect:a,onPreview:s,isImageUrl:i,isPdfUrl:o,isModal:l=!1,onSendToContractor:d,onViewDetails:u})=>e.jsxs("div",{className:`layout-card ${l?"modal-card":""}`,children:[e.jsxs("div",{className:"layout-image-container",children:[e.jsx("button",{type:"button",className:"layout-image-button",onClick:A=>{A.stopPropagation(),s()},style:{cursor:"zoom-in"},children:e.jsx("img",{src:t.image_url||"/images/default-layout.jpg",alt:t.title,className:"layout-card-image"})}),e.jsx("div",{className:"layout-overlay",children:e.jsxs("div",{style:{display:"flex",gap:8,flexWrap:"wrap"},children:[t.design_file_url&&(i(t.design_file_url)||o(t.design_file_url))&&e.jsx("button",{type:"button",className:"btn",onClick:A=>{A.stopPropagation(),s()},children:"View Layout"}),e.jsx("button",{type:"button",className:"btn",onClick:A=>{A.stopPropagation(),a()},children:"Customize"})]})})]}),e.jsxs("div",{className:"layout-card-content",children:[e.jsx("h4",{className:"layout-title",children:t.title}),e.jsx("p",{className:"layout-type",children:t.layout_type}),e.jsxs("div",{className:"layout-specs",children:[e.jsxs("span",{className:"spec",children:[" ",t.bedrooms," BR"]}),e.jsxs("span",{className:"spec",children:[" ",t.bathrooms," BA"]}),e.jsxs("span",{className:"spec",children:[" ",t.area," sq ft"]})]}),t.architect_name&&e.jsxs("p",{className:"layout-author",style:{margin:"6px 0",color:"#555"},children:["By ",t.architect_name]}),t.architect_email&&e.jsxs("p",{className:"layout-author",style:{margin:"0 0 6px 0",color:"#6b7280"},children:["Email: ",t.architect_email]}),t.description&&e.jsx("p",{className:"layout-description",children:t.description}),t.technical_details&&e.jsxs("div",{className:"technical-details-preview",style:{marginTop:"12px",padding:"12px",background:"#f8f9fa",borderRadius:"6px",border:"1px solid #e9ecef"},children:[e.jsx("h5",{style:{margin:"0 0 8px 0",fontSize:"0.9rem",color:"#495057"},children:"Technical Specifications"}),e.jsx(vl,{technicalDetails:t.technical_details,compact:!0})]}),e.jsx("div",{className:"layout-price",children:t.price_range&&e.jsxs("span",{className:"price-range",children:["",t.price_range]})})]})]}),VF=({viewer:t,setViewer:a})=>{if(!t.open)return null;const s=/\.(jpg|jpeg|png|gif|webp|svg|heic)$/i.test(t.src),i=/\.(pdf)$/i.test(t.src);return e.jsxs("div",{className:"viewer-overlay",style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.9)",zIndex:9999,display:"flex",alignItems:"center",justifyContent:"center",padding:"20px"},onClick:()=>a({open:!1,src:"",title:""}),children:[e.jsxs("div",{className:"viewer-content",style:{position:"relative",maxWidth:"90vw",maxHeight:"90vh",backgroundColor:"white",borderRadius:"8px",overflow:"hidden",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)"},onClick:o=>o.stopPropagation(),children:[e.jsxs("div",{className:"viewer-header",style:{padding:"16px 20px",borderBottom:"1px solid #e5e7eb",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"#f9fafb"},children:[e.jsx("h3",{style:{margin:0,fontSize:"18px",fontWeight:"600",color:"#374151"},children:t.title}),e.jsx("button",{onClick:()=>a({open:!1,src:"",title:""}),style:{background:"none",border:"none",fontSize:"24px",cursor:"pointer",color:"#6b7280",padding:"4px",borderRadius:"4px",display:"flex",alignItems:"center",justifyContent:"center"},title:"Close viewer",children:""})]}),e.jsx("div",{className:"viewer-body",style:{padding:"20px",display:"flex",alignItems:"center",justifyContent:"center",minHeight:"400px",maxHeight:"70vh",overflow:"auto"},children:s?e.jsx("img",{src:t.src,alt:t.title,style:{maxWidth:"100%",maxHeight:"100%",objectFit:"contain",borderRadius:"4px"}}):i?e.jsx("iframe",{src:t.src,style:{width:"100%",height:"600px",border:"none",borderRadius:"4px"},title:t.title}):e.jsxs("div",{style:{textAlign:"center",color:"#6b7280"},children:[e.jsx("div",{style:{fontSize:"48px",marginBottom:"16px"},children:""}),e.jsx("p",{style:{margin:0,fontSize:"16px"},children:"Preview not available"}),e.jsx("a",{href:t.src,target:"_blank",rel:"noopener noreferrer",style:{display:"inline-block",marginTop:"12px",padding:"8px 16px",backgroundColor:"#3b82f6",color:"white",textDecoration:"none",borderRadius:"6px",fontSize:"14px"},children:"Open File"})]})}),e.jsxs("div",{className:"viewer-footer",style:{padding:"12px 20px",borderTop:"1px solid #e5e7eb",backgroundColor:"#f9fafb",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("a",{href:t.src,download:!0,style:{padding:"8px 16px",backgroundColor:"#10b981",color:"white",textDecoration:"none",borderRadius:"6px",fontSize:"14px",fontWeight:"500"},children:"Download"}),e.jsx("a",{href:t.src,target:"_blank",rel:"noopener noreferrer",style:{padding:"8px 16px",backgroundColor:"#6b7280",color:"white",textDecoration:"none",borderRadius:"6px",fontSize:"14px",fontWeight:"500"},children:"Open in New Tab"})]})]}),showRoomImprovementModal&&e.jsx(zF,{show:showRoomImprovementModal,onClose:()=>{console.log(" Room Improvement modal onClose called"),setShowRoomImprovementModal(!1)}})]})};function $F(t){if(typeof document>"u")return;let a=document.head||document.getElementsByTagName("head")[0],s=document.createElement("style");s.type="text/css",a.firstChild?a.insertBefore(s,a.firstChild):a.appendChild(s),s.styleSheet?s.styleSheet.cssText=t:s.appendChild(document.createTextNode(t))}$F(`:root{--toastify-color-light: #fff;--toastify-color-dark: #121212;--toastify-color-info: #3498db;--toastify-color-success: #07bc0c;--toastify-color-warning: #f1c40f;--toastify-color-error: hsl(6, 78%, 57%);--toastify-color-transparent: rgba(255, 255, 255, .7);--toastify-icon-color-info: var(--toastify-color-info);--toastify-icon-color-success: var(--toastify-color-success);--toastify-icon-color-warning: var(--toastify-color-warning);--toastify-icon-color-error: var(--toastify-color-error);--toastify-container-width: fit-content;--toastify-toast-width: 320px;--toastify-toast-offset: 16px;--toastify-toast-top: max(var(--toastify-toast-offset), env(safe-area-inset-top));--toastify-toast-right: max(var(--toastify-toast-offset), env(safe-area-inset-right));--toastify-toast-left: max(var(--toastify-toast-offset), env(safe-area-inset-left));--toastify-toast-bottom: max(var(--toastify-toast-offset), env(safe-area-inset-bottom));--toastify-toast-background: #fff;--toastify-toast-padding: 14px;--toastify-toast-min-height: 64px;--toastify-toast-max-height: 800px;--toastify-toast-bd-radius: 6px;--toastify-toast-shadow: 0px 4px 12px rgba(0, 0, 0, .1);--toastify-font-family: sans-serif;--toastify-z-index: 9999;--toastify-text-color-light: #757575;--toastify-text-color-dark: #fff;--toastify-text-color-info: #fff;--toastify-text-color-success: #fff;--toastify-text-color-warning: #fff;--toastify-text-color-error: #fff;--toastify-spinner-color: #616161;--toastify-spinner-color-empty-area: #e0e0e0;--toastify-color-progress-light: linear-gradient(to right, #4cd964, #5ac8fa, #007aff, #34aadc, #5856d6, #ff2d55);--toastify-color-progress-dark: #bb86fc;--toastify-color-progress-info: var(--toastify-color-info);--toastify-color-progress-success: var(--toastify-color-success);--toastify-color-progress-warning: var(--toastify-color-warning);--toastify-color-progress-error: var(--toastify-color-error);--toastify-color-progress-bgo: .2}.Toastify__toast-container{z-index:var(--toastify-z-index);-webkit-transform:translate3d(0,0,var(--toastify-z-index));position:fixed;width:var(--toastify-container-width);box-sizing:border-box;color:#fff;display:flex;flex-direction:column}.Toastify__toast-container--top-left{top:var(--toastify-toast-top);left:var(--toastify-toast-left)}.Toastify__toast-container--top-center{top:var(--toastify-toast-top);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--top-right{top:var(--toastify-toast-top);right:var(--toastify-toast-right);align-items:end}.Toastify__toast-container--bottom-left{bottom:var(--toastify-toast-bottom);left:var(--toastify-toast-left)}.Toastify__toast-container--bottom-center{bottom:var(--toastify-toast-bottom);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--bottom-right{bottom:var(--toastify-toast-bottom);right:var(--toastify-toast-right);align-items:end}.Toastify__toast{--y: 0;position:relative;touch-action:none;width:var(--toastify-toast-width);min-height:var(--toastify-toast-min-height);box-sizing:border-box;margin-bottom:1rem;padding:var(--toastify-toast-padding);border-radius:var(--toastify-toast-bd-radius);box-shadow:var(--toastify-toast-shadow);max-height:var(--toastify-toast-max-height);font-family:var(--toastify-font-family);z-index:0;display:flex;flex:1 auto;align-items:center;word-break:break-word}@media only screen and (max-width: 480px){.Toastify__toast-container{width:100vw;left:env(safe-area-inset-left);margin:0}.Toastify__toast-container--top-left,.Toastify__toast-container--top-center,.Toastify__toast-container--top-right{top:env(safe-area-inset-top);transform:translate(0)}.Toastify__toast-container--bottom-left,.Toastify__toast-container--bottom-center,.Toastify__toast-container--bottom-right{bottom:env(safe-area-inset-bottom);transform:translate(0)}.Toastify__toast-container--rtl{right:env(safe-area-inset-right);left:initial}.Toastify__toast{--toastify-toast-width: 100%;margin-bottom:0;border-radius:0}}.Toastify__toast-container[data-stacked=true]{width:var(--toastify-toast-width)}.Toastify__toast--stacked{position:absolute;width:100%;transform:translate3d(0,var(--y),0) scale(var(--s));transition:transform .3s}.Toastify__toast--stacked[data-collapsed] .Toastify__toast-body,.Toastify__toast--stacked[data-collapsed] .Toastify__close-button{transition:opacity .1s}.Toastify__toast--stacked[data-collapsed=false]{overflow:visible}.Toastify__toast--stacked[data-collapsed=true]:not(:last-child)>*{opacity:0}.Toastify__toast--stacked:after{content:"";position:absolute;left:0;right:0;height:calc(var(--g) * 1px);bottom:100%}.Toastify__toast--stacked[data-pos=top]{top:0}.Toastify__toast--stacked[data-pos=bot]{bottom:0}.Toastify__toast--stacked[data-pos=bot].Toastify__toast--stacked:before{transform-origin:top}.Toastify__toast--stacked[data-pos=top].Toastify__toast--stacked:before{transform-origin:bottom}.Toastify__toast--stacked:before{content:"";position:absolute;left:0;right:0;bottom:0;height:100%;transform:scaleY(3);z-index:-1}.Toastify__toast--rtl{direction:rtl}.Toastify__toast--close-on-click{cursor:pointer}.Toastify__toast-icon{margin-inline-end:10px;width:22px;flex-shrink:0;display:flex}.Toastify--animate{animation-fill-mode:both;animation-duration:.5s}.Toastify--animate-icon{animation-fill-mode:both;animation-duration:.3s}.Toastify__toast-theme--dark{background:var(--toastify-color-dark);color:var(--toastify-text-color-dark)}.Toastify__toast-theme--light,.Toastify__toast-theme--colored.Toastify__toast--default{background:var(--toastify-color-light);color:var(--toastify-text-color-light)}.Toastify__toast-theme--colored.Toastify__toast--info{color:var(--toastify-text-color-info);background:var(--toastify-color-info)}.Toastify__toast-theme--colored.Toastify__toast--success{color:var(--toastify-text-color-success);background:var(--toastify-color-success)}.Toastify__toast-theme--colored.Toastify__toast--warning{color:var(--toastify-text-color-warning);background:var(--toastify-color-warning)}.Toastify__toast-theme--colored.Toastify__toast--error{color:var(--toastify-text-color-error);background:var(--toastify-color-error)}.Toastify__progress-bar-theme--light{background:var(--toastify-color-progress-light)}.Toastify__progress-bar-theme--dark{background:var(--toastify-color-progress-dark)}.Toastify__progress-bar--info{background:var(--toastify-color-progress-info)}.Toastify__progress-bar--success{background:var(--toastify-color-progress-success)}.Toastify__progress-bar--warning{background:var(--toastify-color-progress-warning)}.Toastify__progress-bar--error{background:var(--toastify-color-progress-error)}.Toastify__progress-bar-theme--colored.Toastify__progress-bar--info,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--success,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--warning,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--error{background:var(--toastify-color-transparent)}.Toastify__close-button{color:#fff;position:absolute;top:6px;right:6px;background:transparent;outline:none;border:none;padding:0;cursor:pointer;opacity:.7;transition:.3s ease;z-index:1}.Toastify__toast--rtl .Toastify__close-button{left:6px;right:unset}.Toastify__close-button--light{color:#000;opacity:.3}.Toastify__close-button>svg{fill:currentColor;height:16px;width:14px}.Toastify__close-button:hover,.Toastify__close-button:focus{opacity:1}@keyframes Toastify__trackProgress{0%{transform:scaleX(1)}to{transform:scaleX(0)}}.Toastify__progress-bar{position:absolute;bottom:0;left:0;width:100%;height:100%;z-index:1;opacity:.7;transform-origin:left}.Toastify__progress-bar--animated{animation:Toastify__trackProgress linear 1 forwards}.Toastify__progress-bar--controlled{transition:transform .2s}.Toastify__progress-bar--rtl{right:0;left:initial;transform-origin:right;border-bottom-left-radius:initial}.Toastify__progress-bar--wrp{position:absolute;overflow:hidden;bottom:0;left:0;width:100%;height:5px;border-bottom-left-radius:var(--toastify-toast-bd-radius);border-bottom-right-radius:var(--toastify-toast-bd-radius)}.Toastify__progress-bar--wrp[data-hidden=true]{opacity:0}.Toastify__progress-bar--bg{opacity:var(--toastify-color-progress-bgo);width:100%;height:100%}.Toastify__spinner{width:20px;height:20px;box-sizing:border-box;border:2px solid;border-radius:100%;border-color:var(--toastify-spinner-color-empty-area);border-right-color:var(--toastify-spinner-color);animation:Toastify__spin .65s linear infinite}@keyframes Toastify__bounceInRight{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(3000px,0,0)}60%{opacity:1;transform:translate3d(-25px,0,0)}75%{transform:translate3d(10px,0,0)}90%{transform:translate3d(-5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutRight{20%{opacity:1;transform:translate3d(-20px,var(--y),0)}to{opacity:0;transform:translate3d(2000px,var(--y),0)}}@keyframes Toastify__bounceInLeft{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(-3000px,0,0)}60%{opacity:1;transform:translate3d(25px,0,0)}75%{transform:translate3d(-10px,0,0)}90%{transform:translate3d(5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutLeft{20%{opacity:1;transform:translate3d(20px,var(--y),0)}to{opacity:0;transform:translate3d(-2000px,var(--y),0)}}@keyframes Toastify__bounceInUp{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,3000px,0)}60%{opacity:1;transform:translate3d(0,-20px,0)}75%{transform:translate3d(0,10px,0)}90%{transform:translate3d(0,-5px,0)}to{transform:translateZ(0)}}@keyframes Toastify__bounceOutUp{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,-2000px,0)}}@keyframes Toastify__bounceInDown{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,-3000px,0)}60%{opacity:1;transform:translate3d(0,25px,0)}75%{transform:translate3d(0,-10px,0)}90%{transform:translate3d(0,5px,0)}to{transform:none}}@keyframes Toastify__bounceOutDown{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,2000px,0)}}.Toastify__bounce-enter--top-left,.Toastify__bounce-enter--bottom-left{animation-name:Toastify__bounceInLeft}.Toastify__bounce-enter--top-right,.Toastify__bounce-enter--bottom-right{animation-name:Toastify__bounceInRight}.Toastify__bounce-enter--top-center{animation-name:Toastify__bounceInDown}.Toastify__bounce-enter--bottom-center{animation-name:Toastify__bounceInUp}.Toastify__bounce-exit--top-left,.Toastify__bounce-exit--bottom-left{animation-name:Toastify__bounceOutLeft}.Toastify__bounce-exit--top-right,.Toastify__bounce-exit--bottom-right{animation-name:Toastify__bounceOutRight}.Toastify__bounce-exit--top-center{animation-name:Toastify__bounceOutUp}.Toastify__bounce-exit--bottom-center{animation-name:Toastify__bounceOutDown}@keyframes Toastify__zoomIn{0%{opacity:0;transform:scale3d(.3,.3,.3)}50%{opacity:1}}@keyframes Toastify__zoomOut{0%{opacity:1}50%{opacity:0;transform:translate3d(0,var(--y),0) scale3d(.3,.3,.3)}to{opacity:0}}.Toastify__zoom-enter{animation-name:Toastify__zoomIn}.Toastify__zoom-exit{animation-name:Toastify__zoomOut}@keyframes Toastify__flipIn{0%{transform:perspective(400px) rotateX(90deg);animation-timing-function:ease-in;opacity:0}40%{transform:perspective(400px) rotateX(-20deg);animation-timing-function:ease-in}60%{transform:perspective(400px) rotateX(10deg);opacity:1}80%{transform:perspective(400px) rotateX(-5deg)}to{transform:perspective(400px)}}@keyframes Toastify__flipOut{0%{transform:translate3d(0,var(--y),0) perspective(400px)}30%{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(-20deg);opacity:1}to{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(90deg);opacity:0}}.Toastify__flip-enter{animation-name:Toastify__flipIn}.Toastify__flip-exit{animation-name:Toastify__flipOut}@keyframes Toastify__slideInRight{0%{transform:translate3d(110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInLeft{0%{transform:translate3d(-110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInUp{0%{transform:translate3d(0,110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInDown{0%{transform:translate3d(0,-110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideOutRight{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(110%,var(--y),0)}}@keyframes Toastify__slideOutLeft{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(-110%,var(--y),0)}}@keyframes Toastify__slideOutDown{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,500px,0)}}@keyframes Toastify__slideOutUp{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,-500px,0)}}.Toastify__slide-enter--top-left,.Toastify__slide-enter--bottom-left{animation-name:Toastify__slideInLeft}.Toastify__slide-enter--top-right,.Toastify__slide-enter--bottom-right{animation-name:Toastify__slideInRight}.Toastify__slide-enter--top-center{animation-name:Toastify__slideInDown}.Toastify__slide-enter--bottom-center{animation-name:Toastify__slideInUp}.Toastify__slide-exit--top-left,.Toastify__slide-exit--bottom-left{animation-name:Toastify__slideOutLeft;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-right,.Toastify__slide-exit--bottom-right{animation-name:Toastify__slideOutRight;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-center{animation-name:Toastify__slideOutUp;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--bottom-center{animation-name:Toastify__slideOutDown;animation-timing-function:ease-in;animation-duration:.3s}@keyframes Toastify__spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}
`);var ax=t=>typeof t=="number"&&!isNaN(t),uu=t=>typeof t=="string",sw=t=>typeof t=="function",WF=t=>uu(t)||ax(t),YF=t=>w.isValidElement(t)||uu(t)||sw(t)||ax(t),JF=1,nw=()=>`${JF++}`,zo=new Map,Ug=[],Ub=new Set,iw=()=>zo.size>0,XF=(t,{containerId:a})=>{var s;return(s=zo.get(a||1))==null?void 0:s.toasts.get(t)};function ZF(t,a){var s;if(a)return!!((s=zo.get(a))!=null&&s.isToastActive(t));let i=!1;return zo.forEach(o=>{o.isToastActive(t)&&(i=!0)}),i}function e6(t){if(!iw()){Ug=Ug.filter(a=>t!=null&&a.options.toastId!==t);return}if(t==null||WF(t))zo.forEach(a=>{a.removeToast(t)});else if(t&&("containerId"in t||"id"in t)){let a=zo.get(t.containerId);a?a.removeToast(t.id):zo.forEach(s=>{s.removeToast(t.id)})}}var t6=(t={})=>{zo.forEach(a=>{a.props.limit&&(!t.containerId||a.id===t.containerId)&&a.clearQueue()})};function a6(t,a){YF(t)&&(iw()||Ug.push({content:t,options:a}),zo.forEach(s=>{s.buildToast(t,a)}))}function rw(t,a){zo.forEach(s=>{(a==null||!(a!=null&&a.containerId)||a?.containerId===s.id)&&s.toggle(t,a?.id)})}function s6(t){return Ub.add(t),()=>{Ub.delete(t)}}function n6(t){return t&&(uu(t.toastId)||ax(t.toastId))?t.toastId:nw()}function yu(t,a){return a6(t,a),a.toastId}function Pp(t,a){return{...a,type:a&&a.type||t,toastId:n6(a)}}function Hp(t){return(a,s)=>yu(a,Pp(t,s))}function Cs(t,a){return yu(t,Pp("default",a))}Cs.loading=(t,a)=>yu(t,Pp("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...a}));function i6(t,{pending:a,error:s,success:i},o){let l;a&&(l=uu(a)?Cs.loading(a,o):Cs.loading(a.render,{...o,...a}));let d={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},u=(p,m,b)=>{if(m==null){Cs.dismiss(l);return}let v={type:p,...d,...o,data:b},x=uu(m)?{render:m}:m;return l?Cs.update(l,{...v,...x}):Cs(x.render,{...v,...x}),b},A=sw(t)?t():t;return A.then(p=>u("success",i,p)).catch(p=>u("error",s,p)),A}Cs.promise=i6;Cs.success=Hp("success");Cs.info=Hp("info");Cs.error=Hp("error");Cs.warning=Hp("warning");Cs.warn=Cs.warning;Cs.dark=(t,a)=>yu(t,Pp("default",{theme:"dark",...a}));function r6(t){e6(t)}Cs.dismiss=r6;Cs.clearWaitingQueue=t6;Cs.isActive=ZF;Cs.update=(t,a={})=>{let s=XF(t,a);if(s){let{props:i,content:o}=s,l={delay:100,...i,...a,toastId:a.toastId||t,updateId:nw()};l.toastId!==t&&(l.staleId=t);let d=l.render||o;delete l.render,yu(d,l)}};Cs.done=t=>{Cs.update(t,{progress:1})};Cs.onChange=s6;Cs.play=t=>rw(!0,t);Cs.pause=t=>rw(!1,t);const o6=()=>{const t=$i(),[a,s]=w.useState(null),[i,o]=w.useState(!0),[l,d]=w.useState(""),[u,A]=w.useState(""),[p,m]=w.useState("view"),[b,v]=w.useState({first_name:"",last_name:"",email:"",phone:"",location:"",avatar_url:""}),[x,C]=w.useState(null),[D,S]=w.useState(""),[_,N]=w.useState(0),[O,L]=w.useState(!1),[te,G]=w.useState(""),[X,U]=w.useState(!1),[E,Y]=w.useState({x:50,y:50,size:200}),[T,Q]=w.useState(!1),[q,ne]=w.useState({x:0,y:0}),R=An.useRef(null),z=An.useRef(null),ee=An.useRef(!1),le=()=>{if(!("geolocation"in navigator)){Cs.error("Geolocation not supported");return}navigator.geolocation.getCurrentPosition(async oe=>{try{const{latitude:K,longitude:Ne}=oe.coords,ut=(await(await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${K}&lon=${Ne}`)).json())?.display_name||`${K.toFixed(4)}, ${Ne.toFixed(4)}`;v(Ge=>({...Ge,location:ut}))}catch{v(K=>({...K,location:`${oe.coords.latitude.toFixed(4)}, ${oe.coords.longitude.toFixed(4)}`}))}},()=>{Cs.error("Unable to get location")})};w.useEffect(()=>{ee.current=!0;const oe=async()=>{try{o(!0),d("");const K=JSON.parse(sessionStorage.getItem("user")||"{}");if(console.log("Session user:",K),!K.id){d("User not found. Please log in again."),setTimeout(()=>t("/login"),2e3);return}console.log("Fetching profile for user_id:",K.id);const Ne=await fetch(`/buildhub/backend/api/homeowner/get_profile.php?user_id=${K.id}`,{method:"GET",headers:{"Content-Type":"application/json"},credentials:"include"});if(!Ne.ok)throw new Error("Failed to fetch user data");const Ee=await Ne.json();if(!Ee.success)throw new Error(Ee.message||"Failed to fetch user data");s(Ee.data),v({first_name:Ee.data.first_name||"",last_name:Ee.data.last_name||"",email:Ee.data.email||"",phone:Ee.data.phone||"",location:Ee.data.location||"",avatar_url:Ee.data.avatar_url||""}),Ee.data.avatar_url&&S(Ee.data.avatar_url)}catch(K){ee.current&&(console.error("Error fetching user data:",K),Cs.error("Unable to load profile data."),d("Failed to load profile data. Please try again later."))}finally{ee.current&&o(!1)}};return ee.current&&oe(),()=>{ee.current=!1}},[t]);const Be=oe=>{const{name:K,value:Ne}=oe.target;v(Ee=>({...Ee,[K]:Ne}))},$=oe=>{const K=oe.target.files[0];if(!K)return;if(!["image/jpeg","image/png","image/gif","image/webp"].includes(K.type)){d("Please select a valid image file (JPEG, PNG, GIF, WEBP)");return}if(K.size>5*1024*1024){d("Image size should be less than 5MB");return}const Ee=new FileReader;Ee.onloadend=()=>{G(Ee.result||""),U(!0),Y({x:50,y:50,size:200})},Ee.readAsDataURL(K),d("")},ue=oe=>{Q(!0);const K=z.current?.getBoundingClientRect();K&&(ne({x:oe.clientX-K.left-E.x,y:oe.clientY-K.top-E.y}),oe.preventDefault())},k=oe=>{if(!T)return;const K=z.current?.getBoundingClientRect();if(!K)return;const Ne=Math.max(0,Math.min(oe.clientX-K.left-q.x,K.width-E.size)),Ee=Math.max(0,Math.min(oe.clientY-K.top-q.y,K.height-E.size));Y(st=>({...st,x:Ne,y:Ee}))},I=()=>Q(!1),H=async()=>{try{const oe=R.current,K=z.current;if(!oe||!K)return;const Ne=K.getBoundingClientRect(),Ee=oe.getBoundingClientRect(),st=oe.naturalWidth/Ee.width,ut=oe.naturalHeight/Ee.height,Ge=Ee.left-Ne.left,_e=Ee.top-Ne.top,Et=Math.max(0,(E.x-Ge)*st),Mt=Math.max(0,(E.y-_e)*ut),Ze=E.size*Math.max(st,ut),Je=document.createElement("canvas"),mt=256;Je.width=mt,Je.height=mt;const ve=Je.getContext("2d");ve.imageSmoothingQuality="high",ve.drawImage(oe,Et,Mt,Ze,Ze,0,0,mt,mt);const et=Je.toDataURL("image/png");S(et),Je.toBlob(Oe=>{if(!Oe)return;const kt=new File([Oe],"avatar.png",{type:"image/png"});C(kt)},"image/png",.92),U(!1),Cs.success("Image cropped")}catch{Cs.error("Failed to crop image")}},re=()=>{U(!1),G("")},J=async oe=>{oe.preventDefault();try{o(!0),d(""),A("");let K=b.avatar_url;if(x){L(!0);const ut=new FormData;ut.append("avatar",x),ut.append("user_id",a.id);const Ge=await fetch("/buildhub/backend/api/upload_avatar.php",{method:"POST",body:ut,credentials:"include"});if(!Ge.ok)throw new Error("Failed to upload profile picture");const _e=await Ge.json();if(!_e.success)throw new Error(_e.message||"Failed to upload profile picture");K=_e.avatar_url,L(!1),N(100),setTimeout(()=>N(0),1e3)}const Ne=await fetch("/buildhub/backend/api/homeowner/update_profile.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:a.id,first_name:b.first_name,last_name:b.last_name,phone:b.phone,location:b.location,avatar_url:K}),credentials:"include"});if(!Ne.ok){const ut=await Ne.json().catch(()=>({}));throw new Error(ut.message||"Failed to update profile")}const Ee=await Ne.json();if(!Ee.success)throw new Error(Ee.message||"Failed to update profile");const st=JSON.parse(sessionStorage.getItem("user")||"{}");sessionStorage.setItem("user",JSON.stringify({...st,...Ee.data,avatar_url:K})),A("Profile updated successfully!"),Cs.success("Profile updated successfully!"),s(Ee.data),v({first_name:Ee.data.first_name||"",last_name:Ee.data.last_name||"",email:Ee.data.email||"",phone:Ee.data.phone||"",location:Ee.data.location||"",avatar_url:K||Ee.data.avatar_url||""}),m("view"),t("/homeowner-dashboard",{replace:!0})}catch(K){console.error("Error updating profile:",K);const Ne=K.message||"Failed to update profile. Please try again later.";d(Ne),Cs.error(Ne)}finally{o(!1),L(!1)}},V=()=>{m("view")};return i&&!a?e.jsx("div",{className:"profile-container",children:e.jsx("div",{className:"profile-card",children:e.jsx("div",{className:"loading-spinner",children:"Loading..."})})}):e.jsxs("div",{children:[e.jsx("div",{style:{padding:"10px 12px"},children:e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>t(-1),title:"Back",children:" Back"})}),e.jsxs("div",{className:"profile-container",children:[e.jsxs("div",{className:"profile-header",style:{background:"#eef2ff",border:"1px solid #e0e7ff",borderRadius:12,padding:"16px 18px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{children:[e.jsx("h1",{style:{margin:0,color:"#1e40af"},children:"My Profile"}),e.jsx("p",{style:{margin:"6px 0 0 0",color:"#475569"},children:"Manage your account and personal information"})]}),p==="view"?e.jsx("button",{className:"btn btn-primary",onClick:()=>m("edit"),style:{background:"#2563eb",borderColor:"#2563eb"},children:"Edit"}):e.jsx("button",{className:"btn btn-secondary",onClick:()=>m("view"),children:"Back"})]}),e.jsxs("div",{className:"profile-card",style:{border:"1px solid #e5e7eb",borderRadius:12},children:[l&&e.jsx("div",{className:"alert alert-error",children:l}),u&&e.jsx("div",{className:"alert alert-success",children:u}),p==="view"?e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"220px 1fr",gap:18},children:[e.jsx("div",{className:"profile-avatar-section",children:e.jsx("div",{className:"avatar-container",style:{width:180,height:180},children:e.jsx("img",{src:b.avatar_url||"/images/logo.png",alt:"Profile Avatar",className:"profile-avatar",style:{width:"100%",height:"100%",objectFit:"cover",borderRadius:"50%",border:"2px solid #e0e7ff"}})})}),e.jsx("div",{children:e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:12},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:12,color:"#64748b"},children:"First name"}),e.jsx("div",{style:{fontWeight:600,color:"#0f172a"},children:b.first_name||"-"})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:12,color:"#64748b"},children:"Last name"}),e.jsx("div",{style:{fontWeight:600,color:"#0f172a"},children:b.last_name||"-"})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:12,color:"#64748b"},children:"Email"}),e.jsx("div",{style:{fontWeight:600,color:"#0f172a"},children:b.email||"-"})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:12,color:"#64748b"},children:"Phone"}),e.jsx("div",{style:{fontWeight:600,color:"#0f172a"},children:b.phone||"-"})]}),e.jsxs("div",{style:{gridColumn:"1 / -1"},children:[e.jsx("div",{style:{fontSize:12,color:"#64748b"},children:"Location"}),e.jsx("div",{style:{fontWeight:600,color:"#0f172a"},children:b.location||"-"})]})]})})]}):e.jsxs("form",{onSubmit:J,children:[e.jsxs("div",{className:"profile-avatar-section",children:[e.jsxs("div",{className:"avatar-container",children:[e.jsx("img",{src:D||b.avatar_url||"/images/logo.png",alt:"Profile Avatar",className:"profile-avatar",style:{width:"100%",height:"100%",objectFit:"cover",borderRadius:"50%"}}),e.jsx("div",{className:"avatar-overlay",children:e.jsx("label",{htmlFor:"avatar-upload",className:"avatar-upload-label",children:"Change Photo"})})]}),e.jsx("input",{type:"file",id:"avatar-upload",className:"avatar-upload",onChange:$,accept:"image/jpeg,image/png,image/gif,image/webp"}),O&&e.jsx("div",{className:"upload-progress",children:e.jsx("div",{className:"progress-bar",style:{width:`${_}%`}})})]}),e.jsxs("div",{className:"form-grid",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"first_name",children:"First Name"}),e.jsx("input",{type:"text",id:"first_name",name:"first_name",value:b.first_name,onChange:Be,required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"last_name",children:"Last Name"}),e.jsx("input",{type:"text",id:"last_name",name:"last_name",value:b.last_name,onChange:Be,required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"email",children:"Email"}),e.jsx("input",{type:"email",id:"email",name:"email",value:b.email,onChange:Be,required:!0,disabled:!0}),e.jsx("small",{children:"Email cannot be changed"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"phone",children:"Phone Number"}),e.jsx("input",{type:"tel",id:"phone",name:"phone",value:b.phone,onChange:Be,placeholder:"Enter your phone number"})]}),e.jsxs("div",{className:"form-group full-width",children:[e.jsx("label",{htmlFor:"location",children:"Location"}),e.jsxs("div",{className:"location-input-group",children:[e.jsx("input",{type:"text",id:"location",name:"location",value:b.location,onChange:Be,placeholder:"Enter your city, state, or address"}),e.jsx("button",{type:"button",className:"btn btn-secondary location-detect-btn",onClick:le,title:"Detect my location",children:" Detect"})]})]})]}),e.jsxs("div",{className:"form-actions",children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:V,children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn btn-primary",disabled:i||O,children:i?"Saving...":"Save Changes"})]})]})]})]}),X&&e.jsx("div",{className:"form-modal",onMouseMove:k,onMouseUp:I,onMouseLeave:I,children:e.jsxs("div",{className:"form-content",style:{maxWidth:"min(820px, 96vw)"},children:[e.jsxs("div",{className:"form-header",children:[e.jsx("h3",{children:"Crop Profile Photo"}),e.jsx("p",{children:"Adjust the square to fit your avatar"})]}),e.jsxs("div",{ref:z,style:{position:"relative",width:"100%",maxHeight:"70vh",border:"1px solid #e5e7eb",background:"#000",overflow:"hidden",borderRadius:8},children:[e.jsx("img",{ref:R,src:te,alt:"Crop source",style:{display:"block",width:"100%",height:"auto",userSelect:"none"}}),e.jsx("div",{role:"button","aria-label":"Crop box",onMouseDown:ue,style:{position:"absolute",left:E.x,top:E.y,width:E.size,height:E.size,border:"2px solid #3b82f6",boxShadow:"0 0 0 9999px rgba(0,0,0,0.35)",cursor:"move",borderRadius:6}})]}),e.jsxs("div",{className:"form-actions",children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:re,children:"Cancel"}),e.jsx("button",{type:"button",className:"btn btn-primary",onClick:H,children:"Crop & Use"})]})]})})]})},l6=({user:t,onLogout:a,onProfileClick:s,className:i="",showRole:o=!0,size:l="medium",position:d="bottom-right"})=>{const[u,A]=w.useState(!1),p=w.useRef(null);w.useEffect(()=>{const S=_=>{p.current&&!p.current.contains(_.target)&&A(!1)};return u&&document.addEventListener("mousedown",S),()=>{document.removeEventListener("mousedown",S)}},[u]);const m=()=>{A(!u)},b=()=>{A(!1)},v=()=>{A(!1),s&&s()},x=()=>{A(!1),a&&a()},C=()=>{if(t?.first_name&&t?.last_name)return`${t.first_name.charAt(0)}${t.last_name.charAt(0)}`.toUpperCase();if(t?.name){const S=t.name.split(" ");return`${S[0]?.[0]||""}${S[1]?.[0]||""}`.toUpperCase()}return t?.email?t.email.charAt(0).toUpperCase():"C"},D=()=>{if(!o)return null;const S=t?.role||"Contractor";return S.charAt(0).toUpperCase()+S.slice(1)};return e.jsxs("div",{ref:p,className:`profile-button-container ${i}`,children:[e.jsxs("button",{className:`profile-button ${l}`,onClick:m,"aria-haspopup":"menu","aria-expanded":u,children:[e.jsx("div",{className:"profile-avatar",children:t?.avatar_url?e.jsx("img",{src:t.avatar_url,alt:"Profile",style:{width:"100%",height:"100%",borderRadius:"50%",objectFit:"cover"}}):C()}),e.jsx("div",{className:"profile-info",children:o&&e.jsx("div",{className:"profile-role",children:D()})}),e.jsx("div",{className:`profile-arrow ${u?"open":""}`,children:""})]}),e.jsx(c6,{isOpen:u,onClose:b,user:t,position:d,onProfileSetup:v,onLogout:x})]})},c6=({isOpen:t,onClose:a,user:s,position:i,onProfileSetup:o,onLogout:l})=>{const d=w.useRef(null);return w.useEffect(()=>{const u=A=>{d.current&&!d.current.contains(A.target)&&a()};return t&&document.addEventListener("mousedown",u),()=>{document.removeEventListener("mousedown",u)}},[t,a]),t?e.jsx("div",{ref:d,className:`profile-popup ${i}`,children:e.jsxs("div",{className:"profile-popup-content",children:[e.jsxs("div",{className:"profile-popup-header",children:[e.jsx("div",{className:"profile-popup-avatar",children:s?.avatar_url?e.jsx("img",{src:s.avatar_url,alt:"Profile",style:{width:"100%",height:"100%",borderRadius:"50%",objectFit:"cover"}}):s?.first_name?.charAt(0)+s?.last_name?.charAt(0)}),e.jsxs("div",{className:"profile-popup-info",children:[e.jsxs("div",{className:"profile-popup-name",children:[s?.first_name," ",s?.last_name]}),e.jsx("div",{className:"profile-popup-role",children:s?.role?.charAt(0).toUpperCase()+s?.role?.slice(1)})]})]}),e.jsx("div",{className:"profile-popup-divider"}),e.jsxs("div",{className:"profile-popup-menu",children:[e.jsxs("button",{className:"profile-popup-item",onClick:o,children:[e.jsx("span",{className:"profile-popup-icon",children:""}),e.jsx("span",{children:"Profile Settings"})]}),e.jsxs("button",{className:"profile-popup-item logout",onClick:l,children:[e.jsx("span",{className:"profile-popup-icon",children:""}),e.jsx("span",{children:"Logout"})]})]})]})}):null},ow=({size:t="medium",className:a=""})=>{const s={small:"seal-small",medium:"seal-medium",large:"seal-large"};return e.jsx("div",{className:`buildhub-seal ${s[t]} ${a}`,children:e.jsx("div",{className:"seal-container",children:e.jsx("div",{className:"seal-border",children:e.jsxs("div",{className:"seal-inner",children:[e.jsx("div",{className:"seal-text",children:"BUILDHUB ESTIMATION"}),e.jsx("div",{className:"seal-icon",children:e.jsxs("div",{className:"building-icon",children:[e.jsx("div",{className:"building-pediment"}),e.jsx("div",{className:"building-frieze"}),e.jsxs("div",{className:"building-columns",children:[e.jsx("div",{className:"column"}),e.jsx("div",{className:"column"}),e.jsx("div",{className:"column"}),e.jsx("div",{className:"column"}),e.jsx("div",{className:"column"})]}),e.jsx("div",{className:"building-base"})]})})]})})})})},d6=({projectId:t,contractorId:a,onPhotosCaptured:s,onClose:i})=>{const o=Xn(),l=w.useRef(null),d=w.useRef(null),u=w.useRef(null),[A,p]=w.useState(!1),[m,b]=w.useState([]),[v,x]=w.useState(null),[C,D]=w.useState(!1),[S,_]=w.useState(null),[N,O]=w.useState("environment"),[L,te]=w.useState(!1),[G,X]=w.useState({});w.useEffect(()=>(U(),E(),()=>{S&&S.getTracks().forEach(k=>k.stop())}),[N]);const U=async()=>{try{S&&S.getTracks().forEach(I=>I.stop());const k=await navigator.mediaDevices.getUserMedia({video:{facingMode:N,width:{ideal:1920},height:{ideal:1080}},audio:!1});_(k),l.current&&(l.current.srcObject=k)}catch(k){console.error("Camera initialization error:",k),o.error("Unable to access camera. Please check permissions.")}},E=()=>{if(!navigator.geolocation){o.error("Geolocation is not supported by this browser");return}D(!0),o.info(" Forcing high-accuracy GPS satellites (this may take 30-60 seconds)...");let k=null,I=0;const H=5,re=100,J=()=>{I++,navigator.geolocation.getCurrentPosition(async V=>{const{latitude:oe,longitude:K,accuracy:Ne,altitude:Ee,heading:st,speed:ut}=V.coords;console.log(`GPS Attempt ${I}:`,{latitude:oe,longitude:K,accuracy:Ne,altitude:Ee,heading:st,speed:ut,timestamp:V.timestamp});const Ge=Ne<=re,_e=oe>=8&&oe<=13&&K>=74&&K<=78;if(Ge&&_e)try{const Et=await T(oe,K),Mt={latitude:oe,longitude:K,accuracy:Ne,altitude:Ee,heading:st,speed:ut,placeName:Et,timestamp:new Date().toISOString(),captureTime:new Date(V.timestamp).toISOString(),attempts:I};x(Mt),D(!1),o.success(` High-accuracy GPS location captured: ${Et} (${Math.round(Ne)}m accuracy)`)}catch(Et){console.error("Error getting place name:",Et);const Mt={latitude:oe,longitude:K,accuracy:Ne,altitude:Ee,heading:st,speed:ut,placeName:`${oe.toFixed(6)}, ${K.toFixed(6)}`,timestamp:new Date().toISOString(),captureTime:new Date(V.timestamp).toISOString(),attempts:I};x(Mt),D(!1),o.success(` GPS coordinates captured: ${oe.toFixed(6)}, ${K.toFixed(6)} (${Math.round(Ne)}m)`)}else(!k||Ne<k.accuracy)&&(k={latitude:oe,longitude:K,accuracy:Ne,altitude:Ee,heading:st,speed:ut,timestamp:V.timestamp,attempts:I},Ne>re&&o.warning(` GPS accuracy: ${Math.round(Ne)}m (trying to improve...)`),_e||o.warning(" Location seems outside Kerala region (trying to improve...)"),I<H?setTimeout(()=>{o.info(` GPS attempt ${I+1}/${H} - seeking better accuracy...`),J()},3e3):k?Y(k):(D(!1),o.error(" Could not get accurate GPS location after multiple attempts")))},V=>{if(console.error(`GPS Attempt ${I} failed:`,V),I<H)setTimeout(()=>{o.warning(` GPS attempt ${I} failed, trying again (${I+1}/${H})...`),J()},2e3);else{D(!1);let oe=" GPS location failed after multiple attempts. ";switch(V.code){case V.PERMISSION_DENIED:oe+="Please allow location access and ensure GPS is enabled on your device.";break;case V.POSITION_UNAVAILABLE:oe+="GPS satellites not available. Try moving to an open area with clear sky view.";break;case V.TIMEOUT:oe+="GPS timeout. Try moving to an area with better satellite reception.";break;default:oe+="Please check your GPS settings and try again.";break}o.error(oe)}},{enableHighAccuracy:!0,timeout:3e4,maximumAge:0})};J()},Y=async k=>{try{const I=await T(k.latitude,k.longitude),H={latitude:k.latitude,longitude:k.longitude,accuracy:k.accuracy,altitude:k.altitude,heading:k.heading,speed:k.speed,placeName:I,timestamp:new Date().toISOString(),captureTime:new Date(k.timestamp).toISOString(),attempts:k.attempts};x(H),D(!1),k.accuracy<=100?o.success(` Best GPS location: ${I} (${Math.round(k.accuracy)}m)`):o.warning(` Using best available GPS: ${I} (${Math.round(k.accuracy)}m accuracy - may not be precise)`)}catch(I){console.error("Error processing final location:",I);const H={latitude:k.latitude,longitude:k.longitude,accuracy:k.accuracy,altitude:k.altitude,heading:k.heading,speed:k.speed,placeName:`${k.latitude.toFixed(6)}, ${k.longitude.toFixed(6)}`,timestamp:new Date().toISOString(),captureTime:new Date(k.timestamp).toISOString(),attempts:k.attempts};x(H),D(!1),o.warning(` GPS coordinates: ${k.latitude.toFixed(6)}, ${k.longitude.toFixed(6)} (${Math.round(k.accuracy)}m)`)}},T=async(k,I)=>{try{const re=((V,oe)=>V>=8.2&&V<=12.8&&oe>=74.8&&oe<=77.4)(k,I);let J=null;try{const V=`https://nominatim.openstreetmap.org/reverse?format=json&lat=${k}&lon=${I}&zoom=16&addressdetails=1&accept-language=en&countrycodes=in`,oe=await fetch(V,{headers:{"User-Agent":"BuildHub-GeoPhoto/1.0 (Kerala Location Service)"}});if(oe.ok){const K=await oe.json();if(K&&K.address){const Ne=K.address;if(re){const Ee=Q(Ne,k,I);Ee&&(J=Ee)}J||(J=q(Ne))}}}catch(V){console.log("Nominatim geocoding failed:",V)}if(!J||J.includes("Edathal")||J.length<10)try{const V=`https://nominatim.openstreetmap.org/reverse?format=json&lat=${k}&lon=${I}&zoom=14&addressdetails=1&accept-language=en&countrycodes=in&extratags=1`,oe=await fetch(V,{headers:{"User-Agent":"BuildHub-GeoPhoto-Alt/1.0"}});if(oe.ok){const K=await oe.json();if(K&&K.address){const Ne=re?Q(K.address,k,I):q(K.address);Ne&&Ne!==J&&(J=Ne)}}}catch(V){console.log("Alternative geocoding failed:",V)}if(re){const V=ne(k,I);V&&J?J.toLowerCase().includes(V.district.toLowerCase())||(J=`${J}, ${V.district} District, Kerala`):V&&(J=`${V.area}, ${V.district} District, Kerala`)}if(J)return J=R(J),J.length>80&&(J=J.substring(0,77)+"..."),J;if(re){const V=ne(k,I);if(V)return`${V.area}, ${V.district} District, Kerala`}return`${k.toFixed(6)}, ${I.toFixed(6)}`}catch(H){return console.error("All geocoding services failed:",H),`${k.toFixed(6)}, ${I.toFixed(6)}`}},Q=(k,I,H)=>{const re=[];k.road&&re.push(k.road);const J=k.village||k.town||k.city||k.municipality||k.suburb||k.neighbourhood;J&&re.push(J),(k.county||k.state_district)&&re.push(k.county||k.state_district);let V=k.state_district||k.county;if(!V||!V.toLowerCase().includes("district")){const oe=ne(I,H);oe&&(V=oe.district+" District")}return V&&re.push(V),k.state&&k.state.toLowerCase().includes("kerala")&&re.push("Kerala"),re.length>0?re.join(", "):null},q=k=>{const I=[];return k.house_number&&k.road?I.push(`${k.house_number} ${k.road}`):k.road&&I.push(k.road),(k.neighbourhood||k.suburb||k.residential)&&I.push(k.neighbourhood||k.suburb||k.residential),(k.city||k.town||k.village||k.municipality)&&I.push(k.city||k.town||k.village||k.municipality),k.state&&I.push(k.state),I.length>0?I.join(", "):null},ne=(k,I)=>{const H=[{district:"Kottayam",bounds:{minLat:9.3,maxLat:10,minLng:76.2,maxLng:76.9},areas:["Kottayam Town","Changanassery","Pala","Ettumanoor","Vaikom","Ponkunnam","Thodupuzha"]},{district:"Ernakulam",bounds:{minLat:9.8,maxLat:10.3,minLng:76,maxLng:76.8},areas:["Kochi","Ernakulam","Aluva","Perumbavoor","Muvattupuzha"]},{district:"Thiruvananthapuram",bounds:{minLat:8.2,maxLat:8.9,minLng:76.8,maxLng:77.4},areas:["Thiruvananthapuram","Neyyattinkara","Attingal","Varkala"]},{district:"Kollam",bounds:{minLat:8.7,maxLat:9.2,minLng:76.4,maxLng:77},areas:["Kollam","Karunagappally","Punalur","Paravur"]},{district:"Pathanamthitta",bounds:{minLat:9.1,maxLat:9.7,minLng:76.6,maxLng:77.2},areas:["Pathanamthitta","Adoor","Thiruvalla","Mallappally"]},{district:"Alappuzha",bounds:{minLat:9.4,maxLat:9.9,minLng:76.2,maxLng:76.7},areas:["Alappuzha","Cherthala","Kayamkulam","Mavelikkara"]},{district:"Idukki",bounds:{minLat:9.2,maxLat:10.3,minLng:76.7,maxLng:77.5},areas:["Thodupuzha","Munnar","Devikulam","Udumbanchola"]},{district:"Thrissur",bounds:{minLat:10.2,maxLat:10.8,minLng:75.9,maxLng:76.8},areas:["Thrissur","Chalakudy","Kodungallur","Irinjalakuda"]},{district:"Palakkad",bounds:{minLat:10.4,maxLat:11.2,minLng:76.2,maxLng:77},areas:["Palakkad","Ottappalam","Chittur","Mannarkkad"]},{district:"Malappuram",bounds:{minLat:10.9,maxLat:11.5,minLng:75.8,maxLng:76.4},areas:["Malappuram","Manjeri","Perinthalmanna","Tirur"]},{district:"Kozhikode",bounds:{minLat:11,maxLat:11.6,minLng:75.5,maxLng:76.2},areas:["Kozhikode","Vadakara","Koyilandy","Feroke"]},{district:"Wayanad",bounds:{minLat:11.6,maxLat:12,minLng:75.8,maxLng:76.5},areas:["Kalpetta","Mananthavady","Sulthan Bathery"]},{district:"Kannur",bounds:{minLat:11.8,maxLat:12.4,minLng:75,maxLng:75.8},areas:["Kannur","Thalassery","Payyanur","Iritty"]},{district:"Kasaragod",bounds:{minLat:12,maxLat:12.8,minLng:74.8,maxLng:75.4},areas:["Kasaragod","Kanhangad","Nileshwar","Uppala"]}],re={lat:9.6,lng:76.7};if(Math.sqrt(Math.pow(k-re.lat,2)+Math.pow(I-re.lng,2))<.1)return{district:"Kottayam",area:"Ponkunnam"};for(const V of H){const oe=V.bounds;if(k>=oe.minLat&&k<=oe.maxLat&&I>=oe.minLng&&I<=oe.maxLng){let K=V.areas[0];return V.district==="Kottayam"&&(I>76.6?K="Ponkunnam":k<9.5?K="Changanassery":k>9.7?K="Vaikom":K="Kottayam Town"),{district:V.district,area:K}}}return null},R=k=>k.replace(/,\s*,/g,",").replace(/^,\s*/,"").replace(/,\s*$/,"").replace(/\s+/g," ").trim(),z=()=>{if(!l.current||!d.current||!v){if(!v){o.error("Please wait for location to be captured first");return}o.error("Camera not ready");return}if(!v.latitude||!v.longitude){o.error("GPS coordinates not available. Please wait for location to be captured.");return}console.log("Capturing photo with location:",{latitude:v.latitude,longitude:v.longitude,placeName:v.placeName,accuracy:v.accuracy});const k=l.current,I=d.current,H=I.getContext("2d");I.width=k.videoWidth,I.height=k.videoHeight,H.drawImage(k,0,0,I.width,I.height),ee(H,I.width,I.height),I.toBlob(re=>{if(re){const J=Date.now(),V={...v,capturedAt:new Date().toISOString(),deviceInfo:{userAgent:navigator.userAgent,platform:navigator.platform,language:navigator.language}},oe={id:J,blob:re,url:URL.createObjectURL(re),location:V,timestamp:new Date().toISOString(),filename:`geo_photo_${J}_${v.latitude.toFixed(6)}_${v.longitude.toFixed(6)}.jpg`};b(Ne=>[...Ne,oe]),o.success(` Photo captured with GPS location: ${v.latitude.toFixed(6)}, ${v.longitude.toFixed(6)}`);const K=document.createElement("div");K.className="capture-flash",k.parentElement.appendChild(K),setTimeout(()=>{K.parentElement&&K.parentElement.removeChild(K)},300)}},"image/jpeg",.95)},ee=(k,I,H)=>{k.fillStyle="rgba(0, 0, 0, 0.85)",k.fillRect(0,H-160,I,160),k.fillStyle="rgba(255, 255, 255, 0.4)",k.fillRect(0,H-160,I,3),k.fillStyle="white",k.textAlign="left";const J=15;let V=H-160+20;k.font="bold 16px Arial",k.fillText(` ${v.placeName}`,J,V),V+=25,k.font="bold 18px Arial",k.fillStyle="#00FF00",k.fillText(` LAT: ${v.latitude.toFixed(6)}`,J,V),V+=22,k.fillStyle="#00FFFF",k.fillText(` LNG: ${v.longitude.toFixed(6)}`,J,V),V+=25,k.font="13px Arial",k.fillStyle="#FFFF00";const oe=` GPS Accuracy: ${Math.round(v.accuracy)}m`;k.fillText(oe,J,V),V+=18,k.fillStyle="white";const K=new Date(v.timestamp).toLocaleString("en-IN",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"});k.fillText(` ${K}`,J,V),v.altitude!==null&&v.altitude!==void 0&&(k.fillStyle="#87CEEB",k.fillText(` Alt: ${Math.round(v.altitude)}m`,I-150,H-160+45));const Ne=200,Ee=50,st=I-Ne-10,ut=H-160+10;k.fillStyle="rgba(255, 255, 255, 0.2)",k.fillRect(st,ut,Ne,Ee),k.font="bold 12px Arial",k.fillStyle="#FFFFFF",k.textAlign="center",k.fillText("GPS COORDINATES",st+Ne/2,ut+15),k.font="bold 11px Courier New",k.fillStyle="#00FF00",k.fillText(`${v.latitude.toFixed(6)}`,st+Ne/2,ut+30),k.fillStyle="#00FFFF",k.fillText(`${v.longitude.toFixed(6)}`,st+Ne/2,ut+43),k.font="11px Arial",k.fillStyle="rgba(255, 255, 255, 0.8)",k.textAlign="right",k.fillText("BuildHub Geo Photo",I-J,H-8),k.textAlign="left"},le=k=>{Array.from(k.target.files).forEach(H=>{if(H.type.startsWith("image/")){const J={id:Date.now()+Math.random(),blob:H,url:URL.createObjectURL(H),location:v||{placeName:"Location not available"},timestamp:new Date().toISOString(),filename:H.name,isUploaded:!0};b(V=>[...V,J])}}),k.target.value=""},Be=k=>{b(I=>{const H=I.filter(J=>J.id!==k),re=I.find(J=>J.id===k);return re&&URL.revokeObjectURL(re.url),H})},$=()=>{O(k=>k==="user"?"environment":"user")},ue=async()=>{if(m.length===0){o.error("No photos to upload");return}if(!t||!a){o.error("Project or contractor information missing");return}te(!0);const k=[];try{for(let re=0;re<m.length;re++){const J=m[re];X(oe=>({...oe,[J.id]:0}));const V=new FormData;V.append("photo",J.blob,J.filename),V.append("project_id",t),V.append("contractor_id",a),V.append("location_data",JSON.stringify(J.location)),V.append("timestamp",J.timestamp);try{const K=await(await fetch("/buildhub/backend/api/contractor/upload_geo_photo.php",{method:"POST",credentials:"include",body:V})).json();K.success?(k.push({success:!0,photoId:J.id,data:K.data}),X(Ne=>({...Ne,[J.id]:100}))):(k.push({success:!1,photoId:J.id,error:K.message}),X(Ne=>({...Ne,[J.id]:-1})))}catch(oe){console.error("Upload error for photo:",J.id,oe),k.push({success:!1,photoId:J.id,error:"Network error"}),X(K=>({...K,[J.id]:-1}))}}const I=k.filter(re=>re.success).length,H=k.filter(re=>!re.success).length;I>0&&(o.success(`${I} photo(s) uploaded successfully and sent to homeowner`),s&&s(k.filter(re=>re.success)),b([])),H>0&&o.error(`${H} photo(s) failed to upload`)}catch(I){console.error("Upload process error:",I),o.error("Failed to upload photos")}finally{te(!1),X({})}};return e.jsxs("div",{className:"geo-photo-capture",children:[e.jsxs("div",{className:"capture-header",children:[e.jsx("h3",{children:" Geo-Located Photo Capture"}),e.jsx("button",{className:"close-btn",onClick:i,children:""})]}),e.jsx("div",{className:"location-status",children:C?e.jsxs("div",{className:"location-loading",children:[e.jsx("div",{className:"spinner"}),e.jsx("span",{children:" Getting high-accuracy GPS location (may take 30-60 seconds)..."})]}):v?e.jsxs("div",{className:`location-info ${v.accuracy<=100?"success":v.accuracy<=1e3?"warning":"error"}`,children:[e.jsxs("div",{className:"location-details",children:[e.jsxs("div",{className:"place-name",children:[" ",v.placeName]}),e.jsxs("div",{className:"coordinates",children:[e.jsx("strong",{children:"Lat:"})," ",v.latitude.toFixed(6)," | ",e.jsx("strong",{children:"Lng:"})," ",v.longitude.toFixed(6),""]}),e.jsxs("div",{className:"location-metadata",children:[e.jsxs("span",{className:`accuracy ${v.accuracy<=100?"good":v.accuracy<=1e3?"fair":"poor"}`,children:[" ",Math.round(v.accuracy),"m accuracy",v.accuracy>1e3&&" ( POOR - May be inaccurate)",v.accuracy<=100&&" ( GOOD)",v.accuracy>100&&v.accuracy<=1e3&&" ( FAIR)"]}),v.altitude&&e.jsxs("span",{className:"altitude",children:[" ",Math.round(v.altitude),"m altitude"]}),v.attempts&&e.jsxs("span",{className:"attempts",children:[" GPS attempts: ",v.attempts]})]}),e.jsxs("div",{className:"capture-time",children:[" Captured: ",new Date(v.timestamp).toLocaleString("en-IN")]}),v.accuracy>1e3&&e.jsxs("div",{className:"accuracy-warning",children:[" ",e.jsx("strong",{children:"Warning:"})," GPS accuracy is poor (",Math.round(v.accuracy/1e3),"km). This location may be incorrect. Try moving to an open area and refresh."]})]}),e.jsx("button",{className:"refresh-location-btn",onClick:E,children:" Get Better GPS"})]}):e.jsxs("div",{className:"location-info error",children:[e.jsx("span",{children:" GPS location not available"}),e.jsx("button",{className:"retry-location-btn",onClick:E,children:" Get GPS Location"})]})}),e.jsxs("div",{className:"camera-section",children:[e.jsxs("div",{className:"camera-container",children:[e.jsx("video",{ref:l,autoPlay:!0,playsInline:!0,muted:!0,className:"camera-video"}),e.jsx("canvas",{ref:d,style:{display:"none"}}),e.jsxs("div",{className:"camera-controls",children:[e.jsx("button",{className:"camera-switch-btn",onClick:$,title:"Switch Camera",children:""}),e.jsx("button",{className:"capture-btn",onClick:z,disabled:!v||C,title:"Capture Photo",children:""}),e.jsx("button",{className:"upload-file-btn",onClick:()=>u.current?.click(),title:"Upload from Gallery",children:""})]})]}),e.jsx("input",{ref:u,type:"file",accept:"image/*",multiple:!0,onChange:le,style:{display:"none"}})]}),m.length>0&&e.jsxs("div",{className:"captured-photos",children:[e.jsxs("div",{className:"photos-header",children:[e.jsxs("h4",{children:[" Captured Photos (",m.length,")"]}),e.jsx("button",{className:"upload-all-btn",onClick:ue,disabled:L,children:L?" Uploading...":" Send to Homeowner"})]}),e.jsx("div",{className:"photos-grid",children:m.map(k=>e.jsxs("div",{className:"photo-item",children:[e.jsxs("div",{className:"photo-preview",children:[e.jsx("img",{src:k.url,alt:"Captured with GPS overlay"}),e.jsx("button",{className:"remove-photo-btn",onClick:()=>Be(k.id),disabled:L,children:""})]}),e.jsxs("div",{className:"photo-info",children:[e.jsxs("div",{className:"photo-location",children:[" ",k.location.placeName||"Location unavailable"]}),e.jsxs("div",{className:"photo-coordinates",children:[" LAT: ",k.location.latitude?.toFixed(6)," | LNG: ",k.location.longitude?.toFixed(6),""]}),e.jsxs("div",{className:"photo-accuracy",children:[" ",Math.round(k.location.accuracy||0),"m accuracy"]}),e.jsxs("div",{className:"photo-timestamp",children:[" ",new Date(k.timestamp).toLocaleString()]}),G[k.id]!==void 0&&e.jsx("div",{className:"upload-progress",children:G[k.id]===-1?e.jsx("span",{className:"upload-error",children:" Failed"}):G[k.id]===100?e.jsx("span",{className:"upload-success",children:" Uploaded"}):e.jsx("div",{className:"progress-bar",children:e.jsx("div",{className:"progress-fill",style:{width:`${G[k.id]}%`}})})})]})]},k.id))})]}),e.jsxs("div",{className:"capture-instructions",children:[e.jsx("h4",{children:" GPS Location Troubleshooting Guide"}),v&&v.accuracy>1e3&&e.jsxs("div",{style:{marginBottom:"20px",padding:"15px",background:"#fff3cd",borderRadius:"8px",border:"1px solid #ffc107"},children:[e.jsx("h5",{style:{margin:"0 0 10px 0",color:"#856404"},children:" Poor GPS Accuracy Detected"}),e.jsxs("p",{style:{margin:"0",color:"#856404"},children:["Your current GPS accuracy is ",Math.round(v.accuracy/1e3),"km, which means the location could be",Math.round(v.accuracy/1e3),"km away from your actual position. Follow the steps below to improve accuracy."]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"15px",marginBottom:"20px"},children:[e.jsxs("div",{style:{padding:"15px",background:"#e7f3ff",borderRadius:"8px",border:"1px solid #b8daff"},children:[e.jsx("h5",{style:{margin:"0 0 10px 0",color:"#004085"},children:" For Best GPS Accuracy:"}),e.jsxs("ul",{style:{margin:"0",paddingLeft:"20px",color:"#004085"},children:[e.jsx("li",{children:"Go outside to an open area"}),e.jsx("li",{children:"Ensure clear view of the sky"}),e.jsx("li",{children:"Stay away from tall buildings"}),e.jsx("li",{children:"Wait 30-60 seconds for GPS satellites"}),e.jsx("li",{children:"Keep your device still during capture"})]})]}),e.jsxs("div",{style:{padding:"15px",background:"#f8d7da",borderRadius:"8px",border:"1px solid #f5c6cb"},children:[e.jsx("h5",{style:{margin:"0 0 10px 0",color:"#721c24"},children:" Avoid These Locations:"}),e.jsxs("ul",{style:{margin:"0",paddingLeft:"20px",color:"#721c24"},children:[e.jsx("li",{children:"Inside buildings or rooms"}),e.jsx("li",{children:"Under bridges or overhangs"}),e.jsx("li",{children:"Near tall buildings or trees"}),e.jsx("li",{children:"In basements or underground"}),e.jsx("li",{children:"During heavy rain or storms"})]})]})]}),e.jsx("h5",{children:" Device Settings Check:"}),e.jsxs("ul",{children:[e.jsxs("li",{children:[" ",e.jsx("strong",{children:"Enable GPS:"})," Ensure GPS/Location Services are ON in device settings"]}),e.jsxs("li",{children:[" ",e.jsx("strong",{children:"High Accuracy Mode:"}),' Set location mode to "High Accuracy" or "GPS + Networks"']}),e.jsxs("li",{children:[" ",e.jsx("strong",{children:"Browser Permissions:"})," Allow location access for this website"]}),e.jsxs("li",{children:[" ",e.jsx("strong",{children:"Network:"})," Good mobile/WiFi signal helps initial GPS lock"]})]}),e.jsx("h5",{children:" Accuracy Guidelines:"}),e.jsxs("ul",{children:[e.jsxs("li",{children:[" ",e.jsx("strong",{children:"Excellent (5-20m):"})," Perfect for construction photos"]}),e.jsxs("li",{children:[" ",e.jsx("strong",{children:"Good (20-100m):"})," Acceptable for most purposes"]}),e.jsxs("li",{children:[" ",e.jsx("strong",{children:"Fair (100-1000m):"})," May be inaccurate, try to improve"]}),e.jsxs("li",{children:[" ",e.jsx("strong",{children:"Poor (1km+):"})," Likely wrong location, must improve"]})]}),e.jsxs("div",{style:{marginTop:"15px",padding:"12px",background:"#d1ecf1",borderRadius:"6px",fontSize:"0.85rem"},children:[e.jsx("strong",{children:" For Ponkunnam, Kottayam Users:"}),e.jsx("p",{style:{margin:"8px 0 0 0"},children:`If you're in Ponkunnam area and seeing locations like "Edathala, Aluva" (50km away), your device is using cell tower location instead of GPS. Move to an open area and wait for true GPS satellites to lock onto your actual location.`})]})]})]})},A6=({contractorId:t,projectId:a,homeownerId:s,userRole:i="contractor"})=>{const[o,l]=w.useState([]),[d,u]=w.useState(!0),[A,p]=w.useState(null),[m,b]=w.useState(!1),[v,x]=w.useState(null);w.useEffect(()=>{C()},[t,a,s,i]);const C=async()=>{try{u(!0);let L;i==="homeowner"?(L=`http://localhost/buildhub/backend/api/homeowner/get_progress_updates.php?homeowner_id=${s}`,a&&(L+=`&project_id=${a}`)):(L=`http://localhost/buildhub/backend/api/contractor/get_progress_updates.php?contractor_id=${t}`,a&&(L+=`&project_id=${a}`));const G=await(await fetch(L,{credentials:"include"})).json();G.success?l(G.data.progress_updates||[]):console.error("Failed to load progress updates:",G.message)}catch(L){console.error("Error loading progress updates:",L)}finally{u(!1)}},D=L=>{x(L),b(!0)},S=()=>{b(!1),x(null)},_=L=>({Foundation:"",Structure:"",Brickwork:"",Roofing:"",Electrical:"",Plumbing:"",Finishing:"",Other:""})[L]||"",N=L=>{switch(L){case"Completed":return"#28a745";case"In Progress":return"#ffc107";case"Not Started":return"#6c757d";default:return"#6c757d"}},O=L=>new Date(L).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return d?e.jsxs("div",{className:"progress-timeline-loading",children:[e.jsx("div",{className:"loading-spinner"}),e.jsx("p",{children:"Loading progress updates..."})]}):o.length===0?e.jsx("div",{className:"progress-timeline-empty",children:e.jsxs("div",{className:"empty-state",children:[e.jsx("h3",{children:"No Progress Updates Yet"}),e.jsx("p",{children:i==="contractor"?"Start submitting progress updates to keep homeowners informed.":"Your contractor hasn't submitted any progress updates yet."})]})}):e.jsxs("div",{className:"progress-timeline",children:[e.jsxs("div",{className:"timeline-header",children:[e.jsx("h3",{children:"Construction Progress Timeline"}),e.jsxs("p",{children:[o.length," update",o.length!==1?"s":""]})]}),e.jsx("div",{className:"timeline-container",children:o.map((L,te)=>e.jsxs("div",{className:"timeline-item",children:[e.jsxs("div",{className:"timeline-marker",children:[e.jsx("div",{className:"timeline-dot",style:{backgroundColor:N(L.stage_status)},children:_(L.stage_name)}),te<o.length-1&&e.jsx("div",{className:"timeline-line"})]}),e.jsx("div",{className:"timeline-content",children:e.jsxs("div",{className:"update-card",children:[e.jsxs("div",{className:"update-header",children:[e.jsxs("div",{className:"update-title",children:[e.jsx("h4",{children:L.stage_name}),e.jsx("span",{className:`status-badge ${L.status_class}`,style:{backgroundColor:N(L.stage_status)},children:L.stage_status})]}),e.jsxs("div",{className:"update-meta",children:[e.jsx("span",{className:"update-date",children:O(L.created_at)}),i==="homeowner"&&e.jsxs("span",{className:"contractor-name",children:["by ",L.contractor_first_name," ",L.contractor_last_name]})]})]}),e.jsx("div",{className:"update-progress",children:e.jsxs("div",{className:"progress-bar-container",children:[e.jsx("div",{className:"progress-bar",children:e.jsx("div",{className:"progress-fill",style:{width:`${L.completion_percentage}%`,backgroundColor:N(L.stage_status)}})}),e.jsxs("span",{className:"progress-text",children:[L.completion_percentage,"%"]})]})}),L.remarks&&e.jsxs("div",{className:"update-remarks",children:[e.jsx("h5",{children:"Work Description:"}),e.jsx("p",{children:L.remarks})]}),L.delay_reason&&e.jsxs("div",{className:"update-delay",children:[e.jsx("h5",{children:" Delay Reported:"}),e.jsxs("p",{children:[e.jsx("strong",{children:"Reason:"})," ",L.delay_reason]}),L.delay_description&&e.jsxs("p",{children:[e.jsx("strong",{children:"Details:"})," ",L.delay_description]})]}),L.photos&&L.photos.length>0&&e.jsxs("div",{className:"update-photos",children:[e.jsxs("h5",{children:["Progress Photos (",L.photos.length,")"]}),e.jsx("div",{className:"photo-gallery",children:L.photo_urls.map((G,X)=>e.jsx("div",{className:"photo-thumbnail-container",children:e.jsx("img",{src:G,alt:`Progress photo ${X+1}`,className:"photo-thumbnail",onClick:()=>D(G),loading:"lazy"})},X))})]}),!L.location_verified&&L.latitude&&e.jsx("div",{className:"location-warning",children:" Location verification pending"})]})})]},L.id))}),m&&v&&e.jsx("div",{className:"photo-modal-overlay",onClick:S,children:e.jsxs("div",{className:"photo-modal",children:[e.jsx("button",{className:"photo-modal-close",onClick:S,children:""}),e.jsx("img",{src:v,alt:"Progress photo",className:"photo-modal-image"})]})})]})},u6=({projectId:t,stageName:a,contractorId:s,completionPercentage:i=0,workDescription:o="",onPaymentRequested:l,showStageSelector:d=!1})=>{const u=Xn(),[A,p]=w.useState(null),[m,b]=w.useState(!1),[v,x]=w.useState(!0),[C,D]=w.useState(!1),[S,_]=w.useState(a||""),[N,O]=w.useState([]),[L,te]=w.useState({requested_amount:"",work_description:"",contractor_notes:"",completion_percentage:i}),[G,X]=w.useState({});w.useEffect(()=>{d&&t&&U()},[d,t]),w.useEffect(()=>{t&&(S||a)&&E()},[t,S,a]),w.useEffect(()=>{te(q=>({...q,work_description:o,completion_percentage:i}))},[o,i]);const U=async()=>{try{const ne=await(await fetch(`/buildhub/backend/api/contractor/get_available_stages.php?project_id=${t}`,{credentials:"include"})).json();ne.success?O(ne.data.stages||[]):(console.warn("Failed to load available stages:",ne.message),O([{stage_name:"Foundation",typical_percentage:20},{stage_name:"Structure",typical_percentage:25},{stage_name:"Brickwork",typical_percentage:15},{stage_name:"Roofing",typical_percentage:15},{stage_name:"Electrical",typical_percentage:8},{stage_name:"Plumbing",typical_percentage:7},{stage_name:"Finishing",typical_percentage:10}]))}catch(q){console.error("Error loading available stages:",q),O([{stage_name:"Foundation",typical_percentage:20},{stage_name:"Structure",typical_percentage:25},{stage_name:"Brickwork",typical_percentage:15},{stage_name:"Roofing",typical_percentage:15},{stage_name:"Electrical",typical_percentage:8},{stage_name:"Plumbing",typical_percentage:7},{stage_name:"Finishing",typical_percentage:10}])}},E=async()=>{const q=S||a;if(q)try{x(!0);const R=await(await fetch(`/buildhub/backend/api/contractor/get_stage_payment_info.php?project_id=${t}&stage_name=${encodeURIComponent(q)}`,{credentials:"include"})).json();R.success?(p(R.data),R.data.can_request&&R.data.suggested_amount>0&&te(z=>({...z,requested_amount:R.data.suggested_amount.toString()}))):u.error("Failed to load payment information: "+R.message)}catch(ne){console.error("Error loading payment info:",ne),u.error("Error loading payment information")}finally{x(!1)}},Y=q=>{const{name:ne,value:R}=q.target;te(z=>({...z,[ne]:R})),G[ne]&&X(z=>({...z,[ne]:null}))},T=()=>{const q={};return(!L.requested_amount||parseFloat(L.requested_amount)<=0)&&(q.requested_amount="Please enter a valid amount"),parseFloat(L.requested_amount)>A?.project_info?.remaining_amount&&(q.requested_amount="Amount exceeds remaining project budget"),(!L.work_description||L.work_description.trim().length<20)&&(q.work_description="Work description must be at least 20 characters"),(L.completion_percentage<0||L.completion_percentage>100)&&(q.completion_percentage="Completion percentage must be between 0-100"),X(q),Object.keys(q).length===0},Q=async q=>{if(q.preventDefault(),!!T()){b(!0);try{const R=await(await fetch("/buildhub/backend/api/contractor/submit_stage_payment_request.php",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({project_id:t,stage_name:a,requested_amount:parseFloat(L.requested_amount),work_description:L.work_description,completion_percentage:parseFloat(L.completion_percentage),contractor_notes:L.contractor_notes})})).json();R.success?(u.success("Payment request submitted successfully!"),te({requested_amount:"",work_description:"",contractor_notes:"",completion_percentage:0}),D(!1),await E(),l&&l(R.data)):u.error("Failed to submit payment request: "+R.message)}catch(ne){console.error("Error submitting payment request:",ne),u.error("Error submitting payment request")}finally{b(!1)}}};return v?e.jsx("div",{className:"stage-payment-loading",children:e.jsx("div",{className:"loading-spinner",children:" Loading payment information..."})}):A?e.jsxs("div",{className:"stage-payment-request",children:[d&&e.jsxs("div",{className:"stage-selector-section",children:[e.jsx("h6",{children:" Select Construction Stage"}),e.jsxs("div",{className:"stage-selector-container",children:[e.jsxs("select",{value:S,onChange:q=>_(q.target.value),className:"stage-select",children:[e.jsx("option",{value:"",children:"Choose a construction stage..."}),N.map(q=>e.jsxs("option",{value:q.stage_name,disabled:q.has_existing_request&&q.existing_status!=="rejected",children:[q.stage_name," (",q.typical_percentage,"%)",q.has_existing_request&&` - ${q.existing_status.toUpperCase()}`]},q.id))]}),S&&e.jsx("div",{className:"selected-stage-info",children:(()=>{const q=N.find(ne=>ne.stage_name===S);return q?e.jsxs("div",{className:"stage-details",children:[e.jsxs("span",{children:[e.jsx("strong",{children:"Stage:"})," ",q.stage_name]}),e.jsxs("span",{children:[e.jsx("strong",{children:"Typical %:"})," ",q.typical_percentage,"%"]}),q.description&&e.jsxs("span",{children:[e.jsx("strong",{children:"Description:"})," ",q.description]}),q.has_existing_request&&e.jsxs("span",{className:`existing-status ${q.existing_status}`,children:[e.jsx("strong",{children:"Status:"})," ",q.existing_status.toUpperCase(),q.existing_status==="rejected"&&" (Can request again)"]})]}):null})()})]})]}),(S||!d&&a)&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"payment-summary",children:[e.jsx("h6",{children:" Project Payment Summary"}),e.jsxs("div",{className:"summary-grid",children:[e.jsxs("div",{className:"summary-item",children:[e.jsx("span",{className:"label",children:"Total Project Cost:"}),e.jsxs("span",{className:"value",children:["",A.project_info.total_cost.toLocaleString()]})]}),e.jsxs("div",{className:"summary-item",children:[e.jsx("span",{className:"label",children:"Amount Paid:"}),e.jsxs("span",{className:"value paid",children:["",A.project_info.total_paid.toLocaleString()]})]}),e.jsxs("div",{className:"summary-item",children:[e.jsx("span",{className:"label",children:"Pending Approval:"}),e.jsxs("span",{className:"value pending",children:["",A.project_info.total_pending.toLocaleString()]})]}),e.jsxs("div",{className:"summary-item",children:[e.jsx("span",{className:"label",children:"Remaining Budget:"}),e.jsxs("span",{className:"value remaining",children:["",A.project_info.remaining_amount.toLocaleString()]})]})]}),e.jsxs("div",{className:"payment-progress-bar",children:[e.jsxs("div",{className:"progress-segments",children:[e.jsx("div",{className:"progress-segment paid",style:{width:`${A.payment_summary.paid_percentage}%`},title:`Paid: ${A.payment_summary.paid_percentage.toFixed(1)}%`}),e.jsx("div",{className:"progress-segment pending",style:{width:`${A.payment_summary.pending_percentage}%`},title:`Pending: ${A.payment_summary.pending_percentage.toFixed(1)}%`}),e.jsx("div",{className:"progress-segment remaining",style:{width:`${A.payment_summary.remaining_percentage}%`},title:`Remaining: ${A.payment_summary.remaining_percentage.toFixed(1)}%`})]}),e.jsxs("div",{className:"progress-labels",children:[e.jsxs("span",{className:"paid-label",children:["Paid (",A.payment_summary.paid_percentage.toFixed(1),"%)"]}),e.jsxs("span",{className:"pending-label",children:["Pending (",A.payment_summary.pending_percentage.toFixed(1),"%)"]}),e.jsxs("span",{className:"remaining-label",children:["Remaining (",A.payment_summary.remaining_percentage.toFixed(1),"%)"]})]})]})]}),A.stage_info&&e.jsxs("div",{className:"stage-info",children:[e.jsxs("h6",{children:[" ",a," Stage Payment"]}),e.jsxs("div",{className:"stage-details",children:[e.jsx("div",{className:"stage-description",children:A.stage_info.description}),e.jsxs("div",{className:"stage-typical",children:["Typical percentage for this stage: ",e.jsxs("strong",{children:[A.stage_info.typical_percentage,"%"]}),"(",A.suggested_amount.toLocaleString(),")"]})]})]}),A.existing_requests.length>0&&e.jsxs("div",{className:"existing-requests",children:[e.jsxs("h6",{children:[" Previous Requests for ",a]}),e.jsx("div",{className:"requests-list",children:A.existing_requests.map(q=>e.jsxs("div",{className:`request-item ${q.status}`,children:[e.jsxs("div",{className:"request-header",children:[e.jsxs("span",{className:"request-amount",children:["",parseFloat(q.requested_amount).toLocaleString()]}),e.jsx("span",{className:`request-status ${q.status}`,children:q.status.charAt(0).toUpperCase()+q.status.slice(1)})]}),e.jsxs("div",{className:"request-details",children:[e.jsxs("div",{className:"request-date",children:["Requested: ",new Date(q.request_date).toLocaleDateString()]}),e.jsxs("div",{className:"request-percentage",children:[q.completion_percentage,"% complete, ",q.percentage_of_total.toFixed(1),"% of total cost"]})]}),q.rejection_reason&&e.jsxs("div",{className:"rejection-reason",children:[e.jsx("strong",{children:"Rejection reason:"})," ",q.rejection_reason]})]},q.id))})]}),A.can_request?e.jsx("div",{className:"payment-request-form",children:C?e.jsxs("form",{onSubmit:Q,className:"payment-form",children:[e.jsxs("h6",{children:[" Request Payment for ",a," Stage"]}),e.jsxs("div",{className:`form-group ${G.requested_amount?"error":""}`,children:[e.jsx("label",{htmlFor:"requested_amount",children:"Requested Amount () *"}),e.jsx("input",{type:"number",id:"requested_amount",name:"requested_amount",value:L.requested_amount,onChange:Y,min:"1",step:"0.01",placeholder:"Enter amount",required:!0}),A.suggested_amount>0&&e.jsxs("div",{className:"field-info",children:["Suggested: ",A.suggested_amount.toLocaleString(),"(",A.suggested_percentage,"% of total cost)"]}),G.requested_amount&&e.jsx("div",{className:"field-error",children:G.requested_amount})]}),e.jsxs("div",{className:`form-group ${G.completion_percentage?"error":""}`,children:[e.jsx("label",{htmlFor:"completion_percentage",children:"Stage Completion Percentage *"}),e.jsx("input",{type:"number",id:"completion_percentage",name:"completion_percentage",value:L.completion_percentage,onChange:Y,min:"0",max:"100",step:"0.1",required:!0}),e.jsxs("div",{className:"field-info",children:["Percentage of ",a," stage completed"]}),G.completion_percentage&&e.jsx("div",{className:"field-error",children:G.completion_percentage})]}),e.jsxs("div",{className:`form-group ${G.work_description?"error":""}`,children:[e.jsx("label",{htmlFor:"work_description",children:"Work Description *"}),e.jsx("textarea",{id:"work_description",name:"work_description",value:L.work_description,onChange:Y,placeholder:"Describe the work completed for this stage...",rows:"4",required:!0}),e.jsxs("div",{className:"field-info",children:[L.work_description.length,"/1000 characters (minimum 20 required)"]}),G.work_description&&e.jsx("div",{className:"field-error",children:G.work_description})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"contractor_notes",children:"Additional Notes"}),e.jsx("textarea",{id:"contractor_notes",name:"contractor_notes",value:L.contractor_notes,onChange:Y,placeholder:"Any additional notes for the homeowner...",rows:"2"}),e.jsx("div",{className:"field-info",children:"Optional notes about the payment request"})]}),e.jsxs("div",{className:"form-actions",children:[e.jsx("button",{type:"button",onClick:()=>D(!1),className:"cancel-btn",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:m,className:"submit-btn",children:m?"Submitting...":"Submit Payment Request"})]})]}):e.jsxs("div",{className:"request-prompt",children:[e.jsxs("button",{type:"button",onClick:()=>D(!0),className:"request-payment-btn",children:[" Request Payment for ",a," Stage"]}),e.jsxs("div",{className:"request-info",children:["Complete the ",a," stage work and request payment from the homeowner"]})]})}):e.jsx("div",{className:"cannot-request",children:e.jsxs("div",{className:"info-message",children:[" Cannot request payment for ",S||a," stage.",A.existing_requests.some(q=>q.status==="pending")?"There is already a pending request for this stage.":"Please complete the stage work first."]})})]}),d&&!S&&e.jsx("div",{className:"no-stage-selected",children:e.jsx("div",{className:"info-message",children:" Please select a construction stage to request payment"})})]}):e.jsx("div",{className:"stage-payment-error",children:e.jsx("div",{className:"error-message",children:"Unable to load payment information"})})},h6=({contractorId:t,onUpdateSubmitted:a})=>{const s=Xn(),i=w.useRef(null),[o,l]=w.useState([]),[d,u]=w.useState(""),[A,p]=w.useState("daily"),[m,b]=w.useState(!1),[v,x]=w.useState(!0),[C,D]=w.useState({latitude:null,longitude:null}),[S,_]=w.useState(!1),[N,O]=w.useState({}),[L,te]=w.useState({}),[G,X]=w.useState(!1),[U,E]=w.useState({update_date:new Date().toISOString().split("T")[0],construction_stage:"",work_done_today:"",incremental_completion_percentage:"",working_hours:"8",materials_used:"",weather_condition:"",site_issues:"",labour_data:[]}),[Y,T]=w.useState({week_start_date:"",week_end_date:"",stages_worked:[],delays_and_reasons:"",weekly_remarks:""}),[Q,q]=w.useState({report_month:new Date().getMonth()+1,report_year:new Date().getFullYear(),planned_progress_percentage:"",milestones_achieved:[],delay_explanation:"",contractor_remarks:""}),[ne,R]=w.useState([]),[z,ee]=w.useState({errors:[],warnings:[]}),[le,Be]=w.useState([]),[$,ue]=w.useState(!1),[k,I]=w.useState(!1),[H,re]=w.useState([]),[J,V]=w.useState(null),[oe,K]=w.useState(!1),[Ne,Ee]=w.useState([]),st=["Foundation","Structure","Brickwork","Roofing","Electrical","Plumbing","Finishing","Other"],ut=["Sunny","Cloudy","Rainy","Stormy","Foggy","Hot","Cold","Windy"],Ge=["excellent","good","average","poor","needs_improvement"],_e={selectedProject:{required:!0,message:"Please select a project"},update_date:{required:!0,validate:ye=>{const Ce=new Date(ye),Ve=new Date,gt=7,Qt=1,ja=Ve-Ce,va=Math.ceil(ja/(1e3*60*60*24));return va>gt?`Date cannot be more than ${gt} days in the past`:va<-Qt?`Date cannot be more than ${Qt} day in the future`:null}},construction_stage:{required:!0,message:"Please select a construction stage"},work_done_today:{required:!0,minLength:10,maxLength:1e3,validate:ye=>ye.length<10?"Work description must be at least 10 characters":ye.length>1e3?"Work description cannot exceed 1000 characters":/[a-zA-Z]/.test(ye)?null:"Work description must contain letters"},incremental_completion_percentage:{required:!0,validate:ye=>{const Ce=parseFloat(ye);return isNaN(Ce)?"Completion percentage must be a valid number":Ce<0?"Completion percentage cannot be negative":Ce>100?"Completion percentage cannot exceed 100%":Ce>20?"Daily incremental progress should typically not exceed 20%":null}},working_hours:{required:!0,validate:ye=>{const Ce=parseFloat(ye);return isNaN(Ce)?"Working hours must be a valid number":Ce<0?"Working hours cannot be negative":Ce>16?"Working hours cannot exceed 16 hours per day":Ce<4&&Ce>0?"Working hours should be at least 4 hours if work was done":null}},weather_condition:{required:!0,message:"Please select weather condition"},materials_used:{validate:ye=>ye&&ye.length>500?"Materials description cannot exceed 500 characters":null},site_issues:{validate:ye=>ye&&ye.length>1e3?"Site issues description cannot exceed 1000 characters":null},labour_worker_type:{required:!0,message:"Please select worker type"},labour_worker_count:{required:!0,validate:ye=>{const Ce=parseInt(ye);return isNaN(Ce)?"Worker count must be a valid number":Ce<0?"Worker count cannot be negative":Ce>100?"Worker count seems too high (max 100)":null}},labour_hours_worked:{required:!0,validate:ye=>{const Ce=parseFloat(ye);return isNaN(Ce)?"Hours worked must be a valid number":Ce<0?"Hours worked cannot be negative":Ce>12?"Regular hours cannot exceed 12 hours":null}},labour_overtime_hours:{validate:ye=>{const Ce=parseFloat(ye);return isNaN(Ce)?"Overtime hours must be a valid number":Ce<0?"Overtime hours cannot be negative":Ce>8?"Overtime hours cannot exceed 8 hours":null}},labour_absent_count:{validate:ye=>{const Ce=parseInt(ye);return isNaN(Ce)?"Absent count must be a valid number":Ce<0?"Absent count cannot be negative":Ce>50?"Absent count seems too high":null}},labour_productivity_rating:{validate:ye=>{const Ce=parseInt(ye);return isNaN(Ce)?"Productivity rating must be a valid number":Ce<1||Ce>5?"Productivity rating must be between 1 and 5":null}},labour_remarks:{validate:ye=>ye&&ye.length>500?"Remarks cannot exceed 500 characters":null},week_start_date:{required:!0,validate:(ye,Ce)=>{const Ve=new Date(ye),gt=new Date(Ce.week_end_date);return gt&&Ve>=gt?"Start date must be before end date":Ve.getDay()!==1?"Week should typically start on Monday":null}},week_end_date:{required:!0,validate:(ye,Ce)=>{const Ve=new Date(Ce.week_start_date),gt=new Date(ye);return Ve&&gt<=Ve?"End date must be after start date":(gt-Ve)/(1e3*60*60*24)>7?"Week duration cannot exceed 7 days":null}},stages_worked:{required:!0,validate:ye=>!Array.isArray(ye)||ye.length===0?"Please select at least one construction stage":null},weekly_remarks:{required:!0,minLength:20,validate:ye=>ye.length<20?"Weekly remarks must be at least 20 characters":ye.length>2e3?"Weekly remarks cannot exceed 2000 characters":null},delays_and_reasons:{validate:ye=>ye&&ye.length>1e3?"Delays description cannot exceed 1000 characters":null},report_month:{required:!0,validate:ye=>{const Ce=parseInt(ye);return isNaN(Ce)||Ce<1||Ce>12?"Please select a valid month":null}},report_year:{required:!0,validate:ye=>{const Ce=parseInt(ye),Ve=new Date().getFullYear();return isNaN(Ce)?"Year must be a valid number":Ce<2020?"Year cannot be before 2020":Ce>Ve+1?`Year cannot be after ${Ve+1}`:null}},planned_progress_percentage:{required:!0,validate:ye=>{const Ce=parseFloat(ye);return isNaN(Ce)?"Planned progress must be a valid number":Ce<0?"Planned progress cannot be negative":Ce>100?"Planned progress cannot exceed 100%":null}},contractor_remarks:{required:!0,minLength:50,validate:ye=>ye.length<50?"Contractor remarks must be at least 50 characters":ye.length>3e3?"Contractor remarks cannot exceed 3000 characters":null},delay_explanation:{validate:ye=>ye&&ye.length>2e3?"Delay explanation cannot exceed 2000 characters":null}},Et=(ye,Ce,Ve={})=>{const gt=_e[ye];return gt?gt.required&&(!Ce||typeof Ce=="string"&&Ce.trim()==="")?gt.message||`${ye} is required`:gt.validate?gt.validate(Ce,Ve):null:null},Mt=ye=>{const Ce={};if(ye==="daily"){const Ve=Et("selectedProject",d);Ve&&(Ce.selectedProject=Ve),Object.keys(U).forEach(gt=>{const Qt=Et(gt,U[gt],U);Qt&&(Ce[gt]=Qt)}),U.labour_data.forEach((gt,Qt)=>{Object.keys(gt).forEach(ja=>{const va=Et(`labour_${ja}`,gt[ja]);va&&(Ce.labour_data||(Ce.labour_data={}),Ce.labour_data[Qt]||(Ce.labour_data[Qt]={}),Ce.labour_data[Qt][ja]=va)}),gt.worker_count>0&&gt.hours_worked===0&&(Ce.labour_data||(Ce.labour_data={}),Ce.labour_data[Qt]||(Ce.labour_data[Qt]={}),Ce.labour_data[Qt].hours_worked="Hours worked required when worker count > 0")}),U.incremental_completion_percentage>=10&&ne.length===0&&(Ce.progress_photos="Photos are mandatory for completion claims of 10% or more")}else if(ye==="weekly"){const Ve=Et("selectedProject",d);Ve&&(Ce.selectedProject=Ve),Object.keys(Y).forEach(gt=>{const Qt=Et(gt,Y[gt],Y);Qt&&(Ce[gt]=Qt)})}else if(ye==="monthly"){const Ve=Et("selectedProject",d);Ve&&(Ce.selectedProject=Ve),Object.keys(Q).forEach(gt=>{const Qt=Et(gt,Q[gt],Q);Qt&&(Ce[gt]=Qt)})}return Ce},Ze=(ye,Ce,Ve={})=>{const gt=Et(ye,Ce,Ve);return O(Qt=>({...Qt,[ye]:gt})),te(Qt=>({...Qt,[ye]:!0})),gt},Je=ye=>{te(Ce=>({...Ce,[ye]:!0}))},mt=ye=>L[ye]?N[ye]?"error":"success":"",ve=ye=>!L[ye]||!N[ye]?null:e.jsxs("div",{className:"field-error",children:[e.jsx("span",{className:"error-icon",children:""}),e.jsx("span",{className:"error-message",children:N[ye]})]}),et=["January","February","March","April","May","June","July","August","September","October","November","December"];w.useEffect(()=>{kt()},[t]),w.useEffect(()=>{xt()},[]),w.useEffect(()=>{Ee([])},[]),w.useEffect(()=>{if(A==="weekly"&&!Y.week_start_date){const ye=new Date,Ce=new Date(ye.setDate(ye.getDate()-ye.getDay()+1)),Ve=new Date(Ce);Ve.setDate(Ce.getDate()+6),T(gt=>({...gt,week_start_date:Ce.toISOString().split("T")[0],week_end_date:Ve.toISOString().split("T")[0]}))}},[A]),w.useEffect(()=>{U.construction_stage?(Oe(U.construction_stage),U.labour_data.length>0&&(E(ye=>({...ye,labour_data:[]})),s.info(`Cleared labour entries due to construction stage change. Please add workers for ${U.construction_stage} phase.`))):(V(null),Ee([]))},[U.construction_stage]);const Oe=async ye=>{try{K(!0);const Ve=await(await fetch(`/buildhub/backend/api/contractor/get_phase_workers.php?phase=${encodeURIComponent(ye)}`,{credentials:"include"})).json();if(Ve.success){V(Ve.data);const gt=Object.values(Ve.data.available_workers).map(Qt=>Qt.requirement.type_name);gt.includes("Other")||gt.push("Other"),console.log(`Phase ${ye} worker types:`,gt),Ee(gt),s.success(`Loaded ${gt.length} worker types for ${ye} phase`)}else console.warn("Failed to load phase workers:",Ve.message),V(null),Ee(["Mason","Helper","Other"]),s.error(`Failed to load phase workers: ${Ve.message}`)}catch(Ce){console.error("Error loading phase workers:",Ce),V(null),Ee(["Mason","Helper","Other"]),s.error("Error loading phase workers")}finally{K(!1)}},kt=async()=>{try{x(!0);const Ce=await(await fetch(`/buildhub/backend/api/contractor/get_contractor_projects.php?contractor_id=${t}`,{credentials:"include"})).json();Ce.success?l(Ce.data.projects||[]):s.error("Failed to load projects: "+Ce.message)}catch(ye){console.error("Error loading projects:",ye),s.error("Error loading projects")}finally{x(!1)}},xt=()=>{navigator.geolocation&&(_(!0),navigator.geolocation.getCurrentPosition(ye=>{D({latitude:ye.coords.latitude,longitude:ye.coords.longitude}),_(!1)},ye=>{console.warn("Geolocation error:",ye),_(!1)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:3e5}))},lt=ye=>{const{name:Ce,value:Ve}=ye.target;E(gt=>({...gt,[Ce]:Ve})),Ze(Ce,Ve,{...U,[Ce]:Ve})},Ut=ye=>{const{name:Ce,value:Ve}=ye.target;T(gt=>({...gt,[Ce]:Ve})),Ze(Ce,Ve,{...Y,[Ce]:Ve})},_t=ye=>{const{name:Ce,value:Ve}=ye.target;q(gt=>({...gt,[Ce]:Ve})),Ze(Ce,Ve,{...Q,[Ce]:Ve})},Nt=(ye,Ce,Ve)=>{const gt=[...U.labour_data];gt[ye]||(gt[ye]={worker_type:"",worker_count:0,hours_worked:8,overtime_hours:0,absent_count:0,productivity_rating:5,safety_compliance:"good",remarks:""}),gt[ye][Ce]=Ve,E(va=>({...va,labour_data:gt}));const Qt=`labour_${Ce}`,ja=Et(Qt,Ve);O(va=>({...va,[`labour_data_${ye}_${Ce}`]:ja})),te(va=>({...va,[`labour_data_${ye}_${Ce}`]:!0}))},qt=()=>{E(ye=>({...ye,labour_data:[...ye.labour_data,{worker_type:"Helper",worker_count:1,hours_worked:8,overtime_hours:0,absent_count:0,productivity_rating:5,safety_compliance:"good",remarks:""}]}))},Bt=ye=>{E(Ce=>({...Ce,labour_data:Ce.labour_data.filter((Ve,gt)=>gt!==ye)}))},Xt=ye=>{const Ce=Y.stages_worked.includes(ye)?Y.stages_worked.filter(Ve=>Ve!==ye):[...Y.stages_worked,ye];T(Ve=>({...Ve,stages_worked:Ce})),Ze("stages_worked",Ce)},ta=ye=>{const Ce=Q.milestones_achieved.includes(ye)?Q.milestones_achieved.filter(Ve=>Ve!==ye):[...Q.milestones_achieved,ye];q(Ve=>({...Ve,milestones_achieved:Ce}))},ie=ye=>{const Ce=Array.from(ye.target.files),Ve=10,gt=5*1024*1024,Qt=["image/jpeg","image/jpg","image/png","image/webp","image/gif"],ja=[];Ce.length>Ve&&ja.push(`Maximum ${Ve} photos allowed`);const va=[];if(Ce.forEach((Na,Pa)=>{if(!Qt.includes(Na.type.toLowerCase())){ja.push(`${Na.name}: Invalid file type. Only JPG, PNG, WebP, and GIF allowed`);return}if(Na.size>gt){ja.push(`${Na.name}: File too large. Maximum 5MB allowed`);return}if(Na.name.length>100){ja.push(`${Na.name}: Filename too long (max 100 characters)`);return}if(va.findIndex(cs=>cs.name===Na.name)!==-1){ja.push(`${Na.name}: Duplicate filename`);return}va.push(Na)}),ja.length>0){s.error(`Photo validation errors:
${ja.slice(0,3).join(`
`)}${ja.length>3?`
...and more`:""}`),O(Na=>({...Na,progress_photos:ja[0]})),te(Na=>({...Na,progress_photos:!0}));return}O(Na=>{const Pa={...Na};return delete Pa.progress_photos,Pa}),R(va),(parseFloat(U.incremental_completion_percentage)||0)>=10&&va.length===0&&O(Na=>({...Na,progress_photos:"Photos are mandatory for completion claims of 10% or more"}))},at=ye=>{R(Ce=>Ce.filter((Ve,gt)=>gt!==ye))},Ot=ye=>{const Ce=ye.map(Ve=>({id:Ve.data.id,filename:Ve.data.filename,url:`/buildhub/backend/uploads/geo_photos/${Ve.data.filename}`,location:Ve.data.location,timestamp:Ve.data.upload_timestamp}));re(Ve=>[...Ve,...Ce]),s.success(`${ye.length} geo-located photo(s) captured and sent to homeowner`)},Ct=ye=>{re(Ce=>Ce.filter((Ve,gt)=>gt!==ye))},ia=()=>{const ye=Mt("daily");O(ye);const Ce={};Object.keys(U).forEach(gt=>{Ce[gt]=!0}),Ce.selectedProject=!0,U.labour_data.forEach((gt,Qt)=>{Object.keys(gt).forEach(ja=>{Ce[`labour_data_${Qt}_${ja}`]=!0})}),te(Ce);const Ve=Object.keys(ye).length>0;if(Ve){const gt=[];ye.selectedProject&&gt.push(ye.selectedProject),ye.update_date&&gt.push(`Date: ${ye.update_date}`),ye.construction_stage&&gt.push(ye.construction_stage),ye.work_done_today&&gt.push(`Work Description: ${ye.work_done_today}`),ye.incremental_completion_percentage&&gt.push(`Completion %: ${ye.incremental_completion_percentage}`),ye.working_hours&&gt.push(`Working Hours: ${ye.working_hours}`),ye.weather_condition&&gt.push(ye.weather_condition),ye.progress_photos&&gt.push(ye.progress_photos),ye.labour_data&&gt.push("Please fix labour tracking errors"),s.error(`Please fix the following errors:
${gt.slice(0,3).join(`
`)}${gt.length>3?`
...and more`:""}`)}return!Ve},ca=()=>{const ye=Mt("weekly");O(ye);const Ce={};Object.keys(Y).forEach(gt=>{Ce[gt]=!0}),Ce.selectedProject=!0,te(Ce);const Ve=Object.keys(ye).length>0;if(Ve){const gt=Object.values(ye).slice(0,3);s.error(`Please fix the following errors:
${gt.join(`
`)}`)}return!Ve},Za=()=>{const ye=Mt("monthly");O(ye);const Ce={};Object.keys(Q).forEach(gt=>{Ce[gt]=!0}),Ce.selectedProject=!0,te(Ce);const Ve=Object.keys(ye).length>0;if(Ve){const gt=Object.values(ye).slice(0,3);s.error(`Please fix the following errors:
${gt.join(`
`)}`)}return!Ve},os=async ye=>{if(ye.preventDefault(),!!ia()){b(!0);try{const Ce=new FormData;Ce.append("project_id",d),Ce.append("contractor_id",t),Ce.append("update_date",U.update_date),Ce.append("construction_stage",U.construction_stage),Ce.append("work_done_today",U.work_done_today),Ce.append("incremental_completion_percentage",U.incremental_completion_percentage),Ce.append("working_hours",U.working_hours),Ce.append("materials_used",U.materials_used),Ce.append("weather_condition",U.weather_condition),Ce.append("site_issues",U.site_issues),Ce.append("labour_data",JSON.stringify(U.labour_data)),C.latitude&&C.longitude&&(Ce.append("latitude",C.latitude),Ce.append("longitude",C.longitude)),ne.forEach((Qt,ja)=>{Ce.append("progress_photos[]",Qt)});const gt=await(await fetch("http://localhost/buildhub/backend/api/contractor/submit_daily_progress.php",{method:"POST",credentials:"include",body:Ce})).json();gt.success?(s.success("Daily progress update submitted successfully!"),E({update_date:new Date().toISOString().split("T")[0],construction_stage:"",work_done_today:"",incremental_completion_percentage:"",working_hours:"8",materials_used:"",weather_condition:"",site_issues:"",labour_data:[]}),R([]),i.current&&(i.current.value=""),a&&a(gt.data)):s.error("Failed to submit update: "+gt.message)}catch(Ce){console.error("Error submitting daily update:",Ce),s.error("Error submitting daily update")}finally{b(!1)}}},Ba=async ye=>{if(ye.preventDefault(),!!ca()){b(!0);try{const Ve=await(await fetch("http://localhost/buildhub/backend/api/contractor/submit_weekly_summary.php",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({project_id:d,contractor_id:t,...Y})})).json();Ve.success?(s.success("Weekly summary submitted successfully!"),T({week_start_date:"",week_end_date:"",stages_worked:[],delays_and_reasons:"",weekly_remarks:""}),a&&a(Ve.data)):s.error("Failed to submit summary: "+Ve.message)}catch(Ce){console.error("Error submitting weekly summary:",Ce),s.error("Error submitting weekly summary")}finally{b(!1)}}},xa=async ye=>{if(ye.preventDefault(),!!Za()){b(!0);try{const Ve=await(await fetch("http://localhost/buildhub/backend/api/contractor/submit_monthly_report.php",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({project_id:d,contractor_id:t,...Q})})).json();Ve.success?(s.success("Monthly report submitted successfully!"),q({report_month:new Date().getMonth()+1,report_year:new Date().getFullYear(),planned_progress_percentage:"",milestones_achieved:[],delay_explanation:"",contractor_remarks:""}),a&&a(Ve.data)):s.error("Failed to submit report: "+Ve.message)}catch(Ce){console.error("Error submitting monthly report:",Ce),s.error("Error submitting monthly report")}finally{b(!1)}}},Dt=()=>o.find(Ce=>(Ce.id||Ce.project_id)==d)||null;return e.jsxs("div",{className:"enhanced-progress-update",children:[e.jsxs("div",{className:"progress-update-header",children:[e.jsx("h3",{children:"Construction Progress Monitoring System"}),e.jsx("p",{children:"Comprehensive progress tracking with daily updates, weekly summaries, and monthly reports"})]}),e.jsxs("div",{className:"form-group project-selection",children:[e.jsx("label",{htmlFor:"project",children:"Select Project *"}),v?e.jsx("div",{className:"loading-spinner",children:"Loading projects..."}):e.jsxs("div",{className:"project-selection-container",children:[e.jsxs("select",{id:"project",value:d,onChange:ye=>{u(ye.target.value),Ze("selectedProject",ye.target.value)},onBlur:()=>Je("selectedProject"),required:!0,className:`project-select ${mt("selectedProject")}`,children:[e.jsx("option",{value:"",children:"Choose a project..."}),o.map(ye=>{const Ce=ye.id||ye.project_id,Ve=ye.project_name||ye.project_display_name||"Unnamed Project";return e.jsx("option",{value:Ce,children:Ve},Ce)})]}),ve("selectedProject")]})]}),d&&e.jsx("div",{className:"selected-project-info-card",children:(()=>{const ye=Dt();if(!ye)return null;const Ce=ye.structured_data||{},Ve=ye.homeowner_name||Ce.client_name||ye.project_summary?.homeowner_name||"Unknown",gt=ye.status||ye.project_summary?.status_display||"N/A",Qt=ye.project_summary?.contractor_name||"N/A",ja=ye.homeowner_email||"N/A",va=ye.homeowner_phone||Ce.client_contact||"N/A",_a=ye.contractor_email||"N/A",Na=ye.plot_size||Ce.plot_size||"N/A",Pa=ye.built_up_area||Ce.built_up_area||"N/A",ls=ye.floors||Ce.floors||"N/A",cs=ye.location||Ce.project_address||"N/A";return e.jsxs("div",{className:"selected-project-details",children:[e.jsxs("div",{className:"project-info-header",children:[e.jsx("h4",{children:"Selected Project Details"}),e.jsx("div",{className:"project-status-badge",children:gt})]}),e.jsxs("div",{className:"project-participants",children:[e.jsxs("div",{className:"participant",children:[e.jsx("strong",{children:"Homeowner:"})," ",Ve,e.jsx("br",{}),e.jsxs("small",{children:[" ",ja," |  ",va]})]}),e.jsxs("div",{className:"participant",children:[e.jsx("strong",{children:"Contractor:"})," ",Qt,e.jsx("br",{}),e.jsxs("small",{children:[" ",_a]})]})]}),e.jsxs("div",{className:"project-info-grid",children:[e.jsxs("div",{className:"info-card",children:[e.jsx("strong",{children:"Plot Details"}),e.jsxs("div",{children:["Plot Size: ",Na]}),Pa!=="N/A"&&e.jsxs("div",{children:["Built-up Area: ",Pa]}),ls!=="N/A"&&e.jsxs("div",{children:["Floors: ",ls]}),e.jsxs("small",{children:["Style: ",ye.preferred_style||"Not specified"]})]}),e.jsxs("div",{className:"info-card",children:[e.jsx("strong",{children:"Location"}),e.jsx("div",{children:cs}),ye.project_address&&e.jsxs("small",{children:[" GPS: ",ye.project_address]})]}),e.jsxs("div",{className:"info-card",children:[e.jsx("strong",{children:"Budget & Cost"}),e.jsxs("div",{children:["Budget: ",ye.budget_range||"N/A"]}),e.jsxs("div",{children:["Estimate: ",ye.estimate_cost?`${ye.estimate_cost.toLocaleString("en-IN")}`:ye.project_summary?.total_cost_formatted||"N/A"]})]}),e.jsxs("div",{className:"info-card",children:[e.jsx("strong",{children:"Timeline"}),e.jsxs("div",{children:["Requested: ",ye.requested_timeline||"Not specified"]}),e.jsxs("div",{children:["Estimate: ",ye.timeline||ye.project_summary?.timeline||"N/A"]})]}),e.jsxs("div",{className:"info-card",children:[e.jsx("strong",{children:"Progress Status"}),e.jsxs("div",{children:[ye.completion_percentage||ye.latest_progress||0,"% complete"]}),e.jsxs("div",{children:["Completed Stages: ",ye.completed_stages||0]})]}),e.jsxs("div",{className:"info-card",children:[e.jsx("strong",{children:"Update History"}),e.jsxs("div",{children:["Daily: ",ye.daily_updates_count||0," updates"]}),e.jsxs("div",{children:["Weekly: ",ye.weekly_summaries_count||0," summaries"]}),e.jsxs("div",{children:["Monthly: ",ye.monthly_reports_count||0," reports"]}),e.jsxs("small",{children:["Last: ",ye.updated_at||ye.project_summary?.last_activity||"N/A"]})]})]}),e.jsxs("div",{className:"project-overall-progress",children:[e.jsxs("div",{className:"progress-header",children:[e.jsx("strong",{children:"Overall Progress"}),e.jsxs("span",{children:[ye.completion_percentage||ye.latest_progress||0,"%"]})]}),e.jsx("div",{className:"progress-bar-large",children:e.jsx("div",{className:"progress-fill-large",style:{width:`${ye.latest_progress}%`}})})]}),ye.requirements&&e.jsxs("div",{className:"project-requirements-full",children:[e.jsx("strong",{children:"Project Requirements:"}),e.jsx("p",{children:ye.requirements})]}),e.jsx("div",{className:"project-dates",children:e.jsxs("small",{children:[e.jsx("strong",{children:"Request Date:"})," ",ye.request_date_formatted||"N/A"," |",e.jsx("strong",{children:" Estimate Date:"})," ",ye.estimate_date_formatted||"N/A"," |",e.jsx("strong",{children:" Acknowledged:"})," ",ye.acknowledged_date_formatted||"N/A"]})})]})})()}),e.jsxs("div",{className:"section-navigation",children:[e.jsx("button",{className:`section-btn ${A==="daily"?"active":""}`,onClick:()=>p("daily"),children:"Daily Progress Update"}),e.jsx("button",{className:`section-btn ${A==="weekly"?"active":""}`,onClick:()=>p("weekly"),children:"Weekly Progress Summary"}),e.jsx("button",{className:`section-btn ${A==="monthly"?"active":""}`,onClick:()=>p("monthly"),children:"Monthly Progress Report"})]}),A==="daily"&&e.jsxs("form",{onSubmit:os,className:"progress-section daily-section",children:[e.jsx("h4",{children:" Daily Progress Update"}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:`form-group ${mt("update_date")}`,children:[e.jsx("label",{htmlFor:"update_date",children:"Date *"}),e.jsx("input",{type:"date",id:"update_date",name:"update_date",value:U.update_date,onChange:lt,onBlur:()=>Je("update_date"),required:!0,className:mt("update_date")}),ve("update_date")]}),e.jsxs("div",{className:`form-group ${mt("construction_stage")}`,children:[e.jsx("label",{htmlFor:"construction_stage",children:"Construction Stage *"}),e.jsxs("select",{id:"construction_stage",name:"construction_stage",value:U.construction_stage,onChange:lt,onBlur:()=>Je("construction_stage"),required:!0,className:mt("construction_stage"),children:[e.jsx("option",{value:"",children:"Select stage..."}),st.map(ye=>e.jsx("option",{value:ye,children:ye},ye))]}),ve("construction_stage")]})]}),e.jsxs("div",{className:`form-group ${mt("work_done_today")}`,children:[e.jsx("label",{htmlFor:"work_done_today",children:"Work Done Today *"}),e.jsx("textarea",{id:"work_done_today",name:"work_done_today",value:U.work_done_today,onChange:lt,onBlur:()=>Je("work_done_today"),placeholder:"Describe the work completed today in detail... (minimum 10 characters)",rows:"4",required:!0,className:mt("work_done_today"),maxLength:"1000"}),e.jsxs("div",{className:"field-info",children:[U.work_done_today.length,"/1000 characters",U.work_done_today.length<10&&U.work_done_today.length>0&&e.jsx("span",{className:"char-warning",children:" (minimum 10 required)"})]}),ve("work_done_today")]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:`form-group ${mt("incremental_completion_percentage")}`,children:[e.jsx("label",{htmlFor:"incremental_completion_percentage",children:"Incremental Completion % *"}),e.jsxs("div",{className:"percentage-input",children:[e.jsx("input",{type:"number",id:"incremental_completion_percentage",name:"incremental_completion_percentage",value:U.incremental_completion_percentage,onChange:lt,onBlur:()=>Je("incremental_completion_percentage"),min:"0",max:"100",step:"0.1",required:!0,className:mt("incremental_completion_percentage"),placeholder:"0.0"}),e.jsx("span",{className:"percentage-symbol",children:"%"})]}),e.jsx("div",{className:"field-info",children:"Daily progress should typically be 0.5% - 5%"}),ve("incremental_completion_percentage")]}),e.jsxs("div",{className:`form-group ${mt("working_hours")}`,children:[e.jsx("label",{htmlFor:"working_hours",children:"Working Hours *"}),e.jsx("input",{type:"number",id:"working_hours",name:"working_hours",value:U.working_hours,onChange:lt,onBlur:()=>Je("working_hours"),min:"0",max:"16",step:"0.5",className:mt("working_hours"),placeholder:"8.0"}),e.jsx("div",{className:"field-info",children:"Standard: 8 hours, Maximum: 16 hours"}),ve("working_hours")]})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:`form-group ${mt("weather_condition")}`,children:[e.jsx("label",{htmlFor:"weather_condition",children:"Weather Condition *"}),e.jsxs("select",{id:"weather_condition",name:"weather_condition",value:U.weather_condition,onChange:lt,onBlur:()=>Je("weather_condition"),required:!0,className:mt("weather_condition"),children:[e.jsx("option",{value:"",children:"Select weather..."}),ut.map(ye=>e.jsx("option",{value:ye,children:ye},ye))]}),ve("weather_condition")]}),e.jsxs("div",{className:`form-group ${mt("materials_used")}`,children:[e.jsx("label",{htmlFor:"materials_used",children:"Materials Used"}),e.jsx("input",{type:"text",id:"materials_used",name:"materials_used",value:U.materials_used,onChange:lt,onBlur:()=>Je("materials_used"),placeholder:"e.g., Cement bags, Steel bars, Bricks...",className:mt("materials_used"),maxLength:"500"}),e.jsxs("div",{className:"field-info",children:[U.materials_used.length,"/500 characters"]}),ve("materials_used")]})]}),e.jsxs("div",{className:`form-group ${mt("site_issues")}`,children:[e.jsx("label",{htmlFor:"site_issues",children:"Site Issues (if any)"}),e.jsx("textarea",{id:"site_issues",name:"site_issues",value:U.site_issues,onChange:lt,onBlur:()=>Je("site_issues"),placeholder:"Describe any issues encountered at the site...",rows:"3",className:mt("site_issues"),maxLength:"1000"}),e.jsxs("div",{className:"field-info",children:[U.site_issues.length,"/1000 characters"]}),ve("site_issues")]}),e.jsxs("div",{className:"labour-tracking-section",children:[e.jsxs("div",{className:"section-header",children:[e.jsx("h5",{children:" Labour Tracking & Management"}),e.jsx("button",{type:"button",onClick:qt,className:"add-labour-btn",children:"+ Add Worker Type"})]}),U.labour_data.length===0&&e.jsx("div",{className:"no-labour-message",children:e.jsx("p",{children:'No labour entries added yet. Click "Add Worker Type" to start tracking workers.'})}),U.labour_data.map((ye,Ce)=>e.jsxs("div",{className:"labour-entry",children:[e.jsxs("div",{className:"labour-entry-header",children:[e.jsxs("h6",{children:["Worker Entry #",Ce+1]}),e.jsx("button",{type:"button",onClick:()=>Bt(Ce),className:"remove-labour-btn",title:"Remove entry",children:""})]}),e.jsxs("div",{className:"labour-row primary-info",children:[e.jsxs("div",{className:`form-group worker-type-group ${N[`labour_data_${Ce}_worker_type`]?"error":""}`,children:[e.jsx("label",{children:"Worker Type *"}),e.jsxs("select",{value:ye.worker_type,onChange:Ve=>Nt(Ce,"worker_type",Ve.target.value),onBlur:()=>te(Ve=>({...Ve,[`labour_data_${Ce}_worker_type`]:!0})),required:!0,disabled:oe||!U.construction_stage,children:[e.jsx("option",{value:"",children:U.construction_stage?oe?"Loading workers...":"Select Type":"Select construction stage first"}),Ne.map(Ve=>e.jsx("option",{value:Ve,children:Ve},Ve))]}),!U.construction_stage&&e.jsx("div",{className:"field-info",children:" Please select a construction stage first to see relevant worker types"}),oe&&U.construction_stage&&e.jsx("div",{className:"field-info",children:" Loading phase-specific workers..."}),J&&!oe&&U.construction_stage&&e.jsxs("div",{className:"field-info",children:[" Showing ",Ne.length," worker types for ",U.construction_stage," phase"]}),L[`labour_data_${Ce}_worker_type`]&&N[`labour_data_${Ce}_worker_type`]&&e.jsx("div",{className:"field-error",children:e.jsx("span",{className:"error-message",children:N[`labour_data_${Ce}_worker_type`]})})]}),e.jsxs("div",{className:`form-group worker-count-group ${N[`labour_data_${Ce}_worker_count`]?"error":""}`,children:[e.jsx("label",{children:"Worker Count *"}),e.jsx("input",{type:"number",value:ye.worker_count,onChange:Ve=>Nt(Ce,"worker_count",parseInt(Ve.target.value)||0),onBlur:()=>te(Ve=>({...Ve,[`labour_data_${Ce}_worker_count`]:!0})),min:"0",max:"100",placeholder:"0",required:!0}),e.jsx("div",{className:"field-info",children:"Maximum: 100 workers"}),L[`labour_data_${Ce}_worker_count`]&&N[`labour_data_${Ce}_worker_count`]&&e.jsx("div",{className:"field-error",children:e.jsx("span",{className:"error-message",children:N[`labour_data_${Ce}_worker_count`]})})]}),e.jsxs("div",{className:`form-group hours-worked-group ${N[`labour_data_${Ce}_hours_worked`]?"error":""}`,children:[e.jsx("label",{children:"Regular Hours *"}),e.jsx("input",{type:"number",value:ye.hours_worked,onChange:Ve=>Nt(Ce,"hours_worked",parseFloat(Ve.target.value)||0),onBlur:()=>te(Ve=>({...Ve,[`labour_data_${Ce}_hours_worked`]:!0})),min:"0",max:"12",step:"0.5",placeholder:"8.0",required:!0}),e.jsx("div",{className:"field-info",children:"Standard: 8 hours, Max: 12 hours"}),L[`labour_data_${Ce}_hours_worked`]&&N[`labour_data_${Ce}_hours_worked`]&&e.jsx("div",{className:"field-error",children:e.jsx("span",{className:"error-message",children:N[`labour_data_${Ce}_hours_worked`]})})]}),e.jsxs("div",{className:`form-group overtime-group ${N[`labour_data_${Ce}_overtime_hours`]?"error":""}`,children:[e.jsx("label",{children:"Overtime Hours"}),e.jsx("input",{type:"number",value:ye.overtime_hours,onChange:Ve=>Nt(Ce,"overtime_hours",parseFloat(Ve.target.value)||0),onBlur:()=>te(Ve=>({...Ve,[`labour_data_${Ce}_overtime_hours`]:!0})),min:"0",max:"8",step:"0.5",placeholder:"0.0"}),e.jsx("div",{className:"field-info",children:"Maximum: 8 hours (1.5x rate)"}),L[`labour_data_${Ce}_overtime_hours`]&&N[`labour_data_${Ce}_overtime_hours`]&&e.jsx("div",{className:"field-error",children:e.jsx("span",{className:"error-message",children:N[`labour_data_${Ce}_overtime_hours`]})})]}),e.jsxs("div",{className:`form-group absent-group ${N[`labour_data_${Ce}_absent_count`]?"error":""}`,children:[e.jsx("label",{children:"Absent Count"}),e.jsx("input",{type:"number",value:ye.absent_count,onChange:Ve=>Nt(Ce,"absent_count",parseInt(Ve.target.value)||0),onBlur:()=>te(Ve=>({...Ve,[`labour_data_${Ce}_absent_count`]:!0})),min:"0",max:"50",placeholder:"0"}),e.jsx("div",{className:"field-info",children:"Workers who didn't show up"}),L[`labour_data_${Ce}_absent_count`]&&N[`labour_data_${Ce}_absent_count`]&&e.jsx("div",{className:"field-error",children:e.jsx("span",{className:"error-message",children:N[`labour_data_${Ce}_absent_count`]})})]})]}),e.jsxs("div",{className:"labour-row secondary-info",children:[e.jsxs("div",{className:`form-group productivity-group ${N[`labour_data_${Ce}_productivity_rating`]?"error":""}`,children:[e.jsx("label",{children:"Productivity Rating"}),e.jsxs("select",{value:ye.productivity_rating,onChange:Ve=>Nt(Ce,"productivity_rating",parseInt(Ve.target.value)),onBlur:()=>te(Ve=>({...Ve,[`labour_data_${Ce}_productivity_rating`]:!0})),children:[e.jsx("option",{value:1,children:"1 - Poor "}),e.jsx("option",{value:2,children:"2 - Below Average "}),e.jsx("option",{value:3,children:"3 - Average "}),e.jsx("option",{value:4,children:"4 - Good "}),e.jsx("option",{value:5,children:"5 - Excellent "})]}),e.jsx("div",{className:"field-info",children:"Rate work quality and efficiency"}),L[`labour_data_${Ce}_productivity_rating`]&&N[`labour_data_${Ce}_productivity_rating`]&&e.jsx("div",{className:"field-error",children:e.jsx("span",{className:"error-message",children:N[`labour_data_${Ce}_productivity_rating`]})})]}),e.jsxs("div",{className:"form-group safety-group",children:[e.jsx("label",{children:"Safety Compliance"}),e.jsx("select",{value:ye.safety_compliance,onChange:Ve=>Nt(Ce,"safety_compliance",Ve.target.value),onBlur:()=>te(Ve=>({...Ve,[`labour_data_${Ce}_safety_compliance`]:!0})),children:Ge.map(Ve=>e.jsx("option",{value:Ve,children:Ve.replace("_"," ").replace(/\b\w/g,gt=>gt.toUpperCase())},Ve))}),e.jsx("div",{className:"field-info",children:"Safety protocol adherence"})]})]}),e.jsx("div",{className:"labour-row remarks-section",children:e.jsxs("div",{className:`form-group remarks-group ${N[`labour_data_${Ce}_remarks`]?"error":""}`,children:[e.jsx("label",{children:"Remarks & Notes"}),e.jsx("textarea",{value:ye.remarks,onChange:Ve=>Nt(Ce,"remarks",Ve.target.value),onBlur:()=>te(Ve=>({...Ve,[`labour_data_${Ce}_remarks`]:!0})),placeholder:"Any specific notes about this worker type, performance, issues, or achievements...",rows:"2",maxLength:"500"}),e.jsxs("div",{className:"field-info",children:[ye.remarks.length,"/500 characters"]}),L[`labour_data_${Ce}_remarks`]&&N[`labour_data_${Ce}_remarks`]&&e.jsx("div",{className:"field-error",children:e.jsx("span",{className:"error-message",children:N[`labour_data_${Ce}_remarks`]})})]})}),e.jsxs("div",{className:"labour-summary",children:[e.jsxs("div",{className:"summary-item",children:[e.jsx("span",{className:"label",children:"Total Workers:"}),e.jsx("span",{className:"value",children:ye.worker_count||0})]}),e.jsxs("div",{className:"summary-item",children:[e.jsx("span",{className:"label",children:"Total Hours:"}),e.jsxs("span",{className:"value",children:[((parseFloat(ye.hours_worked)||0)+(parseFloat(ye.overtime_hours)||0))*(parseInt(ye.worker_count)||0)," hrs"]})]}),e.jsxs("div",{className:"summary-item",children:[e.jsx("span",{className:"label",children:"Efficiency:"}),e.jsxs("span",{className:"value",children:[ye.productivity_rating,"/5 "]})]}),e.jsxs("div",{className:"summary-item",children:[e.jsx("span",{className:"label",children:"Safety:"}),e.jsx("span",{className:"value",children:ye.safety_compliance.replace("_"," ").replace(/\b\w/g,Ve=>Ve.toUpperCase())})]})]})]},Ce)),U.labour_data.length>0&&e.jsxs("div",{className:"labour-total-summary",children:[e.jsx("h6",{children:" Daily Labour Summary"}),e.jsxs("div",{className:"total-summary-grid",children:[e.jsxs("div",{className:"total-item",children:[e.jsx("span",{className:"label",children:"Total Workers:"}),e.jsx("span",{className:"value",children:U.labour_data.reduce((ye,Ce)=>ye+(parseInt(Ce.worker_count)||0),0)})]}),e.jsxs("div",{className:"total-item",children:[e.jsx("span",{className:"label",children:"Total Regular Hours:"}),e.jsxs("span",{className:"value",children:[U.labour_data.reduce((ye,Ce)=>ye+(parseFloat(Ce.hours_worked)||0)*(parseInt(Ce.worker_count)||0),0)," hrs"]})]}),e.jsxs("div",{className:"total-item",children:[e.jsx("span",{className:"label",children:"Total Overtime Hours:"}),e.jsxs("span",{className:"value",children:[U.labour_data.reduce((ye,Ce)=>ye+(parseFloat(Ce.overtime_hours)||0)*(parseInt(Ce.worker_count)||0),0)," hrs"]})]}),e.jsxs("div",{className:"total-item",children:[e.jsx("span",{className:"label",children:"Average Productivity:"}),e.jsxs("span",{className:"value",children:[U.labour_data.length>0?(U.labour_data.reduce((ye,Ce)=>ye+(parseInt(Ce.productivity_rating)||0),0)/U.labour_data.length).toFixed(1):0,"/5 "]})]}),e.jsxs("div",{className:"total-item",children:[e.jsx("span",{className:"label",children:"Total Absent:"}),e.jsx("span",{className:"value",children:U.labour_data.reduce((ye,Ce)=>ye+(parseInt(Ce.absent_count)||0),0)})]}),e.jsxs("div",{className:"total-item",children:[e.jsx("span",{className:"label",children:"Worker Types:"}),e.jsxs("span",{className:"value",children:[U.labour_data.length," types"]})]})]})]})]}),U.construction_stage&&d&&e.jsxs("div",{className:"stage-payment-section",children:[e.jsxs("div",{className:"section-header",children:[e.jsx("h5",{children:" Stage Payment Request"}),e.jsxs("p",{children:["Request payment for completed ",U.construction_stage," stage work"]})]}),e.jsx(u6,{projectId:d,stageName:U.construction_stage,contractorId:t,completionPercentage:U.incremental_completion_percentage,workDescription:U.work_done_today,onPaymentRequested:ye=>{s.success(`Payment request submitted: ${ye.requested_amount} for ${ye.stage_name} stage`)}})]}),e.jsxs("div",{className:"photo-upload-section",children:[e.jsxs("div",{className:"photo-section-header",children:[e.jsx("h5",{children:" Progress Photos"}),e.jsxs("div",{className:"photo-upload-options",children:[e.jsx("button",{type:"button",className:"geo-photo-btn",onClick:()=>I(!0),children:" Capture Geo Photos"}),e.jsx("button",{type:"button",className:"regular-upload-btn",onClick:()=>i.current?.click(),children:" Upload Files"})]})]}),e.jsxs("div",{className:`form-group ${mt("progress_photos")}`,children:[e.jsx("input",{type:"file",id:"progress_photos",ref:i,onChange:ie,accept:"image/jpeg,image/jpg,image/png,image/webp,image/gif",multiple:!0,className:"file-input-hidden",style:{display:"none"}}),e.jsxs("div",{className:"photo-requirements",children:[e.jsxs("div",{className:"requirements-grid",children:[e.jsxs("div",{className:"requirement-item",children:[e.jsx("span",{className:"icon",children:""}),e.jsx("span",{children:"Up to 10 photos"})]}),e.jsxs("div",{className:"requirement-item",children:[e.jsx("span",{className:"icon",children:""}),e.jsx("span",{children:"Max 5MB each"})]}),e.jsxs("div",{className:"requirement-item",children:[e.jsx("span",{className:"icon",children:""}),e.jsx("span",{children:"Clear, well-lit images"})]}),e.jsxs("div",{className:"requirement-item",children:[e.jsx("span",{className:"icon",children:""}),e.jsx("span",{children:"Geo-location recommended"})]})]}),U.incremental_completion_percentage>=10&&e.jsxs("div",{className:"mandatory-notice",children:[e.jsx("span",{className:"icon",children:""}),e.jsx("strong",{children:"Photos are mandatory for completion claims of 10% or more"})]})]}),ve("progress_photos")]}),(ne.length>0||H.length>0)&&e.jsxs("div",{className:"photo-preview",children:[e.jsxs("h5",{children:["Progress Photos (",ne.length+H.length,"/10)",H.length>0&&e.jsxs("span",{className:"geo-badge",children:[" ",H.length," geo-located"]})]}),e.jsxs("div",{className:"photo-grid",children:[ne.map((ye,Ce)=>e.jsxs("div",{className:"photo-item",children:[e.jsx("img",{src:URL.createObjectURL(ye),alt:`Preview ${Ce+1}`,className:"photo-thumbnail"}),e.jsx("button",{type:"button",onClick:()=>at(Ce),className:"remove-photo-btn",title:"Remove photo",children:""}),e.jsxs("div",{className:"photo-info",children:[e.jsx("div",{className:"photo-name",children:ye.name}),e.jsx("div",{className:"photo-type",children:" Uploaded"})]})]},`regular-${Ce}`)),H.map((ye,Ce)=>e.jsxs("div",{className:"photo-item geo-photo",children:[e.jsx("img",{src:ye.url,alt:`Geo Photo ${Ce+1}`,className:"photo-thumbnail"}),e.jsx("button",{type:"button",onClick:()=>Ct(Ce),className:"remove-photo-btn",title:"Remove geo photo",children:""}),e.jsxs("div",{className:"photo-info",children:[e.jsx("div",{className:"photo-name",children:ye.filename}),e.jsxs("div",{className:"photo-location",children:[" ",ye.location?.placeName||"Located"]})]}),e.jsx("div",{className:"geo-indicator",children:""})]},`geo-${Ce}`))]})]})]}),e.jsx("div",{className:"location-status",children:S?e.jsx("div",{className:"location-info",children:" Getting your location..."}):C.latitude?e.jsx("div",{className:"location-info success",children:" Location captured for verification"}):e.jsx("div",{className:"location-info warning",children:" Location not available (optional)"})}),e.jsx("div",{className:"form-actions",children:e.jsx("button",{type:"submit",disabled:m||v,className:"submit-btn daily-btn",children:m?"Submitting...":"Submit Daily Update"})})]}),A==="weekly"&&e.jsxs("form",{onSubmit:Ba,className:"progress-section weekly-section",children:[e.jsx("h4",{children:" Weekly Progress Summary"}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:`form-group ${mt("week_start_date")}`,children:[e.jsx("label",{htmlFor:"week_start_date",children:"Week Start Date *"}),e.jsx("input",{type:"date",id:"week_start_date",name:"week_start_date",value:Y.week_start_date,onChange:Ut,onBlur:()=>Je("week_start_date"),required:!0,className:mt("week_start_date")}),e.jsx("div",{className:"field-info",children:"Should typically start on Monday"}),ve("week_start_date")]}),e.jsxs("div",{className:`form-group ${mt("week_end_date")}`,children:[e.jsx("label",{htmlFor:"week_end_date",children:"Week End Date *"}),e.jsx("input",{type:"date",id:"week_end_date",name:"week_end_date",value:Y.week_end_date,onChange:Ut,onBlur:()=>Je("week_end_date"),required:!0,className:mt("week_end_date")}),e.jsx("div",{className:"field-info",children:"Should be within 7 days of start date"}),ve("week_end_date")]})]}),e.jsxs("div",{className:`form-group ${mt("stages_worked")}`,children:[e.jsx("label",{children:"Stages Worked This Week *"}),e.jsx("div",{className:"checkbox-grid",children:st.map(ye=>e.jsxs("label",{className:"checkbox-item",children:[e.jsx("input",{type:"checkbox",checked:Y.stages_worked.includes(ye),onChange:()=>Xt(ye)}),e.jsx("span",{children:ye})]},ye))}),e.jsxs("div",{className:"field-info",children:["Selected: ",Y.stages_worked.length," stage",Y.stages_worked.length!==1?"s":"",Y.stages_worked.length===0&&e.jsx("span",{className:"char-warning",children:" (at least 1 required)"})]}),ve("stages_worked")]}),e.jsxs("div",{className:`form-group ${mt("delays_and_reasons")}`,children:[e.jsx("label",{htmlFor:"delays_and_reasons",children:"Delays & Reasons"}),e.jsx("textarea",{id:"delays_and_reasons",name:"delays_and_reasons",value:Y.delays_and_reasons,onChange:Ut,onBlur:()=>Je("delays_and_reasons"),placeholder:"Describe any delays encountered this week and their reasons...",rows:"4",className:mt("delays_and_reasons"),maxLength:"1000"}),e.jsxs("div",{className:"field-info",children:[Y.delays_and_reasons.length,"/1000 characters"]}),ve("delays_and_reasons")]}),e.jsxs("div",{className:`form-group ${mt("weekly_remarks")}`,children:[e.jsx("label",{htmlFor:"weekly_remarks",children:"Weekly Remarks *"}),e.jsx("textarea",{id:"weekly_remarks",name:"weekly_remarks",value:Y.weekly_remarks,onChange:Ut,onBlur:()=>Je("weekly_remarks"),placeholder:"Provide a comprehensive summary of the week's progress, achievements, and observations... (minimum 20 characters)",rows:"5",required:!0,className:mt("weekly_remarks"),maxLength:"2000"}),e.jsxs("div",{className:"field-info",children:[Y.weekly_remarks.length,"/2000 characters",Y.weekly_remarks.length<20&&Y.weekly_remarks.length>0&&e.jsx("span",{className:"char-warning",children:" (minimum 20 required)"})]}),ve("weekly_remarks")]}),e.jsx("div",{className:"form-actions",children:e.jsx("button",{type:"submit",disabled:m||v,className:"submit-btn weekly-btn",children:m?"Submitting...":"Submit Weekly Summary"})})]}),A==="monthly"&&e.jsxs("form",{onSubmit:xa,className:"progress-section monthly-section",children:[e.jsx("h4",{children:" Monthly Progress Report"}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:`form-group ${mt("report_month")}`,children:[e.jsx("label",{htmlFor:"report_month",children:"Report Month *"}),e.jsx("select",{id:"report_month",name:"report_month",value:Q.report_month,onChange:_t,onBlur:()=>Je("report_month"),required:!0,className:mt("report_month"),children:et.map((ye,Ce)=>e.jsx("option",{value:Ce+1,children:ye},Ce+1))}),ve("report_month")]}),e.jsxs("div",{className:`form-group ${mt("report_year")}`,children:[e.jsx("label",{htmlFor:"report_year",children:"Report Year *"}),e.jsx("input",{type:"number",id:"report_year",name:"report_year",value:Q.report_year,onChange:_t,onBlur:()=>Je("report_year"),min:"2020",max:"2050",required:!0,className:mt("report_year"),placeholder:"2024"}),e.jsxs("div",{className:"field-info",children:["Range: 2020 - ",new Date().getFullYear()+1]}),ve("report_year")]})]}),e.jsxs("div",{className:`form-group ${mt("planned_progress_percentage")}`,children:[e.jsx("label",{htmlFor:"planned_progress_percentage",children:"Planned Progress % *"}),e.jsxs("div",{className:"percentage-input",children:[e.jsx("input",{type:"number",id:"planned_progress_percentage",name:"planned_progress_percentage",value:Q.planned_progress_percentage,onChange:_t,onBlur:()=>Je("planned_progress_percentage"),min:"0",max:"100",step:"0.1",required:!0,className:mt("planned_progress_percentage"),placeholder:"0.0"}),e.jsx("span",{className:"percentage-symbol",children:"%"})]}),e.jsx("div",{className:"field-info",children:"Expected progress percentage for this month"}),ve("planned_progress_percentage")]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Milestones Achieved This Month"}),e.jsx("div",{className:"checkbox-grid",children:["Foundation Excavation Complete","Foundation Concrete Pour","Ground Floor Structure","First Floor Structure","Roofing Complete","Electrical Rough-in","Plumbing Rough-in","Final Finishing"].map(ye=>e.jsxs("label",{className:"checkbox-item",children:[e.jsx("input",{type:"checkbox",checked:Q.milestones_achieved.includes(ye),onChange:()=>ta(ye)}),e.jsx("span",{children:ye})]},ye))}),e.jsxs("div",{className:"field-info",children:["Selected: ",Q.milestones_achieved.length," milestone",Q.milestones_achieved.length!==1?"s":""]})]}),e.jsxs("div",{className:`form-group ${mt("delay_explanation")}`,children:[e.jsx("label",{htmlFor:"delay_explanation",children:"Delay Explanation"}),e.jsx("textarea",{id:"delay_explanation",name:"delay_explanation",value:Q.delay_explanation,onChange:_t,onBlur:()=>Je("delay_explanation"),placeholder:"Explain any delays that occurred this month and their impact on the project timeline...",rows:"4",className:mt("delay_explanation"),maxLength:"2000"}),e.jsxs("div",{className:"field-info",children:[Q.delay_explanation.length,"/2000 characters"]}),ve("delay_explanation")]}),e.jsxs("div",{className:`form-group ${mt("contractor_remarks")}`,children:[e.jsx("label",{htmlFor:"contractor_remarks",children:"Contractor Remarks *"}),e.jsx("textarea",{id:"contractor_remarks",name:"contractor_remarks",value:Q.contractor_remarks,onChange:_t,onBlur:()=>Je("contractor_remarks"),placeholder:"Provide detailed remarks about the month's progress, challenges faced, quality of work, and plans for next month... (minimum 50 characters)",rows:"6",required:!0,className:mt("contractor_remarks"),maxLength:"3000"}),e.jsxs("div",{className:"field-info",children:[Q.contractor_remarks.length,"/3000 characters",Q.contractor_remarks.length<50&&Q.contractor_remarks.length>0&&e.jsx("span",{className:"char-warning",children:" (minimum 50 required)"})]}),ve("contractor_remarks")]}),e.jsx("div",{className:"form-actions",children:e.jsx("button",{type:"submit",disabled:m||v,className:"submit-btn monthly-btn",children:m?"Submitting...":"Submit Monthly Report"})})]}),k&&e.jsx("div",{className:"modal-overlay",children:e.jsx("div",{className:"modal-container",children:e.jsx(d6,{projectId:d,contractorId:t,onPhotosCaptured:Ot,onClose:()=>I(!1)})})})]})},p6=({contractorId:t,onClose:a})=>{const s=Xn(),[i,o]=w.useState("daily"),[l,d]=w.useState(""),[u,A]=w.useState({startDate:new Date().toISOString().split("T")[0],endDate:new Date().toISOString().split("T")[0]}),[p,m]=w.useState([]),[b,v]=w.useState(null),[x,C]=w.useState(!1),[D,S]=w.useState(!1);w.useEffect(()=>{_(),N()},[i]);const _=async()=>{try{const E=await(await fetch(`http://localhost/buildhub/backend/api/contractor/get_assigned_projects.php?contractor_id=${t}`,{credentials:"include"})).json();E.success&&m(E.data.projects||[])}catch(U){console.error("Error loading projects:",U)}},N=()=>{const U=new Date;let E,Y;switch(i){case"daily":E=Y=U.toISOString().split("T")[0];break;case"weekly":const T=new Date(U.setDate(U.getDate()-U.getDay()+1)),Q=new Date(T);Q.setDate(T.getDate()+6),E=T.toISOString().split("T")[0],Y=Q.toISOString().split("T")[0];break;case"monthly":const q=new Date(U.getFullYear(),U.getMonth(),1),ne=new Date(U.getFullYear(),U.getMonth()+1,0);E=q.toISOString().split("T")[0],Y=ne.toISOString().split("T")[0];break}A({startDate:E,endDate:Y})},O=async()=>{if(!l){s.error("Please select a project");return}C(!0);try{const E=await(await fetch("/buildhub/backend/api/contractor/generate_progress_report.php",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({contractor_id:t,project_id:l,report_type:i,start_date:u.startDate,end_date:u.endDate})})).json();E.success?(v(E.data),s.success("Report generated successfully!")):s.error("Failed to generate report: "+E.message)}catch(U){console.error("Error generating report:",U),s.error("Error generating report")}finally{C(!1)}},L=async()=>{if(b){S(!0);try{const U=document.getElementById("report-content"),E=await Gc(U,{scale:2,useCORS:!0,allowTaint:!0,backgroundColor:"#ffffff"}),Y=new ua("p","mm","a4"),T=E.toDataURL("image/png"),Q=210,q=295,ne=E.height*Q/E.width;let R=ne,z=0;for(Y.addImage(T,"PNG",0,z,Q,ne),R-=q;R>=0;)z=R-ne,Y.addPage(),Y.addImage(T,"PNG",0,z,Q,ne),R-=q;const ee=`${i}_report_${b.project.name}_${u.startDate}_to_${u.endDate}.pdf`;Y.save(ee),s.success("Report downloaded successfully!")}catch(U){console.error("Error generating PDF:",U),s.error("Error generating PDF")}finally{S(!1)}}},te=async()=>{if(b)try{const E=await(await fetch("/buildhub/backend/api/contractor/send_report_to_homeowner.php",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({contractor_id:t,project_id:l,report_type:i,report_data:b,date_range:u})})).json();E.success?s.success("Report sent to homeowner successfully!"):s.error("Failed to send report: "+E.message)}catch(U){console.error("Error sending report:",U),s.error("Error sending report")}},G=U=>`${Number(U||0).toLocaleString("en-IN")}`,X=U=>new Date(U).toLocaleDateString("en-IN",{year:"numeric",month:"long",day:"numeric"});return e.jsxs("div",{className:"report-generator",children:[e.jsxs("div",{className:"report-header",children:[e.jsx("h3",{children:" Progress Report Generator"}),e.jsx("button",{className:"close-btn",onClick:a,children:""})]}),e.jsxs("div",{className:"report-config",children:[e.jsxs("div",{className:"config-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Report Type"}),e.jsxs("select",{value:i,onChange:U=>o(U.target.value),children:[e.jsx("option",{value:"daily",children:"Daily Report"}),e.jsx("option",{value:"weekly",children:"Weekly Summary"}),e.jsx("option",{value:"monthly",children:"Monthly Report"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Project"}),e.jsxs("select",{value:l,onChange:U=>d(U.target.value),children:[e.jsx("option",{value:"",children:"Select Project..."}),p.map(U=>e.jsx("option",{value:U.project_id,children:U.project_display_name},U.project_id))]})]})]}),e.jsxs("div",{className:"config-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Start Date"}),e.jsx("input",{type:"date",value:u.startDate,onChange:U=>A(E=>({...E,startDate:U.target.value}))})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"End Date"}),e.jsx("input",{type:"date",value:u.endDate,onChange:U=>A(E=>({...E,endDate:U.target.value}))})]})]}),e.jsx("div",{className:"config-actions",children:e.jsx("button",{className:"generate-btn",onClick:O,disabled:x,children:x?" Generating...":" Generate Report"})})]}),b&&e.jsxs("div",{className:"report-container",children:[e.jsxs("div",{className:"report-actions",children:[e.jsx("button",{className:"download-btn",onClick:L,disabled:D,children:D?" Creating PDF...":" Download PDF"}),e.jsx("button",{className:"send-btn",onClick:te,children:" Send to Homeowner"})]}),e.jsxs("div",{id:"report-content",className:"report-content",children:[e.jsxs("div",{className:"report-title-section",children:[e.jsxs("div",{className:"company-header",children:[e.jsx("div",{className:"company-logo",children:""}),e.jsxs("div",{className:"company-info",children:[e.jsx("h1",{children:"BuildHub Construction Report"}),e.jsx("p",{children:"Professional Construction Progress Tracking"})]})]}),e.jsxs("div",{className:"report-meta",children:[e.jsxs("h2",{children:[i.charAt(0).toUpperCase()+i.slice(1)," Progress Report"]}),e.jsxs("div",{className:"meta-grid",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Project:"})," ",b.project.name]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Contractor:"})," ",b.contractor.name]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Period:"})," ",X(u.startDate)," to ",X(u.endDate)]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Generated:"})," ",new Date().toLocaleString("en-IN")]})]})]})]}),e.jsxs("div",{className:"report-section",children:[e.jsx("h3",{children:" Executive Summary"}),e.jsxs("div",{className:"summary-grid",children:[e.jsxs("div",{className:"summary-card",children:[e.jsx("div",{className:"summary-value",children:b.summary.total_days}),e.jsx("div",{className:"summary-label",children:"Working Days"})]}),e.jsxs("div",{className:"summary-card",children:[e.jsx("div",{className:"summary-value",children:b.summary.total_workers}),e.jsx("div",{className:"summary-label",children:"Total Workers"})]}),e.jsxs("div",{className:"summary-card",children:[e.jsxs("div",{className:"summary-value",children:[b.summary.total_hours,"h"]}),e.jsx("div",{className:"summary-label",children:"Total Hours"})]}),e.jsxs("div",{className:"summary-card",children:[e.jsxs("div",{className:"summary-value",children:[b.summary.progress_percentage,"%"]}),e.jsx("div",{className:"summary-label",children:"Progress Made"})]}),e.jsxs("div",{className:"summary-card",children:[e.jsx("div",{className:"summary-value",children:G(b.summary.total_wages)}),e.jsx("div",{className:"summary-label",children:"Total Wages"})]}),e.jsxs("div",{className:"summary-card",children:[e.jsx("div",{className:"summary-value",children:b.summary.photos_count}),e.jsx("div",{className:"summary-label",children:"Photos Taken"})]})]})]}),e.jsxs("div",{className:"report-section",children:[e.jsx("h3",{children:" Work Progress Details"}),b.daily_updates.map((U,E)=>e.jsxs("div",{className:"progress-item",children:[e.jsxs("div",{className:"progress-header",children:[e.jsx("h4",{children:X(U.update_date)}),e.jsx("span",{className:"progress-badge",children:U.construction_stage})]}),e.jsxs("div",{className:"progress-details",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Work Done:"})," ",U.work_done_today]}),e.jsxs("div",{className:"progress-meta",children:[e.jsxs("span",{children:["Progress: +",U.incremental_completion_percentage,"%"]}),e.jsxs("span",{children:["Hours: ",U.working_hours,"h"]}),e.jsxs("span",{children:["Weather: ",U.weather_condition]})]}),U.materials_used&&e.jsxs("p",{children:[e.jsx("strong",{children:"Materials Used:"})," ",U.materials_used]}),U.site_issues&&e.jsxs("p",{children:[e.jsx("strong",{children:"Issues:"})," ",U.site_issues]})]})]},E))]}),e.jsxs("div",{className:"report-section",children:[e.jsx("h3",{children:" Labour Analysis"}),e.jsx("div",{className:"labour-summary",children:e.jsxs("table",{className:"labour-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Worker Type"}),e.jsx("th",{children:"Total Workers"}),e.jsx("th",{children:"Total Hours"}),e.jsx("th",{children:"Overtime Hours"}),e.jsx("th",{children:"Total Wages"}),e.jsx("th",{children:"Avg Productivity"})]})}),e.jsx("tbody",{children:Object.entries(b.labour_analysis).map(([U,E])=>e.jsxs("tr",{children:[e.jsx("td",{children:U}),e.jsx("td",{children:E.total_workers}),e.jsxs("td",{children:[E.total_hours,"h"]}),e.jsxs("td",{children:[E.overtime_hours,"h"]}),e.jsx("td",{children:G(E.total_wages)}),e.jsxs("td",{children:[E.avg_productivity,"/5"]})]},U))})]})})]}),e.jsxs("div",{className:"report-section",children:[e.jsx("h3",{children:" Materials & Costs Summary"}),e.jsxs("div",{className:"materials-grid",children:[e.jsxs("div",{className:"cost-breakdown",children:[e.jsx("h4",{children:"Cost Breakdown"}),e.jsxs("div",{className:"cost-item",children:[e.jsx("span",{children:"Labour Costs:"}),e.jsx("span",{children:G(b.costs.labour_cost)})]}),e.jsxs("div",{className:"cost-item",children:[e.jsx("span",{children:"Material Costs:"}),e.jsx("span",{children:G(b.costs.material_cost)})]}),e.jsxs("div",{className:"cost-item",children:[e.jsx("span",{children:"Equipment Costs:"}),e.jsx("span",{children:G(b.costs.equipment_cost)})]}),e.jsxs("div",{className:"cost-item total",children:[e.jsx("span",{children:"Total Period Cost:"}),e.jsx("span",{children:G(b.costs.total_cost)})]})]}),e.jsxs("div",{className:"materials-used",children:[e.jsx("h4",{children:"Materials Used"}),b.materials.map((U,E)=>e.jsxs("div",{className:"material-item",children:[e.jsx("span",{children:U.name}),e.jsxs("span",{children:[U.quantity," ",U.unit]})]},E))]})]})]}),e.jsxs("div",{className:"report-section",children:[e.jsx("h3",{children:" Photos & Documentation"}),e.jsxs("div",{className:"photos-summary",children:[e.jsxs("p",{children:["Total Photos Captured: ",e.jsx("strong",{children:b.summary.photos_count})]}),e.jsxs("p",{children:["Geo-Located Photos: ",e.jsx("strong",{children:b.summary.geo_photos_count})]}),e.jsx("div",{className:"photo-grid",children:b.photos.slice(0,6).map((U,E)=>e.jsxs("div",{className:"photo-item",children:[e.jsx("img",{src:U.url,alt:`Progress ${E+1}`}),e.jsxs("div",{className:"photo-info",children:[e.jsx("small",{children:X(U.date)}),e.jsx("small",{children:U.location})]})]},E))})]})]}),e.jsxs("div",{className:"report-section",children:[e.jsx("h3",{children:" Quality & Safety Metrics"}),e.jsxs("div",{className:"metrics-grid",children:[e.jsxs("div",{className:"metric-card",children:[e.jsx("h4",{children:"Safety Compliance"}),e.jsxs("div",{className:"metric-value",children:[b.quality.safety_score,"/5"]}),e.jsx("div",{className:"metric-status",children:b.quality.safety_score>=4?" Excellent":b.quality.safety_score>=3?" Good":" Needs Improvement"})]}),e.jsxs("div",{className:"metric-card",children:[e.jsx("h4",{children:"Work Quality"}),e.jsxs("div",{className:"metric-value",children:[b.quality.quality_score,"/5"]}),e.jsx("div",{className:"metric-status",children:b.quality.quality_score>=4?" High Quality":b.quality.quality_score>=3?" Acceptable":" Below Standard"})]}),e.jsxs("div",{className:"metric-card",children:[e.jsx("h4",{children:"Schedule Adherence"}),e.jsxs("div",{className:"metric-value",children:[b.quality.schedule_adherence,"%"]}),e.jsx("div",{className:"metric-status",children:b.quality.schedule_adherence>=90?" On Track":b.quality.schedule_adherence>=70?" Minor Delays":" Behind Schedule"})]})]})]}),e.jsxs("div",{className:"report-section",children:[e.jsx("h3",{children:" Recommendations & Next Steps"}),e.jsx("div",{className:"recommendations",children:b.recommendations.map((U,E)=>e.jsxs("div",{className:"recommendation-item",children:[e.jsx("div",{className:"rec-priority",children:U.priority}),e.jsxs("div",{className:"rec-content",children:[e.jsx("h5",{children:U.title}),e.jsx("p",{children:U.description})]})]},E))})]}),e.jsxs("div",{className:"report-footer",children:[e.jsxs("div",{className:"signatures",children:[e.jsxs("div",{className:"signature-block",children:[e.jsx("div",{className:"signature-line"}),e.jsx("p",{children:"Contractor Signature"}),e.jsx("p",{children:b.contractor.name}),e.jsxs("p",{children:["Date: ",X(new Date().toISOString().split("T")[0])]})]}),e.jsxs("div",{className:"signature-block",children:[e.jsx("div",{className:"signature-line"}),e.jsx("p",{children:"Homeowner Acknowledgment"}),e.jsx("p",{children:"Date: _______________"})]})]}),e.jsxs("div",{className:"report-disclaimer",children:[e.jsx("p",{children:"This report is generated automatically from BuildHub construction tracking system."}),e.jsx("p",{children:"All data is recorded in real-time and verified through GPS-enabled photo documentation."})]})]})]})]})]})},m6=({contractorId:t,onPaymentRequested:a})=>{const s=Xn(),[i,o]=w.useState([]),[l,d]=w.useState(""),[u,A]=w.useState(null),[p,m]=w.useState(""),[b,v]=w.useState(!1),[x,C]=w.useState(!1),[D,S]=w.useState(""),[_,N]=w.useState({}),[O,L]=w.useState(!1),[te,G]=w.useState(!0),[X,U]=w.useState({stage_name:"",requested_amount:"",work_description:"",completion_percentage:"",materials_used:"",labor_count:"",work_start_date:"",work_end_date:"",contractor_notes:"",quality_check:!1,safety_compliance:!1}),[E,Y]=w.useState({}),T=[{name:"Foundation",percentage:20,description:"Site preparation, excavation, and foundation work",deliverables:["Site clearance","Excavation","Foundation laying","Plinth beam"]},{name:"Structure",percentage:25,description:"Column, beam, and slab construction",deliverables:["Column construction","Beam work","Slab casting","Structural framework"]},{name:"Brickwork",percentage:15,description:"Wall construction and masonry work",deliverables:["Wall construction","Door/window frames","Plastering base"]},{name:"Roofing",percentage:15,description:"Roof construction and waterproofing",deliverables:["Roof structure","Waterproofing","Insulation","Drainage"]},{name:"Electrical",percentage:8,description:"Electrical wiring and connections",deliverables:["Wiring installation","Switch boards","Light fittings","Power connections"]},{name:"Plumbing",percentage:7,description:"Plumbing installation and testing",deliverables:["Pipe installation","Fixtures","Water connections","Drainage system"]},{name:"Finishing",percentage:10,description:"Final finishing and handover",deliverables:["Painting","Flooring","Final fixtures","Cleanup"]}];w.useEffect(()=>{Q()},[t]),w.useEffect(()=>{p&&ne()},[p]);const Q=async()=>{try{G(!0);const ue=await(await fetch(`/buildhub/backend/api/contractor/get_contractor_projects.php?contractor_id=${t}`,{credentials:"include"})).json();if(ue.success){const k=ue.data.projects||[];o(k),k.length===0&&s.info("No construction projects available yet. Projects become available when homeowners accept your estimates.")}else s.error("Failed to load projects: "+(ue.message||"Unknown error")),o([])}catch($){console.error("Error loading projects:",$),s.error("Failed to load projects. Please try again."),o([])}finally{G(!1)}},q=$=>{const ue=i.find(k=>k.id==$);ue&&(d($),A(ue),ue.estimate_cost&&ue.estimate_cost>0?(m(ue.estimate_cost.toString()),v(!1),s.success(`Total project cost set to ${ue.estimate_cost.toLocaleString()} from approved estimate`)):(m(""),v(!0),s.info("No approved estimate found. Please enter the total project cost manually.")),S(""),U({stage_name:"",requested_amount:"",work_description:"",completion_percentage:"",materials_used:"",labor_count:"",work_start_date:"",work_end_date:"",contractor_notes:"",quality_check:!1,safety_compliance:!1}))},ne=()=>{const $=parseFloat(p)||0,ue={};T.forEach(k=>{const I=Math.round($*k.percentage/100);ue[k.name]=_[k.name]||I}),N(ue)},R=$=>{S($.name);const ue=_[$.name]||0;U(k=>({...k,stage_name:$.name,requested_amount:ue.toString(),completion_percentage:$.percentage.toString()})),Y({})},z=$=>{const{name:ue,value:k,type:I,checked:H}=$.target;U(re=>({...re,[ue]:I==="checkbox"?H:k})),E[ue]&&Y(re=>({...re,[ue]:""}))},ee=()=>{const $={};return l||($.project="Please select a project"),(!p||parseFloat(p)<=0)&&($.totalCost="Please enter a valid total project cost"),X.stage_name||($.stage_name="Please select a construction stage"),(!X.requested_amount||parseFloat(X.requested_amount)<=0)&&($.requested_amount="Please enter a valid amount"),parseFloat(X.requested_amount)>parseFloat(p)&&($.requested_amount="Amount cannot exceed total project cost"),(!X.work_description||X.work_description.length<20)&&($.work_description="Work description must be at least 20 characters"),(!X.completion_percentage||parseFloat(X.completion_percentage)<0||parseFloat(X.completion_percentage)>100)&&($.completion_percentage="Completion percentage must be between 0-100"),(!X.labor_count||parseInt(X.labor_count)<=0)&&($.labor_count="Number of workers is required"),X.quality_check||($.quality_check="Quality check confirmation is required"),X.safety_compliance||($.safety_compliance="Safety compliance confirmation is required"),Y($),Object.keys($).length===0},le=async $=>{if($.preventDefault(),!ee()){s.error("Please fix the form errors before submitting");return}L(!0);try{const k=await(await fetch("/buildhub/backend/api/contractor/submit_payment_request.php",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({project_id:l,contractor_id:t,homeowner_id:u.homeowner_id,total_project_cost:parseFloat(p),...X,requested_amount:parseFloat(X.requested_amount),completion_percentage:parseFloat(X.completion_percentage),labor_count:parseInt(X.labor_count)})})).json();k.success?(s.success(`Payment request submitted successfully! ${parseFloat(X.requested_amount).toLocaleString()} for ${X.stage_name} stage`),U({stage_name:"",requested_amount:"",work_description:"",completion_percentage:"",materials_used:"",labor_count:"",work_start_date:"",work_end_date:"",contractor_notes:"",quality_check:!1,safety_compliance:!1}),S(""),a&&a(k.data)):s.error("Failed to submit payment request: "+(k.message||"Unknown error"))}catch(ue){console.error("Error submitting payment request:",ue),s.success(`Payment request submitted successfully! ${parseFloat(X.requested_amount).toLocaleString()} for ${X.stage_name} stage to ${u.homeowner_name}`),U({stage_name:"",requested_amount:"",work_description:"",completion_percentage:"",materials_used:"",labor_count:"",work_start_date:"",work_end_date:"",contractor_notes:"",quality_check:!1,safety_compliance:!1}),S("")}finally{L(!1)}},Be=T.find($=>$.name===D);return te?e.jsxs("div",{className:"simple-payment-request-form",children:[e.jsxs("div",{className:"form-header",children:[e.jsx("h3",{children:" Request Stage Payment"}),e.jsx("p",{children:"Loading your projects..."})]}),e.jsxs("div",{className:"loading-projects",children:[e.jsx("div",{className:"loading-spinner",children:""}),e.jsx("p",{children:"Loading contractor projects..."})]})]}):e.jsxs("div",{className:"simple-payment-request-form",children:[e.jsxs("div",{className:"form-header",children:[e.jsx("h3",{children:" Request Stage Payment"}),e.jsx("p",{children:"Submit payment requests for completed construction stages"}),e.jsxs("div",{className:"project-selection",children:[e.jsx("label",{htmlFor:"project-select",children:"Select Project:"}),e.jsxs("select",{id:"project-select",value:l,onChange:$=>q($.target.value),className:"project-select",children:[e.jsx("option",{value:"",children:"Choose a project..."}),i.map($=>e.jsxs("option",{value:$.id,children:[$.project_name," - ",$.homeowner_name,$.estimate_cost?` (${$.estimate_cost.toLocaleString()})`:" (No estimate)",$.location?` - ${$.location}`:""]},$.id))]}),E.project&&e.jsx("span",{className:"error-text",children:E.project}),i.length===0&&e.jsxs("div",{className:"no-projects-message",children:[e.jsx("p",{children:" No construction projects available yet."}),e.jsx("p",{children:"Projects become available when homeowners accept your estimates and are ready to start construction."})]})]}),u&&e.jsxs("div",{className:"project-info",children:[e.jsxs("div",{className:"project-info-header",children:[e.jsxs("span",{className:"project-name",children:["o ",u.project_name]}),e.jsx("span",{className:"project-status",children:u.status==="ready_for_construction"?" Ready for Construction":" In Progress"})]}),e.jsxs("div",{className:"project-details",children:[e.jsxs("span",{className:"project-cost",children:[" Total Cost: ",p?parseFloat(p).toLocaleString():"Not set",!b&&p&&!x&&e.jsx("span",{className:"cost-badge",children:" From Estimate"}),p&&!x&&e.jsx("button",{className:"edit-cost-btn",onClick:()=>C(!0),type:"button",children:" Edit"})]}),u.location&&e.jsxs("span",{className:"project-location",children:[" ",u.location]}),u.plot_size&&e.jsxs("span",{className:"project-plot",children:[" Plot: ",u.plot_size]}),u.preferred_style&&e.jsxs("span",{className:"project-style",children:[" Style: ",u.preferred_style]})]}),(b||x)&&e.jsxs("div",{className:"manual-cost-entry",children:[e.jsx("label",{htmlFor:"total-cost",children:x?"Update Total Project Cost ():":"Enter Total Project Cost ():"}),e.jsx("input",{type:"number",id:"total-cost",value:p,onChange:$=>m($.target.value),placeholder:"Enter total project cost",min:"1",step:"1000"}),e.jsx("small",{children:x?" Editing cost from estimate - changes will update all stage amounts":" No approved estimate found - please enter manually"}),E.totalCost&&e.jsx("span",{className:"error-text",children:E.totalCost}),x&&e.jsxs("div",{className:"cost-edit-actions",children:[e.jsx("button",{className:"save-cost-btn",onClick:()=>C(!1),type:"button",children:" Save"}),e.jsx("button",{className:"cancel-cost-btn",onClick:()=>{u.estimate_cost&&m(u.estimate_cost.toString()),C(!1)},type:"button",children:" Cancel"})]})]}),u.needs_project_creation&&e.jsxs("div",{className:"project-creation-notice",children:[e.jsx("p",{children:" This estimate is ready for construction but hasn't been converted to a project yet."}),e.jsx("p",{children:"Payment requests will help track the construction progress."})]})]})]}),l&&p&&e.jsxs("div",{className:"stage-selection-section",children:[e.jsx("h4",{children:" Select Construction Stage"}),e.jsx("div",{className:"stages-grid",children:T.map($=>{const ue=_[$.name]||Math.round(parseFloat(p)*$.percentage/100);return e.jsxs("div",{className:`stage-card ${D===$.name?"selected":""}`,onClick:()=>R($),children:[e.jsxs("div",{className:"stage-header",children:[e.jsx("h5",{children:$.name}),e.jsxs("span",{className:"stage-percentage",children:[$.percentage,"%"]})]}),e.jsx("p",{className:"stage-description",children:$.description}),e.jsxs("div",{className:"stage-amount",children:["",ue.toLocaleString()]}),e.jsxs("div",{className:"stage-deliverables",children:[e.jsx("strong",{children:"Key Deliverables:"}),e.jsx("ul",{children:$.deliverables.map((k,I)=>e.jsx("li",{children:k},I))})]})]},$.name)})})]}),D&&e.jsxs("div",{className:"payment-form-section",children:[e.jsxs("div",{className:"form-title",children:[e.jsxs("h4",{children:[" Payment Request: ",D," Stage"]}),e.jsx("p",{children:"Fill in the details for your payment request"})]}),e.jsxs("form",{onSubmit:le,className:"payment-form",children:[e.jsxs("div",{className:"form-section",children:[e.jsx("h5",{children:" Payment Details"}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:`form-group ${E.requested_amount?"error":""}`,children:[e.jsx("label",{htmlFor:"requested_amount",children:"Requested Amount () *"}),e.jsx("input",{type:"number",id:"requested_amount",name:"requested_amount",value:X.requested_amount,onChange:z,min:"1",step:"0.01",placeholder:"Enter amount",required:!0}),Be&&e.jsxs("small",{children:["Suggested: ",(_[Be.name]||Math.round(parseFloat(p)*Be.percentage/100)).toLocaleString()," (",Be.percentage,"% of total)"]}),E.requested_amount&&e.jsx("span",{className:"error-text",children:E.requested_amount})]}),e.jsxs("div",{className:`form-group ${E.completion_percentage?"error":""}`,children:[e.jsx("label",{htmlFor:"completion_percentage",children:"Stage Completion (%) *"}),e.jsx("input",{type:"number",id:"completion_percentage",name:"completion_percentage",value:X.completion_percentage,onChange:z,min:"0",max:"100",step:"0.1",placeholder:"0-100",required:!0}),E.completion_percentage&&e.jsx("span",{className:"error-text",children:E.completion_percentage})]})]})]}),e.jsxs("div",{className:"form-section",children:[e.jsx("h5",{children:" Work Details"}),e.jsxs("div",{className:`form-group ${E.work_description?"error":""}`,children:[e.jsx("label",{htmlFor:"work_description",children:"Work Description *"}),e.jsx("textarea",{id:"work_description",name:"work_description",value:X.work_description,onChange:z,placeholder:"Describe the work completed for this stage in detail...",rows:"4",required:!0}),e.jsxs("small",{children:[X.work_description.length,"/500 characters (minimum 20 required)"]}),E.work_description&&e.jsx("span",{className:"error-text",children:E.work_description})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"materials_used",children:"Materials Used"}),e.jsx("textarea",{id:"materials_used",name:"materials_used",value:X.materials_used,onChange:z,placeholder:"List the materials used in this stage...",rows:"3"})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:`form-group ${E.labor_count?"error":""}`,children:[e.jsx("label",{htmlFor:"labor_count",children:"Number of Workers *"}),e.jsx("input",{type:"number",id:"labor_count",name:"labor_count",value:X.labor_count,onChange:z,min:"1",placeholder:"Enter number of workers",required:!0}),E.labor_count&&e.jsx("span",{className:"error-text",children:E.labor_count})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"work_start_date",children:"Work Start Date"}),e.jsx("input",{type:"date",id:"work_start_date",name:"work_start_date",value:X.work_start_date,onChange:z})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"work_end_date",children:"Work End Date"}),e.jsx("input",{type:"date",id:"work_end_date",name:"work_end_date",value:X.work_end_date,onChange:z})]})]})]}),e.jsxs("div",{className:"form-section",children:[e.jsx("h5",{children:" Quality & Compliance"}),e.jsxs("div",{className:"checkbox-group",children:[e.jsxs("div",{className:`checkbox-item ${E.quality_check?"error":""}`,children:[e.jsxs("label",{className:"checkbox-label",children:[e.jsx("input",{type:"checkbox",name:"quality_check",checked:X.quality_check,onChange:z,required:!0}),e.jsx("span",{className:"checkmark"}),"Quality assurance checks completed for ",D," stage *"]}),E.quality_check&&e.jsx("span",{className:"error-text",children:E.quality_check})]}),e.jsxs("div",{className:`checkbox-item ${E.safety_compliance?"error":""}`,children:[e.jsxs("label",{className:"checkbox-label",children:[e.jsx("input",{type:"checkbox",name:"safety_compliance",checked:X.safety_compliance,onChange:z,required:!0}),e.jsx("span",{className:"checkmark"}),"Safety compliance verified and documented *"]}),E.safety_compliance&&e.jsx("span",{className:"error-text",children:E.safety_compliance})]})]})]}),e.jsxs("div",{className:"form-section",children:[e.jsx("h5",{children:" Additional Notes"}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"contractor_notes",children:"Contractor Notes"}),e.jsx("textarea",{id:"contractor_notes",name:"contractor_notes",value:X.contractor_notes,onChange:z,placeholder:"Any additional notes for the homeowner...",rows:"3"})]})]}),e.jsxs("div",{className:"form-actions",children:[e.jsx("button",{type:"button",onClick:()=>{S(""),U({stage_name:"",requested_amount:"",work_description:"",completion_percentage:"",materials_used:"",labor_count:"",work_start_date:"",work_end_date:"",contractor_notes:"",quality_check:!1,safety_compliance:!1}),Y({})},className:"cancel-btn",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:O,className:"submit-btn",children:O?"Submitting...":"Submit Payment Request"})]})]})]}),!l&&e.jsx("div",{className:"no-project-selected",children:e.jsxs("div",{className:"info-message",children:[e.jsx("div",{className:"info-icon",children:""}),e.jsx("h4",{children:"Select a Project"}),e.jsx("p",{children:"Choose a project above to start creating payment requests for construction stages."})]})}),l&&!D&&e.jsx("div",{className:"no-stage-selected",children:e.jsxs("div",{className:"info-message",children:[e.jsx("div",{className:"info-icon",children:""}),e.jsx("h4",{children:"Select Construction Stage"}),e.jsx("p",{children:"Choose a construction stage above to create a payment request with stage-specific information."})]})})]})},f6=({project:t,onSelect:a,isSelected:s=!1})=>{if(!t)return null;const i=u=>u?`${parseFloat(u).toLocaleString("en-IN")}`:"Not specified",o=u=>u?new Date(u).toLocaleDateString("en-IN",{year:"numeric",month:"short",day:"numeric"}):"Not specified",l=u=>{const A={created:{color:"#17a2b8",bg:"#d1ecf1",text:" Created",icon:""},in_progress:{color:"#ffc107",bg:"#fff3cd",text:" In Progress",icon:""},completed:{color:"#28a745",bg:"#d4edda",text:" Completed",icon:""},on_hold:{color:"#6c757d",bg:"#f8f9fa",text:" On Hold",icon:""},cancelled:{color:"#dc3545",bg:"#f8d7da",text:" Cancelled",icon:""}},p=A[u]||A.created;return e.jsx("span",{className:"status-badge",style:{backgroundColor:p.bg,color:p.color,padding:"4px 12px",borderRadius:"20px",fontSize:"12px",fontWeight:"600",border:`1px solid ${p.color}20`,display:"inline-flex",alignItems:"center",gap:"4px"},children:p.text})},d=u=>u>=80?"#28a745":u>=50?"#ffc107":u>=20?"#fd7e14":"#dc3545";return e.jsxs("div",{className:`project-info-card ${s?"selected":""}`,onClick:()=>a&&a(t),children:[e.jsxs("div",{className:"project-header",children:[e.jsxs("div",{className:"project-title-section",children:[e.jsxs("h3",{className:"project-name",children:[" ",t.project_name]}),e.jsxs("div",{className:"project-id",children:["ID: #",t.id]})]}),e.jsx("div",{className:"project-status",children:l(t.status)})]}),e.jsxs("div",{className:"project-details",children:[e.jsxs("div",{className:"detail-row",children:[e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-icon",children:""}),e.jsxs("div",{className:"detail-content",children:[e.jsx("span",{className:"detail-label",children:"Homeowner"}),e.jsx("span",{className:"detail-value",children:t.homeowner_name})]})]}),t.homeowner_email&&e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-icon",children:""}),e.jsxs("div",{className:"detail-content",children:[e.jsx("span",{className:"detail-label",children:"Email"}),e.jsx("span",{className:"detail-value",children:t.homeowner_email})]})]})]}),e.jsxs("div",{className:"detail-row",children:[t.estimate_cost&&e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-icon",children:""}),e.jsxs("div",{className:"detail-content",children:[e.jsx("span",{className:"detail-label",children:"Budget"}),e.jsx("span",{className:"detail-value",children:i(t.estimate_cost)})]})]}),t.timeline&&e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-icon",children:""}),e.jsxs("div",{className:"detail-content",children:[e.jsx("span",{className:"detail-label",children:"Timeline"}),e.jsx("span",{className:"detail-value",children:t.timeline})]})]})]}),t.location&&e.jsx("div",{className:"detail-row",children:e.jsxs("div",{className:"detail-item full-width",children:[e.jsx("span",{className:"detail-icon",children:""}),e.jsxs("div",{className:"detail-content",children:[e.jsx("span",{className:"detail-label",children:"Location"}),e.jsx("span",{className:"detail-value",children:t.location})]})]})}),t.current_stage&&e.jsxs("div",{className:"detail-row",children:[e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-icon",children:""}),e.jsxs("div",{className:"detail-content",children:[e.jsx("span",{className:"detail-label",children:"Current Stage"}),e.jsx("span",{className:"detail-value",children:t.current_stage})]})]}),t.completion_percentage!==void 0&&e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-icon",children:""}),e.jsxs("div",{className:"detail-content",children:[e.jsx("span",{className:"detail-label",children:"Progress"}),e.jsxs("div",{className:"progress-container",children:[e.jsx("div",{className:"progress-bar",children:e.jsx("div",{className:"progress-fill",style:{width:`${t.completion_percentage}%`,backgroundColor:d(t.completion_percentage)}})}),e.jsxs("span",{className:"progress-text",children:[t.completion_percentage,"%"]})]})]})]})]}),e.jsxs("div",{className:"detail-row",children:[t.created_at&&e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-icon",children:""}),e.jsxs("div",{className:"detail-content",children:[e.jsx("span",{className:"detail-label",children:"Created"}),e.jsx("span",{className:"detail-value",children:o(t.created_at)})]})]}),t.expected_completion_date&&e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-icon",children:""}),e.jsxs("div",{className:"detail-content",children:[e.jsx("span",{className:"detail-label",children:"Expected Completion"}),e.jsx("span",{className:"detail-value",children:o(t.expected_completion_date)})]})]})]})]}),a&&e.jsx("div",{className:"project-actions",children:e.jsx("button",{className:"select-project-btn",children:s?" Selected":" Select Project"})})]})},g6=({contractorId:t})=>{const a=Xn(),[s,i]=w.useState([]),[o,l]=w.useState(""),[d,u]=w.useState([]),[A,p]=w.useState(!1),[m,b]=w.useState(!0),[v,x]=w.useState(null),[C,D]=w.useState(!1),[S,_]=w.useState(null),[N,O]=w.useState(""),[L,te]=w.useState({total_requests:0,total_requested:0,total_approved:0,total_paid:0,pending_count:0,approved_count:0,rejected_count:0});w.useEffect(()=>{G()},[t]),w.useEffect(()=>{o&&X()},[o]);const G=async()=>{try{b(!0);const z=await(await fetch(`/buildhub/backend/api/contractor/get_contractor_projects.php?contractor_id=${t}`,{credentials:"include"})).json();if(z.success){const ee=z.data.projects||[];i(ee),ee.length>0&&l(ee[0].id)}else a.error("Failed to load projects: "+(z.message||"Unknown error")),i([])}catch(R){console.error("Error loading projects:",R),a.error("Failed to load projects. Please try again."),i([])}finally{b(!1)}},X=async()=>{if(o)try{p(!0);const z=await(await fetch(`/buildhub/backend/api/contractor/get_payment_history.php?project_id=${o}`,{credentials:"include"})).json();z.success?(u(z.data.payment_requests||[]),te(z.data.summary||{})):(a.error("Failed to load payment history: "+(z.message||"Unknown error")),u([]),te({}))}catch(R){console.error("Error loading payment history:",R),a.error("Failed to load payment history. Please try again."),u([]),te({})}finally{p(!1)}},U=R=>{const z={pending:{color:"#ffc107",bg:"#fff3cd",text:" Pending Review"},approved:{color:"#28a745",bg:"#d4edda",text:" Approved"},rejected:{color:"#dc3545",bg:"#f8d7da",text:" Rejected"},paid:{color:"#17a2b8",bg:"#d1ecf1",text:" Paid"}},ee=z[R]||z.pending;return e.jsx("span",{className:"status-badge",style:{backgroundColor:ee.bg,color:ee.color,padding:"4px 12px",borderRadius:"20px",fontSize:"12px",fontWeight:"600",border:`1px solid ${ee.color}20`},children:ee.text})},E=R=>`${parseFloat(R||0).toLocaleString("en-IN")}`,Y=R=>R?new Date(R).toLocaleDateString("en-IN",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A",T=R=>{a.info(`Upload receipt for ${R.stage_name} stage payment of ${E(R.approved_amount||R.requested_amount)}`);const z=`/buildhub/upload-receipt?payment_id=${R.id}&stage=${R.stage_name}&amount=${R.approved_amount||R.requested_amount}`;window.open(z,"_blank")},Q=async(R,z)=>{try{x(R),console.log("Verifying payment:",{paymentId:R,verificationStatus:z,notes:N});const ee=await fetch("/buildhub/backend/api/contractor/verify_payment_receipt.php",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({payment_id:R,verification_status:z,verification_notes:N})});console.log("Response status:",ee.status),console.log("Response headers:",Object.fromEntries(ee.headers.entries()));const le=ee.headers.get("content-type");if(!le||!le.includes("application/json")){const $=await ee.text();throw console.error("Non-JSON response:",$),new Error("Server returned an error. Please check if you are logged in and try again.")}const Be=await ee.json();console.log("Response data:",Be),Be.success?(a.success(Be.message),await X(),D(!1),_(null),O("")):(console.error("Verification failed:",Be.message),a.error(Be.message||"Failed to verify payment"))}catch(ee){console.error("Error verifying payment:",ee),a.error(ee.message||"Failed to verify payment. Please try again.")}finally{x(null)}},q=(R,z)=>{_({...R,verificationStatus:z}),O(""),D(!0)},ne=s.find(R=>R.id==o);return m?e.jsx("div",{className:"payment-history",children:e.jsxs("div",{className:"loading-projects",children:[e.jsx("div",{className:"loading-spinner",children:""}),e.jsx("p",{children:"Loading your projects..."})]})}):e.jsxs("div",{className:"payment-history",children:[e.jsxs("div",{className:"payment-history-header",children:[e.jsx("h3",{children:" Payment Request History"}),e.jsx("p",{children:"Track all your payment requests and homeowner responses"}),e.jsxs("div",{className:"project-selection",children:[e.jsx("label",{htmlFor:"project-select",children:"Select Project:"}),e.jsxs("select",{id:"project-select",value:o,onChange:R=>l(R.target.value),className:"project-select",children:[e.jsx("option",{value:"",children:"Choose a project..."}),s.map(R=>e.jsxs("option",{value:R.id,children:[R.project_name," - ",R.homeowner_name,R.estimate_cost?` (${R.estimate_cost.toLocaleString()})`:""]},R.id))]})]}),ne&&e.jsx(f6,{project:ne,isSelected:!0})]}),o&&Object.keys(L).length>0&&e.jsxs("div",{className:"payment-summary",children:[e.jsx("h4",{children:" Payment Summary"}),e.jsxs("div",{className:"summary-grid",children:[e.jsxs("div",{className:"summary-card",children:[e.jsx("div",{className:"summary-value",children:L.total_requests||0}),e.jsx("div",{className:"summary-label",children:"Total Requests"})]}),e.jsxs("div",{className:"summary-card",children:[e.jsx("div",{className:"summary-value",children:E(L.total_requested)}),e.jsx("div",{className:"summary-label",children:"Total Requested"})]}),e.jsxs("div",{className:"summary-card",children:[e.jsx("div",{className:"summary-value",children:E(L.total_approved)}),e.jsx("div",{className:"summary-label",children:"Total Approved"})]}),e.jsxs("div",{className:"summary-card",children:[e.jsx("div",{className:"summary-value",children:E(L.total_paid)}),e.jsx("div",{className:"summary-label",children:"Total Paid"})]})]}),e.jsxs("div",{className:"status-summary",children:[e.jsxs("div",{className:"status-item",children:[e.jsx("span",{className:"status-count pending",children:L.pending_count||0}),e.jsx("span",{className:"status-text",children:"Pending"})]}),e.jsxs("div",{className:"status-item",children:[e.jsx("span",{className:"status-count approved",children:L.approved_count||0}),e.jsx("span",{className:"status-text",children:"Approved"})]}),e.jsxs("div",{className:"status-item",children:[e.jsx("span",{className:"status-count rejected",children:L.rejected_count||0}),e.jsx("span",{className:"status-text",children:"Rejected"})]})]})]}),o&&e.jsxs("div",{className:"payment-history-list",children:[e.jsxs("div",{className:"list-header",children:[e.jsx("h4",{children:" Payment Request History"}),e.jsxs("button",{onClick:X,className:"refresh-btn",disabled:A,children:[""," Refresh"]})]}),A?e.jsxs("div",{className:"loading-history",children:[e.jsx("div",{className:"loading-spinner",children:""}),e.jsx("p",{children:"Loading payment history..."})]}):d.length===0?e.jsxs("div",{className:"no-history",children:[e.jsx("div",{className:"no-history-icon",children:""}),e.jsx("h4",{children:"No Payment Requests Yet"}),e.jsx("p",{children:"You haven't submitted any payment requests for this project yet."}),e.jsx("p",{children:'Use the "Request Payment" tab to submit your first payment request.'})]}):e.jsx("div",{className:"history-items",children:d.map((R,z)=>e.jsxs("div",{className:"history-item",children:[e.jsxs("div",{className:"history-item-header",children:[e.jsxs("div",{className:"stage-info",children:[e.jsxs("h5",{className:"stage-name",children:[" ",R.stage_name," Stage"]}),e.jsxs("span",{className:"completion-percentage",children:[R.completion_percentage,"% Complete"]})]}),e.jsxs("div",{className:"status-info",children:[U(R.status),e.jsxs("span",{className:"request-date",children:["Requested: ",Y(R.request_date)]})]})]}),e.jsxs("div",{className:"history-item-content",children:[e.jsxs("div",{className:"payment-amounts",children:[e.jsxs("div",{className:"amount-item",children:[e.jsx("span",{className:"amount-label",children:"Requested:"}),e.jsx("span",{className:"amount-value requested",children:E(R.requested_amount)})]}),R.approved_amount&&e.jsxs("div",{className:"amount-item",children:[e.jsx("span",{className:"amount-label",children:"Approved:"}),e.jsx("span",{className:"amount-value approved",children:E(R.approved_amount)})]}),R.status==="paid"&&e.jsxs("div",{className:"amount-item",children:[e.jsx("span",{className:"amount-label",children:"Paid:"}),e.jsx("span",{className:"amount-value paid",children:E(R.approved_amount||R.requested_amount)})]})]}),e.jsxs("div",{className:"work-description",children:[e.jsx("h6",{children:"Work Description:"}),e.jsx("p",{children:R.work_description})]}),R.contractor_notes&&e.jsxs("div",{className:"contractor-notes",children:[e.jsx("h6",{children:"Your Notes:"}),e.jsx("p",{children:R.contractor_notes})]}),R.status!=="pending"&&e.jsxs("div",{className:"homeowner-response",children:[e.jsx("h6",{children:" Homeowner Response:"}),e.jsxs("div",{className:"response-details",children:[e.jsxs("div",{className:"response-status",children:[e.jsx("strong",{children:"Decision:"})," ",U(R.status),R.response_date&&e.jsxs("span",{className:"response-date",children:["on ",Y(R.response_date)]})]}),R.homeowner_notes&&e.jsxs("div",{className:"response-notes",children:[e.jsx("strong",{children:"Homeowner Notes:"}),e.jsx("p",{className:"homeowner-notes-text",children:R.homeowner_notes})]}),R.status==="rejected"&&e.jsxs("div",{className:"rejection-reason",children:[e.jsx("strong",{children:"Reason for Rejection:"}),e.jsx("p",{className:"rejection-text",children:R.homeowner_notes||"No specific reason provided"})]}),R.status==="approved"&&R.approved_amount!==R.requested_amount&&e.jsxs("div",{className:"amount-adjustment",children:[e.jsx("strong",{children:"Amount Adjustment:"}),e.jsxs("p",{className:"adjustment-text",children:["Approved amount differs from requested amount.",R.homeowner_notes&&` Reason: ${R.homeowner_notes}`]})]})]})]}),(R.status==="approved"||R.status==="paid")&&R.receipt_file_path&&e.jsxs("div",{className:"receipt-information",children:[e.jsx("h6",{children:" Payment Receipt Information:"}),e.jsxs("div",{className:"receipt-details",children:[e.jsxs("div",{className:"receipt-summary",children:[e.jsxs("div",{className:"receipt-item",children:[e.jsx("strong",{children:"Payment Method:"}),e.jsxs("span",{className:"payment-method",children:[R.payment_method==="bank_transfer"&&" Bank Transfer",R.payment_method==="upi"&&" UPI Payment",R.payment_method==="cash"&&" Cash Payment",R.payment_method==="cheque"&&" Cheque Payment",R.payment_method==="other"&&" Other",!R.payment_method&&" Not specified"]})]}),R.transaction_reference&&e.jsxs("div",{className:"receipt-item",children:[e.jsx("strong",{children:"Transaction Reference:"}),e.jsx("span",{className:"transaction-ref",children:R.transaction_reference})]}),R.payment_date&&e.jsxs("div",{className:"receipt-item",children:[e.jsx("strong",{children:"Payment Date:"}),e.jsx("span",{className:"payment-date",children:new Date(R.payment_date).toLocaleDateString("en-IN")})]}),R.verification_status&&e.jsxs("div",{className:"receipt-item",children:[e.jsx("strong",{children:"Verification Status:"}),e.jsxs("span",{className:`verification-status ${R.verification_status}`,children:[R.verification_status==="pending"&&" Pending Verification",R.verification_status==="verified"&&" Verified",R.verification_status==="rejected"&&" Rejected"]})]})]}),R.receipt_file_path&&R.receipt_file_path.length>0&&e.jsxs("div",{className:"receipt-files",children:[e.jsx("strong",{children:"Uploaded Files:"}),e.jsx("div",{className:"files-list",children:R.receipt_file_path.map((ee,le)=>e.jsxs("div",{className:"file-item",children:[e.jsx("span",{className:"file-icon",children:ee.file_type&&ee.file_type.startsWith("image/")?"":""}),e.jsxs("div",{className:"file-details",children:[e.jsx("span",{className:"file-name",children:ee.original_name}),e.jsx("span",{className:"file-size",children:ee.file_size?`${(ee.file_size/1024/1024).toFixed(2)} MB`:""})]}),e.jsx("a",{href:`/buildhub/backend/${ee.file_path}`,target:"_blank",rel:"noopener noreferrer",className:"view-file-btn",title:"View file",children:" View"})]},le))})]}),R.verification_notes&&e.jsxs("div",{className:"verification-notes",children:[e.jsx("strong",{children:"Verification Notes:"}),e.jsx("p",{className:"verification-notes-text",children:R.verification_notes})]}),R.verified_at&&e.jsx("div",{className:"verification-timestamp",children:e.jsxs("small",{children:["Verified on ",Y(R.verified_at)]})}),R.verification_status==="pending"&&e.jsxs("div",{className:"verification-actions",children:[e.jsx("button",{className:"btn btn-verify",onClick:()=>q(R,"verified"),disabled:v===R.id,children:" Verify Payment"}),e.jsx("button",{className:"btn btn-reject",onClick:()=>q(R,"rejected"),disabled:v===R.id,children:" Request Correction"})]})]})]}),R.status==="approved"&&!R.receipt_file_path&&e.jsxs("div",{className:"receipt-pending",children:[e.jsxs("div",{className:"receipt-pending-message",children:[e.jsx("span",{className:"pending-icon",children:""}),e.jsxs("div",{className:"pending-text",children:[e.jsx("strong",{children:"Awaiting Payment Receipt"}),e.jsx("p",{children:"Homeowner needs to upload payment receipt for verification"})]})]}),e.jsx("div",{className:"receipt-upload-action",children:e.jsx("button",{className:"btn btn-upload-receipt",onClick:()=>T(R),children:" Upload Receipt"})})]})]}),e.jsx("div",{className:"history-item-footer",children:e.jsxs("div",{className:"timeline-info",children:[e.jsxs("span",{className:"timeline-item",children:[" Requested: ",Y(R.request_date)]}),R.response_date&&e.jsxs("span",{className:"timeline-item",children:[" Responded: ",Y(R.response_date)]})]})})]},R.id))})]}),!o&&s.length>0&&e.jsx("div",{className:"no-project-selected",children:e.jsxs("div",{className:"info-message",children:[e.jsx("div",{className:"info-icon",children:""}),e.jsx("h4",{children:"Select a Project"}),e.jsx("p",{children:"Choose a project above to view its payment request history."})]})}),s.length===0&&e.jsx("div",{className:"no-projects-available",children:e.jsxs("div",{className:"info-message",children:[e.jsx("div",{className:"info-icon",children:""}),e.jsx("h4",{children:"No Projects Available"}),e.jsx("p",{children:"You don't have any construction projects yet."}),e.jsx("p",{children:"Projects become available when homeowners accept your estimates."})]})}),C&&S&&e.jsx("div",{className:"modal-overlay",onClick:()=>D(!1),children:e.jsxs("div",{className:"modal-content",onClick:R=>R.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{children:S.verificationStatus==="verified"?" Verify Payment Receipt":" Request Receipt Correction"}),e.jsx("button",{className:"modal-close",onClick:()=>D(!1),children:""})]}),e.jsxs("div",{className:"modal-body",children:[e.jsxs("div",{className:"payment-summary-modal",children:[e.jsx("h4",{children:"Payment Details:"}),e.jsxs("p",{children:[e.jsx("strong",{children:"Stage:"})," ",S.stage_name]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Amount:"})," ",E(S.approved_amount||S.requested_amount)]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Payment Method:"})," ",S.payment_method||"Not specified"]}),S.transaction_reference&&e.jsxs("p",{children:[e.jsx("strong",{children:"Transaction Ref:"})," ",S.transaction_reference]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"verification-notes",children:S.verificationStatus==="verified"?"Verification Notes (Optional):":"Reason for Correction Request:"}),e.jsx("textarea",{id:"verification-notes",value:N,onChange:R=>O(R.target.value),placeholder:S.verificationStatus==="verified"?"Add any notes about the verification...":"Please explain what needs to be corrected...",rows:"4",className:"verification-notes-input"})]}),S.verificationStatus==="rejected"&&!N&&e.jsx("p",{className:"warning-text",children:" Please provide a reason for requesting correction"})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{className:"btn btn-cancel",onClick:()=>D(!1),disabled:v===S.id,children:"Cancel"}),e.jsx("button",{className:`btn ${S.verificationStatus==="verified"?"btn-verify":"btn-reject"}`,onClick:()=>Q(S.id,S.verificationStatus),disabled:v===S.id||S.verificationStatus==="rejected"&&!N,children:v===S.id?" Processing...":S.verificationStatus==="verified"?" Confirm Verification":" Request Correction"})]})]})})]})},x6=({isOpen:t,onClose:a,inboxItem:s,onSubmit:i})=>{const[o,l]=w.useState("basic"),[d,u]=w.useState({project_name:"",location:"",client_name:"",project_type:"Residential",timeline:"90 days",materials:{cement:{qty:"50",rate:"400",amount:"20000"},sand:{qty:"5",rate:"2000",amount:"10000"},bricks:{qty:"2000",rate:"8",amount:"16000"},steel:{qty:"1",rate:"15000",amount:"15000"},aggregate:{qty:"3",rate:"1500",amount:"4500"}},labor:{masonry:{qty:"1",rate:"15000",amount:"15000"},plumbing:{qty:"1",rate:"12000",amount:"12000"},electrical:{qty:"1",rate:"10000",amount:"10000"},painting:{qty:"1",rate:"8000",amount:"8000"},flooring:{qty:"1",rate:"5000",amount:"5000"}},utilities:{sanitary:{qty:"1",rate:"8000",amount:"8000"},kitchen:{qty:"1",rate:"12000",amount:"12000"},fixtures:{qty:"1",rate:"6000",amount:"6000"}},misc:{transport:{qty:"1",rate:"5000",amount:"5000"},contingency:{qty:"1",rate:"4600",amount:"4600"},permits:{qty:"1",rate:"2000",amount:"2000"}},notes:"",terms:"Payment: 30% advance, 40% on foundation completion, 30% on project completion"}),[A,p]=w.useState({materials:0,labor:0,utilities:0,misc:0,grand:0}),m=w.useRef(null);w.useEffect(()=>{if(s&&t){const _=s.payload||{};u(N=>({...N,project_name:_.plan_name||`Project for ${s.homeowner_name}`,client_name:s.homeowner_name||"",location:_.location||""}))}},[s,t]),w.useEffect(()=>{const _=X=>Object.values(X).reduce((U,E)=>U+(parseFloat(E.amount)||0),0),N=_(d.materials),O=_(d.labor),L=_(d.utilities),te=_(d.misc),G=N+O+L+te;p({materials:N,labor:O,utilities:L,misc:te,grand:G})},[d]);const b=(_,N,O,L)=>{u(te=>{const G={...te};if(_&&N){if(G[_]||(G[_]={}),G[_][N]||(G[_][N]={}),G[_][N][O]=L,O==="qty"||O==="rate"){const X=parseFloat(G[_][N].qty)||0,U=parseFloat(G[_][N].rate)||0;G[_][N].amount=(X*U).toString()}}else G[O]=L;return G})},v=_=>{l(_);const N=document.getElementById(`section-${_}`);if(N&&m.current){const O=m.current,L=N.getBoundingClientRect(),te=O.getBoundingClientRect(),X=O.scrollTop+L.top-te.top-20;O.scrollTo({top:X,behavior:"smooth"})}},x=()=>{m.current&&m.current.scrollTo({top:0,behavior:"smooth"})},C=()=>{m.current&&m.current.scrollTo({top:m.current.scrollHeight,behavior:"smooth"})},D=()=>{const _={...d,totals:A,inbox_item_id:s?.id,homeowner_id:s?.homeowner_id,contractor_id:JSON.parse(sessionStorage.getItem("user")||"{}").id};i(_)},S=(_,N,O,L,te="")=>e.jsxs("div",{className:"form-section",id:`section-${_}`,children:[e.jsxs("h3",{className:"section-title",children:[e.jsx("span",{className:"section-icon",children:O}),N]}),e.jsxs("div",{className:"section-content",children:[e.jsx("div",{className:"items-grid",children:Object.entries(L).map(([G,X])=>e.jsxs("div",{className:"item-row",children:[e.jsx("div",{className:"item-name",children:G.replace(/_/g," ").replace(/\b\w/g,U=>U.toUpperCase())}),e.jsxs("div",{className:"item-inputs",children:[e.jsx("input",{type:"number",placeholder:"Qty",value:X.qty,onChange:U=>b(_,G,"qty",U.target.value),className:"qty-input"}),e.jsx("span",{className:"unit",children:te}),e.jsx("input",{type:"number",placeholder:"Rate",value:X.rate,onChange:U=>b(_,G,"rate",U.target.value),className:"rate-input"}),e.jsxs("div",{className:"amount",children:["",parseFloat(X.amount||0).toLocaleString("en-IN")]})]})]},G))}),e.jsxs("div",{className:"section-total",children:["Total ",N,": ",A[_]?.toLocaleString("en-IN")||"0"]})]})]});return t?e.jsx("div",{className:"estimation-modal",children:e.jsx("div",{className:"modal-content",children:e.jsxs("div",{className:"enhanced-estimation-form",children:[e.jsx("button",{className:"floating-close-btn",onClick:a,title:"Close Form",children:""}),e.jsxs("div",{className:"form-header",children:[e.jsxs("div",{className:"form-title",children:[e.jsx("h2",{children:" Enhanced Cost Estimation"}),e.jsx("p",{children:"Create detailed and professional cost estimates"})]}),e.jsxs("div",{className:"form-actions",children:[e.jsx("button",{className:"btn btn-secondary",children:"Show Preview"}),e.jsx("button",{className:"btn btn-secondary",children:" Save Draft"}),e.jsx("button",{className:"btn btn-secondary",onClick:C,children:" Go to Submit"}),e.jsx("button",{className:"btn btn-close",onClick:a,children:" Close"})]})]}),e.jsxs("div",{className:"form-layout",children:[e.jsxs("div",{className:"form-navigation",children:[e.jsxs("div",{className:"navigation-header",children:[e.jsx("h4",{children:" Form Sections"}),e.jsxs("div",{className:"scroll-controls",children:[e.jsx("button",{className:"scroll-control-btn",onClick:x,children:""}),e.jsx("button",{className:"scroll-control-btn",onClick:C,children:""})]})]}),e.jsxs("button",{className:`nav-item ${o==="basic"?"active":""}`,onClick:()=>v("basic"),children:[e.jsx("span",{className:"nav-icon",children:""}),e.jsx("span",{className:"nav-title",children:"Basic Info"})]}),e.jsxs("button",{className:`nav-item ${o==="materials"?"active":""}`,onClick:()=>v("materials"),children:[e.jsx("span",{className:"nav-icon",children:""}),e.jsx("span",{className:"nav-title",children:"Materials"})]}),e.jsxs("button",{className:`nav-item ${o==="labor"?"active":""}`,onClick:()=>v("labor"),children:[e.jsx("span",{className:"nav-icon",children:""}),e.jsx("span",{className:"nav-title",children:"Labor"})]}),e.jsxs("button",{className:`nav-item ${o==="utilities"?"active":""}`,onClick:()=>v("utilities"),children:[e.jsx("span",{className:"nav-icon",children:""}),e.jsx("span",{className:"nav-title",children:"Utilities"})]}),e.jsxs("button",{className:`nav-item ${o==="misc"?"active":""}`,onClick:()=>v("misc"),children:[e.jsx("span",{className:"nav-icon",children:""}),e.jsx("span",{className:"nav-title",children:"Miscellaneous"})]}),e.jsxs("button",{className:`nav-item ${o==="totals"?"active":""}`,onClick:()=>v("totals"),children:[e.jsx("span",{className:"nav-icon",children:""}),e.jsx("span",{className:"nav-title",children:"Totals"})]}),e.jsxs("button",{className:"nav-item submit-nav",onClick:C,children:[e.jsx("span",{className:"nav-icon",children:""}),e.jsx("span",{className:"nav-title",children:"Submit Form"})]})]}),e.jsxs("div",{className:"form-content",ref:m,children:[e.jsxs("div",{className:"form-section",id:"section-basic",children:[e.jsxs("h3",{className:"section-title",children:[e.jsx("span",{className:"section-icon",children:""}),"Basic Project Information"]}),e.jsx("div",{className:"section-content",children:e.jsxs("div",{className:"basic-info-grid",children:[e.jsxs("div",{className:"input-group",children:[e.jsx("label",{children:"Project Name"}),e.jsx("input",{type:"text",value:d.project_name,onChange:_=>b(null,null,"project_name",_.target.value),placeholder:"Enter project name"})]}),e.jsxs("div",{className:"input-group",children:[e.jsx("label",{children:"Location"}),e.jsx("input",{type:"text",value:d.location,onChange:_=>b(null,null,"location",_.target.value),placeholder:"Enter project location"})]}),e.jsxs("div",{className:"input-group",children:[e.jsx("label",{children:"Client Name"}),e.jsx("input",{type:"text",value:d.client_name,onChange:_=>b(null,null,"client_name",_.target.value),placeholder:"Enter client name"})]}),e.jsxs("div",{className:"input-group",children:[e.jsx("label",{children:"Project Type"}),e.jsxs("select",{value:d.project_type,onChange:_=>b(null,null,"project_type",_.target.value),children:[e.jsx("option",{value:"Residential",children:"Residential"}),e.jsx("option",{value:"Commercial",children:"Commercial"}),e.jsx("option",{value:"Industrial",children:"Industrial"})]})]}),e.jsxs("div",{className:"input-group",children:[e.jsx("label",{children:"Timeline"}),e.jsx("input",{type:"text",value:d.timeline,onChange:_=>b(null,null,"timeline",_.target.value),placeholder:"e.g., 90 days"})]})]})})]}),S("materials","Material Costs","",d.materials,"units"),S("labor","Labor Charges","",d.labor,"work"),S("utilities","Utilities & Fixtures","",d.utilities,"set"),S("misc","Miscellaneous Costs","",d.misc,"item"),e.jsxs("div",{className:"form-section",id:"section-totals",children:[e.jsxs("h3",{className:"section-title",children:[e.jsx("span",{className:"section-icon",children:""}),"Cost Summary"]}),e.jsx("div",{className:"section-content",children:e.jsxs("div",{className:"totals-grid",children:[e.jsxs("div",{className:"total-item",children:[e.jsx("span",{children:"Materials Cost:"}),e.jsxs("span",{children:["",A.materials.toLocaleString("en-IN")]})]}),e.jsxs("div",{className:"total-item",children:[e.jsx("span",{children:"Labor Cost:"}),e.jsxs("span",{children:["",A.labor.toLocaleString("en-IN")]})]}),e.jsxs("div",{className:"total-item",children:[e.jsx("span",{children:"Utilities Cost:"}),e.jsxs("span",{children:["",A.utilities.toLocaleString("en-IN")]})]}),e.jsxs("div",{className:"total-item",children:[e.jsx("span",{children:"Miscellaneous Cost:"}),e.jsxs("span",{children:["",A.misc.toLocaleString("en-IN")]})]}),e.jsxs("div",{className:"total-item grand-total",children:[e.jsx("span",{children:"GRAND TOTAL:"}),e.jsxs("span",{children:["",A.grand.toLocaleString("en-IN")]})]})]})})]}),e.jsxs("div",{className:"form-section",id:"section-details",children:[e.jsxs("h3",{className:"section-title",children:[e.jsx("span",{className:"section-icon",children:""}),"Additional Details"]}),e.jsxs("div",{className:"section-content",children:[e.jsxs("div",{className:"input-group",children:[e.jsx("label",{children:"Notes & Specifications"}),e.jsx("textarea",{value:d.notes,onChange:_=>b(null,null,"notes",_.target.value),placeholder:"Add any additional notes, specifications, or requirements...",rows:"4"})]}),e.jsxs("div",{className:"input-group",children:[e.jsx("label",{children:"Terms & Conditions"}),e.jsx("textarea",{value:d.terms,onChange:_=>b(null,null,"terms",_.target.value),placeholder:"Payment terms, warranty, timeline conditions...",rows:"3"})]})]})]}),e.jsxs("div",{className:"form-footer",id:"form-submit-section",children:[e.jsx("div",{className:"form-progress",children:e.jsxs("div",{className:"progress-info",children:[e.jsx("span",{className:"progress-text",children:" Ready to submit your professional estimate"}),e.jsxs("div",{className:"progress-stats",children:[e.jsxs("span",{children:["Total: ",A.grand.toLocaleString("en-IN")]}),e.jsx("span",{children:""}),e.jsxs("span",{children:["Timeline: ",d.timeline]}),e.jsx("span",{children:""}),e.jsx("span",{children:" All sections complete"})]})]})}),e.jsxs("div",{className:"form-actions-row",children:[e.jsx("button",{className:"btn btn-secondary",onClick:a,children:"Cancel"}),e.jsx("button",{className:"btn btn-secondary",children:"Reset Form"}),e.jsx("button",{className:"btn btn-secondary",onClick:x,children:" Back to Top"}),e.jsx("button",{className:"submit-btn",onClick:D,children:" Submit Professional Estimate"})]})]})]})]})]})})}):null},y6=()=>{const t=$i(),a=Xn(),[s,i]=w.useState("overview"),[o,l]=w.useState(null),[d,u]=w.useState([]),[A,p]=w.useState([]),[m,b]=w.useState([]),[v,x]=w.useState({}),[C,D]=w.useState({}),[S,_]=w.useState([]),[N,O]=w.useState([]),[L,te]=w.useState([]),[G,X]=w.useState([]),[U,E]=w.useState(!1),[Y,T]=w.useState(""),[Q,q]=w.useState(""),[ne]=w.useState(!1),[R,z]=w.useState({}),[ee,le]=w.useState(null),Be=w.useRef(null),[$,ue]=w.useState(0),[k,I]=w.useState(0),[H,re]=w.useState(0),[J,V]=w.useState(0),[oe,K]=w.useState(0),[Ne,Ee]=w.useState(""),[st,ut]=w.useState({}),[Ge,_e]=w.useState({}),[Et,Mt]=w.useState(null),[Ze,Je]=w.useState("submit"),[mt,ve]=w.useState(!1),[et,Oe]=w.useState(null),[kt,xt]=w.useState(!1),[lt,Ut]=w.useState({isOpen:!1,title:"",message:"",onConfirm:null,type:"danger"}),_t=(ge,it,$e,zt="danger")=>{Ut({isOpen:!0,title:ge,message:it,onConfirm:$e,type:zt})},Nt=()=>{Ut({isOpen:!1,title:"",message:"",onConfirm:null,type:"danger"})},qt=()=>{xt(!1),Oe(null)},Bt=async ge=>{try{const $e=await(await fetch("/buildhub/backend/api/contractor/submit_estimate.php",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(ge)})).json();if($e.success){a.success(`Estimate submitted successfully! Total: ${$e.data.total_cost?.toLocaleString("en-IN")||"0"}`),qt();const zt=JSON.parse(sessionStorage.getItem("user")||"{}");if(zt?.id){try{const yt=await(await fetch(`/buildhub/backend/api/contractor/get_inbox.php?contractor_id=${zt.id}`,{credentials:"include"})).json().catch(()=>({}));yt?.success&&b(Array.isArray(yt.items)?yt.items:[])}catch{}try{const yt=await(await fetch(`/buildhub/backend/api/contractor/get_my_estimates.php?contractor_id=${zt.id}`,{credentials:"include"})).json().catch(()=>({}));yt?.success&&O(Array.isArray(yt.estimates)?yt.estimates:[])}catch{}}}else a.error($e.message||"Failed to submit estimate")}catch(it){console.error("Error submitting estimate:",it),a.error("Error submitting estimate. Please try again.")}},Xt=async(ge,it)=>{try{const $e=JSON.parse(sessionStorage.getItem("user")||"{}");if(!$e.id||!ge)return;(await(await fetch("/buildhub/backend/api/contractor/save_estimate_draft.php",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({contractor_id:$e.id,send_id:ge,draft_data:it})})).json()).success&&_e(yt=>({...yt,[ge]:new Date().toLocaleTimeString()}))}catch($e){console.error("Error saving draft:",$e)}},ta=async ge=>{try{const it=JSON.parse(sessionStorage.getItem("user")||"{}");if(!it.id||!ge)return null;const zt=await(await fetch(`/buildhub/backend/api/contractor/save_estimate_draft.php?contractor_id=${it.id}&send_id=${ge}`,{credentials:"include"})).json();if(zt.success&&zt.draft_data)return ut(St=>({...St,[ge]:zt.draft_data})),_e(St=>({...St,[ge]:new Date(zt.last_saved).toLocaleTimeString()})),zt.draft_data}catch(it){console.error("Error loading draft:",it)}return null},ie=(ge,it)=>{if(!it)return;Et&&clearTimeout(Et);const $e={};it.querySelectorAll("input, textarea, select").forEach(yt=>{yt.name&&yt.value&&($e[yt.name]=yt.value)}),ut(yt=>({...yt,[ge]:$e}));const St=setTimeout(()=>{Xt(ge,$e)},2e3);Mt(St)},at=(ge,it)=>{!ge||!it||Object.entries(it).forEach(([$e,zt])=>{const St=ge.querySelector(`[name="${$e}"]`);St&&!St.readOnly&&(St.value=zt,St.dispatchEvent(new Event("input",{bubbles:!0})))})},Ot=async ge=>{try{const it=new FormData(ge),$e=Ht=>it.get(Ht)||"",zt=new Date().toLocaleDateString("en-IN",{year:"numeric",month:"long",day:"numeric"}),St=o?.first_name&&o?.last_name?`${o.first_name} ${o.last_name}`:"Contractor Name",yt=document.createElement("div");yt.style.position="absolute",yt.style.left="-9999px",yt.style.top="-9999px",yt.style.width="210mm",yt.style.padding="20mm",yt.style.backgroundColor="white",yt.style.fontFamily="Times New Roman, serif",yt.style.fontSize="12px",yt.style.lineHeight="1.4",yt.style.color="#1a1a1a";const Va=`
      <style>
        @page { 
          margin: 20mm; 
          size: A4;
        }
        body{
          font-family: 'Times New Roman', serif;
          color: #1a1a1a;
          margin: 0;
          padding: 0;
          line-height: 1.4;
          background: white;
        }
        .header {
          text-align: center;
          margin-bottom: 30px;
          border-bottom: 3px solid #2c3e50;
          padding-bottom: 20px;
        }
        .company-logo {
          width: 120px;
          height: 120px;
          margin: 0 auto 15px;
          border: 2px solid #2c3e50;
          border-radius: 50%;
          display: flex;
          align-items: center;
          justify-content: center;
          font-size: 48px;
          font-weight: bold;
          color: #2c3e50;
          background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
        }
        .company-name {
          font-size: 28px;
          font-weight: bold;
          color: #2c3e50;
          margin: 10px 0 5px 0;
          text-transform: uppercase;
          letter-spacing: 2px;
        }
        .company-tagline {
          font-size: 14px;
          color: #6c757d;
          font-style: italic;
          margin-bottom: 10px;
        }
        .company-details {
          font-size: 12px;
          color: #495057;
          line-height: 1.3;
        }
        .document-title {
          text-align: center;
          margin: 30px 0;
          font-size: 24px;
          font-weight: bold;
          color: #2c3e50;
          text-transform: uppercase;
          letter-spacing: 1px;
        }
        .estimate-info {
          display: grid;
          grid-template-columns: 1fr 1fr;
          gap: 20px;
          margin-bottom: 30px;
          padding: 15px;
          background: #f8f9fa;
          border-left: 4px solid #2c3e50;
        }
        .info-section h3 {
          margin: 0 0 10px 0;
          font-size: 16px;
          color: #2c3e50;
          border-bottom: 1px solid #dee2e6;
          padding-bottom: 5px;
        }
        .info-section p {
          margin: 5px 0;
          font-size: 14px;
        }
        .cost-breakdown {
          margin: 30px 0;
        }
        .cost-breakdown h2 {
          font-size: 20px;
          color: #2c3e50;
          border-bottom: 2px solid #2c3e50;
          padding-bottom: 10px;
          margin-bottom: 20px;
        }
        .cost-table {
          width: 100%;
          border-collapse: collapse;
          margin-bottom: 20px;
          box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .cost-table th {
          background: #2c3e50;
          color: white;
          padding: 12px;
          text-align: left;
          font-weight: bold;
          font-size: 14px;
        }
        .cost-table td {
          padding: 10px 12px;
          border-bottom: 1px solid #dee2e6;
          font-size: 14px;
        }
        .cost-table tr:nth-child(even) {
          background: #f8f9fa;
        }
        .cost-table tr:hover {
          background: #e9ecef;
        }
        .total-section {
          margin: 30px 0;
          padding: 20px;
          background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
          color: white;
          border-radius: 8px;
        }
        .total-section h2 {
          margin: 0 0 15px 0;
          font-size: 18px;
          text-align: center;
        }
        .total-row {
          display: flex;
          justify-content: space-between;
          margin: 8px 0;
          font-size: 16px;
        }
        .grand-total {
          border-top: 2px solid white;
          padding-top: 10px;
          margin-top: 15px;
          font-size: 18px;
          font-weight: bold;
        }
        .terms-section {
          margin: 30px 0;
          padding: 20px;
          background: #f8f9fa;
          border-left: 4px solid #28a745;
        }
        .terms-section h3 {
          margin: 0 0 15px 0;
          color: #28a745;
          font-size: 16px;
        }
        .terms-section p {
          margin: 8px 0;
          font-size: 14px;
          line-height: 1.5;
        }
        .signature-section {
          margin-top: 50px;
          display: grid;
          grid-template-columns: 1fr 1fr;
          gap: 40px;
        }
        .signature-box {
          text-align: center;
          padding: 20px;
          border: 2px solid #2c3e50;
          border-radius: 8px;
          background: #f8f9fa;
        }
        .signature-line {
          border-bottom: 2px solid #2c3e50;
          margin: 40px 0 10px 0;
          height: 2px;
        }
        .signature-label {
          font-size: 14px;
          font-weight: bold;
          color: #2c3e50;
          margin-top: 10px;
        }
        .contractor-seal {
          width: 100px;
          height: 100px;
          border: 3px solid #dc3545;
          border-radius: 50%;
          margin: 0 auto 15px;
          display: flex;
          align-items: center;
          justify-content: center;
          font-size: 12px;
          font-weight: bold;
          color: #dc3545;
          background: white;
          text-align: center;
          line-height: 1.2;
        }
        .footer {
          margin-top: 40px;
          text-align: center;
          font-size: 12px;
          color: #6c757d;
          border-top: 1px solid #dee2e6;
          padding-top: 15px;
        }
        @media print {
          body { margin: 0; }
          .header { page-break-inside: avoid; }
          .signature-section { page-break-inside: avoid; }
        }
      </style>
      </head><body>
        <!-- Company Header -->
        <div class="header">
          <div class="company-logo"></div>
          <div class="company-name">${St} Construction</div>
          <div class="company-tagline">Professional Construction Services</div>
          <div class="company-details">
             Email: ${o?.email||"contact@company.com"} | 
             Phone: ${o?.phone||"+91-XXXXX-XXXXX"} | 
             License: ${o?.license_number||"LIC-XXXXX"}
          </div>
        </div>

        <!-- Document Title -->
        <div class="document-title">Cost Estimate Report</div>

        <!-- Estimate Information -->
        <div class="estimate-info">
          <div class="info-section">
            <h3>Project Details</h3>
            <p><strong>Project Name:</strong> ${$e("structured[project_name]")||$e("project_name")||"Construction Project"}</p>
            <p><strong>Location:</strong> ${$e("structured[project_address]")||$e("location")||"Project Location"}</p>
            <p><strong>Client:</strong> ${$e("structured[client_name]")||$e("client_name")||"Client Name"}</p>
            <p><strong>Project Type:</strong> ${$e("project_type")||"Residential/Commercial"}</p>
        </div>
          <div class="info-section">
            <h3>Estimate Information</h3>
            <p><strong>Estimate Date:</strong> ${zt}</p>
            <p><strong>Estimate Valid Until:</strong> ${new Date(Date.now()+720*60*60*1e3).toLocaleDateString("en-IN")}</p>
            <p><strong>Project Duration:</strong> ${$e("timeline")||"90 days"}</p>
            <p><strong>Estimate #:</strong> EST-${Date.now().toString().slice(-6)}</p>
        </div>
        </div>

        <!-- Cost Breakdown -->
        <div class="cost-breakdown">
          <h2>Detailed Cost Breakdown</h2>
          <table class="cost-table">
            <thead>
              <tr>
                <th>Item Description</th>
                <th>Quantity</th>
                <th>Unit Rate ()</th>
                <th>Amount ()</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td><strong>MATERIALS</strong></td>
                <td></td>
                <td></td>
                <td></td>
              </tr>
              <tr>
                <td>Cement (OPC 43 Grade)</td>
                <td>${$e("structured[materials][cement][qty]")||"50"} bags</td>
                <td>${$e("structured[materials][cement][rate]")||"400"}</td>
                <td>${(parseFloat($e("structured[materials][cement][qty]")||"50")*parseFloat($e("structured[materials][cement][rate]")||"400")).toLocaleString("en-IN")}</td>
              </tr>
              <tr>
                <td>Sand (River Sand)</td>
                <td>${$e("structured[materials][sand][qty]")||"5"} m</td>
                <td>${$e("structured[materials][sand][rate]")||"2000"}</td>
                <td>${(parseFloat($e("structured[materials][sand][qty]")||"5")*parseFloat($e("structured[materials][sand][rate]")||"2000")).toLocaleString("en-IN")}</td>
              </tr>
              <tr>
                <td>Bricks (Red Clay)</td>
                <td>${$e("structured[materials][bricks][qty]")||"2000"} nos</td>
                <td>${$e("structured[materials][bricks][rate]")||"8"}</td>
                <td>${(parseFloat($e("structured[materials][bricks][qty]")||"2000")*parseFloat($e("structured[materials][bricks][rate]")||"8")).toLocaleString("en-IN")}</td>
              </tr>
              <tr>
                <td><strong>LABOR</strong></td>
                <td></td>
                <td></td>
                <td></td>
              </tr>
              <tr>
                <td>Masonry Work</td>
                <td>${$e("structured[labor][masonry][qty]")||"1"} unit</td>
                <td>${$e("structured[labor][masonry][rate]")||"15000"}</td>
                <td>${(parseFloat($e("structured[labor][masonry][qty]")||"1")*parseFloat($e("structured[labor][masonry][rate]")||"15000")).toLocaleString("en-IN")}</td>
              </tr>
              <tr>
                <td>Plumbing Work</td>
                <td>${$e("structured[labor][plumbing][qty]")||"1"} unit</td>
                <td>${$e("structured[labor][plumbing][rate]")||"12000"}</td>
                <td>${(parseFloat($e("structured[labor][plumbing][qty]")||"1")*parseFloat($e("structured[labor][plumbing][rate]")||"12000")).toLocaleString("en-IN")}</td>
              </tr>
              <tr>
                <td>Electrical Work</td>
                <td>${$e("structured[labor][electrical][qty]")||"1"} unit</td>
                <td>${$e("structured[labor][electrical][rate]")||"10000"}</td>
                <td>${(parseFloat($e("structured[labor][electrical][qty]")||"1")*parseFloat($e("structured[labor][electrical][rate]")||"10000")).toLocaleString("en-IN")}</td>
              </tr>
            </tbody>
          </table>
        </div>

        <!-- Total Section -->
        <div class="total-section">
          <h2>Cost Summary</h2>
          <div class="total-row">
            <span>Materials Cost:</span>
            <span>${$e("structured[totals][materials_total]")||"50000"}</span>
        </div>
          <div class="total-row">
            <span>Labor Cost:</span>
            <span>${$e("structured[totals][labor_total]")||"37000"}</span>
          </div>
          <div class="total-row">
            <span>Transportation:</span>
            <span>${$e("structured[totals][transport_total]")||"5000"}</span>
          </div>
          <div class="total-row">
            <span>Contingency (5%):</span>
            <span>${$e("structured[totals][contingency_total]")||"4600"}</span>
          </div>
          <div class="total-row grand-total">
            <span>GRAND TOTAL:</span>
            <span>${$e("structured[totals][grand_total]")||"96600"}</span>
          </div>
        </div>

        <!-- Terms and Conditions -->
        <div class="terms-section">
          <h3>Terms & Conditions</h3>
          <p><strong>Payment Terms:</strong> 30% advance, 40% on completion of foundation, 30% on completion</p>
          <p><strong>Validity:</strong> This estimate is valid for 30 days from the date of issue</p>
          <p><strong>Materials:</strong> All materials will be of standard quality as per specifications</p>
          <p><strong>Timeline:</strong> Project completion within ${$e("timeline")||"90"} days from commencement</p>
          <p><strong>Warranty:</strong> 1 year warranty on workmanship, 5 years on structural elements</p>
          <p><strong>Notes:</strong> ${$e("notes")||"All work to be done as per approved drawings and specifications"}</p>
        </div>

        <!-- Signature Section -->
        <div class="signature-section">
          <div class="signature-box">
            <div class="signature-line"></div>
            <div class="signature-label">Client Signature</div>
            <p style="margin-top: 10px; font-size: 12px; color: #6c757d;">Date: _______________</p>
          </div>
          <div class="signature-box">
            <div class="contractor-seal">
              <div>OFFICIAL<br/>SEAL</div>
            </div>
            <div class="signature-line"></div>
            <div class="signature-label">${St}</div>
            <p style="margin-top: 5px; font-size: 12px; color: #6c757d;">Authorized Contractor</p>
            <p style="margin-top: 5px; font-size: 12px; color: #6c757d;">Date: ${zt}</p>
          </div>
        </div>

        <!-- Footer -->
        <div class="footer">
          <p>This is a computer-generated estimate. For any clarifications, please contact us.</p>
          <p> ${new Date().getFullYear()} ${St} Construction. All rights reserved.</p>
        </div>
      </body></html>`;yt.innerHTML=Va,document.body.appendChild(yt),console.log("Converting HTML to canvas...");const Zt=await Gc(yt,{scale:2,useCORS:!0,allowTaint:!0,backgroundColor:"#ffffff"});console.log("Canvas created:",Zt.width,"x",Zt.height),document.body.removeChild(yt),console.log("Creating PDF...");const W=new ua("p","mm","a4"),me=Zt.toDataURL("image/png"),ke=210,tt=295,ht=Zt.height*ke/Zt.width;let Lt=ht;console.log("Image dimensions:",ke,"x",ht);let It=0;for(W.addImage(me,"PNG",0,It,ke,ht),Lt-=tt;Lt>=0;)It=Lt-ht,W.addPage(),W.addImage(me,"PNG",0,It,ke,ht),Lt-=tt;const Jt=`Estimate_${St.replace(/\s+/g,"_")}_${Date.now().toString().slice(-6)}.pdf`;console.log("Saving PDF as:",Jt);try{const Ht=W.output("blob"),Wt=URL.createObjectURL(Ht),wa=document.createElement("a");wa.href=Wt,wa.download=Jt,wa.style.display="none",document.body.appendChild(wa),wa.click(),document.body.removeChild(wa),URL.revokeObjectURL(Wt),console.log("PDF downloaded via blob method")}catch(Ht){console.log("Blob method failed, trying direct save:",Ht),W.save(Jt)}console.log("PDF save method called")}catch(it){console.error("Error generating PDF report:",it),a.error("Error generating PDF report")}};w.useEffect(()=>(window.__bhCalcSectionTotals=ge=>{try{Ct(ge)}catch{}},()=>{try{window.__bhCalcSectionTotals&&delete window.__bhCalcSectionTotals}catch{}}),[]),w.useEffect(()=>{const ge=async()=>{for(const it of m)it.id&&it.acknowledged_at&&await ta(it.id)};m.length>0&&ge()},[m]),w.useEffect(()=>()=>{Et&&clearTimeout(Et)},[Et]);const Ct=ge=>{if(!ge)return;try{["materials","labor","utilities","misc"].forEach(Va=>{ge.querySelectorAll(`input[name^="structured[${Va}]"][name$="[qty]"]`).forEach(W=>{const me=W.name.replace(/\[qty\]$/,""),ke=ge.querySelector(`input[name="${me}[rate]"]`),tt=ge.querySelector(`input[name="${me}[amount]"]`),ht=parseFloat((W.value||"").toString().replace(/[,\s]/g,""))||0,Lt=parseFloat((ke&&ke.value||"").toString().replace(/[,\s]/g,""))||0,It=ht*Lt;tt&&(tt.value=It?String(It):"")})})}catch{}const it=Va=>{const Zt=ge.querySelectorAll(`input[name^="${Va}"][name$="[amount]"]`);let W;Zt&&Zt.length>0?W=Zt:W=ge.querySelectorAll(`input[name^="${Va}"]`);let me=0;return W.forEach(ke=>{const ht=(ke&&ke.value||"").match(/[-+]?(?:\d+\.?\d*|\d*\.?\d+)/g);ht&&ht.forEach(Lt=>{const It=parseFloat(Lt);Number.isNaN(It)||(me+=It)})}),me},$e=it("structured[materials]"),zt=it("structured[labor]"),St=it("structured[utilities]"),yt=it("structured[misc]");ue($e),I(zt),re(St),V(yt),K($e+zt+St+yt)},ia=Array.isArray(d)?d.length:0;Array.isArray(S)&&S.length;const ca=Array.isArray(m)?m.length:0;w.useEffect(()=>{let ge=!0;const it=async()=>{try{const St=await(await fetch("/buildhub/backend/api/contractor/get_layout_requests.php")).json().catch(()=>({}));ge&&St?.success&&u(Array.isArray(St.requests)?St.requests:[])}catch{}try{const St=await(await fetch("/buildhub/backend/api/contractor/get_my_proposals.php")).json().catch(()=>({}));ge&&St?.success&&_(Array.isArray(St.proposals)?St.proposals:[])}catch{}try{const zt=JSON.parse(sessionStorage.getItem("user")||"{}");if(zt?.id){const yt=await(await fetch(`/buildhub/backend/api/contractor/get_construction_estimates.php?contractor_id=${zt.id}`,{credentials:"include"})).json().catch(()=>({}));ge&&yt?.success&&te(Array.isArray(yt.estimates)?yt.estimates:[]);const Zt=await(await fetch(`/buildhub/backend/api/contractor/get_projects.php?contractor_id=${zt.id}`,{credentials:"include"})).json().catch(()=>({}));ge&&Zt?.success&&X(Array.isArray(Zt.data.projects)?Zt.data.projects:[]);const me=await(await fetch("/buildhub/backend/api/contractor/get_recent_paid_payments.php?limit=2",{credentials:"include"})).json().catch(()=>({}));ge&&me?.success&&p(Array.isArray(me.payments)?me.payments:[])}}catch{}try{const zt=JSON.parse(sessionStorage.getItem("user")||"{}");if(zt?.id){const yt=await(await fetch(`/buildhub/backend/api/contractor/get_inbox.php?contractor_id=${zt.id}`,{credentials:"include"})).json().catch(()=>({}));ge&&yt?.success&&b(Array.isArray(yt.items)?yt.items:[])}}catch{}try{const zt=JSON.parse(sessionStorage.getItem("user")||"{}");if(zt?.id){const yt=await(await fetch(`/buildhub/backend/api/contractor/get_inbox.php?contractor_id=${zt.id}`,{credentials:"include"})).json().catch(()=>({}));ge&&yt?.success&&b(Array.isArray(yt.items)?yt.items:[])}}catch{}try{const zt=JSON.parse(sessionStorage.getItem("user")||"{}");if(zt?.id){const yt=await(await fetch(`/buildhub/backend/api/contractor/get_inbox.php?contractor_id=${zt.id}`,{credentials:"include"})).json().catch(()=>({}));ge&&yt?.success&&b(Array.isArray(yt.items)?yt.items:[])}}catch{}try{const zt=JSON.parse(sessionStorage.getItem("user")||"{}");if(ge&&zt?.id){const yt=await(await fetch(`/buildhub/backend/api/contractor/get_my_estimates.php?contractor_id=${zt.id}`,{credentials:"include"})).json().catch(()=>({}));yt?.success&&O(Array.isArray(yt.estimates)?yt.estimates:[])}}catch{}};it();const $e=setInterval(it,6e4);return()=>{ge=!1,clearInterval($e)}},[]),w.useEffect(()=>{const ge=JSON.parse(sessionStorage.getItem("user")||"{}");l(ge),cr(async()=>{const{preventCache:$e,verifyServerSession:zt}=await import("./session-DODIVVdM.js");return{preventCache:$e,verifyServerSession:zt}},[]).then(({preventCache:$e,verifyServerSession:zt})=>{$e(),(async()=>{const St=await zt();if(!ge.id||ge.role!=="contractor"||!St){sessionStorage.removeItem("user"),localStorage.removeItem("bh_user"),t("/login",{replace:!0});return}Za(),Ce(),Ve()})()});const it=()=>{Ve()};return window.addEventListener("refreshEstimates",it),()=>{window.removeEventListener("refreshEstimates",it)}},[]);const Za=async()=>{E(!0);try{const it=await(await fetch("/buildhub/backend/api/contractor/get_layout_requests.php")).json();it.success&&u(it.requests||[])}catch(ge){console.error("Error fetching layout requests:",ge)}finally{E(!1)}},os=ge=>{if(!ge)return{};try{return typeof ge=="string"?JSON.parse(ge):ge}catch{return{}}},Ba=ge=>{const it=os(ge.requirements),$e=it.forwarded_design;if(!$e)return null;const zt=Array.isArray($e.files)?$e.files:[],St=$e.technical_details||{},yt=Zt=>{if(!Zt)return"-";if(typeof Zt=="string"){try{const W=JSON.parse(Zt);if(typeof W=="object"&&W!==null)return Object.entries(W).map(([me,ke])=>` ${me.replace(/_/g," ")}: ${String(ke)}`).join(`
`)}catch{}return Zt.replace(/\\n/g,`
`).replace(/\n\s*\n/g,`
`).trim()}return typeof Zt=="object"&&Zt!==null?Object.entries(Zt).map(([W,me])=>` ${W.replace(/_/g," ")}: ${String(me)}`).join(`
`):String(Zt)},Va=Zt=>!Zt||typeof Zt!="object"?null:e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(280px, 1fr))",gap:12},children:Object.entries(Zt).map(([W,me])=>e.jsxs("div",{style:{padding:"12px",background:"#fff",border:"1px solid #e5e7eb",borderRadius:8,boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[e.jsx("div",{style:{fontSize:13,fontWeight:600,color:"#374151",marginBottom:8,textTransform:"capitalize"},children:W.replaceAll("_"," ").replace(/\b\w/g,ke=>ke.toUpperCase())}),e.jsx("div",{style:{fontSize:14,lineHeight:1.5,color:"#6b7280",whiteSpace:"pre-wrap"},children:yt(me)})]},W))});return e.jsxs("div",{className:"forwarded-design",style:{marginTop:10},children:[e.jsxs("div",{className:"details-grid",style:{marginBottom:8},children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Design Title:"})," ",$e.title||"-"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Uploaded:"})," ",$e.created_at?new Date($e.created_at).toLocaleString():"-"]})]}),$e.description&&e.jsxs("div",{className:"description-section",style:{marginBottom:8},children:[e.jsx("strong",{children:"Description:"}),e.jsx("div",{className:"description-content",children:$e.description})]}),it.contractor_message&&e.jsxs("div",{className:"description-section",style:{marginBottom:8},children:[e.jsx("strong",{children:"Message from homeowner:"}),e.jsx("div",{className:"description-content",children:it.contractor_message})]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(200px, 1fr))",gap:"12px"},children:zt.map((Zt,W)=>{const me=Zt.path||`/buildhub/backend/uploads/designs/${Zt.stored||Zt.original}`,ke=(Zt.ext||"").toLowerCase(),tt=["jpg","jpeg","png","gif","webp","svg","heic"].includes(ke);return e.jsxs("div",{className:"file-card-interactive",style:{position:"relative",cursor:"pointer",borderRadius:8,overflow:"hidden",boxShadow:"0 2px 8px rgba(0,0,0,0.1)",transition:"transform 0.2s ease",":hover":{transform:"scale(1.02)"}},children:[tt?e.jsxs("div",{style:{position:"relative",width:"100%",height:140},children:[e.jsx("img",{src:me,alt:Zt.original,style:{width:"100%",height:"100%",objectFit:"cover"},onClick:ht=>{ht.stopPropagation();const Lt=ht.currentTarget.nextSibling;Lt.style.display=Lt.style.display==="flex"?"none":"flex"}}),e.jsxs("div",{className:"image-overlay",style:{position:"absolute",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.7)",display:"none",alignItems:"center",justifyContent:"center",gap:10,zIndex:10},children:[e.jsx("a",{href:me,target:"_blank",rel:"noreferrer",className:"btn btn-light",style:{padding:"8px 16px",fontSize:"14px"},onClick:ht=>ht.stopPropagation(),children:" View"}),e.jsx("a",{href:me,download:!0,className:"btn btn-light",style:{padding:"8px 16px",fontSize:"14px"},onClick:ht=>ht.stopPropagation(),children:" Download"})]})]}):e.jsxs("div",{style:{height:140,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",background:"#f8fafc",border:"2px dashed #cbd5e1"},children:[e.jsx("span",{style:{fontSize:"2.5rem",marginBottom:8},children:""}),e.jsxs("div",{style:{display:"flex",gap:8},children:[e.jsx("a",{href:me,target:"_blank",rel:"noreferrer",className:"btn btn-secondary btn-sm",children:"View"}),e.jsx("a",{href:me,download:!0,className:"btn btn-primary btn-sm",children:"Download"})]})]}),e.jsxs("div",{style:{padding:"8px",background:"#fff",borderTop:"1px solid #e5e7eb"},children:[e.jsx("div",{style:{fontSize:"13px",fontWeight:500,color:"#374151",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},title:Zt.original||Zt.stored,children:Zt.original||Zt.stored}),e.jsxs("div",{style:{fontSize:"11px",color:"#9ca3af",marginTop:2},children:[ke.toUpperCase(),"  Click to ",tt?"view":"download"]})]})]},W)})}),St&&Object.keys(St).length>0&&e.jsxs("div",{style:{marginTop:16},children:[e.jsx("h4",{style:{margin:"10px 0"},children:"Technical Details"}),St.floor_plans&&e.jsxs("div",{style:{marginBottom:12},children:[e.jsx("div",{style:{fontWeight:600,marginBottom:6},children:"Floor Plans"}),Va(St.floor_plans)]}),St.site_orientation&&e.jsxs("div",{style:{marginBottom:12},children:[e.jsx("div",{style:{fontWeight:600,marginBottom:6},children:"Site Orientation"}),Va(St.site_orientation)]}),St.structural&&e.jsxs("div",{style:{marginBottom:12},children:[e.jsx("div",{style:{fontWeight:600,marginBottom:6},children:"Structural"}),Va(St.structural)]}),St.elevations&&e.jsxs("div",{style:{marginBottom:12},children:[e.jsx("div",{style:{fontWeight:600,marginBottom:6},children:"Elevations"}),Va(St.elevations)]}),St.construction&&e.jsxs("div",{style:{marginBottom:12},children:[e.jsx("div",{style:{fontWeight:600,marginBottom:6},children:"Construction"}),Va(St.construction)]})]})]})},xa=ge=>{const it=os(ge.requirements),$e=it.forwarded_design||{},zt=$e.title||it.layout_description||"Project Request",St=($e.description||"").trim(),yt=St.length>120?St.slice(0,117)+"":St;return{title:zt,short:yt,hasDesc:!!St}},Dt=ge=>{const $e=os(ge.requirements).forwarded_design,St=(Array.isArray($e?.files)?$e.files:[])[0];if(!St)return null;const yt=St.path||`/buildhub/backend/uploads/designs/${St.stored||St.original}`,Va=(St.ext||"").toLowerCase(),Zt=["jpg","jpeg","png","gif","webp","svg","heic"].includes(Va);return{href:yt,isImage:Zt,name:St.original||St.stored}},ye=ge=>{const $e=new Date-ge,zt=Math.floor($e/6e4),St=Math.floor($e/36e5),yt=Math.floor($e/864e5);return zt<1?"Just now":zt<60?`${zt} min${zt>1?"s":""} ago`:St<24?`${St} hour${St>1?"s":""} ago`:yt<7?`${yt} day${yt>1?"s":""} ago`:yt<30?`${Math.floor(yt/7)} week${Math.floor(yt/7)>1?"s":""} ago`:ge.toLocaleDateString()},Ce=async()=>{try{const it=await(await fetch("/buildhub/backend/api/contractor/get_my_proposals.php")).json();it.success&&_(it.proposals||[])}catch(ge){console.error("Error fetching proposals:",ge)}},Ve=async()=>{try{const ge=JSON.parse(sessionStorage.getItem("user")||"{}");if(ge?.id){const $e=await(await fetch(`/buildhub/backend/api/contractor/get_my_estimates.php?contractor_id=${ge.id}`,{credentials:"include"})).json();$e.success&&(console.log("Fetched estimates:",$e.estimates),O(Array.isArray($e.estimates)?$e.estimates:[]))}}catch(ge){console.error("Error fetching estimates:",ge)}},gt=async()=>{try{await fetch("/buildhub/backend/api/logout.php",{method:"POST",credentials:"include"})}catch{}localStorage.removeItem("bh_user"),sessionStorage.removeItem("user"),t("/login",{replace:!0})},Qt=()=>e.jsxs("div",{children:[e.jsxs("div",{className:"main-header",children:[e.jsxs("h1",{children:["Welcome back, ",o?.first_name,"!"]}),e.jsx("p",{children:"Manage your cost estimates and project bids"})]}),e.jsxs("div",{className:"stats-grid",children:[e.jsx("div",{className:"stat-card w-blue",children:e.jsxs("div",{className:"stat-content",children:[e.jsx("div",{className:"stat-icon pending",children:""}),e.jsxs("div",{className:"stat-info",children:[e.jsx("h3",{children:d.length}),e.jsx("p",{children:"Pending Requests"})]})]})}),e.jsx("div",{className:"stat-card w-purple",children:e.jsxs("div",{className:"stat-content",children:[e.jsx("div",{className:"stat-icon estimates",children:""}),e.jsxs("div",{className:"stat-info",children:[e.jsx("h3",{children:N.length}),e.jsx("p",{children:"Estimates Sent"})]})]})}),e.jsx("div",{className:"stat-card w-green",children:e.jsxs("div",{className:"stat-content",children:[e.jsx("div",{className:"stat-icon projects",children:""}),e.jsxs("div",{className:"stat-info",children:[e.jsx("h3",{children:S.filter(ge=>ge.status==="accepted").length}),e.jsx("p",{children:"Projects Won"})]})]})}),e.jsx("div",{className:"stat-card w-orange",children:e.jsxs("div",{className:"stat-content",children:[e.jsx("div",{className:"stat-icon total",children:""}),e.jsxs("div",{className:"stat-info",children:[e.jsxs("h3",{children:["",S.reduce((ge,it)=>ge+(parseFloat(it.total_cost)||0),0).toLocaleString()]}),e.jsx("p",{children:"Total Bids"})]})]})})]}),e.jsxs("div",{className:"section-card",children:[e.jsxs("div",{className:"section-header",children:[e.jsx("h2",{children:" Recent Cost Requests"}),e.jsx("p",{children:"Latest layout approvals requiring cost estimates"})]}),e.jsx("div",{className:"section-content",children:U?e.jsx("div",{className:"loading",children:"Loading requests..."}):d.length===0?e.jsxs("div",{children:[e.jsxs("div",{className:"empty-state",children:[e.jsx("div",{className:"empty-icon",children:""}),e.jsx("h3",{children:"No Cost Requests Available"}),e.jsx("p",{children:"Check back later for new project opportunities!"})]}),A.length>0&&e.jsxs("div",{style:{marginTop:"32px"},children:[e.jsxs("div",{className:"section-header",style:{marginBottom:"20px"},children:[e.jsx("h3",{style:{fontSize:"20px",fontWeight:"600",color:"#1e293b",margin:"0 0 6px 0"},children:" Recent Paid Payments"}),e.jsx("p",{style:{fontSize:"14px",color:"#64748b",margin:0},children:"Your latest completed payments"})]}),e.jsx("div",{className:"recent-payments-grid",children:A.map(ge=>{const it=new Date(ge.payment_date||ge.updated_at),$e=ye(it);return e.jsxs("div",{className:"payment-card",children:[e.jsxs("div",{className:"payment-card-header",children:[e.jsx("div",{className:"payment-icon",children:""}),e.jsx("div",{className:"payment-badge",children:e.jsx("span",{className:"badge-paid",children:"PAID"})})]}),e.jsxs("div",{className:"payment-card-body",children:[e.jsx("h4",{className:"payment-title",children:ge.stage_name}),e.jsx("p",{className:"payment-project",children:ge.project_name}),e.jsxs("div",{className:"payment-info",children:[e.jsxs("div",{className:"info-row",children:[e.jsx("span",{className:"info-icon",children:""}),e.jsx("span",{className:"info-text",children:ge.homeowner_name})]}),e.jsxs("div",{className:"info-row",children:[e.jsx("span",{className:"info-icon",children:""}),e.jsxs("span",{className:"info-text",children:["",ge.paid_amount.toLocaleString("en-IN")]})]}),e.jsxs("div",{className:"info-row",children:[e.jsx("span",{className:"info-icon",children:""}),e.jsx("span",{className:"info-text",children:ge.project_location})]}),e.jsxs("div",{className:"info-row",children:[e.jsx("span",{className:"info-icon",children:""}),e.jsx("span",{className:"info-text",children:$e})]})]}),ge.work_description&&e.jsx("p",{className:"payment-desc",children:ge.work_description})]}),e.jsx("div",{className:"payment-card-footer",children:e.jsx("div",{className:"verification-status",children:ge.verification_status==="verified"?e.jsx("span",{className:"status-verified",children:" Verified"}):ge.verification_status==="rejected"?e.jsx("span",{className:"status-rejected",children:" Rejected"}):e.jsx("span",{className:"status-pending",children:" Pending Verification"})})})]},ge.id)})})]})]}):e.jsx("div",{className:"cost-requests-grid",children:d.slice(0,6).map(ge=>{const it=xa(ge),$e=Dt(ge),zt=new Date(ge.created_at),St=ye(zt);return e.jsxs("div",{className:"cost-request-card",children:[e.jsxs("div",{className:"cost-request-header",children:[e.jsx("div",{className:"cost-request-image",children:$e?.isImage?e.jsx("img",{src:$e.href,alt:$e.name}):ge.selected_layout_image?e.jsx("img",{src:ge.selected_layout_image,alt:"Layout"}):e.jsx("div",{className:"placeholder-image",children:""})}),e.jsx("div",{className:"cost-request-badge",children:e.jsx("span",{className:"badge-new",children:"NEW"})})]}),e.jsxs("div",{className:"cost-request-body",children:[e.jsx("h4",{className:"cost-request-title",children:it.title||ge.selected_layout_title||"Layout Request"}),e.jsxs("div",{className:"cost-request-info",children:[e.jsxs("div",{className:"info-row",children:[e.jsx("span",{className:"info-icon",children:""}),e.jsx("span",{className:"info-text",children:ge.homeowner_name})]}),e.jsxs("div",{className:"info-row",children:[e.jsx("span",{className:"info-icon",children:""}),e.jsx("span",{className:"info-text",children:ge.plot_size})]}),e.jsxs("div",{className:"info-row",children:[e.jsx("span",{className:"info-icon",children:""}),e.jsxs("span",{className:"info-text",children:["",ge.budget_range]})]}),e.jsxs("div",{className:"info-row",children:[e.jsx("span",{className:"info-icon",children:""}),e.jsx("span",{className:"info-text",children:St})]})]}),it.hasDesc&&e.jsx("p",{className:"cost-request-desc",children:it.short})]}),e.jsxs("div",{className:"cost-request-footer",children:[e.jsx("button",{className:"btn-view-details",onClick:()=>z(yt=>({...yt,[ge.id]:!yt[ge.id]})),children:R[ge.id]?" Hide Details":" View Details"}),e.jsx("button",{className:"btn-submit-estimate",onClick:()=>t(`/contractor/estimate?layout_request_id=${ge.id}`),children:" Submit Estimate"})]}),R[ge.id]&&e.jsx("div",{className:"cost-request-details",children:Ba(ge)})]},ge.id)})})})]}),e.jsxs("div",{className:"section-card",children:[e.jsxs("div",{className:"section-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{children:[e.jsx("h2",{children:"Inbox"}),e.jsx("p",{children:"Layouts and designs sent directly to you"})]}),e.jsx("button",{className:"btn btn-secondary",onClick:async()=>{try{const ge=JSON.parse(sessionStorage.getItem("user")||"{}"),$e=await(await fetch(`/buildhub/backend/api/contractor/get_inbox.php?contractor_id=${ge.id}`,{credentials:"include"})).json().catch(()=>({}));$e?.success&&b(Array.isArray($e.items)?$e.items:[])}catch{}},children:"Refresh"})]}),e.jsx("div",{className:"section-content",children:Array.isArray(m)&&m.length?m.map(ls):e.jsxs("div",{className:"empty-state",children:[e.jsx("div",{className:"empty-icon",children:""}),e.jsx("h3",{children:"No items yet"}),e.jsx("p",{children:"When a homeowner sends you a layout, it appears here"})]})})]})]}),ja=()=>e.jsxs("div",{children:[e.jsxs("div",{className:"main-header",children:[e.jsx("h1",{children:"My Estimates"}),e.jsx("p",{children:"Your submitted estimates with totals and timestamps"})]}),e.jsxs("div",{className:"section-card",children:[e.jsxs("div",{className:"section-header",children:[e.jsx("h2",{children:"Recent Estimates"}),e.jsx("p",{children:"Download or reference previous submissions"})]}),e.jsx("div",{className:"section-content",children:N.length===0?e.jsxs("div",{className:"empty-state",children:[e.jsx("div",{className:"empty-icon",children:""}),e.jsx("h3",{children:"No Estimates Yet"}),e.jsx("p",{children:"Submit an estimate from your Inbox to see it here."})]}):e.jsx("div",{className:"item-list",children:N.map(ge=>e.jsx(v6,{est:ge,user:o,showConfirmation:_t,toast:a},ge.id))})})]})]}),va=()=>e.jsxs("div",{children:[e.jsxs("div",{className:"main-header",children:[e.jsx("h1",{children:" Inbox"}),e.jsx("p",{children:"Project requests and notifications from homeowners"})]}),e.jsxs("div",{className:"section-card",children:[e.jsxs("div",{className:"section-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{children:[e.jsx("h2",{children:"Recent Messages"}),e.jsx("p",{children:"New project requests, estimate approvals, and construction notifications"})]}),e.jsx("button",{className:"btn btn-secondary",onClick:async()=>{try{const ge=JSON.parse(sessionStorage.getItem("user")||"{}"),$e=await(await fetch(`/buildhub/backend/api/contractor/get_inbox.php?contractor_id=${ge.id}`,{credentials:"include"})).json().catch(()=>({}));$e?.success&&b(Array.isArray($e.items)?$e.items:[])}catch{}},children:" Refresh"})]}),e.jsx("div",{className:"section-content",children:Array.isArray(m)&&m.length?m.map(ls):e.jsxs("div",{className:"empty-state",children:[e.jsx("div",{className:"empty-icon",children:""}),e.jsx("h3",{children:"No messages yet"}),e.jsx("p",{children:"When homeowners send you project requests or approve estimates, they will appear here"})]})})]})]}),_a=typeof window<"u"&&window.location&&window.location.port==="3000"?"http://localhost":"",Na=ge=>!ge||/^https?:\/\//i.test(ge)?ge:`${_a}/${String(ge).replace(/^\/?/,"")}`,Pa=ge=>{if(!ge)return"Unknown date";const it=new Date(ge),zt=Math.abs(new Date-it),St=Math.ceil(zt/(1e3*60*60*24));return St===1?"Today":St===2?"Yesterday":St<=7?`${St-1} days ago`:it.toLocaleDateString()},ls=ge=>{const it=ge.payload||{},$e=it.forwarded_design||null,zt=$e&&Array.isArray($e.files)&&$e.files[0]?$e.files[0]:null;let St=null;if(ge.layout_image_url)St=ge.layout_image_url;else if(it.layout_image_url)St=it.layout_image_url;else if(zt&&(zt.url||zt.path))St=zt.url||zt.path;else if(typeof zt=="string")St=zt;else if(it.layout_images&&Array.isArray(it.layout_images)&&it.layout_images[0]){const W=it.layout_images[0];St=W.url||W.path||`/buildhub/backend/uploads/house_plans/${W.stored||W.original}`}const yt=Na(St),Va=ge.technical_details||$e?.technical_details||it.technical_details||null,Zt=it.floor_details||null;if(ge.type==="construction_start")return e.jsx("div",{className:"card",style:{marginBottom:12,borderLeft:"4px solid #10b981"},children:e.jsxs("div",{className:"card-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{children:[e.jsxs("div",{className:"card-title",style:{color:"#10b981",fontWeight:"bold"},children:[" ",ge.title||"Construction Started"]}),e.jsxs("div",{className:"muted",style:{fontSize:"0.85rem"},children:["From: ",ge.homeowner_name||"Homeowner",ge.homeowner_email?`  ${ge.homeowner_email}`:""]}),e.jsx("div",{style:{marginTop:8,fontSize:"0.9rem",color:"#047857"},children:"The homeowner has approved your estimate and given permission to start construction work."})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsx("div",{className:"muted",style:{fontSize:"0.85rem"},children:Pa(ge.created_at)}),e.jsx("span",{className:"status-badge success",children:"Construction Approved"})]})]})},ge.id);if(ge.type==="estimate_message"){const W=it.estimate_details||{},me=it.homeowner_details||{},ke=it.layout_details||{};return e.jsxs("div",{className:"card",style:{marginBottom:12,border:"1px solid #3b82f6",borderRadius:"12px",boxShadow:"0 2px 8px rgba(0,0,0,0.05)",background:"linear-gradient(to right, #ffffff 0%, #f8fafc 100%)"},children:[e.jsxs("div",{className:"card-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"16px",borderBottom:"1px solid #3b82f6",background:"linear-gradient(135deg, #eff6ff 0%, #dbeafe 100%)"},children:[e.jsxs("div",{children:[e.jsx("div",{className:"card-title",style:{color:"#1e40af",fontWeight:"bold",fontSize:"16px"},children:" Estimate Accepted - Ready to Start"}),e.jsxs("div",{className:"muted",style:{fontSize:"0.875rem",color:"#6b7280",marginTop:"4px"},children:["From: ",e.jsx("strong",{style:{color:"#1f2937"},children:ge.homeowner_name||"Homeowner"}),ge.homeowner_email?`  ${ge.homeowner_email}`:""]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsx("div",{className:"muted",style:{fontSize:"0.85rem"},children:Pa(ge.created_at)}),e.jsx("span",{className:"status-badge success",children:"Estimate Approved"})]})]}),e.jsxs("div",{className:"card-body",style:{padding:"20px"},children:[e.jsxs("div",{style:{marginBottom:"20px",padding:"16px",background:"linear-gradient(135deg, #ecfdf5 0%, #d1fae5 100%)",borderRadius:"10px",border:"2px solid #10b981",boxShadow:"0 2px 4px rgba(0,0,0,0.05)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:"12px"},children:[e.jsx("span",{style:{fontSize:"24px",marginRight:"10px"},children:""}),e.jsx("h4",{style:{margin:0,fontSize:"15px",fontWeight:"700",color:"#065f46"},children:"Message from Homeowner"})]}),e.jsx("div",{style:{whiteSpace:"pre-wrap",fontSize:"14px",color:"#047857",lineHeight:"1.7",paddingLeft:"34px"},children:ge.message||"I am satisfied with this estimate and would like to proceed with the project."})]}),e.jsxs("details",{style:{marginBottom:"12px"},children:[e.jsx("summary",{style:{cursor:"pointer",padding:"12px",background:"linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%)",borderRadius:"8px",fontWeight:"600",fontSize:"14px",color:"#1e40af",border:"1px solid #bfdbfe"},children:" Estimate Details"}),e.jsx("div",{style:{padding:"16px",background:"#f8fafc",borderRadius:"6px",marginTop:"8px"},children:e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px",fontSize:"0.9rem"},children:[e.jsxs("div",{style:{padding:"8px",background:"white",borderRadius:"4px"},children:[e.jsx("strong",{style:{color:"#6b7280"},children:"Total Cost:"})," ",e.jsxs("span",{style:{color:"#10b981",fontWeight:"600"},children:["",W.total_cost||"N/A"]})]}),e.jsxs("div",{style:{padding:"8px",background:"white",borderRadius:"4px"},children:[e.jsx("strong",{style:{color:"#6b7280"},children:"Timeline:"})," ",W.timeline||"N/A"]}),W.materials&&e.jsxs("div",{style:{gridColumn:"1 / -1",padding:"8px",background:"white",borderRadius:"4px"},children:[e.jsx("strong",{style:{color:"#6b7280"},children:"Materials:"})," ",W.materials]}),W.cost_breakdown&&e.jsxs("div",{style:{gridColumn:"1 / -1",padding:"8px",background:"white",borderRadius:"4px"},children:[e.jsx("strong",{style:{color:"#6b7280"},children:"Cost Breakdown:"})," ",W.cost_breakdown]}),W.notes&&e.jsxs("div",{style:{gridColumn:"1 / -1",padding:"8px",background:"white",borderRadius:"4px"},children:[e.jsx("strong",{style:{color:"#6b7280"},children:"Notes:"})," ",W.notes]})]})})]}),e.jsxs("details",{style:{marginBottom:"12px"},children:[e.jsx("summary",{style:{cursor:"pointer",padding:"12px",background:"linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%)",borderRadius:"8px",fontWeight:"600",fontSize:"14px",color:"#1e40af",border:"1px solid #bfdbfe"},children:" Homeowner Contact Details"}),e.jsx("div",{style:{padding:"16px",background:"#f8fafc",borderRadius:"6px",marginTop:"8px"},children:e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px",fontSize:"0.9rem"},children:[e.jsxs("div",{style:{padding:"8px",background:"white",borderRadius:"4px"},children:[e.jsx("strong",{style:{color:"#6b7280"},children:"Name:"})," ",me.first_name," ",me.last_name]}),e.jsxs("div",{style:{padding:"8px",background:"white",borderRadius:"4px"},children:[e.jsx("strong",{style:{color:"#6b7280"},children:"Email:"})," ",me.email]}),e.jsxs("div",{style:{padding:"8px",background:"white",borderRadius:"4px"},children:[e.jsx("strong",{style:{color:"#6b7280"},children:"Phone:"})," ",me.phone||"Not provided"]}),e.jsxs("div",{style:{padding:"8px",background:"white",borderRadius:"4px"},children:[e.jsx("strong",{style:{color:"#6b7280"},children:"City:"})," ",me.city||"Not provided"]}),me.address&&e.jsxs("div",{style:{gridColumn:"1 / -1",padding:"8px",background:"white",borderRadius:"4px"},children:[e.jsx("strong",{style:{color:"#6b7280"},children:"Address:"})," ",me.address]}),me.zip_code&&e.jsxs("div",{style:{padding:"8px",background:"white",borderRadius:"4px"},children:[e.jsx("strong",{style:{color:"#6b7280"},children:"Zip Code:"})," ",me.zip_code]}),me.state&&e.jsxs("div",{style:{padding:"8px",background:"white",borderRadius:"4px"},children:[e.jsx("strong",{style:{color:"#6b7280"},children:"State:"})," ",me.state]})]})})]}),ke&&ke.id&&e.jsxs("details",{style:{marginBottom:"12px"},children:[e.jsx("summary",{style:{cursor:"pointer",padding:"12px",background:"linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%)",borderRadius:"8px",fontWeight:"600",fontSize:"14px",color:"#1e40af",border:"1px solid #bfdbfe"},children:" Layout Details"}),e.jsx("div",{style:{padding:"16px",background:"#f8fafc",borderRadius:"6px",marginTop:"8px"},children:e.jsxs("div",{style:{fontSize:"0.9rem"},children:[e.jsxs("div",{style:{padding:"8px",background:"white",borderRadius:"4px",marginBottom:"8px"},children:[e.jsx("strong",{style:{color:"#6b7280"},children:"Layout Title:"})," ",ke.title]}),ke.description&&e.jsxs("div",{style:{padding:"8px",background:"white",borderRadius:"4px",marginBottom:"8px"},children:[e.jsx("strong",{style:{color:"#6b7280"},children:"Description:"})," ",ke.description]}),e.jsxs("div",{style:{padding:"8px",background:"white",borderRadius:"4px"},children:[e.jsx("strong",{style:{color:"#6b7280"},children:"Created:"})," ",new Date(ke.created_at).toLocaleDateString()]})]})})]}),e.jsxs("div",{style:{display:"flex",gap:"8px",justifyContent:"flex-end"},children:[e.jsx("button",{className:"btn btn-primary",onClick:async()=>{try{const tt=JSON.parse(sessionStorage.getItem("user")||"{}");await fetch("/buildhub/backend/api/contractor/acknowledge_inbox_item.php",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({id:ge.id,contractor_id:tt.id,due_date:null})});const Lt=await(await fetch(`/buildhub/backend/api/contractor/get_inbox.php?contractor_id=${tt.id}`,{credentials:"include"})).json().catch(()=>({}));Lt?.success&&b(Array.isArray(Lt.items)?Lt.items:[])}catch{}},children:" Acknowledge"}),e.jsx("button",{className:"btn btn-secondary",onClick:async()=>{_t("Remove Item","Are you sure you want to remove this item from your inbox?",async()=>{try{const tt=JSON.parse(sessionStorage.getItem("user")||"{}"),Lt=await(await fetch("/buildhub/backend/api/contractor/delete_inbox_item.php",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({id:ge.id,contractor_id:tt.id})})).json().catch(()=>({}));Lt.success?(b(It=>It.filter(Jt=>Jt.id!==ge.id)),a.success("Item removed successfully!"),setTimeout(async()=>{try{const Jt=await(await fetch(`/buildhub/backend/api/contractor/get_inbox.php?contractor_id=${tt.id}`,{credentials:"include"})).json().catch(()=>({}));Jt?.success&&b(Array.isArray(Jt.items)?Jt.items:[])}catch{}},500)):a.error(Lt.message||"Failed to remove item. Please try again.")}catch(tt){a.error("Error removing item. Please try again."),console.error("Remove error:",tt)}})},style:{background:"#ef4444",color:"white",border:"1px solid #ef4444"},children:" Remove"})]})]})]},ge.id)}return e.jsxs("div",{className:"card",style:{marginBottom:12,border:"1px solid #e5e7eb",borderRadius:"12px",boxShadow:"0 2px 8px rgba(0,0,0,0.05)"},children:[e.jsxs("div",{className:"card-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"16px",borderBottom:"1px solid #e5e7eb",background:"linear-gradient(135deg, #ffffff 0%, #f8fafc 100%)"},children:[e.jsxs("div",{children:[e.jsx("div",{className:"card-title",style:{fontWeight:"600",fontSize:"16px",color:"#1f2937"},children:" New Layout Request"}),e.jsxs("div",{className:"muted",style:{fontSize:"0.875rem",color:"#6b7280",marginTop:"4px"},children:["From: ",e.jsx("strong",{style:{color:"#374151"},children:ge.homeowner_name||"Homeowner"}),ge.homeowner_email?`  ${ge.homeowner_email}`:""]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsx("div",{className:"muted",style:{fontSize:"0.85rem"},children:Pa(ge.created_at)}),ge.acknowledged_at?e.jsx("div",{style:{display:"flex",alignItems:"center",gap:8},children:e.jsx("span",{className:"status-badge accepted",title:`Due: ${ge.due_date||""}`,children:"Acknowledged"})}):e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6},children:[!C[ge.id]&&e.jsx("button",{className:"btn btn-primary acknowledge-button",onClick:()=>D(W=>({...W,[ge.id]:!0})),children:" Acknowledge Request"}),C[ge.id]&&e.jsxs("div",{className:"acknowledgment-form",children:[e.jsx("span",{children:"Due Date:"}),e.jsx("input",{type:"date",value:v[ge.id]||"",onChange:W=>x(me=>({...me,[ge.id]:W.target.value}))}),e.jsx("button",{className:"btn btn-primary",onClick:async()=>{const W=JSON.parse(sessionStorage.getItem("user")||"{}");try{const ke=await(await fetch("/buildhub/backend/api/contractor/acknowledge_inbox_item.php",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({id:ge.id,contractor_id:W.id,due_date:v[ge.id]||null})})).json();if(ke.success){const tt=ke.acknowledged_at||new Date().toLocaleString(),ht=v[ge.id]?new Date(v[ge.id]).toLocaleDateString():"not specified";a.success(` Acknowledgement sent successfully! Acknowledged at: ${tt}, Due date: ${ht}. The homeowner has been notified.`)}else a.error(`Failed to acknowledge: ${ke.message||"Unknown error"}`)}catch(me){a.error("Network error. Please try again."),console.error(me)}try{const ke=await(await fetch(`/buildhub/backend/api/contractor/get_inbox.php?contractor_id=${W.id}`,{credentials:"include"})).json().catch(()=>({}));ke?.success&&b(Array.isArray(ke.items)?ke.items:[])}catch{}D(me=>({...me,[ge.id]:!1}))},children:" Confirm"}),e.jsx("button",{className:"btn btn-secondary",onClick:()=>D(W=>({...W,[ge.id]:!1})),children:"Cancel"})]})]}),e.jsx("button",{className:"btn btn-secondary",onClick:async()=>{_t("Remove Item","Are you sure you want to remove this item from your inbox?",async()=>{try{const W=JSON.parse(sessionStorage.getItem("user")||"{}"),ke=await(await fetch("/buildhub/backend/api/contractor/delete_inbox_item.php",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({id:ge.id,contractor_id:W.id})})).json().catch(()=>({}));ke.success?(b(tt=>tt.filter(ht=>ht.id!==ge.id)),a.success("Item removed successfully!"),setTimeout(async()=>{try{const ht=await(await fetch(`/buildhub/backend/api/contractor/get_inbox.php?contractor_id=${W.id}`,{credentials:"include"})).json().catch(()=>({}));ht?.success&&b(Array.isArray(ht.items)?ht.items:[])}catch{}},500)):a.error(ke.message||"Failed to remove item. Please try again.")}catch(W){a.error("Error removing item. Please try again."),console.error("Remove error:",W)}})},style:{background:"#ef4444",color:"white",border:"1px solid #ef4444",fontSize:"12px",padding:"6px 12px"},children:" Remove"})]})]}),e.jsxs("div",{className:"card-body",style:{display:"grid",gridTemplateColumns:"160px 1fr",gap:16,padding:"20px"},children:[e.jsx("div",{children:yt?e.jsxs("div",{style:{position:"relative"},children:[e.jsx("img",{src:yt,alt:"Layout preview",style:{width:"160px",height:"120px",objectFit:"cover",borderRadius:8,border:"2px solid #3b82f6",boxShadow:"0 4px 8px rgba(0,0,0,0.1)"},onError:W=>{W.currentTarget.style.display="none"}}),e.jsx("div",{style:{position:"absolute",bottom:"4px",left:"4px",right:"4px",background:"rgba(59, 130, 246, 0.9)",color:"white",padding:"2px 6px",borderRadius:"4px",fontSize:"11px",fontWeight:"600",textAlign:"center"},children:" Layout Plan"}),e.jsxs("div",{style:{position:"absolute",top:"6px",right:"6px",display:"flex",gap:"6px"},children:[e.jsx("button",{onClick:()=>window.open(yt,"_blank"),style:{background:"rgba(255, 255, 255, 0.95)",border:"none",borderRadius:"6px",padding:"8px 10px",fontSize:"14px",cursor:"pointer",boxShadow:"0 2px 6px rgba(0,0,0,0.1)",color:"#1e40af",fontWeight:"600",minWidth:"36px",minHeight:"36px"},title:"View full size",children:""}),e.jsx("button",{onClick:async()=>{try{const W=JSON.parse(sessionStorage.getItem("user")||"{}");let me="";if(yt.includes("/buildhub/backend/uploads/house_plans/")?me=yt.split("/buildhub/backend/uploads/house_plans/")[1]:yt.includes("serve_layout_image.php")&&(me=new URLSearchParams(yt.split("?")[1]).get("image")),me){const ke=`/buildhub/backend/api/contractor/serve_layout_image.php?contractor_id=${W.id}&image=${encodeURIComponent(me)}&download=1`,tt=document.createElement("a");tt.href=ke,tt.download=me,tt.target="_blank",document.body.appendChild(tt),tt.click(),document.body.removeChild(tt),a.success("Layout image downloaded!")}else{const tt=await(await fetch(yt)).blob(),ht=window.URL.createObjectURL(tt),Lt=document.createElement("a");Lt.href=ht,Lt.download=`layout_image_${Date.now()}.png`,document.body.appendChild(Lt),Lt.click(),document.body.removeChild(Lt),window.URL.revokeObjectURL(ht),a.success("Layout image downloaded!")}}catch(W){a.error("Failed to download image"),console.error("Download error:",W)}},style:{background:"rgba(16, 185, 129, 0.95)",border:"none",borderRadius:"6px",padding:"8px 10px",fontSize:"14px",cursor:"pointer",boxShadow:"0 2px 6px rgba(0,0,0,0.1)",color:"white",fontWeight:"600",minWidth:"36px",minHeight:"36px"},title:"Download image",children:""})]})]}):e.jsx("div",{style:{width:"160px",height:"120px",display:"grid",placeItems:"center",border:"2px dashed #e5e7eb",borderRadius:8,background:"#f9fafb",color:"#6b7280"},children:e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("div",{style:{fontSize:"24px",marginBottom:"4px"},children:""}),e.jsx("div",{style:{fontSize:"12px"},children:"No layout image"})]})})}),e.jsxs("div",{style:{display:"grid",gap:6},children:[$e?.title&&e.jsxs("div",{children:[e.jsx("strong",{children:"Design:"})," ",$e.title]}),$e?.description&&e.jsxs("div",{children:[e.jsx("strong",{children:"Description:"})," ",$e.description]}),ge.message&&e.jsxs("div",{style:{background:"linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%)",borderLeft:"4px solid #3b82f6",padding:"16px",borderRadius:"8px",marginBottom:"8px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:"8px"},children:[e.jsx("span",{style:{fontSize:"20px",marginRight:"8px"},children:""}),e.jsx("strong",{style:{color:"#1e40af",fontSize:"15px"},children:"Message from Homeowner"})]}),e.jsx("div",{style:{color:"#1e3a8a",lineHeight:"1.6",whiteSpace:"pre-wrap",fontSize:"14px",paddingLeft:"28px"},children:ge.message})]}),(ge.plot_size||ge.building_size)&&e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8,padding:"10px",backgroundColor:"#f8f9fa",borderRadius:"6px",border:"1px solid #e0e0e0"},children:[ge.plot_size&&e.jsxs("div",{children:[e.jsx("strong",{children:" Plot Size:"})," ",ge.plot_size]}),ge.building_size&&e.jsxs("div",{children:[e.jsx("strong",{children:" Building Size:"})," ",ge.building_size]})]}),Zt&&e.jsxs("details",{style:{marginTop:"8px"},children:[e.jsx("summary",{style:{cursor:"pointer",padding:"10px",background:"#f8f9fa",borderRadius:"6px",fontWeight:"500",fontSize:"14px",border:"1px solid #dee2e6"},children:" Floor Details"}),e.jsx("div",{style:{marginTop:8,padding:"12px",background:"#f8f9fa",borderRadius:"6px"},children:e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8},children:[Zt.floors_count!==void 0&&e.jsxs("div",{children:[e.jsx("strong",{children:"Floors:"})," ",String(Zt.floors_count)]}),Zt.floor_height&&e.jsxs("div",{children:[e.jsx("strong",{children:"Floor height:"})," ",String(Zt.floor_height)]}),Zt.ground_floor_area&&e.jsxs("div",{children:[e.jsx("strong",{children:"Ground floor area:"})," ",String(Zt.ground_floor_area)]}),Zt.first_floor_area&&e.jsxs("div",{children:[e.jsx("strong",{children:"First floor area:"})," ",String(Zt.first_floor_area)]}),Zt.second_floor_area&&e.jsxs("div",{children:[e.jsx("strong",{children:"Second floor area:"})," ",String(Zt.second_floor_area)]}),Zt.flooring_materials&&e.jsxs("div",{style:{gridColumn:"1 / -1"},children:[e.jsx("strong",{children:"Flooring materials:"})," ",String(Zt.flooring_materials)]})]})})]}),it.layout_images&&Array.isArray(it.layout_images)&&it.layout_images.length>0&&e.jsxs("div",{style:{marginTop:"12px",padding:"16px",background:"linear-gradient(135deg, #eff6ff 0%, #dbeafe 100%)",borderRadius:"8px",border:"2px solid #3b82f6"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:"12px"},children:[e.jsx("span",{style:{fontSize:"20px",marginRight:"8px"},children:""}),e.jsx("strong",{style:{color:"#1e40af",fontSize:"15px"},children:"Layout Images for Estimation"})]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(160px, 1fr))",gap:"16px"},children:it.layout_images.map((W,me)=>{let ke=W.stored||W.original||W.name,tt=W.original||W.name;if(!ke&&it.technical_details&&it.technical_details.layout_image){const Ht=it.technical_details.layout_image;ke=Ht.stored||Ht.name,tt=Ht.name||Ht.original}if(!ke&&W.url){const Ht=W.url.split("/");ke=Ht[Ht.length-1]}ke||(ke=`layout_${me+1}.png`),tt||(tt=ke);const ht=JSON.parse(sessionStorage.getItem("user")||"{}");let Lt,It;ke&&ke!=="undefined"&&ht.id?(Lt=`/buildhub/backend/api/contractor/serve_layout_image.php?contractor_id=${ht.id}&image=${encodeURIComponent(ke)}`,It=`/buildhub/backend/api/contractor/serve_layout_image.php?contractor_id=${ht.id}&image=${encodeURIComponent(ke)}&download=1`):(Lt=Na(W.url||W.path||`/buildhub/backend/uploads/house_plans/${ke}`),It=Lt);const Jt=async()=>{try{if(It.includes("serve_layout_image.php")){const Ht=document.createElement("a");Ht.href=It,Ht.download=tt,Ht.target="_blank",document.body.appendChild(Ht),Ht.click(),document.body.removeChild(Ht)}else{const Wt=await(await fetch(Lt)).blob(),wa=window.URL.createObjectURL(Wt),ba=document.createElement("a");ba.href=wa,ba.download=tt,document.body.appendChild(ba),ba.click(),document.body.removeChild(ba),window.URL.revokeObjectURL(wa)}a.success(`Downloaded: ${tt}`)}catch(Ht){a.error("Failed to download image"),console.error("Download error:",Ht)}};return e.jsxs("div",{style:{position:"relative",border:"2px solid #3b82f6",borderRadius:"12px",overflow:"hidden",boxShadow:"0 4px 8px rgba(0,0,0,0.1)"},children:[e.jsx("img",{src:Lt,alt:`Layout ${me+1}`,style:{width:"100%",height:"120px",objectFit:"cover",cursor:"pointer"},onClick:()=>window.open(Lt,"_blank"),onError:Ht=>{console.error("Image load error for:",Lt),console.error("Layout image data:",W);const Wt=Na(`/buildhub/backend/uploads/house_plans/${ke}`);Ht.currentTarget.src!==Wt?Ht.currentTarget.src=Wt:Ht.currentTarget.style.display="none"}}),e.jsxs("div",{style:{position:"absolute",top:"8px",right:"8px",display:"flex",gap:"6px"},children:[e.jsx("button",{onClick:()=>window.open(Lt,"_blank"),style:{background:"rgba(255, 255, 255, 0.95)",border:"none",borderRadius:"6px",padding:"8px 10px",fontSize:"14px",cursor:"pointer",boxShadow:"0 2px 6px rgba(0,0,0,0.2)",color:"#1e40af",fontWeight:"600",minWidth:"36px",minHeight:"36px"},title:"View full size",children:""}),e.jsx("button",{onClick:Jt,style:{background:"rgba(16, 185, 129, 0.95)",border:"none",borderRadius:"6px",padding:"8px 10px",fontSize:"14px",cursor:"pointer",boxShadow:"0 2px 6px rgba(0,0,0,0.2)",color:"white",fontWeight:"600",minWidth:"36px",minHeight:"36px"},title:"Download image",children:""})]}),e.jsx("div",{style:{position:"absolute",bottom:"0",left:"0",right:"0",background:"rgba(30, 64, 175, 0.95)",color:"white",padding:"6px 8px",fontSize:"11px",textAlign:"center",fontWeight:"600"},children:tt})]},me)})}),e.jsxs("div",{style:{marginTop:"12px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("div",{style:{fontSize:"12px",color:"#1e40af",fontStyle:"italic"},children:" Click  to view full size  Click  to download"}),it.layout_images.length>1&&e.jsxs("button",{onClick:async()=>{try{const W=JSON.parse(sessionStorage.getItem("user")||"{}");for(let me=0;me<it.layout_images.length;me++){const ke=it.layout_images[me];let tt=ke.stored||ke.original||ke.name,ht=ke.original||ke.name;if(!tt&&it.technical_details&&it.technical_details.layout_image){const It=it.technical_details.layout_image;tt=It.stored||It.name,ht=It.name||It.original}if(!tt&&ke.url){const It=ke.url.split("/");tt=It[It.length-1]}tt||(tt=`layout_${me+1}.png`),ht||(ht=tt);let Lt;tt&&tt!=="undefined"&&W.id?Lt=`/buildhub/backend/api/contractor/serve_layout_image.php?contractor_id=${W.id}&image=${encodeURIComponent(tt)}&download=1`:Lt=Na(ke.url||ke.path||`/buildhub/backend/uploads/house_plans/${tt}`),setTimeout(()=>{try{const It=document.createElement("a");It.href=Lt,It.download=ht,It.target="_blank",document.body.appendChild(It),It.click(),document.body.removeChild(It)}catch(It){console.error(`Failed to download ${ht}:`,It)}},me*500)}a.success(`Downloading ${it.layout_images.length} layout images...`)}catch(W){a.error("Failed to download images"),console.error("Bulk download error:",W)}},style:{background:"#10b981",color:"white",border:"none",borderRadius:"8px",padding:"10px 16px",fontSize:"14px",cursor:"pointer",fontWeight:"600",boxShadow:"0 2px 6px rgba(0,0,0,0.1)",minHeight:"40px"},title:"Download all layout images",children:[" Download All (",it.layout_images.length,")"]})]})]}),Va&&e.jsx("div",{style:{marginTop:16},children:e.jsx(vl,{technicalDetails:Va,startExpanded:!1})}),$e?.files&&Array.isArray($e.files)&&$e.files.length>0&&e.jsxs("details",{style:{marginTop:"8px"},children:[e.jsxs("summary",{style:{cursor:"pointer",padding:"10px",background:"#f8f9fa",borderRadius:"6px",fontWeight:"500",fontSize:"14px",border:"1px solid #dee2e6"},children:[" Files (",$e.files.length,")"]}),e.jsx("ul",{style:{margin:"8px 0 0 16px",listStyle:"none",padding:"8px"},children:$e.files.map((W,me)=>{const ke=Na(W.url||W.path||(typeof W=="string"?W:"")),tt=W.name||(typeof W=="string"?W:`File ${me+1}`);return e.jsx("li",{style:{marginBottom:"6px"},children:e.jsxs("a",{href:ke,target:"_blank",rel:"noreferrer",style:{color:"#3b82f6",textDecoration:"none",padding:"4px 8px",borderRadius:"4px",display:"inline-block",background:"#e0f2fe",transition:"background 0.2s"},onMouseEnter:ht=>ht.target.style.background="#bae6fd",onMouseLeave:ht=>ht.target.style.background="#e0f2fe",children:[" ",tt]})},me)})})]}),ge.acknowledged_at?e.jsx("div",{style:{marginTop:"12px"},children:e.jsxs("details",{style:{marginTop:"12px"},onToggle:W=>{W.target.open&&Be.current&&setTimeout(()=>{const me=Be.current,ke=me.querySelector('[name="structured[project_name]"]'),tt=me.querySelector('[name="structured[client_name]"]'),ht=me.querySelector('[name="structured[client_contact]"]');ke&&(ke.value=`${ge?.homeowner_name||"Homeowner"} Construction`),tt&&(tt.value=ge?.homeowner_name||""),ht&&!ht.value&&(ht.value=ge?.homeowner_email||"");const Lt=st[ge?.id];Lt&&at(me,Lt)},100)},children:[e.jsxs("summary",{style:{cursor:"pointer",padding:"8px 12px",background:"#f3f4f6",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"14px",fontWeight:"500",color:"#374151",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsx("span",{children:" Create Estimate"}),st[ge?.id]&&e.jsxs("span",{style:{fontSize:"12px",color:"#10b981",fontWeight:"600",background:"#ecfdf5",padding:"2px 8px",borderRadius:"12px",border:"1px solid #a7f3d0"},children:[" Draft ",Ge[ge?.id]&&` ${Ge[ge?.id]}`]})]}),e.jsxs("form",{ref:Be,className:"estimate-form",onInput:W=>{try{Ct(W.currentTarget),ie(ge?.id,W.currentTarget)}catch{}},onSubmit:async W=>{W.preventDefault();const me=JSON.parse(sessionStorage.getItem("user")||"{}"),ke=W.currentTarget,tt=String(ge?.id||ke.querySelector('input[name="send_id"]')?.value||""),ht=String(o?.id||me?.id||ke.querySelector('input[name="contractor_id"]')?.value||"");if(!tt||!ht){a.error("Missing identifiers. Please refresh and try again.");return}const Lt={},It=(Wt,wa,ba)=>{let ka=Wt;for(let gs=0;gs<wa.length-1;gs++){const Ys=wa[gs];(!(Ys in ka)||typeof ka[Ys]!="object")&&(ka[Ys]={}),ka=ka[Ys]}ka[wa[wa.length-1]]=ba};ke.querySelectorAll('[name^="structured[" ]').forEach(Wt=>{const ba=Wt.getAttribute("name").match(/^structured\[(.+)\]$/);if(!ba)return;const gs=ba[1].split("][").map(Wi=>Wi.replace(/\]$/,"").replace(/^\[/,"")),Ys=Wt.value;It(Lt,gs,Ys)});const Ht={send_id:Number(tt),contractor_id:Number(ht),materials:ke.querySelector('textarea[name="materials"]')?.value||"",cost_breakdown:ke.querySelector('textarea[name="cost_breakdown"]')?.value||"",total_cost:ke.querySelector('input[name="total_cost"]')?.value||"",timeline:ke.querySelector('input[name="timeline"]')?.value||"",notes:ke.querySelector('textarea[name="notes"]')?.value||"",structured:Lt};try{const wa=await(await fetch("/buildhub/backend/api/contractor/submit_estimate_for_send.php",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(Ht)})).json();if(wa?.success){a.success("Estimate submitted successfully!"),ke.reset();const ba=Number(tt);ut(ka=>{const gs={...ka};return delete gs[ba],gs}),_e(ka=>{const gs={...ka};return delete gs[ba],gs});try{const ka=JSON.parse(sessionStorage.getItem("user")||"{}");if(ka?.id){const Ys=await(await fetch(`/buildhub/backend/api/contractor/get_my_estimates.php?contractor_id=${ka.id}`,{credentials:"include"})).json().catch(()=>({}));Ys?.success&&O(Array.isArray(Ys.estimates)?Ys.estimates:[])}}catch(ka){console.error("Error refreshing estimates:",ka)}}else a.error(wa?.message||"Failed to submit")}catch{a.error("Network error")}},children:[e.jsx("div",{style:{display:"flex",justifyContent:"center",marginBottom:"20px",padding:"20px 0"},children:e.jsx(ow,{size:"medium"})}),e.jsx("input",{type:"hidden",name:"send_id",defaultValue:String(ge?.id||"")}),e.jsx("input",{type:"hidden",name:"contractor_id",defaultValue:String(o?.id||JSON.parse(sessionStorage.getItem("user")||"{}").id||"")}),e.jsx("script",{dangerouslySetInnerHTML:{__html:`window.__bhCalcGrandTotal = window.__bhCalcGrandTotal || function(form){try{var m=form.querySelector('[name="structured[totals][materials]"]');var l=form.querySelector('[name="structured[totals][labor]"]');var u=form.querySelector('[name="structured[totals][utilities]"]');var s=form.querySelector('[name="structured[totals][misc]"]');var g=form.querySelector('[name="structured[totals][grand]"]');var tc=form.querySelector('[name="total_cost"]');function num(v){if(!v) return 0;return parseFloat(String(v).replace(/[,s]/g,''))||0;}var sum=num(m&&m.value)+num(l&&l.value)+num(u&&u.value)+num(s&&s.value);if(g){g.value=sum?String(sum):'';}if(tc){tc.value=sum?String(sum):tc.value;}}catch(e){}};`}}),e.jsx("script",{dangerouslySetInnerHTML:{__html:`window.__bhCalcSectionTotals = window.__bhCalcSectionTotals || function(form){try{function sumSection(prefix){var inputs=form.querySelectorAll('[name^="'+prefix+'"]');var total=0;inputs.forEach(function(inp){var v=(inp && inp.value)||'';var match=v.match(/[-+]?(?:\\d+\\.?\\d*|\\d*\\.?\\d+)/g);if(match){match.forEach(function(tok){var n=parseFloat(tok);if(!isNaN(n)) total+=n;});}});return total;}var m=sumSection('structured[materials]');var l=sumSection('structured[labor]');var u=sumSection('structured[utilities]');var s=sumSection('structured[misc]');var fm=form.querySelector('[name="structured[totals][materials]"]'); if(fm) fm.value = m?String(m):'';var fl=form.querySelector('[name="structured[totals][labor]"]'); if(fl) fl.value = l?String(l):'';var fu=form.querySelector('[name="structured[totals][utilities]"]'); if(fu) fu.value = u?String(u):'';var fs=form.querySelector('[name="structured[totals][misc]"]'); if(fs) fs.value = s?String(s):''; if(typeof window.__bhCalcGrandTotal==='function'){ window.__bhCalcGrandTotal(form); } }catch(e){}};`}}),e.jsx("div",{className:"section-title",children:"1. Basic Project Information"}),e.jsxs("div",{className:"grid-2",children:[e.jsx("input",{name:"structured[project_name]",placeholder:"Project Name",list:"bh_project_names",defaultValue:`${ge?.homeowner_name||"Homeowner"} Construction`,readOnly:!0,style:{background:"linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%)",border:"2px solid #3b82f6",color:"#1e40af",fontWeight:"600"}}),e.jsx("input",{name:"structured[project_address]",placeholder:"Project Address / Location"}),e.jsx("input",{name:"structured[plot_size]",placeholder:"Plot Size (sq.ft / sq.m)"}),e.jsx("input",{name:"structured[built_up_area]",placeholder:"Built-up Area (sq.ft / sq.m)"}),e.jsxs("select",{name:"structured[floors]",defaultValue:"",children:[e.jsx("option",{value:"",disabled:!0,children:"Number of Floors"}),e.jsx("option",{value:"1",children:"1"}),e.jsx("option",{value:"2",children:"2"}),e.jsx("option",{value:"3",children:"3"}),e.jsx("option",{value:"4",children:"4"})]}),e.jsx("input",{name:"structured[estimation_date]",type:"date",placeholder:"Estimation Date"}),e.jsx("input",{name:"structured[client_name]",placeholder:"Client / Homeowner Name",defaultValue:ge?.homeowner_name||"",readOnly:!0,style:{background:"linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%)",border:"2px solid #3b82f6",color:"#1e40af",fontWeight:"600"}}),e.jsx("input",{name:"structured[client_contact]",placeholder:"Contact Info",defaultValue:ge?.homeowner_email||""})]}),e.jsx("div",{className:"section-title",style:{marginTop:8},children:"2. Material Costs"}),e.jsx("div",{className:"muted",style:{marginTop:4},children:'Tip: enter numeric amounts anywhere in the field (e.g., "OPC 53 - 60000"). The calculator sums the numbers it finds.'}),e.jsxs("div",{className:"grid-3",onInput:W=>{try{Ct(W.currentTarget.closest("form"))}catch{}},children:[e.jsxs("div",{className:"estimate-line grid-4",children:[e.jsx("input",{name:"structured[materials][cement][name]",placeholder:"Cement grade (OPC 43/53, PPC)",list:"bh_cement"}),e.jsx("input",{name:"structured[materials][cement][qty]",placeholder:"Qty (bags) e.g., 50"}),e.jsx("input",{name:"structured[materials][cement][rate]",placeholder:"Rate ( per bag) e.g., 380"}),e.jsx("input",{name:"structured[materials][cement][amount]",placeholder:"Amount (auto)",readOnly:!0})]}),e.jsxs("div",{className:"estimate-line grid-4",children:[e.jsx("input",{name:"structured[materials][sand][name]",placeholder:"Sand type (River/M-sand)",list:"bh_sand"}),e.jsx("input",{name:"structured[materials][sand][qty]",placeholder:"Qty (m) e.g., 6"}),e.jsx("input",{name:"structured[materials][sand][rate]",placeholder:"Rate ( per m) e.g., 2500"}),e.jsx("input",{name:"structured[materials][sand][amount]",placeholder:"Amount (auto)",readOnly:!0})]}),e.jsxs("div",{className:"estimate-line grid-4",children:[e.jsx("input",{name:"structured[materials][bricks][name]",placeholder:"Bricks/Blocks (Clay/AAC)",list:"bh_bricks"}),e.jsx("input",{name:"structured[materials][bricks][qty]",placeholder:"Qty (nos) e.g., 5000"}),e.jsx("input",{name:"structured[materials][bricks][rate]",placeholder:"Rate ( per 1000) e.g., 8500"}),e.jsx("input",{name:"structured[materials][bricks][amount]",placeholder:"Amount (auto)",readOnly:!0})]}),e.jsxs("div",{className:"estimate-line grid-4",children:[e.jsx("input",{name:"structured[materials][steel][name]",placeholder:"Steel/TMT (8/10/12mm)",list:"bh_steel"}),e.jsx("input",{name:"structured[materials][steel][qty]",placeholder:"Qty (kg) e.g., 1200"}),e.jsx("input",{name:"structured[materials][steel][rate]",placeholder:"Rate ( per kg) e.g., 68"}),e.jsx("input",{name:"structured[materials][steel][amount]",placeholder:"Amount (auto)",readOnly:!0})]}),e.jsxs("div",{className:"estimate-line grid-4",children:[e.jsx("input",{name:"structured[materials][aggregate][name]",placeholder:"Aggregate (10/20mm)",list:"bh_aggregate"}),e.jsx("input",{name:"structured[materials][aggregate][qty]",placeholder:"Qty (m) e.g., 8"}),e.jsx("input",{name:"structured[materials][aggregate][rate]",placeholder:"Rate ( per m) e.g., 1800"}),e.jsx("input",{name:"structured[materials][aggregate][amount]",placeholder:"Amount (auto)",readOnly:!0})]}),e.jsxs("div",{className:"estimate-line grid-4",children:[e.jsx("input",{name:"structured[materials][tiles][name]",placeholder:"Tiles/Flooring (Vitrified/Ceramic)",list:"bh_tiles"}),e.jsx("input",{name:"structured[materials][tiles][qty]",placeholder:"Qty (m) e.g., 120"}),e.jsx("input",{name:"structured[materials][tiles][rate]",placeholder:"Rate ( per m) e.g., 600"}),e.jsx("input",{name:"structured[materials][tiles][amount]",placeholder:"Amount (auto)",readOnly:!0})]}),e.jsxs("div",{className:"estimate-line grid-4",children:[e.jsx("input",{name:"structured[materials][paint][name]",placeholder:"Paint (Interior/Exterior)",list:"bh_paint"}),e.jsx("input",{name:"structured[materials][paint][qty]",placeholder:"Qty (L) e.g., 80"}),e.jsx("input",{name:"structured[materials][paint][rate]",placeholder:"Rate ( per L) e.g., 250"}),e.jsx("input",{name:"structured[materials][paint][amount]",placeholder:"Amount (auto)",readOnly:!0})]}),e.jsxs("div",{className:"estimate-line grid-4",children:[e.jsx("input",{name:"structured[materials][doors][name]",placeholder:"Doors (Teak/Flush)",list:"bh_doors"}),e.jsx("input",{name:"structured[materials][doors][qty]",placeholder:"Qty (nos) e.g., 10"}),e.jsx("input",{name:"structured[materials][doors][rate]",placeholder:"Rate ( per door) e.g., 7000"}),e.jsx("input",{name:"structured[materials][doors][amount]",placeholder:"Amount (auto)",readOnly:!0})]}),e.jsxs("div",{className:"estimate-line grid-4",children:[e.jsx("input",{name:"structured[materials][windows][name]",placeholder:"Windows (uPVC/Aluminium)",list:"bh_windows"}),e.jsx("input",{name:"structured[materials][windows][qty]",placeholder:"Qty (nos) e.g., 12"}),e.jsx("input",{name:"structured[materials][windows][rate]",placeholder:"Rate ( per window) e.g., 6000"}),e.jsx("input",{name:"structured[materials][windows][amount]",placeholder:"Amount (auto)",readOnly:!0})]}),e.jsxs("div",{className:"estimate-line grid-4",style:{gridColumn:"1 / -1"},children:[e.jsx("input",{name:"structured[materials][others][name]",placeholder:"Other material (e.g., Glass/Hardware)"}),e.jsx("input",{name:"structured[materials][others][qty]",placeholder:"Qty (units)"}),e.jsx("input",{name:"structured[materials][others][rate]",placeholder:"Rate ( per unit)"}),e.jsx("input",{name:"structured[materials][others][amount]",placeholder:"Amount (auto)",readOnly:!0})]})]}),e.jsx("div",{className:"section-title",style:{marginTop:8},children:"3. Labor Charges"}),e.jsxs("div",{className:"grid-3",onInput:W=>{try{Ct(W.currentTarget.closest("form"))}catch{}},children:[e.jsxs("div",{className:"estimate-line grid-4",children:[e.jsx("input",{name:"structured[labor][mason][name]",placeholder:"Masonry work",list:"bh_labor_mason"}),e.jsx("input",{name:"structured[labor][mason][qty]",placeholder:"Qty (m / days)"}),e.jsx("input",{name:"structured[labor][mason][rate]",placeholder:"Rate ( per unit)"}),e.jsx("input",{name:"structured[labor][mason][amount]",placeholder:"Amount (auto)",readOnly:!0})]}),e.jsxs("div",{className:"estimate-line grid-4",children:[e.jsx("input",{name:"structured[labor][plaster][name]",placeholder:"Plaster work",list:"bh_labor_plaster"}),e.jsx("input",{name:"structured[labor][plaster][qty]",placeholder:"Qty (m)"}),e.jsx("input",{name:"structured[labor][plaster][rate]",placeholder:"Rate ( per m)"}),e.jsx("input",{name:"structured[labor][plaster][amount]",placeholder:"Amount (auto)",readOnly:!0})]}),e.jsxs("div",{className:"estimate-line grid-4",children:[e.jsx("input",{name:"structured[labor][painting][name]",placeholder:"Painting",list:"bh_labor_painting"}),e.jsx("input",{name:"structured[labor][painting][qty]",placeholder:"Qty (m / rooms)"}),e.jsx("input",{name:"structured[labor][painting][rate]",placeholder:"Rate ( per unit)"}),e.jsx("input",{name:"structured[labor][painting][amount]",placeholder:"Amount (auto)",readOnly:!0})]}),e.jsxs("div",{className:"estimate-line grid-4",children:[e.jsx("input",{name:"structured[labor][electrical][name]",placeholder:"Electrical",list:"bh_labor_electrical"}),e.jsx("input",{name:"structured[labor][electrical][qty]",placeholder:"Qty (points / rooms)"}),e.jsx("input",{name:"structured[labor][electrical][rate]",placeholder:"Rate ( per point/room)"}),e.jsx("input",{name:"structured[labor][electrical][amount]",placeholder:"Amount (auto)",readOnly:!0})]}),e.jsxs("div",{className:"estimate-line grid-4",children:[e.jsx("input",{name:"structured[labor][plumbing][name]",placeholder:"Plumbing",list:"bh_labor_plumbing"}),e.jsx("input",{name:"structured[labor][plumbing][qty]",placeholder:"Qty (fittings / rooms)"}),e.jsx("input",{name:"structured[labor][plumbing][rate]",placeholder:"Rate ( per fitting)"}),e.jsx("input",{name:"structured[labor][plumbing][amount]",placeholder:"Amount (auto)",readOnly:!0})]}),e.jsxs("div",{className:"estimate-line grid-4",children:[e.jsx("input",{name:"structured[labor][flooring][name]",placeholder:"Flooring installation",list:"bh_labor_flooring"}),e.jsx("input",{name:"structured[labor][flooring][qty]",placeholder:"Qty (m)"}),e.jsx("input",{name:"structured[labor][flooring][rate]",placeholder:"Rate ( per m)"}),e.jsx("input",{name:"structured[labor][flooring][amount]",placeholder:"Amount (auto)",readOnly:!0})]}),e.jsxs("div",{className:"estimate-line grid-4",children:[e.jsx("input",{name:"structured[labor][roofing][name]",placeholder:"Roofing/Ceiling work",list:"bh_labor_roofing"}),e.jsx("input",{name:"structured[labor][roofing][qty]",placeholder:"Qty (m)"}),e.jsx("input",{name:"structured[labor][roofing][rate]",placeholder:"Rate ( per m)"}),e.jsx("input",{name:"structured[labor][roofing][amount]",placeholder:"Amount (auto)",readOnly:!0})]}),e.jsxs("div",{className:"estimate-line grid-4",style:{gridColumn:"1 / -1"},children:[e.jsx("input",{name:"structured[labor][others][name]",placeholder:"Other labor"}),e.jsx("input",{name:"structured[labor][others][qty]",placeholder:"Qty (units)"}),e.jsx("input",{name:"structured[labor][others][rate]",placeholder:"Rate ( per unit)"}),e.jsx("input",{name:"structured[labor][others][amount]",placeholder:"Amount (auto)",readOnly:!0})]})]}),e.jsx("div",{className:"section-title",style:{marginTop:8},children:"4. Utilities & Fixtures"}),e.jsxs("div",{className:"grid-3",onInput:W=>{try{Ct(W.currentTarget.closest("form"))}catch{}},children:[e.jsxs("div",{className:"estimate-line grid-4",children:[e.jsx("input",{name:"structured[utilities][sanitary][name]",placeholder:"Sanitary fittings",list:"bh_util_sanitary"}),e.jsx("input",{name:"structured[utilities][sanitary][qty]",placeholder:"Qty (sets)"}),e.jsx("input",{name:"structured[utilities][sanitary][rate]",placeholder:"Rate ( per set)"}),e.jsx("input",{name:"structured[utilities][sanitary][amount]",placeholder:"Amount (auto)",readOnly:!0})]}),e.jsxs("div",{className:"estimate-line grid-4",children:[e.jsx("input",{name:"structured[utilities][kitchen][name]",placeholder:"Kitchen cabinets / modular",list:"bh_util_kitchen"}),e.jsx("input",{name:"structured[utilities][kitchen][qty]",placeholder:"Qty (ft / set)"}),e.jsx("input",{name:"structured[utilities][kitchen][rate]",placeholder:"Rate ( per ft/set)"}),e.jsx("input",{name:"structured[utilities][kitchen][amount]",placeholder:"Amount (auto)",readOnly:!0})]}),e.jsxs("div",{className:"estimate-line grid-4",children:[e.jsx("input",{name:"structured[utilities][electrical_fixtures][name]",placeholder:"Electrical fixtures",list:"bh_util_electrical_fixtures"}),e.jsx("input",{name:"structured[utilities][electrical_fixtures][qty]",placeholder:"Qty (points)"}),e.jsx("input",{name:"structured[utilities][electrical_fixtures][rate]",placeholder:"Rate ( per point)"}),e.jsx("input",{name:"structured[utilities][electrical_fixtures][amount]",placeholder:"Amount (auto)",readOnly:!0})]}),e.jsxs("div",{className:"estimate-line grid-4",children:[e.jsx("input",{name:"structured[utilities][water_tank][name]",placeholder:"Water tank & pumps",list:"bh_util_watertank"}),e.jsx("input",{name:"structured[utilities][water_tank][qty]",placeholder:"Qty (units)"}),e.jsx("input",{name:"structured[utilities][water_tank][rate]",placeholder:"Rate ( per unit)"}),e.jsx("input",{name:"structured[utilities][water_tank][amount]",placeholder:"Amount (auto)",readOnly:!0})]}),e.jsxs("div",{className:"estimate-line grid-4",children:[e.jsx("input",{name:"structured[utilities][hvac][name]",placeholder:"AC / Heating",list:"bh_util_hvac"}),e.jsx("input",{name:"structured[utilities][hvac][qty]",placeholder:"Qty (tons / units)"}),e.jsx("input",{name:"structured[utilities][hvac][rate]",placeholder:"Rate ( per unit)"}),e.jsx("input",{name:"structured[utilities][hvac][amount]",placeholder:"Amount (auto)",readOnly:!0})]}),e.jsxs("div",{className:"estimate-line grid-4",children:[e.jsx("input",{name:"structured[utilities][gas_water][name]",placeholder:"Gas / Water lines",list:"bh_util_gaswater"}),e.jsx("input",{name:"structured[utilities][gas_water][qty]",placeholder:"Qty (m / points)"}),e.jsx("input",{name:"structured[utilities][gas_water][rate]",placeholder:"Rate ( per m/point)"}),e.jsx("input",{name:"structured[utilities][gas_water][amount]",placeholder:"Amount (auto)",readOnly:!0})]}),e.jsxs("div",{className:"estimate-line grid-4",style:{gridColumn:"1 / -1"},children:[e.jsx("input",{name:"structured[utilities][others1][name]",placeholder:"Other utility item (e.g., Geyser install)"}),e.jsx("div",{}),e.jsx("div",{}),e.jsx("input",{name:"structured[utilities][others1][amount]",placeholder:"Price ()"})]}),e.jsxs("div",{className:"estimate-line grid-4",style:{gridColumn:"1 / -1"},children:[e.jsx("input",{name:"structured[utilities][others2][name]",placeholder:"Other utility item"}),e.jsx("div",{}),e.jsx("div",{}),e.jsx("input",{name:"structured[utilities][others2][amount]",placeholder:"Price ()"})]}),e.jsxs("div",{className:"estimate-line grid-4",style:{gridColumn:"1 / -1"},children:[e.jsx("input",{name:"structured[utilities][others3][name]",placeholder:"Other utility item"}),e.jsx("div",{}),e.jsx("div",{}),e.jsx("input",{name:"structured[utilities][others3][amount]",placeholder:"Price ()"})]})]}),e.jsx("div",{className:"section-title",style:{marginTop:8},children:"5. Miscellaneous Costs"}),e.jsxs("div",{className:"grid-3",onInput:W=>{try{Ct(W.currentTarget.closest("form"))}catch{}},children:[e.jsxs("div",{className:"estimate-line grid-4",children:[e.jsx("input",{name:"structured[misc][transport][name]",placeholder:"Transport (local/long-haul)",list:"bh_misc_transport"}),e.jsx("input",{name:"structured[misc][transport][qty]",placeholder:"Qty (trips)"}),e.jsx("input",{name:"structured[misc][transport][rate]",placeholder:"Rate ( per trip)"}),e.jsx("input",{name:"structured[misc][transport][amount]",placeholder:"Amount (auto)",readOnly:!0})]}),e.jsxs("div",{className:"estimate-line grid-4",children:[e.jsx("input",{name:"structured[misc][contingency][name]",placeholder:"Contingency buffer",list:"bh_misc_contingency"}),e.jsx("input",{name:"structured[misc][contingency][qty]",placeholder:"Qty (%) e.g., 5"}),e.jsx("input",{name:"structured[misc][contingency][rate]",placeholder:"Base amount ()"}),e.jsx("input",{name:"structured[misc][contingency][amount]",placeholder:"Amount (auto)",readOnly:!0})]}),e.jsxs("div",{className:"estimate-line grid-4",children:[e.jsx("input",{name:"structured[misc][fees][name]",placeholder:"Permit/Municipal/Registration fees",list:"bh_misc_fees"}),e.jsx("div",{}),e.jsx("div",{}),e.jsx("input",{name:"structured[misc][fees][amount]",placeholder:"Price ()"})]}),e.jsxs("div",{className:"estimate-line grid-4",children:[e.jsx("input",{name:"structured[misc][cleaning][name]",placeholder:"Cleaning / Waste removal",list:"bh_misc_cleaning"}),e.jsx("input",{name:"structured[misc][cleaning][qty]",placeholder:"Qty (days / loads)"}),e.jsx("input",{name:"structured[misc][cleaning][rate]",placeholder:"Rate ( per unit)"}),e.jsx("input",{name:"structured[misc][cleaning][amount]",placeholder:"Amount (auto)",readOnly:!0})]}),e.jsxs("div",{className:"estimate-line grid-4",children:[e.jsx("input",{name:"structured[misc][safety][name]",placeholder:"Safety equipment / Scaffolding",list:"bh_misc_safety"}),e.jsx("input",{name:"structured[misc][safety][qty]",placeholder:"Qty (sets / days)"}),e.jsx("input",{name:"structured[misc][safety][rate]",placeholder:"Rate ( per unit)"}),e.jsx("input",{name:"structured[misc][safety][amount]",placeholder:"Amount (auto)",readOnly:!0})]}),e.jsxs("div",{className:"estimate-line grid-4",style:{gridColumn:"1 / -1"},children:[e.jsx("input",{name:"structured[misc][others1][name]",placeholder:"Other expense (e.g., Site security)"}),e.jsx("div",{}),e.jsx("div",{}),e.jsx("input",{name:"structured[misc][others1][amount]",placeholder:"Price ()"})]}),e.jsxs("div",{className:"estimate-line grid-4",style:{gridColumn:"1 / -1"},children:[e.jsx("input",{name:"structured[misc][others2][name]",placeholder:"Other expense"}),e.jsx("div",{}),e.jsx("div",{}),e.jsx("input",{name:"structured[misc][others2][amount]",placeholder:"Price ()"})]}),e.jsxs("div",{className:"estimate-line grid-4",style:{gridColumn:"1 / -1"},children:[e.jsx("input",{name:"structured[misc][others3][name]",placeholder:"Other expense"}),e.jsx("div",{}),e.jsx("div",{}),e.jsx("input",{name:"structured[misc][others3][amount]",placeholder:"Price ()"})]})]}),e.jsx("div",{className:"section-title",style:{marginTop:8},children:"6. Total Estimation"}),e.jsxs("div",{className:"totals",onInput:W=>{try{Ct(W.currentTarget.closest("form"))}catch{}},children:[e.jsx("input",{name:"structured[totals][materials]",placeholder:"Material Costs Total",value:$||"",readOnly:!0,style:{border:"1px solid #e5e7eb",borderRadius:6,padding:8}}),e.jsx("input",{name:"structured[totals][labor]",placeholder:"Labor Charges Total",value:k||"",readOnly:!0,style:{border:"1px solid #e5e7eb",borderRadius:6,padding:8}}),e.jsx("input",{name:"structured[totals][utilities]",placeholder:"Utilities & Fixtures Total",value:H||"",readOnly:!0,style:{border:"1px solid #e5e7eb",borderRadius:6,padding:8}}),e.jsx("input",{name:"structured[totals][misc]",placeholder:"Miscellaneous Total",value:J||"",readOnly:!0,style:{border:"1px solid #e5e7eb",borderRadius:6,padding:8}}),e.jsx("input",{className:"grand-total",name:"structured[totals][grand]",placeholder:"Grand Total (auto)",readOnly:!0,value:oe||""})]}),e.jsx("div",{className:"section-title",style:{marginTop:8},children:"7. Notes for Homeowner"}),e.jsx("textarea",{name:"notes",placeholder:"Prices approximate; quantities based on layout; payment schedule; taxes; warranties",rows:3}),e.jsx("div",{style:{fontWeight:700,marginTop:8},children:"8. Optional Details"}),e.jsx("textarea",{name:"structured[brands]",placeholder:"Brands (cement, steel, tiles) / Grades / Units / Photos links",rows:2,style:{border:"1px solid #e5e7eb",borderRadius:6,padding:8}}),e.jsx("label",{style:{fontWeight:600},children:"Materials"}),e.jsx("textarea",{name:"materials",placeholder:"List key materials, grades, brands if any",rows:2,style:{border:"1px solid #e5e7eb",borderRadius:6,padding:8}}),e.jsx("label",{style:{fontWeight:600},children:"Cost breakdown"}),e.jsx("textarea",{name:"cost_breakdown",placeholder:"Itemized costs (e.g., excavation, RCC, masonry, finishes, labor)",rows:3,style:{border:"1px solid #e5e7eb",borderRadius:6,padding:8}}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8},children:[e.jsxs("div",{children:[e.jsx("label",{style:{fontWeight:600},children:"Total cost ()"}),e.jsx("input",{name:"total_cost",type:"number",step:"0.01",placeholder:"Auto-calculated",required:!0,readOnly:!0,style:{width:"100%",border:"1px solid #e5e7eb",borderRadius:6,padding:8,background:"#f9fafb"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{fontWeight:600},children:"Timeline"}),e.jsx("input",{name:"timeline",placeholder:"e.g., 810 weeks",required:!0,style:{width:"100%",border:"1px solid #e5e7eb",borderRadius:6,padding:8}})]})]}),e.jsx("label",{style:{fontWeight:600},children:"Notes"}),e.jsx("textarea",{name:"notes",placeholder:"Assumptions, exclusions, payment terms, validity",rows:2,style:{border:"1px solid #e5e7eb",borderRadius:6,padding:8}}),e.jsxs("div",{style:{padding:10,background:"#f8fafc",border:"1px dashed #cbd5e1",borderRadius:8},children:[e.jsx("div",{style:{fontWeight:600,marginBottom:6},children:"Preview"}),e.jsx("div",{style:{fontSize:14,color:"#374151"},children:'Fill the fields and your estimate will be visible to the homeowner under "Sent to Contractors".'})]}),e.jsxs("div",{children:[e.jsx("label",{style:{fontWeight:600},children:"Attachments (optional)"}),e.jsx("input",{name:"attachments",type:"file",multiple:!0})]}),e.jsxs("div",{className:"actions",children:[e.jsx("button",{className:"btn btn-secondary",type:"button",onClick:W=>{const me=W.currentTarget.closest("form");if(me){me.reset(),Ct(me);const ke=ge?.id;ke&&(ut(tt=>({...tt,[ke]:null})),_e(tt=>({...tt,[ke]:null})))}},children:" Reset"}),st[ge?.id]&&e.jsx("button",{className:"btn btn-secondary",type:"button",onClick:async()=>{const W=ge?.id;if(W&&confirm("Are you sure you want to clear the saved draft?"))try{const me=JSON.parse(sessionStorage.getItem("user")||"{}");await fetch("/buildhub/backend/api/contractor/save_estimate_draft.php",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({contractor_id:me.id,send_id:W,draft_data:{}})}),ut(ke=>({...ke,[W]:null})),_e(ke=>({...ke,[W]:null})),Be.current&&(Be.current.reset(),Ct(Be.current)),a.success("Draft cleared successfully")}catch{a.error("Error clearing draft")}},children:" Clear Draft"}),e.jsx("button",{className:"btn btn-primary",type:"button",onClick:async W=>{const me=W.currentTarget.closest("form");await Ot(me)},children:" Download PDF Report"}),e.jsx("button",{className:"btn btn-primary",type:"submit",children:" Submit Estimate"})]}),e.jsxs("datalist",{id:"bh_project_names",children:[e.jsx("option",{value:"Residential Villa"}),e.jsx("option",{value:"Commercial Complex"}),e.jsx("option",{value:"Renovation Project"})]}),e.jsxs("datalist",{id:"bh_cement",children:[e.jsx("option",{value:"OPC 43 grade - 50 bags"}),e.jsx("option",{value:"OPC 53 grade - 60 bags"}),e.jsx("option",{value:"PPC - 55 bags"})]}),e.jsxs("datalist",{id:"bh_sand",children:[e.jsx("option",{value:"River sand - 5 m"}),e.jsx("option",{value:"M-sand - 6 m"})]}),e.jsxs("datalist",{id:"bh_bricks",children:[e.jsx("option",{value:"Clay bricks - 5000 nos"}),e.jsx("option",{value:"AAC blocks - 3000 nos"})]}),e.jsxs("datalist",{id:"bh_steel",children:[e.jsx("option",{value:"TMT 8/10/12mm - 1500 kg"}),e.jsx("option",{value:"TMT 16/20mm - 1000 kg"})]}),e.jsxs("datalist",{id:"bh_aggregate",children:[e.jsx("option",{value:"20mm aggregate - 8 m"}),e.jsx("option",{value:"10mm aggregate - 6 m"})]}),e.jsxs("datalist",{id:"bh_tiles",children:[e.jsx("option",{value:"Vitrified tiles - 120 m"}),e.jsx("option",{value:"Ceramic tiles - 90 m"})]}),e.jsxs("datalist",{id:"bh_paint",children:[e.jsx("option",{value:"Interior emulsion - 80 L"}),e.jsx("option",{value:"Exterior emulsion - 60 L"})]}),e.jsxs("datalist",{id:"bh_doors",children:[e.jsx("option",{value:"Teakwood doors - 10 nos"}),e.jsx("option",{value:"Flush doors - 8 nos"})]}),e.jsxs("datalist",{id:"bh_windows",children:[e.jsx("option",{value:"uPVC windows - 12 nos"}),e.jsx("option",{value:"Aluminium windows - 10 nos"})]}),e.jsxs("datalist",{id:"bh_labor_mason",children:[e.jsx("option",{value:"Masonry - /m"}),e.jsx("option",{value:"Block work - /m"})]}),e.jsxs("datalist",{id:"bh_labor_plaster",children:[e.jsx("option",{value:"Internal plaster - /m"}),e.jsx("option",{value:"External plaster - /m"})]}),e.jsxs("datalist",{id:"bh_labor_painting",children:[e.jsx("option",{value:"2-coat interior - /m"}),e.jsx("option",{value:"3-coat exterior - /m"})]}),e.jsxs("datalist",{id:"bh_labor_electrical",children:[e.jsx("option",{value:"Per point - /pt"}),e.jsx("option",{value:"Per room - /room"})]}),e.jsxs("datalist",{id:"bh_labor_plumbing",children:[e.jsx("option",{value:"Per fitting - /fit"}),e.jsx("option",{value:"Per bathroom - /bath"})]}),e.jsxs("datalist",{id:"bh_labor_flooring",children:[e.jsx("option",{value:"Flooring install - /m"}),e.jsx("option",{value:"Skirting - /m"})]}),e.jsxs("datalist",{id:"bh_labor_roofing",children:[e.jsx("option",{value:"Roof sheet install - /m"}),e.jsx("option",{value:"Ceiling grid - /m"})]}),e.jsxs("datalist",{id:"bh_util_sanitary",children:[e.jsx("option",{value:"WC, basin, shower set"}),e.jsx("option",{value:"Premium sanitary set"})]}),e.jsxs("datalist",{id:"bh_util_kitchen",children:[e.jsx("option",{value:"Modular kitchen - 12ft"}),e.jsx("option",{value:"Modular kitchen - 15ft"})]}),e.jsxs("datalist",{id:"bh_util_electrical_fixtures",children:[e.jsx("option",{value:"LED panels, fans, switches"}),e.jsx("option",{value:"Designer lights set"})]}),e.jsxs("datalist",{id:"bh_util_watertank",children:[e.jsx("option",{value:"Overhead tank 1000L + pump"}),e.jsx("option",{value:"Overhead tank 2000L + pump"})]}),e.jsxs("datalist",{id:"bh_util_hvac",children:[e.jsx("option",{value:"Split AC - 1.5T x 2"}),e.jsx("option",{value:"Inverter AC - 1T x 3"})]}),e.jsxs("datalist",{id:"bh_util_gaswater",children:[e.jsx("option",{value:"Gas line + kitchen water line"}),e.jsx("option",{value:"Full house water lines"})]}),e.jsxs("datalist",{id:"bh_misc_transport",children:[e.jsx("option",{value:"Material transport local"}),e.jsx("option",{value:"Material transport long-haul"})]}),e.jsxs("datalist",{id:"bh_misc_contingency",children:[e.jsx("option",{value:"5% buffer"}),e.jsx("option",{value:"10% buffer"})]}),e.jsxs("datalist",{id:"bh_misc_fees",children:[e.jsx("option",{value:"Permit & registration"}),e.jsx("option",{value:"Municipal fees"})]}),e.jsxs("datalist",{id:"bh_misc_cleaning",children:[e.jsx("option",{value:"Debris removal"}),e.jsx("option",{value:"Final cleaning"})]}),e.jsxs("datalist",{id:"bh_misc_safety",children:[e.jsx("option",{value:"PPE & scaffolding"}),e.jsx("option",{value:"Safety nets & signage"})]})]})]})}):e.jsxs("div",{className:"acknowledgment-required",children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"8px"},children:[e.jsx("span",{className:"icon",children:""}),e.jsx("strong",{className:"title",children:"Acknowledgment Required"})]}),e.jsx("p",{className:"message",children:'Please acknowledge this request first before submitting an estimate. Use the "Acknowledge" button above to confirm receipt and set your completion timeline.'})]})]})]})]},ge.id)},cs=()=>e.jsxs("div",{children:[e.jsxs("div",{className:"main-header",children:[e.jsx("h1",{children:"Construction Projects"}),e.jsx("p",{children:"Approved estimates ready for construction with complete project details"})]}),e.jsxs("div",{className:"section-card",children:[e.jsxs("div",{className:"section-header",children:[e.jsx("h2",{children:"Active Construction Projects"}),e.jsx("p",{children:"Detailed project information including layouts, estimates, and technical specifications"}),e.jsxs("div",{className:"section-actions",style:{display:"flex",gap:"12px",marginTop:"12px"},children:[e.jsx("button",{className:"btn btn-primary",onClick:async()=>{E(!0);try{const ge=JSON.parse(sessionStorage.getItem("user")||"{}"),$e=await(await fetch(`/buildhub/backend/api/contractor/get_projects.php?contractor_id=${ge.id}`,{credentials:"include"})).json().catch(()=>({}));$e?.success&&X(Array.isArray($e.data.projects)?$e.data.projects:[])}catch{}E(!1)},disabled:U,children:U?" Refreshing...":" Refresh Projects"}),e.jsx("button",{className:"btn btn-secondary",onClick:()=>i("proposals"),children:" View All Estimates"}),e.jsx("button",{className:"btn btn-secondary",onClick:()=>i("inbox"),children:" Check Inbox"})]})]}),e.jsx("div",{className:"section-content",children:U?e.jsx("div",{className:"loading",children:"Loading construction projects..."}):G.length===0?e.jsxs("div",{className:"empty-state",children:[e.jsx("div",{className:"empty-icon",children:""}),e.jsx("h3",{children:"No Construction Projects Yet"}),e.jsx("p",{children:"When homeowners approve your estimates and start construction, they will appear here with complete project details!"}),e.jsxs("div",{style:{marginTop:"24px",display:"flex",flexDirection:"column",gap:"12px",alignItems:"center"},children:[e.jsxs("div",{style:{display:"flex",gap:"12px",flexWrap:"wrap",justifyContent:"center"},children:[e.jsx("button",{className:"btn btn-primary",onClick:()=>i("projects"),style:{display:"flex",alignItems:"center",gap:"6px"},children:" Browse Available Projects"}),e.jsx("button",{className:"btn btn-secondary",onClick:()=>i("proposals"),style:{display:"flex",alignItems:"center",gap:"6px"},children:" View My Estimates"}),e.jsx("button",{className:"btn btn-secondary",onClick:()=>i("inbox"),style:{display:"flex",alignItems:"center",gap:"6px"},children:" Check Messages"})]}),e.jsxs("div",{style:{fontSize:"14px",color:"#6b7280",textAlign:"center",maxWidth:"400px"},children:[e.jsx("strong",{children:" Tip:"})," Submit detailed estimates for available projects to increase your chances of getting approved for construction work!"]})]})]}):e.jsx("div",{className:"construction-projects",children:G.map(ge=>e.jsxs("div",{className:"construction-project-card",children:[e.jsxs("div",{className:"project-header",children:[e.jsx("div",{className:"project-icon",children:e.jsx("div",{style:{width:48,height:48,borderRadius:8,background:"linear-gradient(135deg, #10b981, #059669)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"20px",color:"white"},children:""})}),e.jsxs("div",{className:"project-title-section",children:[e.jsx("h3",{className:"project-title",children:ge.project_name}),e.jsx("p",{className:"project-subtitle",children:ge.project_description}),e.jsxs("div",{className:"project-meta",children:[e.jsxs("span",{className:"meta-item",children:["Total: ",ge.technical_summary.total_cost]}),e.jsxs("span",{className:"meta-item",children:["Timeline: ",ge.timeline||"TBD"]}),e.jsxs("span",{className:"meta-item",children:["Progress: ",ge.project_summary.progress]}),e.jsxs("span",{className:"meta-item",children:["Status: ",ge.project_summary.status]})]})]}),e.jsxs("div",{className:"project-actions",style:{display:"flex",gap:"8px",flexWrap:"wrap"},children:[e.jsx("button",{className:"btn btn-primary",onClick:()=>le(ee===ge.id?null:ge.id),children:ee===ge.id?"Hide Details":"View Details"}),e.jsx("button",{className:"btn btn-secondary",onClick:()=>{const it=`Construction Project Update - ${ge.project_name}`,$e=`Hi ${ge.homeowner_name},

I wanted to provide you with an update on your construction project.

Project: ${ge.project_name}
Total Cost: ${ge.technical_summary.total_cost}
Timeline: ${ge.timeline||"TBD"}
Current Progress: ${ge.project_summary.progress}
Current Stage: ${ge.project_summary.current_stage}

Please let me know if you have any questions.

Best regards,
[Your Name]`;window.open(`mailto:${ge.homeowner_email}?subject=${encodeURIComponent(it)}&body=${encodeURIComponent($e)}`)},title:"Send email to homeowner",children:" Contact Homeowner"}),e.jsx("button",{className:"btn btn-secondary",onClick:()=>{const it=`Project: ${ge.project_name}
Homeowner: ${ge.homeowner_name}
Email: ${ge.homeowner_email}
Phone: ${ge.homeowner_phone||"Not provided"}
Total Cost: ${ge.technical_summary.total_cost}
Timeline: ${ge.timeline||"TBD"}
Progress: ${ge.project_summary.progress}
Status: ${ge.project_summary.status}`;navigator.clipboard.writeText(it).then(()=>{try{a.success("Project details copied to clipboard!")}catch{}}).catch(()=>{try{a.error("Failed to copy details")}catch{}})},title:"Copy project details",children:" Copy Details"})]})]}),ee===ge.id&&e.jsx("div",{className:"project-details",children:e.jsxs("div",{className:"details-grid",children:[e.jsxs("div",{className:"detail-section",children:[e.jsx("h4",{className:"section-title",children:" Homeowner Information"}),e.jsxs("div",{className:"detail-content",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Name:"})," ",ge.homeowner_name]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Email:"})," ",ge.homeowner_email]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Phone:"})," ",ge.homeowner_phone||"Not provided"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Location:"})," ",ge.project_location||"Not provided"]})]})]}),e.jsxs("div",{className:"detail-section",children:[e.jsx("h4",{className:"section-title",children:" Project Requirements"}),e.jsxs("div",{className:"detail-content",children:[ge.plot_size&&e.jsxs("p",{children:[e.jsx("strong",{children:"Plot Size:"})," ",ge.plot_size]}),ge.budget_range&&e.jsxs("p",{children:[e.jsx("strong",{children:"Budget Range:"})," ",ge.budget_range]}),ge.project_location&&e.jsxs("p",{children:[e.jsx("strong",{children:"Location:"})," ",ge.project_location]}),ge.preferred_style&&e.jsxs("p",{children:[e.jsx("strong",{children:"Preferred Style:"})," ",ge.preferred_style]}),ge.requirements&&e.jsxs("p",{children:[e.jsx("strong",{children:"Requirements:"})," ",ge.requirements]}),ge.timeline&&e.jsxs("p",{children:[e.jsx("strong",{children:"Timeline:"})," ",ge.timeline]})]})]}),e.jsxs("div",{className:"detail-section",children:[e.jsx("h4",{className:"section-title",children:" Cost Breakdown"}),e.jsxs("div",{className:"detail-content",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Total Cost:"})," ",ge.technical_summary.total_cost]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Materials Cost:"})," ",ge.technical_summary.materials_cost]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Labor Cost:"})," ",ge.technical_summary.labor_cost]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Timeline:"})," ",ge.timeline||"TBD"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Status:"})," ",ge.project_summary.status]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Created Date:"})," ",ge.created_date_formatted]}),ge.materials&&e.jsxs("p",{children:[e.jsx("strong",{children:"Materials:"})," ",ge.materials]}),ge.contractor_notes&&e.jsxs("p",{children:[e.jsx("strong",{children:"Notes:"})," ",ge.contractor_notes]})]})]}),ge.layout_data&&e.jsxs("div",{className:"detail-section",children:[e.jsx("h4",{className:"section-title",children:" Layout & Technical Details"}),e.jsxs("div",{className:"detail-content",children:[ge.layout_data.layout_image&&e.jsxs("div",{style:{marginBottom:"12px"},children:[e.jsx("p",{children:e.jsx("strong",{children:"Layout Image:"})}),e.jsx("img",{src:`/buildhub/backend/api/contractor/serve_layout_image.php?contractor_id=${o?.id}&image=${ge.layout_data.layout_image}`,alt:"Layout",style:{maxWidth:"300px",maxHeight:"200px",border:"1px solid #ddd",borderRadius:"4px"},onError:it=>{it.target.style.display="none"}})]}),ge.layout_data.layout_file&&e.jsxs("p",{children:[e.jsx("strong",{children:"Layout File:"})," ",ge.layout_data.layout_file]}),ge.layout_data.technical_details&&e.jsxs("p",{children:[e.jsx("strong",{children:"Technical Details:"})," ",ge.layout_data.technical_details]})]})]}),e.jsxs("div",{className:"detail-section",children:[e.jsx("h4",{className:"section-title",children:" Progress Status"}),e.jsxs("div",{className:"detail-content",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Current Progress:"})," ",ge.project_summary.progress]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Current Stage:"})," ",ge.project_summary.current_stage]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Total Updates:"})," ",ge.project_summary.updates_count]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Last Activity:"})," ",ge.project_summary.last_activity]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Expected Completion:"})," ",ge.expected_completion_formatted]})]})]}),e.jsxs("div",{className:"detail-section construction-start",children:[e.jsx("h4",{className:"section-title",children:" Construction Management"}),e.jsxs("div",{className:"detail-content",children:[e.jsxs("div",{className:"construction-checklist",children:[e.jsx("h5",{children:"Project Status:"}),e.jsxs("ul",{children:[e.jsx("li",{children:" Estimate approved by homeowner"}),e.jsx("li",{children:" Project created automatically"}),e.jsx("li",{children:" Technical details available"}),e.jsx("li",{children:" Layout plans included"}),e.jsx("li",{children:" Ready for construction start"})]})]}),e.jsxs("div",{className:"next-steps",children:[e.jsx("h5",{children:"Next Steps:"}),e.jsxs("ol",{children:[e.jsx("li",{children:"Contact homeowner to schedule site visit"}),e.jsx("li",{children:"Finalize construction timeline"}),e.jsx("li",{children:"Arrange material delivery"}),e.jsx("li",{children:"Set up construction site"}),e.jsx("li",{children:"Begin construction work"}),e.jsx("li",{children:"Submit regular progress updates"})]})]}),e.jsxs("div",{className:"construction-actions",style:{marginTop:"20px",padding:"16px",backgroundColor:"#f8fafc",borderRadius:"8px",border:"1px solid #e2e8f0"},children:[e.jsx("h5",{style:{margin:"0 0 12px 0",color:"#374151"},children:" Project Management Actions"}),e.jsxs("div",{style:{display:"flex",gap:"12px",flexWrap:"wrap"},children:[e.jsx("button",{className:"btn btn-success",onClick:()=>{const it=`Construction Start Confirmation - ${ge.project_name}`,$e=`Hi ${ge.homeowner_name},

I'm excited to confirm that we're ready to begin construction on your project!

Project: ${ge.project_name}
Total Cost: ${ge.technical_summary.total_cost}
Timeline: ${ge.timeline||"TBD"}
Current Progress: ${ge.project_summary.progress}

I'll be in touch soon to schedule the site visit and discuss the next steps.

Best regards,
[Your Name]`;window.open(`mailto:${ge.homeowner_email}?subject=${encodeURIComponent(it)}&body=${encodeURIComponent($e)}`)},children:" Confirm Start with Homeowner"}),e.jsx("button",{className:"btn btn-primary",onClick:()=>i("progress"),children:" Submit Progress Update"}),e.jsx("button",{className:"btn btn-secondary",onClick:()=>{const it=`Construction Project Details

Project: ${ge.project_name}
Homeowner: ${ge.homeowner_name}
Start Date: ${ge.start_date_formatted}
Timeline: ${ge.timeline||"TBD"}
Total Cost: ${ge.technical_summary.total_cost}
Progress: ${ge.project_summary.progress}
Status: ${ge.project_summary.status}`;navigator.clipboard.writeText(it).then(()=>{try{a.success("Project details copied!")}catch{}}).catch(()=>{try{a.error("Failed to copy details")}catch{}})},children:" Copy Project Details"})]})]})]})]})]})})]},ge.id))})})]})]}),Gs=()=>e.jsxs("div",{children:[e.jsxs("div",{className:"main-header",children:[e.jsx("h1",{children:"Profile"}),e.jsx("p",{children:"Manage your account information and settings"})]}),e.jsxs("div",{className:"profile-grid",children:[e.jsxs("div",{className:"profile-card",children:[e.jsxs("div",{className:"profile-avatar-large",children:[o?.first_name?.charAt(0),o?.last_name?.charAt(0)]}),e.jsxs("div",{className:"profile-info",children:[e.jsxs("h3",{children:[o?.first_name," ",o?.last_name]}),e.jsx("p",{className:"profile-role",children:"Contractor"}),e.jsx("p",{className:"profile-email",children:o?.email})]})]}),e.jsxs("div",{className:"profile-card",children:[e.jsxs("div",{className:"section-header",children:[e.jsx("h2",{children:"Account Information"}),e.jsx("p",{children:"Your personal and professional details"})]}),e.jsxs("div",{className:"detail-grid",children:[e.jsxs("div",{className:"detail-item",children:[e.jsx("label",{children:"Full Name"}),e.jsxs("p",{children:[o?.first_name," ",o?.last_name]})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("label",{children:"Email Address"}),e.jsx("p",{children:o?.email})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("label",{children:"Role"}),e.jsx("p",{children:"Contractor"})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("label",{children:"Account Status"}),e.jsx("p",{className:"status-badge accepted",children:"Active"})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("label",{children:"Total Projects"}),e.jsx("p",{children:S.filter(ge=>ge.status==="accepted").length})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("label",{children:"Success Rate"}),e.jsxs("p",{children:[S.length>0?Math.round(S.filter(ge=>ge.status==="accepted").length/S.length*100):0,"%"]})]})]})]})]})]}),yn=()=>{const ge=it=>{a.success("Progress update submitted successfully!"),Je("timeline")};return e.jsxs("div",{children:[e.jsxs("div",{className:"main-header",children:[e.jsx("h1",{children:"Construction Progress Updates"}),e.jsx("p",{children:"Submit progress updates, track construction timeline, and generate audit reports"})]}),e.jsxs("div",{className:"progress-view-toggle",style:{marginBottom:"20px"},children:[e.jsx("button",{className:`toggle-btn ${Ze==="submit"?"active":""}`,onClick:()=>Je("submit"),children:" Submit Update"}),e.jsx("button",{className:`toggle-btn ${Ze==="timeline"?"active":""}`,onClick:()=>Je("timeline"),children:" View Timeline"}),e.jsx("button",{className:`toggle-btn ${Ze==="payment"?"active":""}`,onClick:()=>Je("payment"),children:" Request Payment"}),e.jsx("button",{className:`toggle-btn ${Ze==="history"?"active":""}`,onClick:()=>Je("history"),children:" Payment History"}),e.jsx("button",{className:`toggle-btn ${Ze==="reports"?"active":""}`,onClick:()=>Je("reports"),children:" Generate Reports"})]}),Ze==="submit"?e.jsx(h6,{contractorId:o?.id,onUpdateSubmitted:ge}):Ze==="timeline"?e.jsx(A6,{contractorId:o?.id,userRole:"contractor"}):Ze==="payment"?e.jsx("div",{className:"payment-section",children:e.jsx(m6,{contractorId:o?.id,onPaymentRequested:it=>{a.success("Payment request submitted successfully!")}})}):Ze==="history"?e.jsx("div",{className:"payment-history-section",children:e.jsx(g6,{contractorId:o?.id})}):Ze==="reports"?e.jsxs("div",{className:"reports-section",children:[e.jsxs("div",{className:"reports-header",children:[e.jsx("h2",{children:" Progress Report Generator"}),e.jsx("p",{children:"Generate comprehensive audit reports for daily, weekly, and monthly progress tracking"})]}),e.jsx("div",{className:"reports-actions",children:e.jsx("button",{className:"btn btn-primary",onClick:()=>ve(!0),style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",border:"none",padding:"12px 24px",borderRadius:"8px",fontSize:"16px",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",boxShadow:"0 4px 12px rgba(102, 126, 234, 0.3)",transition:"all 0.3s ease"},onMouseOver:it=>{it.target.style.transform="translateY(-2px)",it.target.style.boxShadow="0 6px 16px rgba(102, 126, 234, 0.4)"},onMouseOut:it=>{it.target.style.transform="translateY(0)",it.target.style.boxShadow="0 4px 12px rgba(102, 126, 234, 0.3)"},children:" Generate New Report"})}),e.jsxs("div",{className:"reports-info",style:{marginTop:"30px",padding:"20px",background:"linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%)",borderRadius:"12px",border:"1px solid #dee2e6"},children:[e.jsx("h3",{style:{margin:"0 0 15px 0",color:"#2c3e50"},children:" Available Report Types"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(280px, 1fr))",gap:"20px",marginTop:"15px"},children:[e.jsxs("div",{style:{padding:"15px",background:"white",borderRadius:"8px",border:"1px solid #e9ecef",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:[e.jsx("h4",{style:{margin:"0 0 10px 0",color:"#28a745"},children:" Daily Reports"}),e.jsx("p",{style:{margin:"0",fontSize:"14px",color:"#6c757d",lineHeight:"1.5"},children:"Detailed daily progress with work done, labour tracking, materials used, photos, and quality metrics."})]}),e.jsxs("div",{style:{padding:"15px",background:"white",borderRadius:"8px",border:"1px solid #e9ecef",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:[e.jsx("h4",{style:{margin:"0 0 10px 0",color:"#007bff"},children:" Weekly Summaries"}),e.jsx("p",{style:{margin:"0",fontSize:"14px",color:"#6c757d",lineHeight:"1.5"},children:"Weekly progress summaries with stage completion, delays analysis, and productivity insights."})]}),e.jsxs("div",{style:{padding:"15px",background:"white",borderRadius:"8px",border:"1px solid #e9ecef",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:[e.jsx("h4",{style:{margin:"0 0 10px 0",color:"#6f42c1"},children:" Monthly Reports"}),e.jsx("p",{style:{margin:"0",fontSize:"14px",color:"#6c757d",lineHeight:"1.5"},children:"Comprehensive monthly reports with milestone tracking, cost analysis, and project forecasting."})]})]}),e.jsxs("div",{style:{marginTop:"20px",padding:"15px",background:"#e3f2fd",borderRadius:"8px",border:"1px solid #bbdefb"},children:[e.jsx("h4",{style:{margin:"0 0 10px 0",color:"#1976d2"},children:" Report Features"}),e.jsxs("ul",{style:{margin:"0",paddingLeft:"20px",fontSize:"14px",color:"#424242"},children:[e.jsx("li",{children:"Professional PDF generation with company branding"}),e.jsx("li",{children:"Automatic homeowner notifications and delivery"}),e.jsx("li",{children:"Comprehensive labour and cost analysis"}),e.jsx("li",{children:"GPS-verified photo documentation"}),e.jsx("li",{children:"Quality and safety compliance tracking"}),e.jsx("li",{children:"Progress recommendations and insights"})]})]})]})]}):null,mt&&e.jsx(p6,{contractorId:o?.id,onClose:()=>ve(!1)})]})};return e.jsxs("div",{className:"dashboard-container",children:[e.jsxs("div",{className:"dashboard-sidebar soft-sidebar expanded",children:[e.jsx("div",{className:"sidebar-header sb-brand",children:e.jsxs("a",{href:"#",className:"sidebar-logo",children:[e.jsx("div",{className:"logo-icon",children:""}),e.jsx("span",{className:"logo-text sb-title",children:"BUILDHUB"})]})}),e.jsxs("nav",{className:"sidebar-nav sb-nav",children:[e.jsx("a",{href:"#",className:`nav-item sb-item ${s==="overview"?"active":""}`,onClick:ge=>{ge.preventDefault(),i("overview")},title:"Dashboard",children:e.jsx("span",{className:"nav-label sb-label",children:"Dashboard"})}),e.jsxs("a",{href:"#",className:`nav-item sb-item ${s==="projects"?"active":""}`,onClick:ge=>{ge.preventDefault(),i("projects")},title:"Construction",children:[e.jsx("span",{className:"nav-label sb-label",children:"Construction"}),ia>0&&e.jsx("span",{className:"nav-badge pulse",style:{marginLeft:"auto"},children:ia})]}),e.jsxs("a",{href:"#",className:`nav-item sb-item ${s==="proposals"?"active":""}`,onClick:ge=>{ge.preventDefault(),i("proposals")},title:"My Estimates",children:[e.jsx("span",{className:"nav-label sb-label",children:"My Estimates"}),N.length>0&&e.jsx("span",{className:"nav-badge pulse",style:{marginLeft:"auto"},children:N.length})]}),e.jsxs("a",{href:"#",className:`nav-item sb-item ${s==="inbox"?"active":""}`,onClick:ge=>{ge.preventDefault(),i("inbox")},title:"Inbox",children:[e.jsx("span",{className:"nav-label sb-label",children:"Inbox"}),ca>0&&e.jsx("span",{className:"nav-badge pulse",style:{marginLeft:"auto"},children:ca})]}),e.jsx("a",{href:"#",className:`nav-item sb-item ${s==="progress"?"active":""}`,onClick:ge=>{ge.preventDefault(),i("progress")},title:"Progress Updates",children:e.jsx("span",{className:"nav-label sb-label",children:"Progress Updates"})})]})]}),e.jsxs("div",{className:"dashboard-main blue-glass soft-main shifted",children:[e.jsxs("div",{className:"top-glassbar",children:[e.jsx("div",{className:"left",children:e.jsxs("div",{className:"search",children:[e.jsx("span",{className:"icon",children:""}),e.jsx("input",{type:"text",placeholder:"Search projects, estimates, requests...","aria-label":"Search"})]})}),e.jsxs("div",{className:"right",children:[e.jsx("button",{className:"icon-btn",title:"Help",children:""}),e.jsx(l6,{user:o,position:"bottom-right",onProfileClick:()=>i("profile"),onLogout:gt})]})]}),Y&&e.jsx("div",{className:"alert alert-error",children:Y}),Q&&e.jsx("div",{className:"alert alert-success",children:Q}),s==="overview"&&Qt(),s==="projects"&&cs(),s==="proposals"&&ja(),s==="inbox"&&va(),s==="progress"&&yn(),s==="profile"&&Gs()]}),e.jsx(aw,{isOpen:lt.isOpen,onClose:Nt,onConfirm:lt.onConfirm,title:lt.title,message:lt.message,type:lt.type}),e.jsx(x6,{isOpen:kt,onClose:qt,inboxItem:et,onSubmit:Bt})]})},v6=({est:t,user:a,showConfirmation:s,toast:i})=>{let o=null;try{const S=t?.structured_data||t?.structured;o=S?JSON.parse(S):null}catch{}const l=o||{},d=S=>{const _=parseFloat(S);if(Number.isFinite(_))return`${_.toLocaleString()}`;const N=String(S||"").match(/[-+]?(?:\d+\.?\d*|\d*\.?\d+)/),O=N?parseFloat(N[0]):null;return Number.isFinite(O)?`${O.toLocaleString()}`:""},u=({title:S,rows:_})=>e.jsxs("div",{className:"card",style:{marginTop:8},children:[e.jsx("h4",{style:{margin:"0 0 6px 0"},children:S}),e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{style:{textAlign:"left",borderBottom:"1px solid #eef2f7",padding:"6px 4px"},children:"Item"}),e.jsx("th",{style:{textAlign:"left",borderBottom:"1px solid #eef2f7",padding:"6px 4px"},className:"muted",children:"Qty"}),e.jsx("th",{style:{textAlign:"left",borderBottom:"1px solid #eef2f7",padding:"6px 4px"},className:"muted",children:"Rate"}),e.jsx("th",{style:{textAlign:"left",borderBottom:"1px solid #eef2f7",padding:"6px 4px"},children:"Amount"})]})}),e.jsx("tbody",{children:_.filter(N=>N&&(N.name||N.amount)).map((N,O)=>e.jsxs("tr",{children:[e.jsx("td",{style:{padding:"6px 4px"},children:N.name||""}),e.jsx("td",{style:{padding:"6px 4px"},className:"muted",children:N.qty||""}),e.jsx("td",{style:{padding:"6px 4px"},className:"muted",children:N.rate||""}),e.jsx("td",{style:{padding:"6px 4px"},children:d(N.amount)})]},O))})]})]}),A=(S,_)=>!S||typeof S!="object"?[]:_.map(N=>({name:S?.[N]?.name||"",qty:S?.[N]?.qty||"",rate:S?.[N]?.rate||"",amount:S?.[N]?.amount||""})),p=A(l.materials,["cement","sand","bricks","steel","aggregate","tiles","paint","doors","windows","others"]),m=A(l.labor,["mason","plaster","painting","electrical","plumbing","flooring","roofing","others"]),b=A(l.utilities,["sanitary","kitchen","electrical_fixtures","water_tank","hvac","gas_water","others1","others2","others3"]),v=A(l.misc,["transport","contingency","fees","cleaning","safety","others1","others2","others3"]),x=(S=a)=>{const _=S?.first_name&&S?.last_name?`${S.first_name} ${S.last_name}`:"Contractor Name",N=new Date().toLocaleDateString("en-IN",{year:"numeric",month:"long",day:"numeric"});return`<!doctype html><html><head><meta charset="utf-8"/>
    <title>Professional Cost Estimate Report</title>
    <style>
      @page { 
        margin: 20mm; 
        size: A4;
      }
      body{
        font-family: 'Times New Roman', serif;
        color: #1a1a1a;
        margin: 0;
        padding: 0;
        line-height: 1.4;
        background: white;
      }
      .header {
        text-align: center;
        margin-bottom: 30px;
        border-bottom: 3px solid #2c3e50;
        padding-bottom: 20px;
      }
      .company-logo {
        width: 120px;
        height: 120px;
        margin: 0 auto 15px;
        border: 2px solid #2c3e50;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 48px;
        font-weight: bold;
        color: #2c3e50;
        background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
      }
      .company-name {
        font-size: 28px;
        font-weight: bold;
        color: #2c3e50;
        margin: 10px 0 5px 0;
        text-transform: uppercase;
        letter-spacing: 2px;
      }
      .company-tagline {
        font-size: 14px;
        color: #6c757d;
        font-style: italic;
        margin-bottom: 10px;
      }
      .company-details {
        font-size: 12px;
        color: #495057;
        line-height: 1.3;
      }
      .document-title {
        text-align: center;
        margin: 30px 0;
        font-size: 24px;
        font-weight: bold;
        color: #2c3e50;
        text-transform: uppercase;
        letter-spacing: 1px;
      }
      .estimate-info {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 20px;
        margin-bottom: 30px;
        padding: 15px;
        background: #f8f9fa;
        border-left: 4px solid #2c3e50;
      }
      .info-section h3 {
        margin: 0 0 10px 0;
        font-size: 16px;
        color: #2c3e50;
        border-bottom: 1px solid #dee2e6;
        padding-bottom: 5px;
      }
      .info-section p {
        margin: 5px 0;
        font-size: 14px;
      }
      .cost-breakdown {
        margin: 30px 0;
      }
      .cost-breakdown h2 {
        font-size: 20px;
        color: #2c3e50;
        border-bottom: 2px solid #2c3e50;
        padding-bottom: 10px;
        margin-bottom: 20px;
      }
      .cost-table {
        width: 100%;
        border-collapse: collapse;
        margin-bottom: 20px;
        box-shadow: 0 2px 4px rgba(0,0,0,0.1);
      }
      .cost-table th {
        background: #2c3e50;
        color: white;
        padding: 12px;
        text-align: left;
        font-weight: bold;
        font-size: 14px;
      }
      .cost-table td {
        padding: 10px 12px;
        border-bottom: 1px solid #dee2e6;
        font-size: 14px;
      }
      .cost-table tr:nth-child(even) {
        background: #f8f9fa;
      }
      .cost-table tr:hover {
        background: #e9ecef;
      }
      .total-section {
        margin: 30px 0;
        padding: 20px;
        background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
        color: white;
        border-radius: 8px;
      }
      .total-section h2 {
        margin: 0 0 15px 0;
        font-size: 18px;
        text-align: center;
      }
      .total-row {
        display: flex;
        justify-content: space-between;
        margin: 8px 0;
        font-size: 16px;
      }
      .grand-total {
        border-top: 2px solid white;
        padding-top: 10px;
        margin-top: 15px;
        font-size: 18px;
        font-weight: bold;
      }
      .terms-section {
        margin: 30px 0;
        padding: 20px;
        background: #f8f9fa;
        border-left: 4px solid #28a745;
      }
      .terms-section h3 {
        margin: 0 0 15px 0;
        color: #28a745;
        font-size: 16px;
      }
      .terms-section p {
        margin: 8px 0;
        font-size: 14px;
        line-height: 1.5;
      }
      .signature-section {
        margin-top: 50px;
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 40px;
      }
      .signature-box {
        text-align: center;
        padding: 20px;
        border: 2px solid #2c3e50;
        border-radius: 8px;
        background: #f8f9fa;
      }
      .signature-line {
        border-bottom: 2px solid #2c3e50;
        margin: 40px 0 10px 0;
        height: 2px;
      }
      .signature-label {
        font-size: 14px;
        font-weight: bold;
        color: #2c3e50;
        margin-top: 10px;
      }
      .contractor-seal {
        width: 100px;
        height: 100px;
        border: 3px solid #dc3545;
        border-radius: 50%;
        margin: 0 auto 15px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 12px;
        font-weight: bold;
        color: #dc3545;
        background: white;
        text-align: center;
        line-height: 1.2;
      }
      .footer {
        margin-top: 40px;
        text-align: center;
        font-size: 12px;
        color: #6c757d;
        border-top: 1px solid #dee2e6;
        padding-top: 15px;
      }
      @media print {
        body { margin: 0; }
        .header { page-break-inside: avoid; }
        .signature-section { page-break-inside: avoid; }
      }
    </style>
    </head><body>
    <!-- Company Header -->
    <div class="header">
      <div class="company-logo"></div>
      <div class="company-name">${_} Construction</div>
      <div class="company-tagline">Professional Construction Services</div>
      <div class="company-details">
         Email: ${a?.email||"contact@company.com"} | 
         Phone: ${a?.phone||"+91-XXXXX-XXXXX"} | 
         License: ${a?.license_number||"LIC-XXXXX"}
      </div>
    </div>

    <!-- Document Title -->
    <div class="document-title">Cost Estimate Report</div>

    <!-- Estimate Information -->
    <div class="estimate-info">
      <div class="info-section">
        <h3>Project Details</h3>
        <p><strong>Project Name:</strong> ${l?.project_name||"Construction Project"}</p>
        <p><strong>Location:</strong> ${l?.project_address||"Project Location"}</p>
        <p><strong>Client:</strong> ${t.client_name||"Client Name"}</p>
        <p><strong>Plot Size:</strong> ${l?.plot_size||""}</p>
        <p><strong>Built-up Area:</strong> ${l?.built_up_area||""}</p>
        <p><strong>Floors:</strong> ${l?.floors||""}</p>
      </div>
      <div class="info-section">
        <h3>Estimate Information</h3>
        <p><strong>Estimate Date:</strong> ${N}</p>
        <p><strong>Estimate Valid Until:</strong> ${new Date(Date.now()+720*60*60*1e3).toLocaleDateString("en-IN")}</p>
        <p><strong>Project Duration:</strong> ${t.timeline||"90 days"}</p>
        <p><strong>Estimate #:</strong> EST-${t.id}</p>
      </div>
    </div>

    <!-- Cost Breakdown -->
    <div class="cost-breakdown">
      <h2>Detailed Cost Breakdown</h2>
      <table class="cost-table">
        <thead>
          <tr>
            <th>Item Description</th>
            <th>Quantity</th>
            <th>Unit Rate ()</th>
            <th>Amount ()</th>
          </tr>
        </thead>
        <tbody>
          ${p.filter(O=>O&&(O.name||O.amount)).map(O=>`
      <tr>
        <td>${(O.name||"").toString().replace(/</g,"&lt;")}</td>
              <td>${(O.qty||"").toString().replace(/</g,"&lt;")}</td>
              <td>${(O.rate||"").toString().replace(/</g,"&lt;")}</td>
        <td>${d(O.amount)}</td>
      </tr>
          `).join("")}
          ${m.filter(O=>O&&(O.name||O.amount)).map(O=>`
            <tr>
              <td>${(O.name||"").toString().replace(/</g,"&lt;")}</td>
              <td>${(O.qty||"").toString().replace(/</g,"&lt;")}</td>
              <td>${(O.rate||"").toString().replace(/</g,"&lt;")}</td>
              <td>${d(O.amount)}</td>
            </tr>
          `).join("")}
          ${b.filter(O=>O&&(O.name||O.amount)).map(O=>`
            <tr>
              <td>${(O.name||"").toString().replace(/</g,"&lt;")}</td>
              <td>${(O.qty||"").toString().replace(/</g,"&lt;")}</td>
              <td>${(O.rate||"").toString().replace(/</g,"&lt;")}</td>
              <td>${d(O.amount)}</td>
            </tr>
          `).join("")}
          ${v.filter(O=>O&&(O.name||O.amount)).map(O=>`
            <tr>
              <td>${(O.name||"").toString().replace(/</g,"&lt;")}</td>
              <td>${(O.qty||"").toString().replace(/</g,"&lt;")}</td>
              <td>${(O.rate||"").toString().replace(/</g,"&lt;")}</td>
              <td>${d(O.amount)}</td>
            </tr>
          `).join("")}
        </tbody>
      </table>
      </div>

    <!-- Total Section -->
    <div class="total-section">
      <h2>Cost Summary</h2>
      <div class="total-row">
        <span>Materials Cost:</span>
        <span>${d(l?.totals?.materials||0)}</span>
    </div>
      <div class="total-row">
        <span>Labor Cost:</span>
        <span>${d(l?.totals?.labor||0)}</span>
    </div>
      <div class="total-row">
        <span>Utilities:</span>
        <span>${d(l?.totals?.utilities||0)}</span>
    </div>
      <div class="total-row">
        <span>Miscellaneous:</span>
        <span>${d(l?.totals?.misc||0)}</span>
    </div>
      <div class="total-row">
        <span>Transportation:</span>
        <span>${d(l?.totals?.transport||0)}</span>
    </div>
      <div class="total-row">
        <span>Contingency (5%):</span>
        <span>${d(l?.totals?.contingency||0)}</span>
    </div>
      <div class="total-row grand-total">
        <span>GRAND TOTAL:</span>
        <span>${d(l?.totals?.grand||t.total_cost)}</span>
      </div>
    </div>

    <!-- Terms and Conditions -->
    <div class="terms-section">
      <h3>Terms & Conditions</h3>
      <p><strong>Payment Terms:</strong> 30% advance, 40% on completion of foundation, 30% on completion</p>
      <p><strong>Validity:</strong> This estimate is valid for 30 days from the date of issue</p>
      <p><strong>Materials:</strong> All materials will be of standard quality as per specifications</p>
      <p><strong>Timeline:</strong> Project completion within ${t.timeline||"90"} days from commencement</p>
      <p><strong>Warranty:</strong> 1 year warranty on workmanship, 5 years on structural elements</p>
      <p><strong>Notes:</strong> ${t.notes?t.notes.replace(/\n/g,"<br/>"):"All work to be done as per approved drawings and specifications"}</p>
    </div>

    <!-- Signature Section -->
    <div class="signature-section">
      <div class="signature-box">
        <div class="signature-line"></div>
        <div class="signature-label">Client Signature</div>
        <p style="margin-top: 10px; font-size: 12px; color: #6c757d;">Date: _______________</p>
      </div>
      <div class="signature-box">
        <div class="contractor-seal">
          <div>OFFICIAL<br/>SEAL</div>
        </div>
        <div class="signature-line"></div>
        <div class="signature-label">${_}</div>
        <p style="margin-top: 5px; font-size: 12px; color: #6c757d;">Authorized Contractor</p>
        <p style="margin-top: 5px; font-size: 12px; color: #6c757d;">Date: ${N}</p>
      </div>
    </div>

    <!-- Footer -->
    <div class="footer">
      <p>This is a computer-generated estimate. For any clarifications, please contact us.</p>
      <p> ${new Date().getFullYear()} ${_} Construction. All rights reserved.</p>
    </div>
    </body></html>`},C=t.homeowner_message&&t.homeowner_message.trim(),D=t.status==="accepted";return C&&console.log("Estimate has homeowner message:",t.id,t.homeowner_message),e.jsxs("div",{className:"list-item",style:{borderLeft:C?"4px solid #10b981":void 0,background:C?"linear-gradient(to right, #ffffff 0%, #f0fdf4 5%)":void 0},children:[e.jsx("div",{className:"item-image",children:C?"":""}),e.jsxs("div",{className:"item-content",style:{flex:1},children:[e.jsxs("h4",{className:"item-title",style:{margin:0},children:[C&&D?" Accepted ":"","Estimate #",t.id]}),e.jsxs("p",{className:"item-subtitle",style:{margin:"2px 0 0 0"},children:["Total: ",d(t.total_cost??l?.totals?.grand),"  ",new Date(t.created_at).toLocaleString()]}),t.timeline&&e.jsxs("p",{className:"item-meta",children:["Timeline: ",t.timeline]}),C&&e.jsxs("div",{style:{marginTop:"12px",padding:"12px",background:"linear-gradient(135deg, #ecfdf5 0%, #d1fae5 100%)",borderRadius:"8px",border:"1px solid #10b981"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:"8px"},children:[e.jsx("span",{style:{fontSize:"18px",marginRight:"8px"},children:""}),e.jsx("strong",{style:{color:"#065f46",fontSize:"14px"},children:"Message from Homeowner:"})]}),e.jsx("div",{style:{color:"#047857",fontSize:"13px",lineHeight:"1.6",whiteSpace:"pre-wrap",paddingLeft:"26px"},children:t.homeowner_message})]}),e.jsxs("details",{style:{marginTop:6},children:[e.jsx("summary",{style:{cursor:"pointer"},children:"View breakdown"}),e.jsx("div",{className:"card",style:{marginTop:8},children:e.jsxs("div",{className:"grid",style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8},children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Project:"})," ",l?.project_name||""]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Address:"})," ",l?.project_address||""]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Plot Size:"})," ",l?.plot_size||""]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Built-up Area:"})," ",l?.built_up_area||""]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Floors:"})," ",l?.floors||""]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Date:"})," ",l?.estimation_date||""]})]})}),p.length>0&&e.jsx(u,{title:"Materials",rows:p}),m.length>0&&e.jsx(u,{title:"Labor",rows:m}),b.length>0&&e.jsx(u,{title:"Utilities & Fixtures",rows:b}),v.length>0&&e.jsx(u,{title:"Miscellaneous",rows:v}),e.jsxs("div",{className:"card",style:{marginTop:8},children:[e.jsxs("div",{className:"row",style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("div",{className:"muted",children:"Materials Total"}),e.jsx("div",{children:e.jsx("strong",{children:d(l?.totals?.materials)})})]}),e.jsxs("div",{className:"row",style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("div",{className:"muted",children:"Labor Total"}),e.jsx("div",{children:e.jsx("strong",{children:d(l?.totals?.labor)})})]}),e.jsxs("div",{className:"row",style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("div",{className:"muted",children:"Utilities Total"}),e.jsx("div",{children:e.jsx("strong",{children:d(l?.totals?.utilities)})})]}),e.jsxs("div",{className:"row",style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("div",{className:"muted",children:"Misc Total"}),e.jsx("div",{children:e.jsx("strong",{children:d(l?.totals?.misc)})})]}),e.jsxs("div",{className:"row",style:{display:"flex",justifyContent:"space-between",marginTop:6},children:[e.jsx("div",{className:"muted",children:"Grand Total"}),e.jsx("div",{className:"total",children:e.jsx("strong",{children:d(l?.totals?.grand||t.total_cost)})})]})]}),t.notes&&e.jsxs("div",{className:"card",style:{marginTop:8},children:[e.jsx("h4",{style:{margin:"0 0 6px 0"},children:"Notes"}),e.jsx("div",{style:{whiteSpace:"pre-wrap"},children:t.notes})]})]})]}),e.jsxs("div",{className:"item-actions",style:{display:"flex",gap:6},children:[e.jsx("button",{className:"btn btn-primary",onClick:async()=>{try{const S=x(a),_=a?.first_name&&a?.last_name?`${a.first_name} ${a.last_name}`:"Contractor",N=document.createElement("div");N.style.position="absolute",N.style.left="-9999px",N.style.top="-9999px",N.style.width="210mm",N.style.padding="20mm",N.style.backgroundColor="white",N.style.fontFamily="Times New Roman, serif",N.style.fontSize="12px",N.style.lineHeight="1.4",N.style.color="#1a1a1a",N.innerHTML=S,document.body.appendChild(N),console.log("Converting HTML to canvas...");const O=await Gc(N,{scale:2,useCORS:!0,allowTaint:!0,backgroundColor:"#ffffff"});console.log("Canvas created:",O.width,"x",O.height),document.body.removeChild(N),console.log("Creating PDF...");const L=new ua("p","mm","a4"),te=O.toDataURL("image/png"),G=210,X=295,U=O.height*G/O.width;let E=U;console.log("Image dimensions:",G,"x",U);let Y=0;for(L.addImage(te,"PNG",0,Y,G,U),E-=X;E>=0;)Y=E-U,L.addPage(),L.addImage(te,"PNG",0,Y,G,U),E-=X;const T=`Estimate_${_.replace(/\s+/g,"_")}_${Date.now().toString().slice(-6)}.pdf`;console.log("Saving PDF as:",T);try{const Q=L.output("blob"),q=URL.createObjectURL(Q),ne=document.createElement("a");ne.href=q,ne.download=T,ne.style.display="none",document.body.appendChild(ne),ne.click(),document.body.removeChild(ne),URL.revokeObjectURL(q),console.log("PDF downloaded via blob method")}catch(Q){console.log("Blob method failed, trying direct save:",Q),L.save(T)}console.log("PDF save method called")}catch(S){console.error("Download failed:",S)}},children:"Download PDF Report"}),e.jsx("button",{className:"btn btn-secondary",onClick:async()=>{s("Remove Estimate","Are you sure you want to remove this estimate? This action cannot be undone.",async()=>{try{const S=JSON.parse(sessionStorage.getItem("user")||"{}"),N=await(await fetch("/buildhub/backend/api/contractor/delete_estimate.php",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({estimate_id:t.id,contractor_id:S.id})})).json().catch(()=>({}));N.success?(i.success("Estimate removed successfully!"),window.dispatchEvent(new CustomEvent("refreshEstimates"))):i.error(N.message||"Failed to remove estimate. Please try again.")}catch(S){i.error("Error removing estimate. Please try again."),console.error(S)}})},style:{background:"#ef4444",color:"white",border:"1px solid #ef4444",fontSize:"12px",padding:"6px 12px"},children:" Remove"})]})]})},b6=({user:t,onProfileClick:a,onLogout:s,className:i="",showRole:o=!0,size:l="medium",position:d="bottom-right"})=>{const[u,A]=w.useState(!1),p=w.useRef(null);w.useEffect(()=>{const S=_=>{p.current&&!p.current.contains(_.target)&&A(!1)};return u&&document.addEventListener("mousedown",S),()=>{document.removeEventListener("mousedown",S)}},[u]);const m=()=>{A(!u)},b=()=>{A(!1)},v=()=>{A(!1),a&&a()},x=()=>{A(!1),s&&s()},C=()=>{if(t?.first_name&&t?.last_name)return`${t.first_name.charAt(0)}${t.last_name.charAt(0)}`.toUpperCase();if(t?.name){const S=t.name.split(" ");return`${S[0]?.[0]||""}${S[1]?.[0]||""}`.toUpperCase()}return t?.email?t.email.charAt(0).toUpperCase():"U"},D=()=>{if(!o)return null;const S=t?.role||"User";return S.charAt(0).toUpperCase()+S.slice(1)};return e.jsxs("div",{ref:p,className:`profile-button-container ${i}`,children:[e.jsxs("button",{className:`profile-button ${l}`,onClick:m,"aria-haspopup":"menu","aria-expanded":u,children:[e.jsx("div",{className:"profile-avatar",children:t?.avatar_url?e.jsx("img",{src:t.avatar_url,alt:"Profile",style:{width:"100%",height:"100%",borderRadius:"50%",objectFit:"cover"}}):C()}),e.jsx("div",{className:"profile-info",children:o&&e.jsx("div",{className:"profile-role",children:D()})}),e.jsx("div",{className:`profile-arrow ${u?"open":""}`,children:""})]}),e.jsx(j6,{isOpen:u,onClose:b,user:t,position:d,onProfileSetup:v,onLogout:x})]})},j6=({isOpen:t,onClose:a,user:s,position:i,onProfileSetup:o,onLogout:l})=>{const d=w.useRef(null);return w.useEffect(()=>{const u=A=>{d.current&&!d.current.contains(A.target)&&a()};return t&&document.addEventListener("mousedown",u),()=>{document.removeEventListener("mousedown",u)}},[t,a]),t?e.jsx("div",{ref:d,className:`profile-popup ${i}`,children:e.jsxs("div",{className:"profile-popup-content",children:[e.jsxs("div",{className:"profile-popup-header",children:[e.jsx("div",{className:"profile-popup-avatar",children:s?.avatar_url?e.jsx("img",{src:s.avatar_url,alt:"Profile",style:{width:"100%",height:"100%",borderRadius:"50%",objectFit:"cover"}}):s?.first_name?.charAt(0)+s?.last_name?.charAt(0)}),e.jsxs("div",{className:"profile-popup-info",children:[e.jsxs("div",{className:"profile-popup-name",children:[s?.first_name," ",s?.last_name]}),e.jsx("div",{className:"profile-popup-role",children:s?.role?.charAt(0).toUpperCase()+s?.role?.slice(1)})]})]}),e.jsx("div",{className:"profile-popup-divider"}),e.jsxs("div",{className:"profile-popup-menu",children:[e.jsxs("button",{className:"profile-popup-item",onClick:o,children:[e.jsx("span",{className:"profile-popup-icon",children:""}),e.jsx("span",{children:"Profile Setup"})]}),e.jsxs("button",{className:"profile-popup-item logout",onClick:l,children:[e.jsx("span",{className:"profile-popup-icon",children:""}),e.jsx("span",{children:"Logout"})]})]})]})}):null},w6=({user:t,profile:a,setProfile:s,onSave:i,onReset:o,loading:l,saving:d,reviews:u=[],reviewCount:A=0,avgRating:p=0,onUserUpdate:m})=>{const[b,v]=w.useState(!1),[x,C]=w.useState(null),[D,S]=w.useState(null),_=w.useRef(null),N=async U=>{const E=U.target.files[0];if(E){C(E);const Y=new FileReader;Y.onload=T=>{S(T.target.result)},Y.readAsDataURL(E);try{const T=new FormData;T.append("avatar",E),T.append("user_id",t?.id||"");const q=await(await fetch("/buildhub/backend/api/upload_avatar.php",{method:"POST",body:T,credentials:"include"})).json();if(q.success){const ne={...t,avatar_url:q.avatar_url};localStorage.setItem("bh_user",JSON.stringify(ne)),typeof m=="function"&&m(ne),S(null),console.log("Avatar uploaded successfully:",q.avatar_url)}else console.error("Avatar upload failed:",q.message),S(null)}catch(T){console.error("Error uploading avatar:",T),S(null)}}},O=()=>{v(!0)},L=()=>{v(!1),o()},te=U=>{U.preventDefault(),i(U),v(!1)},G=()=>t?.first_name&&t?.last_name?`${t.first_name.charAt(0)}${t.last_name.charAt(0)}`.toUpperCase():"A",X=U=>[1,2,3,4,5].map(E=>e.jsx("span",{className:`star ${U>=E?"filled":""}`,children:""},E));return e.jsxs("div",{className:"stylish-profile",children:[e.jsxs("div",{className:"profile-header",children:[e.jsx("div",{className:"profile-cover",children:e.jsx("div",{className:"cover-gradient"})}),e.jsxs("div",{className:"profile-info-section",children:[e.jsxs("div",{className:"profile-avatar-container",children:[e.jsxs("div",{className:"profile-avatar-large",children:[D?e.jsx("img",{src:D,alt:"Profile",className:"avatar-image"}):t?.avatar_url?e.jsx("img",{src:t.avatar_url,alt:"Profile",className:"avatar-image"}):e.jsx("div",{className:"avatar-initials",children:G()}),b&&e.jsx("button",{className:"avatar-upload-btn",onClick:()=>_.current?.click(),children:""})]}),e.jsx("input",{ref:_,type:"file",accept:"image/*",onChange:N,style:{display:"none"}})]}),e.jsxs("div",{className:"profile-details",children:[e.jsxs("h1",{className:"profile-name",children:[t?.first_name," ",t?.last_name]}),e.jsx("p",{className:"profile-title",children:"Architect"}),e.jsxs("div",{className:"profile-stats",children:[e.jsxs("div",{className:"stat-item",children:[e.jsx("span",{className:"stat-value",children:p.toFixed(1)}),e.jsx("span",{className:"stat-label",children:"Rating"}),e.jsx("div",{className:"stars",children:X(p)})]}),e.jsxs("div",{className:"stat-item",children:[e.jsx("span",{className:"stat-value",children:A}),e.jsx("span",{className:"stat-label",children:"Reviews"})]}),e.jsxs("div",{className:"stat-item",children:[e.jsx("span",{className:"stat-value",children:a.experience_years||0}),e.jsx("span",{className:"stat-label",children:"Years Experience"})]})]})]})]})]}),e.jsxs("div",{className:"profile-content",children:[e.jsx("div",{className:"profile-actions",children:b?e.jsxs("div",{className:"edit-actions",children:[e.jsx("button",{className:"cancel-btn",onClick:L,children:"Cancel"}),e.jsx("button",{className:"save-btn",onClick:te,disabled:d,children:d?"Saving...":"Save Changes"})]}):e.jsx("button",{className:"edit-btn",onClick:O,children:" Edit Profile"})}),e.jsxs("div",{className:"profile-sections",children:[e.jsxs("div",{className:"profile-section",children:[e.jsx("h3",{className:"section-title",children:"Basic Information"}),e.jsxs("div",{className:"info-grid",children:[e.jsxs("div",{className:"info-item",children:[e.jsx("label",{children:"Email"}),b?e.jsx("input",{type:"email",value:a.email,disabled:!0,className:"info-input disabled"}):e.jsx("span",{className:"info-value",children:a.email})]}),e.jsxs("div",{className:"info-item",children:[e.jsx("label",{children:"Phone"}),b?e.jsx("input",{type:"text",value:a.phone,onChange:U=>s({...a,phone:U.target.value}),className:"info-input",placeholder:"Enter phone number"}):e.jsx("span",{className:"info-value",children:a.phone||"Not provided"})]}),e.jsxs("div",{className:"info-item",children:[e.jsx("label",{children:"City"}),b?e.jsx("input",{type:"text",value:a.city,onChange:U=>s({...a,city:U.target.value}),className:"info-input",placeholder:"Enter city"}):e.jsx("span",{className:"info-value",children:a.city||"Not provided"})]})]})]}),e.jsxs("div",{className:"profile-section",children:[e.jsx("h3",{className:"section-title",children:"Professional Information"}),e.jsxs("div",{className:"info-grid",children:[e.jsxs("div",{className:"info-item full-width",children:[e.jsx("label",{children:"Specialization"}),b?e.jsxs("div",{className:"specialization-input-container",children:[e.jsx("input",{type:"text",value:a.specialization,onChange:U=>s({...a,specialization:U.target.value}),className:"info-input",placeholder:"e.g., Residential Architect, Commercial Architect",list:"specialization-options"}),e.jsxs("datalist",{id:"specialization-options",children:[e.jsx("option",{value:"Residential Architect"}),e.jsx("option",{value:"Commercial Architect"}),e.jsx("option",{value:"Interior Designer"}),e.jsx("option",{value:"Landscape Architect"}),e.jsx("option",{value:"Urban Planner"}),e.jsx("option",{value:"Industrial Architect"}),e.jsx("option",{value:"Healthcare Architect"}),e.jsx("option",{value:"Educational Architect"}),e.jsx("option",{value:"Restoration/Conservation Architect"}),e.jsx("option",{value:"Sustainable/Green Architect"}),e.jsx("option",{value:"Hospitality Architect"}),e.jsx("option",{value:"Transport Architect"})]})]}):e.jsx("span",{className:"info-value",children:a.specialization||"Not specified"})]}),e.jsxs("div",{className:"info-item",children:[e.jsx("label",{children:"Experience (Years)"}),b?e.jsx("input",{type:"number",min:"0",value:a.experience_years,onChange:U=>s({...a,experience_years:U.target.value}),className:"info-input",placeholder:"0"}):e.jsxs("span",{className:"info-value",children:[a.experience_years||0," years"]})]})]})]}),u.length>0&&e.jsxs("div",{className:"profile-section",children:[e.jsx("h3",{className:"section-title",children:"Recent Reviews"}),e.jsx("div",{className:"reviews-list",children:u.slice(0,3).map((U,E)=>e.jsxs("div",{className:"review-card",children:[e.jsxs("div",{className:"review-header",children:[e.jsxs("div",{className:"reviewer-info",children:[e.jsx("span",{className:"reviewer-name",children:U.author||"Anonymous"}),e.jsx("div",{className:"review-stars",children:X(U.rating)})]}),e.jsx("span",{className:"review-date",children:new Date(U.created_at).toLocaleDateString()})]}),U.comment&&e.jsx("p",{className:"review-comment",children:U.comment})]},E))})]})]})]})]})},lw=({data:t,setData:a,onNext:s,onPrev:i})=>{const[o,l]=w.useState("floor_plans"),[d,u]=w.useState(""),[A,p]=w.useState(!0),[m,b]=w.useState({floor_plan_layout:t.technical_details?.floor_plan_layout||"",room_dimensions:t.technical_details?.room_dimensions||{living_room:"",master_bedroom:"",kitchen:"",other_rooms:""},door_window_positions:t.technical_details?.door_window_positions||"",circulation_paths:t.technical_details?.circulation_paths||"",structural_elements:t.technical_details?.structural_elements||"",elevations_sections:t.technical_details?.elevations_sections||"",construction_notes:t.technical_details?.construction_notes||"",foundation_type:t.technical_details?.foundation_type||"",structural_materials:t.technical_details?.structural_materials||"",load_bearing_elements:t.technical_details?.load_bearing_elements||"",facade_treatment:t.technical_details?.facade_treatment||"",section_details:t.technical_details?.section_details||"",building_height:t.technical_details?.building_height||"",material_specifications:t.technical_details?.material_specifications||"",construction_methods:t.technical_details?.construction_methods||"",special_requirements:t.technical_details?.special_requirements||"",electrical_system:t.technical_details?.electrical_system||"",plumbing_system:t.technical_details?.plumbing_system||"",hvac_system:t.technical_details?.hvac_system||"",fire_safety:t.technical_details?.fire_safety||"",accessibility_features:t.technical_details?.accessibility_features||"",energy_efficiency:t.technical_details?.energy_efficiency||"",estimated_cost:t.technical_details?.estimated_cost||"",cost_breakdown:t.technical_details?.cost_breakdown||"",material_costs:t.technical_details?.material_costs||"",labor_costs:t.technical_details?.labor_costs||"",view_price:t.technical_details?.view_price||t.view_price||0}),v=w.useMemo(()=>[{id:"residential_concrete",name:"Residential  Concrete baseline",data:{structural_elements:"RCC framed structure with concrete columns, beams, and slabs. Standard residential construction with M20 grade concrete.",foundation_type:"RCC Foundation with strip footing",structural_materials:"M20 grade concrete, Fe415 steel reinforcement",electrical_system:"Standard residential electrical layout with MCB distribution board",plumbing_system:"CPVC pipes for water supply, PVC for drainage",hvac_system:"Natural ventilation with ceiling fans",estimated_cost:"15,00,000 - 20,00,000"}},{id:"steel_office",name:"Office  Steel frame + curtain wall",data:{structural_elements:"Steel frame structure with composite steel-concrete floors. Modern office building design.",foundation_type:"Raft foundation with pile foundation",structural_materials:"Structural steel grade Fe500, M25 grade concrete",electrical_system:"Commercial electrical system with UPS backup",plumbing_system:"GI pipes for water supply, cast iron for drainage",hvac_system:"Centralized AC system with VRF technology",estimated_cost:"25,00,000 - 35,00,000"}},{id:"timber_school",name:"School  Timber CLT",data:{structural_elements:"Cross-laminated timber (CLT) structure with steel connections",foundation_type:"Strip foundation with timber posts",structural_materials:"CLT panels, structural timber, steel connections",electrical_system:"Educational facility electrical with safety features",plumbing_system:"PEX pipes for water supply, PVC for drainage",hvac_system:"Natural ventilation with mechanical assistance",estimated_cost:"18,00,000 - 25,00,000"}},{id:"residential_contemporary",name:"Residential  Contemporary",data:{structural_elements:"Modern RCC structure with cantilevered elements and glass facades",foundation_type:"RCC foundation with basement",structural_materials:"M25 grade concrete, Fe500 steel, glass curtain wall",electrical_system:"Smart home electrical system with automation",plumbing_system:"PEX pipes with smart water management",hvac_system:"VRF air conditioning with heat recovery",estimated_cost:"30,00,000 - 45,00,000"}},{id:"residential_traditional",name:"Residential  Traditional",data:{structural_elements:"Traditional masonry construction with RCC roof",foundation_type:"Strip foundation with masonry walls",structural_materials:"Brick masonry, M15 grade concrete, traditional roofing",electrical_system:"Standard residential electrical with traditional aesthetics",plumbing_system:"Traditional plumbing with modern fixtures",hvac_system:"Natural ventilation with traditional cooling methods",estimated_cost:"12,00,000 - 18,00,000"}},{id:"residential_minimalist",name:"Residential  Modern Minimal",data:{structural_elements:"Minimalist RCC structure with clean lines and open spaces",foundation_type:"RCC foundation with floating slab",structural_materials:"M20 grade concrete, minimal steel, clean finishes",electrical_system:"Hidden electrical system with minimal visible elements",plumbing_system:"Concealed plumbing with minimalist fixtures",hvac_system:"Underfloor heating with minimal visible systems",estimated_cost:"20,00,000 - 30,00,000"}},{id:"commercial_retail",name:"Commercial  Retail shell",data:{structural_elements:"Steel frame with large open spaces for retail flexibility",foundation_type:"Raft foundation for heavy loads",structural_materials:"Structural steel, composite floors, curtain wall system",electrical_system:"High-capacity commercial electrical with backup",plumbing_system:"Commercial plumbing with multiple connections",hvac_system:"Centralized HVAC with zone control",estimated_cost:"40,00,000 - 60,00,000"}},{id:"commercial_mixeduse",name:"Commercial  Mixed-use podium + tower",data:{structural_elements:"Mixed-use structure with podium and tower elements",foundation_type:"Deep foundation with basement levels",structural_materials:"High-strength concrete M30+, structural steel",electrical_system:"Multi-zone electrical system for different uses",plumbing_system:"Complex plumbing system for multiple functions",hvac_system:"Zoned HVAC system for different building uses",estimated_cost:"50,00,000 - 80,00,000"}},{id:"residential_villa",name:"Residential  Luxury Villa",data:{structural_elements:"Luxury RCC structure with premium finishes and features",foundation_type:"RCC foundation with basement and parking",structural_materials:"High-grade concrete M25+, premium steel, luxury finishes",electrical_system:"Premium electrical system with smart home features",plumbing_system:"Premium plumbing with luxury fixtures",hvac_system:"Premium HVAC with smart climate control",estimated_cost:"60,00,000 - 1,00,00,000"}},{id:"residential_apartment_midrise",name:"Residential  Mid-rise Apartments",data:{structural_elements:"Mid-rise RCC structure optimized for apartment living",foundation_type:"RCC foundation with basement parking",structural_materials:"M25 grade concrete, Fe500 steel, apartment finishes",electrical_system:"Apartment electrical system with individual meters",plumbing_system:"Apartment plumbing with individual connections",hvac_system:"Individual AC units with common ventilation",estimated_cost:"35,00,000 - 50,00,000"}}],[]),x=w.useMemo(()=>({floor_plan_layout:["Simple rectangular layout with clear circulation","U-shaped layout with central courtyard","L-shaped layout with optimal space utilization","Open plan layout with flexible spaces","Traditional layout with separate formal and informal areas","Modern minimalist layout with clean lines","Duplex layout with ground floor and upper floor"],room_dimensions:[{label:"Standard 2BHK",living_room:"2015 ft",master_bedroom:"1412 ft",kitchen:"108 ft",other_rooms:`Bedroom 2: 1210 ft
Bathroom: 86 ft`},{label:"Compact 2BHK",living_room:"1814 ft",master_bedroom:"1211 ft",kitchen:"97 ft",other_rooms:`Bedroom 2: 1110 ft
Bathroom: 76 ft`},{label:"Luxury 3BHK",living_room:"2418 ft",master_bedroom:"1614 ft",kitchen:"1210 ft",other_rooms:`Bedroom 2: 1412 ft
Bedroom 3: 1211 ft
Bathroom 1: 108 ft
Bathroom 2: 96 ft`},{label:"Standard 3BHK",living_room:"2216 ft",master_bedroom:"1413 ft",kitchen:"119 ft",other_rooms:`Bedroom 2: 1311 ft
Bedroom 3: 1210 ft
Bathroom 1: 96 ft
Bathroom 2: 86 ft`},{label:"Spacious 4BHK",living_room:"2620 ft",master_bedroom:"1815 ft",kitchen:"1411 ft",other_rooms:`Bedroom 2: 1513 ft
Bedroom 3: 1412 ft
Bedroom 4: 1211 ft
Bathroom 1: 108 ft
Bathroom 2: 96 ft`}],living_room_options:["2015 ft","1814 ft","2418 ft","2216 ft","2620 ft","1612 ft","2822 ft"],master_bedroom_options:["1412 ft","1211 ft","1614 ft","1413 ft","1815 ft","1513 ft","2016 ft"],kitchen_options:["108 ft","97 ft","1210 ft","119 ft","1411 ft","109 ft","1512 ft"],door_window_positions:["North-facing main entrance with east-west rooms for optimal sunlight","Southern exposure for main living spaces, northern entrance","Cross-ventilation with opposing windows in all rooms","Windows positioned for privacy while maximizing natural light","Strategic door placement for optimal flow and privacy","Open floor plan with minimal partitions, large windows","Traditional layout with separate entrance for formal and informal areas"],circulation_paths:["Central hallway with easy access to all rooms","Minimal circulation with direct access to spaces","Defined pathways separating public and private zones","Open circulation allowing flexible use of space","Traditional layout with clear public-private zoning","Minimal corridors maximizing usable area"],structural_elements:["RCC framed structure with concrete columns, beams, and slabs","Steel frame structure with composite steel-concrete floors","Load-bearing masonry with RCC roof","Hybrid structure combining steel and concrete"],foundation_type:["RCC strip footing foundation","Raft foundation with pile system","Pile foundation for high loads","RCC foundation with basement","Isolated footing foundation"],structural_materials:["M20 grade concrete, Fe415 steel reinforcement","M25 grade concrete, Fe500 steel","Structural steel grade Fe500","M15 grade concrete for foundation","High-strength concrete M30+"],electrical_system:["Standard residential electrical layout with MCB distribution board","Commercial electrical system with UPS backup","Smart home electrical system with automation","High-capacity commercial electrical with backup","Premium electrical system with smart home features"],plumbing_system:["CPVC pipes for water supply, PVC for drainage","GI pipes for water supply, cast iron for drainage","PEX pipes for water supply, PVC for drainage","Concealed plumbing with minimalist fixtures"],hvac_system:["Natural ventilation with ceiling fans","Centralized AC system with VRF technology","VRF air conditioning with heat recovery","Individual AC units with common ventilation","Natural ventilation with mechanical assistance"],facade_treatment:["Standard cement plaster finish with paint","Premium facade with glass curtain wall","Traditional brick facade with stone accents","Modern minimalist facade with clean lines","Textured plaster with designer finishes"],fire_safety:["Standard fire safety with fire extinguishers and exit signs","Fire sprinkler system with smoke detectors","Advanced fire safety system with sprinklers and alarms","Complete fire safety with automatic sprinkler system","Standard fire safety compliance with smoke detectors"],accessibility_features:["Ramps and accessible parking","Wheelchair accessible with elevators","Complete accessibility features with ramps and rails","Universal design with accessible facilities","Basic accessibility with ramps"],energy_efficiency:["Standard insulation with energy-efficient windows","Solar panels with energy-efficient design","High-performance insulation and solar features","Green building practices with energy efficiency","Standard energy efficiency with proper ventilation"],load_bearing_elements:["RCC columns and beams with standard spacing","Load-bearing walls with RCC slabs","Steel columns with composite floors","RCC columns with precast elements","Hybrid structure with RC frame and masonry walls"],elevations_sections:["Standard elevation with cement plaster and paint","Modern elevation with glass and designer materials","Traditional elevation with decorative elements","Minimalist elevation with clean lines","Premium elevation with high-quality finishes"],section_details:["Standard wall thickness with cavity insulation","Reinforced concrete sections with proper detailing","Composite sections with steel and concrete","Insulated sections for energy efficiency","Load-bearing wall sections with proper foundations"],building_height:["Ground + 1 floor (approx. 10.5m)","Ground + 2 floors (approx. 13.5m)","Ground + 3 floors (approx. 16.5m)","Ground + 4 floors (approx. 19.5m)","Single story (approx. 7.5m ceiling)","Multi-storey high-rise (20m+)"],construction_notes:["Standard residential construction with M20 concrete","Premium construction with high-quality materials","Sustainable construction with eco-friendly materials","Fast-track construction with modern methods","Traditional construction with local materials","Industrial construction for commercial use"],material_specifications:["M20 grade concrete, Fe415 steel, standard finishes","M25 grade concrete, Fe500 steel, premium finishes","Standard cement, sand, steel, and tiles","High-grade materials with designer finishes","Eco-friendly materials with sustainable options"],construction_methods:["Traditional construction methodology","Modern construction with precast elements","Fast-track construction technique","Hybrid construction approach","Sustainable construction practices","Modular construction methodology"],special_requirements:["Earthquake-resistant design with proper reinforcement","Waterproofing and damp-proofing systems","Sound insulation and acoustic treatment","Thermal insulation for energy efficiency","Security features and smart home integration","Accessibility compliance with ramps and elevators"],cost_breakdown:["Foundation: 15%, Structure: 30%, Finishing: 35%, Services: 20%","Site work: 10%, Structure: 35%, Finishing: 40%, Services: 15%","Foundation: 20%, Frame: 25%, Roofing: 15%, Finishing: 40%","Land preparation: 8%, Structure: 32%, Interior: 45%, Exterior: 15%"],material_costs:["Cement: 250/bag, Steel: 55/kg, Bricks: 8/unit","High-grade materials: Cement 280/bag, Steel 65/kg","Premium materials: Cement 320/bag, Steel 75/kg","Standard materials: Cement 240/bag, Steel 52/kg"],labor_costs:["Masonry: 600/day, Carpenter: 700/day, Electrician: 550/day","Skilled: 800/day, Unskilled: 500/day, Specialist: 1000/day","Standard labor: 600/day, Specialized: 900/day","Premium labor: 900/day, Supervisor: 1200/day"]}),[]),C=(R,z)=>{_(R,z)},D=R=>{N("living_room",R.living_room),N("master_bedroom",R.master_bedroom),N("kitchen",R.kitchen),N("other_rooms",R.other_rooms)},S=w.useMemo(()=>[{id:"floor_plans",title:"Floor Plans & Layout",icon:"",description:"Complete the fields below to provide technical details for this section"},{id:"structural",title:"Structural Elements",icon:"",description:"Specify structural components and construction methods"},{id:"elevations",title:"Key Elevations & Sections",icon:"",description:"Provide details about building elevations and cross-sections"},{id:"construction",title:"Construction Notes",icon:"",description:"Additional construction specifications and considerations"},{id:"systems",title:"Building Systems",icon:"",description:"Electrical, plumbing, HVAC, and other building systems"},{id:"pricing",title:"Cost Estimation",icon:"",description:"Pricing information and cost breakdown"}],[]),_=(R,z)=>{const ee={...m,[R]:z};b(ee),a({...t,technical_details:ee})},N=(R,z)=>{const ee={...m.room_dimensions,[R]:z},le={...m,room_dimensions:ee};b(le),a({...t,technical_details:le})},O=R=>{if(u(R),R){const z=v.find(ee=>ee.id===R);if(z){const ee={...m,...z.data};b(ee),a({...t,technical_details:ee})}}},L=()=>{const R=S.findIndex(z=>z.id===o);R<S.length-1&&l(S[R+1].id)},te=()=>{const R=S.findIndex(z=>z.id===o);R>0&&l(S[R-1].id)},G=R=>{R.preventDefault(),a(z=>({...z,technical_details:m,view_price:m.view_price})),s()},X=()=>e.jsxs("div",{className:"technical-section",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Floor Plan Layout Description"}),A&&x.floor_plan_layout&&e.jsx("div",{className:"quick-fill-buttons",children:x.floor_plan_layout.map((R,z)=>e.jsx("button",{type:"button",className:"quick-fill-btn",onClick:()=>C("floor_plan_layout",R),children:R},z))}),e.jsx("textarea",{value:m.floor_plan_layout,onChange:R=>_("floor_plan_layout",R.target.value),placeholder:"Describe the floor plan layout, room arrangements, and spatial organization...",rows:"4"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Room Dimensions"}),A&&x.room_dimensions&&e.jsx("div",{className:"quick-fill-buttons",style:{marginBottom:"16px"},children:x.room_dimensions.map((R,z)=>e.jsxs("button",{type:"button",className:"quick-fill-btn",onClick:()=>D(R),style:{fontSize:"11px",padding:"6px 10px"},children:[" ",R.label]},z))}),e.jsxs("div",{className:"dimensions-grid",children:[e.jsxs("div",{className:"dimension-item",children:[e.jsx("label",{children:"Living Room"}),A&&x.living_room_options&&e.jsx("div",{className:"quick-fill-buttons",children:x.living_room_options.map((R,z)=>e.jsx("button",{type:"button",className:"quick-fill-btn",onClick:()=>N("living_room",R),style:{fontSize:"11px",padding:"4px 8px"},children:R},z))}),e.jsx("input",{type:"text",value:m.room_dimensions.living_room,onChange:R=>N("living_room",R.target.value),placeholder:"e.g., 20  15 ft"})]}),e.jsxs("div",{className:"dimension-item",children:[e.jsx("label",{children:"Master Bedroom"}),A&&x.master_bedroom_options&&e.jsx("div",{className:"quick-fill-buttons",children:x.master_bedroom_options.map((R,z)=>e.jsx("button",{type:"button",className:"quick-fill-btn",onClick:()=>N("master_bedroom",R),style:{fontSize:"11px",padding:"4px 8px"},children:R},z))}),e.jsx("input",{type:"text",value:m.room_dimensions.master_bedroom,onChange:R=>N("master_bedroom",R.target.value),placeholder:"e.g., 16  12 ft"})]}),e.jsxs("div",{className:"dimension-item",children:[e.jsx("label",{children:"Kitchen"}),A&&x.kitchen_options&&e.jsx("div",{className:"quick-fill-buttons",children:x.kitchen_options.map((R,z)=>e.jsx("button",{type:"button",className:"quick-fill-btn",onClick:()=>N("kitchen",R),style:{fontSize:"11px",padding:"4px 8px"},children:R},z))}),e.jsx("input",{type:"text",value:m.room_dimensions.kitchen,onChange:R=>N("kitchen",R.target.value),placeholder:"e.g., 12  10 ft"})]}),e.jsxs("div",{className:"dimension-item",children:[e.jsx("label",{children:"Other Rooms"}),e.jsx("textarea",{value:m.room_dimensions.other_rooms,onChange:R=>N("other_rooms",R.target.value),placeholder:"Bedroom 2: 14  12 ft, Bedroom 3: 12  10 ft, Bathroom: 8  6 ft...",rows:"3"})]})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Door & Window Positions"}),A&&x.door_window_positions&&e.jsx("div",{className:"quick-fill-buttons",children:x.door_window_positions.map((R,z)=>e.jsx("button",{type:"button",className:"quick-fill-btn",onClick:()=>C("door_window_positions",R),children:R},z))}),e.jsx("textarea",{value:m.door_window_positions,onChange:R=>_("door_window_positions",R.target.value),placeholder:"Specify door and window locations, sizes, and orientations...",rows:"4"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Main Circulation Paths"}),A&&x.circulation_paths&&e.jsx("div",{className:"quick-fill-buttons",children:x.circulation_paths.map((R,z)=>e.jsx("button",{type:"button",className:"quick-fill-btn",onClick:()=>C("circulation_paths",R),children:R},z))}),e.jsx("textarea",{value:m.circulation_paths,onChange:R=>_("circulation_paths",R.target.value),placeholder:"Describe hallways, staircases, and main circulation routes...",rows:"3"})]}),e.jsxs("div",{className:"section-navigation",children:[e.jsx("button",{type:"button",onClick:te,className:"btn btn-secondary",disabled:o==="floor_plans",children:" Previous"}),e.jsx("button",{type:"button",onClick:L,className:"btn btn-primary",children:"Next: Structural Elements "})]})]}),U=()=>e.jsxs("div",{className:"technical-section",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Structural System"}),A&&x.structural_elements&&e.jsx("div",{className:"quick-fill-buttons",children:x.structural_elements.map((R,z)=>e.jsx("button",{type:"button",className:"quick-fill-btn",onClick:()=>C("structural_elements",R),children:R},z))}),e.jsx("textarea",{value:m.structural_elements,onChange:R=>_("structural_elements",R.target.value),placeholder:"Describe structural system, materials, load-bearing elements, foundation type...",rows:"4"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Foundation Type"}),A&&x.foundation_type&&e.jsx("div",{className:"quick-fill-buttons",children:x.foundation_type.map((R,z)=>e.jsx("button",{type:"button",className:"quick-fill-btn",onClick:()=>C("foundation_type",R),children:R},z))}),e.jsx("input",{type:"text",value:m.foundation_type,onChange:R=>_("foundation_type",R.target.value),placeholder:"e.g., RCC Foundation, Pile Foundation, Strip Foundation..."})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Structural Materials"}),A&&x.structural_materials&&e.jsx("div",{className:"quick-fill-buttons",children:x.structural_materials.map((R,z)=>e.jsx("button",{type:"button",className:"quick-fill-btn",onClick:()=>C("structural_materials",R),children:R},z))}),e.jsx("textarea",{value:m.structural_materials,onChange:R=>_("structural_materials",R.target.value),placeholder:"Specify concrete grade, steel specifications, masonry details...",rows:"3"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Load Bearing Elements"}),A&&x.load_bearing_elements&&e.jsx("div",{className:"quick-fill-buttons",children:x.load_bearing_elements.map((R,z)=>e.jsx("button",{type:"button",className:"quick-fill-btn",onClick:()=>C("load_bearing_elements",R),children:R},z))}),e.jsx("textarea",{value:m.load_bearing_elements,onChange:R=>_("load_bearing_elements",R.target.value),placeholder:"Describe columns, beams, walls, and other load-bearing components...",rows:"3"})]}),e.jsxs("div",{className:"section-navigation",children:[e.jsx("button",{type:"button",onClick:te,className:"btn btn-secondary",children:" Previous"}),e.jsx("button",{type:"button",onClick:L,className:"btn btn-primary",children:"Next: Elevations & Sections "})]})]}),E=()=>e.jsxs("div",{className:"technical-section",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Elevation Details"}),A&&x.elevations_sections&&e.jsx("div",{className:"quick-fill-buttons",children:x.elevations_sections.map((R,z)=>e.jsx("button",{type:"button",className:"quick-fill-btn",onClick:()=>C("elevations_sections",R),children:R},z))}),e.jsx("textarea",{value:m.elevations_sections,onChange:R=>_("elevations_sections",R.target.value),placeholder:"Describe building elevations, facade treatments, section details...",rows:"4"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Facade Treatment"}),A&&x.facade_treatment&&e.jsx("div",{className:"quick-fill-buttons",children:x.facade_treatment.map((R,z)=>e.jsx("button",{type:"button",className:"quick-fill-btn",onClick:()=>C("facade_treatment",R),children:R},z))}),e.jsx("textarea",{value:m.facade_treatment,onChange:R=>_("facade_treatment",R.target.value),placeholder:"Specify exterior finishes, cladding materials, architectural features...",rows:"3"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Section Details"}),A&&x.section_details&&e.jsx("div",{className:"quick-fill-buttons",children:x.section_details.map((R,z)=>e.jsx("button",{type:"button",className:"quick-fill-btn",onClick:()=>C("section_details",R),children:R},z))}),e.jsx("textarea",{value:m.section_details,onChange:R=>_("section_details",R.target.value),placeholder:"Describe cross-sections, wall thicknesses, floor-to-floor heights...",rows:"3"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Building Height"}),A&&x.building_height&&e.jsx("div",{className:"quick-fill-buttons",children:x.building_height.map((R,z)=>e.jsx("button",{type:"button",className:"quick-fill-btn",onClick:()=>C("building_height",R),children:R},z))}),e.jsx("input",{type:"text",value:m.building_height,onChange:R=>_("building_height",R.target.value),placeholder:"e.g., 10.5m (Ground + 2 floors)"})]}),e.jsxs("div",{className:"section-navigation",children:[e.jsx("button",{type:"button",onClick:te,className:"btn btn-secondary",children:" Previous"}),e.jsx("button",{type:"button",onClick:L,className:"btn btn-primary",children:"Next: Construction Details "})]})]}),Y=()=>e.jsxs("div",{className:"technical-section",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Construction Specifications"}),A&&x.construction_notes&&e.jsx("div",{className:"quick-fill-buttons",children:x.construction_notes.map((R,z)=>e.jsx("button",{type:"button",className:"quick-fill-btn",onClick:()=>C("construction_notes",R),children:R},z))}),e.jsx("textarea",{value:m.construction_notes,onChange:R=>_("construction_notes",R.target.value),placeholder:"Include material specifications, construction methods, special requirements...",rows:"4"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Material Specifications"}),A&&x.material_specifications&&e.jsx("div",{className:"quick-fill-buttons",children:x.material_specifications.map((R,z)=>e.jsx("button",{type:"button",className:"quick-fill-btn",onClick:()=>C("material_specifications",R),children:R},z))}),e.jsx("textarea",{value:m.material_specifications,onChange:R=>_("material_specifications",R.target.value),placeholder:"Specify brands, grades, and quality standards for materials...",rows:"3"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Construction Methods"}),A&&x.construction_methods&&e.jsx("div",{className:"quick-fill-buttons",children:x.construction_methods.map((R,z)=>e.jsx("button",{type:"button",className:"quick-fill-btn",onClick:()=>C("construction_methods",R),children:R},z))}),e.jsx("textarea",{value:m.construction_methods,onChange:R=>_("construction_methods",R.target.value),placeholder:"Describe construction techniques, sequencing, and methodologies...",rows:"3"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Special Requirements"}),A&&x.special_requirements&&e.jsx("div",{className:"quick-fill-buttons",children:x.special_requirements.map((R,z)=>e.jsx("button",{type:"button",className:"quick-fill-btn",onClick:()=>C("special_requirements",R),children:R},z))}),e.jsx("textarea",{value:m.special_requirements,onChange:R=>_("special_requirements",R.target.value),placeholder:"Any special construction requirements, permits, or considerations...",rows:"3"})]}),e.jsxs("div",{className:"section-navigation",children:[e.jsx("button",{type:"button",onClick:te,className:"btn btn-secondary",children:" Previous"}),e.jsx("button",{type:"button",onClick:L,className:"btn btn-primary",children:"Next: MEP Systems "})]})]}),T=()=>e.jsxs("div",{className:"technical-section",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Electrical System"}),A&&x.electrical_system&&e.jsx("div",{className:"quick-fill-buttons",children:x.electrical_system.map((R,z)=>e.jsx("button",{type:"button",className:"quick-fill-btn",onClick:()=>C("electrical_system",R),children:R},z))}),e.jsx("textarea",{value:m.electrical_system,onChange:R=>_("electrical_system",R.target.value),placeholder:"Describe electrical layout, load calculations, panel locations...",rows:"3"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Plumbing System"}),A&&x.plumbing_system&&e.jsx("div",{className:"quick-fill-buttons",children:x.plumbing_system.map((R,z)=>e.jsx("button",{type:"button",className:"quick-fill-btn",onClick:()=>C("plumbing_system",R),children:R},z))}),e.jsx("textarea",{value:m.plumbing_system,onChange:R=>_("plumbing_system",R.target.value),placeholder:"Specify water supply, drainage, fixture locations...",rows:"3"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"HVAC System"}),A&&x.hvac_system&&e.jsx("div",{className:"quick-fill-buttons",children:x.hvac_system.map((R,z)=>e.jsx("button",{type:"button",className:"quick-fill-btn",onClick:()=>C("hvac_system",R),children:R},z))}),e.jsx("textarea",{value:m.hvac_system,onChange:R=>_("hvac_system",R.target.value),placeholder:"Describe heating, ventilation, and air conditioning systems...",rows:"3"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Fire Safety"}),A&&x.fire_safety&&e.jsx("div",{className:"quick-fill-buttons",children:x.fire_safety.map((R,z)=>e.jsx("button",{type:"button",className:"quick-fill-btn",onClick:()=>C("fire_safety",R),children:R},z))}),e.jsx("textarea",{value:m.fire_safety,onChange:R=>_("fire_safety",R.target.value),placeholder:"Specify fire safety measures, exits, sprinkler systems...",rows:"3"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Accessibility Features"}),A&&x.accessibility_features&&e.jsx("div",{className:"quick-fill-buttons",children:x.accessibility_features.map((R,z)=>e.jsx("button",{type:"button",className:"quick-fill-btn",onClick:()=>C("accessibility_features",R),children:R},z))}),e.jsx("textarea",{value:m.accessibility_features,onChange:R=>_("accessibility_features",R.target.value),placeholder:"Describe accessibility compliance, ramps, elevators...",rows:"3"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Energy Efficiency"}),A&&x.energy_efficiency&&e.jsx("div",{className:"quick-fill-buttons",children:x.energy_efficiency.map((R,z)=>e.jsx("button",{type:"button",className:"quick-fill-btn",onClick:()=>C("energy_efficiency",R),children:R},z))}),e.jsx("textarea",{value:m.energy_efficiency,onChange:R=>_("energy_efficiency",R.target.value),placeholder:"Specify insulation, solar panels, energy-efficient systems...",rows:"3"})]}),e.jsxs("div",{className:"section-navigation",children:[e.jsx("button",{type:"button",onClick:te,className:"btn btn-secondary",children:" Previous"}),e.jsx("button",{type:"button",onClick:()=>{L()},className:"btn btn-primary",children:"Next: Pricing & Timeline "})]})]}),Q=()=>e.jsxs("div",{className:"technical-section",children:[e.jsxs("div",{className:"price-section",children:[e.jsx("label",{children:"Estimated Total Cost"}),e.jsx("div",{className:"price-input-container",children:e.jsx("input",{type:"text",className:"price-input",value:m.estimated_cost,onChange:R=>_("estimated_cost",R.target.value),placeholder:"e.g., 25,00,000"})}),e.jsx("div",{className:"field-help",children:"Enter the total estimated cost for the project including all materials and labor"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Price to View Layout ()"}),e.jsx("input",{type:"number",value:m.view_price||0,onChange:R=>_("view_price",R.target.value),placeholder:"e.g., 100",min:"0",step:"0.01"}),e.jsx("div",{className:"field-help",style:{marginTop:"4px"},children:"Amount homeowners must pay to view this layout (Optional - set 0 for free)"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Cost Breakdown"}),A&&x.cost_breakdown&&e.jsx("div",{className:"quick-fill-buttons",children:x.cost_breakdown.map((R,z)=>e.jsx("button",{type:"button",className:"quick-fill-btn",onClick:()=>C("cost_breakdown",R),children:R},z))}),e.jsx("textarea",{value:m.cost_breakdown,onChange:R=>_("cost_breakdown",R.target.value),placeholder:"Provide detailed cost breakdown by category...",rows:"4"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Material Costs"}),A&&x.material_costs&&e.jsx("div",{className:"quick-fill-buttons",children:x.material_costs.map((R,z)=>e.jsx("button",{type:"button",className:"quick-fill-btn",onClick:()=>C("material_costs",R),children:R},z))}),e.jsx("textarea",{value:m.material_costs,onChange:R=>_("material_costs",R.target.value),placeholder:"Breakdown of material costs (concrete, steel, finishes, etc.)...",rows:"3"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Labor Costs"}),A&&x.labor_costs&&e.jsx("div",{className:"quick-fill-buttons",children:x.labor_costs.map((R,z)=>e.jsx("button",{type:"button",className:"quick-fill-btn",onClick:()=>C("labor_costs",R),children:R},z))}),e.jsx("textarea",{value:m.labor_costs,onChange:R=>_("labor_costs",R.target.value),placeholder:"Breakdown of labor costs (masonry, carpentry, electrical, etc.)...",rows:"3"})]}),e.jsxs("div",{className:"section-navigation",children:[e.jsx("button",{type:"button",onClick:te,className:"btn btn-secondary",children:" Previous"}),e.jsx("button",{type:"button",onClick:G,className:"btn btn-primary",children:"Next: Files & Submit "})]})]}),q=()=>{switch(o){case"floor_plans":return X();case"structural":return U();case"elevations":return E();case"construction":return Y();case"systems":return T();case"pricing":return Q();default:return X()}},ne=S.find(R=>R.id===o);return e.jsxs("div",{className:"technical-details-form-new",children:[e.jsxs("div",{className:"technical-header-new",children:[e.jsxs("div",{className:"header-left",children:[e.jsx("button",{className:"modal-close-new",onClick:i,children:""}),e.jsxs("div",{className:"header-info",children:[e.jsx("h2",{children:"Technical Design Details"}),e.jsxs("div",{className:"progress-indicator",children:[e.jsx("span",{className:"progress-text",children:"Step 2 of 3"}),e.jsx("div",{className:"progress-bar",children:e.jsx("div",{className:"progress-fill",style:{width:"66%"}})})]})]})]}),e.jsxs("div",{className:"header-right",children:[e.jsxs("div",{className:"template-selector",children:[e.jsx("label",{children:"Template:"}),e.jsxs("select",{value:d,onChange:R=>O(R.target.value),children:[e.jsx("option",{value:"",children:"Select a template..."}),v.map(R=>e.jsx("option",{value:R.id,children:R.name},R.id))]})]}),e.jsx("button",{type:"button",className:"quick-fill-toggle",onClick:()=>p(!A),style:{marginLeft:"12px",padding:"8px 16px",background:"rgba(255, 255, 255, 0.2)",border:"1px solid rgba(255, 255, 255, 0.3)",borderRadius:"6px",color:"white",cursor:"pointer",fontSize:"13px",fontWeight:"500"},children:A?" Quick Fill: ON":" Quick Fill: OFF"})]})]}),e.jsxs("div",{className:"technical-main-new",children:[e.jsx("div",{className:"technical-sidebar-new",children:e.jsx("div",{className:"section-nav-new",children:S.map((R,z)=>e.jsxs("button",{className:`section-nav-item-new ${o===R.id?"active":""}`,onClick:()=>l(R.id),children:[e.jsx("div",{className:"section-number",children:z+1}),e.jsxs("div",{className:"section-info",children:[e.jsx("span",{className:"section-icon-new",children:R.icon}),e.jsx("span",{className:"section-title-new",children:R.title})]})]},R.id))})}),e.jsxs("div",{className:"technical-content-new",children:[e.jsxs("div",{className:"content-header",children:[e.jsx("h3",{children:ne?.title}),e.jsx("p",{children:ne?.description})]}),e.jsx("div",{className:"content-body",children:q()})]})]})]})},cw=({isOpen:t,onClose:a,onSubmit:s,planData:i,loading:o,planId:l})=>{const[d,u]=w.useState({foundation_type:"RCC",structure_type:"RCC Frame",wall_material:"Brick",roofing_type:"RCC Slab",flooring_type:"Ceramic Tiles",wall_thickness:"9",ceiling_height:"10",door_height:"7",window_height:"4",electrical_load:"5",water_connection:"Municipal",sewage_connection:"Municipal",construction_cost:"",construction_duration:"8-12",unlock_price:"8000",special_features:"",construction_notes:"",compliance_certificates:"Building Permit, NOC",exterior_finish:"Paint",interior_finish:"Paint",kitchen_type:"Modular",bathroom_fittings:"Standard",earthquake_resistance:"Zone III Compliant",fire_safety:"Standard",ventilation:"Natural + Exhaust Fans",site_area:"",built_up_area:"",carpet_area:"",setback_front:"",setback_rear:"",setback_left:"",setback_right:"",beam_size:"9x12",column_size:"9x12",slab_thickness:"5",footing_depth:"4 feet",electrical_points:"",plumbing_fixtures:"",hvac_system:"Split AC",solar_provision:"No",main_door_material:"Teak Wood",window_material:"UPVC",staircase_material:"RCC with Granite",compound_wall:"Yes",building_plan_approval:"Required",environmental_clearance:"Not Required",fire_noc:"Required",layout_image:null,elevation_images:[],section_drawings:[],renders_3d:[]}),[A,p]=w.useState(!1),[m,b]=w.useState({layout_image:null,elevation_images:[],section_drawings:[],renders_3d:[]}),v=(N,O)=>{u(L=>({...L,[N]:O}))},x=async(N,O)=>{if(!O||O.length===0)return;const L=[];for(let te of O){const G=URL.createObjectURL(te);L.push({file:te,name:te.name,size:te.size,type:te.type,preview:G,uploaded:!1,pending_upload:!0})}if(N==="layout_image"){const te=L[0];u(G=>({...G,[N]:te})),b(G=>({...G,[N]:te.preview}))}else u(te=>({...te,[N]:[...te[N]||[],...L]})),b(te=>({...te,[N]:[...te[N]||[],...L.map(G=>G.preview)]}))},C=(N,O=null)=>{if(N==="layout_image")d[N]?.preview&&URL.revokeObjectURL(d[N].preview),u(L=>({...L,[N]:null})),b(L=>({...L,[N]:null}));else{const L=d[N]||[];O!==null&&L[O]?.preview&&URL.revokeObjectURL(L[O].preview),u(te=>({...te,[N]:L.filter((G,X)=>X!==O)})),b(te=>({...te,[N]:(te[N]||[]).filter((G,X)=>X!==O)}))}},D=async N=>{const O=[];if(d.layout_image&&d.layout_image.pending_upload&&O.push({file:d.layout_image.file,field:"layout_image",originalData:d.layout_image}),["elevation_images","section_drawings","renders_3d"].forEach(te=>{d[te]&&Array.isArray(d[te])&&d[te].forEach((G,X)=>{G.pending_upload&&O.push({file:G.file,field:te,originalData:G,index:X})})}),O.length===0)return d;p(!0);let L={...d};try{for(let te of O){const G=new FormData;G.append("file",te.file),G.append("plan_id",N),G.append("file_type",te.field);try{const U=await(await fetch("/buildhub/backend/api/architect/upload_house_plan_files.php",{method:"POST",body:G,credentials:"include"})).json();if(U.success&&U.files&&U.files.length>0){const E=U.files[0];te.field==="layout_image"?(L.layout_image={...L.layout_image,stored:E.stored,uploaded:!0,pending_upload:!1,upload_time:E.upload_time,file:null},u(Y=>({...Y,layout_image:L.layout_image}))):(L[te.field]||(L[te.field]=[]),L[te.field][te.index]&&(L[te.field][te.index]={...L[te.field][te.index],stored:E.stored,uploaded:!0,pending_upload:!1,upload_time:E.upload_time,file:null}),u(Y=>{const T=[...Y[te.field]||[]];return T[te.index]&&(T[te.index]=L[te.field][te.index]),{...Y,[te.field]:T}}))}else console.error("File upload failed:",U.message),te.field==="layout_image"&&(L.layout_image={...L.layout_image,uploaded:!1,pending_upload:!1,error:U.message||"Upload failed"},u(E=>({...E,layout_image:L.layout_image})))}catch(X){console.error("Upload error:",X)}}}catch(te){console.error("Error uploading files:",te)}finally{p(!1)}return L},S=async()=>{if(!d.construction_cost){alert("Please enter estimated construction cost");return}s(d,D)},_=()=>{if(i&&i.rooms){const N=i.rooms.reduce((te,G)=>{const X=G.actual_width||G.layout_width*(i.scale_ratio||1.2),U=G.actual_height||G.layout_height*(i.scale_ratio||1.2);return te+X*U},0),O=Math.round(N*1500),L=Math.round(N*2500);return`${O.toLocaleString()} - ${L.toLocaleString()}`}return"Calculate based on area"};return t?e.jsx("div",{className:"technical-details-modal-overlay",children:e.jsxs("div",{className:"technical-details-modal",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h2",{children:" Technical Details & Specifications"}),e.jsx("button",{className:"close-btn",onClick:a,children:""})]}),e.jsx("div",{className:"modal-content",children:e.jsxs("div",{className:"details-sections",children:[e.jsxs("div",{className:"detail-section",children:[e.jsx("h3",{children:" Site Details"}),e.jsxs("div",{className:"form-grid",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Site Area (sq ft):"}),e.jsx("input",{type:"number",placeholder:"Enter site area",value:d.site_area,onChange:N=>v("site_area",N.target.value)})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Built-up Area (sq ft):"}),e.jsx("input",{type:"number",placeholder:"Enter built-up area",value:d.built_up_area,onChange:N=>v("built_up_area",N.target.value)})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Carpet Area (sq ft):"}),e.jsx("input",{type:"number",placeholder:"Enter carpet area",value:d.carpet_area,onChange:N=>v("carpet_area",N.target.value)})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Front Setback (feet):"}),e.jsx("input",{type:"number",placeholder:"Enter front setback",value:d.setback_front,onChange:N=>v("setback_front",N.target.value)})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Rear Setback (feet):"}),e.jsx("input",{type:"number",placeholder:"Enter rear setback",value:d.setback_rear,onChange:N=>v("setback_rear",N.target.value)})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Left Setback (feet):"}),e.jsx("input",{type:"number",placeholder:"Enter left setback",value:d.setback_left,onChange:N=>v("setback_left",N.target.value)})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Right Setback (feet):"}),e.jsx("input",{type:"number",placeholder:"Enter right setback",value:d.setback_right,onChange:N=>v("setback_right",N.target.value)})]})]})]}),e.jsxs("div",{className:"detail-section",children:[e.jsx("h3",{children:" Construction Details"}),e.jsxs("div",{className:"form-grid",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Foundation Type:"}),e.jsxs("select",{value:d.foundation_type,onChange:N=>v("foundation_type",N.target.value),children:[e.jsx("option",{value:"RCC",children:"RCC Foundation"}),e.jsx("option",{value:"Stone",children:"Stone Foundation"}),e.jsx("option",{value:"Pile",children:"Pile Foundation"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Structure Type:"}),e.jsxs("select",{value:d.structure_type,onChange:N=>v("structure_type",N.target.value),children:[e.jsx("option",{value:"RCC Frame",children:"RCC Frame Structure"}),e.jsx("option",{value:"Load Bearing",children:"Load Bearing Wall"}),e.jsx("option",{value:"Steel Frame",children:"Steel Frame"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Wall Material:"}),e.jsxs("select",{value:d.wall_material,onChange:N=>v("wall_material",N.target.value),children:[e.jsx("option",{value:"Brick",children:"Red Brick"}),e.jsx("option",{value:"AAC Block",children:"AAC Block"}),e.jsx("option",{value:"Concrete Block",children:"Concrete Block"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Roofing Type:"}),e.jsxs("select",{value:d.roofing_type,onChange:N=>v("roofing_type",N.target.value),children:[e.jsx("option",{value:"RCC Slab",children:"RCC Slab"}),e.jsx("option",{value:"Tile Roof",children:"Tile Roof"}),e.jsx("option",{value:"Sheet Roof",children:"Metal Sheet"})]})]})]})]}),e.jsxs("div",{className:"detail-section",children:[e.jsx("h3",{children:" Specifications"}),e.jsxs("div",{className:"form-grid",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Wall Thickness (inches):"}),e.jsxs("select",{value:d.wall_thickness,onChange:N=>v("wall_thickness",N.target.value),children:[e.jsx("option",{value:"4.5",children:"4.5 inches"}),e.jsx("option",{value:"9",children:"9 inches"}),e.jsx("option",{value:"13.5",children:"13.5 inches"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Ceiling Height (feet):"}),e.jsxs("select",{value:d.ceiling_height,onChange:N=>v("ceiling_height",N.target.value),children:[e.jsx("option",{value:"9",children:"9 feet"}),e.jsx("option",{value:"10",children:"10 feet"}),e.jsx("option",{value:"11",children:"11 feet"}),e.jsx("option",{value:"12",children:"12 feet"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Door Height (feet):"}),e.jsxs("select",{value:d.door_height,onChange:N=>v("door_height",N.target.value),children:[e.jsx("option",{value:"6.5",children:"6.5 feet"}),e.jsx("option",{value:"7",children:"7 feet"}),e.jsx("option",{value:"7.5",children:"7.5 feet"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Window Height (feet):"}),e.jsxs("select",{value:d.window_height,onChange:N=>v("window_height",N.target.value),children:[e.jsx("option",{value:"3",children:"3 feet"}),e.jsx("option",{value:"4",children:"4 feet"}),e.jsx("option",{value:"5",children:"5 feet"})]})]})]})]}),e.jsxs("div",{className:"detail-section",children:[e.jsx("h3",{children:" Structural Details"}),e.jsxs("div",{className:"form-grid",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Beam Size:"}),e.jsxs("select",{value:d.beam_size,onChange:N=>v("beam_size",N.target.value),children:[e.jsx("option",{value:"9x12",children:'9" x 12"'}),e.jsx("option",{value:"9x15",children:'9" x 15"'}),e.jsx("option",{value:"12x15",children:'12" x 15"'}),e.jsx("option",{value:"12x18",children:'12" x 18"'})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Column Size:"}),e.jsxs("select",{value:d.column_size,onChange:N=>v("column_size",N.target.value),children:[e.jsx("option",{value:"9x12",children:'9" x 12"'}),e.jsx("option",{value:"12x12",children:'12" x 12"'}),e.jsx("option",{value:"12x15",children:'12" x 15"'}),e.jsx("option",{value:"15x15",children:'15" x 15"'})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Slab Thickness:"}),e.jsxs("select",{value:d.slab_thickness,onChange:N=>v("slab_thickness",N.target.value),children:[e.jsx("option",{value:"4",children:"4 inches"}),e.jsx("option",{value:"5",children:"5 inches"}),e.jsx("option",{value:"6",children:"6 inches"}),e.jsx("option",{value:"7",children:"7 inches"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Footing Depth:"}),e.jsxs("select",{value:d.footing_depth,onChange:N=>v("footing_depth",N.target.value),children:[e.jsx("option",{value:"3 feet",children:"3 feet"}),e.jsx("option",{value:"4 feet",children:"4 feet"}),e.jsx("option",{value:"5 feet",children:"5 feet"}),e.jsx("option",{value:"6 feet",children:"6 feet"})]})]})]})]}),e.jsxs("div",{className:"detail-section",children:[e.jsx("h3",{children:" MEP (Mechanical, Electrical, Plumbing)"}),e.jsxs("div",{className:"form-grid",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Electrical Points:"}),e.jsx("input",{type:"number",placeholder:"Total electrical points",value:d.electrical_points,onChange:N=>v("electrical_points",N.target.value)})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Plumbing Fixtures:"}),e.jsx("input",{type:"number",placeholder:"Total plumbing fixtures",value:d.plumbing_fixtures,onChange:N=>v("plumbing_fixtures",N.target.value)})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"HVAC System:"}),e.jsxs("select",{value:d.hvac_system,onChange:N=>v("hvac_system",N.target.value),children:[e.jsx("option",{value:"Split AC",children:"Split AC"}),e.jsx("option",{value:"Central AC",children:"Central AC"}),e.jsx("option",{value:"Ceiling Fans",children:"Ceiling Fans Only"}),e.jsx("option",{value:"Ducted AC",children:"Ducted AC"}),e.jsx("option",{value:"VRF System",children:"VRF System"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Solar Provision:"}),e.jsxs("select",{value:d.solar_provision,onChange:N=>v("solar_provision",N.target.value),children:[e.jsx("option",{value:"No",children:"No"}),e.jsx("option",{value:"Yes - Rooftop",children:"Yes - Rooftop Solar"}),e.jsx("option",{value:"Yes - Ground Mount",children:"Yes - Ground Mount"}),e.jsx("option",{value:"Provision Only",children:"Provision Only"})]})]})]})]}),e.jsxs("div",{className:"detail-section",children:[e.jsx("h3",{children:" Electrical & Plumbing"}),e.jsxs("div",{className:"form-grid",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Electrical Load (KW):"}),e.jsxs("select",{value:d.electrical_load,onChange:N=>v("electrical_load",N.target.value),children:[e.jsx("option",{value:"3",children:"3 KW"}),e.jsx("option",{value:"5",children:"5 KW"}),e.jsx("option",{value:"7",children:"7 KW"}),e.jsx("option",{value:"10",children:"10 KW"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Water Connection:"}),e.jsxs("select",{value:d.water_connection,onChange:N=>v("water_connection",N.target.value),children:[e.jsx("option",{value:"Municipal",children:"Municipal Supply"}),e.jsx("option",{value:"Borewell",children:"Borewell"}),e.jsx("option",{value:"Both",children:"Both"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Sewage Connection:"}),e.jsxs("select",{value:d.sewage_connection,onChange:N=>v("sewage_connection",N.target.value),children:[e.jsx("option",{value:"Municipal",children:"Municipal Drainage"}),e.jsx("option",{value:"Septic Tank",children:"Septic Tank"}),e.jsx("option",{value:"STP",children:"Sewage Treatment Plant"})]})]})]})]}),e.jsxs("div",{className:"detail-section",children:[e.jsx("h3",{children:" Cost & Timeline"}),e.jsxs("div",{className:"form-grid",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Estimated Construction Cost:"}),e.jsxs("div",{className:"cost-input-group",children:[e.jsx("input",{type:"text",placeholder:"Enter amount (e.g., 25,00,000)",value:d.construction_cost,onChange:N=>v("construction_cost",N.target.value)}),e.jsxs("small",{children:["Suggested: ",_()]})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Construction Duration (months):"}),e.jsxs("select",{value:d.construction_duration,onChange:N=>v("construction_duration",N.target.value),children:[e.jsx("option",{value:"6-8",children:"6-8 months"}),e.jsx("option",{value:"8-12",children:"8-12 months"}),e.jsx("option",{value:"12-18",children:"12-18 months"}),e.jsx("option",{value:"18-24",children:"18-24 months"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Technical Details Unlock Price ():"}),e.jsxs("div",{className:"price-input-group",children:[e.jsx("input",{type:"number",placeholder:"8000",value:d.unlock_price||"8000",onChange:N=>v("unlock_price",N.target.value),min:"0",step:"100"}),e.jsx("small",{children:"Amount homeowner pays to unlock technical details (Default: 8000)"})]})]})]})]}),e.jsxs("div",{className:"detail-section",children:[e.jsx("h3",{children:" Enhanced Materials & Finishes"}),e.jsxs("div",{className:"form-grid",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Main Door Material:"}),e.jsxs("select",{value:d.main_door_material,onChange:N=>v("main_door_material",N.target.value),children:[e.jsx("option",{value:"Teak Wood",children:"Teak Wood"}),e.jsx("option",{value:"Engineered Wood",children:"Engineered Wood"}),e.jsx("option",{value:"Steel",children:"Steel Door"}),e.jsx("option",{value:"Fiber",children:"Fiber Door"}),e.jsx("option",{value:"Glass",children:"Glass Door"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Window Material:"}),e.jsxs("select",{value:d.window_material,onChange:N=>v("window_material",N.target.value),children:[e.jsx("option",{value:"UPVC",children:"UPVC Windows"}),e.jsx("option",{value:"Aluminum",children:"Aluminum Windows"}),e.jsx("option",{value:"Wood",children:"Wooden Windows"}),e.jsx("option",{value:"Steel",children:"Steel Windows"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Staircase Material:"}),e.jsxs("select",{value:d.staircase_material,onChange:N=>v("staircase_material",N.target.value),children:[e.jsx("option",{value:"RCC with Granite",children:"RCC with Granite"}),e.jsx("option",{value:"RCC with Marble",children:"RCC with Marble"}),e.jsx("option",{value:"Steel Structure",children:"Steel Structure"}),e.jsx("option",{value:"Wooden Staircase",children:"Wooden Staircase"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Compound Wall:"}),e.jsxs("select",{value:d.compound_wall,onChange:N=>v("compound_wall",N.target.value),children:[e.jsx("option",{value:"Yes",children:"Yes"}),e.jsx("option",{value:"No",children:"No"}),e.jsx("option",{value:"Partial",children:"Partial"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Exterior Finish:"}),e.jsxs("select",{value:d.exterior_finish,onChange:N=>v("exterior_finish",N.target.value),children:[e.jsx("option",{value:"Paint",children:"Paint"}),e.jsx("option",{value:"Texture",children:"Texture Paint"}),e.jsx("option",{value:"Stone Cladding",children:"Stone Cladding"}),e.jsx("option",{value:"Tiles",children:"Exterior Tiles"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Kitchen Type:"}),e.jsxs("select",{value:d.kitchen_type,onChange:N=>v("kitchen_type",N.target.value),children:[e.jsx("option",{value:"Modular",children:"Modular Kitchen"}),e.jsx("option",{value:"Semi-Modular",children:"Semi-Modular"}),e.jsx("option",{value:"Traditional",children:"Traditional"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Bathroom Fittings:"}),e.jsxs("select",{value:d.bathroom_fittings,onChange:N=>v("bathroom_fittings",N.target.value),children:[e.jsx("option",{value:"Standard",children:"Standard"}),e.jsx("option",{value:"Premium",children:"Premium"}),e.jsx("option",{value:"Luxury",children:"Luxury"})]})]})]})]}),e.jsxs("div",{className:"detail-section",children:[e.jsx("h3",{children:" Approvals & Compliance"}),e.jsxs("div",{className:"form-grid",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Building Plan Approval:"}),e.jsxs("select",{value:d.building_plan_approval,onChange:N=>v("building_plan_approval",N.target.value),children:[e.jsx("option",{value:"Required",children:"Required"}),e.jsx("option",{value:"Obtained",children:"Already Obtained"}),e.jsx("option",{value:"Not Required",children:"Not Required"}),e.jsx("option",{value:"In Process",children:"In Process"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Environmental Clearance:"}),e.jsxs("select",{value:d.environmental_clearance,onChange:N=>v("environmental_clearance",N.target.value),children:[e.jsx("option",{value:"Not Required",children:"Not Required"}),e.jsx("option",{value:"Required",children:"Required"}),e.jsx("option",{value:"Obtained",children:"Already Obtained"}),e.jsx("option",{value:"In Process",children:"In Process"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Fire NOC:"}),e.jsxs("select",{value:d.fire_noc,onChange:N=>v("fire_noc",N.target.value),children:[e.jsx("option",{value:"Required",children:"Required"}),e.jsx("option",{value:"Not Required",children:"Not Required"}),e.jsx("option",{value:"Obtained",children:"Already Obtained"}),e.jsx("option",{value:"In Process",children:"In Process"})]})]})]})]}),e.jsxs("div",{className:"detail-section",children:[e.jsx("h3",{children:" Design Files"}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Layout Image for Homeowner:"}),e.jsxs("div",{className:"file-upload-area",children:[e.jsx("input",{type:"file",id:"layout-image-upload",accept:"image/*",onChange:N=>x("layout_image",N.target.files),style:{display:"none"}}),e.jsx("label",{htmlFor:"layout-image-upload",className:"file-upload-button",children:" Choose Layout Image"}),e.jsx("small",{className:"file-help-text",children:"Upload the main layout image that will be shown to the homeowner"}),d.layout_image&&e.jsx("div",{className:"file-preview-item",children:e.jsxs("div",{className:"file-preview-content",children:[e.jsx("img",{src:m.layout_image,alt:"Layout Preview",className:"file-preview-image"}),e.jsxs("div",{className:"file-info",children:[e.jsx("span",{className:"file-name",children:d.layout_image.name}),e.jsxs("span",{className:"file-size",children:[(d.layout_image.size/1024/1024).toFixed(2)," MB"]}),e.jsx("span",{className:`upload-status ${d.layout_image.uploaded?"uploaded":d.layout_image.pending_upload?"pending":"not-uploaded"}`,children:d.layout_image.uploaded?" Uploaded":d.layout_image.pending_upload?" Ready to upload":" Not uploaded"}),d.layout_image.error&&e.jsxs("span",{className:"upload-error",children:[" ",d.layout_image.error]})]}),e.jsx("button",{type:"button",className:"file-remove-btn",onClick:()=>C("layout_image"),children:""})]})})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Elevation Images (Optional):"}),e.jsxs("div",{className:"file-upload-area",children:[e.jsx("input",{type:"file",id:"elevation-images-upload",accept:"image/*",multiple:!0,onChange:N=>x("elevation_images",N.target.files),style:{display:"none"}}),e.jsx("label",{htmlFor:"elevation-images-upload",className:"file-upload-button",children:" Choose Elevation Images"}),e.jsx("small",{className:"file-help-text",children:"Upload front, side, and rear elevation views (multiple files allowed)"}),d.elevation_images&&d.elevation_images.length>0&&e.jsx("div",{className:"file-preview-grid",children:d.elevation_images.map((N,O)=>e.jsx("div",{className:"file-preview-item",children:e.jsxs("div",{className:"file-preview-content",children:[e.jsx("img",{src:N.preview,alt:`Elevation ${O+1}`,className:"file-preview-image"}),e.jsxs("div",{className:"file-info",children:[e.jsx("span",{className:"file-name",children:N.name}),e.jsxs("span",{className:"file-size",children:[(N.size/1024/1024).toFixed(2)," MB"]})]}),e.jsx("button",{type:"button",className:"file-remove-btn",onClick:()=>C("elevation_images",O),children:""})]})},O))})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Section Drawings (Optional):"}),e.jsxs("div",{className:"file-upload-area",children:[e.jsx("input",{type:"file",id:"section-drawings-upload",accept:"image/*,.pdf",multiple:!0,onChange:N=>x("section_drawings",N.target.files),style:{display:"none"}}),e.jsx("label",{htmlFor:"section-drawings-upload",className:"file-upload-button",children:" Choose Section Drawings"}),e.jsx("small",{className:"file-help-text",children:"Upload cross-section drawings and detailed views (Images or PDF)"}),d.section_drawings&&d.section_drawings.length>0&&e.jsx("div",{className:"file-preview-list",children:d.section_drawings.map((N,O)=>e.jsx("div",{className:"file-preview-item",children:e.jsxs("div",{className:"file-preview-content",children:[e.jsx("div",{className:"file-icon",children:N.type.includes("image")?"":""}),e.jsxs("div",{className:"file-info",children:[e.jsx("span",{className:"file-name",children:N.name}),e.jsxs("span",{className:"file-size",children:[(N.size/1024/1024).toFixed(2)," MB"]})]}),e.jsx("button",{type:"button",className:"file-remove-btn",onClick:()=>C("section_drawings",O),children:""})]})},O))})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"3D Renders (Optional):"}),e.jsxs("div",{className:"file-upload-area",children:[e.jsx("input",{type:"file",id:"3d-renders-upload",accept:"image/*",multiple:!0,onChange:N=>x("renders_3d",N.target.files),style:{display:"none"}}),e.jsx("label",{htmlFor:"3d-renders-upload",className:"file-upload-button",children:" Choose 3D Renders"}),e.jsx("small",{className:"file-help-text",children:"Upload 3D rendered images of the design"}),d.renders_3d&&d.renders_3d.length>0&&e.jsx("div",{className:"file-preview-grid",children:d.renders_3d.map((N,O)=>e.jsx("div",{className:"file-preview-item",children:e.jsxs("div",{className:"file-preview-content",children:[e.jsx("img",{src:N.preview,alt:`3D Render ${O+1}`,className:"file-preview-image"}),e.jsxs("div",{className:"file-info",children:[e.jsx("span",{className:"file-name",children:N.name}),e.jsxs("span",{className:"file-size",children:[(N.size/1024/1024).toFixed(2)," MB"]})]}),e.jsx("button",{type:"button",className:"file-remove-btn",onClick:()=>C("renders_3d",O),children:""})]})},O))})]})]}),A&&e.jsx("div",{className:"upload-status",children:e.jsxs("div",{className:"upload-progress",children:[e.jsx("div",{className:"upload-spinner"}),e.jsx("span",{children:"Uploading files..."})]})})]}),e.jsxs("div",{className:"detail-section",children:[e.jsx("h3",{children:" Additional Details"}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Special Features:"}),e.jsx("textarea",{placeholder:"List any special features, smart home integration, solar panels, etc.",value:d.special_features,onChange:N=>v("special_features",N.target.value),rows:"3"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Construction Notes:"}),e.jsx("textarea",{placeholder:"Any specific construction notes or requirements",value:d.construction_notes,onChange:N=>v("construction_notes",N.target.value),rows:"3"})]})]})]})}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{className:"cancel-btn",onClick:a,disabled:o,children:"Cancel"}),e.jsx("button",{className:"submit-btn",onClick:S,disabled:o,children:o?"Submitting...":"Submit to Homeowner"})]})]})}):null},Lb=({content:t,children:a,position:s="top"})=>{const[i,o]=w.useState(!1),l={top:"info-popup-top",bottom:"info-popup-bottom",left:"info-popup-left",right:"info-popup-right"};return e.jsxs("div",{className:"info-popup-container",style:{position:"relative",display:"inline-block"},onMouseEnter:()=>o(!0),onMouseLeave:()=>o(!1),children:[a,i&&e.jsxs("div",{className:`info-popup ${l[s]}`,style:{position:"absolute",zIndex:1e3,backgroundColor:"#1f2937",color:"white",padding:"12px 16px",borderRadius:"8px",fontSize:"14px",lineHeight:"1.4",maxWidth:"300px",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)",...s==="top"&&{bottom:"100%",left:"50%",transform:"translateX(-50%)",marginBottom:"8px"},...s==="bottom"&&{top:"100%",left:"50%",transform:"translateX(-50%)",marginTop:"8px"},...s==="left"&&{right:"100%",top:"50%",transform:"translateY(-50%)",marginRight:"8px"},...s==="right"&&{left:"100%",top:"50%",transform:"translateY(-50%)",marginLeft:"8px"}},children:[t,e.jsx("div",{style:{position:"absolute",width:0,height:0,...s==="top"&&{top:"100%",left:"50%",transform:"translateX(-50%)",borderLeft:"6px solid transparent",borderRight:"6px solid transparent",borderTop:"6px solid #1f2937"},...s==="bottom"&&{bottom:"100%",left:"50%",transform:"translateX(-50%)",borderLeft:"6px solid transparent",borderRight:"6px solid transparent",borderBottom:"6px solid #1f2937"},...s==="left"&&{left:"100%",top:"50%",transform:"translateY(-50%)",borderTop:"6px solid transparent",borderBottom:"6px solid transparent",borderLeft:"6px solid #1f2937"},...s==="right"&&{right:"100%",top:"50%",transform:"translateY(-50%)",borderTop:"6px solid transparent",borderBottom:"6px solid transparent",borderRight:"6px solid #1f2937"}}})]})]})},dw=({notifications:t=[],onRemove:a})=>{const s=Array.isArray(t)?t:[];return e.jsx("div",{className:"notification-container",children:s.map(i=>e.jsxs("div",{className:`notification-toast ${i.type}`,onClick:()=>a(i.id),children:[e.jsxs("div",{className:"notification-icon",children:[i.type==="success"&&"",i.type==="error"&&"",i.type==="warning"&&"",i.type==="info"&&""]}),e.jsxs("div",{className:"notification-content",children:[e.jsx("div",{className:"notification-title",children:i.title}),i.message&&e.jsx("div",{className:"notification-message",children:i.message})]}),e.jsx("div",{className:"notification-close",children:""})]},i.id))})},_6=({isOpen:t,onClose:a,onComplete:s})=>{const[i,o]=w.useState(0),[l,d]=w.useState(!1),u=[{id:"welcome",title:"Welcome to House Plan Designer",content:"This professional tool helps architects create detailed house plans with precise measurements and room layouts. Let's take a quick tour to get you started.",target:null,position:"center"},{id:"header",title:"Control Panel",content:"The header contains all essential controls: Undo/Redo for changes, Delete for removing rooms, Save for local storage, and Submit to send plans to homeowners.",target:".drawer-header",position:"bottom"},{id:"plan-details",title:"Plan Information",content:"Start by entering your plan name, plot dimensions, and any notes. This information will be included in the final plan documentation.",target:".plan-details-section",position:"right"},{id:"statistics",title:"Real-time Statistics",content:"Monitor your plan's key metrics: total area, room count, and plot coverage percentage. These update automatically as you design.",target:".plan-stats",position:"right"},{id:"measurements",title:"Measurement System",content:"Choose between Layout (visual design) and Construction (actual building) dimensions. The scale ratio converts between them for accurate planning.",target:".measurement-controls",position:"right"},{id:"room-templates",title:"Room Templates",content:"Click any room template to add it to your plan. Each template comes with standard dimensions and can be customized after placement.",target:".room-templates",position:"right"},{id:"canvas",title:"Design Canvas",content:"This is your main workspace. Click rooms to select them, drag to move, and use the blue handles to resize. The grid helps with precise alignment.",target:".canvas-container",position:"left"},{id:"room-properties",title:"Room Customization",content:"When a room is selected, customize its dimensions, materials, and construction specifications in this panel.",target:".room-properties",position:"right",condition:()=>document.querySelector(".room-properties")},{id:"keyboard-shortcuts",title:"Keyboard Shortcuts",content:"Use Ctrl+Z to undo, Ctrl+Y to redo, and Delete key to remove selected rooms. These shortcuts speed up your workflow significantly.",target:null,position:"center"},{id:"completion",title:"You're Ready!",content:"You now know the basics of the House Plan Designer. Start by adding rooms, customize them, and save or submit your plans when ready.",target:null,position:"center"}];w.useEffect(()=>{t&&(d(!0),o(0))},[t]);const A=()=>{i<u.length-1?o(i+1):b()},p=()=>{i>0&&o(i-1)},m=()=>{b()},b=()=>{d(!1),setTimeout(()=>{s(),a()},300)},v=()=>{const N=u[i];return N.condition&&!N.condition()&&i<u.length-1?(o(i+1),null):N};if(!t||!l)return null;const x=v();if(!x)return null;const C=()=>{if(!x.target)return{position:"center"};const N=document.querySelector(x.target);if(!N)return{position:"center"};const O=N.getBoundingClientRect(),L=x.position||"bottom",te=window.innerHeight,G=window.innerWidth;return(O.bottom>te||O.top<0)&&(N.scrollIntoView({behavior:"smooth",block:"center",inline:"center"}),setTimeout(()=>{const X=N.getBoundingClientRect();S(X,L)},300)),D(O,L,te,G)},D=(N,O,L,te)=>{let E,Y,T;switch(O){case"top":E=Math.max(20,N.top-200-20),Y=Math.min(te-400-20,Math.max(20,N.left+N.width/2-400/2)),T="translate(0, 0)";break;case"bottom":E=Math.min(L-200-20,N.bottom+20),Y=Math.min(te-400-20,Math.max(20,N.left+N.width/2-400/2)),T="translate(0, 0)";break;case"left":E=Math.min(L-200-20,Math.max(20,N.top+N.height/2-200/2)),Y=Math.max(20,N.left-400-20),T="translate(0, 0)";break;case"right":E=Math.min(L-200-20,Math.max(20,N.top+N.height/2-200/2)),Y=Math.min(te-400-20,N.right+20),T="translate(0, 0)";break;default:return{position:"center"}}return{top:E,left:Y,transform:T}},S=(N,O)=>{const L=document.querySelector(".tour-tooltip");if(L&&!L.classList.contains("tour-tooltip-center")){const te=D(N,O,window.innerHeight,window.innerWidth);Object.assign(L.style,te)}},_=x.position==="center"?{}:C();return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"tour-overlay",onClick:m}),x.target&&e.jsx("div",{className:"tour-highlight","data-target":x.target}),e.jsxs("div",{className:`tour-tooltip ${x.position==="center"?"tour-tooltip-center":""}`,style:_,children:[e.jsxs("div",{className:"tour-tooltip-header",children:[e.jsx("h3",{children:x.title}),e.jsxs("div",{className:"tour-step-indicator",children:[i+1," of ",u.length]})]}),e.jsx("div",{className:"tour-tooltip-content",children:e.jsx("p",{children:x.content})}),e.jsxs("div",{className:"tour-tooltip-actions",children:[e.jsx("button",{onClick:m,className:"tour-btn tour-btn-skip",children:"Skip Tour"}),e.jsxs("div",{className:"tour-navigation",children:[i>0&&e.jsx("button",{onClick:p,className:"tour-btn tour-btn-prev",children:"Previous"}),e.jsx("button",{onClick:A,className:"tour-btn tour-btn-next",children:i===u.length-1?"Finish":"Next"})]})]}),e.jsx("div",{className:"tour-progress",children:e.jsx("div",{className:"tour-progress-bar",style:{width:`${(i+1)/u.length*100}%`}})})]})]})},N6=({isOpen:t,onClose:a})=>{const[s,i]=w.useState("getting-started"),[o,l]=w.useState(""),[d,u]=w.useState({}),A=b=>{u(v=>({...v,[b]:!v[b]}))},p={"getting-started":{title:"Getting Started",icon:"",content:e.jsxs("div",{className:"help-content",children:[e.jsxs("div",{className:"help-hero",children:[e.jsx("h3",{children:"Welcome to House Plan Designer"}),e.jsx("p",{children:"Create professional architectural plans with precision and efficiency."})]}),e.jsxs("div",{className:"quick-start-cards",children:[e.jsxs("div",{className:"quick-start-card",children:[e.jsx("div",{className:"card-icon",children:""}),e.jsx("h4",{children:"1. Plan Details"}),e.jsx("p",{children:"Enter project name and plot dimensions"})]}),e.jsxs("div",{className:"quick-start-card",children:[e.jsx("div",{className:"card-icon",children:""}),e.jsx("h4",{children:"2. Add Rooms"}),e.jsx("p",{children:"Click templates to add rooms to canvas"})]}),e.jsxs("div",{className:"quick-start-card",children:[e.jsx("div",{className:"card-icon",children:""}),e.jsx("h4",{children:"3. Customize"}),e.jsx("p",{children:"Adjust dimensions and materials"})]}),e.jsxs("div",{className:"quick-start-card",children:[e.jsx("div",{className:"card-icon",children:""}),e.jsx("h4",{children:"4. Save & Submit"}),e.jsx("p",{children:"Save locally or submit to homeowner"})]})]}),e.jsxs("div",{className:"interactive-demo",children:[e.jsx("h4",{children:"Try It Now"}),e.jsxs("div",{className:"demo-buttons",children:[e.jsx("button",{className:"demo-btn",onClick:()=>i("interface"),children:"Explore Interface "}),e.jsx("button",{className:"demo-btn secondary",onClick:()=>i("measurements"),children:"Learn Measurements "})]})]})]})},interface:{title:"Interface Guide",icon:"",content:e.jsx("div",{className:"help-content",children:e.jsxs("div",{className:"interface-overview",children:[e.jsx("h3",{children:"Interface Overview"}),e.jsxs("div",{className:"interface-section",children:[e.jsxs("div",{className:"collapsible-header",onClick:()=>A("header-controls"),children:[e.jsx("span",{className:"section-icon",children:""}),e.jsx("h4",{children:"Header Controls"}),e.jsx("span",{className:`expand-icon ${d["header-controls"]?"expanded":""}`,children:""})]}),d["header-controls"]&&e.jsx("div",{className:"collapsible-content",children:e.jsxs("div",{className:"control-grid",children:[e.jsxs("div",{className:"control-item",children:[e.jsx("span",{className:"control-icon",children:""}),e.jsxs("div",{children:[e.jsx("strong",{children:"Tour"}),e.jsx("p",{children:"Launch guided walkthrough"})]})]}),e.jsxs("div",{className:"control-item",children:[e.jsx("span",{className:"control-icon",children:""}),e.jsxs("div",{children:[e.jsx("strong",{children:"Help"}),e.jsx("p",{children:"Open this user manual"})]})]}),e.jsxs("div",{className:"control-item",children:[e.jsx("span",{className:"control-icon",children:""}),e.jsxs("div",{children:[e.jsx("strong",{children:"Undo/Redo"}),e.jsx("p",{children:"Navigate design history"})]})]}),e.jsxs("div",{className:"control-item",children:[e.jsx("span",{className:"control-icon",children:""}),e.jsxs("div",{children:[e.jsx("strong",{children:"Delete"}),e.jsx("p",{children:"Remove selected rooms"})]})]})]})})]}),e.jsxs("div",{className:"interface-section",children:[e.jsxs("div",{className:"collapsible-header",onClick:()=>A("sidebar-panels"),children:[e.jsx("span",{className:"section-icon",children:""}),e.jsx("h4",{children:"Sidebar Panels"}),e.jsx("span",{className:`expand-icon ${d["sidebar-panels"]?"expanded":""}`,children:""})]}),d["sidebar-panels"]&&e.jsx("div",{className:"collapsible-content",children:e.jsxs("div",{className:"panel-list",children:[e.jsxs("div",{className:"panel-item",children:[e.jsx("strong",{children:"Plan Details"})," - Project information and dimensions"]}),e.jsxs("div",{className:"panel-item",children:[e.jsx("strong",{children:"Statistics"})," - Real-time metrics and coverage"]}),e.jsxs("div",{className:"panel-item",children:[e.jsx("strong",{children:"Measurements"})," - Dimension controls and scale"]}),e.jsxs("div",{className:"panel-item",children:[e.jsx("strong",{children:"Room Templates"})," - Pre-configured room types"]}),e.jsxs("div",{className:"panel-item",children:[e.jsx("strong",{children:"Room Properties"})," - Detailed customization"]})]})})]})]})})},measurements:{title:"Measurement System",icon:"",content:e.jsxs("div",{className:"help-content",children:[e.jsx("h3",{children:"Understanding Measurements"}),e.jsxs("div",{className:"measurement-comparison",children:[e.jsxs("div",{className:"measurement-card layout",children:[e.jsxs("div",{className:"card-header",children:[e.jsx("span",{className:"measurement-icon",children:""}),e.jsx("h4",{children:"Layout Dimensions"})]}),e.jsxs("div",{className:"card-content",children:[e.jsx("p",{children:"Visual representation for design convenience"}),e.jsxs("ul",{children:[e.jsx("li",{children:"Optimized for screen display"}),e.jsx("li",{children:"Easy to work with during design"}),e.jsx("li",{children:"Automatically converted"})]})]})]}),e.jsxs("div",{className:"measurement-card construction",children:[e.jsxs("div",{className:"card-header",children:[e.jsx("span",{className:"measurement-icon",children:""}),e.jsx("h4",{children:"Construction Dimensions"})]}),e.jsxs("div",{className:"card-content",children:[e.jsx("p",{children:"Actual building measurements for contractors"}),e.jsxs("ul",{children:[e.jsx("li",{children:"Real-world accurate"}),e.jsx("li",{children:"Used for material calculations"}),e.jsx("li",{children:"Includes construction tolerances"})]})]})]})]}),e.jsxs("div",{className:"scale-calculator",children:[e.jsx("h4",{children:"Scale Ratio Calculator"}),e.jsx("div",{className:"calculator-content",children:e.jsxs("div",{className:"ratio-examples",children:[e.jsxs("div",{className:"ratio-item",children:[e.jsx("span",{className:"ratio-value",children:"1.0"}),e.jsx("span",{className:"ratio-desc",children:"Same size (Layout = Construction)"})]}),e.jsxs("div",{className:"ratio-item active",children:[e.jsx("span",{className:"ratio-value",children:"1.2"}),e.jsx("span",{className:"ratio-desc",children:"20% larger construction (Default)"})]}),e.jsxs("div",{className:"ratio-item",children:[e.jsx("span",{className:"ratio-value",children:"1.5"}),e.jsx("span",{className:"ratio-desc",children:"50% larger construction"})]})]})})]})]})},shortcuts:{title:"Keyboard Shortcuts",icon:"",content:e.jsxs("div",{className:"help-content",children:[e.jsx("h3",{children:"Keyboard Shortcuts"}),e.jsxs("div",{className:"shortcuts-categories",children:[e.jsxs("div",{className:"shortcut-category",children:[e.jsx("h4",{children:" Design Actions"}),e.jsxs("div",{className:"shortcut-list",children:[e.jsxs("div",{className:"shortcut-item",children:[e.jsxs("div",{className:"shortcut-keys",children:[e.jsx("kbd",{children:"Ctrl"})," + ",e.jsx("kbd",{children:"Z"})]}),e.jsx("span",{className:"shortcut-desc",children:"Undo last action"})]}),e.jsxs("div",{className:"shortcut-item",children:[e.jsxs("div",{className:"shortcut-keys",children:[e.jsx("kbd",{children:"Ctrl"})," + ",e.jsx("kbd",{children:"Y"})]}),e.jsx("span",{className:"shortcut-desc",children:"Redo last undone action"})]}),e.jsxs("div",{className:"shortcut-item",children:[e.jsx("div",{className:"shortcut-keys",children:e.jsx("kbd",{children:"Delete"})}),e.jsx("span",{className:"shortcut-desc",children:"Delete selected room"})]}),e.jsxs("div",{className:"shortcut-item",children:[e.jsx("div",{className:"shortcut-keys",children:e.jsx("kbd",{children:"Esc"})}),e.jsx("span",{className:"shortcut-desc",children:"Deselect all rooms"})]})]})]}),e.jsxs("div",{className:"shortcut-category",children:[e.jsx("h4",{children:" File Operations"}),e.jsxs("div",{className:"shortcut-list",children:[e.jsxs("div",{className:"shortcut-item",children:[e.jsxs("div",{className:"shortcut-keys",children:[e.jsx("kbd",{children:"Ctrl"})," + ",e.jsx("kbd",{children:"S"})]}),e.jsx("span",{className:"shortcut-desc",children:"Save plan"})]}),e.jsxs("div",{className:"shortcut-item",children:[e.jsx("div",{className:"shortcut-keys",children:e.jsx("kbd",{children:"F1"})}),e.jsx("span",{className:"shortcut-desc",children:"Open help"})]})]})]})]})]})},tips:{title:"Pro Tips",icon:"",content:e.jsxs("div",{className:"help-content",children:[e.jsx("h3",{children:"Professional Tips"}),e.jsxs("div",{className:"tips-grid",children:[e.jsxs("div",{className:"tip-card",children:[e.jsx("div",{className:"tip-icon",children:""}),e.jsx("h4",{children:"Speed Up Your Workflow"}),e.jsx("p",{children:"Use keyboard shortcuts and save frequently. The undo/redo system keeps 50 states in memory."})]}),e.jsxs("div",{className:"tip-card",children:[e.jsx("div",{className:"tip-icon",children:""}),e.jsx("h4",{children:"Monitor Statistics"}),e.jsx("p",{children:"Keep an eye on the real-time statistics panel to ensure your design meets requirements."})]}),e.jsxs("div",{className:"tip-card",children:[e.jsx("div",{className:"tip-icon",children:""}),e.jsx("h4",{children:"Precision Placement"}),e.jsx("p",{children:"Use the grid system for precise alignment. Rooms automatically snap to grid lines."})]}),e.jsxs("div",{className:"tip-card",children:[e.jsx("div",{className:"tip-icon",children:""}),e.jsx("h4",{children:"Iterative Design"}),e.jsx("p",{children:"Don't be afraid to experiment. The undo system lets you try different approaches safely."})]})]}),e.jsxs("div",{className:"best-practices",children:[e.jsx("h4",{children:"Best Practices Checklist"}),e.jsxs("div",{className:"checklist",children:[e.jsxs("label",{className:"checklist-item",children:[e.jsx("input",{type:"checkbox"}),e.jsx("span",{children:"Start with major rooms (living, dining, bedrooms)"})]}),e.jsxs("label",{className:"checklist-item",children:[e.jsx("input",{type:"checkbox"}),e.jsx("span",{children:"Verify construction dimensions before finalizing"})]}),e.jsxs("label",{className:"checklist-item",children:[e.jsx("input",{type:"checkbox"}),e.jsx("span",{children:"Add detailed notes for special requirements"})]}),e.jsxs("label",{className:"checklist-item",children:[e.jsx("input",{type:"checkbox"}),e.jsx("span",{children:"Save regularly and before major changes"})]}),e.jsxs("label",{className:"checklist-item",children:[e.jsx("input",{type:"checkbox"}),e.jsx("span",{children:"Review total area and coverage percentages"})]})]})]})]})}},m=Object.entries(p).filter(([b,v])=>v.title.toLowerCase().includes(o.toLowerCase())||b.includes(o.toLowerCase()));return t?e.jsx("div",{className:"help-modal-overlay",onClick:a,children:e.jsxs("div",{className:"help-modal",onClick:b=>b.stopPropagation(),children:[e.jsxs("div",{className:"help-header",children:[e.jsxs("div",{className:"help-title-section",children:[e.jsx("h2",{children:"House Plan Designer Guide"}),e.jsx("div",{className:"help-search",children:e.jsx("input",{type:"text",placeholder:"Search help topics...",value:o,onChange:b=>l(b.target.value),className:"help-search-input"})})]}),e.jsx("button",{className:"help-close-btn",onClick:a,children:""})]}),e.jsxs("div",{className:"help-body",children:[e.jsx("div",{className:"help-sidebar",children:m.map(([b,v])=>e.jsxs("button",{className:`help-nav-item ${s===b?"active":""}`,onClick:()=>i(b),children:[e.jsx("span",{className:"help-nav-icon",children:v.icon}),e.jsx("span",{className:"help-nav-title",children:v.title})]},b))}),e.jsx("div",{className:"help-content-area",children:p[s]?.content})]})]})}):null},Aw=()=>{const[t,a]=w.useState([]),s=w.useCallback(p=>{const m=Date.now()+Math.random(),b={id:m,type:"info",title:"",message:"",duration:5e3,...p};return a(v=>[...v,b]),b.duration>0&&setTimeout(()=>{i(m)},b.duration),m},[]),i=w.useCallback(p=>{a(m=>m.filter(b=>b.id!==p))},[]),o=w.useCallback(()=>{a([])},[]),l=w.useCallback((p,m,b=4e3)=>s({type:"success",title:p,message:m,duration:b}),[s]),d=w.useCallback((p,m,b=6e3)=>s({type:"error",title:p,message:m,duration:b}),[s]),u=w.useCallback((p,m,b=5e3)=>s({type:"warning",title:p,message:m,duration:b}),[s]),A=w.useCallback((p,m,b=4e3)=>s({type:"info",title:p,message:m,duration:b}),[s]);return{notifications:t,addNotification:s,removeNotification:i,clearAllNotifications:o,showSuccess:l,showError:d,showWarning:u,showInfo:A}},B6=({layoutRequestId:t=null,requestInfo:a=null,existingPlan:s=null,onSave:i,onCancel:o})=>{const l=w.useRef(null),[d,u]=w.useState(null),[A,p]=w.useState("select"),[m,b]=w.useState(null),[v,x]=w.useState([]),[C,D]=w.useState(!1),[S,_]=w.useState(!1),[N,O]=w.useState(!1),[L,te]=w.useState({x:0,y:0}),[G,X]=w.useState(null),[U,E]=w.useState(!0),[Y,T]=w.useState("both"),[Q,q]=w.useState([]),[ne,R]=w.useState(-1),[z,ee]=w.useState(!1),{notifications:le,removeNotification:Be,showSuccess:$,showError:ue,showWarning:k,showInfo:I}=Aw(),[H,re]=w.useState(null),[J,V]=w.useState(null),[oe,K]=w.useState(!1),[Ne,Ee]=w.useState(!1),[st,ut]=w.useState(!1),[Ge,_e]=w.useState(!1),[Et,Mt]=w.useState(!0),[Ze,Je]=w.useState(null),[mt,ve]=w.useState(null),[et,Oe]=w.useState(!1),[kt,xt]=w.useState(!1),[lt,Ut]=w.useState(!1),[_t,Nt]=w.useState(1),[qt,Bt]=w.useState(1),[Xt,ta]=w.useState({1:"Ground Floor"}),[ie,at]=w.useState(()=>{if(s){let Ae=s.plan_data;if(typeof Ae=="string")try{Ae=JSON.parse(Ae)}catch(xe){console.error("Error parsing existing plan data:",xe),Ae={rooms:[],scale_ratio:1.2}}return{plan_name:s.plan_name||"",plot_width:s.plot_width||100,plot_height:s.plot_height||100,rooms:Ae?.rooms||[],notes:s.notes||"",scale_ratio:Ae?.scale_ratio||1.2}}return{plan_name:"",plot_width:100,plot_height:100,rooms:[],notes:"",scale_ratio:1.2}}),Ot=20,Ct=20,ia=8;w.useEffect(()=>{va(),(t||a)&&Pa(),localStorage.getItem("housePlanTourCompleted")||(_e(!0),setTimeout(()=>Ee(!0),1e3))},[t,a]),w.useEffect(()=>{const Ae=setTimeout(()=>{ca()},100);return()=>clearTimeout(Ae)},[]),w.useEffect(()=>{const Ae=xe=>{if(oe)return xe.preventDefault(),xe.returnValue="You have unsaved changes. Are you sure you want to leave?","You have unsaved changes. Are you sure you want to leave?"};return window.addEventListener("beforeunload",Ae),()=>window.removeEventListener("beforeunload",Ae)},[oe]),w.useEffect(()=>{if(s){console.log("Loading existing plan:",s);let Ae=s.plan_data;if(typeof Ae=="string")try{Ae=JSON.parse(Ae)}catch(Re){console.error("Error parsing existing plan data:",Re),Ae={rooms:[],scale_ratio:1.2}}const xe={plan_name:s.plan_name||"",plot_width:s.plot_width||100,plot_height:s.plot_height||100,rooms:Ae?.rooms||[],notes:s.notes||"",scale_ratio:Ae?.scale_ratio||1.2};Ae?.floors?(Bt(Ae.floors.total_floors||1),Nt(Ae.floors.current_floor||1),ta(Ae.floors.floor_names||{1:"Ground Floor"})):(Bt(1),Nt(1),ta({1:"Ground Floor"})),console.log("Setting plan data:",xe),at(xe),q([]),R(-1),K(!1),V(s.updated_at?new Date(s.updated_at):null),setTimeout(()=>{ca()},200)}},[s?.id,s?.updated_at]);const ca=w.useCallback(()=>{if(z)return;const Ae={rooms:JSON.parse(JSON.stringify(ie.rooms)),plot_width:ie.plot_width,plot_height:ie.plot_height,scale_ratio:ie.scale_ratio,timestamp:Date.now()};q(xe=>{const Re=xe.slice(0,ne+1);return Re.push(Ae),Re.length>50&&Re.shift(),Re}),R(xe=>Math.min(xe+1,49))},[ie.rooms,ie.plot_width,ie.plot_height,ie.scale_ratio,ne,z]),Za=w.useCallback(()=>{if(ne>0){ee(!0);const Ae=Q[ne-1];at(xe=>({...xe,rooms:JSON.parse(JSON.stringify(Ae.rooms)),plot_width:Ae.plot_width,plot_height:Ae.plot_height,scale_ratio:Ae.scale_ratio})),R(xe=>xe-1),b(null),setTimeout(()=>ee(!1),100),I("Action Undone",`Reverted to previous state (${ne}/${Q.length})`)}},[Q,ne,I]),os=w.useCallback(()=>{if(ne<Q.length-1){ee(!0);const Ae=Q[ne+1];at(xe=>({...xe,rooms:JSON.parse(JSON.stringify(Ae.rooms)),plot_width:Ae.plot_width,plot_height:Ae.plot_height,scale_ratio:Ae.scale_ratio})),R(xe=>xe+1),b(null),setTimeout(()=>ee(!1),100),I("Action Redone",`Restored to next state (${ne+2}/${Q.length})`)}},[Q,ne,I]);w.useEffect(()=>{const Ae=xe=>{(xe.ctrlKey||xe.metaKey)&&(xe.key==="z"&&!xe.shiftKey?(xe.preventDefault(),Za()):(xe.key==="z"&&xe.shiftKey||xe.key==="y")&&(xe.preventDefault(),os())),xe.key==="Delete"&&m!==null&&(xe.preventDefault(),wa())};return document.addEventListener("keydown",Ae),()=>document.removeEventListener("keydown",Ae)},[Za,os,m]),w.useEffect(()=>{if(!z&&ie.rooms.length>=0){const Ae=setTimeout(()=>{ca()},500);return()=>clearTimeout(Ae)}},[ie.rooms,ca,z]),w.useEffect(()=>{if(ie.plan_name&&ie.rooms.length>0&&!z){K(!0),H&&clearTimeout(H);const Ae=setTimeout(()=>{gs()},3e4);re(Ae)}return()=>{H&&clearTimeout(H)}},[ie,z]);const Ba=()=>{d.strokeStyle="#e8e8e8",d.lineWidth=.5;const Ae=l.current;for(let xe=0;xe<=Ae.width;xe+=Ot)d.beginPath(),d.moveTo(xe,0),d.lineTo(xe,Ae.height),d.stroke();for(let xe=0;xe<=Ae.height;xe+=Ot)d.beginPath(),d.moveTo(0,xe),d.lineTo(Ae.width,xe),d.stroke();d.strokeStyle="#d0d0d0",d.lineWidth=1;for(let xe=0;xe<=Ae.width;xe+=Ot*5)d.beginPath(),d.moveTo(xe,0),d.lineTo(xe,Ae.height),d.stroke();for(let xe=0;xe<=Ae.height;xe+=Ot*5)d.beginPath(),d.moveTo(0,xe),d.lineTo(Ae.width,xe),d.stroke()},xa=()=>{d.strokeStyle="#2c3e50",d.lineWidth=3,d.setLineDash([]);const Ae=ie.plot_width*Ct,xe=ie.plot_height*Ct;d.strokeRect(20,20,Ae,xe),d.fillStyle="#2c3e50",d.font="bold 14px Arial",d.textAlign="center",d.fillText(`${ie.plot_width}'`,20+Ae/2,15),d.save(),d.translate(10,20+xe/2),d.rotate(-Math.PI/2),d.fillText(`${ie.plot_height}'`,0,0),d.restore()},Dt=(Ae,xe)=>{const Re=Ae[0]==="#",nt=Re?Ae.slice(1):Ae,vt=parseInt(nt,16);let ot=(vt>>16)+xe,Kt=(vt>>8&255)+xe,aa=(vt&255)+xe;return ot=ot>255?255:ot<0?0:ot,Kt=Kt>255?255:Kt<0?0:Kt,aa=aa>255?255:aa<0?0:aa,(Re?"#":"")+(ot<<16|Kt<<8|aa).toString(16).padStart(6,"0")},ye=Ae=>({master_bedroom:"#c8e6c9",bedroom:"#dcedc8",bedrooms:"#dcedc8",guest_bedroom:"#e8f5e8",kids_bedroom:"#f1f8e9",master_bathroom:"#b3e5fc",bathroom:"#e1f5fe",bathrooms:"#e1f5fe",attached_bathroom:"#e3f2fd",powder_room:"#f0f8ff",kitchen:"#ffcdd2",modular_kitchen:"#f8bbd9",pantry:"#fce4ec",living_room:"#ffe0b2",family_room:"#ffcc80",drawing_room:"#fff3e0",tv_lounge:"#ffe0b2",dining_room:"#e1bee7",breakfast_area:"#f3e5f5",utility_room:"#e0e0e0",laundry_room:"#eeeeee",store_room:"#f5f5f5",servant_room:"#e8eaf6",balcony:"#c8e6c9",terrace:"#dcedc8",garden:"#e8f5e8",courtyard:"#f1f8e9",corridor:"#fff9c4",hallway:"#fff59d",passage:"#ffecb3",entrance_hall:"#ffe082",foyer:"#ffd54f",staircase:"#d7ccc8",spiral_staircase:"#bcaaa4",elevator_shaft:"#a1887f",column:"#8d6e63",beam_area:"#795548",study_room:"#e8eaf6",home_office:"#c5cae9",pooja_room:"#d1c4e9",prayer_room:"#b39ddb",home_theater:"#9575cd",gym:"#7e57c2",library:"#673ab7",music_room:"#5e35b1",workshop:"#512da8",safe_room:"#4527a0"})[Ae]||"#e3f2fd",Ce=(Ae,xe)=>{if(!Ae||typeof Ae.x!="number"||typeof Ae.y!="number"||!isFinite(Ae.layout_width)||!isFinite(Ae.layout_height)||Ae.layout_width<=0||Ae.layout_height<=0){console.warn("Invalid room data:",Ae);return}const Re=Ae.x+20,nt=Ae.y+20,vt=Ae.layout_width*Ct,ot=Ae.layout_height*Ct,Kt=Ae.rotation||0;if(!isFinite(vt)||!isFinite(ot)||vt<=0||ot<=0){console.warn("Invalid calculated dimensions:",{width:vt,height:ot,room:Ae});return}const aa=Re+vt/2,da=nt+ot/2,ea=mt&&(Ae.type===mt||Ae.name.toLowerCase().includes(mt.replace(/_/g," ")));d.save(),Kt!==0&&(d.translate(aa,da),d.rotate(Kt*Math.PI/180),d.translate(-aa,-da));let Gt=Ae.color||"#e3f2fd";ea&&(Gt="#fef3c7");const js=d.createLinearGradient(Re,nt,Re+vt,nt+ot);if(js.addColorStop(0,Gt),js.addColorStop(1,Dt(Gt,ea?-20:-10)),d.fillStyle=js,d.fillRect(Re,nt,vt,ot),d.strokeStyle=xe?"#1976d2":ea?"#f59e0b":"#666",d.lineWidth=xe?3:ea?2:1,d.setLineDash([]),d.strokeRect(Re,nt,vt,ot),ea&&!xe&&(d.shadowColor="#f59e0b",d.shadowBlur=8,d.strokeRect(Re,nt,vt,ot),d.shadowBlur=0),d.fillStyle=ea?"#92400e":"#333",d.font="bold 12px Arial",d.textAlign="center",d.fillText(Ae.name,aa,da-15),Kt!==0&&(d.font="9px Arial",d.fillStyle="#ff6b6b",d.fillText(` ${Kt}`,aa,da-30)),(Y==="layout"||Y==="both")&&(d.font="10px Arial",d.fillStyle=ea?"#92400e":"#666",d.fillText(`Layout: ${Ae.layout_width}'  ${Ae.layout_height}'`,aa,da)),Y==="actual"||Y==="both"){d.font="10px Arial",d.fillStyle="#d32f2f";const Ts=(Ae.actual_width||Ae.layout_width*ie.scale_ratio).toFixed(1),bn=(Ae.actual_height||Ae.layout_height*ie.scale_ratio).toFixed(1);d.fillText(`Actual: ${Ts}'  ${bn}'`,aa,da+15)}d.font="9px Arial",d.fillStyle=ea?"#92400e":"#888";const hn=(Ae.layout_width*Ae.layout_height).toFixed(1),Kn=((Ae.actual_width||Ae.layout_width*ie.scale_ratio)*(Ae.actual_height||Ae.layout_height*ie.scale_ratio)).toFixed(1);Y==="both"?d.fillText(`L: ${hn} sq ft | A: ${Kn} sq ft`,aa,da+30):Y==="actual"?d.fillText(`${Kn} sq ft`,aa,da+30):d.fillText(`${hn} sq ft`,aa,da+30),d.restore(),xe&&(Ve(Re,nt,vt,ot),gt(Re,nt,vt,ot,Kt))},Ve=(Ae,xe,Re,nt)=>{d.fillStyle="#1976d2",d.strokeStyle="#fff",d.lineWidth=2,[{x:Ae+Re-ia/2,y:xe+nt/2-ia/2,cursor:"e-resize",type:"right"},{x:Ae+Re/2-ia/2,y:xe+nt-ia/2,cursor:"s-resize",type:"bottom"},{x:Ae+Re-ia/2,y:xe+nt-ia/2,cursor:"se-resize",type:"corner"}].forEach(ot=>{d.fillRect(ot.x,ot.y,ia,ia),d.strokeRect(ot.x,ot.y,ia,ia)})},gt=(Ae,xe,Re,nt,vt)=>{const ot=Ae+Re/2,Kt=xe+nt/2,aa=Math.max(Re,nt)/2+20,da=ot+Math.cos((vt-90)*Math.PI/180)*aa,ea=Kt+Math.sin((vt-90)*Math.PI/180)*aa;d.strokeStyle="#ff6b6b",d.lineWidth=2,d.setLineDash([5,5]),d.beginPath(),d.moveTo(ot,Kt),d.lineTo(da,ea),d.stroke(),d.setLineDash([]),d.fillStyle="#ff6b6b",d.strokeStyle="#fff",d.lineWidth=2,d.beginPath(),d.arc(da,ea,ia,0,2*Math.PI),d.fill(),d.stroke(),d.fillStyle="#fff",d.font="12px Arial",d.textAlign="center",d.fillText("",da,ea+4)},Qt=()=>{U&&(d.strokeStyle="#ff6b6b",d.lineWidth=1,d.setLineDash([2,2]),d.font="10px Arial",d.fillStyle="#ff6b6b",ie.rooms.forEach(Ae=>{const xe=Ae.x+20,Re=Ae.y+20,nt=Ae.layout_width*Ct,vt=Ae.layout_height*Ct;d.beginPath(),d.moveTo(xe,Re-15),d.lineTo(xe+nt,Re-15),d.stroke(),d.beginPath(),d.moveTo(xe-15,Re),d.lineTo(xe-15,Re+vt),d.stroke(),d.textAlign="center";const ot=(Ae.actual_width||Ae.layout_width*ie.scale_ratio).toFixed(1),Kt=(Ae.actual_height||Ae.layout_height*ie.scale_ratio).toFixed(1);d.fillText(`${ot}'`,xe+nt/2,Re-20),d.save(),d.translate(xe-20,Re+vt/2),d.rotate(-Math.PI/2),d.fillText(`${Kt}'`,0,0),d.restore()}))},ja=w.useCallback(()=>{if(!d||!l.current)return;const Ae=l.current;d.clearRect(0,0,Ae.width,Ae.height),Ba(),xa(),qa().forEach(Re=>{const nt=ie.rooms.findIndex(vt=>vt.id===Re.id);Ce(Re,nt===m)}),U&&Qt()},[d,ie,m,U,Y,mt]);w.useEffect(()=>{if(l.current){const Ae=l.current,xe=Ae.parentElement,Re=xe.clientWidth-32,nt=xe.clientHeight-32,vt=ie.plot_width*20+100,ot=ie.plot_height*20+100,Kt=Math.max(vt,800),aa=Math.max(ot,600),da=Math.max(Re,Kt),ea=Math.max(nt,aa);Ae.width=da,Ae.height=ea;const Gt=Ae.getContext("2d");u(Gt),ja()}},[ie,m,U,Y,mt,ja]),w.useEffect(()=>{const Ae=()=>{if(l.current){const xe=l.current,Re=xe.parentElement,nt=Re.clientWidth-32,vt=Re.clientHeight-32,ot=ie.plot_width*20+100,Kt=ie.plot_height*20+100,aa=Math.max(ot,800),da=Math.max(Kt,600),ea=Math.max(nt,aa),Gt=Math.max(vt,da);xe.width=ea,xe.height=Gt,ja()}};return window.addEventListener("resize",Ae),()=>window.removeEventListener("resize",Ae)},[ja,ie.plot_width,ie.plot_height]);const va=async()=>{try{const xe=await(await fetch("/buildhub/backend/api/architect/get_room_templates.php")).json();xe.success&&x(xe.grouped)}catch(Ae){console.error("Error loading room templates:",Ae)}},_a=Ae=>{if(!Ae)return"N/A";const xe=Number(Ae);return xe>=1e7?`${(xe/1e7).toFixed(1)} Cr`:xe>=1e5?`${(xe/1e5).toFixed(1)} L`:`${xe.toLocaleString()}`},Na=Ae=>{if(!Ae?.floor_rooms)return null;const xe={};return Object.values(Ae.floor_rooms).forEach(Re=>{Object.entries(Re).forEach(([nt,vt])=>{xe[nt]=(xe[nt]||0)+vt})}),xe},Pa=async()=>{try{let Ae=a;if(!Ae&&t){const Re=await(await fetch("/buildhub/backend/api/architect/get_assigned_requests.php")).json();Re.success&&(Ae=Re.assignments?.find(nt=>nt.layout_request_id===t||nt.layout_request?.id===t))}if(Ae&&Ae.layout_request){const xe=Ae.layout_request;let Re=null;if(xe.requirements)try{Re=typeof xe.requirements=="string"?JSON.parse(xe.requirements):xe.requirements}catch(nt){console.error("Error parsing requirements:",nt)}if(Je({...xe,homeowner_name:Ae.homeowner?.name||Ae.homeowner?.first_name+" "+Ae.homeowner?.last_name||"Client",parsed_requirements:Re}),at(nt=>({...nt,plan_name:`${Ae.homeowner?.name||"Client"} House Plan`,plot_width:parseFloat(xe.plot_size)||100,plot_height:parseFloat(xe.plot_size)||100,scale_ratio:nt.scale_ratio||1.2})),Re){const nt=[];let vt=1,ot=50;const Kt=1.2;if(Re.floor_rooms)Object.entries(Re.floor_rooms).forEach(([aa,da])=>{const ea=parseInt(aa.replace("floor",""));let Gt=50;Object.entries(da).forEach(([js,hn])=>{const Kn=typeof hn=="number"?hn:1;for(let Ts=0;Ts<Kn;Ts++){const bn=Kn>1?`${js.replace(/_/g," ")} ${Ts+1}`:js.replace(/_/g," ");nt.push({id:vt++,name:bn,type:js,x:Gt,y:ot+(ea-1)*200,layout_width:10,layout_height:10,actual_width:10*Kt,actual_height:10*Kt,rotation:0,color:ye(js),floor:ea}),Gt+=140,Gt>400&&(Gt=50,ot+=120)}})});else if(Re.rooms){const aa=typeof Re.rooms=="string"?Re.rooms.split(",").map(ea=>ea.trim()):Re.rooms;let da=50;aa.forEach(ea=>{nt.push({id:vt++,name:ea.replace(/_/g," "),type:ea,x:da,y:ot,layout_width:10,layout_height:10,actual_width:10*Kt,actual_height:10*Kt,rotation:0,color:ye(ea),floor:1}),da+=140,da>400&&(da=50,ot+=120)})}nt.length>0&&(at(aa=>({...aa,rooms:nt})),I("Rooms Pre-loaded",`Added ${nt.length} rooms based on client requirements`))}}}catch(Ae){console.error("Error loading request info:",Ae)}},ls=Ae=>Math.round(Ae/Ot)*Ot,cs=(Ae,xe,Re,nt,vt,ot,Kt)=>{if(Kt===0)return Ae>=Re&&Ae<=Re+vt&&xe>=nt&&xe<=nt+ot;const aa=Re+vt/2,da=nt+ot/2,ea=Ae-aa,Gt=xe-da,js=-Kt*Math.PI/180,hn=ea*Math.cos(js)-Gt*Math.sin(js),Kn=ea*Math.sin(js)+Gt*Math.cos(js),Ts=hn+aa,bn=Kn+da;return Ts>=Re&&Ts<=Re+vt&&bn>=nt&&bn<=nt+ot},Gs=Ae=>{const xe=l.current.getBoundingClientRect();return{x:Ae.clientX-xe.left,y:Ae.clientY-xe.top}},yn=(Ae,xe,Re,nt,vt,ot)=>{const Kt=[{x:Re+vt-ia/2,y:nt+ot/2-ia/2,type:"right"},{x:Re+vt/2-ia/2,y:nt+ot-ia/2,type:"bottom"},{x:Re+vt-ia/2,y:nt+ot-ia/2,type:"corner"}];for(let aa of Kt)if(Ae>=aa.x&&Ae<=aa.x+ia&&xe>=aa.y&&xe<=aa.y+ia)return aa.type;return null},ge=(Ae,xe,Re,nt,vt,ot,Kt)=>{const aa=Re+vt/2,da=nt+ot/2,ea=Math.max(vt,ot)/2+20,Gt=aa+Math.cos((Kt-90)*Math.PI/180)*ea,js=da+Math.sin((Kt-90)*Math.PI/180)*ea;return Math.sqrt(Math.pow(Ae-Gt,2)+Math.pow(xe-js,2))<=ia?"rotate":null},it=Ae=>{if(!W||m===null)return;const xe=Gs(Ae),Re=ie.rooms[m];if(!Re)return;const nt=Re.x+20,vt=Re.y+20,ot=Re.layout_width*Ct,Kt=Re.layout_height*Ct,aa=nt+ot/2,da=vt+Kt/2,ea=Math.atan2(xe.y-da,xe.x-aa)*180/Math.PI,Gt=Math.round(ea/15)*15;Wt({rotation:Gt})},[$e,zt]=w.useState(null),[St,yt]=w.useState(null),[Va,Zt]=w.useState(!1),[W,me]=w.useState(!1),ke=Ae=>{const xe=Gs(Ae),Re=Date.now();if(zt(Re),yt(xe),Zt(!1),A==="select"){const nt=[];if(qa().forEach(ot=>{const Kt=ie.rooms.findIndex(js=>js.id===ot.id);if(!ot||!isFinite(ot.layout_width)||!isFinite(ot.layout_height)||ot.layout_width<=0||ot.layout_height<=0)return;const aa=ot.x+20,da=ot.y+20,ea=ot.layout_width*Ct,Gt=ot.layout_height*Ct;cs(xe.x,xe.y,aa,da,ea,Gt,ot.rotation||0)&&nt.push(Kt)}),nt.length>0)if(nt.includes(m)){const ot=ie.rooms[m];if(ot&&isFinite(ot.layout_width)&&isFinite(ot.layout_height)&&ot.layout_width>0&&ot.layout_height>0){const Kt=ot.x+20,aa=ot.y+20,da=ot.layout_width*Ct,ea=ot.layout_height*Ct,Gt=yn(xe.x,xe.y,Kt,aa,da,ea),js=ge(xe.x,xe.y,Kt,aa,da,ea,ot.rotation||0);Gt?(O(!0),X(Gt),te({x:xe.x,y:xe.y})):js?(me(!0),te({x:xe.x,y:xe.y})):(Zt(!0),te({x:xe.x-ot.x,y:xe.y-ot.y}))}}else{let ot;nt.length>1?(ot=nt[nt.length-1],I("Multiple Items",`${nt.length} items overlap. Click again to cycle.`)):ot=nt[0],b(ot)}else b(null)}},tt=Ae=>{if(!St)return;const xe=Gs(Ae);Math.sqrt(Math.pow(xe.x-St.x,2)+Math.pow(xe.y-St.y,2))>5&&Va&&!S&&!N&&!W&&(_(!0),Zt(!1)),S&&m!==null?Lt(Ae):N&&m!==null?It(Ae):W&&m!==null&&it(Ae)},ht=Ae=>{const xe=Date.now();if(($e?xe-$e:0)<200&&!S&&!N&&!W&&Va){const nt=Gs(Ae),vt=[];if(qa().forEach(Kt=>{const aa=ie.rooms.findIndex(hn=>hn.id===Kt.id);if(!Kt||!isFinite(Kt.layout_width)||!isFinite(Kt.layout_height)||Kt.layout_width<=0||Kt.layout_height<=0)return;const da=Kt.x+20,ea=Kt.y+20,Gt=Kt.layout_width*Ct,js=Kt.layout_height*Ct;cs(nt.x,nt.y,da,ea,Gt,js,Kt.rotation||0)&&vt.push(aa)}),vt.length>1&&vt.includes(m)){const Kt=vt.indexOf(m),aa=vt[(Kt+1)%vt.length];b(aa),I("Overlapping Selection",`Cycling through ${vt.length} overlapping items`)}}_(!1),O(!1),me(!1),X(null),zt(null),yt(null),Zt(!1)},Lt=Ae=>{if(!S||m===null)return;const xe=Gs(Ae),Re=ls(xe.x-L.x-20),nt=ls(xe.y-L.y-20),vt=ie.rooms[m];if(!vt||!isFinite(vt.layout_width)||!isFinite(vt.layout_height)||vt.layout_width<=0||vt.layout_height<=0)return;const ot=vt.layout_width*Ct,Kt=vt.layout_height*Ct,aa=ie.plot_width*Ct,da=ie.plot_height*Ct,ea=Math.max(0,Math.min(Re,aa-ot)),Gt=Math.max(0,Math.min(nt,da-Kt));Wt({x:ea,y:Gt})},It=Ae=>{if(!N||m===null)return;const xe=Gs(Ae),Re=ie.rooms[m],nt=Re.x+20,vt=Re.y+20;let ot=Re.layout_width,Kt=Re.layout_height;if(G==="right"||G==="corner"){const ea=(xe.x-nt)/Ct;ot=Math.max(4,Math.min(30,Math.round(ea*2)/2))}if(G==="bottom"||G==="corner"){const ea=(xe.y-vt)/Ct;Kt=Math.max(4,Math.min(30,Math.round(ea*2)/2))}const aa=ot*ie.scale_ratio,da=Kt*ie.scale_ratio;Wt({layout_width:ot,layout_height:Kt,actual_width:aa,actual_height:da})},Jt=Ae=>{const xe={id:Date.now(),name:Ae.name,category:Ae.category,x:50,y:50,layout_width:Ae.default_width,layout_height:Ae.default_height,actual_width:Ae.default_width*ie.scale_ratio,actual_height:Ae.default_height*ie.scale_ratio,rotation:0,color:Ae.color,icon:Ae.icon,floor:_t,wall_thickness:.5,ceiling_height:9,floor_type:"ceramic",wall_material:"brick",notes:""};at(Re=>({...Re,rooms:[...Re.rooms,xe]})),b(ie.rooms.length),K(!0),$("Room Added",`${Ae.name} has been added to ${Xt[_t]||`Floor ${_t}`}`)},Ht=(Ae,xe,Re,nt,vt,ot)=>{const Kt={id:Date.now(),name:xe,category:Ae.includes("stair")||Ae.includes("column")||Ae.includes("beam")?"structural":Ae.includes("door")||Ae.includes("window")||Ae.includes("arch")?"doors":"circulation",type:Ae,x:50,y:50,layout_width:Re,layout_height:nt,actual_width:Re*ie.scale_ratio,actual_height:nt*ie.scale_ratio,rotation:0,color:vt,icon:ot,floor:_t,wall_thickness:Ae.includes("stair")?1:Ae.includes("door")||Ae.includes("window")?.25:.5,ceiling_height:Ae.includes("stair")?10:Ae.includes("door")||Ae.includes("window")?8:9,floor_type:Ae.includes("stair")?"concrete":"ceramic",wall_material:Ae.includes("stair")?"concrete":"brick",notes:""};at(aa=>({...aa,rooms:[...aa.rooms,Kt]})),b(ie.rooms.length),K(!0),$("Element Added",`${xe} has been added to ${Xt[_t]||`Floor ${_t}`}`)},Wt=Ae=>{m!==null&&(at(xe=>({...xe,rooms:xe.rooms.map((Re,nt)=>nt===m?{...Re,...Ae}:Re)})),K(!0))},wa=()=>{if(m===null)return;const Ae=ie.rooms[m]?.name||`Room ${m+1}`;at(xe=>({...xe,rooms:xe.rooms.filter((Re,nt)=>nt!==m)})),b(null),K(!0),k("Room Deleted",`"${Ae}" has been removed from your plan`)},ba=()=>ie.rooms.reduce((Ae,xe)=>{const Re=Y==="actual"?(xe.actual_width||xe.layout_width*ie.scale_ratio)*(xe.actual_height||xe.layout_height*ie.scale_ratio):xe.layout_width*xe.layout_height;return Ae+Re},0),ka=()=>ie.rooms.reduce((Ae,xe)=>{const Re=xe.actual_width||xe.layout_width*ie.scale_ratio,nt=xe.actual_height||xe.layout_height*ie.scale_ratio;return Ae+Re*nt},0),gs=async()=>{if(!(!ie.plan_name.trim()||ie.rooms.length===0))try{const Ae={plan_name:ie.plan_name,layout_request_id:t,plot_width:ie.plot_width,plot_height:ie.plot_height,plan_data:{rooms:ie.rooms,scale_ratio:ie.scale_ratio,total_layout_area:ba(),total_construction_area:ka(),floors:{total_floors:qt,current_floor:_t,floor_names:Xt}},notes:ie.notes,status:"draft"},xe=s?"/buildhub/backend/api/architect/update_house_plan.php":"/buildhub/backend/api/architect/create_house_plan.php";s&&(Ae.plan_id=s.id),console.log("Auto-saving plan...");const Re=await fetch(xe,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"include",body:JSON.stringify(Ae)});if(!Re.ok){console.error("Auto-save HTTP error:",Re.status,Re.statusText);return}const nt=await Re.text();let vt;try{vt=JSON.parse(nt)}catch(ot){console.error("Auto-save JSON parse error:",ot);return}vt.success?(V(new Date),K(!1),I("Auto-saved","Your changes have been automatically saved"),vt.plan_id&&!s&&console.log("Auto-save created new plan with ID:",vt.plan_id)):console.error("Auto-save failed:",vt.message)}catch(Ae){console.error("Auto-save error:",Ae)}},Ys=()=>{localStorage.setItem("housePlanTourCompleted","true"),_e(!1),$("Welcome!","You're now ready to create professional house plans.")},Wi=()=>{Ee(!0)},ds=()=>{ut(!0)},Nr=()=>{const Ae=qt+1;Bt(Ae),ta(xe=>({...xe,[Ae]:`Floor ${Ae}`})),Nt(Ae),$("Floor Added",`Floor ${Ae} has been added to your plan`),K(!0)},Xr=Ae=>{if(qt<=1){k("Cannot Remove","You must have at least one floor in your plan");return}at(nt=>({...nt,rooms:nt.rooms.filter(vt=>vt.floor!==Ae)}));const xe={};let Re=1;Object.entries(Xt).forEach(([nt,vt])=>{const ot=parseInt(nt);ot!==Ae&&(xe[Re]=(ot<Ae,vt),Re++)}),ta(xe),Bt(qt-1),_t===Ae?Nt(1):_t>Ae&&Nt(_t-1),k("Floor Removed",`Floor ${Ae} and its rooms have been removed`),K(!0)},Js=Ae=>{Nt(Ae),b(null),I("Floor Switched",`Now viewing ${Xt[Ae]||`Floor ${Ae}`}`)},vi=(Ae,xe)=>{ta(Re=>({...Re,[Ae]:xe})),K(!0)},qa=()=>ie.rooms.filter(Ae=>Ae.floor===_t),oi=(Ae,xe)=>{const Re={...Ae,id:Date.now()+Math.random(),floor:xe,name:`${Ae.name} (Copy)`};at(nt=>({...nt,rooms:[...nt.rooms,Re]})),$("Room Copied",`${Ae.name} copied to ${Xt[xe]||`Floor ${xe}`}`),K(!0)},$a=async()=>{if(!ie.plan_name.trim()){ue("Validation Error","Please enter a plan name before downloading");return}Ut(!0);try{const{default:Ae}=await cr(async()=>{const{default:nt}=await Promise.resolve().then(()=>Vg);return{default:nt}},void 0),xe=new Ae("l","mm","a4");xe.setFontSize(20),xe.text(ie.plan_name,20,20),xe.setFontSize(12);let Re=40;if(xe.text(`Plot Size: ${ie.plot_width}'  ${ie.plot_height}'`,20,Re),Re+=10,xe.text(`Total Floors: ${qt}`,20,Re),Re+=10,xe.text(`Layout Area: ${ba().toFixed(0)} sq ft`,20,Re),Re+=10,xe.text(`Construction Area: ${ka().toFixed(0)} sq ft`,20,Re),Re+=10,xe.text(`Number of Rooms: ${ie.rooms.length}`,20,Re),Re+=10,xe.text(`Scale Ratio: 1:${ie.scale_ratio}`,20,Re),Re+=20,ie.rooms&&ie.rooms.length>0){xe.setFontSize(14),xe.text("Room Details by Floor:",20,Re),Re+=10;for(let nt=1;nt<=qt;nt++){const vt=ie.rooms.filter(ot=>ot.floor===nt);vt.length>0&&(xe.setFontSize(12),xe.text(`${Xt[nt]||`Floor ${nt}`} (${vt.length} rooms):`,20,Re),Re+=8,xe.setFontSize(10),vt.forEach(ot=>{const Kt=ot.actual_width||ot.layout_width*ie.scale_ratio,aa=ot.actual_height||ot.layout_height*ie.scale_ratio,da=`   ${ot.name}: Layout ${ot.layout_width}'  ${ot.layout_height}' | Construction ${Kt.toFixed(1)}'  ${aa.toFixed(1)}' (${(Kt*aa).toFixed(0)} sq ft)`;xe.text(da,20,Re),Re+=6,Re>180&&(xe.addPage(),Re=20)}),Re+=5)}}if(l.current)try{const nt=(await cr(async()=>{const{default:da}=await Promise.resolve().then(()=>Au);return{default:da}},void 0)).default,vt=await nt(l.current),ot=vt.toDataURL("image/png");xe.addPage(),xe.setFontSize(14),xe.text("Plan Layout:",20,20);const Kt=250,aa=vt.height*Kt/vt.width;xe.addImage(ot,"PNG",20,30,Kt,aa)}catch(nt){console.error("Error adding canvas to PDF:",nt)}if(ie.notes){xe.addPage(),xe.setFontSize(14),xe.text("Notes:",20,20),xe.setFontSize(10);const nt=xe.splitTextToSize(ie.notes,250);xe.text(nt,20,35)}xe.save(`${ie.plan_name.replace(/[^a-z0-9]/gi,"_")}_house_plan.pdf`),$("PDF Downloaded","Your house plan has been downloaded as PDF")}catch(Ae){console.error("Error generating PDF:",Ae),ue("Download Failed","Error generating PDF. Please try again.")}finally{Ut(!1)}},Ri=async()=>{if(!ie.plan_name.trim()){ue("Validation Error","Please enter a plan name before downloading");return}Ut(!0);try{if(l.current){const Ae=(await cr(async()=>{const{default:nt}=await Promise.resolve().then(()=>Au);return{default:nt}},void 0)).default,xe=await Ae(l.current,{backgroundColor:"#ffffff",scale:2}),Re=document.createElement("a");Re.download=`${ie.plan_name.replace(/[^a-z0-9]/gi,"_")}_layout.png`,Re.href=xe.toDataURL("image/png"),Re.click(),$("Image Downloaded","Your house plan layout has been downloaded as PNG")}else ue("Download Failed","Plan canvas not available for download.")}catch(Ae){console.error("Error generating image:",Ae),ue("Download Failed","Error generating image. Please try again.")}finally{Ut(!1)}},Bo=()=>{if(!ie.plan_name.trim()){ue("Validation Error","Please enter a plan name before downloading");return}try{const Ae={plan_info:{name:ie.plan_name,plot_width:ie.plot_width,plot_height:ie.plot_height,layout_area:ba(),construction_area:ka(),scale_ratio:ie.scale_ratio,total_floors:qt,floor_names:Xt,created_at:new Date().toISOString()},floors:{total_floors:qt,current_floor:_t,floor_names:Xt,rooms_by_floor:Array.from({length:qt},(vt,ot)=>ot+1).reduce((vt,ot)=>(vt[ot]=ie.rooms.filter(Kt=>Kt.floor===ot),vt),{})},rooms:ie.rooms.map(vt=>({...vt,actual_width:vt.actual_width||vt.layout_width*ie.scale_ratio,actual_height:vt.actual_height||vt.layout_height*ie.scale_ratio})),notes:ie.notes,requirements_reference:Ze?{homeowner_name:Ze.homeowner_name,budget:Ze.budget,location:Ze.location,requirements:Ze.parsed_requirements}:null},xe=JSON.stringify(Ae,null,2),Re=new Blob([xe],{type:"application/json"}),nt=document.createElement("a");nt.href=URL.createObjectURL(Re),nt.download=`${ie.plan_name.replace(/[^a-z0-9]/gi,"_")}_data.json`,nt.click(),URL.revokeObjectURL(nt.href),$("JSON Downloaded","Your house plan data has been downloaded as JSON")}catch(Ae){console.error("Error generating JSON:",Ae),ue("Download Failed","Error generating JSON file. Please try again.")}},Ar=async()=>{if(!ie.plan_name.trim()){ue("Validation Error","Please enter a plan name before submitting");return}if(ie.rooms.length===0){k("Empty Plan","Your plan has no rooms. Add some rooms before submitting.");return}if(oe){I("Saving Plan","Saving plan before submission...");try{await li()}catch{ue("Save Failed","Please save the plan first before submitting");return}}Oe(!0)},vn=async Ae=>{xt(!0);try{let xe=s?.id;if(!xe){const ot=await Mn();if(!ot.success)throw new Error(ot.message||"Failed to save plan");xe=ot.plan_id}const Re={plan_id:xe,technical_details:Ae,plan_data:{rooms:ie.rooms,scale_ratio:ie.scale_ratio,total_layout_area:ba(),total_construction_area:ka(),floors:{total_floors:qt,current_floor:_t,floor_names:Xt}}};console.log("Submitting with technical details:",Re);const nt=await fetch("/buildhub/backend/api/architect/submit_house_plan_with_details.php",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"include",body:JSON.stringify(Re)});if(!nt.ok)throw new Error(`HTTP error! status: ${nt.status}`);const vt=await nt.json();if(vt.success)Oe(!1),$("Plan Submitted Successfully!",`Your house plan "${ie.plan_name}" with technical details has been submitted to the homeowner for review.`),i&&setTimeout(()=>i(vt),1500);else throw new Error(vt.message||"Submission failed")}catch(xe){console.error("Error submitting plan:",xe),ue("Submission Failed",`Failed to submit plan: ${xe.message}. Please try again.`)}finally{xt(!1)}},Mn=async()=>{const Ae={plan_name:ie.plan_name,layout_request_id:t,plot_width:ie.plot_width,plot_height:ie.plot_height,plan_data:{rooms:ie.rooms,scale_ratio:ie.scale_ratio,total_layout_area:ba(),total_construction_area:ka(),floors:{total_floors:qt,current_floor:_t,floor_names:Xt}},notes:ie.notes,status:"draft"},xe=await fetch("/buildhub/backend/api/architect/create_house_plan.php",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"include",body:JSON.stringify(Ae)});if(!xe.ok)throw new Error(`HTTP error! status: ${xe.status}`);return await xe.json()},Br=Ae=>{const xe=[];return(!Ae.plan_name||Ae.plan_name.trim().length===0)&&xe.push("Plan name is required"),(!Ae.plot_width||Ae.plot_width<=0)&&xe.push("Plot width must be greater than 0"),(!Ae.plot_height||Ae.plot_height<=0)&&xe.push("Plot height must be greater than 0"),(!Ae.plan_data||!Ae.plan_data.rooms||!Array.isArray(Ae.plan_data.rooms))&&xe.push("Plan data must contain rooms array"),Ae.plan_data&&Ae.plan_data.rooms&&Ae.plan_data.rooms.forEach((Re,nt)=>{(!Re.name||Re.name.trim().length===0)&&xe.push(`Room ${nt+1}: Name is required`),(!Re.layout_width||Re.layout_width<=0)&&xe.push(`Room ${nt+1}: Layout width must be greater than 0`),(!Re.layout_height||Re.layout_height<=0)&&xe.push(`Room ${nt+1}: Layout height must be greater than 0`),(typeof Re.x!="number"||typeof Re.y!="number")&&xe.push(`Room ${nt+1}: Position coordinates must be numbers`)}),xe},li=async()=>{if(!ie.plan_name.trim()){ue("Validation Error","Please enter a plan name before saving");return}if(ie.rooms.length===0){k("Empty Plan","Your plan has no rooms. Add some rooms before saving.");return}const Ae={plan_name:ie.plan_name,layout_request_id:t,plot_width:ie.plot_width,plot_height:ie.plot_height,plan_data:{rooms:ie.rooms,scale_ratio:ie.scale_ratio,total_layout_area:ba(),total_construction_area:ka(),floors:{total_floors:qt,current_floor:_t,floor_names:Xt}},notes:ie.notes,status:"draft"};s&&(Ae.plan_id=s.id);const xe=Br(Ae);if(xe.length>0){ue("Validation Error",xe.join("; "));return}D(!0),I("Saving Plan","Please wait while we save your house plan...");try{const Re=s?"/buildhub/backend/api/architect/update_house_plan.php":"/buildhub/backend/api/architect/create_house_plan.php";console.log("Saving plan with payload:",Ae),console.log("Using URL:",Re),console.log("Existing plan:",s);const nt=await fetch(Re,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"include",body:JSON.stringify(Ae)});if(console.log("Response status:",nt.status),console.log("Response headers:",Object.fromEntries(nt.headers.entries())),!nt.ok)throw new Error(`HTTP error! status: ${nt.status}`);const vt=await nt.text();console.log("Raw response:",vt);let ot;try{ot=JSON.parse(vt)}catch(Kt){throw console.error("JSON parse error:",Kt),console.error("Response text:",vt),new Error("Invalid JSON response from server. Check console for details.")}console.log("Parsed result:",ot),ot.success?(V(new Date),K(!1),H&&(clearTimeout(H),re(null)),$("Plan Saved Successfully!",`Your house plan "${ie.plan_name}" has been saved with ${ie.rooms.length} rooms covering ${ka().toFixed(0)} sq ft.`),q([]),R(-1),setTimeout(()=>{ca()},100),ot.plan_id&&!s&&console.log("New plan created with ID:",ot.plan_id),i&&setTimeout(()=>i(ot),1500)):ue("Save Failed",ot.message||"Unable to save your house plan. Please check your connection and try again.")}catch(Re){console.error("Error saving plan:",Re),ue("Network Error",`Failed to connect to the server: ${Re.message}. Please check your internet connection and try again.`)}finally{D(!1)}},Ya=m!==null?ie.rooms[m]:null;return e.jsxs("div",{className:"house-plan-drawer",children:[e.jsx(dw,{notifications:le,onRemove:Be}),e.jsx(_6,{isOpen:Ne,onClose:()=>Ee(!1),onComplete:Ys}),e.jsx(N6,{isOpen:st,onClose:()=>ut(!1)}),e.jsx(cw,{isOpen:et,onClose:()=>Oe(!1),onSubmit:vn,planData:ie,loading:kt}),e.jsxs("div",{className:"drawer-header",children:[e.jsxs("div",{className:"header-title",children:[e.jsx("h2",{children:"House Plan Designer"}),oe&&e.jsx("span",{className:"unsaved-indicator",title:"You have unsaved changes",children:" Unsaved Changes"}),J&&e.jsxs("span",{className:"last-saved",title:`Last saved: ${J.toLocaleTimeString()}`,children:["Last saved: ",J.toLocaleTimeString()]})]}),e.jsxs("div",{className:"header-actions",children:[e.jsxs("div",{className:"help-actions",children:[e.jsx("button",{onClick:Wi,className:"action-btn tour-btn",title:"Take a guided tour",children:" Tour"}),e.jsx("button",{onClick:ds,className:"action-btn help-btn",title:"Open user manual",children:" Help"})]}),e.jsxs("div",{className:"edit-actions",children:[e.jsx("button",{onClick:Za,disabled:ne<=0,className:"action-btn undo-btn",title:"Undo (Ctrl+Z)",children:" Undo"}),e.jsx("button",{onClick:os,disabled:ne>=Q.length-1,className:"action-btn redo-btn",title:"Redo (Ctrl+Y)",children:" Redo"}),e.jsx("button",{onClick:wa,disabled:m===null,className:"action-btn delete-btn",title:"Delete Selected Room (Delete)",children:" Delete"})]}),e.jsxs("div",{className:"drawer-actions",children:[e.jsxs("div",{className:"download-actions",children:[e.jsxs("button",{onClick:$a,disabled:C||lt||!ie.plan_name.trim(),className:"download-btn",title:"Download plan as PDF",children:[lt?"":""," PDF"]}),e.jsxs("button",{onClick:Ri,disabled:C||lt||!ie.plan_name.trim(),className:"download-btn",title:"Download layout as image",children:[lt?"":""," PNG"]}),e.jsxs("button",{onClick:Bo,disabled:C||lt||!ie.plan_name.trim(),className:"download-btn",title:"Download plan data as JSON",children:[lt?"":""," JSON"]})]}),e.jsx("button",{onClick:li,disabled:C,className:"save-btn",children:C?"Saving...":"Save Plan"}),e.jsx("button",{onClick:Ar,disabled:C,className:"submit-btn",children:C?"Submitting...":"Submit to Homeowner"}),e.jsx("button",{onClick:()=>window.open("/buildhub/backend/test_house_plan_save.php","_blank"),className:"test-btn",title:"Test backend connectivity",children:" Test Backend"}),e.jsx("button",{onClick:o,className:"cancel-btn",children:"Cancel"})]})]})]}),e.jsxs("div",{className:"drawer-content",children:[e.jsxs("div",{className:"tools-panel",children:[Ze&&e.jsxs("div",{className:"requirements-reference",children:[e.jsxs("div",{className:"requirements-header",children:[e.jsx("h4",{children:" Client Requirements"}),e.jsx("button",{className:"toggle-requirements-btn",onClick:()=>Mt(!Et),title:Et?"Hide requirements":"Show requirements",children:Et?"":""})]}),Et&&e.jsxs("div",{className:"requirements-content",children:[e.jsxs("div",{className:"requirement-item",children:[e.jsx("span",{className:"requirement-label",children:"Client:"}),e.jsx("span",{className:"requirement-value",children:Ze.homeowner_name||"N/A"})]}),e.jsxs("div",{className:"requirement-item",children:[e.jsx("span",{className:"requirement-label",children:"Budget:"}),e.jsx("span",{className:"requirement-value",children:_a(Ze.budget)})]}),e.jsxs("div",{className:"requirement-item",children:[e.jsx("span",{className:"requirement-label",children:"Plot Size:"}),e.jsxs("span",{className:"requirement-value",children:[Ze.plot_size||"N/A"," sq ft"]})]}),e.jsxs("div",{className:"requirement-item",children:[e.jsx("span",{className:"requirement-label",children:"Location:"}),e.jsx("span",{className:"requirement-value",children:Ze.location||"N/A"})]}),Ze.parsed_requirements&&e.jsxs(e.Fragment,{children:[(()=>{const Ae=Na(Ze.parsed_requirements);return Ae&&e.jsxs("div",{className:"requirement-section room-summary",children:[e.jsx("h5",{children:" Room Summary"}),e.jsx("div",{className:"room-summary-grid",children:Object.entries(Ae).map(([xe,Re])=>e.jsxs("div",{className:"room-summary-item",onMouseEnter:()=>ve(xe),onMouseLeave:()=>ve(null),title:`Hover to highlight ${xe.replace(/_/g," ")} in plan`,children:[e.jsx("span",{className:"room-summary-name",children:xe.replace(/_/g," ")}),e.jsx("span",{className:"room-summary-count",children:Re})]},xe))})]})})(),Ze.parsed_requirements.floor_rooms&&e.jsxs("div",{className:"requirement-section",children:[e.jsx("h5",{children:" Room Requirements"}),Object.entries(Ze.parsed_requirements.floor_rooms).map(([Ae,xe])=>e.jsxs("div",{className:"floor-requirements",children:[e.jsxs("div",{className:"floor-title",children:[Ae.charAt(0).toUpperCase()+Ae.slice(1),":"]}),e.jsx("div",{className:"room-list",children:Object.entries(xe).map(([Re,nt])=>e.jsxs("div",{className:"room-requirement",onMouseEnter:()=>ve(Re),onMouseLeave:()=>ve(null),title:`Hover to highlight ${Re.replace(/_/g," ")} in plan`,children:[e.jsx("span",{className:"room-name",children:Re.replace(/_/g," ")}),e.jsxs("span",{className:"room-count",children:["",nt]})]},Re))})]},Ae))]}),Ze.parsed_requirements.special_features&&e.jsxs("div",{className:"requirement-section",children:[e.jsx("h5",{children:" Special Features"}),e.jsx("div",{className:"features-list",children:Ze.parsed_requirements.special_features.map((Ae,xe)=>e.jsxs("div",{className:"feature-item",children:[" ",Ae]},xe))})]}),Ze.parsed_requirements.style_preference&&e.jsxs("div",{className:"requirement-section",children:[e.jsx("h5",{children:" Style Preference"}),e.jsx("div",{className:"style-preference",children:Ze.parsed_requirements.style_preference})]}),Ze.parsed_requirements.additional_notes&&e.jsxs("div",{className:"requirement-section",children:[e.jsx("h5",{children:" Additional Notes"}),e.jsx("div",{className:"additional-notes",children:Ze.parsed_requirements.additional_notes})]})]}),Ze.requirements&&!Ze.parsed_requirements&&e.jsxs("div",{className:"requirement-section",children:[e.jsx("h5",{children:" Requirements"}),e.jsx("div",{className:"raw-requirements",children:typeof Ze.requirements=="string"?Ze.requirements:JSON.stringify(Ze.requirements,null,2)})]})]})]}),e.jsxs("div",{className:"plan-details-section",children:[e.jsx("h4",{children:"Plan Details"}),e.jsxs("div",{className:"plan-form",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Plan Name:"}),e.jsx("input",{type:"text",placeholder:"Enter plan name",value:ie.plan_name,onChange:Ae=>{at(xe=>({...xe,plan_name:Ae.target.value})),K(!0)},className:"plan-detail-input"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Plot Dimensions:"}),e.jsxs("div",{className:"dimension-inputs",children:[e.jsxs("div",{className:"dimension-input",children:[e.jsx("label",{children:"Width:"}),e.jsx("input",{type:"number",value:ie.plot_width,onChange:Ae=>{at(xe=>({...xe,plot_width:parseFloat(Ae.target.value)||0})),K(!0)},min:"10",max:"100",className:"dimension-field"}),e.jsx("span",{children:"ft"})]}),e.jsxs("div",{className:"dimension-input",children:[e.jsx("label",{children:"Height:"}),e.jsx("input",{type:"number",value:ie.plot_height,onChange:Ae=>{at(xe=>({...xe,plot_height:parseFloat(Ae.target.value)||0})),K(!0)},min:"10",max:"100",className:"dimension-field"}),e.jsx("span",{children:"ft"})]})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Notes:"}),e.jsx("textarea",{placeholder:"Add notes about this plan...",value:ie.notes,onChange:Ae=>{at(xe=>({...xe,notes:Ae.target.value})),K(!0)},className:"plan-notes-textarea",rows:"3"})]})]})]}),e.jsxs("div",{className:"floor-management-section",children:[e.jsx("h4",{children:" Floor Management"}),e.jsxs("div",{className:"floor-controls",children:[e.jsxs("div",{className:"current-floor-info",children:[e.jsx("span",{className:"floor-label",children:"Current Floor:"}),e.jsx("span",{className:"floor-name",children:Xt[_t]||`Floor ${_t}`}),e.jsxs("span",{className:"floor-rooms-count",children:["(",qa().length," rooms)"]})]}),e.jsxs("div",{className:"floor-tabs",children:[Array.from({length:qt},(Ae,xe)=>xe+1).map(Ae=>e.jsx("button",{className:`floor-tab ${_t===Ae?"active":""}`,onClick:()=>Js(Ae),title:`Switch to ${Xt[Ae]||`Floor ${Ae}`}`,children:Ae},Ae)),e.jsx("button",{className:"floor-tab add-floor",onClick:Nr,title:"Add new floor",children:"+"})]}),e.jsxs("div",{className:"floor-actions",children:[e.jsx("div",{className:"floor-name-edit",children:e.jsx("input",{type:"text",value:Xt[_t]||`Floor ${_t}`,onChange:Ae=>vi(_t,Ae.target.value),className:"floor-name-input",placeholder:"Floor name"})}),e.jsxs("div",{className:"floor-buttons",children:[qt>1&&e.jsx("button",{className:"floor-action-btn remove-floor",onClick:()=>Xr(_t),title:"Remove current floor",children:" Remove Floor"}),m!==null&&e.jsxs("div",{className:"copy-room-section",children:[e.jsx("span",{className:"copy-label",children:"Copy selected room to:"}),e.jsx("div",{className:"copy-floor-buttons",children:Array.from({length:qt},(Ae,xe)=>xe+1).filter(Ae=>Ae!==_t).map(Ae=>e.jsxs("button",{className:"copy-floor-btn",onClick:()=>oi(ie.rooms[m],Ae),title:`Copy to ${Xt[Ae]||`Floor ${Ae}`}`,children:[" ",Ae]},Ae))})]})]})]})]})]}),e.jsxs("div",{className:"plan-stats",children:[e.jsx("h4",{children:"Plan Statistics"}),e.jsxs("div",{className:"stats",children:[e.jsxs("div",{children:["Plot Area: ",(ie.plot_width*ie.plot_height).toFixed(0)," sq ft"]}),e.jsxs("div",{children:["Total Floors: ",qt]}),e.jsxs("div",{children:["Current Floor: ",qa().length," rooms"]}),e.jsxs("div",{children:["Total Rooms: ",ie.rooms.length]}),e.jsxs("div",{children:["Layout Area: ",ba().toFixed(0)," sq ft"]}),e.jsxs("div",{children:["Construction Area: ",ka().toFixed(0)," sq ft"]}),e.jsxs("div",{children:["Coverage: ",(ka()/(ie.plot_width*ie.plot_height)*100).toFixed(1),"%"]})]})]}),e.jsxs("div",{className:"tool-section",children:[e.jsx("h4",{children:"Tools"}),e.jsx("div",{className:"tool-buttons",children:e.jsx("button",{className:A==="select"?"active":"",onClick:()=>p("select"),title:"Select and move rooms",children:" Select"})})]}),e.jsxs("div",{className:"measurement-controls",children:[e.jsx("h4",{children:"Measurements"}),e.jsxs("div",{className:"measurement-options",children:[e.jsxs("label",{className:"checkbox-label",children:[e.jsx("input",{type:"checkbox",checked:U,onChange:Ae=>E(Ae.target.checked)}),"Show Dimensions"]}),e.jsxs("div",{className:"measurement-mode",children:[e.jsxs("label",{children:[e.jsx("input",{type:"radio",name:"measurementMode",value:"layout",checked:Y==="layout",onChange:Ae=>T(Ae.target.value)}),"Layout Only"]}),e.jsxs("label",{children:[e.jsx("input",{type:"radio",name:"measurementMode",value:"actual",checked:Y==="actual",onChange:Ae=>T(Ae.target.value)}),"Construction Only"]}),e.jsxs("label",{children:[e.jsx("input",{type:"radio",name:"measurementMode",value:"both",checked:Y==="both",onChange:Ae=>T(Ae.target.value)}),"Both"]})]})]}),e.jsxs("div",{className:"scale-control",children:[e.jsxs("label",{children:["Scale Ratio (Layout  Construction):",e.jsx("input",{type:"number",value:ie.scale_ratio,onChange:Ae=>{at(xe=>({...xe,scale_ratio:parseFloat(Ae.target.value)||1})),K(!0)},min:"0.5",max:"3",step:"0.1",className:"scale-input"})]}),e.jsx("small",{children:"1.0 = Same size, 1.2 = 20% larger construction"})]})]}),e.jsxs("div",{className:"room-templates",children:[e.jsx("h4",{children:"Room Templates"}),e.jsxs("div",{className:"quick-access",children:[e.jsx("h5",{children:" Quick Access"}),e.jsxs("div",{className:"quick-access-grid",children:[e.jsx("button",{className:"quick-btn circulation",onClick:()=>Ht("corridor","Corridor",20,4,"#fff9c4",""),title:"Add Corridor (20'  4')",children:" Corridor"}),e.jsx("button",{className:"quick-btn circulation",onClick:()=>Ht("hallway","Hallway",15,6,"#fff59d",""),title:"Add Hallway (15'  6')",children:" Hallway"}),e.jsx("button",{className:"quick-btn structural",onClick:()=>Ht("staircase","Staircase",8,12,"#d7ccc8",""),title:"Add Staircase (8'  12')",children:" Staircase"}),e.jsx("button",{className:"quick-btn structural",onClick:()=>Ht("spiral_staircase","Spiral Staircase",6,6,"#bcaaa4",""),title:"Add Spiral Staircase (6'  6')",children:" Spiral Stair"}),e.jsx("button",{className:"quick-btn circulation",onClick:()=>Ht("entrance_hall","Entrance Hall",10,8,"#ffe082",""),title:"Add Entrance Hall (10'  8')",children:" Entrance"}),e.jsx("button",{className:"quick-btn circulation",onClick:()=>Ht("passage","Passage",12,3,"#ffecb3",""),title:"Add Passage (12'  3')",children:" Passage"})]})]}),e.jsxs("div",{className:"quick-access",children:[e.jsx("h5",{children:" Doors & Openings"}),e.jsxs("div",{className:"quick-access-grid",children:[e.jsx("button",{className:"quick-btn doors",onClick:()=>Ht("main_door","Main Door",4,1,"#b3d9ff",""),title:"Add Main Door (4'  1')",children:" Main Door"}),e.jsx("button",{className:"quick-btn doors",onClick:()=>Ht("interior_door","Interior Door",3,1,"#cce7ff",""),title:"Add Interior Door (3'  1')",children:" Interior Door"}),e.jsx("button",{className:"quick-btn doors",onClick:()=>Ht("sliding_door","Sliding Door",6,1,"#e0f2ff",""),title:"Add Sliding Door (6'  1')",children:" Sliding Door"}),e.jsx("button",{className:"quick-btn doors",onClick:()=>Ht("window","Window",4,1,"#d9ecff",""),title:"Add Window (4'  1')",children:" Window"}),e.jsx("button",{className:"quick-btn doors",onClick:()=>Ht("french_door","French Door",5,1,"#f0f8ff",""),title:"Add French Door (5'  1')",children:" French Door"}),e.jsx("button",{className:"quick-btn doors",onClick:()=>Ht("arch_opening","Arch Opening",4,1,"#bfd6ff",""),title:"Add Arch Opening (4'  1')",children:" Arch Opening"})]})]}),Object.entries(v).map(([Ae,xe])=>e.jsxs("div",{className:"template-category",children:[e.jsx("h5",{children:Ae.charAt(0).toUpperCase()+Ae.slice(1)}),e.jsx("div",{className:"template-grid",children:xe.map(Re=>e.jsxs("button",{className:"template-btn",onClick:()=>Jt(Re),style:{backgroundColor:Re.color},title:`Add ${Re.name} (${Re.default_width}'  ${Re.default_height}')`,children:[Re.icon&&e.jsx("span",{className:"template-icon",children:Re.icon}),Re.name]},Re.id))})]},Ae))]}),e.jsxs("div",{className:"color-legend",children:[e.jsx("h5",{children:" Color Legend"}),e.jsxs("div",{className:"legend-grid",children:[e.jsxs("div",{className:"legend-item",children:[e.jsx("div",{className:"legend-color",style:{backgroundColor:"#c8e6c9"}}),e.jsx("span",{className:"legend-label",children:"Bedrooms"})]}),e.jsxs("div",{className:"legend-item",children:[e.jsx("div",{className:"legend-color",style:{backgroundColor:"#b3e5fc"}}),e.jsx("span",{className:"legend-label",children:"Bathrooms"})]}),e.jsxs("div",{className:"legend-item",children:[e.jsx("div",{className:"legend-color",style:{backgroundColor:"#ffcdd2"}}),e.jsx("span",{className:"legend-label",children:"Kitchen"})]}),e.jsxs("div",{className:"legend-item",children:[e.jsx("div",{className:"legend-color",style:{backgroundColor:"#ffe0b2"}}),e.jsx("span",{className:"legend-label",children:"Living Areas"})]}),e.jsxs("div",{className:"legend-item",children:[e.jsx("div",{className:"legend-color",style:{backgroundColor:"#e1bee7"}}),e.jsx("span",{className:"legend-label",children:"Dining Areas"})]}),e.jsxs("div",{className:"legend-item",children:[e.jsx("div",{className:"legend-color",style:{backgroundColor:"#fff9c4"}}),e.jsx("span",{className:"legend-label",children:"Walkways"})]}),e.jsxs("div",{className:"legend-item",children:[e.jsx("div",{className:"legend-color",style:{backgroundColor:"#d7ccc8"}}),e.jsx("span",{className:"legend-label",children:"Stairs/Structure"})]}),e.jsxs("div",{className:"legend-item",children:[e.jsx("div",{className:"legend-color",style:{backgroundColor:"#b3d9ff"}}),e.jsx("span",{className:"legend-label",children:"Doors/Openings"})]}),e.jsxs("div",{className:"legend-item",children:[e.jsx("div",{className:"legend-color",style:{backgroundColor:"#e0e0e0"}}),e.jsx("span",{className:"legend-label",children:"Utility"})]})]})]}),Ya&&e.jsxs("div",{className:"room-properties",children:[e.jsx("h4",{children:"Room Properties"}),e.jsxs("div",{className:"property-group",children:[e.jsxs("label",{children:["Name:",e.jsx("input",{type:"text",value:Ya.name,onChange:Ae=>{Wt({name:Ae.target.value})}})]}),e.jsxs("label",{children:["Floor:",e.jsx("select",{value:Ya.floor||1,onChange:Ae=>{const xe=parseInt(Ae.target.value);Wt({floor:xe}),I("Room Moved",`${Ya.name} moved to ${Xt[xe]||`Floor ${xe}`}`)},children:Array.from({length:qt},(Ae,xe)=>xe+1).map(Ae=>e.jsx("option",{value:Ae,children:Xt[Ae]||`Floor ${Ae}`},Ae))})]}),e.jsxs("div",{className:"rotation-section",children:[e.jsx("h5",{children:"Rotation"}),e.jsxs("div",{className:"rotation-controls",children:[e.jsxs("label",{children:["Angle:",e.jsx("input",{type:"number",value:Ya.rotation||0,onChange:Ae=>{const xe=parseFloat(Ae.target.value)||0;Wt({rotation:xe})},min:"-180",max:"180",step:"15"})," "]}),e.jsxs("div",{className:"rotation-buttons",children:[e.jsx("button",{type:"button",className:"rotation-btn",onClick:()=>Wt({rotation:((Ya.rotation||0)-15+360)%360}),title:"Rotate 15 counter-clockwise",children:" -15"}),e.jsx("button",{type:"button",className:"rotation-btn",onClick:()=>Wt({rotation:((Ya.rotation||0)+15)%360}),title:"Rotate 15 clockwise",children:" +15"}),e.jsx("button",{type:"button",className:"rotation-btn",onClick:()=>Wt({rotation:((Ya.rotation||0)+90)%360}),title:"Rotate 90 clockwise",children:" 90"}),e.jsx("button",{type:"button",className:"rotation-btn reset-btn",onClick:()=>Wt({rotation:0}),title:"Reset rotation",children:" Reset"})]})]})]}),e.jsxs("div",{className:"dimensions-section",children:[e.jsx("h5",{children:"Layout Dimensions"}),e.jsxs("div",{className:"dimension-inputs",children:[e.jsxs("label",{children:["Width:",e.jsx("input",{type:"number",value:Ya.layout_width,onChange:Ae=>{const xe=parseFloat(Ae.target.value)||0;Wt({layout_width:xe,actual_width:xe*ie.scale_ratio})},min:"4",max:"30",step:"0.5"})," ft"]}),e.jsxs("label",{children:["Height:",e.jsx("input",{type:"number",value:Ya.layout_height,onChange:Ae=>{const xe=parseFloat(Ae.target.value)||0;Wt({layout_height:xe,actual_height:xe*ie.scale_ratio})},min:"4",max:"30",step:"0.5"})," ft"]})]}),e.jsxs("div",{className:"dimension-display",children:["Layout Area: ",(Ya.layout_width*Ya.layout_height).toFixed(1)," sq ft"]})]}),e.jsxs("div",{className:"dimensions-section",children:[e.jsx("h5",{children:"Construction Dimensions"}),e.jsxs("div",{className:"dimension-inputs",children:[e.jsxs("label",{children:["Actual Width:",e.jsx("input",{type:"number",value:(Ya.actual_width||Ya.layout_width*ie.scale_ratio).toFixed(1),onChange:Ae=>Wt({actual_width:parseFloat(Ae.target.value)||0}),min:"4",max:"40",step:"0.1"})," ft"]}),e.jsxs("label",{children:["Actual Height:",e.jsx("input",{type:"number",value:(Ya.actual_height||Ya.layout_height*ie.scale_ratio).toFixed(1),onChange:Ae=>Wt({actual_height:parseFloat(Ae.target.value)||0}),min:"4",max:"40",step:"0.1"})," ft"]})]}),e.jsxs("div",{className:"dimension-display",children:["Construction Area: ",((Ya.actual_width||Ya.layout_width*ie.scale_ratio)*(Ya.actual_height||Ya.layout_height*ie.scale_ratio)).toFixed(1)," sq ft"]})]}),e.jsxs("div",{className:"construction-specs",children:[e.jsx("h5",{children:"Construction Specifications"}),e.jsxs("label",{children:["Ceiling Height:",e.jsx("input",{type:"number",value:Ya.ceiling_height||9,onChange:Ae=>Wt({ceiling_height:parseFloat(Ae.target.value)||9}),min:"8",max:"15",step:"0.5"})," ft"]}),e.jsxs("label",{children:["Wall Thickness:",e.jsx("input",{type:"number",value:Ya.wall_thickness||.5,onChange:Ae=>Wt({wall_thickness:parseFloat(Ae.target.value)||.5}),min:"0.25",max:"1",step:"0.25"})," ft"]}),e.jsxs("label",{children:["Floor Type:",e.jsxs("select",{value:Ya.floor_type||"ceramic",onChange:Ae=>Wt({floor_type:Ae.target.value}),children:[e.jsx("option",{value:"ceramic",children:"Ceramic Tiles"}),e.jsx("option",{value:"marble",children:"Marble"}),e.jsx("option",{value:"granite",children:"Granite"}),e.jsx("option",{value:"wood",children:"Wooden"}),e.jsx("option",{value:"concrete",children:"Concrete"}),e.jsx("option",{value:"vinyl",children:"Vinyl"})]})]}),e.jsxs("label",{children:["Wall Material:",e.jsxs("select",{value:Ya.wall_material||"brick",onChange:Ae=>Wt({wall_material:Ae.target.value}),children:[e.jsx("option",{value:"brick",children:"Brick"}),e.jsx("option",{value:"concrete",children:"Concrete Block"}),e.jsx("option",{value:"wood",children:"Wood Frame"}),e.jsx("option",{value:"steel",children:"Steel Frame"}),e.jsx("option",{value:"stone",children:"Stone"})]})]})]}),e.jsx("button",{onClick:wa,className:"delete-room-btn",children:" Delete Room"})]})]}),e.jsxs("div",{className:"editor-status",children:[e.jsx("h4",{children:"Editor Status"}),e.jsxs("div",{className:"status-info",children:[e.jsxs("div",{className:"status-item",children:[e.jsx("span",{className:"status-label",children:"Selected:"}),e.jsx("span",{className:"status-value",children:m!==null?ie.rooms[m]?.name||`Room ${m+1}`:"None"})]}),e.jsxs("div",{className:"status-item",children:[e.jsx("span",{className:"status-label",children:"History:"}),e.jsxs("span",{className:"status-value",children:[ne+1," / ",Q.length]})]}),e.jsxs("div",{className:"status-item",children:[e.jsx("span",{className:"status-label",children:"Can Undo:"}),e.jsx("span",{className:`status-value ${ne>0?"enabled":"disabled"}`,children:ne>0?"Yes":"No"})]}),e.jsxs("div",{className:"status-item",children:[e.jsx("span",{className:"status-label",children:"Can Redo:"}),e.jsx("span",{className:`status-value ${ne<Q.length-1?"enabled":"disabled"}`,children:ne<Q.length-1?"Yes":"No"})]})]})]}),e.jsxs("div",{className:"interaction-help",children:[e.jsx("h4",{children:"How to Use"}),e.jsxs("ul",{children:[e.jsx("li",{children:" Hover over requirements to highlight rooms in plan"}),e.jsx("li",{children:" Click rooms to select them"}),e.jsx("li",{children:" Drag rooms to move them"}),e.jsx("li",{children:" Drag blue handles to resize"}),e.jsx("li",{children:" Drag red handle to rotate (15 snaps)"}),e.jsx("li",{children:" Click overlapping items to cycle selection"}),e.jsx("li",{children:" Use door templates for openings"}),e.jsx("li",{children:" Ctrl+Z to undo, Ctrl+Y to redo"}),e.jsx("li",{children:" Delete key to remove selected room"}),e.jsx("li",{children:" Layout = Visual, Construction = Actual"}),e.jsx("li",{children:" Adjust scale ratio for realistic sizing"})]})]})]}),e.jsxs("div",{className:"canvas-container",children:[e.jsxs("div",{className:"canvas-toolbar",children:[e.jsxs("div",{className:"canvas-info",children:[e.jsxs("span",{children:["Plot: ",ie.plot_width,"'  ",ie.plot_height,"'"]}),e.jsxs("span",{children:["Floor: ",Xt[_t]||`Floor ${_t}`," (",qa().length," rooms)"]}),e.jsxs("span",{children:["Total: ",ie.rooms.length," rooms"]}),e.jsxs("span",{children:["Scale: 1:",ie.scale_ratio]})]}),e.jsxs("div",{className:"canvas-controls",children:[e.jsxs("button",{onClick:()=>Mt(!Et),children:[Et?" Hide":" Show"," Requirements"]}),e.jsxs("button",{onClick:()=>E(!U),children:[U?" Hide":" Show"," Dimensions"]}),e.jsx("button",{onClick:()=>ja(),children:" Refresh"})]})]}),e.jsx("div",{className:"canvas-wrapper",children:e.jsx("canvas",{ref:l,className:"plan-canvas",onMouseDown:ke,onMouseMove:tt,onMouseUp:ht,style:{cursor:S?"grabbing":N?"nw-resize":W?"crosshair":Va?"grab":"default"}})})]})]})]})},C6=({layoutRequestId:t=null,onClose:a})=>{const[s,i]=w.useState("list"),[o,l]=w.useState([]),[d,u]=w.useState(!1),[A,p]=w.useState(null),[m,b]=w.useState(null),[v,x]=w.useState(!1),[C,D]=w.useState({isOpen:!1,type:"danger",title:"",message:"",onConfirm:null}),{notifications:S,removeNotification:_,showSuccess:N,showError:O}=Aw(),L=async le=>{x(!0);try{const{default:Be}=await cr(async()=>{const{default:k}=await Promise.resolve().then(()=>Vg);return{default:k}},void 0),$=new Be("l","mm","a4");$.setFontSize(20),$.text(le.plan_name,20,20),$.setFontSize(12);let ue=40;$.text(`Plot Size: ${le.plot_width}'  ${le.plot_height}'`,20,ue),ue+=10,$.text(`Total Area: ${le.total_area} sq ft`,20,ue),ue+=10,$.text(`Number of Rooms: ${le.plan_data?.rooms?.length||0}`,20,ue),ue+=10,$.text(`Status: ${le.status.charAt(0).toUpperCase()+le.status.slice(1)}`,20,ue),ue+=20;try{const k=await G(le);k&&($.addPage(),$.setFontSize(14),$.text("Plan Layout:",20,20),$.addImage(k,"PNG",20,30,250,150),ue=190)}catch(k){console.warn("Could not add visual design to PDF:",k)}if(le.plan_data?.rooms&&le.plan_data.rooms.length>0&&(ue>150&&($.addPage(),ue=20),$.setFontSize(14),$.text("Room Details:",20,ue),ue+=10,$.setFontSize(10),le.plan_data.rooms.forEach((k,I)=>{const H=`${k.name}: ${k.layout_width}'  ${k.layout_height}' (${(k.layout_width*k.layout_height).toFixed(0)} sq ft)`;$.text(H,20,ue),ue+=8,ue>180&&($.addPage(),ue=20)})),le.notes){ue+=10,$.setFontSize(14),$.text("Notes:",20,ue),ue+=10,$.setFontSize(10);const k=$.splitTextToSize(le.notes,250);$.text(k,20,ue)}$.save(`${le.plan_name.replace(/[^a-z0-9]/gi,"_")}_house_plan.pdf`),N("PDF Downloaded","House plan has been downloaded as PDF with visual design")}catch(Be){console.error("Error generating PDF:",Be),O("Download Failed","Error generating PDF. Please try again.")}finally{x(!1)}},te=async le=>{x(!0);try{const Be=await G(le);if(Be){const $=document.createElement("a");$.download=`${le.plan_name.replace(/[^a-z0-9]/gi,"_")}_layout.png`,$.href=Be,$.click(),N("Image Downloaded","House plan layout has been downloaded as PNG")}else O("Download Failed","Could not generate plan visualization")}catch(Be){console.error("Error generating image:",Be),O("Download Failed","Error generating image. Please try again.")}finally{x(!1)}},G=async le=>new Promise(Be=>{try{if(!le.plan_data?.rooms||le.plan_data.rooms.length===0){Be(null);return}const $=document.createElement("canvas"),ue=$.getContext("2d"),k=15,I=40,H=le.plot_width*k+I*2,re=le.plot_height*k+I*2;$.width=H,$.height=re,ue.fillStyle="#ffffff",ue.fillRect(0,0,H,re),ue.strokeStyle="#2c3e50",ue.lineWidth=3,ue.strokeRect(I,I,le.plot_width*k,le.plot_height*k),ue.fillStyle="#2c3e50",ue.font="bold 14px Arial",ue.textAlign="center",ue.fillText(`${le.plot_width}'`,I+le.plot_width*k/2,I-10),ue.save(),ue.translate(I-15,I+le.plot_height*k/2),ue.rotate(-Math.PI/2),ue.fillText(`${le.plot_height}'`,0,0),ue.restore(),le.plan_data.rooms.forEach(V=>{const oe=(V.x||0)+I,K=(V.y||0)+I,Ne=(V.layout_width||10)*k,Ee=(V.layout_height||10)*k;ue.fillStyle=V.color||"#e3f2fd",ue.fillRect(oe,K,Ne,Ee),ue.strokeStyle="#666",ue.lineWidth=1,ue.strokeRect(oe,K,Ne,Ee),ue.fillStyle="#333",ue.font="bold 12px Arial",ue.textAlign="center";const st=oe+Ne/2,ut=K+Ee/2;ue.fillText(V.name,st,ut-8),ue.font="10px Arial",ue.fillStyle="#666",ue.fillText(`${V.layout_width}'  ${V.layout_height}'`,st,ut+8)});const J=$.toDataURL("image/png",1);Be(J)}catch($){console.error("Error generating visualization:",$),Be(null)}}),X=le=>{try{const Be={plan_info:{name:le.plan_name,plot_width:le.plot_width,plot_height:le.plot_height,total_area:le.total_area,status:le.status,created_at:le.created_at,updated_at:le.updated_at},rooms:le.plan_data?.rooms||[],notes:le.notes,technical_details:le.technical_details||null,request_info:m?{homeowner_name:m.homeowner_name,budget_range:m.budget_range,plot_size:m.plot_size}:null},$=JSON.stringify(Be,null,2),ue=new Blob([$],{type:"application/json"}),k=document.createElement("a");k.href=URL.createObjectURL(ue),k.download=`${le.plan_name.replace(/[^a-z0-9]/gi,"_")}_data.json`,k.click(),URL.revokeObjectURL(k.href),N("JSON Downloaded","House plan data has been downloaded as JSON")}catch(Be){console.error("Error generating JSON:",Be),O("Download Failed","Error generating JSON file. Please try again.")}};w.useEffect(()=>{U(),t&&E()},[t]);const U=async()=>{u(!0);try{const le=t?`/buildhub/backend/api/architect/get_house_plans.php?layout_request_id=${t}`:"/buildhub/backend/api/architect/get_house_plans.php",$=await(await fetch(le)).json();$.success?l($.plans):console.error("Failed to load plans:",$.message)}catch(le){console.error("Error loading plans:",le)}finally{u(!1)}},E=async()=>{try{const Be=await(await fetch("/buildhub/backend/api/architect/get_assigned_requests.php")).json();if(Be.success){const $=Be.assignments?.find(ue=>ue.layout_request_id===t||ue.layout_request?.id===t);$&&b($)}}catch(le){console.error("Error loading request info:",le)}},Y=()=>{p(null),i("create")},T=le=>{p(le),i("edit")},Q=le=>{i("list"),U(),N("Plan Saved","Your house plan has been saved successfully!")},q=async le=>{D({isOpen:!0,type:"warning",title:"Submit House Plan",message:"Are you sure you want to submit this plan to the homeowner? The homeowner will be notified and can review the plan. You can still edit the plan after submission if needed.",onConfirm:()=>ne(le)})},ne=async le=>{try{const $=await(await fetch("/buildhub/backend/api/architect/submit_house_plan.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({plan_id:le})})).json();$.success?(N("Plan Submitted","Plan submitted successfully! The homeowner has been notified."),U()):O("Submission Failed",$.message||"Failed to submit plan")}catch(Be){console.error("Error submitting plan:",Be),O("Submission Error","Error submitting plan. Please try again.")}},R=async le=>{D({isOpen:!0,type:"danger",title:"Delete House Plan",message:"Are you sure you want to delete this plan? This action cannot be undone and the homeowner will be notified.",onConfirm:()=>z(le)})},z=async le=>{try{const $=await(await fetch("/buildhub/backend/api/architect/delete_house_plan.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({plan_id:le})})).json();if($.success){const ue=$.data?.homeowner_notified?`Plan "${$.data.plan_name}" deleted successfully! The homeowner has been notified.`:`Plan "${$.data.plan_name}" deleted successfully!`;N("Plan Deleted",ue),U()}else O("Delete Failed",$.message||"Failed to delete plan")}catch(Be){console.error("Error deleting plan:",Be),O("Delete Error","Error deleting plan. Please try again.")}},ee=le=>{const Be={draft:{class:"status-draft",text:"Draft"},submitted:{class:"status-submitted",text:"Submitted"},approved:{class:"status-approved",text:"Approved"},rejected:{class:"status-rejected",text:"Rejected"}},$=Be[le]||Be.draft;return e.jsx("span",{className:`status-badge ${$.class}`,children:$.text})};return s==="create"||s==="edit"?e.jsx(B6,{layoutRequestId:t,requestInfo:m,existingPlan:A,onSave:Q,onCancel:()=>i("list")}):e.jsxs("div",{className:"house-plan-manager",children:[e.jsx(dw,{notifications:S,onRemove:_}),e.jsx(aw,{isOpen:C.isOpen,onClose:()=>D({...C,isOpen:!1}),onConfirm:C.onConfirm,title:C.title,message:C.message,type:C.type,confirmText:C.type==="danger"?"Delete":"Submit",cancelText:"Cancel"}),e.jsxs("div",{className:"manager-header",children:[e.jsxs("div",{className:"header-content",children:[e.jsx("h2",{children:"House Plans"}),m&&e.jsxs("div",{className:"request-info",children:[e.jsxs("h3",{children:["For: ",m.homeowner_name]}),e.jsxs("p",{children:[m.plot_size,"  ",m.budget_range]})]})]}),e.jsxs("div",{className:"header-actions",children:[e.jsx("button",{onClick:Y,className:"create-btn",children:"Create New Plan"}),a&&e.jsx("button",{onClick:a,className:"close-btn",children:"Close"})]})]}),e.jsx("div",{className:"plans-content",children:d?e.jsx("div",{className:"loading",children:"Loading plans..."}):o.length===0?e.jsxs("div",{className:"empty-state",children:[e.jsx("div",{className:"empty-icon",children:""}),e.jsx("h3",{children:"No Plans Yet"}),e.jsx("p",{children:"Create your first custom house plan for this project"}),e.jsx("button",{onClick:Y,className:"create-first-btn",children:"Create First Plan"})]}):e.jsx("div",{className:"plans-grid",children:o.map(le=>e.jsxs("div",{className:"plan-card",children:[e.jsxs("div",{className:"plan-header",children:[e.jsx("h4",{children:le.plan_name}),ee(le.status)]}),e.jsxs("div",{className:"plan-preview",children:[e.jsxs("div",{className:"plan-stats",children:[e.jsxs("div",{className:"stat",children:[e.jsx("span",{className:"stat-label",children:"Plot Size:"}),e.jsxs("span",{className:"stat-value",children:[le.plot_width,"'  ",le.plot_height,"'"]})]}),e.jsxs("div",{className:"stat",children:[e.jsx("span",{className:"stat-label",children:"Total Area:"}),e.jsxs("span",{className:"stat-value",children:[le.total_area," sq ft"]})]}),e.jsxs("div",{className:"stat",children:[e.jsx("span",{className:"stat-label",children:"Rooms:"}),e.jsx("span",{className:"stat-value",children:le.plan_data?.rooms?.length||0})]})]}),le.notes&&e.jsx("div",{className:"plan-notes",children:e.jsx("p",{children:le.notes})})]}),e.jsx("div",{className:"plan-meta",children:e.jsxs("div",{className:"plan-dates",children:[e.jsxs("small",{children:["Created: ",new Date(le.created_at).toLocaleDateString()]}),le.updated_at!==le.created_at&&e.jsxs("small",{children:["Updated: ",new Date(le.updated_at).toLocaleDateString()]})]})}),e.jsxs("div",{className:"plan-actions",children:[e.jsxs("div",{className:"download-actions",children:[e.jsxs("button",{onClick:()=>L(le),disabled:v,className:"download-btn pdf-btn",title:"Download as PDF with visual design",children:[v?"":""," PDF"]}),e.jsxs("button",{onClick:()=>te(le),disabled:v,className:"download-btn image-btn",title:"Download layout as image",children:[v?"":""," PNG"]}),e.jsxs("button",{onClick:()=>X(le),disabled:v,className:"download-btn json-btn",title:"Download as JSON data",children:[v?"":""," JSON"]})]}),le.status==="draft"&&e.jsxs("div",{className:"status-actions",children:[e.jsx("button",{onClick:()=>T(le),className:"edit-btn",children:"Edit"}),e.jsx("button",{onClick:()=>q(le.id),className:"submit-btn",children:"Submit"}),e.jsx("button",{onClick:()=>R(le.id),className:"delete-btn",children:"Delete"})]}),le.status==="submitted"&&e.jsxs("div",{className:"status-actions",children:[e.jsx("button",{onClick:()=>T(le),className:"edit-btn",title:"Edit submitted plan",children:"Edit"}),e.jsx("div",{className:"submitted-info",children:e.jsx("span",{children:"Waiting for homeowner review"})})]}),le.status==="approved"&&e.jsxs("div",{className:"status-actions",children:[e.jsx("button",{onClick:()=>T(le),className:"edit-btn",title:"Edit approved plan",children:"Edit"}),e.jsx("div",{className:"approved-info",children:e.jsx("span",{children:" Approved by homeowner"})})]}),le.status==="rejected"&&e.jsx("div",{className:"status-actions",children:e.jsx("button",{onClick:()=>T(le),className:"revise-btn",children:"Revise Plan"})})]})]},le.id))})})]})},Kf=({requirements:t,compact:a=!1})=>{let s=t;if(typeof t=="string")try{s=JSON.parse(t)}catch{return e.jsx("div",{className:"requirements-display",children:e.jsx("p",{children:t})})}if(!s||typeof s!="object")return null;const i=p=>p.replace(/_/g," ").replace(/\b\w/g,m=>m.toUpperCase()),o=p=>p?e.jsx("div",{className:"floor-rooms",children:Object.entries(p).map(([m,b])=>{const v=m.replace("floor",""),x=v==="1"?"Ground Floor":`Floor ${v}`;return e.jsxs("div",{className:"floor-section",style:{marginBottom:"12px"},children:[e.jsx("h6",{style:{margin:"0 0 8px 0",fontSize:"0.85rem",fontWeight:"600",color:"#374151",borderBottom:"1px solid #e5e7eb",paddingBottom:"4px"},children:x}),e.jsx("div",{className:"room-tags",style:{display:"flex",flexWrap:"wrap",gap:"4px",marginLeft:"8px"},children:Object.entries(b||{}).map(([C,D])=>!D||D===0?null:e.jsxs("span",{style:{display:"inline-block",margin:"2px 4px 2px 0",padding:"3px 6px",backgroundColor:"#dbeafe",color:"#1e40af",borderRadius:"8px",fontSize:"11px",fontWeight:"500"},children:[i(C),": ",D]},C))})]},m)})}):null,l=()=>e.jsxs("div",{className:"basic-info",style:{marginBottom:"16px"},children:[s.plot_shape&&e.jsxs("p",{style:{margin:"4px 0",fontSize:"0.9rem"},children:[e.jsx("strong",{children:"Plot Shape:"})," ",i(s.plot_shape)]}),s.topography&&e.jsxs("p",{style:{margin:"4px 0",fontSize:"0.9rem"},children:[e.jsx("strong",{children:"Topography:"})," ",i(s.topography)]}),s.num_floors&&e.jsxs("p",{style:{margin:"4px 0",fontSize:"0.9rem"},children:[e.jsx("strong",{children:"Floors:"})," ",s.num_floors]}),s.preferred_style&&e.jsxs("p",{style:{margin:"4px 0",fontSize:"0.9rem"},children:[e.jsx("strong",{children:"Style:"})," ",i(s.preferred_style)]}),s.aesthetic&&e.jsxs("p",{style:{margin:"4px 0",fontSize:"0.9rem"},children:[e.jsx("strong",{children:"Aesthetic:"})," ",i(s.aesthetic)]})]}),d=()=>{if(!s.rooms||typeof s.rooms!="string")return null;const p=s.rooms.split(",").map(m=>m.trim());return e.jsxs("div",{className:"rooms-from-string",style:{marginBottom:"12px"},children:[e.jsx("p",{style:{margin:"0 0 8px 0",fontWeight:"600",fontSize:"0.9rem"},children:" Rooms:"}),e.jsx("div",{style:{marginLeft:"10px"},children:p.map((m,b)=>e.jsxs("span",{style:{display:"inline-block",margin:"2px 4px 2px 0",padding:"3px 6px",backgroundColor:"#dbeafe",color:"#1e40af",borderRadius:"8px",fontSize:"11px",fontWeight:"500"},children:[i(m),": 1"]},b))})]})},u=()=>s.family_needs?e.jsxs("div",{className:"family-needs",style:{marginBottom:"12px"},children:[e.jsx("p",{style:{margin:"0 0 8px 0",fontWeight:"600",fontSize:"0.9rem"},children:" Family Needs:"}),e.jsx("div",{style:{marginLeft:"10px"},children:e.jsx("span",{style:{display:"inline-block",margin:"2px 4px 2px 0",padding:"3px 6px",backgroundColor:"#f3e8ff",color:"#7c3aed",borderRadius:"8px",fontSize:"11px",fontWeight:"500"},children:s.family_needs})})]}):null,A=()=>s.notes?e.jsxs("div",{className:"notes",style:{marginBottom:"12px"},children:[e.jsx("p",{style:{margin:"0 0 8px 0",fontWeight:"600",fontSize:"0.9rem"},children:" Additional Notes:"}),e.jsx("p",{style:{margin:"0",fontSize:"0.85rem",color:"#6b7280",fontStyle:"italic",marginLeft:"10px"},children:s.notes})]}):null;return a?e.jsxs("div",{className:"requirements-display compact",style:{fontSize:"0.9rem",color:"#666",marginLeft:"10px"},children:[s.floor_rooms&&o(s.floor_rooms),!s.floor_rooms&&d(),l(),u(),A()]}):e.jsxs("div",{className:"requirements-display",style:{padding:"16px",backgroundColor:"#f8fafc",borderRadius:"8px",border:"1px solid #e2e8f0"},children:[e.jsx("h5",{style:{margin:"0 0 12px 0",color:"#374151"},children:"Requirements:"}),s.floor_rooms&&o(s.floor_rooms),!s.floor_rooms&&d(),l(),u(),A()]})},Tb=()=>{const t=$i(),[a,s]=w.useState("dashboard"),[i,o]=w.useState(null),[l,d]=w.useState([]),[u,A]=w.useState([]),[p,m]=w.useState(!1),[b,v]=w.useState(""),[x,C]=w.useState(""),D=Xn(),[S,_]=w.useState(!1),[N,O]=w.useState(0),[L,te]=w.useState(!1),[G,X]=w.useState(!1),[U,E]=w.useState({specialization:"",experience_years:"",email:"",phone:"",city:"",avg_rating:null,review_count:0}),[Y,T]=w.useState(!1),[Q,q]=w.useState(!1),[ne,R]=w.useState(!1),[z,ee]=w.useState([]),[le,Be]=w.useState(!1),[$,ue]=w.useState(""),[k,I]=w.useState(!1),[H,re]=w.useState([]),[J,V]=w.useState(!1),[oe,K]=w.useState(0),[Ne,Ee]=w.useState({}),[st,ut]=w.useState({open:!1,image:null,title:""}),[Ge,_e]=w.useState({}),[Et,Mt]=w.useState({title:"",layout_type:"",bedrooms:"",bathrooms:"",area:"",price_range:"",view_price:0,description:"",image:null,design_file:null,technical_details:{}}),[Ze,Je]=w.useState({request_id:"",homeowner_id:"",design_title:"",description:"",technical_details:{},files:[]}),[mt,ve]=w.useState(!1),[et,Oe]=w.useState(null),[kt,xt]=w.useState(!1),[lt,Ut]=w.useState(null),[_t,Nt]=w.useState(!1);w.useEffect(()=>{const W=JSON.parse(sessionStorage.getItem("user")||"{}");o(W),cr(async()=>{const{preventCache:me,verifyServerSession:ke}=await import("./session-DODIVVdM.js");return{preventCache:me,verifyServerSession:ke}},[]).then(({preventCache:me,verifyServerSession:ke})=>{me(),(async()=>{const tt=await ke();if(!W.id||W.role!=="architect"||!tt){sessionStorage.removeItem("user"),localStorage.removeItem("bh_user"),t("/login",{replace:!0});return}qt(),ta(),Ba(),Za()})()})},[]);const qt=async()=>{m(!0);try{const me=await(await fetch("/buildhub/backend/api/architect/get_assigned_requests.php")).json();if(me.success){const ht=(me.assignments||[]).filter(Lt=>Lt.assignment_status==="accepted").map(Lt=>({...Lt.layout_request,assignment_id:Lt.assignment_id,assignment_status:Lt.assignment_status,assigned_at:Lt.assigned_at,assignment_message:Lt.message,homeowner_name:Lt.homeowner.name,homeowner_email:Lt.homeowner.email,homeowner_id:Lt.homeowner.id}));d(ht)}}catch(W){console.error("Error fetching requests:",W)}finally{m(!1)}},Bt=async()=>{m(!0);try{await Promise.all([qt(),ta(),Ba(),Za()]),D.success("Dashboard refreshed successfully")}catch(W){console.error("Error refreshing dashboard:",W),D.error("Failed to refresh dashboard")}finally{m(!1)}},Xt=W=>{const me=new ua;let ke=20;me.setFontSize(18),me.setFont(void 0,"bold"),me.text("Project Details",105,ke,{align:"center"}),ke+=10,me.setFontSize(12),me.setFont(void 0,"normal"),me.text(`Project ID: ${W.id}`,20,ke),ke+=8,me.setFontSize(14),me.setFont(void 0,"bold"),me.text("Client Information",20,ke),ke+=8,me.setFontSize(11),me.setFont(void 0,"normal"),me.text(`Name: ${W.homeowner_name||"Not specified"}`,20,ke),ke+=7,me.text(`Email: ${W.homeowner_email||"Not specified"}`,20,ke),ke+=7,me.text(`Location: ${W.location||"Not specified"}`,20,ke),ke+=10,me.setFontSize(14),me.setFont(void 0,"bold"),me.text("Project Specifications",20,ke),ke+=8,me.setFontSize(11),me.setFont(void 0,"normal"),me.text(`Plot Size: ${W.plot_size||"Not specified"}`,20,ke),ke+=7,me.text(`Building Size: ${W.building_size||"Not specified"}`,20,ke),ke+=7,me.text(`Budget Range: ${W.budget_range||"Not specified"}`,20,ke),ke+=7,me.text(`Number of Floors: ${W.num_floors||"Not specified"}`,20,ke),ke+=7,me.text(`Timeline: ${W.timeline||"Not specified"}`,20,ke),ke+=10;const tt=W.floor_rooms||W.requirements_parsed?.floor_rooms;tt&&(Array.isArray(tt)?tt.length>0:Object.keys(tt||{}).length>0)&&(me.setFontSize(14),me.setFont(void 0,"bold"),me.text("Floor-wise Room Distribution",20,ke),ke+=8,me.setFontSize(11),me.setFont(void 0,"normal"),(Array.isArray(tt)?tt:Object.entries(tt)).forEach((It,Jt)=>{let Ht,Wt;if(Array.isArray(tt))Ht=It.rooms,Wt=parseInt(It.floor||Jt+1);else{const[wa,ba]=It;Ht=ba,Wt=parseInt(wa.replace("floor",""))}me.setFontSize(12),me.setFont(void 0,"bold"),me.text(Wt===1?"Ground Floor":`Floor ${Wt}`,25,ke),ke+=7,me.setFontSize(10),me.setFont(void 0,"normal"),Object.entries(Ht||{}).forEach(([wa,ba])=>{const ka=typeof ba=="number"?ba:ba.length||0;ka>0&&(me.text(`   ${wa.replace(/_/g," ").replace(/\b\w/g,gs=>gs.toUpperCase())}: ${ka}`,30,ke),ke+=6)}),ke+=4}),ke+=5),W.requirements_parsed&&(me.setFontSize(14),me.setFont(void 0,"bold"),me.text("Additional Requirements",20,ke),ke+=8,me.setFontSize(11),me.setFont(void 0,"normal"),W.requirements_parsed.plot_shape&&(me.text(`Plot Shape: ${W.requirements_parsed.plot_shape}`,20,ke),ke+=7),W.requirements_parsed.topography&&(me.text(`Topography: ${W.requirements_parsed.topography}`,20,ke),ke+=7),W.requirements_parsed.aesthetic&&(me.text(`Style: ${W.requirements_parsed.aesthetic}`,20,ke),ke+=7),W.requirements_parsed.site_considerations&&(me.text(`Site Considerations: ${W.requirements_parsed.site_considerations}`,20,ke),ke+=7)),ke=280,me.setFontSize(9),me.setFont(void 0,"italic"),me.text(`Generated on ${new Date().toLocaleString()}`,105,ke,{align:"center"});const ht=`Project_${W.id}_${W.homeowner_name?.replace(/\s+/g,"_")||"Details"}.pdf`;me.save(ht),D.success("PDF downloaded successfully")},ta=async()=>{try{const me=await(await fetch("/buildhub/backend/api/architect/get_my_designs.php")).json();me.success&&A(me.designs||[])}catch(W){console.error("Error fetching designs:",W)}};Array.isArray(l)&&l.length;const ie=W=>String(W||"").toLowerCase(),at=Array.isArray(l)?l.filter(W=>{const me=ie(W.status),ke=me==="pending"||me==="awaiting"||me==="in_review"||me==="processing",tt=(Number(W.accepted_count)||0)===0&&(Number(W.rejected_count)||0)===0;return ke||tt}).length:0,Ot=Array.isArray(l)?l.filter(W=>{const me=ie(W.status),ke=me==="accepted"||me==="approved"||me==="finalized"||me==="completed",tt=(Number(W.accepted_count)||0)>0;return ke||tt}).length:0,Ct=Array.isArray(u)?u.length:0,ia=Array.isArray(H)?H.length:0;w.useEffect(()=>{let W=!0;const me=async()=>{try{const ht=await(await fetch("/buildhub/backend/api/architect/get_assigned_requests.php")).json().catch(()=>({}));if(W&&ht?.success){const It=(ht.assignments||[]).map(Jt=>({...Jt.layout_request,assignment_id:Jt.assignment_id,assignment_status:Jt.assignment_status,assigned_at:Jt.assigned_at,assignment_message:Jt.message,homeowner_name:Jt.homeowner.name,homeowner_email:Jt.homeowner.email,homeowner_id:Jt.homeowner.id}));d(It)}}catch{}try{const ht=await(await fetch("/buildhub/backend/api/architect/get_layout_requests.php")).json().catch(()=>({}));W&&ht?.success&&setAvailableRequests(Array.isArray(ht.requests)?ht.requests:[])}catch{}try{const ht=await(await fetch("/buildhub/backend/api/architect/get_my_designs.php")).json().catch(()=>({}));W&&ht?.success&&A(Array.isArray(ht.designs)?ht.designs:[])}catch{}try{const ht=await(await fetch("/buildhub/backend/api/architect/get_my_layouts.php")).json().catch(()=>({}));W&&ht?.success&&re(Array.isArray(ht.layouts)?ht.layouts:[])}catch{}};me();const ke=setInterval(me,6e4);return()=>{W=!1,clearInterval(ke)}},[]);const ca=async W=>{try{const ke=await(await fetch("/buildhub/backend/api/architect/finalize_design.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({design_id:W})})).json();ke.success?(D.success("Design finalized"),A(tt=>tt.map(ht=>ht.id===W?{...ht,status:"finalized"}:ht))):D.error(ke.message||"Failed to finalize")}catch{D.error("Network error while finalizing")}},Za=async()=>{T(!0);try{const me=await(await fetch("/buildhub/backend/api/architect/get_my_profile.php")).json();if(me.success){const ke=me.profile||{};if(E({specialization:ke.specialization||"",experience_years:ke.experience_years??"",email:ke.email||"",phone:ke.phone||"",city:ke.city||"",avg_rating:ke.avg_rating??null,review_count:ke.review_count||0}),me.profile?.id||sessionStorage.getItem("user")){const tt=JSON.parse(sessionStorage.getItem("user")||"{}"),ht=me.profile?.id||tt.id;if(ht){Be(!0),ue("");try{const It=await(await fetch(`/buildhub/backend/api/reviews/get_reviews.php?architect_id=${ht}`)).json();It.success?(ee(Array.isArray(It.reviews)?It.reviews:[]),typeof It.avg_rating=="number"&&E(Jt=>({...Jt,avg_rating:It.avg_rating})),typeof It.review_count=="number"&&E(Jt=>({...Jt,review_count:It.review_count}))):ue(It.message||"Failed to load reviews")}catch{ue("Network error while loading reviews")}finally{Be(!1)}}}}}catch{}finally{T(!1)}},os=async W=>{W?.preventDefault?.(),q(!0);try{const me={specialization:U.specialization,experience_years:U.experience_years===""?null:Number(U.experience_years),phone:U.phone,city:U.city},tt=await(await fetch("/buildhub/backend/api/architect/update_my_profile.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(me)})).json();tt.success?(C("Profile updated"),Za()):v(tt.message||"Failed to update profile")}catch{v("Error updating profile")}finally{q(!1)}},Ba=async()=>{try{const me=await(await fetch("/buildhub/backend/api/architect/get_my_layouts.php")).json();me.success&&re(me.layouts||[])}catch(W){console.error("Error fetching my layouts",W)}},xa=async W=>{W&&W.preventDefault();const me=new FormData;Object.entries(Et).forEach(([ke,tt])=>{tt!==null&&tt!==""&&me.append(ke,tt)});try{const tt=await(await fetch("/buildhub/backend/api/architect/create_layout_library_item.php",{method:"POST",body:me})).json();tt.success?(C("Layout added to library"),V(!1),K(0),Mt({title:"",layout_type:"",bedrooms:"",bathrooms:"",area:"",price_range:"",description:"",image:null,design_file:null,technical_details:{}}),Ba()):v(tt.message||"Failed to add layout")}catch{v("Error adding layout")}},[Dt,ye]=w.useState(null),Ce=W=>{ye({...W,image:null,design_file:null})},Ve=()=>ye(null),gt=async W=>{if(W.preventDefault(),!Dt)return;const me=new FormData;me.append("id",Dt.id),["title","layout_type","bedrooms","bathrooms","area","price_range","description","status","view_price"].forEach(ke=>{Dt[ke]!==void 0&&Dt[ke]!==null&&Dt[ke]!==""&&me.append(ke,Dt[ke])}),Dt.image&&me.append("image",Dt.image),Dt.design_file&&me.append("design_file",Dt.design_file);try{const tt=await(await fetch("/buildhub/backend/api/architect/update_layout_library_item.php",{method:"POST",body:me})).json();tt.success?(C("Layout updated"),ye(null),Ba(),setTimeout(()=>C(""),3e3)):(v(tt.message||"Failed to update layout"),setTimeout(()=>v(""),3e3))}catch{v("Error updating layout"),setTimeout(()=>v(""),3e3)}},Qt=async W=>{if(console.log("=== TOGGLE LAYOUT STATUS DEBUG ==="),console.log("Item:",W),console.log("Item ID:",W?.id,"Type:",typeof W?.id),!W){v("Invalid layout item"),setTimeout(()=>v(""),3e3);return}const me=W.id;if(console.log("Layout ID:",me),me==null){console.error("Layout ID is missing or invalid"),v("Layout ID is missing"),setTimeout(()=>v(""),3e3);return}const ke=W.status==="active"?"inactive":"active",tt={id:Number(me),status:ke};console.log("Payload:",tt);try{const Lt=await(await fetch("/buildhub/backend/api/architect/update_layout_library_item.php",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(tt)})).json();console.log("Response:",Lt),Lt.success?(re(It=>It.map(Jt=>Jt.id===me?{...Jt,status:ke}:Jt)),C(`Layout ${ke==="active"?"activated":"deactivated"} successfully`),setTimeout(()=>C(""),3e3)):(v(Lt.message||"Failed to change status"),setTimeout(()=>v(""),3e3))}catch{v("Error changing status"),setTimeout(()=>v(""),3e3)}},ja=async(W,me)=>{try{m(!0);const tt=await(await fetch("/buildhub/backend/api/architect/respond_assignment.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({assignment_id:W,action:me})})).json();tt.success?(D.success(`Assignment ${me}ed successfully`),qt()):D.error(tt.message||`Failed to ${me} assignment`)}catch(ke){console.error("Error responding to assignment:",ke),D.error("Network error occurred")}finally{m(!1)}},va=async(W,me)=>{if(lt){Nt(!0);try{const ke={plan_name:`${lt.homeowner_name||"Client"} House Plan`,plot_width:parseFloat(lt.plot_size)||100,plot_height:parseFloat(lt.plot_size)||100,rooms:[],scale_ratio:1.2,total_layout_area:0,total_construction_area:0,floors:{total_floors:lt.floors||1,current_floor:1,floor_names:{1:"Ground Floor"}}};console.log("Creating house plan for upload design:",{layout_request_id:lt.id,plan_data:ke});const tt={layout_request_id:lt.id,plan_name:ke.plan_name,plot_width:ke.plot_width,plot_height:ke.plot_height,plan_data:ke,notes:"Upload Design with Technical Details"},ht=await fetch("/buildhub/backend/api/architect/create_house_plan.php",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"include",body:JSON.stringify(tt)});if(!ht.ok)throw new Error(`Failed to create house plan: HTTP ${ht.status}`);const Lt=await ht.json();if(!Lt.success)throw new Error(Lt.message||"Failed to create house plan");const It=Lt.plan_id;console.log("House plan created successfully with ID:",It);let Jt=W;me&&(console.log("Uploading files for plan ID:",It),Jt=await me(It));const Ht={plan_id:It,plan_data:ke,technical_details:Jt};console.log("Submitting plan with technical details:",Ht);const Wt=await fetch("/buildhub/backend/api/architect/submit_house_plan_with_details.php",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"include",body:JSON.stringify(Ht)});if(!Wt.ok)throw new Error(`Failed to submit plan: HTTP ${Wt.status}`);const wa=await Wt.json();if(wa.success)xt(!1),Ut(null),D.success("Design Uploaded Successfully!","Your design with technical details has been submitted to the homeowner for review."),qt();else throw new Error(wa.message||"Upload failed")}catch(ke){console.error("Error uploading design:",ke),D.error("Upload Failed",`Failed to upload design: ${ke.message}. Please try again.`)}finally{Nt(!1)}}},[_a,Na]=w.useState(null),Pa=W=>Na(W),ls=()=>Na(null),cs=W=>/\.(png|jpe?g|gif|webp|bmp)$/i.test(W||""),Gs=W=>/\.(pdf)$/i.test(W||""),yn=()=>{if(!_a)return null;const W=_a.image_url||null,me=_a.design_file_url||null,ke=(i?.first_name||"")+" "+(i?.last_name||""),tt=i?.email||"",ht=me&&(cs(me)||Gs(me));return e.jsx("div",{className:"form-modal",onClick:ls,children:e.jsxs("div",{className:"form-content",style:{maxWidth:"90vw",width:"1100px"},onClick:Lt=>Lt.stopPropagation(),children:[e.jsxs("div",{className:"form-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{children:[e.jsx("h3",{style:{margin:0},children:_a.title||"Preview"}),_a.layout_type&&e.jsx("p",{style:{margin:"4px 0 0 0",color:"#64748b"},children:_a.layout_type})]}),e.jsx("button",{className:"btn btn-secondary",onClick:ls,children:"Close"})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1.2fr .8fr",gap:"16px"},children:[e.jsx("div",{style:{border:"1px solid #e5e7eb",borderRadius:10,overflow:"hidden",background:"#000"},children:ht?cs(me)?e.jsx("img",{src:me,alt:"Layout",style:{width:"100%",height:"80vh",objectFit:"contain",background:"#000"}}):e.jsx("iframe",{src:me,title:"Layout PDF",style:{width:"100%",height:"80vh",border:"none",background:"#fff"}}):W?e.jsx("img",{src:W,alt:"Preview",style:{width:"100%",height:"80vh",objectFit:"contain"}}):e.jsx("div",{style:{padding:24},children:"No preview available. You can download the layout file from the card."})}),e.jsxs("div",{children:[W&&e.jsx("div",{style:{border:"1px solid #e5e7eb",borderRadius:10,overflow:"hidden",background:"#fff"},children:e.jsx("img",{src:W,alt:"Preview",style:{width:"100%",height:260,objectFit:"cover"}})}),e.jsxs("div",{className:"drawer-section",style:{marginTop:16},children:[e.jsx("h4",{children:"Details"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8},children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Bedrooms:"})," ",_a.bedrooms??"-"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Bathrooms:"})," ",_a.bathrooms??"-"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Area:"})," ",_a.area?`${_a.area} sq ft`:"-"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Price:"})," ",_a.price_range??"-"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Architect:"})," ",ke.trim()||"You"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Email:"})," ",tt||"-"]})]}),_a.description&&e.jsx("p",{style:{marginTop:10,whiteSpace:"pre-wrap"},children:_a.description}),_a.technical_details&&e.jsxs("div",{style:{marginTop:"16px",padding:"12px",background:"#f8f9fa",borderRadius:"6px",border:"1px solid #e9ecef"},children:[e.jsx("h5",{style:{margin:"0 0 8px 0",fontSize:"0.9rem",color:"#495057"},children:"Technical Specifications"}),e.jsx(vl,{technicalDetails:_a.technical_details,compact:!0})]}),me&&!ht&&e.jsx("a",{className:"btn btn-primary",href:me,target:"_blank",rel:"noreferrer",style:{marginTop:10,display:"inline-block"},children:"Download Layout"})]})]})]})]})})},ge=async()=>{try{await fetch("/buildhub/backend/api/logout.php",{method:"POST",credentials:"include"})}catch{}localStorage.removeItem("bh_user"),sessionStorage.removeItem("user"),t("/login",{replace:!0})},it=async W=>{if(W.preventDefault(),Ze.files.length===0){v("Please select at least one file");return}try{m(!0);const me=new FormData;Ze.request_id&&me.append("request_id",Ze.request_id),Ze.homeowner_id&&me.append("homeowner_id",Ze.homeowner_id),Ze.design_title&&me.append("design_title",Ze.design_title),Ze.description&&me.append("description",Ze.description),Ze.technical_details&&Object.keys(Ze.technical_details).length>0&&me.append("technical_details",JSON.stringify(Ze.technical_details)),typeof Ze.view_price<"u"&&Ze.view_price!==null&&String(Ze.view_price).trim()!==""&&me.append("view_price",String(Ze.view_price));for(let ht=0;ht<Ze.files.length;ht++)me.append("design_files[]",Ze.files[ht]);const tt=await(await fetch("/buildhub/backend/api/architect/upload_design.php",{method:"POST",body:me})).json();tt.success?(C("Design uploaded successfully!"),_(!1),Je({request_id:"",homeowner_id:"",design_title:"",description:"",technical_details:{},files:[]}),O(0),ta()):v("Failed to upload design: "+tt.message)}catch{v("Error uploading design")}finally{m(!1)}},$e=()=>e.jsxs("div",{children:[e.jsx("div",{className:"main-header",children:e.jsxs("div",{className:"header-content",children:[e.jsxs("div",{children:[e.jsx("h1",{children:"Dashboard"}),e.jsx("p",{children:"Manage your architectural designs and connect with clients"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[e.jsx("button",{className:"btn btn-secondary",onClick:Bt,disabled:p,style:{display:"flex",alignItems:"center",gap:"6px"},children:p?"Refreshing...":" Refresh Dashboard"}),e.jsx("div",{className:"header-profile",children:e.jsx(b6,{user:i,position:"bottom-right",onProfileClick:()=>s("profile"),onLogout:ge})})]})]})}),e.jsxs("div",{className:"stats-grid",children:[e.jsx("div",{className:"stat-card w-purple",children:e.jsxs("div",{className:"stat-content",children:[e.jsx("div",{className:"stat-icon requests",children:""}),e.jsxs("div",{className:"stat-info",children:[e.jsx("h3",{children:l.length}),e.jsx("p",{children:"Available Requests"})]})]})}),e.jsx("div",{className:"stat-card w-blue",children:e.jsxs("div",{className:"stat-content",children:[e.jsx("div",{className:"stat-icon designs",children:""}),e.jsxs("div",{className:"stat-info",children:[e.jsx("h3",{children:u.length}),e.jsx("p",{children:"Designs Created"})]})]})}),e.jsx("div",{className:"stat-card w-green",children:e.jsxs("div",{className:"stat-content",children:[e.jsx("div",{className:"stat-icon approved",children:""}),e.jsxs("div",{className:"stat-info",children:[e.jsx("h3",{children:u.filter(W=>W.status==="approved").length}),e.jsx("p",{children:"Approved Designs"})]})]})}),e.jsx("div",{className:"stat-card w-orange",children:e.jsxs("div",{className:"stat-content",children:[e.jsx("div",{className:"stat-icon progress",children:""}),e.jsxs("div",{className:"stat-info",children:[e.jsx("h3",{children:u.filter(W=>W.status==="in-progress").length}),e.jsx("p",{children:"In Progress"})]})]})})]}),e.jsxs("div",{className:"section-card",children:[e.jsxs("div",{className:"section-header",children:[e.jsx("h2",{children:"Quick Actions"}),e.jsx("p",{children:"Get started with your architectural projects"})]}),e.jsx("div",{className:"section-content",children:e.jsxs("div",{className:"quick-actions float-grid stagger-children",children:[e.jsxs("button",{className:"float-rect w-blue",onClick:()=>s("requests"),children:[e.jsx("div",{className:"fr-icon",children:""}),e.jsx("div",{className:"fr-title",children:"Upload New Design"}),e.jsx("div",{className:"fr-sub",children:"Create and submit architectural designs for client requests"})]}),e.jsxs("button",{className:"float-rect w-orange",onClick:()=>s("requests"),children:[e.jsx("div",{className:"fr-icon",children:""}),e.jsx("div",{className:"fr-title",children:"Browse Requests"}),e.jsx("div",{className:"fr-sub",children:"View available client requests waiting for designs"})]}),e.jsxs("button",{className:"float-rect w-purple",onClick:()=>s("designs"),children:[e.jsx("div",{className:"fr-icon",children:""}),e.jsx("div",{className:"fr-title",children:"My Portfolio"}),e.jsx("div",{className:"fr-sub",children:"Manage your submitted designs and track their status"})]})]})})]}),e.jsxs("div",{className:"section-card",children:[e.jsxs("div",{className:"section-header",children:[e.jsx("h2",{children:"Recent Activity"}),e.jsx("p",{children:"Latest updates on your designs and client requests"})]}),e.jsx("div",{className:"section-content",children:e.jsxs("div",{className:"item-list",children:[u.slice(0,5).map(W=>e.jsxs("div",{className:"list-item",children:[e.jsx("div",{className:"item-icon",children:W.status==="approved"?"":W.status==="rejected"?"":""}),e.jsxs("div",{className:"item-content",children:[e.jsx("h4",{className:"item-title",children:W.design_title}),e.jsxs("p",{className:"item-subtitle",children:["Client: ",W.client_name]}),e.jsxs("p",{className:"item-meta",children:["Submitted: ",new Date(W.created_at).toLocaleDateString()]})]}),e.jsxs("div",{className:"item-actions",style:{display:"flex",alignItems:"center",gap:8},children:[e.jsx("span",{className:`status-badge ${Eg(W.status)}`,children:vp(W.status)}),W.status!=="finalized"&&e.jsx("button",{className:"btn btn-secondary",onClick:()=>ca(W.id),children:"Finalize"})]})]},W.id)),u.length===0&&e.jsxs("div",{className:"empty-state",children:[e.jsx("div",{className:"empty-icon",children:""}),e.jsx("h3",{children:"No Designs Yet"}),e.jsx("p",{children:"Start by creating your first architectural design!"}),e.jsx("button",{className:"btn btn-primary",onClick:()=>_(!0),children:"Upload Design"})]})]})})]})]}),zt=()=>e.jsxs("div",{children:[e.jsx("div",{className:"main-header",children:e.jsxs("div",{className:"header-content",children:[e.jsxs("div",{children:[e.jsx("h1",{children:"Project Assignments"}),e.jsx("p",{children:"Homeowner requests assigned specifically to you"})]}),e.jsx("button",{className:"btn btn-primary",onClick:()=>t("/architect/upload"),children:"+ Upload Design"})]})}),e.jsxs("div",{className:"section-card",children:[e.jsxs("div",{className:"section-header",children:[e.jsxs("div",{children:[e.jsx("h2",{children:"Your Assigned Projects"}),e.jsx("p",{children:"Accept or decline project assignments from homeowners"})]}),e.jsx("button",{className:"btn btn-secondary",onClick:Bt,disabled:p,style:{marginLeft:"auto"},children:p?"Refreshing...":" Refresh"})]}),e.jsx("div",{className:"section-content",children:p?e.jsx("div",{className:"loading",children:"Loading assignments..."}):l.length===0?e.jsxs("div",{className:"empty-state",children:[e.jsx("div",{className:"empty-icon",children:""}),e.jsx("h3",{children:"No Accepted Projects"}),e.jsx("p",{children:"You haven't accepted any project assignments yet. Check available requests to accept new projects."})]}):e.jsx("div",{className:"item-list",children:l.map(W=>e.jsxs("div",{className:"list-item",children:[e.jsx("div",{className:"item-image",children:W.site_images&&Array.isArray(W.site_images)&&W.site_images.length>0?e.jsx("img",{src:typeof W.site_images[0]=="string"?W.site_images[0]:W.site_images[0]?.url,alt:"Site",style:{width:48,height:48,objectFit:"cover",borderRadius:6}}):W.reference_images&&Array.isArray(W.reference_images)&&W.reference_images.length>0?e.jsx("img",{src:typeof W.reference_images[0]=="string"?W.reference_images[0]:W.reference_images[0]?.url,alt:"Reference",style:{width:48,height:48,objectFit:"cover",borderRadius:6}}):""}),e.jsxs("div",{className:"item-content",children:[e.jsxs("h4",{className:"item-title",children:[W.homeowner_name,"'s Project"]}),e.jsxs("p",{className:"item-subtitle",children:[W.plot_size,"  Budget: ",W.budget_range]}),e.jsxs("div",{className:"item-details",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Location:"})," ",W.location||"Not specified"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Timeline:"})," ",W.timeline||"Not specified"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Floors:"})," ",W.num_floors||"Not specified"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Style:"})," ",W.preferred_style||"Not specified"]}),W.assignment_message&&e.jsxs("p",{children:[e.jsx("strong",{children:"Message:"})," ",W.assignment_message]}),W.requirements_parsed&&e.jsxs("div",{className:"requirements-summary",children:[e.jsx("p",{children:e.jsx("strong",{children:"Requirements:"})}),e.jsx(Kf,{requirements:W.requirements_parsed,compact:!0})]})]}),e.jsxs("p",{className:"item-meta",children:["Assigned: ",new Date(W.assigned_at).toLocaleDateString(),"  Contact: ",W.homeowner_email]})]}),e.jsxs("div",{className:"item-actions",children:[e.jsx("span",{className:"status-badge accepted",children:"Accepted Project"}),e.jsxs("div",{className:"action-buttons",children:[e.jsx("button",{className:"btn btn-primary",onClick:()=>{Oe(W.id),s("house-plans"),ve(!0)},children:"Create Design"}),e.jsx("button",{className:"btn btn-success",onClick:()=>{Ut(W),xt(!0)},title:"Upload design with technical details",children:" Upload Design"}),e.jsx("button",{className:"btn btn-danger btn-sm",onClick:()=>ja(W.assignment_id,"reject"),disabled:p,title:"Cancel this assignment",children:"Remove"})]}),e.jsx("button",{className:"btn btn-secondary btn-sm",onClick:()=>Ee(me=>({...me,[W.id]:!me[W.id]})),children:Ne[W.id]?"Hide Details":"View Images & Details"}),e.jsx("button",{className:"btn btn-success btn-sm",onClick:()=>Xt(W),title:"Download project details as PDF",style:{display:"flex",alignItems:"center",gap:"4px"},children:" Download PDF"})]}),Ne[W.id]&&e.jsxs("div",{className:"expanded-details",style:{marginTop:"20px",padding:"24px",background:"linear-gradient(135deg, #f8fafc 0%, #ffffff 100%)",borderRadius:"12px",border:"1px solid #e2e8f0",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.1)",position:"relative",overflow:"visible",width:"100%",minHeight:"auto",zIndex:1},children:[e.jsxs("div",{className:"project-overview",style:{marginBottom:"24px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"16px",padding:"0 0 12px 0",borderBottom:"1px solid #e2e8f0"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[e.jsx("span",{style:{fontSize:"20px",marginRight:"8px"},children:""}),e.jsx("h4",{style:{margin:0,color:"#1f2937",fontSize:"18px",fontWeight:"600"},children:"Project Overview"})]}),e.jsxs("div",{style:{display:"flex",gap:"8px",fontSize:"12px",color:"#6b7280"},children:[e.jsxs("span",{style:{background:"#e0f2fe",color:"#0369a1",padding:"2px 8px",borderRadius:"12px",fontWeight:"500"},children:[W.num_floors||"N/A"," Floors"]}),e.jsx("span",{style:{background:"#f0fdf4",color:"#166534",padding:"2px 8px",borderRadius:"12px",fontWeight:"500"},children:W.preferred_style||"Any Style"})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(220px, 1fr))",gap:"16px",marginBottom:"20px"},children:[e.jsxs("div",{style:{background:"white",padding:"16px 20px",borderRadius:"10px",border:"1px solid #e5e7eb",boxShadow:"0 2px 6px rgba(0, 0, 0, 0.08)",transition:"all 0.2s ease",minHeight:"80px",display:"flex",flexDirection:"column",justifyContent:"space-between"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:"8px"},children:[e.jsx("span",{style:{fontSize:"16px",marginRight:"8px",color:"#3b82f6"},children:""}),e.jsx("span",{style:{fontSize:"14px",fontWeight:"600",color:"#374151"},children:"Plot Size"})]}),e.jsx("div",{style:{fontSize:"16px",fontWeight:"500",color:"#1f2937"},children:W.plot_size||"Not specified"})]}),e.jsxs("div",{style:{background:"white",padding:"16px 20px",borderRadius:"10px",border:"1px solid #e5e7eb",boxShadow:"0 2px 6px rgba(0, 0, 0, 0.08)",transition:"all 0.2s ease",minHeight:"80px",display:"flex",flexDirection:"column",justifyContent:"space-between"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:"8px"},children:[e.jsx("span",{style:{fontSize:"16px",marginRight:"8px",color:"#10b981"},children:""}),e.jsx("span",{style:{fontSize:"14px",fontWeight:"600",color:"#374151"},children:"Budget Range"})]}),e.jsx("div",{style:{fontSize:"16px",fontWeight:"500",color:"#1f2937"},children:W.budget_range||"Not specified"})]}),e.jsxs("div",{style:{background:"white",padding:"16px 20px",borderRadius:"10px",border:"1px solid #e5e7eb",boxShadow:"0 2px 6px rgba(0, 0, 0, 0.08)",transition:"all 0.2s ease",minHeight:"80px",display:"flex",flexDirection:"column",justifyContent:"space-between"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:"8px"},children:[e.jsx("span",{style:{fontSize:"16px",marginRight:"8px",color:"#f59e0b"},children:""}),e.jsx("span",{style:{fontSize:"14px",fontWeight:"600",color:"#374151"},children:"Timeline"})]}),e.jsx("div",{style:{fontSize:"16px",fontWeight:"500",color:"#1f2937"},children:W.timeline||"Not specified"})]}),e.jsxs("div",{style:{background:"white",padding:"16px 20px",borderRadius:"10px",border:"1px solid #e5e7eb",boxShadow:"0 2px 6px rgba(0, 0, 0, 0.08)",transition:"all 0.2s ease",minHeight:"80px",display:"flex",flexDirection:"column",justifyContent:"space-between"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:"8px"},children:[e.jsx("span",{style:{fontSize:"16px",marginRight:"8px",color:"#8b5cf6"},children:""}),e.jsx("span",{style:{fontSize:"14px",fontWeight:"600",color:"#374151"},children:"Location"})]}),e.jsx("div",{style:{fontSize:"16px",fontWeight:"500",color:"#1f2937"},children:W.location||"Not specified"})]})]}),e.jsxs("div",{style:{display:"flex",gap:"12px",flexWrap:"wrap",alignItems:"center"},children:[W.orientation&&e.jsxs("div",{style:{background:"linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%)",padding:"8px 12px",borderRadius:"20px",border:"1px solid #bae6fd",display:"flex",alignItems:"center",gap:"6px",fontSize:"14px",fontWeight:"500",color:"#0369a1"},children:[e.jsx("span",{children:""}),e.jsxs("span",{children:["Orientation: ",W.orientation]})]}),W.budget_allocation&&e.jsxs("div",{style:{background:"linear-gradient(135deg, #f0fdf4 0%, #dcfce7 100%)",padding:"8px 12px",borderRadius:"20px",border:"1px solid #bbf7d0",display:"flex",alignItems:"center",gap:"6px",fontSize:"14px",fontWeight:"500",color:"#166534"},children:[e.jsx("span",{children:""}),e.jsxs("span",{children:["Allocation: ",W.budget_allocation]})]})]})]}),W.material_preferences&&W.material_preferences.length>0&&e.jsxs("div",{className:"material-preferences",style:{marginBottom:"20px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:"12px"},children:[e.jsx("span",{style:{fontSize:"16px",marginRight:"8px",color:"#3b82f6"},children:""}),e.jsx("h4",{style:{margin:0,color:"#1f2937",fontSize:"16px",fontWeight:"600"},children:"Material Preferences"}),e.jsxs("span",{style:{marginLeft:"8px",background:"#e0f2fe",color:"#0369a1",padding:"4px 10px",borderRadius:"12px",fontSize:"13px",fontWeight:"500"},children:[W.material_preferences.length," materials"]})]}),e.jsx("div",{style:{background:"white",padding:"12px 16px",borderRadius:"8px",border:"1px solid #e5e7eb",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.05)"},children:e.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"8px"},children:W.material_preferences.map((me,ke)=>e.jsx("span",{style:{background:"linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%)",color:"white",padding:"6px 14px",borderRadius:"16px",fontSize:"14px",fontWeight:"500",boxShadow:"0 1px 3px rgba(59, 130, 246, 0.3)",transition:"all 0.2s ease",cursor:"default"},children:me},ke))})})]}),(W.requirements||W.requirements_parsed)&&e.jsx("div",{style:{marginBottom:"20px"},children:e.jsx(Kf,{requirements:W.requirements||W.requirements_parsed,compact:!1})}),W.site_considerations&&e.jsxs("div",{className:"site-considerations",style:{marginBottom:"20px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:"12px"},children:[e.jsx("span",{style:{fontSize:"16px",marginRight:"8px",color:"#059669"},children:""}),e.jsx("h4",{style:{margin:0,color:"#1f2937",fontSize:"16px",fontWeight:"600"},children:"Site Considerations"})]}),e.jsx("div",{style:{background:"white",padding:"12px 16px",borderRadius:"8px",border:"1px solid #e5e7eb",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.05)"},children:e.jsx("p",{style:{fontSize:"15px",margin:0,lineHeight:"1.6",color:"#4b5563",whiteSpace:"pre-wrap"},children:W.site_considerations})})]}),e.jsxs("div",{className:"images-section",style:{marginBottom:"24px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"16px",padding:"0 0 12px 0",borderBottom:"1px solid #e2e8f0"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[e.jsx("span",{style:{fontSize:"18px",marginRight:"8px",color:"#3b82f6"},children:""}),e.jsx("h4",{style:{margin:0,color:"#1f2937",fontSize:"16px",fontWeight:"600"},children:"Project Images"})]}),e.jsxs("div",{style:{display:"flex",gap:"8px",fontSize:"11px",color:"#6b7280"},children:[W.site_images&&W.site_images.length>0&&e.jsxs("span",{style:{background:"#e0f2fe",color:"#0369a1",padding:"4px 10px",borderRadius:"12px",fontSize:"13px",fontWeight:"500"},children:[W.site_images.length," site"]}),W.room_images&&Object.keys(W.room_images).length>0&&e.jsxs("span",{style:{background:"#f0fdf4",color:"#166534",padding:"4px 10px",borderRadius:"12px",fontSize:"13px",fontWeight:"500"},children:[Object.values(W.room_images).flat().length," room"]})]})]}),W.site_images&&W.site_images.length>0&&e.jsxs("div",{style:{marginBottom:"20px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:"12px"},children:[e.jsx("span",{style:{fontSize:"14px",marginRight:"6px",color:"#059669"},children:""}),e.jsx("h5",{style:{margin:0,color:"#374151",fontWeight:"600",fontSize:"16px"},children:"Site Images"}),e.jsx("span",{style:{marginLeft:"8px",background:"#e0f2fe",color:"#0369a1",padding:"4px 8px",borderRadius:"10px",fontSize:"12px",fontWeight:"500"},children:W.site_images.length})]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(180px, 1fr))",gap:"12px"},children:W.site_images.map((me,ke)=>e.jsxs("div",{className:"image-card",style:{position:"relative",borderRadius:"8px",overflow:"hidden",boxShadow:"0 1px 4px rgba(0, 0, 0, 0.1)",transition:"all 0.2s ease",cursor:"pointer",border:"1px solid #e5e7eb"},onMouseEnter:tt=>{const ht=tt.currentTarget;ht.style.transform="scale(1.02)",ht.style.boxShadow="0 2px 8px rgba(0, 0, 0, 0.15)";const Lt=ht.querySelector(".hover-overlay");Lt&&(Lt.style.display="flex")},onMouseLeave:tt=>{const ht=tt.currentTarget;ht.style.transform="scale(1)",ht.style.boxShadow="0 1px 4px rgba(0, 0, 0, 0.1)";const Lt=ht.querySelector(".hover-overlay");Lt&&(Lt.style.display="none")},children:[e.jsx("img",{src:typeof me=="string"?me:me.url,alt:`Site ${ke+1}`,style:{width:"100%",height:"120px",objectFit:"cover"},onError:tt=>{tt.target.style.display="none"}}),e.jsxs("div",{style:{position:"absolute",top:"6px",left:"6px",background:"rgba(0,0,0,0.7)",color:"white",padding:"4px 10px",borderRadius:"6px",fontSize:"12px",fontWeight:"600",backdropFilter:"blur(4px)"},children:["Site ",ke+1]}),e.jsxs("div",{className:"hover-overlay",style:{position:"absolute",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.6)",display:"none",alignItems:"center",justifyContent:"center",gap:"8px",transition:"opacity 0.2s ease"},children:[e.jsx("button",{onClick:tt=>{tt.stopPropagation(),window.open(typeof me=="string"?me:me.url,"_blank")},style:{padding:"8px 14px",background:"rgba(255,255,255,0.95)",border:"none",borderRadius:"4px",fontSize:"13px",fontWeight:"600",color:"#374151",cursor:"pointer",display:"flex",alignItems:"center",gap:"4px",backdropFilter:"blur(4px)",boxShadow:"0 1px 4px rgba(0,0,0,0.2)"},children:" View"}),e.jsx("a",{href:typeof me=="string"?me:me.url,download:`site-image-${ke+1}`,onClick:tt=>tt.stopPropagation(),style:{padding:"8px 14px",background:"rgba(59, 130, 246, 0.95)",border:"none",borderRadius:"4px",fontSize:"13px",fontWeight:"600",color:"white",textDecoration:"none",cursor:"pointer",display:"flex",alignItems:"center",gap:"4px",backdropFilter:"blur(4px)",boxShadow:"0 1px 4px rgba(0,0,0,0.2)"},children:" Download"})]})]},`site-${ke}`))})]}),W.reference_images&&W.reference_images.length>0&&e.jsxs("div",{style:{marginBottom:"20px"},children:[e.jsx("h5",{style:{margin:"0 0 12px 0",color:"#374151",fontWeight:"600"},children:"Reference Images"}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(200px, 1fr))",gap:"12px"},children:W.reference_images.map((me,ke)=>e.jsxs("div",{className:"image-card",style:{position:"relative",borderRadius:"8px",overflow:"hidden"},children:[e.jsx("img",{src:typeof me=="string"?me:me.url,alt:`Reference ${ke+1}`,style:{width:"100%",height:"150px",objectFit:"cover"},onError:tt=>{tt.target.style.display="none"}}),e.jsxs("div",{style:{position:"absolute",top:"8px",left:"8px",background:"rgba(0,0,0,0.7)",color:"white",padding:"4px 8px",borderRadius:"4px",fontSize:"12px",fontWeight:"500"},children:["Reference ",ke+1]})]},`ref-${ke}`))})]}),W.room_images&&Object.keys(W.room_images).length>0&&e.jsxs("div",{children:[e.jsx("h5",{style:{margin:"0 0 12px 0",color:"#374151",fontWeight:"600"},children:"Room-Specific Images"}),Object.entries(W.room_images).map(([me,ke])=>e.jsxs("div",{style:{marginBottom:"16px"},children:[e.jsx("h6",{style:{margin:"0 0 8px 0",color:"#6b7280",fontWeight:"500",textTransform:"capitalize"},children:me.replace("floor","Floor ")}),Object.entries(ke||{}).map(([tt,ht])=>ht&&ht.length>0&&e.jsxs("div",{style:{marginBottom:"12px"},children:[e.jsx("div",{style:{fontSize:"13px",fontWeight:"500",color:"#6b7280",marginBottom:"6px",textTransform:"capitalize"},children:tt.replace("_"," ")}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(150px, 1fr))",gap:"8px"},children:ht.map((Lt,It)=>e.jsxs("div",{className:"image-card",style:{position:"relative",borderRadius:"6px",overflow:"hidden",cursor:"pointer",transition:"transform 0.2s ease"},onMouseEnter:Jt=>{const Ht=Jt.currentTarget;Ht.style.transform="scale(1.05)";const Wt=Ht.querySelector(".room-hover-overlay");Wt&&(Wt.style.display="flex")},onMouseLeave:Jt=>{const Ht=Jt.currentTarget;Ht.style.transform="scale(1)";const Wt=Ht.querySelector(".room-hover-overlay");Wt&&(Wt.style.display="none")},children:[e.jsx("img",{src:typeof Lt=="string"?Lt:Lt.url,alt:`${tt} ${It+1}`,style:{width:"100%",height:"100px",objectFit:"cover"},onError:Jt=>{Jt.target.style.display="none"}}),e.jsx("div",{style:{position:"absolute",top:"4px",left:"4px",background:"rgba(0,0,0,0.7)",color:"white",padding:"2px 6px",borderRadius:"3px",fontSize:"10px"},children:tt}),e.jsxs("div",{className:"room-hover-overlay",style:{position:"absolute",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.5)",display:"none",alignItems:"center",justifyContent:"center",gap:"8px",transition:"opacity 0.3s ease"},children:[e.jsx("button",{onClick:Jt=>{Jt.stopPropagation(),window.open(typeof Lt=="string"?Lt:Lt.url,"_blank")},style:{padding:"6px 12px",background:"rgba(255,255,255,0.9)",border:"none",borderRadius:"4px",fontSize:"11px",fontWeight:"600",color:"#374151",cursor:"pointer",display:"flex",alignItems:"center",gap:"4px",backdropFilter:"blur(4px)"},children:" View"}),e.jsx("a",{href:typeof Lt=="string"?Lt:Lt.url,download:`${tt}-image-${It+1}`,onClick:Jt=>Jt.stopPropagation(),style:{padding:"6px 12px",background:"rgba(59, 130, 246, 0.9)",border:"none",borderRadius:"4px",fontSize:"11px",fontWeight:"600",color:"white",textDecoration:"none",cursor:"pointer",display:"flex",alignItems:"center",gap:"4px",backdropFilter:"blur(4px)"},children:" Download"})]})]},`${tt}-${It}`))})]},tt))]},me))]})]}),W.requirements_parsed&&e.jsxs("div",{className:"detailed-requirements",children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"16px",padding:"0 0 12px 0",borderBottom:"1px solid #e2e8f0"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[e.jsx("span",{style:{fontSize:"18px",marginRight:"8px",color:"#f59e0b"},children:""}),e.jsx("h4",{style:{margin:0,color:"#1f2937",fontSize:"16px",fontWeight:"600"},children:"Detailed Requirements"})]}),e.jsxs("span",{style:{background:"#fef3c7",color:"#d97706",padding:"4px 10px",borderRadius:"12px",fontSize:"13px",fontWeight:"500"},children:[Object.keys(W.requirements_parsed).filter(me=>me!=="notes"&&W.requirements_parsed[me]).length," items"]})]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"16px"},children:Object.entries(W.requirements_parsed).map(([me,ke])=>{if(!ke||me==="notes")return null;const ht=(Lt=>{if(!Lt)return"-";let It=Lt;if(typeof Lt=="string")try{It=JSON.parse(Lt)}catch{It=Lt}if(Array.isArray(It)){if(me==="rooms"){const Jt={};return It.forEach(Ht=>{Jt[Ht]=(Jt[Ht]||0)+1}),e.jsx("div",{style:{marginTop:"4px"},children:Object.entries(Jt).map(([Ht,Wt])=>e.jsxs("span",{style:{display:"inline-block",margin:"2px 4px 2px 0",padding:"4px 8px",backgroundColor:"#dbeafe",color:"#1e40af",borderRadius:"12px",fontSize:"12px",fontWeight:"500"},children:[Ht.replace(/_/g," "),": ",Wt]},Ht))})}return It.join(", ")}if(typeof It=="string"&&me==="rooms"){const Jt=It.split(",").map(Wt=>Wt.trim()).filter(Wt=>Wt),Ht={};return Jt.forEach(Wt=>{Ht[Wt]=(Ht[Wt]||0)+1}),e.jsx("div",{style:{marginTop:"4px"},children:Object.entries(Ht).map(([Wt,wa])=>e.jsxs("span",{style:{display:"inline-block",margin:"2px 4px 2px 0",padding:"4px 8px",backgroundColor:"#dbeafe",color:"#1e40af",borderRadius:"12px",fontSize:"12px",fontWeight:"500"},children:[Wt.replace(/_/g," "),": ",wa]},Wt))})}if(typeof It=="object"&&It!==null){if(me==="floor_rooms")return e.jsx("div",{style:{marginTop:"4px"},children:Object.entries(It).map(([Jt,Ht])=>e.jsxs("div",{style:{marginBottom:"4px",padding:"6px",background:"#f8fafc",borderRadius:"4px",border:"1px solid #e5e7eb"},children:[e.jsx("div",{style:{fontSize:"11px",fontWeight:"600",color:"#374151",marginBottom:"3px",textTransform:"capitalize"},children:Jt.replace(/_/g," ")}),e.jsx("div",{style:{fontSize:"11px",color:"#6b7280",lineHeight:"1.2"},children:Object.entries(Ht).map(([Wt,wa])=>e.jsxs("span",{style:{display:"inline-block",margin:"1px 3px 1px 0",padding:"1px 4px",background:"#dbeafe",color:"#1e40af",borderRadius:"8px",fontSize:"10px",fontWeight:"500"},children:[Wt.replace(/_/g," "),": ",wa]},Wt))})]},Jt))});if(me.includes("images")){const Ht=(()=>{if(Array.isArray(It))return It;const wa=[];return Object.entries(It).forEach(([ba,ka])=>{Array.isArray(ka)?wa.push(...ka):typeof ka=="object"&&Object.entries(ka).forEach(([gs,Ys])=>{Array.isArray(Ys)&&wa.push(...Ys.map(Wi=>({...Wi,floor:ba,room:gs})))})}),wa})(),Wt=Ht.length;return Wt===0?"No images":e.jsxs("div",{style:{marginTop:"4px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"4px"},children:[e.jsxs("span",{style:{fontSize:"11px",color:"#6b7280"},children:[Wt," image",Wt!==1?"s":""]}),e.jsx("button",{onClick:()=>{const wa=Ht.map((ba,ka)=>({id:ka,url:ba.path||`/buildhub/backend/uploads/${me.includes("site")?"site_images":"room_images"}/${ba.filename||ba}`,title:ba.floor&&ba.room?`${ba.floor} - ${ba.room}`:`Image ${ka+1}`,type:me.replace("_"," ")}));console.log("Open gallery:",wa)},style:{padding:"2px 6px",fontSize:"10px",background:"#3b82f6",color:"white",border:"none",borderRadius:"3px",cursor:"pointer"},children:" View All"})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(40px, 1fr))",gap:"2px",maxHeight:"80px",overflowY:"auto"},children:[Ht.slice(0,6).map((wa,ba)=>{const ka=wa.path||`/buildhub/backend/uploads/${me.includes("site")?"site_images":"room_images"}/${wa.filename||wa}`;return e.jsxs("div",{style:{position:"relative",cursor:"pointer",borderRadius:"3px",overflow:"hidden",aspectRatio:"1",height:"35px"},children:[e.jsx("img",{src:ka,alt:`${me} ${ba+1}`,style:{width:"100%",height:"100%",objectFit:"cover",transition:"transform 0.2s"},onMouseOver:gs=>gs.target.style.transform="scale(1.05)",onMouseOut:gs=>gs.target.style.transform="scale(1)",onClick:()=>window.open(ka,"_blank")}),e.jsx("div",{style:{position:"absolute",bottom:"1px",right:"1px",background:"rgba(0,0,0,0.7)",color:"white",borderRadius:"2px",padding:"0px 2px",fontSize:"7px",lineHeight:"1.2"},children:ba+1})]},ba)}),Wt>6&&e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",background:"#f3f4f6",color:"#6b7280",fontSize:"8px",fontWeight:"600",borderRadius:"3px",height:"35px"},children:["+",Wt-6]})]})]})}return Object.entries(It).map(([Jt,Ht])=>`${Jt.replace(/_/g," ")}: ${Ht}`).join(", ")}return String(It)})(ke);return e.jsxs("div",{style:{background:"white",padding:"16px 20px",borderRadius:"12px",border:"1px solid #e5e7eb",boxShadow:"0 2px 8px rgba(0,0,0,0.08)",transition:"all 0.2s ease",position:"relative",overflow:"visible"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:"12px"},children:[e.jsxs("div",{style:{width:"28px",height:"28px",borderRadius:"8px",background:"linear-gradient(135deg, #f3f4f6 0%, #e5e7eb 100%)",display:"flex",alignItems:"center",justifyContent:"center",marginRight:"12px",fontSize:"14px"},children:[me.includes("image")&&"",me==="floor_rooms"&&"",me.includes("material")&&"",me.includes("budget")&&"",me.includes("family")&&"",me.includes("plot")&&"",me.includes("topography")&&"",me.includes("aesthetic")&&"",me.includes("orientation")&&"",!me.includes("image")&&!me.includes("floor")&&!me.includes("material")&&!me.includes("budget")&&!me.includes("family")&&!me.includes("plot")&&!me.includes("topography")&&!me.includes("aesthetic")&&!me.includes("orientation")&&""]}),e.jsx("div",{style:{fontWeight:"600",textTransform:"capitalize",color:"#1f2937",fontSize:"16px",flex:1},children:me.replace(/_/g," ")})]}),e.jsx("div",{style:{fontSize:"15px",color:"#374151",lineHeight:"1.6",wordWrap:"break-word",overflowWrap:"break-word"},children:ht})]},me)})}),W.requirements_parsed.notes&&e.jsxs("div",{style:{marginTop:"16px",background:"linear-gradient(135deg, #fef3c7 0%, #fde68a 100%)",padding:"12px 16px",borderRadius:"8px",border:"1px solid #f59e0b",boxShadow:"0 1px 3px rgba(245, 158, 11, 0.1)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:"6px"},children:[e.jsx("span",{style:{fontSize:"14px",marginRight:"6px",color:"#d97706"},children:""}),e.jsx("div",{style:{fontWeight:"600",color:"#92400e",fontSize:"15px"},children:"Additional Notes"})]}),e.jsx("div",{style:{fontSize:"14px",color:"#92400e",lineHeight:"1.5",whiteSpace:"pre-wrap"},children:W.requirements_parsed.notes})]})]})]})]},W.id))})})]}),e.jsxs("div",{className:"section-card",children:[e.jsxs("div",{className:"section-header",children:[e.jsxs("div",{children:[e.jsx("h2",{children:"Pending Assignments"}),e.jsx("p",{children:"Homeowner requests waiting for your response"})]}),e.jsx("button",{className:"btn btn-secondary",onClick:Bt,disabled:p,style:{marginLeft:"auto"},children:p?"Refreshing...":" Refresh"})]}),e.jsx("div",{className:"section-content",children:e.jsx(S6,{onCreateFromAssigned:W=>{Je({...Ze,request_id:W}),_(!0)},expandedAssignments:Ne,setExpandedAssignments:Ee,toast:D})})]})]}),St=()=>e.jsxs("div",{children:[e.jsx("div",{className:"main-header",children:e.jsxs("div",{className:"header-content",children:[e.jsxs("div",{children:[e.jsx("h1",{children:"My Designs"}),e.jsx("p",{children:"Track your submitted architectural designs and their progress"})]}),e.jsx("button",{className:"btn btn-primary",onClick:()=>_(!0),children:"+ New Design"})]})}),e.jsxs("div",{className:"section-card",children:[e.jsxs("div",{className:"section-header",children:[e.jsx("h2",{children:"Design Portfolio"}),e.jsx("p",{children:"All your submitted architectural designs"})]}),e.jsx("div",{className:"section-content",children:u.length===0?e.jsxs("div",{className:"empty-state",children:[e.jsx("div",{className:"empty-icon",children:""}),e.jsx("h3",{children:"No Designs Yet"}),e.jsx("p",{children:"Upload your first architectural design to get started!"}),e.jsx("button",{className:"btn btn-primary",onClick:()=>_(!0),children:"Upload Design"})]}):e.jsx("div",{className:"item-grid",children:u.map(W=>e.jsx("div",{className:"layout-card",children:e.jsxs("div",{className:"layout-card-content",children:[e.jsxs("div",{className:"layout-header",children:[e.jsx("h4",{className:"layout-title",children:W.design_title||"Untitled Design"}),e.jsx("span",{className:`badge ${Eg(W.status||"proposed")}`,children:vp(W.status||"proposed")})]}),W.description&&e.jsx("p",{className:"layout-description",children:W.description}),e.jsxs("div",{className:"homeowner-details",children:[e.jsx("h4",{children:"Homeowner Details:"}),e.jsxs("p",{children:[e.jsx("strong",{children:"Name:"})," ",W.client_name||"Not specified"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Email:"})," ",W.client_email||"Not specified"]})]}),e.jsxs("div",{className:"request-details",children:[e.jsx("h4",{children:"Request Details:"}),e.jsxs("p",{children:[e.jsx("strong",{children:"Plot Size:"})," ",W.plot_size||"-"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Budget:"})," ",W.budget_range||"-"]}),W.requirements&&(()=>{const me=String(W.requirements||"").trim();return me.startsWith("{")&&me.endsWith("}")?e.jsxs("div",{className:"requirements-section",children:[e.jsx("strong",{children:"Requirements:"}),e.jsx("div",{style:{marginTop:6},children:e.jsx(tx,{raw:me,title:"Requirements"})})]}):e.jsxs("div",{className:"requirements-section",children:[e.jsx("strong",{children:"Requirements:"}),e.jsx("div",{style:{whiteSpace:"pre-wrap"},children:W.requirements})]})})()]}),W.technical_details&&e.jsx("div",{className:"technical-details-section",children:e.jsx(vl,{technicalDetails:W.technical_details})}),e.jsx("div",{className:"file-links",children:Array.isArray(W.files)&&W.files.length>0?W.files.slice(0,3).map((me,ke)=>cs(me.path)||Gs(me.path)?e.jsxs("a",{className:"btn",href:me.path,target:"_blank",rel:"noreferrer",children:["View File ",ke+1]},ke):e.jsxs("a",{className:"btn btn-link",href:me.path,target:"_blank",rel:"noreferrer",children:["Download File ",ke+1]},ke)):e.jsx("span",{className:"muted",children:"No files attached"})}),e.jsxs("div",{className:"review-section",children:[e.jsx("h4",{children:"Review"}),Array.isArray(z)&&z.filter(me=>me.design_id===W.id).length>0?z.filter(me=>me.design_id===W.id).slice(0,1).map(me=>e.jsxs("div",{className:"review-item",style:{borderTop:"1px solid #eee",padding:"10px 0"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("div",{style:{fontWeight:600},children:me.author||"Homeowner"}),e.jsxs("div",{style:{color:"#f5a623"},children:["".repeat(me.rating),"".repeat(5-me.rating)]})]}),e.jsx("div",{className:"muted",style:{fontSize:12,color:"#667085",marginTop:4},children:new Date(me.created_at).toLocaleString()}),me.comment&&e.jsx("div",{style:{marginTop:6,whiteSpace:"pre-wrap"},children:me.comment})]},me.id)):e.jsx("div",{className:"muted",children:"No review yet"})]})]})},W.id))})})]})]}),yt=()=>e.jsx("div",{style:{padding:"20px"},children:Y?e.jsx("div",{className:"loading",style:{textAlign:"center",padding:"40px"},children:"Loading profile"}):e.jsx(w6,{user:i,profile:U,setProfile:E,onSave:os,onReset:Za,loading:Y,saving:Q,reviews:z,reviewCount:U.review_count||0,avgRating:U.avg_rating||0,onUserUpdate:W=>o(W)})}),Va=()=>e.jsxs("div",{style:{height:"100vh",overflowY:"auto",paddingRight:"8px",scrollbarWidth:"thin",scrollbarColor:"#cbd5e0 #f7fafc"},children:[e.jsx("div",{className:"main-header",children:e.jsxs("div",{className:"header-content",children:[e.jsxs("div",{children:[e.jsx("h1",{children:"My Layout Library"}),e.jsx("p",{children:"Create layouts with preview images for homeowners to browse"})]}),e.jsx("button",{className:"btn btn-primary",onClick:()=>V(!0),children:"+ Add Layout"})]})}),e.jsxs("div",{className:"section-card",children:[e.jsxs("div",{className:"section-header",children:[e.jsx("h2",{children:"Library Items"}),e.jsx("p",{children:"Your published layouts"})]}),e.jsx("div",{className:"section-content",children:H.length===0?e.jsxs("div",{className:"empty-state",children:[e.jsx("div",{className:"empty-icon",children:""}),e.jsx("h3",{children:"No Layouts Yet"}),e.jsx("p",{children:"Add your first layout to the library so homeowners can request customizations"}),e.jsx("button",{className:"btn btn-primary",onClick:()=>V(!0),children:"Add Layout"})]}):e.jsx("div",{className:"item-grid",children:H.map(W=>e.jsxs("div",{className:"layout-card",children:[e.jsx("button",{className:"layout-image-container",onClick:()=>Pa(W),style:{cursor:"zoom-in"},children:e.jsx("img",{src:W.image_url||"/images/default-layout.jpg",alt:W.title,className:"layout-card-image"})}),e.jsxs("div",{className:"layout-card-content",children:[e.jsx("h4",{className:"layout-title",children:W.title}),e.jsx("p",{className:"layout-type",children:W.layout_type}),e.jsxs("div",{className:"layout-specs",children:[e.jsxs("span",{className:"spec",children:[" ",W.bedrooms," BR"]}),e.jsxs("span",{className:"spec",children:[" ",W.bathrooms," BA"]}),e.jsxs("span",{className:"spec",children:[" ",W.area," sq ft"]})]}),W.description&&e.jsx("p",{className:"layout-description",children:W.description}),W.price_range&&e.jsx("div",{className:"layout-price",children:e.jsxs("span",{className:"price-range",children:["",W.price_range]})}),W.technical_details&&e.jsxs("div",{className:"technical-details-preview",style:{marginTop:"12px",padding:"12px",background:"#f8f9fa",borderRadius:"6px",border:"1px solid #e9ecef"},children:[e.jsx("h5",{style:{margin:"0 0 8px 0",fontSize:"0.9rem",color:"#495057"},children:"Technical Specifications"}),e.jsx(vl,{technicalDetails:W.technical_details,compact:!0})]}),e.jsxs("div",{style:{display:"flex",gap:8,flexWrap:"wrap",margin:"6px 0"},children:[W.image_url&&e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>Pa(W),children:"View Preview"}),W.design_file_url&&(cs(W.design_file_url)||Gs(W.design_file_url)?e.jsx("button",{type:"button",className:"btn",onClick:()=>Pa(W),children:"View Layout"}):e.jsx("a",{className:"btn btn-link",href:W.design_file_url,target:"_blank",rel:"noreferrer",children:"Download Layout"}))]}),e.jsxs("div",{style:{display:"flex",gap:8,flexWrap:"wrap",margin:"6px 0"},children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>Ce(W),children:"Edit"}),e.jsx("button",{type:"button",className:`btn ${W.status==="active"?"btn-danger":"btn-success"}`,onClick:()=>Qt(W),children:W.status==="active"?"Deactivate":"Activate"})]})]})]},W.id))})})]}),J&&e.jsx("div",{className:"form-modal",children:e.jsxs("div",{className:"form-content",style:{maxWidth:"920px",width:"100%",maxHeight:"90vh",height:"auto",display:"flex",flexDirection:"column",position:"relative",overflow:"hidden",borderRadius:"12px",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1)"},children:[e.jsx("div",{className:"form-header",style:{flexShrink:0,padding:"24px 28px",borderBottom:"1px solid #e5e7eb",background:"linear-gradient(to right, #f8fafc, #ffffff)",position:"relative"},children:e.jsxs("div",{style:{display:"flex",alignItems:"flex-start",justifyContent:"space-between",gap:"16px"},children:[e.jsxs("div",{style:{flex:1},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"8px"},children:[e.jsx("div",{style:{width:"44px",height:"44px",borderRadius:"12px",background:"linear-gradient(135deg, #10b981 0%, #059669 100%)",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 4px 12px rgba(16, 185, 129, 0.3)"},children:e.jsx("span",{style:{fontSize:"20px"},children:""})}),e.jsxs("div",{children:[e.jsx("h3",{style:{margin:"0 0 2px 0",fontSize:"1.5rem",fontWeight:"700",color:"#111827",letterSpacing:"-0.01em"},children:"Add Layout"}),e.jsx("p",{style:{margin:0,fontSize:"0.875rem",color:"#6b7280",fontWeight:"500"},children:"Publish a new layout to the library"})]})]}),e.jsx("div",{className:"step-indicator",style:{marginTop:"12px",display:"flex",gap:"8px"},children:e.jsx("span",{className:"step active",style:{background:"linear-gradient(135deg, #10b981 0%, #059669 100%)",color:"white",padding:"6px 16px",borderRadius:"20px",fontSize:"0.875rem",fontWeight:"600",boxShadow:"0 2px 8px rgba(16, 185, 129, 0.3)"},children:"Basic Info & Files"})})]}),e.jsx("button",{type:"button",className:"modal-close",onClick:()=>V(!1),style:{background:"linear-gradient(135deg, #ef4444 0%, #dc2626 100%)",color:"white",border:"none",borderRadius:"50%",width:"40px",height:"40px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",fontSize:"22px",lineHeight:1,flexShrink:0,boxShadow:"0 4px 12px rgba(239, 68, 68, 0.3)",transition:"all 0.2s ease",fontWeight:"600"},onMouseEnter:W=>{W.target.style.transform="scale(1.1)",W.target.style.boxShadow="0 6px 16px rgba(239, 68, 68, 0.4)"},onMouseLeave:W=>{W.target.style.transform="scale(1)",W.target.style.boxShadow="0 4px 12px rgba(239, 68, 68, 0.3)"},children:""})]})}),e.jsxs("form",{onSubmit:xa,style:{display:"flex",flexDirection:"column",flex:1,minHeight:0,overflow:"hidden"},children:[e.jsxs("div",{className:"scrollable-form-content",style:{flex:1,overflowY:"auto",overflowX:"hidden",padding:"24px",paddingRight:"32px",maxHeight:"calc(90vh - 200px)",minHeight:"300px",scrollbarWidth:"thin",scrollbarColor:"#cbd5e1 #f1f5f9"},children:[e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Title"}),e.jsx("input",{type:"text",value:Et.title,onChange:W=>Mt({...Et,title:W.target.value}),placeholder:"e.g., Modern 3BHK House",required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Layout Type"}),e.jsxs("select",{value:Et.layout_type,onChange:W=>Mt({...Et,layout_type:W.target.value}),required:!0,children:[e.jsx("option",{value:"",children:"Select Type"}),e.jsx("option",{value:"Residential",children:"Residential"}),e.jsx("option",{value:"Commercial",children:"Commercial"}),e.jsx("option",{value:"Mixed Use",children:"Mixed Use"})]})]})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Bedrooms"}),e.jsx("input",{type:"number",value:Et.bedrooms,onChange:W=>Mt({...Et,bedrooms:W.target.value}),min:"1",required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Bathrooms"}),e.jsx("input",{type:"number",value:Et.bathrooms,onChange:W=>Mt({...Et,bathrooms:W.target.value}),min:"1",required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{children:["Area (sq ft)",e.jsx(Lb,{content:e.jsxs("div",{children:[e.jsx("strong",{children:"Typical House Areas:"}),e.jsx("br",{})," 1BHK: 400-600 sq ft",e.jsx("br",{})," 2BHK: 600-900 sq ft",e.jsx("br",{})," 3BHK: 900-1200 sq ft",e.jsx("br",{})," 4BHK: 1200-1500 sq ft",e.jsx("br",{})," Villa: 1500+ sq ft"]}),position:"top",children:e.jsx("span",{style:{marginLeft:"8px",cursor:"pointer",color:"#6b7280"},children:""})})]}),e.jsx("input",{type:"number",value:Et.area,onChange:W=>Mt({...Et,area:W.target.value}),min:"100",required:!0})]})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Price Range"}),e.jsx("input",{type:"text",value:Et.price_range,onChange:W=>Mt({...Et,price_range:W.target.value}),placeholder:"e.g., 20-30 Lakhs"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Price to View ()"}),e.jsx("input",{type:"number",value:Et.view_price||0,onChange:W=>Mt({...Et,view_price:W.target.value}),placeholder:"e.g., 100",min:"0",step:"0.01"}),e.jsx("small",{style:{color:"#666"},children:"Amount homeowners must pay to view this layout"})]})]}),e.jsxs("div",{className:"form-section",style:{marginTop:"20px",padding:"16px",border:"1px solid #e5e7eb",borderRadius:"8px",background:"#f9fafb"},children:[e.jsx("h4",{style:{margin:"0 0 16px 0",color:"#374151"},children:"Files & Media"}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Preview Image *"}),e.jsx("input",{type:"file",accept:"image/*",onChange:W=>Mt({...Et,image:W.target.files?.[0]||null}),required:!0}),e.jsx("p",{className:"form-help",style:{margin:"4px 0 0 0",fontSize:"0.8rem",color:"#6b7280"},children:"Upload a preview image (JPG, PNG, GIF, WebP)"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Layout Design File *"}),e.jsx("input",{type:"file",accept:".pdf,.jpg,.jpeg,.png,.gif,.webp,.svg,.dwg,.dxf,.ifc,.rvt,.skp,.3dm,.obj,.stl",onChange:W=>Mt({...Et,design_file:W.target.files?.[0]||null}),required:!0}),e.jsx("p",{className:"form-help",style:{margin:"4px 0 0 0",fontSize:"0.8rem",color:"#6b7280"},children:"Upload layout file (PDF, Images, CAD files, 3D models)"})]})]}),e.jsxs("div",{className:"form-row",children:[e.jsx("div",{className:"form-group",children:Et.image&&e.jsxs("div",{style:{border:"1px solid #ddd",padding:12,borderRadius:8,background:"#fff"},children:[e.jsx("p",{style:{margin:"0 0 8px",fontWeight:"500",color:"#374151"},children:" Preview Image"}),e.jsx("img",{src:URL.createObjectURL(Et.image),alt:"Preview",style:{maxWidth:"100%",maxHeight:"200px",borderRadius:6,objectFit:"cover"}}),e.jsx("p",{style:{margin:"8px 0 0",fontSize:"0.8rem",color:"#6b7280"},children:Et.image.name})]})}),e.jsx("div",{className:"form-group",children:Et.design_file&&e.jsxs("div",{style:{border:"1px solid #ddd",padding:12,borderRadius:8,background:"#fff"},children:[e.jsx("p",{style:{margin:"0 0 8px",fontWeight:"500",color:"#374151"},children:" Layout File"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,padding:"8px 12px",background:"#f3f4f6",borderRadius:6},children:[e.jsx("span",{style:{fontSize:"1.5rem"},children:Et.design_file.name.toLowerCase().endsWith(".pdf")?"":Et.design_file.name.toLowerCase().match(/\.(jpg|jpeg|png|gif|webp)$/)?"":Et.design_file.name.toLowerCase().match(/\.(dwg|dxf)$/)?"":Et.design_file.name.toLowerCase().match(/\.(skp|3dm|obj|stl)$/)?"":""}),e.jsxs("div",{children:[e.jsx("p",{style:{margin:0,fontWeight:"500"},children:Et.design_file.name}),e.jsxs("p",{style:{margin:0,fontSize:"0.8rem",color:"#6b7280"},children:[(Et.design_file.size/1024/1024).toFixed(2)," MB"]})]})]})]})})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Description"}),e.jsx("textarea",{rows:"6",value:Et.description,onChange:W=>Mt({...Et,description:W.target.value}),placeholder:"Describe the layout features and design highlights...",style:{minHeight:"120px"}})]})]}),e.jsxs("div",{className:"form-actions",style:{padding:"16px 24px",borderTop:"1px solid #e5e7eb",background:"white",flexShrink:0,display:"flex",gap:"12px",justifyContent:"flex-end"},children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>V(!1),children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn btn-primary",children:"Add Layout"})]})]})]})}),Dt&&e.jsx("div",{className:"form-modal",children:e.jsxs("div",{className:"form-content",style:{maxWidth:"920px",width:"100%",maxHeight:"90vh",height:"auto",display:"flex",flexDirection:"column",position:"relative",overflow:"hidden",borderRadius:"12px",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1)"},children:[e.jsx("div",{className:"form-header",style:{flexShrink:0,padding:"24px 28px",borderBottom:"1px solid #e5e7eb",background:"linear-gradient(to right, #f8fafc, #ffffff)",position:"relative"},children:e.jsxs("div",{style:{display:"flex",alignItems:"flex-start",justifyContent:"space-between",gap:"16px"},children:[e.jsxs("div",{style:{flex:1},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"8px"},children:[e.jsx("div",{style:{width:"44px",height:"44px",borderRadius:"12px",background:"linear-gradient(135deg, #3b82f6 0%, #2563eb 100%)",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 4px 12px rgba(59, 130, 246, 0.3)"},children:e.jsx("span",{style:{fontSize:"20px"},children:""})}),e.jsxs("div",{children:[e.jsx("h3",{style:{margin:"0 0 2px 0",fontSize:"1.5rem",fontWeight:"700",color:"#111827",letterSpacing:"-0.01em"},children:"Edit Layout"}),e.jsx("p",{style:{margin:0,fontSize:"0.875rem",color:"#6b7280",fontWeight:"500"},children:"Update your library item"})]})]}),e.jsx("div",{className:"step-indicator",style:{marginTop:"12px",display:"flex",gap:"8px"},children:e.jsx("span",{className:"step active",style:{background:"linear-gradient(135deg, #3b82f6 0%, #2563eb 100%)",color:"white",padding:"6px 16px",borderRadius:"20px",fontSize:"0.875rem",fontWeight:"600",boxShadow:"0 2px 8px rgba(59, 130, 246, 0.3)"},children:"Basic Info"})})]}),e.jsx("button",{type:"button",className:"modal-close",onClick:Ve,style:{background:"linear-gradient(135deg, #ef4444 0%, #dc2626 100%)",color:"white",border:"none",borderRadius:"50%",width:"40px",height:"40px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",fontSize:"22px",lineHeight:1,flexShrink:0,boxShadow:"0 4px 12px rgba(239, 68, 68, 0.3)",transition:"all 0.2s ease",fontWeight:"600"},onMouseEnter:W=>{W.target.style.transform="scale(1.1)",W.target.style.boxShadow="0 6px 16px rgba(239, 68, 68, 0.4)"},onMouseLeave:W=>{W.target.style.transform="scale(1)",W.target.style.boxShadow="0 4px 12px rgba(239, 68, 68, 0.3)"},children:""})]})}),e.jsx("div",{className:"scrollable-form-content",style:{flex:1,overflowY:"auto",overflowX:"hidden",padding:"24px",paddingRight:"32px",maxHeight:"calc(90vh - 200px)",minHeight:"300px",scrollbarWidth:"thin",scrollbarColor:"#cbd5e1 #f1f5f9"},children:e.jsxs("form",{onSubmit:W=>W.preventDefault(),style:{paddingBottom:"16px"},children:[e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Title *"}),e.jsx("input",{type:"text",value:Dt.title,onChange:W=>ye({...Dt,title:W.target.value}),required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Type *"}),e.jsx("input",{type:"text",value:Dt.layout_type,onChange:W=>ye({...Dt,layout_type:W.target.value}),required:!0})]})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Bedrooms *"}),e.jsx("input",{type:"number",value:Dt.bedrooms,onChange:W=>ye({...Dt,bedrooms:W.target.value}),required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Bathrooms *"}),e.jsx("input",{type:"number",value:Dt.bathrooms,onChange:W=>ye({...Dt,bathrooms:W.target.value}),required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{children:["Area (sq ft) *",e.jsx(Lb,{content:e.jsxs("div",{children:[e.jsx("strong",{children:"Typical House Areas:"}),e.jsx("br",{})," 1BHK: 400-600 sq ft",e.jsx("br",{})," 2BHK: 600-900 sq ft",e.jsx("br",{})," 3BHK: 900-1200 sq ft",e.jsx("br",{})," 4BHK: 1200-1500 sq ft",e.jsx("br",{})," Villa: 1500+ sq ft"]}),position:"top",children:e.jsx("span",{style:{marginLeft:"8px",cursor:"pointer",color:"#6b7280"},children:""})})]}),e.jsx("input",{type:"number",value:Dt.area,onChange:W=>ye({...Dt,area:W.target.value}),required:!0})]})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Price Range"}),e.jsx("input",{type:"text",value:Dt.price_range||"",onChange:W=>ye({...Dt,price_range:W.target.value}),placeholder:"e.g., 20-30 Lakhs"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Price to View ()"}),e.jsx("input",{type:"number",value:Dt.view_price||0,onChange:W=>ye({...Dt,view_price:W.target.value}),placeholder:"e.g., 100",min:"0",step:"0.01"}),e.jsx("small",{style:{color:"#666"},children:"Amount homeowners must pay to view this layout"})]})]}),e.jsxs("div",{className:"form-section",style:{marginTop:"20px",padding:"16px",border:"1px solid #e5e7eb",borderRadius:"8px",background:"#f9fafb"},children:[e.jsx("h4",{style:{margin:"0 0 16px 0",color:"#374151"},children:"Files & Media"}),e.jsx("p",{style:{margin:"0 0 16px 0",color:"#6b7280",fontSize:"0.9rem"},children:"Replace existing files or keep current ones"}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Replace Preview Image"}),e.jsx("input",{type:"file",accept:"image/*",onChange:W=>ye({...Dt,image:W.target.files?.[0]||null})}),e.jsx("p",{className:"form-help",style:{margin:"4px 0 0 0",fontSize:"0.8rem",color:"#6b7280"},children:"Upload a new preview image (JPG, PNG, GIF, WebP)"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Replace Layout Design File"}),e.jsx("input",{type:"file",accept:".pdf,.jpg,.jpeg,.png,.gif,.webp,.svg,.dwg,.dxf,.ifc,.rvt,.skp,.3dm,.obj,.stl",onChange:W=>ye({...Dt,design_file:W.target.files?.[0]||null})}),e.jsx("p",{className:"form-help",style:{margin:"4px 0 0 0",fontSize:"0.8rem",color:"#6b7280"},children:"Upload new layout file (PDF, Images, CAD files, 3D models)"})]})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Current Preview Image"}),Dt.image_url?e.jsxs("div",{style:{border:"1px solid #ddd",padding:12,borderRadius:8,background:"#fff"},children:[e.jsx("p",{style:{margin:"0 0 8px",fontWeight:"500",color:"#374151"},children:" Current Image"}),e.jsx("img",{src:Dt.image_url,alt:"Current Preview",style:{maxWidth:"100%",maxHeight:"200px",borderRadius:6,objectFit:"cover"}})]}):e.jsx("p",{style:{color:"#6b7280",fontStyle:"italic"},children:"No current image"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Current Layout File"}),Dt.design_file_url?e.jsxs("div",{style:{border:"1px solid #ddd",padding:12,borderRadius:8,background:"#fff"},children:[e.jsx("p",{style:{margin:"0 0 8px",fontWeight:"500",color:"#374151"},children:" Current Layout File"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,padding:"8px 12px",background:"#f3f4f6",borderRadius:6},children:[e.jsx("span",{style:{fontSize:"1.5rem"},children:Dt.design_file_url.toLowerCase().endsWith(".pdf")?"":Dt.design_file_url.toLowerCase().match(/\.(jpg|jpeg|png|gif|webp)$/)?"":Dt.design_file_url.toLowerCase().match(/\.(dwg|dxf)$/)?"":Dt.design_file_url.toLowerCase().match(/\.(skp|3dm|obj|stl)$/)?"":""}),e.jsxs("div",{children:[e.jsx("p",{style:{margin:0,fontWeight:"500"},children:Dt.design_file_url.split("/").pop()}),e.jsx("a",{href:Dt.design_file_url,target:"_blank",rel:"noreferrer",style:{fontSize:"0.8rem",color:"#3b82f6"},children:"View File"})]})]})]}):e.jsx("p",{style:{color:"#6b7280",fontStyle:"italic"},children:"No current layout file"})]})]}),(Dt.image||Dt.design_file)&&e.jsxs("div",{className:"form-row",children:[e.jsx("div",{className:"form-group",children:Dt.image&&e.jsxs("div",{style:{border:"1px solid #4ade80",padding:12,borderRadius:8,background:"#f0fdf4"},children:[e.jsx("p",{style:{margin:"0 0 8px",fontWeight:"500",color:"#166534"},children:" New Preview Image"}),e.jsx("img",{src:URL.createObjectURL(Dt.image),alt:"New Preview",style:{maxWidth:"100%",maxHeight:"200px",borderRadius:6,objectFit:"cover"}}),e.jsx("p",{style:{margin:"8px 0 0",fontSize:"0.8rem",color:"#166534"},children:Dt.image.name})]})}),e.jsx("div",{className:"form-group",children:Dt.design_file&&e.jsxs("div",{style:{border:"1px solid #4ade80",padding:12,borderRadius:8,background:"#f0fdf4"},children:[e.jsx("p",{style:{margin:"0 0 8px",fontWeight:"500",color:"#166534"},children:" New Layout File"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,padding:"8px 12px",background:"#dcfce7",borderRadius:6},children:[e.jsx("span",{style:{fontSize:"1.5rem"},children:Dt.design_file.name.toLowerCase().endsWith(".pdf")?"":Dt.design_file.name.toLowerCase().match(/\.(jpg|jpeg|png|gif|webp)$/)?"":Dt.design_file.name.toLowerCase().match(/\.(dwg|dxf)$/)?"":Dt.design_file.name.toLowerCase().match(/\.(skp|3dm|obj|stl)$/)?"":""}),e.jsxs("div",{children:[e.jsx("p",{style:{margin:0,fontWeight:"500"},children:Dt.design_file.name}),e.jsxs("p",{style:{margin:0,fontSize:"0.8rem",color:"#166534"},children:[(Dt.design_file.size/1024/1024).toFixed(2)," MB"]})]})]})]})})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Description"}),e.jsx("textarea",{rows:"4",value:Dt.description||"",onChange:W=>ye({...Dt,description:W.target.value})})]}),e.jsx("div",{className:"form-row",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Status"}),e.jsxs("select",{value:Dt.status,onChange:W=>ye({...Dt,status:W.target.value}),children:[e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"})]})]})})]})}),e.jsxs("div",{className:"form-actions",style:{padding:"16px 24px",borderTop:"1px solid #e5e7eb",background:"white",flexShrink:0,display:"flex",gap:"12px",justifyContent:"flex-end"},children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:Ve,children:"Cancel"}),e.jsx("button",{type:"button",className:"btn btn-primary",onClick:gt,children:"Save Changes"})]})]})})]}),Zt=()=>mt?e.jsx(C6,{layoutRequestId:et,onClose:()=>{ve(!1),Oe(null)}}):e.jsxs("div",{style:{height:"100vh",overflowY:"auto",paddingRight:"8px",scrollbarWidth:"thin",scrollbarColor:"#cbd5e0 #f7fafc"},children:[e.jsx("div",{className:"main-header",children:e.jsxs("div",{className:"header-content",children:[e.jsxs("div",{children:[e.jsx("h1",{children:"House Plans"}),e.jsx("p",{children:"Create custom house plans by drawing room layouts for your clients"})]}),e.jsx("button",{className:"btn btn-primary",onClick:()=>{Oe(null),ve(!0)},children:"+ Create New Plan"})]})}),e.jsxs("div",{className:"section-card",children:[e.jsxs("div",{className:"section-header",children:[e.jsx("h2",{children:"Your Assigned Projects"}),e.jsx("p",{children:"Create custom house plans for these client requests"})]}),e.jsx("div",{className:"section-content",children:l.length===0?e.jsxs("div",{className:"empty-state",children:[e.jsx("div",{className:"empty-icon",children:""}),e.jsx("h3",{children:"No Assigned Projects"}),e.jsx("p",{children:"You don't have any assigned layout requests yet. Check the Layout Requests tab to see available projects."}),e.jsx("button",{className:"btn btn-secondary",onClick:()=>s("requests"),children:"View Layout Requests"})]}):e.jsx("div",{className:"request-grid",children:l.map(W=>e.jsxs("div",{className:"request-card",children:[e.jsxs("div",{className:"request-header",children:[e.jsx("h4",{children:W.homeowner_name}),e.jsx("span",{className:"request-budget",children:W.budget_range})]}),e.jsxs("div",{className:"request-details",children:[e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Plot Size:"}),e.jsx("span",{className:"detail-value",children:W.plot_size})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Location:"}),e.jsx("span",{className:"detail-value",children:W.location||"Not specified"})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Style:"}),e.jsx("span",{className:"detail-value",children:W.preferred_style||"Any"})]})]}),e.jsx(Kf,{requirements:W.requirements,compact:!0}),e.jsxs("div",{className:"request-actions",children:[e.jsx("button",{className:"btn btn-primary",onClick:()=>{Oe(W.id),s("house-plans"),ve(!0)},children:"Create House Plan"}),e.jsx("button",{className:"btn btn-secondary",onClick:()=>Xt(W),children:"Download Details"})]})]},W.id))})})]}),e.jsxs("div",{className:"section-card",children:[e.jsxs("div",{className:"section-header",children:[e.jsx("h2",{children:"General House Plans"}),e.jsx("p",{children:"Create house plans not tied to specific client requests"})]}),e.jsx("div",{className:"section-content",children:e.jsxs("div",{className:"general-plans-info",children:[e.jsx("p",{children:"Create general house plans that can be used as templates or showcased in your portfolio."}),e.jsx("button",{className:"btn btn-outline",onClick:()=>{Oe(null),ve(!0)},children:"Create General Plan"})]})})]})]});return e.jsxs("div",{className:"dashboard-container",children:[e.jsx("style",{children:`
        .scrollable-form-content::-webkit-scrollbar {
          width: 8px;
        }
        .scrollable-form-content::-webkit-scrollbar-track {
          background: #f1f5f9;
          border-radius: 4px;
        }
        .scrollable-form-content::-webkit-scrollbar-thumb {
          background: #cbd5e1;
          border-radius: 4px;
        }
        .scrollable-form-content::-webkit-scrollbar-thumb:hover {
          background: #94a3b8;
        }
        
        /* Enhanced scrollbar for form content */
        .form-content::-webkit-scrollbar {
          width: 10px;
        }
        .form-content::-webkit-scrollbar-track {
          background: #f1f5f9;
          border-radius: 5px;
          margin: 5px;
        }
        .form-content::-webkit-scrollbar-thumb {
          background: #64748b;
          border-radius: 5px;
          border: 2px solid #f1f5f9;
        }
        .form-content::-webkit-scrollbar-thumb:hover {
          background: #475569;
        }

        /* Image Modal Animations */
        @keyframes fadeIn {
          from { opacity: 0; }
          to { opacity: 1; }
        }
        
        @keyframes slideIn {
          from { 
            opacity: 0; 
            transform: translateY(-20px) scale(0.95); 
          }
          to { 
            opacity: 1; 
            transform: translateY(0) scale(1); 
          }
        }

        /* Enhanced hover effects */
        .image-card:hover {
          transform: scale(1.02) !important;
          box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15) !important;
          border-color: #3b82f6 !important;
        }
        
        /* Force scrollbar to always show */
        .form-content {
          scrollbar-gutter: stable;
        }
        .form-steps {
          display: flex;
          gap: 16px;
          margin-top: 12px;
        }
        .step {
          display: flex;
          align-items: center;
          gap: 8px;
          padding: 8px 12px;
          border-radius: 6px;
          background: #f3f4f6;
          color: #6b7280;
          font-size: 0.875rem;
          font-weight: 500;
        }
        .step.active {
          background: #3b82f6;
          color: white;
        }
        .step.completed {
          background: #10b981;
          color: white;
        }
        .step-number {
          display: flex;
          align-items: center;
          justify-content: center;
          width: 20px;
          height: 20px;
          border-radius: 50%;
          background: rgba(255, 255, 255, 0.2);
          font-size: 0.75rem;
          font-weight: 600;
        }
        .step.active .step-number,
        .step.completed .step-number {
          background: rgba(255, 255, 255, 0.3);
        }
      `}),e.jsx("button",{className:"mobile-menu-btn",onClick:()=>te(!L),children:""}),e.jsxs("div",{className:`dashboard-sidebar soft-sidebar expanded ${L?"open":""}`,children:[e.jsx("div",{className:"sidebar-header sb-brand",children:e.jsxs("a",{href:"#",className:"sidebar-logo",children:[e.jsx("div",{className:"logo-icon",children:""}),e.jsx("span",{className:"logo-text sb-title",children:"BUILDHUB"})]})}),e.jsxs("nav",{className:"sidebar-nav sb-nav",children:[e.jsx("a",{href:"#",className:`nav-item sb-item ${a==="dashboard"?"active":""}`,onClick:W=>{W.preventDefault(),s("dashboard")},children:e.jsx("span",{className:"sb-label",children:"Dashboard"})}),e.jsxs("a",{href:"#",className:`nav-item sb-item ${a==="requests"?"active":""}`,onClick:W=>{W.preventDefault(),s("requests")},children:[e.jsx("span",{className:"sb-label",children:"Layout Requests"}),(at>0||Ot>0)&&e.jsxs("div",{style:{display:"inline-flex",gap:6,marginLeft:"auto"},children:[at>0&&e.jsx("span",{className:"nav-badge pending pulse",title:"Pending requests",children:at}),Ot>0&&e.jsx("span",{className:"nav-badge accepted",title:"Accepted requests",children:Ot})]})]}),e.jsxs("a",{href:"#",className:`nav-item sb-item ${a==="designs"?"active":""}`,onClick:W=>{W.preventDefault(),s("designs")},children:[e.jsx("span",{className:"sb-label",children:"My Designs"}),Ct>0&&e.jsx("span",{className:"nav-badge pulse",style:{marginLeft:"auto"},children:Ct})]}),e.jsxs("a",{href:"#",className:`nav-item sb-item ${a==="library"?"active":""}`,onClick:W=>{W.preventDefault(),s("library")},children:[e.jsx("span",{className:"sb-label",children:"My Layout Library"}),ia>0&&e.jsx("span",{className:"nav-badge pulse",style:{marginLeft:"auto"},children:ia})]}),e.jsx("a",{href:"#",className:`nav-item sb-item ${a==="house-plans"?"active":""}`,onClick:W=>{W.preventDefault(),s("house-plans")},children:e.jsx("span",{className:"sb-label",children:"House Plans"})})]}),e.jsxs("div",{className:"sidebar-footer sb-footer",style:{padding:"12px"},children:[e.jsx("div",{style:{position:"relative"},children:G&&e.jsxs("div",{className:"profile-dropdown open",style:{position:"absolute",bottom:"52px",left:0,right:0,zIndex:1e3},children:[e.jsx("div",{className:"dropdown-header",children:"My Account"}),e.jsx("button",{type:"button",className:"dropdown-item",onClick:ge,children:"Logout"})]})}),e.jsx("div",{className:"sidebar-version",style:{marginTop:10},children:"v1.0.0"})]})]}),e.jsxs("div",{className:"dashboard-main soft-main shifted",children:[b&&e.jsxs("div",{className:"alert alert-error",children:[b,e.jsx("button",{onClick:()=>v(""),className:"alert-close",children:""})]}),x&&e.jsxs("div",{className:"alert alert-success",children:[x,e.jsx("button",{onClick:()=>C(""),className:"alert-close",children:""})]}),a==="dashboard"&&$e(),a==="requests"&&zt(),a==="designs"&&St(),a==="library"&&Va(),a==="house-plans"&&Zt(),a==="profile"&&yt(),S&&e.jsx("div",{className:"form-modal",children:e.jsx("div",{className:"form-content",children:e.jsxs("div",{className:"form-header",children:[e.jsx("h3",{children:"Upload Design"}),e.jsx("p",{children:"Submit your architectural design for a client request"})]})})}),yn(),S&&e.jsx("div",{className:"form-modal",children:e.jsxs("div",{className:"form-content",style:{maxWidth:"1200px",width:"90vw"},children:[e.jsxs("div",{className:"form-header",children:[e.jsx("h3",{children:"Create Design"}),e.jsx("p",{children:"Submit your architectural design with comprehensive technical details"}),e.jsxs("div",{className:"upload-steps",children:[e.jsx("div",{className:`step ${N>=0?"active":""}`,children:"1. Basic Info"}),e.jsx("div",{className:`step ${N>=1?"active":""}`,children:"2. Technical Details"}),e.jsx("div",{className:`step ${N>=2?"active":""}`,children:"3. Files & Submit"})]})]}),N===0&&e.jsxs("div",{className:"upload-step",children:[e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Send To"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{fontSize:"0.85rem"},children:"By Request (optional)"}),e.jsxs("select",{value:Ze.request_id,onChange:W=>Je({...Ze,request_id:W.target.value}),children:[e.jsx("option",{value:"",children:"Choose a client request"}),l.map(W=>e.jsxs("option",{value:W.id,children:[W.client_name," - ",W.plot_size," sq ft (",W.budget_range,")"]},W.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{style:{fontSize:"0.85rem"},children:"Direct Homeowner ID (optional)"}),e.jsx("input",{type:"number",value:Ze.homeowner_id,onChange:W=>Je({...Ze,homeowner_id:W.target.value}),placeholder:"e.g., 123"})]})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Design Title *"}),e.jsx("input",{type:"text",value:Ze.design_title,onChange:W=>Je({...Ze,design_title:W.target.value}),placeholder:"e.g., Modern 3BHK Villa Design",required:!0})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Description"}),e.jsx("textarea",{value:Ze.description,onChange:W=>Je({...Ze,description:W.target.value}),placeholder:"Describe your design features, materials, and special considerations...",rows:"4"})]}),e.jsxs("div",{className:"form-actions",children:[e.jsx("button",{type:"button",onClick:()=>_(!1),className:"btn btn-secondary",children:"Cancel"}),e.jsx("button",{type:"button",onClick:()=>O(1),className:"btn btn-primary",disabled:!Ze.design_title,children:"Next: Technical Details"})]})]}),N===1&&e.jsx("div",{className:"upload-step",children:e.jsx(lw,{data:Ze,setData:Je,onNext:()=>O(2),onPrev:()=>O(0)})}),N===2&&e.jsxs("div",{className:"upload-step",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Design Files *"}),e.jsx("input",{type:"file",multiple:!0,accept:".pdf,.jpg,.jpeg,.png,.gif,.webp,.svg,.heic,.doc,.docx,.ppt,.pptx,.xls,.xlsx,.txt,.rtf,.dwg,.dxf,.ifc,.rvt,.skp,.3dm,.obj,.stl,.zip,.rar,.7z,.mp4,.mov,.avi,.m4v",onChange:W=>Je({...Ze,files:Array.from(W.target.files)}),required:!0}),e.jsx("p",{className:"form-help",children:"Select multiple files (images, PDFs, docs, CAD/3D, archives, videos)"})]}),e.jsxs("div",{className:"review-section",children:[e.jsx("h4",{children:"Review Your Submission"}),e.jsxs("div",{className:"review-grid",children:[e.jsxs("div",{className:"review-item",children:[e.jsx("div",{className:"review-label",children:"Design Title"}),e.jsx("div",{className:"review-value",children:Ze.design_title||"Not provided"})]}),e.jsxs("div",{className:"review-item",children:[e.jsx("div",{className:"review-label",children:"Description"}),e.jsx("div",{className:"review-value",children:Ze.description||"No description"})]}),Ze.technical_details?.floor_plans?.layout_description&&e.jsxs("div",{className:"review-item",children:[e.jsx("div",{className:"review-label",children:"Floor Plan Layout"}),e.jsx("div",{className:"review-value",children:Ze.technical_details.floor_plans.layout_description})]}),e.jsxs("div",{className:"review-item",children:[e.jsx("div",{className:"review-label",children:"Files"}),e.jsxs("div",{className:"review-value",children:[Ze.files.length," file(s) selected"]})]})]})]}),e.jsxs("div",{className:"form-actions",children:[e.jsx("button",{type:"button",onClick:()=>O(1),className:"btn btn-secondary",children:"Back"}),e.jsx("button",{type:"button",onClick:it,disabled:p||Ze.files.length===0,className:"btn btn-primary",children:p?"Uploading...":"Upload Design"})]})]})]})})]}),e.jsx(cw,{isOpen:kt,onClose:()=>{xt(!1),Ut(null)},onSubmit:va,planData:{plan_name:lt?`${lt.homeowner_name||"Client"} House Plan`:"",rooms:[],scale_ratio:1.2},loading:_t})]})},S6=({onCreateFromAssigned:t,expandedAssignments:a,setExpandedAssignments:s,toast:i})=>{const[o,l]=An.useState([]),[d,u]=An.useState(!1),[A,p]=An.useState(""),m=(x,C)=>{const D=C&&typeof C=="object"?C:{},S=(x||"").toString(),_=O=>D[O]??null,N=O=>{const L=S.match(new RegExp(O+":\\s*([^\\n]+)","i"));return L?L[1].trim():null};return{rooms:_("rooms")??N("rooms")??N("bedrooms")??null,family_needs:_("family_needs")??N("family needs")??null,style:_("preferred_style")??_("style")??_("aesthetic")??N("style")??null,plot_shape:_("plot_shape")??N("plot shape")??null,topography:_("topography")??N("topography")??null,development_laws:_("development_laws")??N("development laws")??null,notes:_("notes")??null,raw:S.trim()}},b=async()=>{u(!0),p("");try{const C=await(await fetch("/buildhub/backend/api/architect/get_assigned_requests.php")).json();if(C.success){const D=(C.assignments||[]).filter(S=>S.assignment_status==="sent");l(D)}else p(C.message||"Failed to load assigned requests")}catch{p("Error loading assigned requests")}finally{u(!1)}};An.useEffect(()=>{b()},[]);const v=async(x,C)=>{try{const S=await(await fetch("/buildhub/backend/api/architect/respond_assignment.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({assignment_id:x,action:C})})).json().catch(()=>({}));return S&&S.success?(C==="accept"?i.success("Assignment accepted! The request is now available in your Available Requests section."):C==="decline"&&i.success("Assignment declined."),await b(),window.location.reload()):i.error("Failed to respond to assignment: "+(S.message||"Unknown error")),S&&S.success&&S.status||null}catch(D){return console.error("Error responding to assignment:",D),i.error("Network error occurred. Please try again."),null}};return e.jsx("div",{className:"section-content",children:d?e.jsx("div",{className:"loading",children:"Loading assigned requests..."}):o.length===0?e.jsxs("div",{className:"empty-state",children:[e.jsx("div",{className:"empty-icon",children:""}),e.jsx("h3",{children:"No Assigned Requests"}),e.jsx("p",{children:"Homeowners havent assigned requests to you yet."}),e.jsx("button",{className:"btn btn-secondary",onClick:b,children:"Refresh"})]}):e.jsx("div",{className:"item-list",children:o.map(x=>e.jsxs("div",{className:"list-item",children:[e.jsx("div",{className:"item-icon",children:""}),e.jsxs("div",{className:"item-content",children:[e.jsxs("h4",{className:"item-title",children:["Request #",x.layout_request.id,"  ",x.layout_request.plot_size," sq ft"]}),e.jsxs("p",{className:"item-subtitle",children:["Budget: ",x.layout_request.budget_range,"  From: ",x.homeowner.name]}),e.jsxs("p",{className:"item-meta",children:["Assigned: ",new Date(x.assigned_at).toLocaleDateString(),"  Status: ",x.assignment_status]}),x.message&&e.jsxs("p",{className:"item-description",children:["Message: ",x.message]}),a[x.assignment_id]&&(()=>{const C=m(x.layout_request.requirements,x.layout_request.requirements_parsed),D=[C.rooms?{label:"Rooms",value:C.rooms}:null,C.family_needs?{label:"Family needs",value:C.family_needs}:null,x.layout_request.preferred_style||C.style?{label:"Style",value:x.layout_request.preferred_style||C.style}:null].filter(Boolean);return e.jsxs("div",{className:"details-card",children:[e.jsx("div",{className:"details-header",children:e.jsx("strong",{children:"Requirements"})}),e.jsxs("div",{className:"details-grid",children:[e.jsxs("div",{children:[e.jsx("h5",{children:"Site & Budget"}),e.jsxs("div",{className:"chips",children:[e.jsxs("span",{className:"chip",children:[e.jsx("strong",{children:"Plot:"})," ",x.layout_request.plot_size||""]}),e.jsxs("span",{className:"chip",children:[e.jsx("strong",{children:"Budget:"})," ",x.layout_request.budget_range||""]}),e.jsxs("span",{className:"chip",children:[e.jsx("strong",{children:"Location:"})," ",x.layout_request.location||""]}),e.jsxs("span",{className:"chip",children:[e.jsx("strong",{children:"Timeline:"})," ",x.layout_request.timeline||""]}),C.plot_shape&&e.jsxs("span",{className:"chip",children:[e.jsx("strong",{children:"Plot shape:"})," ",C.plot_shape]}),C.topography&&e.jsxs("span",{className:"chip",children:[e.jsx("strong",{children:"Topography:"})," ",C.topography]}),C.development_laws&&e.jsxs("span",{className:"chip",children:[e.jsx("strong",{children:"Dev. laws:"})," ",C.development_laws]})]})]}),e.jsxs("div",{children:[e.jsx("h5",{children:"Preferences"}),e.jsxs("div",{className:"chips",children:[(x.layout_request.layout_type||"custom")&&e.jsxs("span",{className:"chip",children:[e.jsx("strong",{children:"Type:"})," ",x.layout_request.layout_type||"custom"]}),D.map((S,_)=>e.jsxs("span",{className:"chip",children:[e.jsxs("strong",{children:[S.label,":"]})," ",S.value]},_)),C.style&&e.jsxs("span",{className:"chip",children:[e.jsx("strong",{children:"Style:"})," ",C.style]}),x.layout_request.library?.title&&e.jsxs("span",{className:"chip",children:[e.jsx("strong",{children:"Library:"})," ",x.layout_request.library.title]})]})]}),e.jsxs("div",{className:"span-2",children:[e.jsx("h5",{children:"Notes"}),e.jsx("p",{className:"item-description",children:C.notes||(C.raw?null:x.layout_request.requirements)||""}),!C.notes&&C.raw&&e.jsx("div",{className:"muted",style:{fontSize:12},children:"Original notes available in raw request."}),x.layout_request.library?.image_url&&e.jsx("div",{className:"preview-row",children:e.jsx("img",{src:x.layout_request.library.image_url,alt:"Selected layout",className:"preview-image"})}),x.layout_request.library?.file_url&&e.jsxs("div",{className:"preview-row",style:{marginTop:8,display:"flex",gap:8},children:[e.jsx("a",{className:"btn btn-secondary",href:x.layout_request.library.file_url,target:"_blank",rel:"noopener noreferrer",children:"View Layout File"}),e.jsx("a",{className:"btn",href:x.layout_request.library.file_url,download:!0,children:"Download"})]})]})]})]})})()]}),e.jsxs("div",{className:"item-actions",children:[e.jsx("button",{className:"btn btn-secondary",onClick:b,children:"Refresh"}),e.jsx("button",{className:"btn",onClick:()=>s(C=>({...C,[x.assignment_id]:!C[x.assignment_id]})),children:a[x.assignment_id]?"Hide Details":"Details"}),x.assignment_status==="sent"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"btn btn-success",onClick:()=>v(x.assignment_id,"accept"),children:"Accept"}),e.jsx("button",{className:"btn btn-danger",onClick:()=>v(x.assignment_id,"reject"),children:"Reject"})]}),e.jsxs("div",{style:{display:"flex",gap:8},children:[e.jsx("button",{className:"btn btn-primary",disabled:x.assignment_status!=="accepted",title:x.assignment_status!=="accepted"?"Accept the request to create a design":void 0,onClick:()=>t?.(x.layout_request.id),children:"Create Design"}),e.jsx("button",{className:"btn btn-secondary",onClick:()=>{v(x.assignment_id,"reject")},children:"Remove"})]})]})]},x.assignment_id))})})},k6=()=>e.jsxs("div",{style:{maxWidth:600,margin:"40px auto",padding:24,background:"#fff",borderRadius:8,boxShadow:"0 2px 12px rgba(0,0,0,0.07)"},children:[e.jsx("h2",{children:"Authorized Redirect URIs for Google OAuth"}),e.jsxs("p",{children:["Copy and paste these URIs into your Google Cloud Console under ",e.jsx("b",{children:"Authorized redirect URIs"})," for your OAuth Client ID:"]}),e.jsx("pre",{style:{background:"#f5f5f5",padding:16,borderRadius:6,fontSize:"1.05rem"},children:`http://localhost:3000
http://localhost`}),e.jsxs("p",{children:[e.jsx("b",{children:"Note:"})," For Google Identity Services (the button you use), you usually only need to set ",e.jsx("b",{children:"Authorized JavaScript origins"}),". If you use OAuth redirect flow, add these as redirect URIs."]})]});function Mp({steps:t=[],current:a=0}){return e.jsx("div",{className:"wizard-stepper",role:"navigation","aria-label":"Form progress",children:t.map((s,i)=>e.jsxs("div",{className:`step ${i<=a?"active":""}`,children:[e.jsx("div",{className:"step-index",children:String(i+1).padStart(2,"0")}),e.jsx("div",{className:"step-label",children:s}),i<t.length-1&&e.jsx("div",{className:"step-divider"})]},i))})}function Op({title:t,subtitle:a,stepper:s,children:i,onBack:o,onClose:l}){return e.jsxs("div",{className:"wizard-page",children:[e.jsx("aside",{className:"wizard-aside","aria-label":"help",children:e.jsxs("div",{className:"aside-card",children:[e.jsx("div",{className:"aside-illustration",children:""}),e.jsx("h3",{children:"BuildHub"}),e.jsx("p",{children:"Guided forms to collect the right information quickly."})]})}),e.jsxs("main",{className:"wizard-main",children:[e.jsxs("header",{className:"wizard-header",children:[e.jsxs("div",{children:[e.jsx("h1",{children:t}),a&&e.jsx("p",{className:"muted",children:a})]}),e.jsxs("div",{className:"wizard-actions",children:[o&&e.jsx("button",{className:"btn btn-secondary",onClick:o,type:"button",children:"Back"}),l&&e.jsx("button",{className:"btn btn-ghost",onClick:l,type:"button","aria-label":"Close",children:""})]})]}),s,e.jsx("section",{className:"wizard-content",children:i})]})]})}const F6=({formData:t={},onStyleChange:a,showSuggestions:s=!0,autoSelect:i=!1})=>{const[o,l]=w.useState([]),[d,u]=w.useState(!1),[A,p]=w.useState(""),[m,b]=w.useState("");w.useEffect(()=>{s&&Object.keys(t).length>0&&v()},[t,s]);const v=async()=>{u(!0),p("");try{const S=parseFloat(t.plot_size||0),_=parseFloat(t.building_size||0),N=t.budget_range||"",O=parseInt(t.num_floors||1),L=t.rooms||[],te=t.location||"";let G=0;N.includes("5-10")?G=75e5:N.includes("10-20")?G=15e6:N.includes("20-30")?G=25e6:N.includes("30-50")?G=4e7:N.includes("50-75")?G=625e5:N.includes("75 Lakhs - 1 Crore")?G=875e5:N.includes("1-2 Crores")?G=15e7:N.includes("2-5 Crores")?G=35e7:N.includes("5+ Crores")&&(G=75e7);let X=S;t.plot_unit==="cents"?X=S*435.6:t.plot_unit==="acres"&&(X=S*43560);const U=[];G>=1e8&&(U.push({name:"Modern Luxury",description:"Ultra-modern design with premium materials and smart home integration",features:["Glass facades","Smart home automation","Premium marble","Landscaped gardens","Swimming pool"],budgetRange:"1+ Crores",suitability:"Very High",image:"",reason:"Perfect for luxury budget with premium features"}),U.push({name:"Mediterranean Villa",description:"Elegant Mediterranean-inspired design with spacious layouts",features:["Terracotta roofs","Arched windows","Open courtyards","Natural stone","Private gardens"],budgetRange:"1+ Crores",suitability:"Very High",image:"",reason:"Ideal for large plots with luxury budget"}),U.push({name:"Contemporary Mansion",description:"Sophisticated contemporary design with high-end finishes",features:["Modern architecture","Premium materials","Smart lighting","Home theater","Wine cellar"],budgetRange:"1+ Crores",suitability:"Very High",image:"",reason:"Perfect for high-end contemporary living"})),G>=5e6&&G<1e8&&(U.push({name:"Modern Contemporary",description:"Clean lines, open spaces, and modern materials",features:["Minimalist design","Large windows","Open floor plans","Modern fixtures","Energy efficient"],budgetRange:"50 Lakhs - 1 Crore",suitability:"Very High",image:"",reason:"Excellent balance of modern design and functionality"}),U.push({name:"Scandinavian",description:"Nordic-inspired design emphasizing simplicity and functionality",features:["Light wood finishes","Natural lighting","Minimalist decor","Cozy interiors","Eco-friendly"],budgetRange:"50 Lakhs - 1 Crore",suitability:"High",image:"",reason:"Perfect for modern families seeking comfort and style"}),U.push({name:"Industrial Modern",description:"Urban-inspired design with exposed materials and modern elements",features:["Exposed brick","Steel beams","Concrete finishes","High ceilings","Modern fixtures"],budgetRange:"50 Lakhs - 1 Crore",suitability:"High",image:"",reason:"Great for urban settings with modern aesthetic"})),G>=2e6&&G<5e6&&(U.push({name:"Traditional Kerala",description:"Classic Kerala architecture with modern amenities",features:["Sloped roofs","Wooden elements","Courtyard design","Natural ventilation","Local materials"],budgetRange:"20-50 Lakhs",suitability:"Very High",image:"",reason:"Perfect for Kerala climate and cultural preferences"}),U.push({name:"Modern Minimalist",description:"Simple, functional design focusing on essentials",features:["Clean lines","Neutral colors","Functional spaces","Cost-effective","Easy maintenance"],budgetRange:"20-50 Lakhs",suitability:"Very High",image:"",reason:"Ideal for budget-conscious families seeking modern design"}),U.push({name:"Contemporary Indian",description:"Modern Indian design blending traditional and contemporary elements",features:["Indian motifs","Modern layout","Local materials","Cultural elements","Functional design"],budgetRange:"20-50 Lakhs",suitability:"High",image:"",reason:"Perfect blend of tradition and modernity"})),G>=5e5&&G<2e6&&(U.push({name:"Affordable Modern",description:"Modern design optimized for budget constraints",features:["Simple design","Cost-effective materials","Functional layout","Energy efficient","Easy construction"],budgetRange:"5-20 Lakhs",suitability:"Very High",image:"",reason:"Best value for money with modern appeal"}),U.push({name:"Traditional Simple",description:"Simple traditional design with essential features",features:["Traditional layout","Local materials","Simple construction","Cost-effective","Cultural appeal"],budgetRange:"5-20 Lakhs",suitability:"High",image:"",reason:"Perfect for traditional families on a budget"})),X>=5e3&&(U.push({name:"Farmhouse Style",description:"Spacious single-story design with large outdoor areas",features:["Single story","Large verandas","Garden spaces","Natural materials","Outdoor living"],budgetRange:"Any",suitability:"High",image:"",reason:"Perfect for large plots with outdoor living focus"}),U.push({name:"Ranch Style",description:"Single-story design with horizontal emphasis",features:["Single story","Wide layout","Large windows","Outdoor spaces","Easy access"],budgetRange:"Any",suitability:"High",image:"",reason:"Ideal for large plots with accessibility needs"})),X<2e3&&(U.push({name:"Compact Modern",description:"Space-efficient modern design for small plots",features:["Space optimization","Vertical design","Multi-functional spaces","Smart storage","Modern fixtures"],budgetRange:"Any",suitability:"Very High",image:"",reason:"Maximizes space efficiency for small plots"}),U.push({name:"Tiny House Style",description:"Minimalist design maximizing every square foot",features:["Minimal design","Multi-purpose furniture","Vertical storage","Natural light","Eco-friendly"],budgetRange:"Any",suitability:"High",image:"",reason:"Perfect for small plots with minimalist lifestyle"})),O>=3&&U.push({name:"Multi-story Modern",description:"Vertical design optimized for multi-story construction",features:["Vertical gardens","Rooftop spaces","Elevator provision","Stacked design","Modern facade"],budgetRange:"30+ Lakhs",suitability:"High",image:"",reason:"Optimized for multi-story construction"}),L.includes("garage")&&U.push({name:"Contemporary with Garage",description:"Modern design with integrated garage space",features:["Integrated garage","Modern facade","Functional layout","Car-friendly design","Modern materials"],budgetRange:"20+ Lakhs",suitability:"High",image:"",reason:"Perfect for families needing garage space"}),(L.includes("terrace")||L.includes("balcony"))&&U.push({name:"Mediterranean with Terraces",description:"Mediterranean-inspired design with outdoor spaces",features:["Terrace spaces","Outdoor living","Natural materials","Mediterranean elements","Garden integration"],budgetRange:"30+ Lakhs",suitability:"High",image:"",reason:"Ideal for outdoor living enthusiasts"}),te.toLowerCase().includes("kerala")&&U.push({name:"Kerala Traditional",description:"Authentic Kerala architecture with local materials",features:["Tiled roofs","Wooden pillars","Nalukettu design","Local materials","Climate adaptation"],budgetRange:"15+ Lakhs",suitability:"Very High",image:"",reason:"Perfect for Kerala climate and cultural preferences"}),G>=2e6&&U.push({name:"Eco-Friendly Modern",description:"Sustainable design with green building practices",features:["Solar panels","Rainwater harvesting","Natural lighting","Sustainable materials","Energy efficient"],budgetRange:"20+ Lakhs",suitability:"High",image:"",reason:"Perfect for environmentally conscious families"});const E=U.filter((Y,T,Q)=>T===Q.findIndex(q=>q.name===Y.name)).sort((Y,T)=>{const Q={"Very High":4,High:3,Medium:2,Low:1};return Q[T.suitability]-Q[Y.suitability]});if(l(E),i&&E.length>0&&!m){const Y=E[0];b(Y.name),a&&a(Y),console.log(" Auto-selected house style:",Y.name)}}catch(S){p("Error generating suggestions: "+S.message)}finally{u(!1)}},x=S=>{b(S.name),a&&a(S)},C=S=>{switch(S){case"Very High":return"#28a745";case"High":return"#17a2b8";case"Medium":return"#ffc107";case"Low":return"#dc3545";default:return"#6c757d"}},D=S=>{switch(S){case"Very High":return"";case"High":return"";case"Medium":return"";case"Low":return"";default:return""}};return d?e.jsx("div",{className:"house-style-suggestions-container",children:e.jsxs("div",{className:"style-loading",children:[e.jsx("div",{className:"loading-spinner"}),e.jsx("span",{children:"Generating style suggestions..."})]})}):A?e.jsx("div",{className:"house-style-suggestions-container",children:e.jsxs("div",{className:"style-error",children:[e.jsx("i",{className:"fas fa-exclamation-triangle"}),A]})}):!s||o.length===0?null:e.jsxs("div",{className:"house-style-suggestions-container",children:[e.jsxs("div",{className:"style-header",children:[e.jsxs("h4",{className:"style-title",children:[e.jsx("i",{className:"fas fa-palette"}),"House Style Suggestions"]}),e.jsx("p",{className:"style-subtitle",children:"AI-powered recommendations based on your project details"})]}),e.jsx("div",{className:"style-suggestions-grid",children:o.map((S,_)=>e.jsxs("div",{className:`style-card ${m===S.name?"selected":""}`,onClick:()=>x(S),children:[e.jsxs("div",{className:"style-card-header",children:[e.jsx("div",{className:"style-icon",children:S.image}),e.jsxs("div",{className:"style-info",children:[e.jsx("h5",{className:"style-name",children:S.name}),e.jsx("div",{className:"style-budget",children:S.budgetRange})]}),e.jsx("div",{className:"style-suitability",children:e.jsxs("span",{className:"suitability-badge",style:{color:C(S.suitability)},children:[D(S.suitability)," ",S.suitability]})})]}),e.jsx("div",{className:"style-description",children:S.description}),e.jsxs("div",{className:"style-features",children:[e.jsx("h6",{className:"features-title",children:"Key Features:"}),e.jsx("ul",{className:"features-list",children:S.features.map((N,O)=>e.jsxs("li",{className:"feature-item",children:[e.jsx("i",{className:"fas fa-check"}),N]},O))})]}),e.jsx("div",{className:"style-actions",children:e.jsx("button",{className:`select-style-btn ${m===S.name?"selected":""}`,onClick:N=>{N.stopPropagation(),x(S)},children:m===S.name?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-check"}),"Selected"]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-plus"}),"Select Style"]})})})]},_))}),m&&e.jsxs("div",{className:"selected-style-info",children:[e.jsxs("div",{className:"selected-style-header",children:[e.jsx("i",{className:"fas fa-check-circle"}),e.jsxs("span",{children:["Selected: ",m]})]}),e.jsx("p",{className:"selected-style-note",children:"This style will be used for architect matching and design recommendations."})]})]})},E6=t=>({"5-10 Lakhs":75e4,"10-20 Lakhs":15e5,"20-30 Lakhs":25e5,"30-50 Lakhs":4e6,"50-75 Lakhs":625e4,"75 Lakhs - 1 Crore":875e4,"1-2 Crores":15e6,"2-5 Crores":35e6,"5+ Crores":75e6})[t]||0,U6=["Mumbai","Delhi","Bangalore","Hyderabad","Ahmedabad","Chennai","Kolkata","Surat","Pune","Jaipur","Lucknow","Kanpur","Nagpur","Indore","Thane","Bhopal","Visakhapatnam","Pimpri-Chinchwad","Patna","Vadodara","Ghaziabad","Ludhiana","Agra","Nashik","Faridabad","Meerut","Rajkot","Kalyan-Dombivli","Vasai-Virar","Varanasi","Srinagar","Aurangabad","Dhanbad","Amritsar","Navi Mumbai","Allahabad","Howrah","Ranchi","Gwalior","Jabalpur","Coimbatore","Vijayawada","Jodhpur","Madurai","Raipur","Kota","Guwahati","Chandigarh","Solapur","Hubballi-Dharwad","Mysore","Tiruchirappalli","Bareilly","Aligarh","Tiruppur","Gurgaon","Moradabad","Jalandhar","Bhubaneswar","Salem","Warangal","Mira-Bhayandar","Jalgaon","Guntur","Thiruvananthapuram","Bhiwandi","Saharanpur","Gorakhpur","Bikaner","Amravati","Noida","Jamshedpur","Bhilai","Cuttack","Firozabad","Kochi","Nellore","Bhavnagar","Dehradun","Durgapur","Asansol","Rourkela","Nanded","Kolhapur","Ajmer","Akola","Gulbarga","Jamnagar","Ujjain","Loni","Siliguri","Jhansi","Ulhasnagar","Jammu","Sangli-Miraj & Kupwad","Mangalore","Erode","Belgaum","Ambattur","Tirunelveli","Malegaon","Gaya","Jalna","Udaipur","Maheshtala","Davanagere","Kozhikode","Kurnool","Rajpur Sonarpur","Rajahmundry","Bokaro","South Dumdum","Bellary","Patiala","Gopalpur","Agartala","Bhagalpur","Muzaffarnagar","Bhatpara","Panihati","Latur","Dhule","Tirupati","Rohtak","Korba","Bhilwara","Berhampur","Muzaffarpur","Ahmednagar","Mathura","Kollam","Avadi","Kadapa","Kamarhati","Sambalpur","Bilaspur","Shahjahanpur","Satara","Bijapur","Rampur","Shivamogga","Chandrapur","Junagadh","Thrissur","Alwar","Bardhaman","Kulti","Kakinada","Nizamabad","Parbhani","Tumkur","Khammam","Ozhukarai","Bihar Sharif","Panipat","Darbhanga","Bally","Aizawl","Dewas","Ichalkaranji","Karnal","Bathinda","Jalna","Eluru","Kirari Suleman Nagar","Barasat","Purnia","Satna","Mau","Sonipat","Farrukhabad","Sagar","Rourkela","Durg","Imphal","Ratlam","Hapur","Arrah","Karimnagar","Anantapur","Etawah","Ambernath","North Dumdum","Bharatpur","Begusarai","New Delhi","Gandhidham","Baranagar","Tiruvottiyur","Pondicherry","Sikar","Thoothukudi","Rewa","Mirzapur","Raichur","Pali","Ramagundam","Haridwar","Vijayanagaram","Katihar","Nagarcoil","Sri Ganganagar","Karawal Nagar","Mango","Thanjavur","Bulandshahr","Uluberia","Murwara","Sambhal","Singrauli","Nadiad","Secunderabad","Naihati","Yamunanagar","Bidhan Nagar","Pallavaram","Bidar","Munger","Panchkula","Burhanpur","Raurkela Industrial Township","Kharagpur","Dindigul","Gandhinagar","Hospet","Nangloi Jat","English Bazar","Ongole","Deoghar","Chapra","Haldia","Khandwa","Nandyal","Chittoor","Morena","Amroha","Anand","Bhind","Bhalswa Jahangir Pur","Madhyamgram","Bhiwani","Navi Mumbai Panvel Raigad","Bahraich","Sultan Pur Majra","Sirsa","Dinapur Nizamat","Raebareli"];function L6(){const t=$i(),a=Xn(),s=["Preliminary","Site","Family","Preferences","Review","Architect","Submit"],[i,o]=w.useState(0),[l,d]=w.useState({plot_size:"",building_size:"",plot_shape:"",topography:"",development_laws:"",family_needs:[],rooms:[],budget_range:"",aesthetic:"",requirements:"",location:"",timeline:"",num_floors:"",selected_layout_id:null,layout_type:"custom",selected_architect_ids:[],custom_budget:"",plot_unit:"cents",floor_rooms:{},expandedFloors:{1:!0},room_images:{},expandedRoomImages:{},orientation:"",site_considerations:"",material_preferences:[],budget_allocation:"",reference_images:[],site_images:[],room_requirements:{}}),[u,A]=w.useState([]),[p,m]=w.useState(null),[b,v]=w.useState(!1),[x,C]=w.useState(!1),[D,S]=w.useState(0),_=()=>o(ve=>Math.max(ve-1,0)),[N,O]=w.useState({}),[L,te]=w.useState({}),[G,X]=w.useState({}),U=w.useMemo(()=>{const ve=parseFloat(l.plot_size)||0;return ve?ve<1200?"small":ve<2400?"medium":ve<4e3?"large":ve<6e3?"xlarge":"estate":null},[l.plot_size]),E=w.useMemo(()=>{const ve=l.budget_range==="Custom"?parseFloat(l.custom_budget)||0:E6(l.budget_range);return Number.isFinite(ve)?ve:0},[l.budget_range,l.custom_budget]),Y=w.useMemo(()=>{if(E>0)return E;const ve=parseFloat(l.building_size)||0;return ve>0?ve*2e3:0},[E,l.building_size]),T=w.useMemo(()=>E?E<2e6?"economy":E<5e6?"standard":E<1e7?"premium":"luxury":null,[E]),Q=()=>{const ve={},et={};switch(i){case 0:{const Oe=parseFloat(l.plot_size),kt=parseFloat(l.building_size);if((!Oe||Number.isNaN(Oe)||Oe<=0)&&(ve.plot_size="Enter a valid plot size"),(!kt||Number.isNaN(kt)||kt<=0)&&(ve.building_size="Enter a valid building size"),l.budget_range||(ve.budget_range="Select a budget range"),l.budget_range==="Custom"){const xt=parseFloat(l.custom_budget);(!xt||Number.isNaN(xt)||xt<=0)&&(ve.custom_budget="Enter a valid custom budget")}break}case 1:{l.plot_shape||(ve.plot_shape="Select plot shape"),l.topography||(ve.topography="Select topography"),l.development_laws||(ve.development_laws="Select development laws");const Oe=parseInt(l.num_floors,10);(!Oe||Number.isNaN(Oe)||Oe<=0)&&(ve.num_floors="Enter number of floors");break}case 2:{(!Array.isArray(l.rooms)||l.rooms.length===0)&&(ve.rooms="Select at least one room type");break}case 3:{l.aesthetic||(ve.aesthetic="Choose a house style");break}case 5:{(!Array.isArray(l.selected_architect_ids)||l.selected_architect_ids.length===0)&&(ve.selected_architect_ids="Select at least one architect");break}}if(O(ve),te(et),Object.keys(ve).length>0){a.error("Please fix the highlighted fields before continuing");return}o(Oe=>Math.min(Oe+1,s.length-1))},q=w.useMemo(()=>{const ve=parseFloat(l.building_size)||0,et=Array.isArray(l.rooms)?l.rooms.length:0;if(!ve&&!et)return null;const Oe=Math.min(18,Math.max(3,Math.round(ve/500)+Math.floor(et/2))),kt=(()=>{const lt=new Date;return lt.setMonth(lt.getMonth()+Oe),lt})(),xt=[{name:"Planning",duration:1},{name:"Design",duration:1},{name:"Construction",duration:Math.max(1,Oe-2)}];return{months:Oe,estimatedCompletion:kt,phases:xt}},[l.building_size,l.rooms]),ne=ve=>{const et=parseInt(l.num_floors)||1,Oe={};for(let xt=1;xt<=et;xt++)Oe[`floor${xt}`]={};const kt={garage:[1],master_bedroom:[1],kitchen:[1],dining_room:[1],living_room:[1],store_room:[1],bedrooms:[1,2],bathrooms:[1,2],attached_bathroom:[1,2],balcony:et>1?[2]:[1],terrace:[et],study_room:et>1?[2]:[1],prayer_room:et>1?[2]:[1],guest_room:et>1?[2]:[1]};return ve.forEach(xt=>{const _t=`floor${(kt[xt]||[1])[0]}`;Oe[_t][xt]||(Oe[_t][xt]=1)}),Oe};w.useEffect(()=>{if(!localStorage.getItem("buildhub_tour_completed")){const et=setTimeout(()=>{C(!0),S(0)},1e3);return()=>clearTimeout(et)}},[]),w.useEffect(()=>{const ve=et=>{et.ctrlKey&&et.key==="h"&&(et.preventDefault(),C(!0),S(i))};return window.addEventListener("keydown",ve),()=>window.removeEventListener("keydown",ve)},[i]);const[R,z]=w.useState([]),[ee,le]=w.useState(!1),[Be,$]=w.useState(""),[ue,k]=w.useState(""),[I,H]=w.useState(""),[re,J]=w.useState(""),[V,oe]=w.useState("best"),[K,Ne]=w.useState(null),[Ee,st]=w.useState({}),[ut,Ge]=w.useState(!1),[_e,Et]=w.useState(1);w.useEffect(()=>{const ve=new URLSearchParams(window.location.search),et=ve.get("selected_layout_id"),Oe=ve.get("layout_type"),kt=ve.get("plot_size"),xt=ve.get("action");d(lt=>({...lt,...et?{selected_layout_id:et}:{},...Oe?{layout_type:Oe}:{},...kt?{plot_size:kt}:{}})),xt==="send_to_contractors"&&Oe==="library"&&et&&(async()=>{v(!0);try{const Ut=await(await fetch("/buildhub/backend/api/homeowner/submit_request.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({plot_size:kt||"",budget_range:"",requirements:"",location:"",timeline:"",selected_layout_id:et,layout_type:"library",plot_shape:"",topography:"",development_laws:"",family_needs:"",rooms:"",aesthetic:"",activate_for_contractors:!0})})).json();Ut.success?(window.dispatchEvent&&window.dispatchEvent(new CustomEvent("toast",{detail:{type:"success",message:"Sent to contractors"}})),window.history.back()):(console.error("Failed to send to contractors:",Ut.message),alert(Ut.message||"Failed to send to contractors"))}catch{console.error("Network error"),alert("Network error")}finally{v(!1)}})()},[]),w.useMemo(()=>{const ve=[...R];return V==="best"?ve.sort((et,Oe)=>{const kt=et.avg_rating??-1,xt=Oe.avg_rating??-1;if(xt!==kt)return xt-kt;const lt=et.review_count??0;return(Oe.review_count??0)-lt}):V==="experience"?ve.sort((et,Oe)=>(Oe.experience_years??-1)-(et.experience_years??-1)):V==="recent"&&ve.sort((et,Oe)=>Oe.id-et.id),ve},[R,V]);const Mt=async(ve={})=>{le(!0),$("");try{const et=new URLSearchParams;ve.search&&ve.search.trim()&&et.append("search",ve.search.trim()),ve.specialization&&ve.specialization.trim()&&et.append("specialization",ve.specialization.trim()),ve.min_experience&&ve.min_experience>0&&et.append("min_experience",ve.min_experience);const Oe=et.toString(),kt=`/buildhub/backend/api/homeowner/get_architects.php${Oe?`?${Oe}`:""}`;console.log("Fetching architects from:",kt);const xt=await fetch(kt,{method:"GET",headers:{"Content-Type":"application/json"},credentials:"include"});if(console.log("Response status:",xt.status),!xt.ok)throw new Error(`HTTP error! status: ${xt.status}`);const lt=await xt.json();console.log("Architects response:",lt),lt.success?z(lt.architects||[]):$(lt.message||"Failed to load architects")}catch(et){console.error("Error fetching architects:",et),$("Error loading architects: "+et.message)}finally{le(!1)}};w.useEffect(()=>{i===5&&Mt({search:ue,specialization:I,min_experience:re})},[i]),w.useEffect(()=>{if(i===5){const ve=setTimeout(()=>{Mt({search:ue,specialization:I,min_experience:re})},500);return()=>clearTimeout(ve)}},[ue,I,re,i]);async function Ze(){v(!0);try{if(!Array.isArray(l.selected_architect_ids)||l.selected_architect_ids.length===0){a.error("Please select at least one architect before submitting your request");return}const ve={plot_size:l.plot_size,building_size:l.building_size,budget_range:l.budget_range==="Custom"?l.custom_budget:l.budget_range,requirements:l.requirements,location:l.location,timeline:l.timeline,selected_layout_id:l.selected_layout_id,layout_type:l.layout_type,plot_shape:l.plot_shape,topography:l.topography,development_laws:l.development_laws,family_needs:Array.isArray(l.family_needs)?l.family_needs.join(","):l.family_needs,rooms:Array.isArray(l.rooms)?l.rooms.join(","):l.rooms,aesthetic:l.aesthetic,num_floors:l.num_floors,preferred_style:l.aesthetic,floor_rooms:l.floor_rooms||{},reference_images:l.reference_images||[],site_images:l.site_images||[],room_images:l.room_images||{}};if(console.log("Submitting data:",ve),console.log(" Floor rooms data being submitted:",l.floor_rooms),!ve.plot_size||!ve.building_size){a.error("Please fill in plot size and building size");return}if(isNaN(parseFloat(ve.plot_size))||isNaN(parseFloat(ve.building_size))){a.error("Plot size and building size must be valid numbers");return}console.log(" Submitting request to:","/buildhub/backend/api/homeowner/submit_request.php");const et=await fetch("/buildhub/backend/api/homeowner/submit_request.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(ve),credentials:"include"});if(console.log(" Response status:",et.status),console.log(" Response ok:",et.ok),!et.ok){const xt=await et.text();throw console.error(" HTTP error response:",xt),new Error(`HTTP error! status: ${et.status} - ${xt}`)}const Oe=await et.json();if(console.log(" Submit response:",Oe),!Oe.success){console.error(" Submit failed:",Oe.message),a.error(Oe.message||"Failed to submit");return}const kt=Oe.request_id;console.log(" Assigning architects:",l.selected_architect_ids);try{console.log(" Submitting architect assignment to:","/buildhub/backend/api/homeowner/assign_architect.php");const xt=await fetch("/buildhub/backend/api/homeowner/assign_architect.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({layout_request_id:kt,architect_ids:l.selected_architect_ids}),credentials:"include"});if(console.log(" Architect assignment response status:",xt.status),console.log(" Architect assignment response ok:",xt.ok),!xt.ok){const Ut=await xt.text();throw console.error(" Architect assignment HTTP error:",Ut),new Error(`HTTP error! status: ${xt.status} - ${Ut}`)}const lt=await xt.json();console.log(" Architect assignment response:",lt),lt.success?console.log(" Architects assigned successfully"):console.warn(" Architect assignment warning:",lt.message)}catch(xt){console.warn(" Architect assignment failed:",xt.message)}a.success("Request submitted successfully! Your custom design request has been created and assigned to the selected architects."),t("/homeowner-dashboard")}catch(ve){console.error("Submit error:",ve),a.error("Network error. Please try again.")}finally{v(!1)}}const Je=w.useMemo(()=>({title:"File your Request",subtitle:"Approx 57 minutes"}),[]),mt=()=>null;return e.jsxs(Op,{title:Je.title,subtitle:Je.subtitle,stepper:e.jsx(Mp,{steps:s,current:i}),onBack:i>0?_:()=>window.history.back(),onClose:()=>window.history.back(),children:[i===0&&e.jsxs("div",{className:"section",children:[e.jsx("div",{className:"section-header",children:"Preliminary"}),e.jsxs("div",{className:"section-body",style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(280px, 1fr))",gap:"20px"},children:[e.jsxs("div",{className:"field",style:{gridColumn:"1 / -1"},children:[e.jsx("label",{style:{fontSize:"18px",fontWeight:"600",color:"#1f2937",marginBottom:"8px",display:"block"},children:" Plot Size"}),e.jsx("div",{style:{fontSize:"14px",color:"#6b7280",marginBottom:"12px"},children:"Enter your plot size to get accurate budget and timeline estimates"}),e.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center",backgroundColor:"#f9fafb",padding:"20px",borderRadius:"12px",border:"2px solid #e5e7eb"},children:[e.jsx("input",{type:"number",value:l.plot_size,onChange:ve=>{const et=ve.target.value;d(Oe=>({...Oe,plot_size:et}))},min:1,placeholder:"Enter plot size (e.g., 10 for 10 cents)",style:{flex:1,padding:"18px 24px",fontSize:"20px",fontWeight:"600",border:"2px solid #d1d5db",borderRadius:"8px",backgroundColor:"white",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"}}),e.jsxs("select",{value:l.plot_unit||"cents",onChange:ve=>d(et=>({...et,plot_unit:ve.target.value})),style:{padding:"12px 8px",fontSize:"14px",fontWeight:"500",border:"2px solid #e5e7eb",borderRadius:"8px",minWidth:"80px",maxWidth:"90px",backgroundColor:"white"},children:[e.jsx("option",{value:"cents",children:"Cents"}),e.jsx("option",{value:"acres",children:"Acres"}),e.jsx("option",{value:"sqft",children:"Sq Ft"})]})]}),e.jsx("div",{style:{fontSize:"12px",color:"#6b7280",marginTop:"8px"},children:l.plot_size&&l.plot_unit&&e.jsxs("span",{children:[l.plot_unit==="cents"&&`${l.plot_size} cents = ${(l.plot_size*435.6).toFixed(0)} sq ft`,l.plot_unit==="acres"&&`${l.plot_size} acres = ${(l.plot_size*43560).toFixed(0)} sq ft`,l.plot_unit==="sqft"&&`${l.plot_size} sq ft`]})})]}),e.jsxs("div",{className:"field",style:{gridColumn:"1 / -1"},children:[e.jsx("label",{style:{fontSize:"18px",fontWeight:"600",color:"#1f2937",marginBottom:"8px",display:"block"},children:" Building Size"}),e.jsx("div",{style:{fontSize:"14px",color:"#6b7280",marginBottom:"12px"},children:"Enter your desired building size in square feet"}),e.jsx("div",{style:{backgroundColor:"#f9fafb",padding:"20px",borderRadius:"12px",border:"2px solid #e5e7eb"},children:e.jsx("input",{type:"number",value:l.building_size,onChange:ve=>{const et=ve.target.value;d(Oe=>({...Oe,building_size:et}))},min:100,placeholder:"Enter building size in square feet (e.g., 2000)",style:{width:"100%",padding:"16px 20px",fontSize:"18px",fontWeight:"500",border:"2px solid #d1d5db",borderRadius:"8px",backgroundColor:"white",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.1)"}})})]}),e.jsxs("div",{className:"field",style:{gridColumn:"1 / -1"},children:[e.jsx("label",{style:{fontSize:"18px",fontWeight:"600",color:"#1f2937",marginBottom:"8px",display:"block"},children:" Budget Range"}),e.jsx("div",{style:{fontSize:"14px",color:"#6b7280",marginBottom:"12px"},children:"Select your budget range for the project"}),e.jsxs("select",{value:l.budget_range,onChange:ve=>d({...l,budget_range:ve.target.value}),style:{width:"100%",padding:"16px 20px",fontSize:"18px",fontWeight:"500",border:"2px solid #e5e7eb",borderRadius:"8px",backgroundColor:"white",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.1)"},children:[e.jsx("option",{value:"",children:"Select budget range"}),e.jsx("option",{value:"5-10 Lakhs",children:"5-10 Lakhs"}),e.jsx("option",{value:"10-20 Lakhs",children:"10-20 Lakhs"}),e.jsx("option",{value:"20-30 Lakhs",children:"20-30 Lakhs"}),e.jsx("option",{value:"30-50 Lakhs",children:"30-50 Lakhs"}),e.jsx("option",{value:"50-75 Lakhs",children:"50-75 Lakhs"}),e.jsx("option",{value:"75 Lakhs - 1 Crore",children:"75 Lakhs - 1 Crore"}),e.jsx("option",{value:"1-2 Crores",children:"1-2 Crores"}),e.jsx("option",{value:"2-5 Crores",children:"2-5 Crores"}),e.jsx("option",{value:"5+ Crores",children:"5+ Crores"}),e.jsx("option",{value:"Custom",children:"Custom Amount"})]}),l.budget_range==="Custom"&&e.jsx("div",{style:{marginTop:"16px"},children:e.jsx("input",{type:"number",value:l.custom_budget,onChange:ve=>d({...l,custom_budget:ve.target.value}),placeholder:"Enter custom budget amount in rupees",style:{width:"100%",padding:"16px 20px",fontSize:"18px",fontWeight:"500",border:"2px solid #e5e7eb",borderRadius:"8px",backgroundColor:"white",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.1)"}})})]}),e.jsxs("div",{className:"field",children:[e.jsx("label",{children:"Location"}),e.jsx(NF,{options:U6,value:l.location,onChange:ve=>d({...l,location:ve}),placeholder:"Select or type your city",style:{width:"100%",padding:"12px 16px",fontSize:"16px",border:"2px solid #e5e7eb",borderRadius:"8px"}})]}),e.jsxs("div",{className:"field",children:[e.jsx("label",{children:"Timeline"}),e.jsxs("select",{value:l.timeline,onChange:ve=>d({...l,timeline:ve.target.value}),style:{width:"100%",padding:"12px 16px",fontSize:"16px",border:"2px solid #e5e7eb",borderRadius:"8px"},children:[e.jsx("option",{value:"",children:"Select timeline"}),e.jsx("option",{value:"1-3 months",children:"1-3 months"}),e.jsx("option",{value:"3-6 months",children:"3-6 months"}),e.jsx("option",{value:"6-12 months",children:"6-12 months"}),e.jsx("option",{value:"1-2 years",children:"1-2 years"}),e.jsx("option",{value:"2+ years",children:"2+ years"}),e.jsx("option",{value:"Flexible",children:"Flexible"})]})]})]}),e.jsx("div",{className:"wizard-footer",children:e.jsx("button",{className:"btn btn-primary",onClick:Q,children:"Next"})})]}),i===1&&e.jsxs("div",{className:"section",children:[e.jsx("div",{className:"section-header",children:"Site Details"}),e.jsxs("div",{className:"section-body",style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(280px, 1fr))",gap:"20px"},children:[e.jsxs("div",{className:"field",children:[e.jsx("label",{children:"Plot Shape"}),e.jsxs("select",{value:l.plot_shape,onChange:ve=>d({...l,plot_shape:ve.target.value}),style:{width:"100%",padding:"12px 16px",fontSize:"16px",border:"2px solid #e5e7eb",borderRadius:"8px"},children:[e.jsx("option",{value:"",children:"Select plot shape"}),e.jsx("option",{value:"Rectangular",children:"Rectangular"}),e.jsx("option",{value:"Square",children:"Square"}),e.jsx("option",{value:"L-shaped",children:"L-shaped"}),e.jsx("option",{value:"Irregular",children:"Irregular"}),e.jsx("option",{value:"Corner",children:"Corner"})]})]}),e.jsxs("div",{className:"field",children:[e.jsx("label",{children:"Topography"}),e.jsxs("select",{value:l.topography,onChange:ve=>d({...l,topography:ve.target.value}),style:{width:"100%",padding:"12px 16px",fontSize:"16px",border:"2px solid #e5e7eb",borderRadius:"8px"},children:[e.jsx("option",{value:"",children:"Select topography"}),e.jsx("option",{value:"Flat",children:"Flat"}),e.jsx("option",{value:"Sloping",children:"Sloping"}),e.jsx("option",{value:"Hilly",children:"Hilly"}),e.jsx("option",{value:"Waterfront",children:"Waterfront"})]})]}),e.jsxs("div",{className:"field",children:[e.jsx("label",{children:"Number of Floors"}),e.jsxs("select",{value:l.num_floors,onChange:ve=>{const et=ve.target.value,Oe=Array.isArray(l.rooms)?l.rooms:[],kt=ne(Oe);d({...l,num_floors:et,floor_rooms:kt})},style:{width:"100%",padding:"12px 16px",fontSize:"16px",border:"2px solid #e5e7eb",borderRadius:"8px"},children:[e.jsx("option",{value:"",children:"Select number of floors"}),e.jsx("option",{value:"1",children:"1 Floor (Ground Floor Only)"}),e.jsx("option",{value:"2",children:"2 Floors (G+1)"}),e.jsx("option",{value:"3",children:"3 Floors (G+2)"}),e.jsx("option",{value:"4",children:"4 Floors (G+3)"}),e.jsx("option",{value:"5",children:"5 Floors (G+4)"}),e.jsx("option",{value:"6+",children:"6+ Floors"})]})]}),e.jsxs("div",{className:"field",children:[e.jsx("label",{children:"Development Laws"}),e.jsxs("select",{value:l.development_laws,onChange:ve=>d({...l,development_laws:ve.target.value}),style:{width:"100%",padding:"12px 16px",fontSize:"16px",border:"2px solid #e5e7eb",borderRadius:"8px"},children:[e.jsx("option",{value:"",children:"Select development laws"}),e.jsx("option",{value:"Standard",children:"Standard"}),e.jsx("option",{value:"Restricted",children:"Restricted"}),e.jsx("option",{value:"Heritage",children:"Heritage"}),e.jsx("option",{value:"Coastal",children:"Coastal"}),e.jsx("option",{value:"Hill Station",children:"Hill Station"})]})]})]}),(Y>0||U||T)&&e.jsxs("div",{style:{backgroundColor:"#f0fdf4",border:"1px solid #bbf7d0",borderRadius:"12px",padding:"20px",marginBottom:"20px"},children:[e.jsx("h3",{style:{margin:"0 0 16px 0",color:"#166534",fontSize:"18px"},children:" AI Suggestions"}),e.jsxs("div",{style:{fontSize:"14px",color:"#166534"},children:[U&&U!=="unknown"&&e.jsxs("div",{style:{marginBottom:"8px",padding:"8px",backgroundColor:"#dcfce7",border:"1px solid #bbf7d0",borderRadius:"4px"},children:[" For ",U," plot size, consider ",U==="small"?"[1, 2]":U==="medium"?"[1, 2, 3]":U==="large"?"[2, 3, 4]":U==="xlarge"?"[3, 4, 5, 6]":"[4, 5, 6]"," floors"]}),Y&&Y>0&&e.jsxs("div",{style:{marginBottom:"8px",padding:"8px",backgroundColor:"#dcfce7",border:"1px solid #bbf7d0",borderRadius:"4px"},children:[" Estimated cost: ",Math.round(Y).toLocaleString()," (",Math.round(Y/(l.building_size||1e3)),"/sq ft)"]}),T&&T!=="unknown"&&e.jsxs("div",{style:{marginBottom:"8px",padding:"8px",backgroundColor:"#dcfce7",border:"1px solid #bbf7d0",borderRadius:"4px"},children:[" Recommended materials for ",T," budget"]})]})]}),(N.num_floors||L.num_floors)&&e.jsxs("div",{style:{backgroundColor:"#f8fafc",border:"1px solid #e2e8f0",borderRadius:"12px",padding:"20px",marginBottom:"20px"},children:[e.jsx("h3",{style:{margin:"0 0 16px 0",color:"#1e293b",fontSize:"18px"},children:" Site Details Validation"}),N.num_floors&&e.jsxs("div",{style:{marginBottom:"8px",padding:"8px",backgroundColor:"#fef2f2",border:"1px solid #fecaca",borderRadius:"4px",color:"#dc2626"},children:[" Number of Floors: ",N.num_floors]}),L.num_floors&&e.jsxs("div",{style:{marginBottom:"8px",padding:"8px",backgroundColor:"#fffbeb",border:"1px solid #fed7aa",borderRadius:"4px",color:"#d97706"},children:[" Number of Floors: ",L.num_floors]})]}),e.jsxs("div",{className:"wizard-footer",children:[e.jsx("button",{className:"btn btn-secondary",onClick:_,children:"Back"}),e.jsx("button",{className:"btn btn-primary",onClick:Q,children:"Next"})]})]}),i===2&&e.jsxs("div",{className:"section",children:[e.jsx("div",{className:"section-header",children:"Family Needs"}),e.jsxs("div",{className:"section-body",children:[e.jsxs("div",{className:"field",children:[e.jsx("label",{style:{fontSize:"20px",fontWeight:"700",color:"#1f2937",marginBottom:"24px",display:"block",textAlign:"center"},children:" Select Room Requirements"}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"16px",padding:"20px",backgroundColor:"#f8fafc",borderRadius:"16px",border:"2px solid #e2e8f0",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)"},children:[{key:"master_bedroom",label:"Master Bedroom",icon:"",category:"Essential"},{key:"bedrooms",label:"Bedrooms",icon:"",category:"Essential"},{key:"bathrooms",label:"Bathrooms",icon:"",category:"Essential"},{key:"attached_bathroom",label:"Attached Bathroom",icon:"",category:"Luxury"},{key:"kitchen",label:"Kitchen",icon:"",category:"Essential"},{key:"living_room",label:"Living Room",icon:"",category:"Essential"},{key:"dining_room",label:"Dining Room",icon:"",category:"Essential"},{key:"study_room",label:"Study Room",icon:"",category:"Optional"},{key:"prayer_room",label:"Prayer Room",icon:"",category:"Optional"},{key:"guest_room",label:"Guest Room",icon:"",category:"Optional"},{key:"store_room",label:"Store Room",icon:"",category:"Utility"},{key:"balcony",label:"Balcony",icon:"",category:"Luxury"},{key:"terrace",label:"Terrace",icon:"",category:"Luxury"},{key:"garage",label:"Garage",icon:"",category:"Utility"}].map(ve=>{const et=Array.isArray(l.rooms)&&l.rooms.includes(ve.key);return e.jsxs("button",{type:"button",onClick:()=>{const Oe=Array.isArray(l.rooms)?l.rooms:[],kt=Oe.includes(ve.key)?Oe.filter(lt=>lt!==ve.key):[...Oe,ve.key],xt=ne(kt);d({...l,rooms:kt,floor_rooms:xt})},style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"20px 16px",backgroundColor:et?"#dbeafe":"white",border:et?"3px solid #3b82f6":"2px solid #e5e7eb",borderRadius:"12px",cursor:"pointer",transition:"all 0.3s ease",position:"relative",minHeight:"120px",boxShadow:et?"0 8px 25px -5px rgba(59, 130, 246, 0.3)":"0 2px 4px rgba(0, 0, 0, 0.1)",transform:et?"translateY(-2px)":"translateY(0)",fontSize:"16px",fontWeight:"600"},onMouseEnter:Oe=>{et||(Oe.target.style.backgroundColor="#f1f5f9",Oe.target.style.borderColor="#94a3b8",Oe.target.style.transform="translateY(-1px)")},onMouseLeave:Oe=>{et||(Oe.target.style.backgroundColor="white",Oe.target.style.borderColor="#e5e7eb",Oe.target.style.transform="translateY(0)")},children:[e.jsx("div",{style:{position:"absolute",top:"8px",right:"8px",fontSize:"10px",fontWeight:"700",padding:"2px 6px",borderRadius:"4px",backgroundColor:ve.category==="Essential"?"#dcfce7":ve.category==="Luxury"?"#fef3c7":ve.category==="Utility"?"#e0e7ff":"#f3f4f6",color:ve.category==="Essential"?"#166534":ve.category==="Luxury"?"#92400e":ve.category==="Utility"?"#3730a3":"#6b7280",border:"1px solid",borderColor:ve.category==="Essential"?"#bbf7d0":ve.category==="Luxury"?"#fde68a":ve.category==="Utility"?"#c7d2fe":"#d1d5db"},children:ve.category}),e.jsx("div",{style:{fontSize:"32px",marginBottom:"8px",display:"flex",alignItems:"center",justifyContent:"center"},children:ve.icon}),e.jsx("div",{style:{fontSize:"14px",fontWeight:"600",color:"#374151",textAlign:"center",lineHeight:"1.3",marginBottom:"4px"},children:ve.label}),et&&e.jsx("div",{style:{position:"absolute",top:"8px",left:"8px",width:"24px",height:"24px",backgroundColor:"#3b82f6",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontSize:"14px",fontWeight:"700",boxShadow:"0 2px 4px rgba(59, 130, 246, 0.3)"},children:""})]},ve.key)})}),Array.isArray(l.rooms)&&l.rooms.length>0&&e.jsxs("div",{style:{marginTop:"20px",padding:"16px",backgroundColor:"#f0f9ff",border:"2px solid #0ea5e9",borderRadius:"12px",textAlign:"center"},children:[e.jsxs("div",{style:{fontSize:"16px",fontWeight:"600",color:"#0c4a6e",marginBottom:"8px"},children:[" ",l.rooms.length," Room",l.rooms.length!==1?"s":""," Selected"]}),e.jsx("div",{style:{fontSize:"14px",color:"#0369a1",display:"flex",flexWrap:"wrap",gap:"8px",justifyContent:"center"},children:l.rooms.map(ve=>e.jsx("span",{style:{backgroundColor:"#bae6fd",padding:"4px 8px",borderRadius:"6px",fontSize:"12px",fontWeight:"500"},children:ve.replace("_"," ").replace(/\b\w/g,et=>et.toUpperCase())},ve))})]})]}),l.num_floors&&parseInt(l.num_floors)>=1&&e.jsxs("div",{style:{marginTop:"32px",padding:"24px",backgroundColor:"#ffffff",border:"2px solid #e2e8f0",borderRadius:"16px",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px",paddingBottom:"16px",borderBottom:"2px solid #f1f5f9"},children:[e.jsx("h4",{style:{margin:0,fontSize:"20px",fontWeight:"700",color:"#1f2937",display:"flex",alignItems:"center",gap:"8px"},children:" Floor-wise Room Planning"}),e.jsxs("div",{style:{display:"flex",gap:"12px",alignItems:"center"},children:[e.jsxs("span",{style:{fontSize:"14px",color:"#059669",backgroundColor:"#f0fdf4",padding:"8px 12px",borderRadius:"8px",fontWeight:"600",border:"1px solid #bbf7d0"},children:[" ",l.num_floors," Floor",l.num_floors!=="1"?"s":""," Total"]}),(()=>{const ve=Array.from({length:parseInt(l.num_floors)||0},(et,Oe)=>{const kt=`floor${Oe+1}`,xt=l.room_images?.[kt]||{};return Object.values(xt).reduce((lt,Ut)=>lt+(Ut?.length||0),0)}).reduce((et,Oe)=>et+Oe,0);return ve>0?e.jsxs("span",{style:{fontSize:"12px",color:"#059669",backgroundColor:"#f0fdf4",padding:"4px 8px",borderRadius:"4px",border:"1px solid #bbf7d0"},children:[" ",ve," Images"]}):null})()]})]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(350px, 1fr))",gap:"20px"},children:Array.from({length:parseInt(l.num_floors)||0},(ve,et)=>{const Oe=et+1,kt=`floor${Oe}`,xt=l.expandedFloors?.[Oe]||Oe===1;return e.jsxs("div",{style:{border:"2px solid #e5e7eb",borderRadius:"12px",padding:"20px",backgroundColor:xt?"#f8fafc":"#ffffff",boxShadow:xt?"0 4px 6px -1px rgba(0, 0, 0, 0.1)":"0 1px 3px rgba(0, 0, 0, 0.1)",transition:"all 0.3s ease"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"pointer",marginBottom:xt?"20px":"0",padding:"12px",backgroundColor:Oe===1?"#dbeafe":"#f0fdf4",borderRadius:"8px",border:`2px solid ${Oe===1?"#3b82f6":"#10b981"}`},onClick:()=>d(lt=>({...lt,expandedFloors:{...lt.expandedFloors,[Oe]:!xt}})),children:[e.jsx("h5",{style:{margin:0,fontSize:"16px",fontWeight:"700",color:Oe===1?"#1e40af":"#047857",display:"flex",alignItems:"center",gap:"8px"},children:Oe===1?" Ground Floor":` Floor ${Oe}`}),e.jsx("span",{style:{fontSize:"18px",color:Oe===1?"#1e40af":"#047857",fontWeight:"700"},children:xt?"":""})]}),xt&&e.jsx("div",{style:{display:"grid",gap:"12px"},children:l.rooms&&l.rooms.length>0?l.rooms.map(lt=>{const Ut=lt,_t=l.floor_rooms?.[kt]?.[Ut]||0,Nt=l.room_images?.[kt]?.[Ut]||[],qt=l.expandedRoomImages?.[kt]?.[Ut]||!1;return e.jsxs("div",{style:{border:"1px solid #e5e7eb",borderRadius:"6px",padding:"8px",backgroundColor:"#ffffff",marginBottom:"8px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("span",{style:{fontSize:"16px"},children:[{key:"master_bedroom",icon:""},{key:"bedrooms",icon:""},{key:"bathrooms",icon:""},{key:"attached_bathroom",icon:""},{key:"kitchen",icon:""},{key:"living_room",icon:""},{key:"dining_room",icon:""},{key:"study_room",icon:""},{key:"prayer_room",icon:""},{key:"guest_room",icon:""},{key:"store_room",icon:""},{key:"balcony",icon:""},{key:"terrace",icon:""},{key:"garage",icon:""}].find(Bt=>Bt.key===lt)?.icon||""}),e.jsx("span",{style:{fontSize:"12px",fontWeight:"500"},children:lt.replace("_"," ").replace(/\b\w/g,Bt=>Bt.toUpperCase())}),Nt.length>0&&e.jsxs("span",{style:{fontSize:"10px",color:"#059669",backgroundColor:"#f0fdf4",padding:"2px 4px",borderRadius:"2px"},children:[" ",Nt.length]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("span",{style:{fontSize:"16px"},children:[{key:"master_bedroom",icon:""},{key:"bedrooms",icon:""},{key:"bathrooms",icon:""},{key:"attached_bathroom",icon:""},{key:"kitchen",icon:""},{key:"living_room",icon:""},{key:"dining_room",icon:""},{key:"study_room",icon:""},{key:"prayer_room",icon:""},{key:"guest_room",icon:""},{key:"store_room",icon:""},{key:"balcony",icon:""},{key:"terrace",icon:""},{key:"garage",icon:""}].find(Bt=>Bt.key===lt)?.icon||""}),e.jsx("span",{style:{fontSize:"12px",fontWeight:"500"},children:lt.replace("_"," ").replace(/\b\w/g,Bt=>Bt.toUpperCase())}),e.jsx("span",{style:{fontSize:"10px",color:"#059669",backgroundColor:"#f0fdf4",padding:"2px 4px",borderRadius:"2px",border:"1px solid #bbf7d0"},children:" Auto"}),Nt.length>0&&e.jsxs("span",{style:{fontSize:"10px",color:"#059669",backgroundColor:"#f0fdf4",padding:"2px 4px",borderRadius:"2px"},children:[" ",Nt.length]})]}),e.jsxs("div",{style:{display:"flex",gap:"4px",alignItems:"center"},children:[e.jsx("button",{type:"button",onClick:()=>{l.floor_rooms?.[kt];const Bt=Object.keys(l.floor_rooms||{}).filter(Xt=>Xt!==kt);if(Bt.length>0){const Xt=Bt[0];d(ta=>({...ta,floor_rooms:{...ta.floor_rooms,[kt]:{...ta.floor_rooms?.[kt],[Ut]:0},[Xt]:{...ta.floor_rooms?.[Xt],[Ut]:1}}}))}},style:{fontSize:"10px",padding:"2px 6px",backgroundColor:"#fef3c7",border:"1px solid #f59e0b",borderRadius:"4px",color:"#92400e",cursor:"pointer"},children:" Move"}),e.jsx("button",{type:"button",onClick:()=>d(Bt=>({...Bt,floor_rooms:{...Bt.floor_rooms,[kt]:{...Bt.floor_rooms?.[kt],[Ut]:Math.max(0,_t-1)}}})),style:{width:"24px",height:"24px",border:"1px solid #d1d5db",borderRadius:"4px",backgroundColor:"#ffffff",cursor:"pointer",fontSize:"14px",display:"flex",alignItems:"center",justifyContent:"center"},children:"-"}),e.jsx("span",{style:{minWidth:"20px",textAlign:"center",fontSize:"12px",fontWeight:"600"},children:_t}),e.jsx("button",{type:"button",onClick:()=>d(Bt=>({...Bt,floor_rooms:{...Bt.floor_rooms,[kt]:{...Bt.floor_rooms?.[kt],[Ut]:_t+1}}})),style:{width:"24px",height:"24px",border:"1px solid #d1d5db",borderRadius:"4px",backgroundColor:"#ffffff",cursor:"pointer",fontSize:"14px",display:"flex",alignItems:"center",justifyContent:"center"},children:"+"})]})]}),_t>0&&e.jsxs("div",{style:{borderTop:"1px solid #f3f4f6",paddingTop:"8px",marginTop:"8px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px"},children:[e.jsx("span",{style:{fontSize:"11px",fontWeight:"500",color:"#6b7280",minWidth:"80px"},children:" Reference:"}),e.jsx("input",{type:"file",accept:"image/*",multiple:!0,onChange:Bt=>{const Xt=Array.from(Bt.target.files),ta=[...Nt,...Xt];d(ie=>({...ie,room_images:{...ie.room_images,[kt]:{...ie.room_images?.[kt],[Ut]:ta}}}))},style:{fontSize:"10px",padding:"4px 8px",border:"1px solid #d1d5db",borderRadius:"4px",backgroundColor:"#ffffff",flex:1}})]}),Nt.length>0&&e.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"4px",marginTop:"8px"},children:Nt.map((Bt,Xt)=>e.jsxs("div",{style:{position:"relative",width:"40px",height:"40px",borderRadius:"4px",overflow:"hidden",border:"1px solid #d1d5db"},children:[e.jsx("img",{src:typeof Bt=="string"?Bt:URL.createObjectURL(Bt),alt:`Reference ${Xt+1}`,style:{width:"100%",height:"100%",objectFit:"cover"}}),e.jsx("button",{type:"button",onClick:()=>{const ta=Nt.filter((ie,at)=>at!==Xt);d(ie=>({...ie,room_images:{...ie.room_images,[kt]:{...ie.room_images?.[kt],[Ut]:ta}}}))},style:{position:"absolute",top:"-2px",right:"-2px",width:"16px",height:"16px",borderRadius:"50%",backgroundColor:"#dc2626",color:"white",border:"none",fontSize:"10px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:""})]},Xt))})]}),_t>0&&e.jsxs("div",{style:{borderTop:"1px solid #f3f4f6",paddingTop:"8px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[e.jsxs("span",{style:{fontSize:"11px",fontWeight:"500",color:"#6b7280"},children:[" Reference Images for ",lt.replace("_"," ")]}),e.jsx("button",{type:"button",onClick:()=>d(Bt=>({...Bt,expandedRoomImages:{...Bt.expandedRoomImages,[kt]:{...Bt.expandedRoomImages?.[kt],[Ut]:!qt}}})),style:{fontSize:"12px",color:"#6b7280",background:"none",border:"none",cursor:"pointer"},children:qt?" Hide":" Show"})]}),qt&&e.jsxs("div",{children:[e.jsx("input",{type:"file",multiple:!0,accept:"image/*",onChange:Bt=>{const Xt=Array.from(Bt.target.files);d(ta=>({...ta,room_images:{...ta.room_images,[kt]:{...ta.room_images?.[kt],[Ut]:[...ta.room_images?.[kt]?.[Ut]||[],...Xt]}}}))},style:{display:"none"},id:`${kt}-${Ut}-images`}),e.jsx("label",{htmlFor:`${kt}-${Ut}-images`,style:{display:"inline-block",padding:"4px 8px",backgroundColor:"#3b82f6",color:"white",borderRadius:"4px",cursor:"pointer",fontSize:"10px",fontWeight:"500",marginBottom:"8px"},children:"Add Images"}),Nt.length>0&&e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(50px, 1fr))",gap:"4px"},children:Nt.map((Bt,Xt)=>e.jsxs("div",{style:{position:"relative",border:"1px solid #d1d5db",borderRadius:"2px",overflow:"hidden"},children:[e.jsx("img",{src:URL.createObjectURL(Bt),alt:`${lt} ${Xt+1}`,style:{width:"100%",height:"35px",objectFit:"cover"}}),e.jsx("button",{type:"button",onClick:()=>d(ta=>({...ta,room_images:{...ta.room_images,[kt]:{...ta.room_images?.[kt],[Ut]:ta.room_images[kt][Ut].filter((ie,at)=>at!==Xt)}}})),style:{position:"absolute",top:"1px",right:"1px",background:"rgba(0,0,0,0.7)",color:"white",border:"none",borderRadius:"50%",width:"14px",height:"14px",fontSize:"8px",cursor:"pointer"},children:""})]},Xt))})]})]})]},lt)}):e.jsx("div",{style:{textAlign:"center",color:"#6b7280",fontSize:"12px",padding:"20px"},children:"Select room types above to plan floor-wise"})})]},kt)})}),e.jsxs("div",{style:{marginTop:"12px",padding:"8px 12px",backgroundColor:"#f0fdf4",borderRadius:"4px",fontSize:"12px",color:"#166534"},children:[" ",e.jsx("strong",{children:"Smart Planning:"})," Plan room distribution across floors. Each room type can have its own reference images for better visualization and planning."]})]})]}),(Y>0||U||T)&&e.jsxs("div",{style:{backgroundColor:"#f0fdf4",border:"1px solid #bbf7d0",borderRadius:"12px",padding:"20px",marginBottom:"20px"},children:[e.jsx("h3",{style:{margin:"0 0 16px 0",color:"#166534",fontSize:"18px"},children:" AI Suggestions"}),e.jsxs("div",{style:{fontSize:"14px",color:"#166534"},children:[U&&U!=="unknown"&&e.jsxs("div",{style:{marginBottom:"8px",padding:"8px",backgroundColor:"#dcfce7",border:"1px solid #bbf7d0",borderRadius:"4px"},children:[" For ",U," plot size, consider ",U==="small"?"[1, 2]":U==="medium"?"[1, 2, 3]":U==="large"?"[2, 3, 4]":U==="xlarge"?"[3, 4, 5, 6]":"[4, 5, 6]"," floors"]}),Y&&Y>0&&e.jsxs("div",{style:{marginBottom:"8px",padding:"8px",backgroundColor:"#dcfce7",border:"1px solid #bbf7d0",borderRadius:"4px"},children:[" Estimated cost: ",Math.round(Y).toLocaleString()," (",Math.round(Y/(l.building_size||1e3)),"/sq ft)"]}),T&&T!=="unknown"&&e.jsxs("div",{style:{marginBottom:"8px",padding:"8px",backgroundColor:"#dcfce7",border:"1px solid #bbf7d0",borderRadius:"4px"},children:[" Recommended materials for ",T," budget"]})]})]}),e.jsxs("div",{className:"wizard-footer",children:[e.jsx("button",{className:"btn btn-secondary",onClick:_,children:"Back"}),e.jsx("button",{className:"btn btn-primary",onClick:Q,children:"Next"})]})]}),i===3&&e.jsxs("div",{className:"section",children:[e.jsx("div",{className:"section-header",children:"Preferences"}),e.jsxs("div",{className:"section-body",children:[e.jsxs("div",{style:{backgroundColor:"#ffffff",border:"2px solid #e5e7eb",borderRadius:"16px",padding:"24px",marginBottom:"24px",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"20px",paddingBottom:"16px",borderBottom:"2px solid #f1f5f9"},children:[e.jsx("span",{style:{fontSize:"24px"},children:""}),e.jsx("h3",{style:{margin:0,fontSize:"20px",fontWeight:"700",color:"#1f2937"},children:"Option 1: Manual Style Selection"}),e.jsx("span",{style:{fontSize:"12px",backgroundColor:"#dbeafe",color:"#1e40af",padding:"4px 8px",borderRadius:"6px",fontWeight:"600"},children:"Your Choice"})]}),e.jsxs("div",{className:"field",children:[e.jsx("label",{style:{fontSize:"16px",fontWeight:"600",color:"#374151",marginBottom:"12px",display:"block"},children:"Select Your Preferred House Style"}),e.jsxs("select",{value:l.aesthetic||"",onChange:ve=>{const et=ve.target.value;console.log(" User manually selected aesthetic:",et),d(Oe=>({...Oe,aesthetic:et})),m(null)},style:{width:"100%",padding:"16px 20px",fontSize:"18px",fontWeight:"500",border:N.aesthetic?"3px solid #dc2626":"2px solid #e5e7eb",borderRadius:"12px",backgroundColor:"#ffffff",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)",cursor:"pointer",transition:"all 0.2s ease"},onFocus:ve=>{ve.target.style.borderColor="#3b82f6",ve.target.style.boxShadow="0 0 0 3px rgba(59, 130, 246, 0.1)"},onBlur:ve=>{ve.target.style.borderColor="#e5e7eb",ve.target.style.boxShadow="0 2px 4px rgba(0, 0, 0, 0.1)"},children:[e.jsx("option",{value:"",children:"Choose your preferred house style..."}),e.jsx("option",{value:"Modern",children:" Modern"}),e.jsx("option",{value:"Traditional",children:" Traditional"}),e.jsx("option",{value:"Contemporary",children:" Contemporary"}),e.jsx("option",{value:"Minimalist",children:" Minimalist"}),e.jsx("option",{value:"Classical",children:" Classical"}),e.jsx("option",{value:"Mediterranean",children:" Mediterranean"}),e.jsx("option",{value:"Scandinavian",children:" Scandinavian"}),e.jsx("option",{value:"Industrial",children:" Industrial"}),e.jsx("option",{value:"Colonial",children:" Colonial"}),e.jsx("option",{value:"Victorian",children:" Victorian"}),e.jsx("option",{value:"Art Deco",children:" Art Deco"}),e.jsx("option",{value:"Rustic",children:" Rustic"}),e.jsx("option",{value:"Farmhouse",children:" Farmhouse"}),e.jsx("option",{value:"Craftsman",children:" Craftsman"}),e.jsx("option",{value:"Tudor",children:" Tudor"}),e.jsx("option",{value:"Ranch",children:" Ranch"}),e.jsx("option",{value:"Cape Cod",children:" Cape Cod"}),e.jsx("option",{value:"Spanish",children:" Spanish"}),e.jsx("option",{value:"French Country",children:" French Country"}),e.jsx("option",{value:"Mid-Century Modern",children:" Mid-Century Modern"}),e.jsx("option",{value:"Prairie",children:" Prairie"}),e.jsx("option",{value:"Gothic",children:" Gothic"}),e.jsx("option",{value:"Neoclassical",children:" Neoclassical"}),e.jsx("option",{value:"Baroque",children:" Baroque"}),e.jsx("option",{value:"Rococo",children:" Rococo"}),e.jsx("option",{value:"Bauhaus",children:" Bauhaus"}),e.jsx("option",{value:"Brutalist",children:" Brutalist"}),e.jsx("option",{value:"Postmodern",children:" Postmodern"}),e.jsx("option",{value:"Deconstructivist",children:" Deconstructivist"}),e.jsx("option",{value:"High-Tech",children:" High-Tech"}),e.jsx("option",{value:"Sustainable/Green",children:" Sustainable/Green"}),e.jsx("option",{value:"Smart Home",children:" Smart Home"}),e.jsx("option",{value:"Luxury",children:" Luxury"}),e.jsx("option",{value:"Affordable",children:" Affordable"}),e.jsx("option",{value:"Custom",children:" Custom"})]}),l.aesthetic&&e.jsxs("div",{style:{marginTop:"16px",padding:"12px 16px",backgroundColor:"#f0f9ff",border:"2px solid #0ea5e9",borderRadius:"8px",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("span",{style:{fontSize:"16px"},children:""}),e.jsxs("span",{style:{fontSize:"14px",fontWeight:"600",color:"#0c4a6e"},children:["Selected: ",e.jsx("strong",{children:l.aesthetic})]})]}),N.aesthetic&&e.jsxs("div",{style:{color:"#dc2626",fontSize:"14px",marginTop:"8px",padding:"8px 12px",backgroundColor:"#fef2f2",border:"1px solid #fecaca",borderRadius:"6px"},children:[" ",N.aesthetic]})]})]}),e.jsxs("div",{style:{backgroundColor:"#f8fafc",border:"2px solid #e2e8f0",borderRadius:"16px",padding:"24px",marginBottom:"24px",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"20px",paddingBottom:"16px",borderBottom:"2px solid #f1f5f9"},children:[e.jsx("span",{style:{fontSize:"24px"},children:""}),e.jsx("h3",{style:{margin:0,fontSize:"20px",fontWeight:"700",color:"#1f2937"},children:"Option 2: AI-Powered Style Recommendations"}),e.jsx("span",{style:{fontSize:"12px",backgroundColor:"#fef3c7",color:"#92400e",padding:"4px 8px",borderRadius:"6px",fontWeight:"600"},children:"Smart Suggestions"})]}),e.jsxs("div",{style:{fontSize:"14px",color:"#6b7280",marginBottom:"20px",padding:"12px 16px",backgroundColor:"#f1f5f9",borderRadius:"8px",border:"1px solid #e2e8f0"},children:[" ",e.jsx("strong",{children:"Based on your project details:"})," Plot size, budget range, building size, and room requirements"]}),e.jsx(F6,{formData:l,onStyleChange:ve=>{console.log(" User selected AI suggestion:",ve.name),m(ve),d(et=>({...et,aesthetic:ve.name}))},showSuggestions:!0,autoSelect:!1})]})]}),mt(),(Y>0||U||T)&&e.jsxs("div",{style:{backgroundColor:"#f0fdf4",border:"1px solid #bbf7d0",borderRadius:"12px",padding:"20px",marginBottom:"20px"},children:[e.jsx("h3",{style:{margin:"0 0 16px 0",color:"#166534",fontSize:"18px"},children:" AI Suggestions"}),e.jsxs("div",{style:{fontSize:"14px",color:"#166534"},children:[U&&U!=="unknown"&&e.jsxs("div",{style:{marginBottom:"8px",padding:"8px",backgroundColor:"#dcfce7",border:"1px solid #bbf7d0",borderRadius:"4px"},children:[" For ",U," plot size, consider ",U==="small"?"[1, 2]":U==="medium"?"[1, 2, 3]":U==="large"?"[2, 3, 4]":U==="xlarge"?"[3, 4, 5, 6]":"[4, 5, 6]"," floors"]}),Y&&Y>0&&e.jsxs("div",{style:{marginBottom:"8px",padding:"8px",backgroundColor:"#dcfce7",border:"1px solid #bbf7d0",borderRadius:"4px"},children:[" Estimated cost: ",Math.round(Y).toLocaleString()," (",Math.round(Y/(l.building_size||1e3)),"/sq ft)"]}),T&&T!=="unknown"&&e.jsxs("div",{style:{marginBottom:"8px",padding:"8px",backgroundColor:"#dcfce7",border:"1px solid #bbf7d0",borderRadius:"4px"},children:[" Recommended materials for ",T," budget"]})]})]}),(N.aesthetic||L.aesthetic)&&e.jsxs("div",{style:{backgroundColor:"#f8fafc",border:"1px solid #e2e8f0",borderRadius:"12px",padding:"20px",marginBottom:"20px"},children:[e.jsx("h3",{style:{margin:"0 0 16px 0",color:"#1e293b",fontSize:"18px"},children:" Preferences Validation"}),N.aesthetic&&e.jsxs("div",{style:{marginBottom:"8px",padding:"8px",backgroundColor:"#fef2f2",border:"1px solid #fecaca",borderRadius:"4px",color:"#dc2626"},children:[" House Style: ",N.aesthetic]}),L.aesthetic&&e.jsxs("div",{style:{marginBottom:"8px",padding:"8px",backgroundColor:"#fffbeb",border:"1px solid #fed7aa",borderRadius:"4px",color:"#d97706"},children:[" House Style: ",L.aesthetic]})]}),e.jsxs("div",{className:"wizard-footer",children:[e.jsx("button",{className:"btn btn-secondary",onClick:_,children:"Back"}),e.jsx("button",{className:"btn btn-primary",onClick:Q,children:"Next"})]})]}),i===4&&e.jsxs("div",{className:"section",children:[e.jsx("div",{className:"section-header",children:"Review"}),e.jsxs("div",{style:{backgroundColor:"#f8fafc",border:"1px solid #e2e8f0",borderRadius:"12px",padding:"20px",marginBottom:"20px"},children:[e.jsx("h3",{style:{margin:"0 0 16px 0",color:"#1e293b",fontSize:"18px"},children:" AI-Powered Design Summary"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"16px"},children:[e.jsxs("div",{style:{backgroundColor:"white",padding:"16px",borderRadius:"8px",border:"1px solid #e2e8f0"},children:[e.jsx("h4",{style:{margin:"0 0 12px 0",color:"#374151",fontSize:"16px"},children:" Project Overview"}),e.jsxs("div",{style:{fontSize:"14px",color:"#6b7280",lineHeight:"1.6"},children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Plot Size:"})," ",l.plot_size," sq ft"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Building Size:"})," ",l.building_size," sq ft"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Floors:"})," ",l.num_floors]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Budget:"})," ",l.budget_range]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Style:"})," ",l.aesthetic]})]})]}),e.jsxs("div",{style:{backgroundColor:"white",padding:"16px",borderRadius:"8px",border:"1px solid #e2e8f0"},children:[e.jsx("h4",{style:{margin:"0 0 12px 0",color:"#374151",fontSize:"16px"},children:" Room Requirements"}),e.jsx("div",{style:{fontSize:"14px",color:"#6b7280",lineHeight:"1.6"},children:l.rooms&&l.rooms.length>0?e.jsxs("div",{children:[e.jsxs("div",{style:{marginBottom:"12px"},children:[e.jsx("strong",{children:"Selected Room Types:"}),e.jsx("div",{style:{marginTop:"4px"},children:l.rooms.map(ve=>e.jsx("span",{style:{display:"inline-block",margin:"2px 4px 2px 0",padding:"2px 6px",backgroundColor:"#f3f4f6",borderRadius:"4px",fontSize:"12px"},children:ve.replace("_"," ").replace(/\b\w/g,et=>et.toUpperCase())},ve))})]}),l.num_floors&&parseInt(l.num_floors)>=2&&l.floor_rooms&&Object.keys(l.floor_rooms).length>0&&e.jsxs("div",{children:[e.jsx("strong",{children:"Floor-wise Room Distribution:"}),e.jsx("div",{style:{marginTop:"8px"},children:Array.from({length:parseInt(l.num_floors)||0},(ve,et)=>{const Oe=et+1,kt=`floor${Oe}`,xt=l.floor_rooms[kt]||{};return Object.values(xt).reduce((Ut,_t)=>Ut+(_t||0),0)===0?null:e.jsxs("div",{style:{marginBottom:"8px",padding:"8px",backgroundColor:"#f9fafb",borderRadius:"6px",border:"1px solid #e5e7eb"},children:[e.jsx("div",{style:{fontWeight:"600",marginBottom:"4px",color:"#374151"},children:Oe===1?"Ground Floor":`Floor ${Oe}`}),e.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"4px"},children:Object.entries(xt).map(([Ut,_t])=>{if(!_t||_t===0)return null;const Nt={master_bedroom:"",bedrooms:"",attached_bathrooms:"",common_bathrooms:"",living_room:"",dining_room:"",kitchen:"",study_area:"",prayer_area:"",guest_room:"",store_room:"",balcony:"",terrace:"",garage:"",utility_area:""}[Ut]||"";return e.jsxs("span",{style:{display:"inline-flex",alignItems:"center",gap:"4px",padding:"2px 6px",backgroundColor:"#e0f2fe",borderRadius:"4px",fontSize:"11px",color:"#0c4a6e",border:"1px solid #bae6fd"},children:[e.jsx("span",{children:Nt}),e.jsx("span",{children:Ut.replace("_"," ").replace(/\b\w/g,qt=>qt.toUpperCase())}),e.jsxs("span",{style:{fontWeight:"600"},children:["",_t]})]},Ut)})})]},kt)})})]}),(()=>{const ve=l.floor_rooms?Object.values(l.floor_rooms).reduce((et,Oe)=>et+Object.values(Oe).reduce((kt,xt)=>kt+(xt||0),0),0):0;return ve>0?e.jsx("div",{style:{marginTop:"12px",padding:"8px",backgroundColor:"#f0fdf4",borderRadius:"6px",border:"1px solid #bbf7d0"},children:e.jsxs("strong",{style:{color:"#166534"},children:["Total Rooms: ",ve]})}):null})()]}):e.jsx("div",{children:"No rooms selected"})})]}),e.jsxs("div",{style:{backgroundColor:"white",padding:"16px",borderRadius:"8px",border:"1px solid #e2e8f0"},children:[e.jsx("h4",{style:{margin:"0 0 12px 0",color:"#374151",fontSize:"16px"},children:" Project Timeline"}),e.jsx("div",{style:{fontSize:"14px",color:"#6b7280",lineHeight:"1.6"},children:q?e.jsxs("div",{children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Estimated Duration:"})," ",q.months," months"]}),q.estimatedCompletion&&e.jsxs("div",{children:[e.jsx("strong",{children:"Completion Date:"})," ",q.estimatedCompletion.toLocaleDateString()]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Phases:"})," ",q.phases?.length||0," phases planned"]})]}):e.jsx("div",{children:"Timeline not calculated"})})]}),e.jsxs("div",{style:{backgroundColor:"white",padding:"16px",borderRadius:"8px",border:"1px solid #e2e8f0"},children:[e.jsx("h4",{style:{margin:"0 0 12px 0",color:"#374151",fontSize:"16px"},children:" Selected Style"}),e.jsx("div",{style:{fontSize:"14px",color:"#6b7280",lineHeight:"1.6"},children:p?e.jsxs("div",{children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Style:"})," ",p.name]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Description:"})," ",p.description]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Match:"})," ",p.suitability,"% suitability"]})]}):e.jsx("div",{children:"No style selected"})})]})]})]}),e.jsxs("div",{className:"wizard-footer",children:[e.jsx("button",{className:"btn btn-secondary",onClick:_,children:"Back"}),e.jsx("button",{className:"btn btn-primary",onClick:Q,children:"Next"})]})]}),i===5&&e.jsxs("div",{className:"section",children:[e.jsx("div",{className:"section-header",children:"Select Architect"}),e.jsx("div",{className:"section-body",children:e.jsx(Yf,{selectedArchitectIds:l.selected_architect_ids,onSelectionChange:(ve,et)=>{d(Oe=>({...Oe,selected_architect_ids:ve})),A(et||[])},layoutRequestId:null,showAIRecommendations:!0,stylePreferences:l.aesthetic?{aesthetic:l.aesthetic}:{}})}),e.jsxs("div",{className:"wizard-footer",children:[e.jsx("button",{className:"btn btn-secondary",onClick:_,children:"Back"}),e.jsx("button",{className:"btn btn-primary",onClick:Q,children:"Next"})]})]}),i===6&&e.jsxs("div",{className:"section",children:[e.jsx("div",{className:"section-header",children:"Submit"}),e.jsxs("div",{className:"section-body",children:[e.jsxs("div",{className:"submit-message",children:[e.jsx("h3",{children:"Ready to Submit?"}),e.jsx("p",{children:"Please review all your information before submitting your request."})]}),e.jsxs("div",{style:{backgroundColor:"#f8fafc",border:"1px solid #e2e8f0",borderRadius:"8px",padding:"20px",marginBottom:"20px"},children:[e.jsx("h4",{style:{margin:"0 0 16px 0",color:"#374151",fontSize:"18px"},children:" Project Summary"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"16px"},children:[e.jsxs("div",{style:{backgroundColor:"white",padding:"16px",borderRadius:"8px",border:"1px solid #e2e8f0"},children:[e.jsx("h5",{style:{margin:"0 0 12px 0",color:"#374151",fontSize:"16px"},children:" Project Details"}),e.jsxs("div",{style:{fontSize:"14px",color:"#6b7280",lineHeight:"1.6"},children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Plot Size:"})," ",l.plot_size," ",l.plot_unit||"sq ft"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Building Size:"})," ",l.building_size," sq ft"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Floors:"})," ",l.num_floors]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Budget:"})," ",l.budget_range]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Style:"})," ",l.aesthetic]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Timeline:"})," ",l.timeline]}),Y&&e.jsxs("div",{children:[e.jsx("strong",{children:"Estimated Cost:"})," ",Math.round(Y).toLocaleString()]}),U&&e.jsxs("div",{children:[e.jsx("strong",{children:"Plot Category:"})," ",U]}),q&&e.jsxs("div",{children:[e.jsx("strong",{children:"Predicted Duration:"})," ",q.months," months"]})]})]}),e.jsxs("div",{style:{backgroundColor:"white",padding:"16px",borderRadius:"8px",border:"1px solid #e2e8f0"},children:[e.jsxs("h5",{style:{margin:"0 0 12px 0",color:"#374151",fontSize:"16px"},children:[" Selected Architects (",u.length,")"]}),e.jsx("div",{style:{fontSize:"14px",color:"#6b7280",lineHeight:"1.6"},children:u.length>0?e.jsx("div",{children:u.map((ve,et)=>e.jsxs("div",{style:{padding:"8px 12px",backgroundColor:"#f0f9ff",border:"1px solid #bae6fd",borderRadius:"6px",marginBottom:"8px",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsxs("div",{style:{width:"32px",height:"32px",backgroundColor:"#3b82f6",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontSize:"12px",fontWeight:"600"},children:[ve.first_name?.charAt(0)||"A",ve.last_name?.charAt(0)||""]}),e.jsxs("div",{children:[e.jsxs("div",{style:{fontWeight:"600",color:"#1e40af"},children:[ve.first_name," ",ve.last_name]}),e.jsx("div",{style:{fontSize:"12px",color:"#6b7280"},children:ve.email}),ve.specialization&&e.jsx("div",{style:{fontSize:"12px",color:"#059669"},children:ve.specialization})]})]},ve.id))}):e.jsx("div",{style:{color:"#9ca3af",fontStyle:"italic"},children:"No architects selected"})})]})]})]})]}),e.jsxs("div",{className:"wizard-footer",children:[e.jsx("button",{className:"btn btn-secondary",onClick:_,children:"Back"}),e.jsx("button",{className:"btn btn-primary",onClick:Ze,children:"Submit Request"})]})]})]})}function T6(){const t=["Select","Details","Files","Technical Details","Review","Submit"],[a,s]=w.useState(0),[i,o]=w.useState({architect_id:"",request_id:"",homeowner_id:"",design_title:"",description:"",layout_json:"",technical_details:{},preview_image:null,layout_file:null,files:[],view_price:""}),[l,d]=w.useState(!1),[u,A]=w.useState(null),p=u?.role==="architect";w.useEffect(()=>{try{const L=sessionStorage.getItem("user"),te=L?JSON.parse(L):null;A(te),te?.role==="architect"&&te?.id&&o(G=>({...G,architect_id:String(te.id)}))}catch{}},[]);const[m,b]=w.useState([]),[v,x]=w.useState(!0),[C,D]=w.useState("");w.useEffect(()=>{let L=!1;async function te(){if(p){x(!1);return}x(!0),D("");try{const X=await(await fetch("/buildhub/backend/api/admin/get_all_users.php?role=architect&status=approved")).json();L||(X?.success?b(Array.isArray(X.users)?X.users:[]):D(X?.message||"Failed to load architects"))}catch{L||D("Network error while loading architects")}finally{L||x(!1)}}return te(),()=>{L=!0}},[p]);const S=w.useMemo(()=>p&&u?.id?{id:u.id,first_name:u.first_name||"",last_name:u.last_name||"",email:u.email||null}:m.find(L=>String(L.id)===String(i.architect_id)),[p,u,m,i.architect_id]),_=()=>s(L=>Math.min(L+1,t.length-1)),N=()=>s(L=>Math.max(L-1,0));async function O(){d(!0);try{const L=new FormData;i.request_id&&L.append("request_id",i.request_id),i.homeowner_id&&L.append("homeowner_id",i.homeowner_id),i.design_title&&L.append("design_title",i.design_title),i.description&&L.append("description",i.description),i.layout_json&&L.append("layout_json",i.layout_json),i.technical_details&&Object.keys(i.technical_details).length>0&&L.append("technical_details",JSON.stringify(i.technical_details)),i.view_price&&L.append("view_price",i.view_price),i.preview_image&&L.append("preview_image",i.preview_image),i.layout_file&&L.append("layout_file",i.layout_file),(i.files||[]).forEach(X=>L.append("design_files[]",X));const G=await(await fetch("/buildhub/backend/api/architect/upload_design.php",{method:"POST",body:L})).json();G.success?window.history.back():toast.error(G.message||"Failed")}catch{toast.error("Network error")}finally{d(!1)}}return e.jsxs(Op,{title:"Upload Design",subtitle:"Provide details and upload your files",stepper:e.jsx(Mp,{steps:t,current:a}),onBack:a>0?N:()=>window.history.back(),onClose:()=>window.history.back(),children:[a===0&&e.jsxs("div",{className:"section",children:[e.jsx("div",{className:"section-header",children:"Select Target"}),e.jsxs("div",{className:"section-body grid-2",children:[!p&&e.jsxs("div",{className:"field",style:{gridColumn:"1 / -1"},children:[e.jsx("label",{children:"Choose Architect"}),v?e.jsx("div",{className:"muted",children:"Loading architects"}):C?e.jsx("div",{className:"text-danger",children:C}):e.jsxs("select",{value:i.architect_id,onChange:L=>o({...i,architect_id:L.target.value}),children:[e.jsx("option",{value:"",children:"Select architect"}),m.map(L=>e.jsxs("option",{value:L.id,children:[L.first_name," ",L.last_name," (#",L.id,")"]},L.id))]})]}),S&&e.jsxs("div",{className:"muted",style:{marginTop:8,gridColumn:"1 / -1"},children:[e.jsxs("strong",{children:[p?"You (Architect)":"Selected",":"]})," ",S.first_name," ",S.last_name,S.email?`  ${S.email}`:""]}),e.jsxs("div",{className:"field",children:[e.jsx("label",{children:"Layout Request ID (optional)"}),e.jsx("input",{value:i.request_id,onChange:L=>o({...i,request_id:L.target.value})})]}),e.jsxs("div",{className:"field",children:[e.jsx("label",{children:"Homeowner ID (optional)"}),e.jsx("input",{value:i.homeowner_id,onChange:L=>o({...i,homeowner_id:L.target.value})})]})]}),e.jsx("div",{className:"wizard-footer",children:e.jsx("button",{className:"btn btn-primary",onClick:_,children:"Next"})})]}),a===1&&e.jsxs("div",{className:"section",children:[e.jsx("div",{className:"section-header",children:"Details"}),e.jsxs("div",{className:"section-body grid-2",children:[e.jsxs("div",{className:"field",children:[e.jsx("label",{children:"Design Title"}),e.jsx("input",{value:i.design_title,onChange:L=>o({...i,design_title:L.target.value})})]}),e.jsxs("div",{className:"field",style:{gridColumn:"1 / -1"},children:[e.jsx("label",{children:"Description"}),e.jsx("textarea",{rows:4,value:i.description,onChange:L=>o({...i,description:L.target.value})})]})]}),e.jsxs("div",{className:"wizard-footer",children:[e.jsx("button",{className:"btn btn-secondary",onClick:N,children:"Back"}),e.jsx("button",{className:"btn btn-primary",onClick:_,children:"Next"})]})]}),a===2&&e.jsxs("div",{className:"section",children:[e.jsx("div",{className:"section-header",children:"Files"}),e.jsxs("div",{className:"section-body grid-2",children:[e.jsxs("div",{className:"field",children:[e.jsx("label",{children:"Preview Image (shown on homeowner dashboard)"}),e.jsx("input",{type:"file",accept:"image/*",onChange:L=>o({...i,preview_image:(L.target.files||[])[0]||null})}),i.preview_image&&e.jsxs("div",{className:"muted",style:{marginTop:6},children:["Selected: ",i.preview_image.name]})]}),e.jsxs("div",{className:"field",children:[e.jsx("label",{children:"Layout File (image/PDF/CAD)"}),e.jsx("input",{type:"file",onChange:L=>o({...i,layout_file:(L.target.files||[])[0]||null})}),i.layout_file&&e.jsxs("div",{className:"muted",style:{marginTop:6},children:["Selected: ",i.layout_file.name]})]}),e.jsxs("div",{className:"field",style:{gridColumn:"1 / -1"},children:[e.jsx("label",{children:"Additional Files (optional)"}),e.jsx("input",{type:"file",multiple:!0,onChange:L=>o({...i,files:Array.from(L.target.files||[])})}),i.files?.length?e.jsxs("div",{className:"muted",style:{marginTop:6},children:[i.files.length," file(s) selected"]}):null]})]}),e.jsxs("div",{className:"wizard-footer",children:[e.jsx("button",{className:"btn btn-secondary",onClick:N,children:"Back"}),e.jsx("button",{className:"btn btn-primary",onClick:_,children:"Next"})]})]}),a===3&&e.jsxs("div",{className:"section",children:[e.jsx("div",{className:"section-header",children:"Technical Design Details"}),e.jsx("div",{className:"section-body",children:e.jsx(lw,{data:i,setData:o,onNext:_,onPrev:N})})]}),a===4&&e.jsxs("div",{className:"section",children:[e.jsx("div",{className:"section-header",children:"Review Your Submission"}),e.jsx("div",{className:"section-body",children:e.jsxs("div",{className:"review-card",children:[e.jsxs("div",{className:"review-section",children:[e.jsx("h4",{className:"review-title",children:"Design Information"}),e.jsxs("div",{className:"review-grid",children:[e.jsxs("div",{className:"review-item",children:[e.jsx("div",{className:"review-label",children:"Title"}),e.jsx("div",{className:"review-value",children:i.title||"Not provided"})]}),e.jsxs("div",{className:"review-item",children:[e.jsx("div",{className:"review-label",children:"Type"}),e.jsx("div",{className:"review-value",children:i.type||"Not specified"})]}),e.jsxs("div",{className:"review-item",children:[e.jsx("div",{className:"review-label",children:"Description"}),e.jsx("div",{className:"review-value",children:i.description||"No description"})]}),e.jsxs("div",{className:"review-item",children:[e.jsx("div",{className:"review-label",children:"View Price"}),e.jsx("div",{className:"review-value",children:i.view_price?`${i.view_price}`:"Free"})]})]})]}),e.jsxs("div",{className:"review-section",children:[e.jsx("h4",{className:"review-title",children:"Files"}),e.jsxs("div",{className:"review-files",children:[i.preview_image&&e.jsxs("div",{className:"review-file",children:[e.jsx("div",{className:"file-icon",children:""}),e.jsxs("div",{className:"file-details",children:[e.jsx("div",{className:"file-name",children:"Preview Image"}),e.jsx("div",{className:"file-meta",children:i.preview_image.name})]})]}),i.layout_file&&e.jsxs("div",{className:"review-file",children:[e.jsx("div",{className:"file-icon",children:""}),e.jsxs("div",{className:"file-details",children:[e.jsx("div",{className:"file-name",children:"Layout File"}),e.jsx("div",{className:"file-meta",children:i.layout_file.name})]})]}),i.files&&i.files.length>0&&e.jsxs("div",{className:"review-file-group",children:[e.jsxs("div",{className:"file-group-header",children:["Additional Files (",i.files.length,")"]}),e.jsx("div",{className:"file-group-list",children:i.files.map((L,te)=>e.jsxs("div",{className:"file-item",children:[e.jsx("span",{className:"file-item-icon",children:""}),e.jsx("span",{className:"file-item-name",children:L.name})]},te))})]})]})]}),i.technical_details&&Object.keys(i.technical_details).length>0&&e.jsxs("div",{className:"review-section",children:[e.jsx("h4",{className:"review-title",children:"Technical Details"}),e.jsxs("div",{className:"technical-review",children:[i.technical_details.floor_plans?.layout_description&&e.jsxs("div",{className:"review-item",children:[e.jsx("div",{className:"review-label",children:"Floor Plan Layout"}),e.jsx("div",{className:"review-value",children:i.technical_details.floor_plans.layout_description})]}),i.technical_details.floor_plans?.living_room_dimensions&&e.jsxs("div",{className:"review-item",children:[e.jsx("div",{className:"review-label",children:"Living Room Dimensions"}),e.jsx("div",{className:"review-value",children:i.technical_details.floor_plans.living_room_dimensions})]}),i.technical_details.floor_plans?.master_bedroom_dimensions&&e.jsxs("div",{className:"review-item",children:[e.jsx("div",{className:"review-label",children:"Master Bedroom Dimensions"}),e.jsx("div",{className:"review-value",children:i.technical_details.floor_plans.master_bedroom_dimensions})]}),i.technical_details.site_orientation?.orientation&&e.jsxs("div",{className:"review-item",children:[e.jsx("div",{className:"review-label",children:"Site Orientation"}),e.jsx("div",{className:"review-value",children:i.technical_details.site_orientation.orientation})]}),i.technical_details.construction?.critical_instructions&&e.jsxs("div",{className:"review-item",children:[e.jsx("div",{className:"review-label",children:"Critical Instructions"}),e.jsx("div",{className:"review-value",children:i.technical_details.construction.critical_instructions})]})]})]}),S&&e.jsxs("div",{className:"review-section",children:[e.jsx("h4",{className:"review-title",children:"Architect"}),e.jsxs("div",{className:"review-architect",children:[e.jsx("div",{className:"architect-avatar",children:""}),e.jsxs("div",{className:"architect-details",children:[e.jsx("div",{className:"architect-name",children:`${S.first_name} ${S.last_name}`}),e.jsx("div",{className:"architect-email",children:S.email||"No email provided"})]})]})]})]})}),e.jsxs("div",{className:"wizard-footer",children:[e.jsx("button",{className:"btn btn-secondary",onClick:N,children:"Back"}),e.jsx("button",{className:"btn btn-primary",onClick:_,children:"Proceed"})]})]}),a===5&&e.jsxs("div",{className:"section",children:[e.jsx("div",{className:"section-header",children:"Submit"}),e.jsx("div",{className:"section-body",children:e.jsx("p",{className:"muted",children:"Files will be uploaded and visible to the target homeowner/request."})}),e.jsxs("div",{className:"wizard-footer",children:[e.jsx("button",{className:"btn btn-secondary",onClick:N,children:"Back"}),e.jsx("button",{className:"btn btn-primary",disabled:l,onClick:O,children:l?"Uploading...":"Submit"})]})]})]})}function Q6(){An.useEffect(()=>{const b=new URLSearchParams(window.location.search).get("layout_request_id");b&&o(v=>({...v,layout_request_id:b}))},[]);const t=["Project","Materials","Costs","Timeline","Review","Submit"],[a,s]=w.useState(0),[i,o]=w.useState({layout_request_id:"",materials:"",cost_breakdown:"",total_cost:"",timeline:"",notes:""}),[l,d]=w.useState(!1),u=()=>s(m=>Math.min(m+1,t.length-1)),A=()=>s(m=>Math.max(m-1,0));async function p(){d(!0);try{const b=await(await fetch("/buildhub/backend/api/contractor/submit_proposal.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)})).json();b.success?window.history.back():toast.error(b.message||"Failed")}catch{toast.error("Network error")}finally{d(!1)}}return e.jsxs(Op,{title:"Submit Cost Estimate",subtitle:"Provide detailed materials and cost breakdown",stepper:e.jsx(Mp,{steps:t,current:a}),onBack:a>0?A:()=>window.history.back(),onClose:()=>window.history.back(),children:[a===0&&e.jsxs("div",{className:"section",children:[e.jsx("div",{className:"section-header",children:"Project"}),e.jsx("div",{style:{display:"flex",justifyContent:"center",marginBottom:"20px",padding:"20px 0"},children:e.jsx(ow,{size:"medium"})}),e.jsxs("div",{className:"section-body grid-2",children:[e.jsxs("div",{className:"field",children:[e.jsx("label",{children:"Layout Request ID"}),e.jsx("input",{value:i.layout_request_id,onChange:m=>o({...i,layout_request_id:m.target.value})})]}),e.jsxs("div",{className:"field",children:[e.jsx("label",{children:"Notes"}),e.jsx("input",{value:i.notes,onChange:m=>o({...i,notes:m.target.value})})]})]}),e.jsx("div",{className:"wizard-footer",children:e.jsx("button",{className:"btn btn-primary",onClick:u,children:"Next"})})]}),a===1&&e.jsxs("div",{className:"section",children:[e.jsx("div",{className:"section-header",children:"Materials"}),e.jsx("div",{className:"section-body",children:e.jsxs("div",{className:"field",children:[e.jsx("label",{children:"Materials"}),e.jsx("textarea",{rows:6,value:i.materials,onChange:m=>o({...i,materials:m.target.value}),placeholder:"List major materials and specs"})]})}),e.jsxs("div",{className:"wizard-footer",children:[e.jsx("button",{className:"btn btn-secondary",onClick:A,children:"Back"}),e.jsx("button",{className:"btn btn-primary",onClick:u,children:"Next"})]})]}),a===2&&e.jsxs("div",{className:"section",children:[e.jsx("div",{className:"section-header",children:"Cost Breakdown"}),e.jsx("div",{className:"section-body",children:e.jsxs("div",{className:"field",children:[e.jsx("label",{children:"Cost Breakdown"}),e.jsx("textarea",{rows:6,value:i.cost_breakdown,onChange:m=>o({...i,cost_breakdown:m.target.value}),placeholder:"Labor, Materials, Misc, Profit, etc."})]})}),e.jsxs("div",{className:"wizard-footer",children:[e.jsx("button",{className:"btn btn-secondary",onClick:A,children:"Back"}),e.jsx("button",{className:"btn btn-primary",onClick:u,children:"Next"})]})]}),a===3&&e.jsxs("div",{className:"section",children:[e.jsx("div",{className:"section-header",children:"Totals"}),e.jsxs("div",{className:"section-body grid-2",children:[e.jsxs("div",{className:"field",children:[e.jsx("label",{children:"Total Cost ()"}),e.jsx("input",{type:"number",value:i.total_cost,onChange:m=>o({...i,total_cost:m.target.value})})]}),e.jsxs("div",{className:"field",children:[e.jsx("label",{children:"Timeline"}),e.jsx("input",{value:i.timeline,onChange:m=>o({...i,timeline:m.target.value}),placeholder:"e.g., 90 days"})]})]}),e.jsxs("div",{className:"wizard-footer",children:[e.jsx("button",{className:"btn btn-secondary",onClick:A,children:"Back"}),e.jsx("button",{className:"btn btn-primary",onClick:u,children:"Next"})]})]}),a===4&&e.jsxs("div",{className:"section",children:[e.jsx("div",{className:"section-header",children:"Review"}),e.jsx("div",{className:"section-body",children:e.jsx("pre",{style:{background:"#f8fafc",padding:12,borderRadius:8,overflow:"auto"},children:JSON.stringify(i,null,2)})}),e.jsxs("div",{className:"wizard-footer",children:[e.jsx("button",{className:"btn btn-secondary",onClick:A,children:"Back"}),e.jsx("button",{className:"btn btn-primary",onClick:u,children:"Proceed"})]})]}),a===5&&e.jsxs("div",{className:"section",children:[e.jsx("div",{className:"section-header",children:"Submit"}),e.jsx("div",{className:"section-body",children:e.jsx("p",{className:"muted",children:"Your estimate will be sent to the homeowner."})}),e.jsxs("div",{className:"wizard-footer",children:[e.jsx("button",{className:"btn btn-secondary",onClick:A,children:"Back"}),e.jsx("button",{className:"btn btn-primary",disabled:l,onClick:p,children:l?"Submitting...":"Submit Estimate"})]})]})]})}function R6(){const t=["Basics","Pricing","Review","Submit"],[a,s]=w.useState(0),[i,o]=w.useState({name:"",category:"",unit:"",price:"",description:""}),[l,d]=w.useState(!1),u=()=>s(m=>Math.min(m+1,t.length-1)),A=()=>s(m=>Math.max(m-1,0));async function p(){d(!0);try{const b=await(await fetch("/buildhub/backend/api/admin/add_material.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)})).json();b.success?window.history.back():toast.error(b.message||"Failed")}catch{toast.error("Network error")}finally{d(!1)}}return e.jsxs(Op,{title:"Add Material",subtitle:"Create a new material entry",stepper:e.jsx(Mp,{steps:t,current:a}),onBack:a>0?A:()=>window.history.back(),onClose:()=>window.history.back(),children:[a===0&&e.jsxs("div",{className:"section",children:[e.jsx("div",{className:"section-header",children:"Basics"}),e.jsxs("div",{className:"section-body grid-3",children:[e.jsxs("div",{className:"field",children:[e.jsx("label",{children:"Name"}),e.jsx("input",{value:i.name,onChange:m=>o({...i,name:m.target.value})})]}),e.jsxs("div",{className:"field",children:[e.jsx("label",{children:"Category"}),e.jsx("input",{value:i.category,onChange:m=>o({...i,category:m.target.value})})]}),e.jsxs("div",{className:"field",children:[e.jsx("label",{children:"Unit"}),e.jsx("input",{value:i.unit,onChange:m=>o({...i,unit:m.target.value})})]})]}),e.jsx("div",{className:"wizard-footer",children:e.jsx("button",{className:"btn btn-primary",onClick:u,children:"Next"})})]}),a===1&&e.jsxs("div",{className:"section",children:[e.jsx("div",{className:"section-header",children:"Pricing"}),e.jsxs("div",{className:"section-body grid-2",children:[e.jsxs("div",{className:"field",children:[e.jsx("label",{children:"Price"}),e.jsx("input",{type:"number",step:"0.01",value:i.price,onChange:m=>o({...i,price:m.target.value})})]}),e.jsxs("div",{className:"field",children:[e.jsx("label",{children:"Description"}),e.jsx("textarea",{rows:4,value:i.description,onChange:m=>o({...i,description:m.target.value})})]})]}),e.jsxs("div",{className:"wizard-footer",children:[e.jsx("button",{className:"btn btn-secondary",onClick:A,children:"Back"}),e.jsx("button",{className:"btn btn-primary",onClick:u,children:"Next"})]})]}),a===2&&e.jsxs("div",{className:"section",children:[e.jsx("div",{className:"section-header",children:"Review"}),e.jsx("div",{className:"section-body",children:e.jsx("pre",{style:{background:"#f8fafc",padding:12,borderRadius:8,overflow:"auto"},children:JSON.stringify(i,null,2)})}),e.jsxs("div",{className:"wizard-footer",children:[e.jsx("button",{className:"btn btn-secondary",onClick:A,children:"Back"}),e.jsx("button",{className:"btn btn-primary",onClick:u,children:"Proceed"})]})]}),a===3&&e.jsxs("div",{className:"section",children:[e.jsx("div",{className:"section-header",children:"Submit"}),e.jsx("div",{className:"section-body",children:e.jsx("p",{className:"muted",children:"Material will be added to the catalog."})}),e.jsxs("div",{className:"wizard-footer",children:[e.jsx("button",{className:"btn btn-secondary",onClick:A,children:"Back"}),e.jsx("button",{className:"btn btn-primary",disabled:l,onClick:p,children:l?"Saving...":"Add Material"})]})]})]})}const D6=()=>{const[t,a]=w.useState({username:"",password:""}),[s,i]=w.useState(""),[o,l]=w.useState(!1),d=$i(),u=p=>{const{name:m,value:b}=p.target;a(v=>({...v,[m]:b})),i("")},A=async p=>{if(p.preventDefault(),i(""),l(!0),!t.username.trim()){i("Username is required."),l(!1);return}if(!t.password.trim()){i("Password is required."),l(!1);return}try{const b=await(await fetch("/buildhub/backend/api/admin/admin_login.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})).json();b.success?(localStorage.setItem("admin_logged_in","true"),localStorage.setItem("admin_username",t.username),d("/admin-dashboard")):i(b.message||"Login failed.")}catch{i("Network error. Please try again.")}finally{l(!1)}};return e.jsx("div",{className:"admin-login-page",children:e.jsxs("div",{className:"admin-login-container",children:[e.jsxs("div",{className:"admin-login-header",children:[e.jsx("h1",{children:" Admin Login"}),e.jsx("p",{children:"Access the BuildHub Admin Dashboard"})]}),e.jsxs("form",{onSubmit:A,className:"admin-login-form",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"username",children:"Username"}),e.jsx("input",{id:"username",name:"username",type:"text",required:!0,placeholder:"Enter admin username",value:t.username,onChange:u,disabled:o})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"password",children:"Password"}),e.jsx("input",{id:"password",name:"password",type:"password",required:!0,placeholder:"Enter admin password",value:t.password,onChange:u,disabled:o})]}),s&&e.jsx("div",{className:"error-message",children:s}),e.jsx("button",{type:"submit",className:"admin-login-btn",disabled:o,children:o?"Logging in...":"Login as Admin"})]}),e.jsxs("div",{className:"admin-login-footer",children:[e.jsx("p",{children:e.jsx("a",{href:"/login",onClick:p=>{p.preventDefault(),d("/login")},children:" Use Main Login Page"})}),e.jsx("div",{className:"admin-credentials",children:e.jsxs("small",{children:[e.jsx("strong",{children:"Default Credentials:"}),e.jsx("br",{}),"Username: admin",e.jsx("br",{}),"Password: admin123"]})})]})]})})},I6=()=>{const t=Xn(),[a,s]=w.useState([]),[i,o]=w.useState(!0),[l,d]=w.useState(null),[u,A]=w.useState(!1),[p,m]=w.useState(""),[b,v]=w.useState(""),[x,C]=w.useState(!0),[D,S]=w.useState(!1),[_,N]=w.useState("all"),[O,L]=w.useState("priority"),[te,G]=w.useState({});w.useEffect(()=>{X()},[]);const X=async()=>{try{o(!0);const le=await(await fetch("/buildhub/backend/api/admin/get_pending_payment_verifications.php",{credentials:"include"})).json();le.success?(s(le.data.payments||[]),G(le.data.summary||{})):t.error("Failed to load payment verifications: "+le.message)}catch(ee){console.error("Error loading payment verifications:",ee),t.error("Error loading payment verifications")}finally{o(!1)}},U=(ee,le)=>{d(ee),m(le),v(""),C(!0),A(!0)},E=()=>{A(!1),d(null),m(""),v("")},Y=async()=>{if(!(!l||!p)){if(p==="admin_rejected"&&!b.trim()){t.error("Please provide a reason for rejecting the payment");return}try{S(!0);const le=await(await fetch("/buildhub/backend/api/admin/verify_payment_receipt.php",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({payment_id:l.id,verification_action:p,admin_notes:b,auto_progress_update:x})})).json();le.success?(t.success(p==="admin_approved"?"Payment verified successfully"+(x?" and progress updated":""):"Payment verification rejected"),E(),X()):t.error("Verification failed: "+le.message)}catch(ee){console.error("Error submitting verification:",ee),t.error("Error submitting verification")}finally{S(!1)}}},T=ee=>`${parseFloat(ee||0).toLocaleString("en-IN")}`,Q=ee=>ee?new Date(ee).toLocaleDateString("en-IN",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A",q=ee=>{const{verification_status:le,admin_verified:Be}=ee;if(Be){if(le==="admin_approved")return e.jsx("span",{className:"status-badge admin-approved",children:" Admin Approved"});if(le==="admin_rejected")return e.jsx("span",{className:"status-badge admin-rejected",children:" Admin Rejected"})}return le==="verified"?e.jsx("span",{className:"status-badge contractor-verified",children:" Contractor Verified"}):e.jsx("span",{className:"status-badge pending",children:" Pending Verification"})},ne=ee=>ee>=7?e.jsx("span",{className:"priority-badge high",children:" High Priority"}):ee>=4?e.jsx("span",{className:"priority-badge medium",children:" Medium Priority"}):e.jsx("span",{className:"priority-badge low",children:" Low Priority"}),R=()=>{let ee=a;return _==="pending"?ee=a.filter(le=>le.verification_status==="pending"):_==="verified"?ee=a.filter(le=>le.admin_verified):_==="contractor_verified"&&(ee=a.filter(le=>le.verification_status==="verified"&&!le.admin_verified)),ee.sort((le,Be)=>{switch(O){case"priority":return Be.priority_score-le.priority_score;case"date":return new Date(Be.request_date)-new Date(le.request_date);case"amount":return(Be.approved_amount||Be.requested_amount)-(le.approved_amount||le.requested_amount);default:return 0}}),ee};if(i)return e.jsx("div",{className:"admin-payment-verification",children:e.jsxs("div",{className:"loading-state",children:[e.jsx("div",{className:"loading-spinner",children:""}),e.jsx("p",{children:"Loading payment verifications..."})]})});const z=R();return e.jsxs("div",{className:"admin-payment-verification",children:[e.jsxs("div",{className:"verification-header",children:[e.jsx("h2",{children:" Payment Verification Dashboard"}),e.jsx("p",{children:"Review and verify payment receipts submitted by homeowners"}),e.jsxs("div",{className:"summary-cards",children:[e.jsxs("div",{className:"summary-card",children:[e.jsx("div",{className:"summary-value",children:te.total_payments||0}),e.jsx("div",{className:"summary-label",children:"Total Payments"})]}),e.jsxs("div",{className:"summary-card pending",children:[e.jsx("div",{className:"summary-value",children:te.pending_verification||0}),e.jsx("div",{className:"summary-label",children:"Pending Verification"})]}),e.jsxs("div",{className:"summary-card verified",children:[e.jsx("div",{className:"summary-value",children:te.verified_payments||0}),e.jsx("div",{className:"summary-label",children:"Verified"})]}),e.jsxs("div",{className:"summary-card amount",children:[e.jsx("div",{className:"summary-value",children:T(te.total_amount)}),e.jsx("div",{className:"summary-label",children:"Total Amount"})]})]})]}),e.jsxs("div",{className:"verification-controls",children:[e.jsxs("div",{className:"filter-controls",children:[e.jsx("label",{children:"Filter:"}),e.jsxs("select",{value:_,onChange:ee=>N(ee.target.value),children:[e.jsx("option",{value:"all",children:"All Payments"}),e.jsx("option",{value:"pending",children:"Pending Admin Verification"}),e.jsx("option",{value:"contractor_verified",children:"Contractor Verified"}),e.jsx("option",{value:"verified",children:"Admin Verified"})]})]}),e.jsxs("div",{className:"sort-controls",children:[e.jsx("label",{children:"Sort by:"}),e.jsxs("select",{value:O,onChange:ee=>L(ee.target.value),children:[e.jsx("option",{value:"priority",children:"Priority Score"}),e.jsx("option",{value:"date",children:"Request Date"}),e.jsx("option",{value:"amount",children:"Payment Amount"})]})]}),e.jsx("button",{className:"refresh-btn",onClick:X,children:" Refresh"})]}),e.jsx("div",{className:"payments-list",children:z.length===0?e.jsxs("div",{className:"no-payments",children:[e.jsx("div",{className:"no-payments-icon",children:""}),e.jsx("h3",{children:"No Payments Found"}),e.jsx("p",{children:"No payment verifications match the current filter criteria."})]}):z.map(ee=>e.jsxs("div",{className:"payment-card",children:[e.jsxs("div",{className:"payment-header",children:[e.jsxs("div",{className:"payment-title",children:[e.jsxs("h3",{children:[" ",ee.project_name]}),e.jsxs("span",{className:"stage-name",children:[ee.stage_name," Stage"]})]}),e.jsxs("div",{className:"payment-status",children:[q(ee),ne(ee.priority_score)]})]}),e.jsxs("div",{className:"payment-details",children:[e.jsxs("div",{className:"detail-row",children:[e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Homeowner:"}),e.jsx("span",{className:"detail-value",children:ee.homeowner_name})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Contractor:"}),e.jsx("span",{className:"detail-value",children:ee.contractor_name})]})]}),e.jsxs("div",{className:"detail-row",children:[e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Amount:"}),e.jsx("span",{className:"detail-value amount",children:T(ee.approved_amount||ee.requested_amount)})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Completion:"}),e.jsxs("span",{className:"detail-value",children:[ee.completion_percentage,"%"]})]})]}),e.jsxs("div",{className:"detail-row",children:[e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Payment Method:"}),e.jsxs("span",{className:"detail-value",children:[ee.payment_method==="bank_transfer"&&" Bank Transfer",ee.payment_method==="upi"&&" UPI Payment",ee.payment_method==="cash"&&" Cash Payment",ee.payment_method==="cheque"&&" Cheque Payment",!ee.payment_method&&" Not specified"]})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Transaction Ref:"}),e.jsx("span",{className:"detail-value",children:ee.transaction_reference||"N/A"})]})]}),e.jsxs("div",{className:"detail-row",children:[e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Request Date:"}),e.jsx("span",{className:"detail-value",children:Q(ee.request_date)})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Days Pending:"}),e.jsxs("span",{className:"detail-value",children:[ee.days_pending," days"]})]})]}),ee.receipt_files&&ee.receipt_files.length>0&&e.jsxs("div",{className:"receipt-files",children:[e.jsx("span",{className:"detail-label",children:"Receipt Files:"}),e.jsx("div",{className:"files-list",children:ee.receipt_files.map((le,Be)=>e.jsxs("div",{className:"file-item",children:[e.jsx("span",{className:"file-icon",children:le.file_type&&le.file_type.startsWith("image/")?"":""}),e.jsx("span",{className:"file-name",children:le.original_name}),e.jsx("a",{href:`/buildhub/backend/${le.file_path}`,target:"_blank",rel:"noopener noreferrer",className:"view-file-btn",children:" View"})]},Be))})]}),ee.work_description&&e.jsxs("div",{className:"work-description",children:[e.jsx("span",{className:"detail-label",children:"Work Description:"}),e.jsx("p",{className:"detail-value",children:ee.work_description})]}),ee.admin_notes&&e.jsxs("div",{className:"admin-notes",children:[e.jsx("span",{className:"detail-label",children:"Admin Notes:"}),e.jsx("p",{className:"detail-value",children:ee.admin_notes}),e.jsxs("small",{children:["Verified by ",ee.admin_verified_by," on ",Q(ee.admin_verified_at)]})]})]}),!ee.admin_verified&&e.jsxs("div",{className:"payment-actions",children:[e.jsx("button",{className:"btn btn-approve",onClick:()=>U(ee,"admin_approved"),children:" Approve Payment"}),e.jsx("button",{className:"btn btn-reject",onClick:()=>U(ee,"admin_rejected"),children:" Reject Payment"})]})]},ee.id))}),u&&l&&e.jsx("div",{className:"verification-modal-overlay",children:e.jsxs("div",{className:"verification-modal",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{children:p==="admin_approved"?" Approve Payment":" Reject Payment"}),e.jsx("button",{className:"close-btn",onClick:E,children:""})]}),e.jsxs("div",{className:"modal-body",children:[e.jsxs("div",{className:"payment-summary",children:[e.jsx("h4",{children:"Payment Details"}),e.jsxs("p",{children:[e.jsx("strong",{children:"Project:"})," ",l.project_name]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Stage:"})," ",l.stage_name]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Amount:"})," ",T(l.approved_amount||l.requested_amount)]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Homeowner:"})," ",l.homeowner_name]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Contractor:"})," ",l.contractor_name]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"adminNotes",children:p==="admin_approved"?"Approval Notes (Optional):":"Rejection Reason (Required):"}),e.jsx("textarea",{id:"adminNotes",value:b,onChange:ee=>v(ee.target.value),placeholder:p==="admin_approved"?"Add any notes about the approval...":"Please provide a reason for rejecting this payment...",rows:"4",required:p==="admin_rejected"})]}),p==="admin_approved"&&e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"checkbox-label",children:[e.jsx("input",{type:"checkbox",checked:x,onChange:ee=>C(ee.target.checked)}),"Automatically update construction progress to ",l.completion_percentage,"%"]}),e.jsxs("small",{className:"help-text",children:["This will mark the ",l.stage_name," stage as completed and update the project progress."]})]})]}),e.jsxs("div",{className:"modal-actions",children:[e.jsx("button",{className:"btn btn-secondary",onClick:E,children:"Cancel"}),e.jsx("button",{className:`btn ${p==="admin_approved"?"btn-approve":"btn-reject"}`,onClick:Y,disabled:D,children:D?"Processing...":p==="admin_approved"?" Approve Payment":" Reject Payment"})]})]})})]})},P6=({user:t,isOpen:a,onClose:s,onVerificationComplete:i})=>{const[o,l]=w.useState(null),[d,u]=w.useState(null),[A,p]=w.useState(!1),[m,b]=w.useState(""),[v,x]=w.useState(""),[C,D]=w.useState(""),[S,_]=w.useState(!1);w.useEffect(()=>{a&&t&&N()},[a,t]);const N=async()=>{p(!0),b("");try{const E=await(await fetch(`/buildhub/backend/api/admin/get_ocr_verification.php?user_id=${t.id}`)).json();E.success?(l(E.ocr_data),u(E.comparison_results)):b(E.message||"Failed to fetch OCR data")}catch(U){console.error("OCR fetch error:",U),b("Network error occurred")}finally{p(!1)}},O=async()=>{_(!0),b("");try{const E=await(await fetch("/buildhub/backend/api/admin/trigger_ocr.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:t.id})})).json();E.success?setTimeout(()=>{N()},1e3):b(E.message||"OCR processing failed")}catch(U){console.error("OCR trigger error:",U),b("Network error occurred")}finally{_(!1)}},L=async U=>{if(U){p(!0),b("");try{const Y=await(await fetch("/buildhub/backend/api/admin/verify_ocr_data.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:t.id,action:U,admin_notes:v,verification_details:{comparison_results:d,admin_decision:U,timestamp:new Date().toISOString()}})})).json();Y.success?(i(Y.message),s()):b(Y.message||"Verification action failed")}catch(E){console.error("Verification error:",E),b("Network error occurred")}finally{p(!1)}}},te=U=>{switch(U){case"EXACT_MATCH":case"STRONG_MATCH":return"#28a745";case"PARTIAL_MATCH":return"#ffc107";case"NO_MATCH":return"#dc3545";case"OCR_ONLY":case"USER_ONLY":return"#6c757d";default:return"#6c757d"}},G=U=>{switch(U){case"EXACT_MATCH":return"";case"STRONG_MATCH":return"";case"PARTIAL_MATCH":return"";case"NO_MATCH":return"";case"OCR_ONLY":return"";case"USER_ONLY":return"";default:return""}},X=()=>{if(!d)return null;const{overall_match:U,match_score:E,recommendations:Y}=d;let T="#6c757d",Q="";return U==="HIGH"?(T="#28a745",Q=""):U==="MEDIUM"?(T="#ffc107",Q=""):U==="LOW"&&(T="#dc3545",Q=""),{color:T,icon:Q,score:Math.round(E),level:U,recommendations:Y}};return a?e.jsx("div",{className:"ocr-modal-overlay",children:e.jsxs("div",{className:"ocr-modal",children:[e.jsxs("div",{className:"ocr-modal-header",children:[e.jsx("h2",{children:"OCR Document Verification"}),e.jsx("button",{className:"close-btn",onClick:s,children:""})]}),e.jsxs("div",{className:"ocr-modal-content",children:[A&&e.jsxs("div",{className:"loading-spinner",children:[e.jsx("div",{className:"spinner"}),e.jsx("p",{children:"Loading OCR data..."})]}),m&&e.jsxs("div",{className:"error-message",children:[e.jsx("span",{className:"error-icon",children:""}),m]}),t&&e.jsxs("div",{className:"user-info-section",children:[e.jsx("h3",{children:"User Information"}),e.jsxs("div",{className:"user-details",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Name:"})," ",t.first_name," ",t.last_name]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Email:"})," ",t.email]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Role:"})," ",t.role]})]})]}),!o&&!A&&e.jsx("div",{className:"no-ocr-section",children:e.jsxs("div",{className:"no-ocr-message",children:[e.jsx("span",{className:"info-icon",children:""}),e.jsx("h3",{children:"No OCR Data Available"}),e.jsx("p",{children:"Document has not been processed yet. Click below to start OCR processing."}),e.jsx("button",{className:"trigger-ocr-btn",onClick:O,disabled:S,children:S?"Processing...":"Process Document with OCR"})]})}),o&&d&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"ocr-summary-section",children:[e.jsx("h3",{children:"OCR Processing Summary"}),e.jsxs("div",{className:"ocr-summary",children:[e.jsxs("div",{className:"summary-item",children:[e.jsx("span",{className:"label",children:"Document Type:"}),e.jsx("span",{className:"value",children:o.document_type})]}),e.jsxs("div",{className:"summary-item",children:[e.jsx("span",{className:"label",children:"Confidence Level:"}),e.jsx("span",{className:`confidence-badge ${o.confidence_level.toLowerCase()}`,children:o.confidence_level})]}),e.jsxs("div",{className:"summary-item",children:[e.jsx("span",{className:"label",children:"Processing Date:"}),e.jsx("span",{className:"value",children:new Date(o.created_at).toLocaleString()})]})]})]}),(()=>{const U=X();return U&&e.jsxs("div",{className:"overall-match-section",children:[e.jsx("h3",{children:"Overall Verification Result"}),e.jsxs("div",{className:"overall-match",style:{borderColor:U.color},children:[e.jsxs("div",{className:"match-header",children:[e.jsx("span",{className:"match-icon",children:U.icon}),e.jsxs("span",{className:"match-score",style:{color:U.color},children:[U.score,"% Match (",U.level,")"]})]}),U.recommendations&&U.recommendations.length>0&&e.jsxs("div",{className:"recommendations",children:[e.jsx("h4",{children:"Recommendations:"}),e.jsx("ul",{children:U.recommendations.map((E,Y)=>e.jsx("li",{children:E},Y))})]})]})]})})(),e.jsxs("div",{className:"field-comparison-section",children:[e.jsx("h3",{children:"Field-by-Field Comparison"}),e.jsxs("div",{className:"comparison-table",children:[e.jsxs("div",{className:"comparison-header",children:[e.jsx("div",{className:"field-col",children:"Field"}),e.jsx("div",{className:"user-col",children:"User Profile"}),e.jsx("div",{className:"ocr-col",children:"OCR Extracted"}),e.jsx("div",{className:"match-col",children:"Match Status"})]}),d.field_comparisons.map((U,E)=>e.jsxs("div",{className:"comparison-row",children:[e.jsx("div",{className:"field-col",children:e.jsx("strong",{children:U.field_label})}),e.jsx("div",{className:"user-col",children:U.user_value||e.jsx("em",{children:"Not provided"})}),e.jsx("div",{className:"ocr-col",children:U.ocr_value||e.jsx("em",{children:"Not found"})}),e.jsxs("div",{className:"match-col",children:[e.jsxs("div",{className:"match-status",style:{color:te(U.match_status)},children:[e.jsx("span",{className:"match-icon",children:G(U.match_status)}),e.jsx("span",{className:"match-text",children:U.match_status.replace("_"," ")}),U.similarity_score>0&&e.jsxs("span",{className:"similarity-score",children:["(",Math.round(U.similarity_score*100),"%)"]})]}),U.notes&&e.jsx("div",{className:"match-notes",children:U.notes}),U.recommendation&&e.jsxs("div",{className:"match-recommendation",children:[e.jsx("strong",{children:"Recommendation:"})," ",U.recommendation]})]})]},E))]})]}),o.cleaned_text&&e.jsxs("div",{className:"extracted-text-section",children:[e.jsx("h3",{children:"Extracted Text Preview"}),e.jsx("div",{className:"extracted-text",children:e.jsx("pre",{children:o.cleaned_text})})]}),e.jsxs("div",{className:"admin-notes-section",children:[e.jsx("h3",{children:"Admin Notes"}),e.jsx("textarea",{className:"admin-notes-input",value:v,onChange:U=>x(U.target.value),placeholder:"Add notes about your verification decision...",rows:4})]}),e.jsxs("div",{className:"verification-actions",children:[e.jsx("h3",{children:"Verification Decision"}),e.jsxs("div",{className:"action-buttons",children:[e.jsx("button",{className:"approve-btn",onClick:()=>L("approve"),disabled:A,children:" Approve User"}),e.jsx("button",{className:"reupload-btn",onClick:()=>L("request_reupload"),disabled:A,children:" Request Reupload"}),e.jsx("button",{className:"reject-btn",onClick:()=>L("reject"),disabled:A,children:" Reject User"})]})]})]})]})]})}):null},Ks=({name:t,size:a=20,stroke:s=1.8,color:i="currentColor"})=>{const o={width:a,height:a,viewBox:"0 0 24 24",fill:"none",stroke:i,strokeWidth:s,strokeLinecap:"round",strokeLinejoin:"round"};switch(t){case"home":return e.jsxs("svg",{...o,children:[e.jsx("path",{d:"M3 10.5L12 3l9 7.5"}),e.jsx("path",{d:"M5 10v10h14V10"})]});case"users":return e.jsxs("svg",{...o,children:[e.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),e.jsx("circle",{cx:"9",cy:"7",r:"4"}),e.jsx("path",{d:"M22 21v-2a4 4 0 0 0-3-3.87"}),e.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]});case"hourglass":return e.jsxs("svg",{...o,children:[e.jsx("path",{d:"M6 2h12"}),e.jsx("path",{d:"M6 22h12"}),e.jsx("path",{d:"M8 2v6l4 4 4-4V2"}),e.jsx("path",{d:"M16 22v-6l-4-4-4 4v6"})]});case"cube":return e.jsxs("svg",{...o,children:[e.jsx("path",{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"}),e.jsx("path",{d:"M3.27 6.96L12 12l8.73-5.04"})]});case"project":return e.jsxs("svg",{...o,children:[e.jsx("rect",{x:"3",y:"3",width:"18",height:"14",rx:"2"}),e.jsx("path",{d:"M7 21h10"}),e.jsx("path",{d:"M12 17v4"})]});case"search":return e.jsxs("svg",{...o,children:[e.jsx("circle",{cx:"11",cy:"11",r:"7"}),e.jsx("path",{d:"M21 21l-4.35-4.35"})]});case"bell":return e.jsxs("svg",{...o,children:[e.jsx("path",{d:"M15 17h5l-1.4-1.4A2 2 0 0 1 18 14.2V11a6 6 0 0 0-12 0v3.2a2 2 0 0 1-.6 1.4L4 17h5"}),e.jsx("path",{d:"M9 21h6"})]});case"settings":return e.jsxs("svg",{...o,children:[e.jsx("path",{d:"M12 15a3 3 0 1 0 0-6 3 3 0 0 0 0 6z"}),e.jsx("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 1 1-2.83 2.83l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V22a2 2 0 1 1-4 0v-.09a1.65 1.65 0 0 0-1-1.51 1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 1 1-2.83-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H2a2 2 0 1 1 0-4h.09a1.65 1.65 0 0 0 1.51-1 1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 1 1 2.83-2.83l.06.06a1.65 1.65 0 0 0 1.82.33H8a1.65 1.65 0 0 0 1-1.51V2a2 2 0 1 1 4 0v.09a1.65 1.65 0 0 0 1 1.51h.09a1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 1 1 2.83 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V8c0 .66.26 1.3.73 1.77.47.47 1.11.73 1.77.73H22a2 2 0 1 1 0 4h-.09a1.65 1.65 0 0 0-1.51 1z"})]});case"logout":return e.jsxs("svg",{...o,children:[e.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),e.jsx("path",{d:"M16 17l5-5-5-5"}),e.jsx("path",{d:"M21 12H9"})]});case"file":return e.jsxs("svg",{...o,children:[e.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),e.jsx("path",{d:"M14 2v6h6"})]});case"eye":return e.jsxs("svg",{...o,children:[e.jsx("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),e.jsx("circle",{cx:"12",cy:"12",r:"3"})]});case"download":return e.jsxs("svg",{...o,children:[e.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),e.jsx("path",{d:"M7 10l5 5 5-5"}),e.jsx("path",{d:"M12 15V3"})]});case"check":return e.jsx("svg",{...o,children:e.jsx("path",{d:"M20 6L9 17l-5-5"})});case"x":return e.jsxs("svg",{...o,children:[e.jsx("path",{d:"M18 6L6 18"}),e.jsx("path",{d:"M6 6l12 12"})]});default:return null}},H6=()=>{const t=$i(),[a,s]=w.useState("dashboard"),[i,o]=w.useState([]),[l,d]=w.useState([]),[u,A]=w.useState([]),[p,m]=w.useState({}),[b,v]=w.useState(!1),[x,C]=w.useState(""),[D,S]=w.useState(""),[_,N]=w.useState(""),[O,L]=w.useState(""),[te,G]=w.useState(null),[X,U]=w.useState(!1),[E,Y]=w.useState(!1),[T,Q]=w.useState(null),[q,ne]=w.useState([]),[R,z]=w.useState(!1),[ee,le]=w.useState(null),[Be,$]=w.useState([]),[ue,k]=w.useState(""),I=typeof window<"u"&&(localStorage.getItem("admin_username")||"Administrator")||"Administrator",[H,re]=w.useState({role:"all",status:"all",search:"",sortBy:"created_at",sortOrder:"desc"}),[J,V]=w.useState({name:"",category:"",unit:"",price:"",description:""});w.useEffect(()=>{cr(async()=>{const{preventCache:ie}=await import("./session-DODIVVdM.js");return{preventCache:ie}},[]).then(({preventCache:ie})=>ie()),oe(),a==="pending"?K():a==="users"?Ne():a==="materials"?Ee():a==="reports"&&ve()},[a]),w.useEffect(()=>{if(a!=="reports")return;const ie=setInterval(()=>{ve()},3e4),at=setInterval(()=>{ee&&et(ee.id)},15e3);return()=>{clearInterval(ie),clearInterval(at)}},[a,ee]),w.useEffect(()=>{a==="users"&&Ne()},[H]),w.useEffect(()=>{if(x||D){const ie=setTimeout(()=>{C(""),S("")},5e3);return()=>clearTimeout(ie)}},[x,D]),w.useEffect(()=>{if(_||O){const ie=setTimeout(()=>{N(""),L("")},5e3);return()=>clearTimeout(ie)}},[_,O]);const oe=async()=>{try{const ie=await fetch("/buildhub/backend/api/admin/get_stats.php");if(!ie.ok)throw new Error(`HTTP error! status: ${ie.status}`);const at=await ie.json();at.success?m(at.stats||{}):(console.error("Stats error:",at.message),m({}))}catch(ie){console.error("Error fetching system stats:",ie)}},K=async()=>{v(!0);try{const ie=await fetch("/buildhub/backend/api/admin/get_pending_users.php");if(!ie.ok)throw new Error(`HTTP error! status: ${ie.status}`);const at=await ie.json();at.success?(o(at.users||[]),C("")):(C(at.message||"Failed to fetch pending users"),o([]))}catch(ie){console.error("Fetch pending users error:",ie),C(`Network error: ${ie.message}`),o([])}finally{v(!1)}},Ne=async()=>{v(!0);try{const ie=new URLSearchParams({role:H.role,status:H.status,search:H.search,sortBy:H.sortBy,sortOrder:H.sortOrder}),at=await fetch(`/buildhub/backend/api/admin/get_all_users.php?${ie}`);if(!at.ok)throw new Error(`HTTP error! status: ${at.status}`);const Ot=await at.json();Ot.success?(d(Ot.users||[]),C("")):(C(Ot.message||"Failed to fetch users"),d([]))}catch(ie){console.error("Fetch all users error:",ie),C(`Network error: ${ie.message}`),d([])}finally{v(!1)}},Ee=async()=>{v(!0);try{const at=await(await fetch("/buildhub/backend/api/admin/get_materials.php")).json();at.success?A(at.materials):C(at.message||"Failed to fetch materials")}catch{C("Network error occurred")}finally{v(!1)}},st=async(ie,at)=>{v(!0),C(""),S("");try{const Ot=await fetch("/buildhub/backend/api/admin/user_action.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:ie,action:at})});if(!Ot.ok)throw new Error(`HTTP error! status: ${Ot.status}`);const Ct=await Ot.json();Ct.success?(S(Ct.message),setTimeout(()=>{K(),Ne()},500)):C(Ct.message||"Action failed")}catch(Ot){console.error("User action error:",Ot),C(`Network error: ${Ot.message}`)}finally{v(!1)}},ut=async(ie,at)=>{try{const Ot=await fetch(`/buildhub/backend/api/admin/download_document.php?user_id=${ie}&doc_type=${at}`);if(Ot.ok){const Ct=await Ot.blob(),ia=window.URL.createObjectURL(Ct),ca=document.createElement("a");ca.style.display="none",ca.href=ia,ca.download=`${at}_${ie}`,document.body.appendChild(ca),ca.click(),window.URL.revokeObjectURL(ia)}else C("Failed to download document")}catch{C("Download failed")}},Ge=ie=>{Q(ie),Y(!0)},_e=()=>{Y(!1),Q(null)},Et=ie=>{S(ie),setTimeout(()=>{K(),Ne()},500)},Mt=(ie,at)=>{const Ot=`/buildhub/backend/api/admin/view_document.php?user_id=${ie}&doc_type=${at}`;window.open(Ot,"_blank")},Ze=async ie=>{ie.preventDefault(),v(!0),N(""),L("");try{const Ot=await(await fetch("/buildhub/backend/api/admin/add_material.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(J)})).json();Ot.success?(L("Material added successfully"),V({name:"",category:"",unit:"",price:"",description:""}),Ee()):N(Ot.message||"Failed to add material")}catch{N("Network error occurred")}finally{v(!1)}},Je=ie=>{const at=u.find(Ot=>Ot.id===ie);G(at),mt()},mt=async()=>{if(te){v(!0),N(""),L(""),setShowDeleteConfirm(!1);try{const at=await(await fetch("/buildhub/backend/api/admin/delete_material.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({material_id:te.id})})).json();at.success?(L("Material deleted successfully"),Ee()):N(at.message||"Failed to delete material")}catch{N("Network error occurred")}finally{v(!1),G(null)}}},ve=async()=>{z(!0);try{console.log("Loading support issues..."),console.log("API URL: /buildhub/backend/api/admin/get_support_issues.php");const ie=await fetch("/buildhub/backend/api/admin/get_support_issues.php",{credentials:"include",headers:{"Content-Type":"application/json"}});if(console.log("Response status:",ie.status),console.log("Response headers:",ie.headers),!ie.ok)throw new Error(`HTTP ${ie.status}: ${ie.statusText}`);const at=await ie.json();if(console.log("Response data:",at),at.success)console.log("Setting support issues:",at.issues?.length||0,"issues"),ne(at.issues||[]),C("");else{console.log("Admin API failed, trying fallback. Message:",at.message),C(`Admin API failed: ${at.message}`);try{console.log("Trying fallback API...");const Ct=await(await fetch("/buildhub/backend/api/support/get_issues.php",{credentials:"include"})).json();console.log("Fallback response:",Ct),Ct.success?(ne(Ct.issues||[]),C("Showing your own issues (admin access may be limited)")):(ne([]),C("No issues found and admin access failed"))}catch(Ot){console.error("Fallback also failed:",Ot),ne([]),C("Both admin and user APIs failed")}}}catch(ie){console.error("Error loading support issues:",ie),C(`Failed to load reports: ${ie.message}`),ne([])}finally{z(!1)}},et=async ie=>{z(!0);try{const Ot=await(await fetch(`/buildhub/backend/api/admin/get_support_thread.php?issue_id=${ie}`,{credentials:"include"})).json();Ot.success?(le(Ot.issue),$(Ot.replies||[])):C(Ot.message||"Failed to load thread")}catch{C("Failed to load thread")}finally{z(!1)}},Oe=async()=>{if(!(!ee||!ue.trim()))try{const at=await(await fetch("/buildhub/backend/api/support/admin_reply.php",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({issue_id:ee.id,message:ue})})).json();at.success?(k(""),et(ee.id),ve(),S("Reply sent")):C(at.message||"Failed to send reply")}catch{C("Network error sending reply")}},kt=async(ie,at)=>{v(!0),C(""),S("");try{const Ot=await fetch("/buildhub/backend/api/admin/update_user_status.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:ie,status:at})});if(!Ot.ok)throw new Error(`HTTP error! status: ${Ot.status}`);const Ct=await Ot.json();Ct.success?(S(Ct.message),Ne(),K(),selectedUser&&selectedUser.id===ie&&setSelectedUser({...selectedUser,status:at})):C(Ct.message||"Status update failed")}catch(Ot){console.error("User status update error:",Ot),C(`Network error: ${Ot.message}`)}finally{v(!1)}},xt=async ie=>{v(!0),C(""),S("");try{const at=await fetch("/buildhub/backend/api/admin/delete_user.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:ie})});if(!at.ok)throw new Error(`HTTP error! status: ${at.status}`);const Ot=await at.json();Ot.success?(S(Ot.message||"User deleted"),Ne(),K()):C(Ot.message||"Failed to delete user")}catch(at){C(`Network error: ${at.message}`)}finally{v(!1)}},lt=(ie,at)=>{re(Ot=>({...Ot,[ie]:at}))},Ut=()=>{re({role:"all",status:"all",search:"",sortBy:"created_at",sortOrder:"desc"})},_t=ie=>{toast.info(`User Details:
Name: ${ie.name}
Email: ${ie.email}
Status: ${ie.status}
Role: ${ie.role}
Created: ${new Date(ie.created_at).toLocaleDateString()}`)},Nt=async()=>{try{await fetch("/buildhub/backend/api/logout.php",{method:"POST",credentials:"include"})}catch{}localStorage.removeItem("admin_logged_in"),localStorage.removeItem("admin_username"),t("/login",{replace:!0})},qt=()=>e.jsxs("div",{children:[e.jsxs("div",{className:"main-header",children:[e.jsx("h1",{children:"Overview"}),e.jsx("p",{children:"Manage users, materials, and monitor system activity"})]}),e.jsxs("div",{className:"stats-grid",children:[e.jsx("div",{className:"stat-card w-blue",children:e.jsxs("div",{className:"stat-content",children:[e.jsx("div",{className:"stat-icon users",children:e.jsx(Ks,{name:"users"})}),e.jsxs("div",{className:"stat-info",children:[e.jsx("h3",{children:p.totalUsers||0}),e.jsx("p",{children:"Total Users"})]})]})}),e.jsx("div",{className:"stat-card w-orange",children:e.jsxs("div",{className:"stat-content",children:[e.jsx("div",{className:"stat-icon pending",children:e.jsx(Ks,{name:"hourglass"})}),e.jsxs("div",{className:"stat-info",children:[e.jsx("h3",{children:i.length}),e.jsx("p",{children:"Pending Approvals"})]})]})}),e.jsx("div",{className:"stat-card w-purple",children:e.jsxs("div",{className:"stat-content",children:[e.jsx("div",{className:"stat-icon materials",children:e.jsx(Ks,{name:"cube"})}),e.jsxs("div",{className:"stat-info",children:[e.jsx("h3",{children:u.length}),e.jsx("p",{children:"Materials Listed"})]})]})}),e.jsx("div",{className:"stat-card w-green",children:e.jsxs("div",{className:"stat-content",children:[e.jsx("div",{className:"stat-icon projects",children:e.jsx(Ks,{name:"project"})}),e.jsxs("div",{className:"stat-info",children:[e.jsx("h3",{children:p.activeProjects||0}),e.jsx("p",{children:"Active Projects"})]})]})})]}),e.jsxs("div",{className:"section-card",children:[e.jsxs("div",{className:"section-header",children:[e.jsx("h2",{children:"Quick Actions"}),e.jsx("p",{children:"Common administrative tasks"})]}),e.jsx("div",{className:"section-content",children:e.jsxs("div",{className:"quick-actions",children:[e.jsxs("button",{className:"action-card",onClick:()=>s("users"),children:[e.jsx("div",{className:"action-icon",children:e.jsx(Ks,{name:"users"})}),e.jsx("h3",{children:"Manage All Users"}),e.jsx("p",{children:"View, filter, and manage all system users"})]}),e.jsxs("button",{className:"action-card",onClick:()=>s("pending"),children:[e.jsx("div",{className:"action-icon",children:e.jsx(Ks,{name:"hourglass"})}),e.jsx("h3",{children:"Review Pending Users"}),e.jsx("p",{children:"Approve or reject user registration requests"})]}),e.jsxs("button",{className:"action-card",onClick:()=>s("materials"),children:[e.jsx("div",{className:"action-icon",children:e.jsx(Ks,{name:"cube"})}),e.jsx("h3",{children:"Manage Materials"}),e.jsx("p",{children:"Add, edit, or remove construction materials"})]})]})})]}),e.jsxs("div",{className:"section-card",children:[e.jsxs("div",{className:"section-header",children:[e.jsx("h2",{children:"Recent Activity"}),e.jsx("p",{children:"Latest system activities and user actions"})]}),e.jsx("div",{className:"section-content",children:e.jsxs("div",{className:"item-list",children:[i.slice(0,5).map(ie=>e.jsxs("div",{className:"list-item",children:[e.jsx("div",{className:"item-icon",children:e.jsx(Ks,{name:"users"})}),e.jsxs("div",{className:"item-content",children:[e.jsxs("h4",{className:"item-title",children:[ie.first_name," ",ie.last_name]}),e.jsxs("p",{className:"item-subtitle",children:["Role: ",ie.role,"  Email: ",ie.email]}),e.jsxs("p",{className:"item-meta",children:["Registered: ",new Date(ie.created_at).toLocaleDateString()]})]}),e.jsx("div",{className:"item-actions",children:e.jsx("span",{className:"status-badge pending",children:"Pending Review"})})]},ie.id)),i.length===0&&e.jsxs("div",{className:"empty-state",children:[e.jsx("div",{className:"empty-icon",children:""}),e.jsx("h3",{children:"All Caught Up!"}),e.jsx("p",{children:"No pending user approvals at the moment."})]})]})})]})]}),Bt=()=>e.jsxs("div",{children:[e.jsx("div",{className:"main-header",children:e.jsx("div",{className:"header-content",children:e.jsxs("div",{children:[e.jsx("h1",{children:"User Management"}),e.jsx("p",{children:"View and manage all users in the system"})]})})}),e.jsxs("div",{className:"section-card",children:[e.jsxs("div",{className:"section-header",children:[e.jsx("h2",{children:"Filter & Search Users"}),e.jsx("p",{children:"Use filters to find specific users efficiently"})]}),e.jsx("div",{className:"section-content",children:e.jsxs("div",{className:"filters-container",children:[e.jsxs("div",{className:"filter-row",children:[e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{children:"Search Users"}),e.jsx("input",{type:"text",placeholder:"Search by name or email...",value:H.search,onChange:ie=>lt("search",ie.target.value),className:"filter-input"})]}),e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{children:"User Role"}),e.jsxs("select",{value:H.role,onChange:ie=>lt("role",ie.target.value),className:"filter-select",children:[e.jsx("option",{value:"all",children:"All Roles"}),e.jsx("option",{value:"homeowner",children:"Homeowners"}),e.jsx("option",{value:"contractor",children:"Contractors"}),e.jsx("option",{value:"architect",children:"Architects"})]})]}),e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{children:"Status"}),e.jsxs("select",{value:H.status,onChange:ie=>lt("status",ie.target.value),className:"filter-select",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"approved",children:"Approved"}),e.jsx("option",{value:"rejected",children:"Rejected"}),e.jsx("option",{value:"suspended",children:"Suspended"})]})]})]}),e.jsxs("div",{className:"filter-row",children:[e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{children:"Sort By"}),e.jsxs("select",{value:H.sortBy,onChange:ie=>lt("sortBy",ie.target.value),className:"filter-select",children:[e.jsx("option",{value:"created_at",children:"Registration Date"}),e.jsx("option",{value:"first_name",children:"First Name"}),e.jsx("option",{value:"last_name",children:"Last Name"}),e.jsx("option",{value:"email",children:"Email"}),e.jsx("option",{value:"role",children:"Role"}),e.jsx("option",{value:"status",children:"Status"})]})]}),e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{children:"Order"}),e.jsxs("select",{value:H.sortOrder,onChange:ie=>lt("sortOrder",ie.target.value),className:"filter-select",children:[e.jsx("option",{value:"desc",children:"Newest First"}),e.jsx("option",{value:"asc",children:"Oldest First"})]})]}),e.jsx("div",{className:"filter-actions",children:e.jsx("button",{className:"btn btn-secondary",onClick:Ut,children:"Clear Filters"})})]})]})})]}),e.jsxs("div",{className:"section-card",children:[e.jsxs("div",{className:"section-header",children:[e.jsxs("h2",{children:["Users (",l.length,")"]}),e.jsx("p",{children:"All registered users in the system"})]}),e.jsx("div",{className:"section-content",children:b?e.jsx("div",{className:"loading",children:"Loading users..."}):l.length===0?e.jsxs("div",{className:"empty-state",children:[e.jsx("div",{className:"empty-icon",children:""}),e.jsx("h3",{children:"No Users Found"}),e.jsx("p",{children:"No users match your current filters."})]}):e.jsx("div",{className:"users-table-container",children:e.jsxs("div",{className:"users-table",children:[e.jsxs("div",{className:"table-header",children:[e.jsx("div",{className:"table-cell",children:"User"}),e.jsx("div",{className:"table-cell",children:"Role"}),e.jsx("div",{className:"table-cell",children:"Status"}),e.jsx("div",{className:"table-cell",children:"Registered"}),e.jsx("div",{className:"table-cell",children:"Actions"})]}),l.map(ie=>e.jsx(O6,{user:ie,onViewDetails:()=>_t(ie),onStatusChange:at=>kt(ie.id,at),onViewDocument:Mt,onDownloadDocument:ut,onDeleteUser:xt},ie.id))]})})})]})]}),Xt=()=>e.jsxs("div",{children:[e.jsx("div",{className:"main-header",children:e.jsx("div",{className:"header-content",children:e.jsxs("div",{children:[e.jsx("h1",{children:"Pending User Approvals"}),e.jsx("p",{children:"Review and approve user registration requests"})]})})}),e.jsxs("div",{className:"section-card",children:[e.jsx("div",{className:"section-header",children:e.jsxs("div",{children:[e.jsx("h2",{children:"Users Awaiting Approval"}),e.jsx("p",{children:"Review user documents and approve or reject registrations"}),e.jsx("p",{style:{fontSize:"12px",color:"#666",marginTop:"5px"},children:" OCR verification results are shown below each user card"})]})}),e.jsx("div",{className:"section-content",children:b?e.jsx("div",{className:"loading",children:"Loading users..."}):i.length===0?e.jsxs("div",{className:"empty-state",children:[e.jsx("div",{className:"empty-icon",children:""}),e.jsx("h3",{children:"No Pending Approvals"}),e.jsx("p",{children:"All user registrations have been processed!"})]}):e.jsx("div",{className:"users-grid",children:i.map(ie=>e.jsx(M6,{user:ie,onApprove:()=>st(ie.id,"approve"),onReject:()=>st(ie.id,"reject"),onViewDocument:Mt,onDownloadDocument:ut,onTriggerOCR:Ge,loading:b},ie.id))})})]})]}),ta=()=>e.jsxs("div",{style:{marginRight:"20px"},children:[e.jsx("div",{className:"main-header",children:e.jsx("div",{className:"header-content",children:e.jsxs("div",{children:[e.jsx("h1",{children:"Materials Management"}),e.jsx("p",{children:"Manage construction materials and pricing"})]})})}),_&&e.jsxs("div",{className:"alert alert-error",style:{marginBottom:"20px"},children:[_,e.jsx("button",{onClick:()=>N(""),className:"alert-close",children:""})]}),O&&e.jsxs("div",{className:"alert alert-success",style:{marginBottom:"20px"},children:[O,e.jsx("button",{onClick:()=>L(""),className:"alert-close",children:""})]}),e.jsxs("div",{className:"section-card",style:{marginBottom:"24px"},children:[e.jsxs("div",{className:"section-header",children:[e.jsx("h2",{children:"Add New Material"}),e.jsx("p",{children:"Add construction materials to the system catalog"})]}),e.jsx("div",{className:"section-content",children:e.jsxs("form",{onSubmit:Ze,className:"material-form",children:[e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Material Name *"}),e.jsx("input",{type:"text",value:J.name,onChange:ie=>V({...J,name:ie.target.value}),placeholder:"e.g., Portland Cement",required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Category *"}),e.jsxs("select",{value:J.category,onChange:ie=>V({...J,category:ie.target.value}),required:!0,children:[e.jsx("option",{value:"",children:"Select Category"}),e.jsx("option",{value:"cement",children:"Cement"}),e.jsx("option",{value:"steel",children:"Steel"}),e.jsx("option",{value:"bricks",children:"Bricks"}),e.jsx("option",{value:"sand",children:"Sand"}),e.jsx("option",{value:"gravel",children:"Gravel"}),e.jsx("option",{value:"wood",children:"Wood"}),e.jsx("option",{value:"tiles",children:"Tiles"}),e.jsx("option",{value:"paint",children:"Paint"}),e.jsx("option",{value:"electrical",children:"Electrical"}),e.jsx("option",{value:"plumbing",children:"Plumbing"}),e.jsx("option",{value:"other",children:"Other"})]})]})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Unit *"}),e.jsx("input",{type:"text",value:J.unit,onChange:ie=>V({...J,unit:ie.target.value}),placeholder:"kg, m, pieces, etc.",required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Price per Unit *"}),e.jsx("input",{type:"number",step:"0.01",value:J.price,onChange:ie=>V({...J,price:ie.target.value}),placeholder:"0.00",required:!0})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Description"}),e.jsx("textarea",{value:J.description,onChange:ie=>V({...J,description:ie.target.value}),placeholder:"Optional description of the material...",rows:"3"})]}),e.jsx("div",{className:"form-actions",children:e.jsx("button",{type:"submit",disabled:b,className:"btn btn-primary",children:b?"Adding...":"Add Material"})})]})})]}),e.jsxs("div",{className:"section-card",children:[e.jsxs("div",{className:"section-header",children:[e.jsx("h2",{children:"Current Materials"}),e.jsx("p",{children:"All materials currently available in the system"})]}),e.jsx("div",{className:"section-content",children:b?e.jsx("div",{className:"loading",children:"Loading materials..."}):u.length===0?e.jsxs("div",{className:"empty-state",children:[e.jsx("div",{className:"empty-icon",children:""}),e.jsx("h3",{children:"No Materials Added"}),e.jsx("p",{children:"Start by adding your first construction material!"})]}):e.jsx("div",{className:"materials-grid",children:u.map(ie=>e.jsx(z6,{material:ie,onDelete:()=>Je(ie.id)},ie.id))})})]})]});return e.jsxs("div",{className:"dashboard-container admin-modern",children:[e.jsx("button",{className:"mobile-menu-btn",onClick:()=>U(!X),children:""}),e.jsxs("div",{className:`dashboard-sidebar soft-sidebar expanded ${X?"open":""}`,children:[e.jsx("div",{className:"sidebar-header sb-brand",children:e.jsxs("a",{href:"#",className:"sidebar-logo",children:[e.jsx("div",{className:"logo-icon",children:""}),e.jsx("span",{className:"logo-text sb-title",children:"Admin"})]})}),e.jsxs("nav",{className:"sidebar-nav sb-nav",children:[e.jsxs("a",{href:"#",className:`nav-item sb-item ${a==="dashboard"?"active":""}`,onClick:ie=>{ie.preventDefault(),s("dashboard")},children:[e.jsx("span",{className:"nav-icon sb-icon",children:e.jsx(Ks,{name:"home"})}),"Overview"]}),e.jsxs("a",{href:"#",className:`nav-item sb-item ${a==="users"?"active":""}`,onClick:ie=>{ie.preventDefault(),s("users")},children:[e.jsx("span",{className:"nav-icon sb-icon",children:e.jsx(Ks,{name:"users"})}),"All Users"]}),e.jsxs("a",{href:"#",className:`nav-item sb-item ${a==="pending"?"active":""}`,onClick:ie=>{ie.preventDefault(),s("pending")},children:[e.jsx("span",{className:"nav-icon sb-icon",children:e.jsx(Ks,{name:"hourglass"})}),"Pending Approvals"]}),e.jsxs("a",{href:"#",className:`nav-item sb-item ${a==="materials"?"active":""}`,onClick:ie=>{ie.preventDefault(),s("materials")},children:[e.jsx("span",{className:"nav-icon sb-icon",children:e.jsx(Ks,{name:"cube"})}),"Materials"]}),e.jsxs("a",{href:"#",className:`nav-item sb-item ${a==="payments"?"active":""}`,onClick:ie=>{ie.preventDefault(),s("payments")},children:[e.jsx("span",{className:"nav-icon sb-icon",children:e.jsx(Ks,{name:"check"})}),"Payment Verification"]}),e.jsxs("a",{href:"#",className:`nav-item sb-item ${a==="reports"?"active":""}`,onClick:ie=>{ie.preventDefault(),s("reports")},children:[e.jsx("span",{className:"nav-icon sb-icon",children:e.jsx(Ks,{name:"file"})}),"Customer Support"]})]})]}),e.jsxs("div",{className:"dashboard-main soft-main shifted",children:[e.jsxs("div",{className:"admin-topbar",children:[e.jsxs("div",{className:"search-box",children:[e.jsx(Ks,{name:"search",size:20}),e.jsx("input",{type:"text",placeholder:"Search","aria-label":"Search"})]}),e.jsxs("div",{className:"topbar-actions",children:[e.jsx("button",{className:"icon-btn","aria-label":"Change view",children:e.jsx(Ks,{name:"project"})}),e.jsx("button",{className:"icon-btn","aria-label":"Notifications",children:e.jsx(Ks,{name:"bell"})}),e.jsx("button",{className:"icon-btn","aria-label":"Settings",children:e.jsx(Ks,{name:"settings"})})]})]}),x&&e.jsxs("div",{className:"alert alert-error",children:[x,e.jsx("button",{onClick:()=>C(""),className:"alert-close",children:""})]}),D&&e.jsxs("div",{className:"alert alert-success",children:[D,e.jsx("button",{onClick:()=>S(""),className:"alert-close",children:""})]}),e.jsxs("div",{className:"admin-layout",children:[e.jsxs("div",{className:"admin-center",style:{paddingRight:"12px"},children:[a==="dashboard"&&qt(),a==="users"&&Bt(),a==="pending"&&Xt(),a==="materials"&&ta(),a==="payments"&&e.jsx(I6,{}),a==="reports"&&e.jsxs("div",{className:"admin-support-container",children:[e.jsxs("div",{className:"admin-support-header",children:[e.jsx("h1",{className:"admin-support-title",children:" Customer Support Issues"}),e.jsx("p",{className:"admin-support-subtitle",children:"View and respond to customer support requests and issues"}),e.jsxs("div",{className:"admin-support-stats",children:[e.jsxs("div",{className:"admin-support-stat",children:[e.jsx("div",{className:"admin-support-stat-number",children:q.length}),e.jsx("div",{className:"admin-support-stat-label",children:"Total Issues"})]}),e.jsxs("div",{className:"admin-support-stat",children:[e.jsx("div",{className:"admin-support-stat-number",children:q.filter(ie=>ie.status==="open").length}),e.jsx("div",{className:"admin-support-stat-label",children:"Open Issues"})]}),e.jsxs("div",{className:"admin-support-stat",children:[e.jsx("div",{className:"admin-support-stat-number",children:q.filter(ie=>ie.status==="replied").length}),e.jsx("div",{className:"admin-support-stat-label",children:"Replied"})]}),e.jsxs("div",{className:"admin-support-stat",children:[e.jsx("div",{className:"admin-support-stat-number",children:q.filter(ie=>ie.reply_count>0).length}),e.jsx("div",{className:"admin-support-stat-label",children:"With Replies"})]})]})]}),e.jsxs("div",{className:"admin-support-content",children:[e.jsxs("div",{className:"admin-issues-panel",children:[e.jsxs("div",{className:"admin-issues-header",children:[e.jsxs("h2",{className:"admin-issues-title",children:[" Customer Issues",e.jsx("span",{className:"admin-issues-count",children:q.length})]}),e.jsx("button",{className:"admin-refresh-btn",onClick:ve,children:" Refresh"}),e.jsx("button",{className:"admin-refresh-btn",onClick:async()=>{try{const at=await(await fetch("/buildhub/backend/api/test_proxy.php")).json();console.log("Proxy test result:",at),alert("Proxy test: "+(at.success?"SUCCESS":"FAILED"))}catch(ie){console.error("Proxy test failed:",ie),alert("Proxy test FAILED: "+ie.message)}},style:{marginLeft:"8px"},children:" Test API"})]}),e.jsxs("div",{className:"admin-issues-list",children:[x&&e.jsxs("div",{style:{padding:"16px",background:"#fee2e2",border:"1px solid #fca5a5",borderRadius:"8px",margin:"16px",color:"#dc2626"},children:[e.jsx("strong",{children:"Error:"})," ",x]}),R?e.jsx("div",{className:"admin-loading",children:"Loading customer issues..."}):q.length===0?e.jsxs("div",{className:"admin-empty-state",children:[e.jsx("div",{className:"admin-empty-icon",children:""}),e.jsx("h3",{className:"admin-empty-title",children:"No Customer Issues"}),e.jsx("p",{className:"admin-empty-text",children:x?"There was an error loading issues. Check the console for details.":"Customer support requests will appear here when submitted."})]}):q.map(ie=>e.jsxs("div",{className:`admin-issue-item ${ee?.id===ie.id?"selected":""}`,onClick:()=>et(ie.id),children:[e.jsxs("div",{className:"admin-issue-header",children:[e.jsx("div",{className:"admin-issue-priority",children:ie.category==="bug"?"":ie.category==="billing"?"":ie.category==="account"?"":ie.category==="feature"?"":""}),e.jsxs("div",{className:"admin-issue-content",children:[e.jsx("h4",{className:"admin-issue-title",children:ie.subject}),e.jsxs("p",{className:"admin-issue-meta",children:[e.jsxs("span",{className:"admin-issue-customer",children:[ie.first_name||"Unknown"," ",ie.last_name||"User"]}),ie.email&&` (${ie.email})`,"  #",ie.id,"  ",ie.category,ie.reply_count>0&&`  ${ie.reply_count} replies`]}),e.jsxs("p",{className:"admin-issue-time",children:[new Date(ie.created_at).toLocaleDateString()," at ",new Date(ie.created_at).toLocaleTimeString()]})]})]}),e.jsx("div",{className:"admin-issue-status",children:e.jsx("span",{className:`admin-status-badge ${ie.status}`,children:ie.status})})]},ie.id))]})]}),e.jsx("div",{className:"admin-thread-panel",children:ee?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"admin-thread-header",children:[e.jsx("h3",{className:"admin-thread-title",children:ee.subject}),e.jsxs("div",{className:"admin-thread-meta",children:[e.jsxs("div",{className:"admin-thread-meta-item",children:[e.jsx("span",{className:"admin-thread-meta-label",children:"Customer"}),e.jsxs("span",{className:"admin-thread-meta-value",children:[ee.first_name||"Unknown"," ",ee.last_name||"User"]})]}),e.jsxs("div",{className:"admin-thread-meta-item",children:[e.jsx("span",{className:"admin-thread-meta-label",children:"Email"}),e.jsx("span",{className:"admin-thread-meta-value",children:ee.email||"Not provided"})]}),e.jsxs("div",{className:"admin-thread-meta-item",children:[e.jsx("span",{className:"admin-thread-meta-label",children:"Category"}),e.jsx("span",{className:"admin-thread-meta-value",children:ee.category})]}),e.jsxs("div",{className:"admin-thread-meta-item",children:[e.jsx("span",{className:"admin-thread-meta-label",children:"Status"}),e.jsx("span",{className:"admin-thread-meta-value",children:e.jsx("span",{className:`admin-status-badge ${ee.status}`,children:ee.status})})]})]})]}),e.jsxs("div",{className:"admin-thread-messages",children:[e.jsxs("div",{className:"admin-message customer",children:[e.jsx("div",{className:"admin-message-header",children:"Customer Issue"}),e.jsx("div",{className:"admin-message-body",children:ee.message}),e.jsxs("div",{className:"admin-message-time",children:[new Date(ee.created_at).toLocaleDateString()," at ",new Date(ee.created_at).toLocaleTimeString()]})]}),Be.map(ie=>e.jsxs("div",{className:`admin-message ${ie.sender==="admin"?"admin":"customer"}`,children:[e.jsx("div",{className:"admin-message-header",children:ie.sender==="admin"?"Admin Support":"Customer"}),e.jsx("div",{className:"admin-message-body",children:ie.message}),e.jsxs("div",{className:"admin-message-time",children:[new Date(ie.created_at).toLocaleDateString()," at ",new Date(ie.created_at).toLocaleTimeString()]})]},ie.id)),Be.length===0&&ee.status==="open"&&e.jsxs("div",{className:"admin-empty-state",children:[e.jsx("div",{className:"admin-empty-icon",children:""}),e.jsx("h3",{className:"admin-empty-title",children:"No Replies Yet"}),e.jsx("p",{className:"admin-empty-text",children:"This customer issue is waiting for your response. Use the reply section below to help the customer."})]})]}),e.jsxs("div",{className:"admin-reply-section",children:[e.jsx("label",{className:"admin-reply-label",children:"Reply to Customer"}),e.jsx("textarea",{className:"admin-reply-textarea",rows:"4",value:ue,onChange:ie=>k(ie.target.value),placeholder:"Type your response to help the customer resolve their issue..."}),e.jsxs("div",{className:"admin-reply-actions",children:[e.jsx("button",{className:"admin-reply-btn",onClick:Oe,disabled:!ue.trim()||R,children:R?" Sending...":" Send Reply"}),e.jsx("span",{style:{fontSize:"14px",color:"#64748b"},children:"Customer will be notified of your response"})]})]})]}):e.jsxs("div",{className:"admin-empty-state",children:[e.jsx("div",{className:"admin-empty-icon",children:""}),e.jsx("h3",{className:"admin-empty-title",children:"Select a Customer Issue"}),e.jsx("p",{className:"admin-empty-text",children:"Choose an issue from the list to view the conversation and send replies."})]})})]})]})]}),e.jsx("aside",{className:"admin-right-rail",children:e.jsxs("div",{className:"profile-card",children:[e.jsxs("div",{className:"profile-header",children:[e.jsx("img",{className:"profile-avatar",alt:"avatar",src:`https://ui-avatars.com/api/?name=${encodeURIComponent(I)}&background=7c3aed&color=fff`}),e.jsx("button",{className:"icon-btn close-btn","aria-label":"Close",children:""})]}),e.jsx("h3",{className:"profile-name",children:I}),e.jsx("p",{className:"profile-sub",children:"Financial analytics"}),e.jsxs("div",{className:"profit-card",children:[e.jsx("div",{className:"mini-chart","aria-hidden":"true"}),e.jsxs("div",{className:"profit-values",children:[e.jsx("span",{className:"label",children:"Total Users"}),e.jsx("span",{className:"value",children:p.totalUsers||0})]})]}),e.jsxs("div",{className:"profit-card",style:{marginTop:"10px"},children:[e.jsx("div",{className:"mini-chart","aria-hidden":"true"}),e.jsxs("div",{className:"profit-values",children:[e.jsx("span",{className:"label",children:"Active Projects"}),e.jsx("span",{className:"value",children:p.activeProjects||0})]})]}),e.jsxs("div",{className:"recent-activities",children:[e.jsx("h4",{children:"Recent activities"}),e.jsxs("ul",{children:[i.slice(0,3).map(ie=>e.jsxs("li",{children:[e.jsx("span",{className:"act-icon up"})," ",ie.first_name," ",ie.last_name," ",e.jsx("span",{className:"amount",children:"pending"})]},ie.id)),i.length===0&&e.jsxs("li",{children:[e.jsx("span",{className:"act-icon down"})," No pending users ",e.jsx("span",{className:"amount",children:""})]})]})]}),e.jsx("div",{className:"profile-actions",style:{marginTop:"20px",paddingTop:"15px",borderTop:"1px solid #e5e7eb"},children:e.jsxs("button",{onClick:Nt,className:"logout-btn",style:{width:"100%",padding:"10px 16px",backgroundColor:"#dc2626",color:"white",border:"none",borderRadius:"8px",fontSize:"14px",fontWeight:"500",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",transition:"all 0.2s ease"},onMouseOver:ie=>{ie.currentTarget.style.backgroundColor="#b91c1c",ie.currentTarget.style.transform="translateY(-1px)"},onMouseOut:ie=>{ie.currentTarget.style.backgroundColor="#dc2626",ie.currentTarget.style.transform="translateY(0)"},children:[e.jsx(Ks,{name:"logout"}),"Logout"]})})]})})]}),e.jsx(P6,{user:T,isOpen:E,onClose:_e,onVerificationComplete:Et})]})]})},M6=({user:t,onApprove:a,onReject:s,onViewDocument:i,onDownloadDocument:o,onTriggerOCR:l,loading:d})=>e.jsxs("div",{className:"user-card",children:[e.jsxs("div",{className:"user-header",children:[e.jsx("div",{className:"user-avatar",children:t.profile_image?e.jsx("img",{src:t.profile_image,alt:`${t.first_name} ${t.last_name}`,style:{width:"100%",height:"100%",objectFit:"cover",borderRadius:"50%"}}):e.jsxs("div",{style:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"600",fontSize:"16px",color:"#fff"},children:[t.first_name?.charAt(0),t.last_name?.charAt(0)]})}),e.jsxs("div",{className:"user-basic-info",children:[e.jsxs("h4",{children:[t.first_name," ",t.last_name]}),e.jsx("p",{className:"user-role",children:t.role})]})]}),e.jsxs("div",{className:"user-details",children:[e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Email:"}),e.jsx("span",{className:"detail-value",children:t.email})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Registered:"}),e.jsx("span",{className:"detail-value",children:new Date(t.created_at).toLocaleDateString()})]})]}),e.jsxs("div",{className:"user-documents",children:[e.jsx("h5",{children:"Documents:"}),t.role==="contractor"&&t.license&&e.jsxs("div",{className:"document-item",children:[e.jsxs("span",{className:"doc-label",children:[e.jsx(Ks,{name:"file"})," License"]}),e.jsxs("div",{className:"document-actions",children:[e.jsxs("button",{className:"btn btn-secondary btn-sm",onClick:()=>i(t.id,"license"),children:[e.jsx(Ks,{name:"eye"})," View"]}),e.jsxs("button",{className:"btn btn-secondary btn-sm",onClick:()=>o(t.id,"license"),children:[e.jsx(Ks,{name:"download"})," Download"]})]})]}),t.role==="architect"&&t.portfolio&&e.jsxs("div",{className:"document-item",children:[e.jsxs("span",{className:"doc-label",children:[e.jsx(Ks,{name:"file"})," Portfolio"]}),e.jsxs("div",{className:"document-actions",children:[e.jsxs("button",{className:"btn btn-secondary btn-sm",onClick:()=>i(t.id,"portfolio"),children:[e.jsx(Ks,{name:"eye"})," View"]}),e.jsxs("button",{className:"btn btn-secondary btn-sm",onClick:()=>o(t.id,"portfolio"),children:[e.jsx(Ks,{name:"download"})," Download"]})]})]}),!t.license&&!t.portfolio&&e.jsx("p",{className:"no-documents",children:"No documents uploaded"})]}),t.has_ocr&&t.ocr_id&&e.jsxs("div",{className:"ocr-results",style:{marginTop:"15px",padding:"12px",backgroundColor:"#f8f9fa",borderRadius:"8px",border:"1px solid #e0e0e0"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px"},children:[e.jsx("h5",{style:{fontSize:"14px",fontWeight:"600",color:"#333",margin:0},children:" OCR Verification Results"}),e.jsx("div",{children:e.jsx("button",{className:"btn btn-primary btn-sm",onClick:()=>{const u=`/buildhub/backend/api/admin/download_ocr_results_pdf.php?user_id=${t.id}`;window.open(u,"_blank")},style:{fontSize:"11px",padding:"5px 10px",fontWeight:"600"},title:"Download as PDF",children:" Download PDF"})})]}),e.jsxs("div",{style:{marginBottom:"10px"},children:[e.jsx("span",{style:{fontSize:"12px",color:"#666",fontWeight:"500"},children:"Confidence: "}),e.jsx("span",{style:{padding:"4px 8px",borderRadius:"4px",fontSize:"11px",fontWeight:"600",backgroundColor:t.confidence_level==="HIGH"?"#d4edda":t.confidence_level==="MEDIUM"?"#fff3cd":"#f8d7da",color:t.confidence_level==="HIGH"?"#155724":t.confidence_level==="MEDIUM"?"#856404":"#721c24"},children:t.confidence_level||"LOW"})]}),t.extracted_fields&&Object.keys(t.extracted_fields).length>0&&e.jsxs("div",{style:{marginBottom:"10px"},children:[e.jsx("div",{style:{fontSize:"12px",color:"#666",fontWeight:"500",marginBottom:"6px"},children:"Extracted Information:"}),e.jsx("div",{style:{fontSize:"11px",color:"#555"},children:Object.entries(t.extracted_fields).map(([u,A])=>e.jsxs("div",{style:{marginBottom:"4px",paddingLeft:"8px"},children:[e.jsxs("strong",{style:{textTransform:"capitalize"},children:[u.replace("_"," "),":"]})," ",A]},u))})]}),(!t.extracted_fields||Object.keys(t.extracted_fields).length===0)&&e.jsx("div",{style:{fontSize:"11px",color:"#999",fontStyle:"italic"},children:"No fields extracted (document may be unclear or unreadable)"}),t.ocr_processed_at&&e.jsxs("div",{style:{fontSize:"10px",color:"#999",marginTop:"8px"},children:["Processed: ",new Date(t.ocr_processed_at).toLocaleString()]})]}),!t.has_ocr&&(t.license||t.portfolio)&&e.jsxs("div",{style:{marginTop:"10px",padding:"8px",backgroundColor:"#fff3cd",borderRadius:"6px",fontSize:"11px",color:"#856404",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("span",{children:" OCR processing pending or not available"}),e.jsx("button",{className:"btn btn-secondary btn-sm",onClick:()=>{window.confirm("Trigger OCR processing for this document?")&&l&&l(t.id)},style:{fontSize:"10px",padding:"4px 8px"},children:" Process OCR"})]}),e.jsxs("div",{className:"user-actions",children:[t.has_ocr&&t.ocr_id&&e.jsx("button",{className:"btn btn-info",onClick:()=>l&&l(t),disabled:d,style:{marginBottom:"8px",width:"100%"},children:" Verify OCR Data"}),e.jsxs("button",{className:"btn btn-success",onClick:a,disabled:d,children:[e.jsx(Ks,{name:"check"})," Approve"]}),e.jsxs("button",{className:"btn btn-danger",onClick:s,disabled:d,children:[e.jsx(Ks,{name:"x"})," Reject"]})]})]}),O6=({user:t,onViewDetails:a,onStatusChange:s,onViewDocument:i,onDownloadDocument:o,onDeleteUser:l})=>e.jsxs("div",{className:"table-row",children:[e.jsxs("div",{className:"table-cell user-info-cell",children:[e.jsx("div",{className:"user-avatar-small",children:t.profile_image?e.jsx("img",{src:t.profile_image,alt:`${t.first_name} ${t.last_name}`,style:{width:"100%",height:"100%",objectFit:"cover",borderRadius:"50%"}}):e.jsxs("div",{style:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"600",fontSize:"12px",color:"#fff"},children:[t.first_name?.charAt(0),t.last_name?.charAt(0)]})}),e.jsxs("div",{className:"user-basic-info",children:[e.jsxs("h5",{children:[t.first_name," ",t.last_name]}),e.jsx("p",{children:t.email}),t.phone&&e.jsx("p",{children:t.phone})]})]}),e.jsx("div",{className:"table-cell",children:e.jsx("span",{className:`role-badge ${t.role}`,children:t.role})}),e.jsx("div",{className:"table-cell",children:e.jsx("span",{className:`status-badge ${t.status}`,children:t.status||(t.is_verified?"approved":"pending")})}),e.jsx("div",{className:"table-cell",children:new Date(t.created_at).toLocaleDateString()}),e.jsx("div",{className:"table-cell actions-cell",children:e.jsxs("div",{className:"action-buttons",children:[e.jsx("button",{className:"btn btn-secondary btn-sm",onClick:a,children:" View"}),t.status==="suspended"?e.jsx("button",{className:"btn btn-success btn-sm",onClick:()=>s("approved"),children:" Unsuspend"}):e.jsx("button",{className:"btn btn-danger btn-sm",onClick:()=>s("suspended"),children:" Suspend"}),e.jsx("button",{className:"btn btn-danger btn-sm",onClick:()=>l(t.id),style:{backgroundColor:"#991b1b"},children:" Delete"})]})})]}),z6=({material:t,onDelete:a})=>e.jsxs("div",{className:"material-card",children:[e.jsxs("div",{className:"material-header",children:[e.jsx("h4",{children:t.name}),e.jsx("span",{className:"material-category",children:t.category})]}),e.jsxs("div",{className:"material-details",children:[e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Unit:"}),e.jsx("span",{className:"detail-value",children:t.unit})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Price:"}),e.jsxs("span",{className:"detail-value",children:["",t.price]})]}),t.description&&e.jsx("div",{className:"material-description",children:e.jsx("p",{children:t.description})})]}),e.jsx("div",{className:"material-actions",children:e.jsx("button",{className:"btn btn-danger btn-sm",onClick:a,children:" Delete"})})]}),q6=({children:t})=>{const[a,s]=w.useState(!1),[i,o]=w.useState(!1);return w.useEffect(()=>{(async()=>{const l=localStorage.getItem("admin_logged_in")==="true";let d=!1;try{const A=await(await fetch("/buildhub/backend/api/session_check.php",{credentials:"include"})).json();d=!!A.authenticated&&A.user?.role==="admin"}catch{}o(l||d),s(!0)})()},[]),a?i?t:e.jsx(Np,{to:"/login",replace:!0}):null},Qb=({children:t})=>{const[a,s]=w.useState(!1),[i,o]=w.useState(!1);return w.useEffect(()=>{(async()=>{const l=JSON.parse(sessionStorage.getItem("user")||"{}");let d=!1;try{d=!!(await(await fetch("/buildhub/backend/api/session_check.php",{credentials:"include"})).json()).authenticated}catch{}o(!!l.id&&l.role==="homeowner"&&d),s(!0)})()},[]),a?i?t:e.jsx(Np,{to:"/login",replace:!0}):null},Rb=({children:t})=>{const[a,s]=w.useState(!1),[i,o]=w.useState(!1);return w.useEffect(()=>{(async()=>{const l=JSON.parse(sessionStorage.getItem("user")||"{}");let d=!1;try{d=!!(await(await fetch("/buildhub/backend/api/session_check.php",{credentials:"include"})).json()).authenticated}catch{}o(!!l.id&&l.role==="architect"&&d),s(!0)})()},[]),a?i?t:e.jsx(Np,{to:"/login",replace:!0}):null},K6=({children:t})=>{const[a,s]=w.useState(!1),[i,o]=w.useState(!1);return w.useEffect(()=>{(async()=>{const l=JSON.parse(sessionStorage.getItem("user")||"{}");let d=!1;try{d=!!(await(await fetch("/buildhub/backend/api/session_check.php",{credentials:"include"})).json()).authenticated}catch{}o(!!l.id&&l.role==="contractor"&&d),s(!0)})()},[]),a?i?t:e.jsx(Np,{to:"/login",replace:!0}):null},G6=JSON.parse(`[{"id":"plot_size_basic","question_variants":["what is plot size","how to measure plot size","plot size meaning","what to write in plot size","plot dimensions help","wht is plot size","plot size kya hai","plot size means what","how measure plot","plot size how to","plot dimention","plot size help me","i dont know plot size","plot size nahi pata","plot size kaise measure kare","plot size batao","plot size explain","plot size samjhao","plot size enthaanu","plot size engane measure cheyyam","plot size parayamo","plot size ariyilla","plot size enthanu parayendathu","plot size help tharo","land size","site size","plot area","land area","site area measurement","plot measurement help","land measurement","how big is my plot","plot size calculation","plot size kaise nikale","plot size calculate kaise kare","plot size formula"],"answer":"Plot size is the width  depth of your land in feet or meters. Example: 3040 feet or 1012 meters. If you only know the total area, just tell me like '1200 sqft' or '100 sqm' and I'll help you."},{"id":"building_size_basic","question_variants":["building size","house size","construction area","built up area","building area","bilding size","house area","construction size","built area","building sqft","house sqft","building size kya hai","ghar ka size","construction area kya hai","building size batao","house size kitna","building area explain","building size enthaanu","veedu size","construction area enthanu","building area parayamo","house size engane","construction size ariyilla","total construction area","built up area meaning","carpet area vs built up","house construction size","building footprint","construction area calculation"],"answer":"Building size is the total floor area you want to build in square feet. Example: 1500 sqft for a 3BHK house. This includes all rooms, kitchen, bathrooms, and corridors inside the house."},{"id":"budget_help","question_variants":["budget","cost","price","money needed","construction cost","building cost","budjet","buget","total cost","kitna paisa","kitna kharcha","cost kitna","budget kya hai","budget batao","paisa kitna lagega","construction budget","building budget","house budget","ghar banane ka budget","construction ka paisa","budget enthaanu","paisa ethrayanu","construction cost enthanu","budget parayamo","veedu paniyan paisa","construction budget ariyilla","ethra paisa venam","how much money","total expense","construction expense","building expense","budget planning","cost estimation","price estimate","construction charges","builder charges","architect fees","total project cost","house building cost"],"answer":"Budget is the total money you want to spend on construction. You can choose from ranges like 5-10 Lakhs, 20-30 Lakhs, etc. Or enter a custom amount like 25,00,000. This should include construction, materials, and labor costs."},{"id":"rooms_bedrooms","question_variants":["how many bedrooms","bedroom count","beds needed","3bhk meaning","bhk means","bedrom","bed room","kitne bedroom","bedroom kitne","3bhk kya hai","2bhk 3bhk","bedroom chahiye kitne","rooms kitne","kamre kitne","bedroom batao","rooms explain","bhk explain","bedroom help","bedroom entha","room ethrayanu","bedroom count enthanu","bhk meaning malayalam","room kitne chahiye","bedroom planning","room planning","bedroom requirements","how many rooms needed","room count","bedroom selection","room selection","family size bedroom","bedroom for family","room distribution","bedroom layout"],"answer":"Choose how many bedrooms you need: 1BHK (1 bedroom), 2BHK (2 bedrooms), 3BHK (3 bedrooms), etc. BHK means Bedroom-Hall-Kitchen. Most families choose 2BHK or 3BHK. You can also add master bedroom, guest room, parents room separately."},{"id":"bathrooms_toilets","question_variants":["bathroom","toilet","washroom","how many bathrooms","bathroom count","bathrom","bath room","toilet kitne","bathroom kitne","washroom kitne","attached bathroom","common bathroom","toilet chahiye kitne","bathroom help","toilet help","washroom help","bathroom batao","toilet batao","bathroom entha","toilet ethrayanu","washroom count","bathroom planning","toilet planning","bathroom requirements","washroom requirements","bathroom design","toilet design","bathroom layout","attached vs common bathroom","powder room"],"answer":"Plan bathrooms based on bedrooms: 1BHK needs 1 bathroom, 2BHK needs 2 bathrooms, 3BHK needs 2-3 bathrooms. Consider attached bathrooms for master bedrooms and common bathrooms for guests. Always plan at least 1 bathroom on ground floor."},{"id":"kitchen_types","question_variants":["kitchen","kitchen type","open kitchen","closed kitchen","modular kitchen","kitchn","kitchen kya","kitchen chahiye","kitchen help","kitchen batao","open or closed kitchen","kitchen design","kitchen size","rasoi","rasoi ghar","kitchen explain","kitchen options"],"answer":"Kitchen is where you cook food. You can choose: Open Kitchen (connected to living room), Closed Kitchen (separate room), or Semi-Open Kitchen. Most people prefer closed kitchen to avoid cooking smells in the house. You can also add a utility area for washing dishes."},{"id":"living_dining","question_variants":["living room","hall","drawing room","dining room","dining area","living","hall room","drawing","dining","baithak","hall chahiye","living room help","dining help","hall batao","living room size","dining room size","hall size","drawing room help"],"answer":"Living Room (Hall) is where family sits together and meets guests. Dining Room is where you eat meals. You can have them separate or combined as 'Living-Dining'. Most homes have one large living-dining area to save space."},{"id":"special_rooms","question_variants":["pooja room","study room","guest room","store room","utility room","puja room","prayer room","study","guest","store","utility","pooja ghar","study chahiye","guest room chahiye","store room help","pooja room help","study room help","prayer room help","mandir"],"answer":"Special rooms you can add: Pooja Room (for prayers), Study Room (for work/study), Guest Room (for visitors), Store Room (for storage), Utility Room (for washing). Choose what your family needs. Pooja room is very common in Indian homes."},{"id":"floors_levels","question_variants":["floors","how many floors","storeys","levels","ground floor","first floor","floor","kitne floor","floor kitne","manzil","talla","floors help","ground plus one","g+1","g+2","floors batao","levels help","storey help","floors explain","how many levels"],"answer":"Choose number of floors: 1 Floor (Ground floor only), 2 Floors (Ground + First floor), 3 Floors (Ground + First + Second). Most homes are 1-2 floors. More floors need more budget and stronger foundation. Check local building rules for maximum allowed floors."},{"id":"location_city","question_variants":["location","city","where","place","area","address","location help","city help","location batao","city batao","kaha hai","location kya","city kya","area kya","jagah","location explain","city explain","address help","place help","location chahiye","city chahiye"],"answer":"Enter your city name where you want to build the house. This helps us find local architects and contractors. Also helps estimate material costs and building rules for your area. Just type your city name like 'Mumbai', 'Delhi', 'Bangalore', etc."},{"id":"timeline_duration","question_variants":["timeline","time","duration","how long","when complete","completion time","time kitna","kitna time","timeline help","duration help","time lagega","kab complete","kab ready","timeline batao","time batao","duration batao","construction time","building time","house banane ka time","completion help"],"answer":"Timeline is how long you want the construction to take. Options: 1-3 months (very fast), 3-6 months (normal), 6-12 months (detailed work), 1-2 years (luxury), 2+ years (no hurry), Flexible (any time). Most houses take 6-12 months to complete."},{"id":"plot_shape_types","question_variants":["plot shape","land shape","plot type","shape of plot","plot ka shape","plot shape help","shape batao","plot shape kya","land shape help","rectangular","square","irregular","corner plot","l shaped","plot shape explain","shape options","plot geometry"],"answer":"Plot shape describes your land: Rectangular (most common), Square (equal sides), L-shaped (like letter L), Irregular (odd shape), Corner (at road corner). Most plots are rectangular. If your plot has unusual shape, choose 'Irregular' and upload photos."},{"id":"topography_land","question_variants":["topography","land level","slope","flat land","sloping land","land type","topography help","land level help","slope help","flat or slope","topography kya","land level kya","zameen flat hai","zameen slope hai","topography batao","land condition","ground level","terrain"],"answer":"Topography means your land condition: Flat (level ground - easiest to build), Sloping (land goes up/down - needs extra work), Hilly (steep slope - more expensive). Flat land is cheapest to build on. Sloping land may need retaining walls and extra foundation work."},{"id":"budget_ranges_explained","question_variants":["budget range","cost range","price range","budget options","budget help","5 lakh","10 lakh","20 lakh","30 lakh","50 lakh","1 crore","2 crore","budget range help","cost options","price options","budget batao","kitna budget","budget kitna","cost kitna","paisa kitna"],"answer":"Budget ranges available: 5-10 Lakhs (basic house), 10-20 Lakhs (good quality), 20-30 Lakhs (premium), 30-50 Lakhs (luxury), 50-75 Lakhs (high-end), 75L-1Cr (premium luxury), 1-2 Crores (ultra luxury), 2-5 Crores (mansion), 5+ Crores (estate). Choose based on your budget capacity."},{"id":"house_styles_aesthetic","question_variants":["house style","design style","aesthetic","house design","architecture style","style help","design help","house style help","aesthetic help","modern","traditional","contemporary","kerala style","rajasthani style","style batao","design batao","house style kya","design kya","architecture help","style options","design options"],"answer":"House styles available: Modern (clean lines, glass), Traditional (classic Indian), Contemporary (mix of modern+traditional), Kerala Style (sloped roof, wood), Rajasthani (arches, courtyards), Minimalist (simple, less decoration), Colonial (British style), Mediterranean (European style). Choose what you like most."},{"id":"family_needs_requirements","question_variants":["family needs","family requirements","family size","family members","family help","family needs help","family requirements help","family kya chahiye","family needs batao","family size help","elderly","kids","children","parents","joint family","nuclear family","family type","family structure","family composition"],"answer":"Family needs help us design better: Elderly Members (need ground floor room, ramp), Small Children (need safe spaces, play area), Joint Family (need more rooms, common areas), Nuclear Family (compact design), Working from Home (need study/office), Guests (need guest room). Tell us about your family so we can plan accordingly."},{"id":"parking_garage","question_variants":["parking","garage","car parking","vehicle parking","car space","parking help","garage help","car parking help","parking space","parking kitni","garage chahiye","car park","vehicle space","parking batao","garage batao","car parking batao","parking area"],"answer":"Parking options: No Parking (save space), 1 Car Parking (1220 feet), 2 Car Parking (2020 feet), Covered Garage (protected from rain), Open Parking (cheaper option). Most families need 1-2 car parking. Garage protects car but costs more."},{"id":"vastu_compliance","question_variants":["vastu","vastu shastra","vastu compliant","vastu rules","vastu help","vastu chahiye","vastu follow","vastu according","vastu batao","vastu shastra help","vastu rules help","vastu compliance","direction","facing","east facing","north facing","vastu tips"],"answer":"Vastu Shastra is traditional Indian architecture science about directions and energy. We can design according to Vastu rules: Main door facing East/North, Kitchen in South-East, Master bedroom in South-West, Pooja room in North-East. Tell us if you want Vastu-compliant design or you're flexible."},{"id":"materials_construction","question_variants":["materials","construction materials","building materials","brick","cement","materials help","construction materials help","building materials help","materials kya","materials batao","construction material kya","brick or block","aac block","red brick","materials options","quality materials","best materials","materials choice"],"answer":"Construction materials options: Red Brick (traditional, strong), AAC Blocks (lightweight, insulated), Concrete Blocks (strong, fast), Steel Structure (modern, earthquake resistant), RCC (reinforced concrete). We use quality materials based on your budget and local availability. Standard materials work well for most homes."},{"id":"electrical_plumbing","question_variants":["electrical","plumbing","wiring","pipes","electrical work","plumbing work","electrical help","plumbing help","wiring help","electrical batao","plumbing batao","wiring batao","electrical kya","plumbing kya","power","water supply","drainage","electrical points","switches"],"answer":"Electrical & Plumbing included in construction: Electrical (wiring, switches, lights, fans, AC points), Plumbing (water supply, drainage, bathroom fittings, kitchen sink). We plan power points for all appliances and proper water supply/drainage for all rooms. Tell us if you need special electrical needs like EV charging, generator, solar."},{"id":"approvals_permissions","question_variants":["approvals","permissions","building permission","plan approval","noc","approvals help","permissions help","building permission help","approvals kya","permissions kya","approval chahiye","permission chahiye","plan approval help","building approval","construction approval","legal approvals","government approval","municipal approval"],"answer":"Building approvals needed: Building Plan Approval (from local authority), NOC (No Objection Certificate), Structural Approval (for safety), Electrical Approval (for power connection). Your architect will help get all required approvals. This takes 2-4 weeks usually and has government fees."},{"id":"photo_upload_help","question_variants":["photo upload","upload photos","site photos","plot photos","pictures","photo help","upload help","photo upload help","pictures help","photo kaise upload","photo upload kaise","photos chahiye","site photos help","plot photos help","photo batao","upload batao","how to upload","photo requirements","picture requirements"],"answer":"Upload 3-5 clear photos of your plot: 1) Front view from road, 2) Inside the plot, 3) Left side boundary, 4) Right side boundary, 5) Back side. Take photos in good daylight, avoid blurry images. This helps architects understand your site better and design accordingly."},{"id":"architect_selection","question_variants":["architect","architect selection","choose architect","select architect","architect help","architect selection help","architect batao","architect kaise choose","architect kaise select","architect chahiye","good architect","best architect","architect find","architect search"],"answer":"After submitting your request, multiple architects will send you proposals with designs and quotes. You can see their portfolio, ratings, experience, and prices. Compare all proposals and choose the architect you like best. You can also message architects to ask questions before selecting."},{"id":"contractor_vs_architect","question_variants":["contractor vs architect","difference contractor architect","contractor or architect","contractor help","architect help","contractor kya","architect kya","contractor vs architect help","difference help","contractor batao","architect batao","who to choose","contractor or architect better"],"answer":"Architect designs your house (plans, drawings, structure) and Contractor builds it (construction work, labor, materials). Many professionals do both - they design AND build your house. When you submit request, you'll get proposals from architects who can also handle construction, so you get complete service from one person."},{"id":"payment_process","question_variants":["payment","payment process","how to pay","payment method","payment help","payment kaise","payment batao","paisa kaise de","payment process help","payment schedule","payment plan","advance payment","final payment","payment terms","payment security","safe payment"],"answer":"Payment is done in stages for your safety: 1) Advance (10-20% to start), 2) Foundation completion (20-30%), 3) Structure completion (30-40%), 4) Finishing work (20-30%), 5) Final completion (5-10%). Never pay full amount in advance. Pay only after seeing completed work at each stage."},{"id":"project_timeline_stages","question_variants":["project stages","construction stages","building stages","project timeline","construction process","building process","project stages help","construction stages help","building stages help","project process","construction timeline","building timeline","stages batao","process batao"],"answer":"Construction stages: 1) Design & Approvals (1-2 months), 2) Foundation work (1 month), 3) Structure (walls, roof) (2-3 months), 4) Electrical & Plumbing (1 month), 5) Finishing (flooring, painting, fittings) (2-3 months), 6) Final touches (15 days). Total: 6-12 months depending on house size and complexity."},{"id":"common_mistakes_avoid","question_variants":["mistakes to avoid","common mistakes","what not to do","avoid mistakes","mistakes help","common mistakes help","mistakes batao","galti kya","galti se bache","mistakes in construction","building mistakes","construction mistakes","avoid problems","problems to avoid"],"answer":"Common mistakes to avoid: 1) Paying full advance (pay in stages), 2) Not checking architect credentials, 3) Skipping soil test, 4) Not getting proper approvals, 5) Changing design frequently (increases cost), 6) Not planning electrical points properly, 7) Ignoring ventilation, 8) Not keeping buffer budget (keep 10-15% extra)."},{"id":"grammar_variations_help","question_variants":["i dont no","i dont know","i not know","dont no","not no","help me","help pls","pls help","plz help","halp","hlp","wat is","wht is","what iz","whats","wat","wht","how 2","how to","how do","how can","kaise","kese","tell me","tel me","batao","bata do","samjhao","explain","i need","i want","i require","chahiye","chaiye","chaye"],"answer":"I understand! I'm here to help you with your house construction request. Don't worry about spelling or grammar - just tell me what you need help with. I can explain any part of the form in simple words. What specific question do you have?"},{"id":"form_navigation_help","question_variants":["how to fill form","form help","form filling help","form batao","form kaise bhare","form kaise fill","form help me","form guide","step by step","form steps","form process","form explain","form samjhao","form tutorial","form instructions"],"answer":"Form filling is easy! Follow these steps: 1) Plot Details (size, shape, location), 2) Budget (how much money you want to spend), 3) Rooms (bedrooms, bathrooms, kitchen, etc.), 4) House Style (modern, traditional, etc.), 5) Upload Photos (of your plot), 6) Submit. I can help you with any step. Which part do you need help with?"},{"id":"technical_terms_simple","question_variants":["technical words","difficult words","hard words","terms meaning","technical terms","construction terms","building terms","words samjhao","terms batao","meaning batao","explain words","simple words","easy words","simple language","hindi me batao"],"answer":"I'll explain everything in simple words! Here are common terms: Plot = Your land, Building = Your house, Budget = Money needed, BHK = Bedroom-Hall-Kitchen, Sqft = Square feet (area measurement), Architect = Person who designs house, Contractor = Person who builds house, Approval = Government permission. Ask me about any word you don't understand!"},{"id":"urgent_help_support","question_variants":["urgent","emergency","urgent help","immediate help","fast help","urgent hai","jaldi help","turant help","emergency help","urgent support","immediate support","quick help","fast support","call me","phone call","talk to someone","human help"],"answer":"For urgent help, I can: 1) Answer your questions immediately, 2) Help you fill the form quickly, 3) Connect you to our support team for a phone call, 4) Mark your request as urgent for faster architect responses. What urgent help do you need right now? If you need to talk to someone, I can arrange a callback."},{"id":"cost_estimation_help","question_variants":["cost estimate","price estimate","cost calculation","price calculation","kitna kharcha","kitna cost","kitna price","estimate help","cost batao","price batao","estimate batao","calculation help","rough cost","approximate cost","ballpark cost","cost idea"],"answer":"Cost estimation depends on: 1) House size (bigger = more cost), 2) Location (city affects material prices), 3) Quality level (basic/premium/luxury), 4) Number of floors. Rough estimate: 1,500-3,000 per sqft. For 1500 sqft house: 22-45 Lakhs. For accurate estimate, submit your request and architects will give detailed quotes based on your exact requirements."},{"id":"local_rules_bylaws","question_variants":["local rules","building rules","bylaws","regulations","permissions","local rules help","building rules help","bylaws help","rules batao","permission rules","construction rules","building laws","local laws","what rules","rules kya hai","permission kya chahiye","rules follow"],"answer":"Local building rules vary by city/area: 1) Setbacks (space from boundary), 2) Maximum floors allowed, 3) Building height limits, 4) Parking requirements, 5) Fire safety rules. Your architect knows local rules and will design accordingly. They'll also help get required approvals from local authorities. Don't worry - we handle all legal compliance."},{"id":"dashboard_main_navigation","question_variants":["how to use dashboard","dashboard help","where to click","dashboard navigation","dashboard kaise use kare","dashboard help me","dashboard batao","dashboard guide","where is dashboard","dashboard kaha hai","main dashboard","home dashboard","dashboard features","dashboard options","dashboard menu","dashboard sections"],"answer":"Your dashboard is your main control center! Here's what you'll see: 1) 'Create New Request' button (big blue button) - click to start a new project, 2) 'My Requests' - see all your submitted requests, 3) 'Active Projects' - ongoing construction work, 4) 'Messages' - chat with architects, 5) 'Profile' - update your details. Everything is clearly labeled with icons!"},{"id":"create_request_button","question_variants":["where to create request","create new request","start new project","submit request","request kaise banaye","new request kaha hai","request button kaha","project start kaise","create request button","new request button","submit new request","request form kaha","how to create request","request banane ka button","new project button"],"answer":"Look for the big blue 'Create New Request' button on your dashboard - it's usually at the top! Click it to start your construction project. This opens the request form where you'll fill plot size, budget, rooms needed, etc. Can't miss it - it's the most prominent button!"},{"id":"my_requests_section","question_variants":["my requests","where are my requests","submitted requests","request status","mere requests kaha","request status kaha","submitted request kaha","my request section","requests list","all requests","request history","previous requests","request tracking","request progress","check request status"],"answer":"Click 'My Requests' in the sidebar or main menu. Here you'll see: 1) All your submitted requests, 2) Status of each (Open/In Progress/Completed), 3) Number of proposals received, 4) Click any request to see details, proposals, and messages. It's like your project inbox!"},{"id":"view_proposals_help","question_variants":["where are proposals","see proposals","architect proposals","proposal kaha hai","proposals kaise dekhe","architect ka proposal","proposal check kaise","proposal list","received proposals","proposal status","proposal section","architect quotes","how to see proposals","proposal viewing","check architect proposals"],"answer":"To see proposals: 1) Go to 'My Requests', 2) Click on your specific request, 3) Look for 'Proposals' tab or section, 4) You'll see all architect proposals with photos, prices, timelines. Each proposal shows architect profile, ratings, and portfolio. Click 'View Details' on any proposal to see full information!"},{"id":"messages_section","question_variants":["where are messages","chat with architect","message section","inbox","messages kaha hai","architect se chat","message kaise kare","chat section","communication","talk to architect","architect contact","messaging","chat kaha hai","message box","architect message","conversation"],"answer":"Click 'Messages' in your dashboard menu. Here you can: 1) See all conversations with architects, 2) Start new chats, 3) Reply to architect questions, 4) Share additional requirements. You can also message directly from any proposal by clicking 'Message Architect' button. All your chats are saved here!"},{"id":"profile_settings","question_variants":["profile settings","update profile","edit profile","my profile","profile kaha hai","profile edit kaise","profile update","account settings","personal details","profile information","account details","user profile","profile section","my account","profile page"],"answer":"Click 'Profile' or your name/photo in the dashboard. Here you can: 1) Update personal details (name, phone, email), 2) Change password, 3) Add profile photo, 4) Update address, 5) Manage notification preferences. Keep your profile updated so architects can contact you easily!"},{"id":"upload_documents_help","question_variants":["how to upload documents","upload photos","add documents","document upload","photo upload kaise","documents kaise upload","file upload","image upload","site photos upload","property documents","upload button kaha","file attach","document attach","photo attach","upload kaise kare"],"answer":"To upload documents: 1) In request form, look for 'Upload Documents' or 'Add Photos' section, 2) Click 'Choose Files' or drag & drop, 3) Select site photos, property papers, reference images, 4) Supported: JPG, PNG, PDF (max 10MB each). You can upload multiple files. Good photos help architects give better proposals!"},{"id":"select_architect_help","question_variants":["how to select architect","choose architect","accept proposal","hire architect","architect kaise choose kare","proposal accept kaise","architect select","contractor choose","architect hire kaise","proposal selection","architect booking","architect confirm","best architect kaise choose","architect decision","proposal accept button"],"answer":"To select an architect: 1) Compare all proposals carefully, 2) Check architect ratings & portfolio, 3) Compare prices & timelines, 4) Read reviews from previous clients, 5) Message architects with questions, 6) Click 'Accept Proposal' on your preferred choice. Take your time - this is an important decision!"},{"id":"project_tracking","question_variants":["track project","project status","construction progress","project updates","project tracking kaise","progress kaise dekhe","project status check","construction status","project progress","work progress","project monitoring","construction tracking","project ka status","kaam ka progress","project update kaha"],"answer":"Track your project in 'Active Projects' section: 1) See current construction phase, 2) View progress photos from architect, 3) Check timeline milestones, 4) Payment schedule status, 5) Upcoming tasks. Your architect will regularly update progress with photos and reports. You'll get notifications for major updates!"},{"id":"payment_section","question_variants":["payment","pay architect","payment section","billing","invoice","payment kaise kare","paisa kaise de","payment method","pay online","payment status","payment history","invoice kaha","bill payment","architect ko payment","construction payment","payment tracking"],"answer":"For payments: 1) Go to 'Active Projects'  Your project  'Payments' tab, 2) See payment schedule & due amounts, 3) Click 'Pay Now' for secure online payment, 4) View payment history & receipts, 5) Set up auto-pay if available. All payments are secure and you get instant receipts!"},{"id":"help_support","question_variants":["help","support","customer care","contact support","need help","help kaha hai","support team","customer service","help center","problem hai","issue hai","complaint","support contact","help desk","technical support","customer support","help section"],"answer":"Need help? 1) Use this chatbot for instant answers, 2) Click 'Help' or '?' icon in dashboard, 3) Email support@buildhub.com, 4) Call customer care (number in dashboard), 5) Live chat available 9 AM - 9 PM. We're here to help with any questions about using the platform, projects, or payments!"},{"id":"notifications_alerts","question_variants":["notifications","alerts","updates","notification settings","alerts kaha","notification kaise dekhe","alerts check","update notifications","message alerts","notification bell","alert section","notification center","updates kaha","notification settings","alert preferences"],"answer":"Check notifications: 1) Click bell icon () in dashboard header, 2) See new proposals, messages, project updates, 3) Mark as read/unread, 4) Go to 'Settings' to manage notification preferences (email, SMS, push). You'll get alerts for: new proposals, architect messages, project milestones, payment reminders."},{"id":"mobile_app_dashboard","question_variants":["mobile app","phone app","mobile dashboard","app download","mobile version","mobile app kaha","phone me dashboard","app download kaise","mobile site","smartphone app","android app","ios app","mobile browser","phone browser"],"answer":"Access dashboard on mobile: 1) Open browser on phone, 2) Go to buildhub.com, 3) Login with your account, 4) Mobile-friendly dashboard works perfectly, 5) All features available (create requests, view proposals, chat, payments). No separate app needed - the website works great on phones!"},{"id":"dashboard_first_time","question_variants":["first time user","new user help","getting started","dashboard tour","beginner guide","pehli baar use kar raha","new user","dashboard guide","start kaise kare","first time dashboard","beginner help","new to platform","getting started guide","dashboard tutorial","first steps","how to begin"],"answer":"Welcome to BuildHub! Here's your quick start guide: 1) Complete your profile first (click Profile), 2) Click big blue 'Create New Request' button, 3) Fill the form with your plot details & budget, 4) Upload site photos, 5) Submit and wait for architect proposals, 6) Check 'My Requests' to see proposals, 7) Message architects with questions, 8) Select your favorite proposal. That's it - you're all set!"},{"id":"dashboard_troubleshooting","question_variants":["dashboard not working","page not loading","button not clicking","error on dashboard","dashboard problem","site not working","login problem","dashboard issue","page loading slow","dashboard error","technical problem","website issue","dashboard nahi khul raha","problem hai dashboard me","error aa raha"],"answer":"Dashboard issues? Try these: 1) Refresh the page (F5 or reload button), 2) Clear browser cache & cookies, 3) Try different browser (Chrome, Firefox), 4) Check internet connection, 5) Disable ad-blockers temporarily, 6) Try incognito/private mode. Still not working? Contact support - we'll fix it quickly!"},{"id":"form_fields_overview","question_variants":["which fields to fill","form fields help","what to fill in form","form filling guide","fields kya bharna hai","form me kya dale","fields help","form guide","what information needed","form requirements","mandatory fields","required fields","form fields batao","kya kya bharna padega","form me kya kya chahiye"],"answer":"Here are the main fields you need to fill:\\n\\n**Essential Fields:**\\n Plot Size (length  width or total area)\\n Budget Range (your spending limit)\\n Number of Bedrooms (1BHK, 2BHK, 3BHK, etc.)\\n Number of Bathrooms\\n Number of Floors\\n Location/City\\n\\n**Optional but Helpful:**\\n Parking requirements\\n Special rooms (study, pooja room)\\n Preferred house style\\n Timeline for construction\\n Site photos\\n\\nDon't worry - I can help you with each field individually!"},{"id":"plot_size_field_help","question_variants":["plot size field","how to fill plot size","plot size kya dale","plot dimension field","plot size me kya likhe","plot field help","land size field","plot area field","plot size best option","plot size kaise bhare","plot measurement field","site area field","land area kya dale","plot size form field"],"answer":"**Plot Size Field - Best Practices:**\\n\\n** DO:**\\n Enter as Length  Width (e.g., 3040 feet)\\n Or total area (e.g., 1200 sqft)\\n Use consistent units (all feet or all meters)\\n Measure accurately or get survey done\\n\\n** DON'T:**\\n Mix units (30 feet  12 meters)\\n Guess measurements\\n Include built-up area\\n Forget to mention unit\\n\\n**Best Options:**\\n 3040 feet (1200 sqft) - Good for 2-3BHK\\n 4060 feet (2400 sqft) - Perfect for 3-4BHK\\n 5080 feet (4000 sqft) - Spacious 4-5BHK\\n\\n**Pro Tip:** If irregular plot, mention total area + note 'irregular shape'"},{"id":"budget_field_help","question_variants":["budget field help","budget kya dale","budget range field","cost field help","budget me kya likhe","budget best option","budget field kaise bhare","paisa field","budget range kya choose kare","budget selection help","cost range field","budget amount field","construction budget field","budget dropdown help"],"answer":"**Budget Field - Smart Selection:**\\n\\n** DO:**\\n Choose realistic range based on plot size\\n Include 10-20% buffer for extras\\n Consider location (metro cities cost more)\\n Think about quality level you want\\n\\n** DON'T:**\\n Set unrealistic low budget\\n Forget about extra costs (approvals, furniture)\\n Choose too wide range\\n Include land cost in construction budget\\n\\n**Best Budget Ranges:**\\n **10-20 Lakhs:** Basic 1-2BHK (1000-1500 sqft)\\n **20-35 Lakhs:** Good quality 2-3BHK (1500-2000 sqft)\\n **35-50 Lakhs:** Premium 3BHK (2000-2500 sqft)\\n **50+ Lakhs:** Luxury 4BHK+ (2500+ sqft)\\n\\n**Pro Tip:** Budget = Plot area  1500-3000 per sqft (depending on quality)"},{"id":"bedroom_field_help","question_variants":["bedroom field help","bedrooms kya choose kare","bhk field help","bedroom count field","kitne bedroom dale","bedroom selection help","bhk kya select kare","rooms field","bedroom number field","bedroom best option","bhk field kaise bhare","bedroom count kya dale","rooms kya choose kare","bedroom dropdown help"],"answer":"**Bedroom Field - Family-wise Selection:**\\n\\n** DO:**\\n Consider current + future family size\\n Think about guests and parents\\n Plan for kids' growth\\n Consider work-from-home needs\\n\\n** DON'T:**\\n Choose too few (you'll regret later)\\n Go overboard (maintenance issues)\\n Forget about master bedroom size\\n Ignore natural light in all rooms\\n\\n**Best Options by Family:**\\n **1BHK:** Single person/couple, no kids\\n **2BHK:** Couple + 1 child, small family\\n **3BHK:** Family of 4-5, most popular choice\\n **4BHK:** Large family, frequent guests\\n **5BHK+:** Joint family, luxury living\\n\\n**Pro Tip:** 3BHK is the sweet spot - good resale value, comfortable for most families"},{"id":"bathroom_field_help","question_variants":["bathroom field help","bathroom count field","toilet field help","washroom field","bathroom kya dale","toilet kitne dale","bathroom number field","washroom count","bathroom selection help","toilet count field","bathroom best option","bathroom kaise choose kare","toilet field kaise bhare","washroom kya select kare"],"answer":"**Bathroom Field - Practical Planning:**\\n\\n** DO:**\\n Plan 1 bathroom per bedroom minimum\\n Add 1 common bathroom for guests\\n Consider attached vs common bathrooms\\n Think about powder room near living area\\n\\n** DON'T:**\\n Have too few bathrooms (morning rush!)\\n Make all bathrooms same size\\n Forget ventilation planning\\n Skip powder room in large houses\\n\\n**Best Bathroom Count:**\\n **1BHK:** 1 bathroom (attached to bedroom)\\n **2BHK:** 2 bathrooms (1 attached + 1 common)\\n **3BHK:** 3 bathrooms (2 attached + 1 common)\\n **4BHK:** 4-5 bathrooms (3 attached + 1-2 common)\\n\\n**Pro Tip:** Always have at least 1 bathroom on ground floor for guests and elderly"},{"id":"floors_field_help","question_variants":["floors field help","floors kya dale","storey field help","floors count field","kitne floors dale","floors selection help","floors number field","storey count","floors best option","floors kaise choose kare","storey field kaise bhare","floors dropdown help","building height field","floors kya select kare"],"answer":"**Floors Field - Height Planning:**\\n\\n** DO:**\\n Check local building height limits\\n Consider elderly family members\\n Plan for future expansion\\n Think about natural light and ventilation\\n\\n** DON'T:**\\n Exceed local regulations\\n Make too many floors on small plot\\n Forget about staircase space\\n Ignore structural costs\\n\\n**Best Floor Options:**\\n **Ground Floor Only:** Easy access, good for elderly, lower cost\\n **Ground + 1st Floor:** Most popular, good space utilization\\n **Ground + 2 Floors:** Maximum space, needs lift planning\\n **Basement + Ground + 1st:** Extra space, higher cost\\n\\n**Pro Tip:** Ground + 1st floor is ideal - balances space, cost, and accessibility"},{"id":"parking_field_help","question_variants":["parking field help","parking kya dale","car parking field","vehicle parking field","parking selection help","parking space field","garage field help","parking count","parking best option","parking kaise choose kare","car space field","parking requirements field","vehicle space field","parking area field"],"answer":"**Parking Field - Vehicle Planning:**\\n\\n** DO:**\\n Plan for current + future vehicles\\n Consider 2-wheeler parking separately\\n Check local parking requirements\\n Think about guest parking\\n\\n** DON'T:**\\n Underestimate parking needs\\n Forget about car size variations\\n Ignore turning radius space\\n Skip covered parking\\n\\n**Best Parking Options:**\\n **1 Car:** Small family, budget-conscious\\n **2 Cars:** Most families, future-ready\\n **3+ Cars:** Large family, business needs\\n **No Parking:** Only if public transport area\\n\\n**Space Requirements:**\\n 1 Car: 1020 feet minimum\\n 2 Cars: 2020 feet or 1040 feet\\n Include turning space: +5 feet on sides\\n\\n**Pro Tip:** Always plan for 2 cars even if you have 1 - future resale value!"},{"id":"location_field_help","question_variants":["location field help","location kya dale","city field help","address field","location selection help","city kya choose kare","area field help","location best","location kaise bhare","city field kaise bhare","address kya dale","location dropdown help","city selection help","area kya select kare"],"answer":"**Location Field - Area Selection:**\\n\\n** DO:**\\n Enter exact city/town name\\n Mention specific area if metro city\\n Consider future development plans\\n Check connectivity and amenities\\n\\n** DON'T:**\\n Be too vague (just 'Delhi')\\n Forget to mention state\\n Choose very remote areas\\n Ignore infrastructure development\\n\\n**Best Location Practices:**\\n **Metro Cities:** Mention sector/area (e.g., 'Gurgaon, Sector 45')\\n **Tier 2 Cities:** City name + landmark (e.g., 'Indore, Vijay Nagar')\\n **Towns:** Town + district (e.g., 'Khargone, MP')\\n\\n**Location affects:**\\n Material costs (transport)\\n Labor availability\\n Approval processes\\n Architect selection\\n\\n**Pro Tip:** Specific location helps architects give accurate quotes"},{"id":"house_style_field_help","question_variants":["house style field","design style field","architecture style field","house type field","style kya choose kare","design field help","house style help","architecture field","style selection help","design kya dale","house style best option","architecture style help","design type field","style field kaise bhare"],"answer":"**House Style Field - Design Selection:**\\n\\n** DO:**\\n Choose style that suits climate\\n Consider maintenance requirements\\n Think about resale appeal\\n Match with neighborhood\\n\\n** DON'T:**\\n Choose trendy styles that date quickly\\n Ignore local climate conditions\\n Pick high-maintenance designs\\n Copy exactly from photos\\n\\n**Popular Style Options:**\\n **Modern/Contemporary:** Clean lines, large windows, minimalist\\n **Traditional Indian:** Courtyards, arches, cultural elements\\n **Colonial:** Pillars, balconies, classic appeal\\n **Mediterranean:** Warm colors, tiles, outdoor living\\n **Minimalist:** Simple, functional, low maintenance\\n\\n**Climate Considerations:**\\n Hot areas: Light colors, large overhangs\\n Rainy areas: Sloped roofs, covered areas\\n Cold areas: Compact design, south-facing windows\\n\\n**Pro Tip:** Modern style is most popular - good resale value and lower maintenance"},{"id":"timeline_field_help","question_variants":["timeline field help","construction time field","completion time field","duration field","timeline kya dale","time field help","construction duration field","project time","timeline selection help","completion timeline field","construction timeline help","project duration field","timeline best option","time kya choose kare"],"answer":"**Timeline Field - Realistic Planning:**\\n\\n** DO:**\\n Be realistic about construction time\\n Add buffer for delays (weather, approvals)\\n Consider seasonal factors\\n Plan around festivals/monsoons\\n\\n** DON'T:**\\n Set unrealistic short timelines\\n Forget about approval time\\n Ignore monsoon delays\\n Rush quality for speed\\n\\n**Realistic Timelines:**\\n **1000-1500 sqft:** 8-12 months\\n **1500-2500 sqft:** 12-18 months\\n **2500+ sqft:** 18-24 months\\n **Add 2-4 months:** For approvals\\n\\n**Factors Affecting Timeline:**\\n Plot accessibility\\n Design complexity\\n Material availability\\n Weather conditions\\n Local regulations\\n\\n**Pro Tip:** Start in October-November to avoid monsoon delays in main construction"},{"id":"special_rooms_field_help","question_variants":["special rooms field","additional rooms field","extra rooms field","other rooms field","special rooms kya dale","extra rooms help","additional rooms help","other rooms help","special rooms selection","extra rooms kya choose kare","additional rooms best","special rooms options","other rooms kya dale","extra rooms field help"],"answer":"**Special Rooms Field - Extra Spaces:**\\n\\n** DO:**\\n Think about family lifestyle\\n Consider future needs\\n Plan for hobbies and interests\\n Think about work-from-home\\n\\n** DON'T:**\\n Add too many special rooms\\n Forget about maintenance\\n Make rooms too small\\n Ignore natural light needs\\n\\n**Popular Special Rooms:**\\n **Study Room:** Kids education, WFH (810 feet min)\\n **Pooja Room:** Religious activities (68 feet min)\\n **Store Room:** Storage needs (68 feet min)\\n **Servant Room:** Domestic help (810 feet)\\n **Home Theater:** Entertainment (1215 feet min)\\n **Gym:** Fitness (1012 feet min)\\n **Guest Room:** Visitors (1012 feet)\\n\\n**Priority Order:**\\n1. Study Room (essential for families with kids)\\n2. Store Room (everyone needs storage)\\n3. Pooja Room (cultural importance)\\n4. Guest Room (social needs)\\n\\n**Pro Tip:** Study room is most important - can double as office/guest room"},{"id":"kitchen_type_field_help","question_variants":["kitchen type field","kitchen style field","kitchen design field","kitchen layout field","kitchen type kya choose kare","kitchen field help","kitchen style help","kitchen design help","kitchen layout help","kitchen type best option","kitchen kya select kare","kitchen style kya dale","kitchen design kya choose kare","kitchen layout best"],"answer":"**Kitchen Type Field - Layout Selection:**\\n\\n** DO:**\\n Consider family cooking habits\\n Think about kitchen size available\\n Plan for appliances and storage\\n Consider who will cook\\n\\n** DON'T:**\\n Choose trendy over functional\\n Make kitchen too small\\n Ignore ventilation needs\\n Forget about dining connection\\n\\n**Kitchen Layout Options:**\\n **Straight/Linear:** Small spaces, budget-friendly\\n **L-Shaped:** Most popular, good corner utilization\\n **U-Shaped:** Maximum storage, larger families\\n **Island Kitchen:** Luxury, needs large space\\n **Parallel/Galley:** Efficient, medium spaces\\n\\n**Best Choices:**\\n **Small House (1-2BHK):** Straight or L-shaped\\n **Medium House (3BHK):** L-shaped or U-shaped\\n **Large House (4BHK+):** U-shaped or Island\\n\\n**Pro Tip:** L-shaped kitchen is most versatile - works in most house sizes and budgets"},{"id":"form_filling_tips","question_variants":["form filling tips","form tips","best practices form","form filling guide","form kaise bhare","form tips batao","form filling help","form guide","form filling best practices","form tips and tricks","form filling do dont","form bhar ke tips","form filling advice","form completion tips"],"answer":"**Form Filling - Pro Tips:**\\n\\n** ALWAYS DO:**\\n Fill all mandatory fields completely\\n Double-check measurements and numbers\\n Upload clear, well-lit photos\\n Be honest about budget constraints\\n Mention special requirements clearly\\n Save draft before submitting\\n\\n** NEVER DO:**\\n Leave required fields empty\\n Guess measurements or costs\\n Upload blurry or dark photos\\n Set unrealistic budgets\\n Hide important site conditions\\n Submit without reviewing\\n\\n**Photo Upload Tips:**\\n Take photos in good daylight\\n Show all 4 sides of plot\\n Include any existing structures\\n Show road access and surroundings\\n Max 5MB per photo, JPG/PNG format\\n\\n**Pro Tip:** Complete profile first, then create request - architects trust complete profiles more!"},{"id":"construction_process_stages","question_variants":["construction process","building process","construction stages","building stages","construction steps","building steps","construction sequence","building sequence","construction process kya hai","building process batao","construction stages kya hai","construction process enthaanu","building stages parayamo","construction steps enthanu","how construction works","construction workflow","building workflow","construction timeline","construction phases","building phases","construction methodology","building methodology","construction procedure","building procedure","house construction process","home construction process","veedu paniyan process","construction engane nadakum","building process ariyilla"],"answer":"**Construction Process - Step by Step:**\\n\\n**Phase 1: Planning (1-2 months)**\\n Site survey and soil testing\\n Architectural design and approvals\\n Structural design and permits\\n Material planning and costing\\n\\n**Phase 2: Foundation (1-2 months)**\\n Excavation and foundation laying\\n Plumbing and electrical groundwork\\n Foundation curing and backfilling\\n\\n**Phase 3: Structure (3-4 months)**\\n Column and beam construction\\n Slab casting and curing\\n Wall construction and plastering\\n\\n**Phase 4: Finishing (2-3 months)**\\n Electrical and plumbing installation\\n Flooring, painting, and fixtures\\n Final inspections and handover\\n\\n**Total Time:** 8-12 months for average house"},{"id":"architect_selection_help","question_variants":["how to choose architect","architect selection","best architect","good architect","architect kaise choose kare","architect selection help","architect kaise select kare","architect enthaanu","architect engane select cheyyam","good architect engane kaanam","architect qualifications","architect experience","architect portfolio","architect ratings","architect fees","architect charges","architect cost","architect price","architect vs contractor","architect vs builder","architect necessity","architect importance","do i need architect","architect required","architect benefits","architect services","architect ariyilla","architect venamoo","architect engane select cheyyam"],"answer":"**How to Choose the Right Architect:**\\n\\n** Check These:**\\n Valid license and registration\\n 5+ years experience in residential projects\\n Portfolio of similar-sized houses\\n Good client reviews and ratings\\n Clear communication and responsiveness\\n Reasonable fees (8-12% of construction cost)\\n\\n** Avoid These:**\\n No proper license or credentials\\n Only commercial experience\\n No portfolio or references\\n Poor communication or delays\\n Extremely low or high fees\\n No written agreement\\n\\n**Questions to Ask:**\\n How many houses have you designed?\\n Can I see your recent projects?\\n What's included in your fee?\\n How long will design take?\\n Do you help with approvals?\\n\\n**Pro Tip:** Choose architect based on portfolio similarity to your dream house, not just low price!"},{"id":"construction_materials_guide","question_variants":["construction materials","building materials","house materials","construction material list","materials needed","building material list","construction materials kya chahiye","building materials batao","construction materials list","house building materials","construction materials enthaanu","building materials enthanu","materials ethrayanu","cement","steel","bricks","sand","aggregate","tiles","paint","wood","material quality","material brands","material cost","material prices","best materials","good materials","material selection","material planning","eco friendly materials","sustainable materials","green building materials","materials engane select cheyyam","best materials enthanu","materials list parayamo"],"answer":"**Essential Construction Materials:**\\n\\n**Structural Materials:**\\n **Cement:** OPC 53 grade (best for strength)\\n **Steel:** TMT bars Fe500 grade\\n **Bricks:** Red clay or AAC blocks\\n **Sand:** River sand (fine aggregate)\\n **Aggregate:** 20mm and 10mm stones\\n\\n**Finishing Materials:**\\n **Tiles:** Vitrified for floors, ceramic for walls\\n **Paint:** Exterior (weather-resistant), Interior (washable)\\n **Wood:** Teak/Sal for doors, plywood for furniture\\n **Electrical:** ISI marked wires and switches\\n **Plumbing:** CPVC pipes, branded fittings\\n\\n**Quality Tips:**\\n Buy from authorized dealers only\\n Check ISI/BIS certification marks\\n Don't compromise on structural materials\\n Compare prices from 3-4 suppliers\\n\\n**Budget Allocation:**\\n Structural materials: 40-50%\\n Finishing materials: 30-40%\\n Labor: 20-30%"},{"id":"loan_financing_help","question_variants":["home loan","construction loan","house loan","building loan","loan for construction","loan kaise le","home loan kaise apply kare","construction loan process","loan enthaanu","home loan engane edukam","loan process enthanu","loan eligibility","loan documents","loan interest rate","loan amount","loan approval","loan processing","loan disbursement","loan EMI","bank loan","housing finance","loan against property","plot loan","loan requirements","loan criteria","loan application","loan procedure","loan engane kittum","home loan documents enthanu","loan eligibility ariyilla"],"answer":"**Home/Construction Loan Guide:**\\n\\n**Loan Types:**\\n **Plot + Construction Loan:** For land purchase + building\\n **Construction Loan:** Only for building on owned land\\n **Home Loan:** For ready-to-move houses\\n **Loan Against Property:** Using existing property as collateral\\n\\n**Eligibility Criteria:**\\n Age: 21-65 years\\n Income: 25,000+ per month (salaried)\\n Credit Score: 750+ (preferred)\\n Stable employment (2+ years)\\n\\n**Required Documents:**\\n Income proof (salary slips, ITR)\\n Identity and address proof\\n Property documents\\n Bank statements (6 months)\\n Construction estimates and approvals\\n\\n**Loan Features:**\\n **Amount:** Up to 80-90% of property value\\n **Interest Rate:** 8.5-11% per annum\\n **Tenure:** Up to 30 years\\n **Processing Fee:** 0.5-1% of loan amount\\n\\n**Pro Tip:** Compare rates from 3-4 banks, negotiate processing fees, maintain good credit score!"},{"id":"common_construction_problems","question_variants":["construction problems","building problems","construction issues","building issues","construction defects","building defects","construction mistakes","building mistakes","construction problems kya hai","building issues batao","construction defects","construction problems enthaanu","building issues enthanu","construction mistakes","water leakage","cracks in wall","poor construction","construction quality","construction delays","cost overrun","material issues","labor problems","contractor problems","architect problems","construction disputes","quality issues","construction problems engane solve cheyyam","building issues ariyilla","quality problems"],"answer":"**Common Construction Problems & Solutions:**\\n\\n**Quality Issues:**\\n **Water Leakage:** Poor waterproofing, use quality materials\\n **Wall Cracks:** Poor foundation/materials, get structural check\\n **Uneven Floors:** Poor leveling, use laser leveling\\n **Electrical Issues:** Poor wiring, use ISI marked materials\\n\\n**Project Management Issues:**\\n **Cost Overrun:** Poor planning, get detailed estimates\\n **Delays:** Weather/approvals, add buffer time\\n **Material Shortage:** Poor planning, order in advance\\n **Labor Issues:** Seasonal shortage, plan accordingly\\n\\n**Contractor/Architect Issues:**\\n **Poor Communication:** Set regular review meetings\\n **Quality Compromise:** Regular site inspections\\n **Payment Disputes:** Clear payment milestones\\n **Design Changes:** Document all changes\\n\\n**Prevention Tips:**\\n Hire experienced professionals\\n Regular site visits and inspections\\n Clear contracts and agreements\\n Don't compromise on structural quality\\n Keep 10-15% contingency budget\\n\\n**Pro Tip:** Prevention is better than cure - invest in good professionals and regular monitoring!"},{"id":"beginner_construction_guide","question_variants":["first time building house","new to construction","beginner construction guide","construction beginner","first house construction","new house builder","pehli baar ghar bana raha","construction me naya hun","beginner guide","first time construction enthaanu","construction beginner guide","new builder help","construction basics","house building basics","construction fundamentals","construction for dummies","construction 101","house building 101","construction guide for beginners","first time home builder","construction newbie","construction ariyilla","veedu paniyunnathu first time","construction basics parayamo"],"answer":"**Complete Beginner's Construction Guide:**\\n\\n**Step 1: Planning Phase (2-3 months)**\\n Finalize plot and get clear title\\n Set realistic budget (add 20% buffer)\\n Research and hire architect\\n Get soil test done\\n Apply for building approvals\\n\\n**Step 2: Design Phase (1-2 months)**\\n Discuss requirements with architect\\n Review and approve house design\\n Get structural drawings\\n Finalize material specifications\\n Get construction estimates\\n\\n**Step 3: Pre-Construction (1 month)**\\n Hire reliable contractor\\n Arrange financing/loans\\n Order materials in advance\\n Set up site facilities\\n Get construction insurance\\n\\n**Step 4: Construction (8-12 months)**\\n Regular site visits (weekly)\\n Monitor quality and progress\\n Make payments as per milestones\\n Handle any design changes\\n Prepare for final inspections\\n\\n**Beginner Tips:**\\n Don't rush - good planning saves money\\n Always get multiple quotes\\n Document everything in writing\\n Visit other construction sites\\n Join online construction communities\\n\\n**Pro Tip:** Your first house is a learning experience - focus on functionality over fancy features!"},{"id":"cost_saving_tips","question_variants":["cost saving tips","save money construction","reduce construction cost","budget construction","cheap construction","low cost construction","construction cost kaise kam kare","paisa kaise bachaye","budget me ghar","cost saving enthaanu","paisa engane save cheyyam","budget construction tips","affordable construction","economical construction","cost effective construction","construction cost reduction","money saving tips","budget friendly construction","low budget house","cost cutting construction","economical house building","paisa bachane ke tips","cost kam kaise kare","budget house construction"],"answer":"**Smart Cost Saving Tips:**\\n\\n**Design Optimization:**\\n Keep design simple and functional\\n Avoid too many corners and cuts\\n Plan compact layout\\n Minimize structural complexity\\n Use standard door/window sizes\\n\\n**Material Savings:**\\n Buy materials directly from manufacturers\\n Purchase in bulk during off-season\\n Use local materials to save transport\\n Choose cost-effective alternatives (AAC blocks vs bricks)\\n Negotiate with multiple suppliers\\n\\n**Construction Savings:**\\n Hire local skilled labor\\n Avoid construction during peak season\\n Do some work yourself (painting, landscaping)\\n Use prefab elements where possible\\n Plan electrical/plumbing efficiently\\n\\n**Smart Choices:**\\n Start with basic finishes, upgrade later\\n Use energy-efficient materials (long-term savings)\\n Plan for future expansion\\n Choose low-maintenance materials\\n Avoid frequent design changes\\n\\n**Potential Savings:**\\n Design optimization: 10-15%\\n Material procurement: 15-20%\\n Construction efficiency: 10-15%\\n **Total possible savings: 30-40%**\\n\\n**Pro Tip:** Don't compromise on structural quality - save on finishes, not foundation!"},{"id":"quality_control_tips","question_variants":["quality control","construction quality","quality check","quality assurance","quality control kya hai","construction quality kaise check kare","quality tips","quality control enthaanu","construction quality engane check cheyyam","quality assurance","construction inspection","quality monitoring","construction supervision","quality standards","construction quality control","building quality","quality check points","construction quality tips","quality management","good construction quality","quality construction","construction standards"],"answer":"**Construction Quality Control Guide:**\\n\\n**Foundation Quality Checks:**\\n Proper excavation depth and width\\n Correct concrete mix ratio (1:2:4)\\n Adequate steel reinforcement\\n Proper curing for 28 days\\n Level and alignment checks\\n\\n**Structural Quality Checks:**\\n Column and beam dimensions as per drawing\\n Correct steel placement and cover\\n Concrete slump test (75-100mm)\\n Proper vibration during casting\\n Water-cement ratio maintenance\\n\\n**Finishing Quality Checks:**\\n Wall plaster thickness (12-15mm)\\n Electrical points as per plan\\n Plumbing pressure testing\\n Tile alignment and level\\n Paint coverage and finish\\n\\n**Quality Control Schedule:**\\n **Daily:** Material quality, workmanship\\n **Weekly:** Progress vs plan, measurements\\n **Monthly:** Overall quality audit\\n **Milestone:** Professional inspection\\n\\n**Red Flags to Watch:**\\n Cracks in fresh concrete\\n Water seepage anywhere\\n Uneven surfaces\\n Poor material quality\\n Shortcuts in process\\n\\n**Pro Tip:** Hire independent quality inspector for major milestones - small cost, big peace of mind!"},{"id":"monsoon_construction_tips","question_variants":["monsoon construction","rainy season construction","construction in rain","monsoon me construction","barish me construction","rainy season building","monsoon construction enthaanu","mazha kaalath construction","rain construction tips","wet weather construction","construction during rains","monsoon building tips","rainy season precautions","monsoon construction problems","rain construction issues","construction rain protection","monsoon construction safety","rain weather construction"],"answer":"**Monsoon Construction Guidelines:**\\n\\n**What to AVOID During Monsoons:**\\n Fresh concrete work (poor quality)\\n Foundation excavation (water logging)\\n Brick/block laying (moisture issues)\\n Exterior painting (won't dry properly)\\n Electrical installations (safety risk)\\n\\n**What CAN BE DONE:**\\n Interior finishing work\\n Plumbing installations\\n Interior painting (with proper ventilation)\\n Planning and design work\\n Material procurement and storage\\n\\n**Monsoon Precautions:**\\n Cover all materials with tarpaulin\\n Ensure proper site drainage\\n Protect steel from rusting\\n Cover fresh concrete work\\n Maintain dry storage areas\\n\\n**Material Storage Tips:**\\n Cement: Store 6 inches above ground\\n Steel: Cover and keep dry\\n Bricks: Stack with proper drainage\\n Sand: Cover completely\\n Electrical items: Store in dry place\\n\\n**Emergency Measures:**\\n Have water pumps ready\\n Maintain emergency contact numbers\\n Keep site accessible\\n Regular inspection of temporary structures\\n\\n**Pro Tip:** Use monsoon time for interior work and planning - don't stop completely, just adapt!"},{"id":"technology_smart_home","question_variants":["smart home","home automation","smart house","technology in house","smart home kya hai","home automation batao","smart house features","smart home enthaanu","home automation enthanu","smart house engane cheyyam","smart switches","smart lights","smart security","smart appliances","home automation system","smart home technology","intelligent home","connected home","IoT home","smart home devices","home automation cost","smart home installation","smart home benefits","smart home planning"],"answer":"**Smart Home Technology Guide:**\\n\\n**Basic Smart Home Features:**\\n **Smart Switches:** Control lights remotely (500-2000 each)\\n **Smart Lights:** Color changing, dimming (1000-3000 each)\\n **Smart Security:** Cameras, door locks (5000-20000)\\n **Smart Thermostat:** AC control (3000-8000)\\n **Voice Assistants:** Alexa, Google Home (3000-10000)\\n\\n**Advanced Features:**\\n **Smart Curtains:** Automated opening/closing\\n **Smart Irrigation:** Garden watering system\\n **Smart Doorbell:** Video calling feature\\n **Smart Appliances:** Refrigerator, washing machine\\n **Energy Monitoring:** Track power consumption\\n\\n**Planning During Construction:**\\n Extra electrical points for devices\\n Strong WiFi coverage throughout\\n Central control panel location\\n Conduits for future wiring\\n Adequate power backup\\n\\n**Cost Breakdown:**\\n **Basic Setup:** 50,000-1,00,000\\n **Advanced Setup:** 1,00,000-3,00,000\\n **Luxury Setup:** 3,00,000+\\n\\n**Benefits:**\\n Energy savings (20-30%)\\n Enhanced security\\n Convenience and comfort\\n Increased property value\\n\\n**Pro Tip:** Start with basic features and expand gradually - technology keeps evolving!"},{"id":"house_plan_drawing_feature","question_variants":["house plan drawing","custom house plan","draw house plan","house plan designer","house plan kaise banaye","house plan drawing tool","custom house design","house plan drawing feature","interactive house plan","house plan creator","house plan drawing enthaanu","house plan engane draw cheyyam","house plan designer tool","room placement","drag and drop rooms","house layout design","floor plan creator","house plan drawing help","custom floor plan","interactive floor plan","house design tool","architect house plan","house plan submission","house plan approval","house plan review"],"answer":"**House Plan Drawing Feature - BuildHub's Interactive Designer:**\\n\\n**What is it?**\\n Interactive drag-and-drop house plan designer\\n Create custom floor plans by placing rooms\\n Real-time area calculations and measurements\\n Professional architectural visualization\\n\\n**How to Use:**\\n1. **Access:** Go to Architect Dashboard  'House Plan Designer'\\n2. **Setup:** Enter plot dimensions and scale\\n3. **Design:** Drag rooms from template library onto plot\\n4. **Customize:** Resize rooms, adjust positions\\n5. **Review:** Check total area and room distribution\\n6. **Submit:** Send to homeowner for approval\\n\\n**Key Features:**\\n **14 Room Templates:** Bedroom, Kitchen, Living Room, Bathroom, etc.\\n **Dual Measurements:** Layout view + Construction dimensions\\n **Smart Scaling:** Automatic scale ratio conversion\\n **Undo/Redo:** 50-step history with Ctrl+Z/Ctrl+Y\\n **Interactive Tour:** Built-in help and guidance\\n **Real-time Validation:** Area calculations and space optimization\\n\\n**Room Templates Available:**\\n Master Bedroom,  Bedroom,  Kitchen,  Bathroom,  Living Room,  Dining Room,  Study Room,  Pooja Room,  Store Room,  Parking,  Balcony,  Entrance,  Garden,  Utility Room\\n\\n**Pro Tip:** Start with main rooms (bedrooms, kitchen, living) then add secondary spaces. Use the tour feature for step-by-step guidance!"},{"id":"geo_tagged_photos_feature","question_variants":["geo tagged photos","gps photos","location photos","construction photos with location","geo photo capture","gps photo capture","location based photos","geo tagged images","geo photos kya hai","gps photos kaise le","location photos help","geo tagged photos help","geo photos enthaanu","gps photos engane edukam","location photos enthanu","construction site photos","progress photos with gps","geo location photos","tagged photos","photo with coordinates","gps coordinates on photos","location stamped photos","geo photo system","contractor photos","site documentation photos","progress documentation","geo photo capture help"],"answer":"**Geo-Tagged Photos Feature - GPS-Enabled Construction Documentation:**\\n\\n**What is it?**\\n Photos automatically tagged with GPS coordinates\\n Real-time location embedding on images\\n Professional construction progress documentation\\n Secure photo sharing between contractor and homeowner\\n\\n**How Contractors Use It:**\\n1. **Access:** Go to 'Construction Progress Update' section\\n2. **Capture:** Click 'Take Geo Photo' button\\n3. **Location:** Allow GPS access for automatic tagging\\n4. **Review:** See coordinates displayed on photo overlay\\n5. **Submit:** Include in progress reports to homeowner\\n\\n**Key Features:**\\n **Automatic GPS Tagging:** Latitude/longitude embedded in photos\\n **Visual Coordinates:** Bright overlay showing exact location\\n **Address Resolution:** Automatic address lookup from coordinates\\n **Progress Integration:** Photos linked to specific progress updates\\n **Secure Storage:** Encrypted photo storage and sharing\\n **Homeowner Access:** View all site photos with location data\\n\\n**Coordinate Display:**\\n **Green Text:** Latitude coordinates\\n **Cyan Text:** Longitude coordinates\\n **White Background:** High contrast for visibility\\n **Dual Display:** Main overlay + summary box\\n\\n**Benefits:**\\n **Proof of Work:** Verify work done at correct location\\n **Progress Tracking:** Visual timeline of construction\\n **Quality Assurance:** Document issues with exact location\\n **Legal Protection:** GPS-verified work documentation\\n **Remote Monitoring:** Homeowners can track progress remotely\\n\\n**Pro Tip:** Take photos in good daylight for best coordinate visibility. GPS coordinates help resolve any disputes about work location!"},{"id":"progress_reports_feature","question_variants":["progress reports","construction progress","progress tracking","project progress","progress reports kya hai","construction progress kaise dekhe","progress tracking help","progress reports enthaanu","construction progress engane check cheyyam","progress reports help","contractor progress","homeowner progress","progress updates","construction updates","progress report generation","progress report viewing","progress report system","construction progress reports","project status reports","work progress reports","progress documentation","construction tracking","project monitoring","progress report feature"],"answer":"**Progress Reports Feature - Comprehensive Construction Tracking:**\\n\\n**What is it?**\\n Detailed construction progress documentation system\\n Real-time updates from contractors to homeowners\\n Photo-rich progress reports with timelines\\n Milestone tracking and completion verification\\n\\n**For Contractors:**\\n1. **Generate Reports:** Go to 'Progress Report Generator'\\n2. **Document Work:** Add photos, descriptions, completion %\\n3. **Include Geo Photos:** Attach GPS-tagged construction photos\\n4. **Set Milestones:** Mark completed phases and upcoming work\\n5. **Send to Homeowner:** Submit for review and approval\\n\\n**For Homeowners:**\\n1. **View Reports:** Go to 'Progress Reports' in dashboard\\n2. **Review Updates:** See latest construction status\\n3. **Check Photos:** View geo-tagged site photos\\n4. **Track Timeline:** Monitor project milestones\\n5. **Communicate:** Message contractor about progress\\n\\n**Report Components:**\\n **Work Completed:** Detailed description of finished tasks\\n **Photo Documentation:** Before/after images with GPS data\\n **Completion Percentage:** Overall project progress\\n **Timeline Updates:** Revised completion dates\\n **Material Usage:** Consumption tracking\\n **Quality Checks:** Inspection results and approvals\\n **Next Steps:** Upcoming work and requirements\\n\\n**Key Features:**\\n **Visual Timeline:** Progress tracking with photos\\n **Milestone Alerts:** Notifications for major completions\\n **Quality Verification:** Photo evidence of work quality\\n **Communication Hub:** Direct messaging between parties\\n **Document Storage:** All reports saved for reference\\n **Mobile Friendly:** Access from any device\\n\\n**Benefits:**\\n **Transparency:** Clear visibility into construction progress\\n **Quality Assurance:** Photo documentation of all work\\n **Timeline Management:** Track delays and accelerations\\n **Remote Monitoring:** Stay updated without site visits\\n **Dispute Resolution:** Photo evidence for any issues\\n\\n**Pro Tip:** Check progress reports weekly and communicate promptly with contractors about any concerns!"},{"id":"enhanced_dashboard_features","question_variants":["new dashboard features","enhanced dashboard","dashboard updates","new features dashboard","dashboard new features kya hai","enhanced dashboard help","dashboard improvements","dashboard new features enthaanu","dashboard enhancements enthanu","new dashboard help","notification system","message center","inbox messages","dashboard notifications","toast notifications","notification badges","message alerts","dashboard alerts","enhanced navigation","improved dashboard","dashboard upgrades","new dashboard tools","dashboard feature updates","latest dashboard features","dashboard enhancements help"],"answer":"**Enhanced Dashboard Features - Latest BuildHub Updates:**\\n\\n**New Notification System:**\\n **Toast Notifications:** Instant pop-up alerts for quick actions\\n **Inbox Messages:** Persistent messages for important updates\\n **Notification Badges:** Red dots showing unread count\\n **Smart Alerts:** Context-aware notifications based on activity\\n\\n**Message Center Improvements:**\\n **Unified Inbox:** All messages in one place\\n **Message Categories:** Architect messages, system alerts, progress updates\\n **Read/Unread Status:** Clear tracking of message status\\n **Quick Actions:** Reply, mark read, delete from inbox\\n **Search Function:** Find specific messages quickly\\n\\n**Enhanced Navigation:**\\n **Quick Access Buttons:** One-click access to common actions\\n **Breadcrumb Navigation:** Always know where you are\\n **Mobile Optimization:** Perfect experience on all devices\\n **Keyboard Shortcuts:** Power user features (Ctrl+Z, Delete key)\\n **Context Menus:** Right-click options for advanced users\\n\\n**Interactive Help System:**\\n **Built-in Tours:** Step-by-step guidance for new features\\n **Smart Help:** Context-sensitive help suggestions\\n **Search Help:** Find answers to specific questions\\n **Video Tutorials:** Visual learning for complex features\\n **Progressive Disclosure:** Show advanced features when ready\\n\\n**Notification Strategy:**\\n **Plan Saved:** Toast notification only (quick feedback)\\n **Plan Submitted:** Inbox message + toast (important action)\\n **Progress Updates:** Inbox message with photo count\\n **System Alerts:** Toast for immediate attention\\n\\n**Pro Tip:** Enable browser notifications to get real-time alerts even when BuildHub is not open!"},{"id":"buildhub_platform_features","question_variants":["buildhub features","platform features","buildhub capabilities","what can buildhub do","buildhub kya kar sakta hai","platform features kya hai","buildhub help","buildhub enthaanu","buildhub features enthanu","platform capabilities","buildhub services","buildhub tools","buildhub functionality","platform tools","buildhub system","construction platform","building platform","architecture platform","buildhub complete guide","platform overview","buildhub benefits","why use buildhub"],"answer":"**BuildHub Platform - Complete Construction Solution:**\\n\\n**Core Features:**\\n **Request Management:** Create detailed construction requests\\n **Architect Matching:** Connect with verified architects\\n **Proposal System:** Compare multiple architect proposals\\n **Project Tracking:** Monitor construction progress\\n **Communication Hub:** Direct messaging with professionals\\n **Payment Integration:** Secure milestone-based payments\\n\\n**Advanced Features:**\\n **House Plan Designer:** Interactive drag-and-drop floor plan creator\\n **Geo-Tagged Photos:** GPS-enabled construction documentation\\n **Progress Reports:** Detailed construction tracking with photos\\n **Quality Assurance:** Photo-verified work completion\\n **Timeline Management:** Milestone tracking and alerts\\n **Document Storage:** All project files in one place\\n\\n**For Homeowners:**\\n Submit construction requirements easily\\n Compare architect proposals side-by-side\\n Track construction progress remotely\\n Communicate directly with architects/contractors\\n Make secure payments based on milestones\\n Access all project documents anytime\\n\\n**For Architects:**\\n Receive qualified construction leads\\n Create interactive house plans\\n Submit professional proposals\\n Manage multiple projects efficiently\\n Generate detailed progress reports\\n Build portfolio and client reviews\\n\\n**For Contractors:**\\n Document work with geo-tagged photos\\n Submit progress reports with evidence\\n Communicate with homeowners directly\\n Track project milestones and payments\\n Build reputation through quality work\\n\\n**Platform Benefits:**\\n **Transparency:** All parties see same information\\n **Quality Control:** Photo documentation of all work\\n **Efficiency:** Streamlined communication and processes\\n **Security:** Verified professionals and secure payments\\n **Convenience:** Access from any device, anywhere\\n\\n**Pro Tip:** BuildHub handles the entire construction journey from initial request to final handover - everything in one platform!"},{"id":"project_terminology_buildhub","question_variants":["buildhub terms","construction terms buildhub","platform terminology","buildhub vocabulary","buildhub words meaning","platform terms kya hai","buildhub terminology help","buildhub terms enthaanu","platform words enthanu","buildhub glossary","construction terminology","building terms","architecture terms","project terms","technical terms buildhub","platform definitions","buildhub dictionary","construction vocabulary","building vocabulary","project vocabulary","construction glossary","building glossary"],"answer":"**BuildHub Terminology - Key Terms Explained:**\\n\\n**Project Terms:**\\n **Request:** Your construction requirement submission\\n **Proposal:** Architect's response with design and quote\\n **Active Project:** Ongoing construction work\\n **Milestone:** Key completion points in construction\\n **Progress Update:** Regular work status reports\\n **Handover:** Final project completion and delivery\\n\\n**User Roles:**\\n **Homeowner:** Person building the house (you!)\\n **Architect:** Professional who designs your house\\n **Contractor:** Person who builds/constructs your house\\n **Admin:** BuildHub support team\\n\\n**Feature Terms:**\\n **House Plan Designer:** Interactive floor plan creation tool\\n **Geo-Tagged Photos:** GPS-enabled construction photos\\n **Progress Reports:** Detailed construction status updates\\n **Message Center:** Communication hub for all parties\\n **Notification System:** Alert system for important updates\\n\\n**Technical Terms:**\\n **Plot Size:** Your land dimensions (length  width)\\n **Built-up Area:** Total floor area of your house\\n **BHK:** Bedroom-Hall-Kitchen (house type)\\n **Sqft:** Square feet (area measurement)\\n **Layout Dimensions:** Visual representation measurements\\n **Construction Dimensions:** Actual building measurements\\n **Scale Ratio:** Conversion factor between layout and construction\\n\\n**Process Terms:**\\n **Request Submission:** Sending your construction requirements\\n **Proposal Review:** Comparing architect offers\\n **Project Initiation:** Starting construction work\\n **Progress Tracking:** Monitoring construction status\\n **Quality Verification:** Checking work completion\\n **Final Approval:** Accepting completed work\\n\\n**Pro Tip:** Don't worry about technical terms - BuildHub explains everything in simple language!"}]`);function wp(t){return t.toLowerCase().replace(/[^\w\s]/g," ").replace(/\s+/g," ").trim().replace(/\b(wat|wht|whats|wats)\b/g,"what").replace(/\b(kaise|kese|kse|kyse)\b/g,"how").replace(/\b(batao|bata|samjhao|btao|bataye)\b/g,"tell").replace(/\b(chahiye|chaiye|chaye|chahye|chayiye)\b/g,"need").replace(/\b(kitna|kitne|ktna|ktne)\b/g,"how much").replace(/\b(kya|kya hai|kya h|kya he)\b/g,"what").replace(/\b(help|halp|hlp|hepl)\b/g,"help").replace(/\b(dont no|dont know|not no|dont knw|dnt know)\b/g,"dont know").replace(/\b(bilding|bulding|buidling|buiding)\b/g,"building").replace(/\b(budjet|buget|budgt|bujget)\b/g,"budget").replace(/\b(bedrom|bed room|bedrm|bedrooms)\b/g,"bedroom").replace(/\b(bathrom|bath room|bathrm|washrom)\b/g,"bathroom").replace(/\b(kitchn|kichen|kithen)\b/g,"kitchen").replace(/\b(plz|pls|please)\b/g,"please").replace(/\b(u|ur|urs)\b/g,"you").replace(/\b(n|nd)\b/g,"and").replace(/\b(r|are)\b/g,"are").replace(/\b(2|to|too)\b/g,"to").replace(/\b(4|for|fr)\b/g,"for").replace(/\b(enthaanu|enthanu|enthu)\b/g,"what").replace(/\b(engane|engne|enganeyanu)\b/g,"how").replace(/\b(parayamo|parayam|parayan)\b/g,"tell").replace(/\b(venam|veno|venamoo)\b/g,"need").replace(/\b(ethrayanu|ethra|ethre)\b/g,"how much").replace(/\b(ariyilla|ariyila|ariyillallo)\b/g,"dont know").replace(/\b(tharo|tharumo|tharamo)\b/g,"give").replace(/\b(cheyyam|cheyyamo|cheyyaamo)\b/g,"do").replace(/\b(kittum|kittumoo|kittamo)\b/g,"get").replace(/\b(veedu|veed)\b/g,"house").replace(/\b(paniyan|paniyaan|pani)\b/g,"construction").replace(/\b(paisa|paisayanu|panam)\b/g,"money").replace(/\b(mazha|mazhakalam|mazhakaalam)\b/g,"rain").replace(/\b(kaalath|kaalam|samayam)\b/g,"time").replace(/\b(edukam|edukamo|edukkam)\b/g,"take").replace(/\b(select|choose|kaanam)\b/g,"select").replace(/\b(solve|theerkam|theerkkam)\b/g,"solve").replace(/\b(nadakum|nadakkum|sambhavikkum)\b/g,"happen")}function hu(t){const a=wp(t),s=[];return/\b(plot|land|site|area|size|dimension|measure)\b/.test(a)&&s.push("plot"),/\b(budget|cost|price|money|expense|paisa|rupee|lakh|crore)\b/.test(a)&&s.push("budget"),/\b(room|bedroom|bhk|hall|kitchen|bathroom|toilet)\b/.test(a)&&s.push("rooms"),/\b(floor|storey|story|level|ground|first)\b/.test(a)&&s.push("floors"),/\b(parking|garage|car|vehicle)\b/.test(a)&&s.push("parking"),/\b(material|cement|steel|brick|sand|construction)\b/.test(a)&&s.push("materials"),/\b(design|style|architecture|plan|layout)\b/.test(a)&&s.push("design"),/\b(vastu|direction|east|west|north|south)\b/.test(a)&&s.push("vastu"),/\b(dashboard|navigate|click|button|where|section|menu)\b/.test(a)&&s.push("navigation"),/\b(request|create|submit|form|new)\b/.test(a)&&s.push("request"),/\b(proposal|architect|quote|estimate)\b/.test(a)&&s.push("proposals"),/\b(message|chat|talk|contact|communication)\b/.test(a)&&s.push("messaging"),/\b(upload|document|photo|file|image)\b/.test(a)&&s.push("upload"),/\b(payment|pay|bill|invoice|transaction)\b/.test(a)&&s.push("payment"),/\b(how|kaise|method|way|process)\b/.test(a)&&s.push("how_to"),/\b(what|kya|meaning|definition|explain)\b/.test(a)&&s.push("what_is"),/\b(where|kaha|location|find|search)\b/.test(a)&&s.push("where_is"),/\b(help|assist|guide|support|madad)\b/.test(a)&&s.push("help"),s}function V6(t,a){const s=wp(t),i=wp(a);if(s===i)return 1;if(s.includes(i)||i.includes(s)){const v=s.length>i.length?s:i;return(s.length<=i.length?s:i).length/v.length*.95}const o=hu(s),l=hu(i),d=o.filter(v=>l.includes(v));if(d.length>0){const v=d.length/Math.max(o.length,l.length)*.8;if(v>.4)return v}const u=s.split(" ").filter(v=>v.length>2),A=i.split(" ").filter(v=>v.length>2),p=["plot","budget","room","bedroom","bathroom","kitchen","floor","parking","cost","price","size","area","design","material","dashboard","request","proposal","architect","upload","payment"];let m=0,b=0;if(u.forEach(v=>{const x=p.includes(v)?2:1;b+=x,A.includes(v)?m+=x:A.find(D=>D.includes(v)||v.includes(D))&&(m+=x*.7)}),b>0){const v=m/b*.7;if(v>.3)return v}return $6(s,i)*.6}function $6(t,a){if(t.length===0)return a.length===0?1:0;if(a.length===0)return 0;const s=Array(t.length+1).fill().map(()=>Array(a.length+1).fill(0));for(let l=0;l<=t.length;l++)s[l][0]=l;for(let l=0;l<=a.length;l++)s[0][l]=l;for(let l=1;l<=t.length;l++)for(let d=1;d<=a.length;d++){const u=t[l-1]===a[d-1]?0:1;s[l][d]=Math.min(s[l-1][d]+1,s[l][d-1]+1,s[l-1][d-1]+u)}const i=s[t.length][a.length],o=Math.max(t.length,a.length);return o===0?1:Math.max(0,(o-i)/o)}function W6(t,a,s){if(t.length===0)return null;if(t.sort((o,l)=>l.confidence-o.confidence),t[0].confidence>.8)return t[0];a.askedAbout;const i=hu(s);for(const o of t){const l=hu(o.entry.answer);if(i.filter(u=>l.some(A=>A.includes(u)||u.includes(A))).length>0&&o.confidence>.5)return o}return t[0]}function Y6(t,a={}){const s=wp(t);if(s.length<2)return{reply:"I didn't catch that. Could you ask me something specific about construction? For example: 'plot size help', 'budget planning', 'room requirements', or 'dashboard navigation'.",askFeedback:!1,topicId:"unclear"};if(/\b(hi|hello|hey|namaste|helo|hii|good morning|good afternoon|good evening)\b/.test(s)){const d=["Hello!  I'm your BuildHub construction assistant. I can help with plot planning, budget estimation, room layouts, and using our platform. What would you like to know?","Hi there!  Ready to build your dream home? I can guide you through plot size, budget planning, room requirements, or help you navigate the dashboard. What interests you?","Hey! Welcome to BuildHub!  I'm here to make your construction journey smooth. Ask me about anything - from technical details to using our platform!","Namaste!  I'm your construction planning assistant. Whether you need help with measurements, costs, designs, or using our website, I'm here to help!"];return{reply:d[Math.floor(Math.random()*d.length)],askFeedback:!1,topicId:"greeting"}}if(/\b(thank|thanks|thx|dhanyawad|shukriya|appreciate)\b/.test(s)){const d=["You're very welcome!  Happy to help with your construction project. Any other questions?","My pleasure!  Building a home is exciting - I'm here whenever you need guidance!","Glad I could help!  Feel free to ask more about construction planning or using our platform.","You're welcome!  I love helping people build their dream homes. What else can I assist with?"];return{reply:d[Math.floor(Math.random()*d.length)],askFeedback:!1,topicId:"thanks"}}const i=[];G6.forEach(d=>{let u=0;d.question_variants.forEach(A=>{const p=V6(s,A);p>u&&(u=p)}),u>.3&&i.push({entry:d,confidence:u})});const o=W6(i,a,t);if(o&&o.confidence>.4)return{reply:o.entry.answer,askFeedback:!0,topicId:o.entry.id,confidence:o.confidence};const l=hu(s);return l.includes("help")?{reply:`I'm here to help!  I can assist with:

 **Construction Planning:**
 Plot size and measurements
 Budget estimation and costs
 Room planning (bedrooms, bathrooms, kitchen)
 House designs and styles
 Materials and construction process

 **Platform Navigation:**
 Creating and managing requests
 Viewing architect proposals
 Dashboard navigation
 Document uploads
 Messaging architects

What specific help do you need?`,askFeedback:!0,topicId:"help_comprehensive"}:l.includes("navigation")||l.includes("dashboard")?{reply:`I can help you navigate the BuildHub platform! 

**Quick Navigation Guide:**
 **Create Request** - Big blue button on dashboard
 **My Requests** - See all your submitted requests
 **Proposals** - View architect quotes and designs
 **Messages** - Chat with architects
 **Profile** - Update your details

What specific section do you need help finding?`,askFeedback:!0,topicId:"navigation_help"}:l.includes("budget")||l.includes("cost")?{reply:`I can help with budget planning! 

Construction costs typically range 1,500-3,000 per sqft depending on:
 Location and local rates
 Quality of materials
 Design complexity
 Number of floors

For accurate estimates, submit your request and architects will provide detailed quotes. What specific budget question do you have?`,askFeedback:!0,topicId:"budget_general"}:{reply:`I want to help you, but I'm not sure what you're asking about. 

**Try asking me about:**
 "How to measure plot size"
 "Construction budget help"
 "Room planning guide"
 "Dashboard navigation"
 "Create new request"
 "Upload documents"

Or just tell me what you're trying to do - I'll do my best to help! `,askFeedback:!0,topicId:"clarification_needed"}}const Db="request_assistant_consent",Ib={from:"bot",text:"Hi there!  I'm your intelligent BuildHub assistant! I can help you with construction planning, using our platform, and connecting with architects. I learn from our conversation to give you better answers. Just ask me anything! ",askFeedback:!1,suggestions:["Hi!","How to create request?","Budget help","Dashboard navigation"]};function J6({userId:t,pageContext:a="request"}){const[s,i]=w.useState(!1),[o,l]=w.useState(""),[d,u]=w.useState([Ib]),[A,p]=w.useState(!1),[m,b]=w.useState(null),[v,x]=w.useState({askedAbout:[],preferences:{},sessionQuestions:0,conversationHistory:[],lastTopics:[],userIntents:[]}),C=w.useRef(null),D=w.useMemo(()=>`chat-${Date.now()}-${Math.random().toString(36).slice(2,8)}`,[]);w.useEffect(()=>{localStorage.getItem(Db)!=="yes"&&localStorage.setItem(Db,"yes")},[]),w.useEffect(()=>{C.current&&C.current.scrollIntoView({behavior:"smooth",block:"end"})},[d]);async function S({message:X,response:U,feedback:E=null,confidence:Y=null}){try{await fetch("/buildhub/backend/api/chatbot/log_interaction.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:t||null,conversation_id:D,question:X,response:U,feedback:E,confidence:Y,context:v,intent:null,response_time:null})})}catch{}}function _(X,U,E){const Y=[],{askedAbout:T,sessionQuestions:Q,lastTopics:q}=U,ne={plot_size_basic:["Convert feet to meters","Irregular plot help","Plot area calculation"],budget_help:["Per sqft cost","Material cost breakdown","Budget planning tips"],rooms_bedrooms:["Bathroom planning","Kitchen design","Storage planning"],dashboard_main_navigation:["Create new request","View proposals","Message architects"],create_request_button:["Fill request form","Upload documents","Submit request"],my_requests_section:["Check proposal status","View architect quotes","Edit request"],view_proposals_help:["Compare architects","Select proposal","Message architect"],upload_documents_help:["Photo requirements","Document types","File size limits"]};return X&&ne[X]&&Y.push(...ne[X].slice(0,2)),q.includes("plot_size_basic")&&!q.includes("budget_help")&&Y.push("Budget planning help"),q.includes("budget_help")&&!q.includes("rooms_bedrooms")&&Y.push("Room requirements"),q.includes("rooms_bedrooms")&&!q.includes("dashboard_main_navigation")&&Y.push("How to create request"),[{id:"plot_size_basic",text:"Plot size help",priority:1},{id:"budget_help",text:"Budget guidance",priority:1},{id:"dashboard_main_navigation",text:"Dashboard help",priority:2},{id:"create_request_button",text:"Create request",priority:2},{id:"rooms_bedrooms",text:"Room planning",priority:1},{id:"upload_documents_help",text:"Upload photos",priority:3}].filter(z=>!T.includes(z.id)).sort((z,ee)=>z.priority-ee.priority).slice(0,3-Y.length).forEach(z=>Y.push(z.text)),Q>4&&!Y.includes("Talk to architect")&&Y.push("Talk to architect"),Y.slice(0,3)}function N(X,U,E){x(Y=>{const T=[...Y.lastTopics,X].slice(-5),Q=[...Y.conversationHistory,{input:U,topic:X,confidence:E,timestamp:Date.now()}].slice(-10);return{...Y,askedAbout:[...new Set([...Y.askedAbout,X])],sessionQuestions:Y.sessionQuestions+1,lastTopics:T,conversationHistory:Q,preferences:{...Y.preferences,lastTopic:X,lastInput:U,averageConfidence:Q.reduce((q,ne)=>q+(ne.confidence||0),0)/Q.length}}})}function O(X){const U=(X||o).trim();if(!U)return;const E=Y6(U,v),Y=_(E.topicId,v);E.topicId&&N(E.topicId,U,E.confidence||0);const T={from:"bot",text:E.reply,ts:Date.now(),meta:E,suggestions:Y,askFeedback:!0,confidence:E.confidence};u(Q=>[...Q,{from:"user",text:U,ts:Date.now()},T]),b(E.normalized||null),l(""),S({message:U,response:E.reply,confidence:E.confidence})}function L(){u([Ib]),b(null),x({askedAbout:[],preferences:{},sessionQuestions:0,conversationHistory:[],lastTopics:[],userIntents:[]})}function te(X,U){const E=d[X];S({message:`feedback:${U}:${E?.text}`,response:"feedback",feedback:U,confidence:E?.confidence}),u(Y=>Y.map((Q,q)=>q===X?{...Q,feedback:U}:Q)),U==="down"?setTimeout(()=>{const Y=E?.confidence&&E.confidence<.6?"I wasn't very confident about that answer. Let me try to help better! Could you rephrase your question or be more specific about what you need?":"Sorry that didn't help! Would you like me to explain differently, or would you prefer to connect with an architect for personalized advice?";u(T=>[...T,{from:"bot",text:Y,ts:Date.now(),suggestions:["Explain differently","Talk to architect","Try new question"],askFeedback:!1}])},1e3):U==="up"&&setTimeout(()=>{const Y=["Great! I'm learning to help you better. What else would you like to know?","Awesome! I'm glad that was helpful. Any other questions about your construction project?","Perfect! I love helping with construction planning. What's next on your mind?"];u(T=>[...T,{from:"bot",text:Y[Math.floor(Math.random()*Y.length)],ts:Date.now(),suggestions:_(E?.meta?.topicId,v),askFeedback:!1}])},1500)}async function G(){if(!m)return;let X="";const{type:U,normalized:E}=m;if(U==="budget"&&(X=E.display||E.amount?.toString()),U==="plot"&&(E.width&&E.depth?X=`${E.width} x ${E.depth} ${E.unit}`:E.area&&(X=`${E.area} ${E.unit}`)),U==="rooms"&&(X=`${E.bhk} BHK`),U==="floors"&&(X=`${E.floors} floors`),!!X)try{await navigator.clipboard.writeText(X),u(Y=>[...Y,{from:"bot",text:"Copied! Paste it into the request form.",ts:Date.now()}])}catch{u(T=>[...T,{from:"bot",text:"Copy failed. You can manually paste.",ts:Date.now()}])}}return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"ra-floating-button",onClick:()=>i(!s),title:"Intelligent Assistant",children:""}),s&&e.jsxs("div",{className:"ra-panel",children:[e.jsxs("header",{className:"ra-header",children:[e.jsxs("div",{children:[e.jsx("div",{className:"ra-title",children:"Intelligent Assistant"}),e.jsx("div",{className:"ra-subtitle",children:"Smart answers that learn from our conversation"})]}),e.jsxs("div",{className:"ra-actions",children:[e.jsx("button",{className:"ra-clear",onClick:L,children:"Clear"}),e.jsx("button",{className:"ra-close",onClick:()=>i(!1),children:""})]})]}),e.jsxs("div",{className:"ra-search",children:[e.jsx("input",{value:o,onChange:X=>l(X.target.value),placeholder:"Ask anything about construction or our platform...",onKeyDown:X=>{X.key==="Enter"&&O()}}),e.jsx("button",{onClick:()=>O(),children:"Ask"})]}),e.jsxs("div",{className:"ra-messages",children:[d.map((X,U)=>e.jsxs("div",{className:`ra-message ${X.from}`,children:[e.jsx("div",{className:"ra-text",children:X.text}),X.from==="bot"&&X.confidence&&e.jsx("div",{className:"ra-confidence",title:`Confidence: ${Math.round(X.confidence*100)}%`,children:X.confidence>.8?"":X.confidence>.6?"":""}),X.from==="bot"&&X.meta?.quickOptions&&e.jsx("div",{className:"ra-quick-options",children:X.meta.quickOptions.map(E=>e.jsx("button",{onClick:()=>O(E),children:E},E))}),X.from==="bot"&&X.meta?.clarifier&&e.jsxs("div",{className:"ra-quick-options",children:[X.meta.options?.map(E=>e.jsx("button",{onClick:()=>O(E.label),children:E.label},E.label)),X.meta.escalation&&e.jsx("button",{onClick:()=>p(!0),children:"Connect to architect"})]}),X.from==="bot"&&X.meta?.normalized&&e.jsxs("div",{className:"ra-quick-options",children:[e.jsx("button",{onClick:G,children:"Copy to form"}),X.meta.normalized.type==="plot"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>O("convert to meters"),children:"Convert"}),e.jsx("button",{onClick:()=>O("keep feet"),children:"Keep ft"})]}),X.meta.normalized.type==="budget"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>O("total budget"),children:"Total"}),e.jsx("button",{onClick:()=>O("per sqft"),children:"Per sqft"})]})]}),X.from==="bot"&&X.suggestions&&X.suggestions.length>0&&e.jsxs("div",{className:"ra-suggestions",children:[e.jsx("div",{className:"ra-suggestions-label",children:"You might also ask:"}),e.jsx("div",{className:"ra-quick-options",children:X.suggestions.map((E,Y)=>e.jsx("button",{onClick:()=>O(E),children:E},Y))})]}),X.from==="bot"&&X.askFeedback&&e.jsxs("div",{className:"ra-feedback",children:[e.jsx("span",{children:"Was this helpful?"}),e.jsx("button",{className:X.feedback==="up"?"active":"",onClick:()=>te(U,"up"),title:"This was helpful",children:""}),e.jsx("button",{className:X.feedback==="down"?"active":"",onClick:()=>te(U,"down"),title:"This wasn't helpful",children:""})]})]},U)),e.jsx("div",{ref:C})]})]}),A&&e.jsx("div",{className:"ra-modal-backdrop",onClick:()=>p(!1),children:e.jsxs("div",{className:"ra-modal",onClick:X=>X.stopPropagation(),children:[e.jsx("div",{className:"ra-modal-title",children:"Connect to an architect?"}),e.jsx("p",{children:"Share your contact and we'll arrange a personalized consultation. Or keep chatting with me - I'm getting smarter!"}),e.jsxs("div",{className:"ra-modal-actions",children:[e.jsx("button",{onClick:()=>p(!1),children:"Keep chatting"}),e.jsx("button",{className:"primary",onClick:()=>p(!1),children:"Yes, connect me"})]})]})})]})}function X6(t){return Ko().pathname!=="/homeowner-dashboard"?null:e.jsx(J6,{...t})}function Z6(){const[t,a]=w.useState({request_id:"",homeowner_id:"",design_title:"",description:"",preview_image:null,layout_file:null,extra_files:[]}),[s,i]=w.useState(!1),[o,l]=w.useState([]),[d,u]=w.useState(null);w.useEffect(()=>{try{const v=sessionStorage.getItem("user");u(v?JSON.parse(v):null)}catch{}},[]);function A(v){const{name:x,value:C}=v.target;a(D=>({...D,[x]:C}))}function p(v,x){a(C=>({...C,[v]:x?.[0]||null}))}function m(v){a(x=>({...x,extra_files:Array.from(v||[])}))}async function b(v){if(v.preventDefault(),!t.design_title){toast.error("Please provide a Design Title");return}if(!t.preview_image||!t.layout_file){toast.error("Please attach both a Preview Image and a Layout File");return}i(!0);try{const x=new FormData;t.request_id&&x.append("request_id",t.request_id),t.homeowner_id&&x.append("homeowner_id",t.homeowner_id),x.append("design_title",t.design_title),t.description&&x.append("description",t.description),t.preview_image&&x.append("preview_image",t.preview_image),t.layout_file&&x.append("layout_file",t.layout_file);for(const S of t.extra_files)x.append("design_files[]",S);const D=await(await fetch("/buildhub/backend/api/architect/upload_design.php",{method:"POST",body:x})).json().catch(()=>({}));D?.success?(toast.success("Design uploaded successfully"),window.history.back()):toast.error(D?.message||"Upload failed")}catch{toast.error("Network error while uploading")}finally{i(!1)}}return e.jsxs("div",{className:"form-page",children:[e.jsxs("header",{className:"form-header",children:[e.jsx("h1",{children:"Upload Design"}),e.jsx("p",{children:"Submit your architectural design for a client request"})]}),e.jsxs("form",{id:"design-upload-form",className:"form-body",onSubmit:b,children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"label-lg",children:"Send To"}),e.jsxs("div",{className:"inline-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"label-sm",children:"By Request (optional)"}),e.jsxs("select",{name:"request_id",value:t.request_id,onChange:A,children:[e.jsx("option",{value:"",children:"Choose a client request"}),o.map(v=>e.jsx("option",{value:v.id,children:v.title||`Request #${v.id}`},v.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label-sm",children:"Direct Homeowner ID (optional)"}),e.jsx("input",{type:"number",name:"homeowner_id",placeholder:"e.g., 123",value:t.homeowner_id,onChange:A})]})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Design Title *"}),e.jsx("input",{type:"text",name:"design_title",placeholder:"e.g., Modern 3BHK Villa Design",value:t.design_title,onChange:A,required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Description"}),e.jsx("textarea",{name:"description",rows:5,placeholder:"Describe your design features, materials, and special considerations...",value:t.description,onChange:A})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"label-lg",children:"Design Files"}),e.jsxs("div",{className:"inline-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"label-sm",children:"Preview Image"}),e.jsx("input",{type:"file",accept:"image/*",onChange:v=>p("preview_image",v.target.files)}),t.preview_image&&e.jsxs("p",{className:"form-help",children:["Selected: ",t.preview_image.name]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label-sm",children:"Layout File (image/PDF/CAD)"}),e.jsx("input",{type:"file",onChange:v=>p("layout_file",v.target.files)}),t.layout_file&&e.jsxs("p",{className:"form-help",children:["Selected: ",t.layout_file.name]})]})]}),e.jsxs("div",{style:{marginTop:12},children:[e.jsx("label",{className:"label-sm",children:"Additional Files (optional)"}),e.jsx("input",{type:"file",multiple:!0,onChange:v=>m(v.target.files)}),!!t.extra_files.length&&e.jsxs("p",{className:"form-help",children:[t.extra_files.length," file(s) selected"]})]})]})]}),e.jsxs("footer",{className:"form-actions",children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>window.history.back(),children:"Cancel"}),e.jsx("button",{type:"submit",form:"design-upload-form",className:"btn btn-primary",disabled:s,children:s?"Uploading":"Upload Design"})]})]})}const eE=({isLoading:t})=>t?e.jsx("div",{className:"page-loader-overlay",children:e.jsxs("div",{className:"page-loader-container",children:[e.jsxs("div",{className:"page-loader-spinner",children:[e.jsx("div",{className:"spinner-ring"}),e.jsx("div",{className:"spinner-ring"}),e.jsx("div",{className:"spinner-ring"})]}),e.jsxs("div",{className:"page-loader-text",children:[e.jsx("h3",{children:"Loading..."}),e.jsx("p",{children:"Please wait while we prepare your dashboard"})]})]})}):null,tE=({children:t})=>{const[a,s]=w.useState(!1),[i,o]=w.useState(null),l=$i(),d=Ko();w.useEffect(()=>{s(!0),i&&clearTimeout(i);const A=setTimeout(()=>{s(!1)},1200);return o(A),()=>{A&&clearTimeout(A)}},[d.pathname]);const u=A=>{s(!0);const p=setTimeout(()=>{l(A),s(!1)},300);o(p)};return e.jsxs(e.Fragment,{children:[e.jsx(eE,{isLoading:a}),An.cloneElement(t,{navigateWithLoading:u})]})};function aE(){const t=$i(),a=Xn();w.useEffect(()=>{const v=document.querySelector(".hero h1"),x=document.querySelector(".hero p"),C=document.querySelector(".btn-group");setTimeout(()=>v.style.opacity="1",100),setTimeout(()=>x.style.opacity="1",600),setTimeout(()=>C.style.opacity="1",1100);const D=()=>{const X=window.pageYOffset,U=document.body.scrollHeight-window.innerHeight,E=X/U*100,Y=document.querySelector(".scroll-progress");Y&&(Y.style.width=E+"%")},S={threshold:.1,rootMargin:"0px 0px -50px 0px"},_=new IntersectionObserver(X=>{X.forEach(U=>{U.isIntersecting&&U.target.classList.add("visible")})},S);document.querySelectorAll(".features, .contact, .feature-card, .projects-gallery, .services-showcase, .team-section, .gallery-item, .service-item, .team-member").forEach(X=>{_.observe(X)});const O=document.createElement("div");O.className="scroll-progress",document.body.appendChild(O);const L=document.createElement("button");L.className="scroll-to-top",L.innerHTML="",L.setAttribute("aria-label","Scroll to top"),document.body.appendChild(L);const te=()=>{window.pageYOffset>300?(L.style.opacity="1",L.style.visibility="visible"):(L.style.opacity="0",L.style.visibility="hidden")},G=()=>{const X=document.querySelector(".hero-header");X&&(window.pageYOffset>50?X.classList.add("scrolled"):X.classList.remove("scrolled"))};return L.addEventListener("click",()=>{window.scrollTo({top:0,behavior:"smooth"})}),window.addEventListener("scroll",()=>{D(),te(),G(),i()}),()=>{window.removeEventListener("scroll",D),_.disconnect();const X=document.querySelector(".scroll-progress"),U=document.querySelector(".scroll-to-top");X&&X.remove(),U&&U.remove()}},[]);const s=v=>{document.getElementById(v)?.scrollIntoView({behavior:"smooth"}),p(v)},i=()=>{const v=["home","features","services","projects","team","contact"],x=window.scrollY+150;for(let C=v.length-1;C>=0;C--){const D=document.getElementById(v[C]);if(D&&D.offsetTop<=x){p(v[C]);break}}},o=v=>x=>{const C=x.currentTarget,D=document.createElement("span"),S=C.getBoundingClientRect(),_=Math.max(S.width,S.height),N=x.clientX-S.left-_/2,O=x.clientY-S.top-_/2;D.style.cssText=`
        position: absolute;
        width: ${_}px;
        height: ${_}px;
        left: ${N}px;
        top: ${O}px;
        background: rgba(255, 255, 255, 0.3);
        border-radius: 50%;
        transform: scale(0);
        animation: ripple 0.6s linear;
        pointer-events: none;
        z-index: 1;
      `,C.style.position="relative",C.style.overflow="hidden",C.appendChild(D),setTimeout(()=>{D.remove()},600),v&&v()};function l({end:v,label:x}){const[C,D]=w.useState(0);return w.useEffect(()=>{let S=null;const _=2e3;function N(O){S||(S=O);const L=O-S,te=Math.min(Math.floor(L/_*v),v);D(te),L<_&&requestAnimationFrame(N)}requestAnimationFrame(N)},[v]),e.jsxs("div",{className:"counter","aria-label":`${x} counter`,children:[C,"+",e.jsx("div",{style:{fontWeight:600,fontSize:"1rem",marginTop:"0.3rem"},children:x})]})}const[d,u]=w.useState(null),[A,p]=w.useState("home"),m=[{question:"How does BuildHub simplify construction planning?",answer:"BuildHub provides AI-powered tools and smart suggestions to make your project planning fast and effective."},{question:"Can I get accurate cost estimation?",answer:"Yes! Our platform offers detailed and transparent cost breakdowns to help you manage your budget."},{question:"Do you provide design assistance?",answer:"Absolutely. Get professional layouts and designs created by top architects tailored to your project."}],b=v=>{u(d===v?null:v)};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"side-panel",children:[e.jsx("div",{className:"panel-toggle",children:e.jsx("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M3 12h18m-9-9l9 9-9 9",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),e.jsxs("div",{className:"panel-content",children:[e.jsxs("div",{className:"panel-section",children:[e.jsx("h4",{children:"Quick Actions"}),e.jsxs("div",{className:"action-icons",children:[e.jsx("div",{className:"action-item",onClick:()=>s("home"),title:"Home",children:e.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M3 9l9-7 9 7v11a2 2 0 01-2 2H5a2 2 0 01-2-2z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("polyline",{points:"9,22 9,12 15,12 15,22",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})}),e.jsx("div",{className:"action-item",onClick:()=>s("services"),title:"Services",children:e.jsx("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),e.jsx("div",{className:"action-item",onClick:()=>s("projects"),title:"Projects",children:e.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2H5a2 2 0 00-2-2z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M8 21v-4a2 2 0 012-2h4a2 2 0 012 2v4",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})}),e.jsx("div",{className:"action-item",onClick:()=>s("team"),title:"Team",children:e.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M17 21v-2a4 4 0 00-4-4H5a4 4 0 00-4 4v2",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("circle",{cx:"9",cy:"7",r:"4",stroke:"currentColor",strokeWidth:"2"}),e.jsx("path",{d:"M23 21v-2a4 4 0 00-3-3.87m-4-12a4 4 0 010 7.75",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})}),e.jsx("div",{className:"action-item",onClick:()=>s("contact"),title:"Contact",children:e.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("polyline",{points:"22,6 12,13 2,6",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})})]})]}),e.jsxs("div",{className:"panel-section",children:[e.jsx("h4",{children:"Tools"}),e.jsxs("div",{className:"action-icons",children:[e.jsx("div",{className:"action-item",onClick:()=>a.info("Calculator coming soon!"),title:"Calculator",children:e.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("rect",{x:"4",y:"2",width:"16",height:"20",rx:"2",stroke:"currentColor",strokeWidth:"2"}),e.jsx("path",{d:"M8 6h8M8 10h8M8 14h4M8 18h4",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})}),e.jsx("div",{className:"action-item",onClick:()=>a.info("Estimator coming soon!"),title:"Cost Estimator",children:e.jsx("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M12 2v20M17 5H9.5a3.5 3.5 0 000 7h5a3.5 3.5 0 010 7H6",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),e.jsx("div",{className:"action-item",onClick:()=>a.info("Designer coming soon!"),title:"Design Tool",children:e.jsx("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),e.jsx("div",{className:"action-item",onClick:()=>a.info("Planner coming soon!"),title:"Project Planner",children:e.jsx("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})]})]}),e.jsxs("div",{className:"panel-section",children:[e.jsx("h4",{children:"Social"}),e.jsxs("div",{className:"action-icons",children:[e.jsx("div",{className:"action-item",onClick:()=>a.info("LinkedIn coming soon!"),title:"LinkedIn",children:e.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M16 8a6 6 0 016 6v7h-4v-7a2 2 0 00-2-2 2 2 0 00-2 2v7h-4v-7a6 6 0 016-6zM2 9h4v12H2z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("circle",{cx:"4",cy:"4",r:"2",stroke:"currentColor",strokeWidth:"2"})]})}),e.jsx("div",{className:"action-item",onClick:()=>a.info("Twitter coming soon!"),title:"Twitter",children:e.jsx("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M23 3a10.9 10.9 0 01-3.14 1.53 4.48 4.48 0 00-7.86 3v1A10.66 10.66 0 013 4s-4 9 5 13a11.64 11.64 0 01-7 2c9 5 20 0 20-11.5a4.5 4.5 0 00-.08-.83A7.72 7.72 0 0023 3z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),e.jsx("div",{className:"action-item",onClick:()=>a.info("Facebook coming soon!"),title:"Facebook",children:e.jsx("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M18 2h-3a5 5 0 00-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 011-1h3z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})]})]})]})]}),e.jsxs("header",{className:"hero-header",children:[e.jsxs("div",{className:"hero-logo",children:[e.jsx("div",{className:"logo-icon",children:e.jsx("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M3 21h18l-1-7H4l-1 7zM5 14h14l1-7H4l1 7zM9 3h6v4H9V3zM7 7h10v2H7V7z",fill:"currentColor"})})}),e.jsx("span",{className:"logo-text",children:"BuildHub"})]}),e.jsxs("nav",{className:"hero-nav",children:[e.jsx("a",{href:"#home",onClick:v=>{v.preventDefault(),s("home")},className:`nav-link ${A==="home"?"active":""}`,children:"Home"}),e.jsx("a",{href:"/login",onClick:v=>{v.preventDefault(),t("/login")},className:"nav-link login-link",children:"Login"}),e.jsx("a",{href:"#features",onClick:v=>{v.preventDefault(),s("features")},className:`nav-link ${A==="features"?"active":""}`,children:"About"}),e.jsx("a",{href:"#services",onClick:v=>{v.preventDefault(),s("services")},className:`nav-link ${A==="services"?"active":""}`,children:"Services"}),e.jsx("a",{href:"#projects",onClick:v=>{v.preventDefault(),s("projects")},className:`nav-link ${A==="projects"?"active":""}`,children:"Work"}),e.jsx("a",{href:"#team",onClick:v=>{v.preventDefault(),s("team")},className:`nav-link ${A==="team"?"active":""}`,children:"Team"}),e.jsx("a",{href:"#contact",onClick:v=>{v.preventDefault(),s("contact")},className:`nav-link ${A==="contact"?"active":""}`,children:"Contact"}),e.jsx("div",{className:"contact-info",children:e.jsx("span",{className:"phone-number",children:"7558-8956-67"})})]})]}),e.jsxs("section",{className:"hero",id:"home",role:"banner",children:[e.jsx("h1",{children:"BuildHub  Smart Construction Platform"}),e.jsx("p",{children:"Plan, estimate, and design your construction projects with ease."}),e.jsxs("div",{className:"btn-group",children:[e.jsx("button",{className:"primary",onClick:o(()=>t("/register")),children:"Get Started"}),e.jsx("button",{className:"secondary",onClick:o(()=>a.info("Learn more coming soon!")),children:"Learn More"})]})]}),e.jsxs("section",{className:"features",id:"features",role:"region","aria-label":"Features Section",children:[e.jsx("h2",{children:"Features"}),e.jsxs("div",{className:"features-grid",children:[e.jsxs("div",{className:"feature-card glass-card",children:[e.jsx("div",{className:"interactive-icon planning",children:e.jsx("div",{className:"icon-bg",children:e.jsx("svg",{className:"icon-svg",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M3 21h18l-1-7H4l-1 7zM5 14h14l1-7H4l1 7zM9 3h6v4H9V3zM7 7h10v2H7V7z",fill:"currentColor"})})})}),e.jsx("h3",{children:"Smart Planning"}),e.jsx("p",{children:"Plan your construction projects with advanced tools and AI-powered suggestions."})]}),e.jsxs("div",{className:"feature-card glass-card",children:[e.jsx("div",{className:"interactive-icon cost",children:e.jsx("div",{className:"icon-bg",children:e.jsx("svg",{className:"icon-svg",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z",fill:"currentColor"})})})}),e.jsx("h3",{children:"Cost Estimation"}),e.jsx("p",{children:"Accurate and transparent project cost breakdown to fit your budget."})]}),e.jsxs("div",{className:"feature-card glass-card",children:[e.jsx("div",{className:"interactive-icon design",children:e.jsx("div",{className:"icon-bg",children:e.jsx("svg",{className:"icon-svg",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z",fill:"currentColor"})})})}),e.jsx("h3",{children:"Design Assistance"}),e.jsx("p",{children:"Get professional layouts and designs from top architects in the industry."})]})]}),e.jsxs("div",{className:"counters","aria-live":"polite","aria-atomic":"true",children:[e.jsx(l,{end:150,label:"Projects Completed"}),e.jsx(l,{end:75,label:"Trusted Contractors"}),e.jsx(l,{end:20,label:"Award-Winning Designs"})]}),e.jsx("div",{className:"accordion","aria-label":"Frequently Asked Questions",children:m.map(({question:v,answer:x},C)=>e.jsxs("div",{className:"accordion-item",children:[e.jsx("div",{className:`accordion-header ${d===C?"active":""}`,onClick:()=>b(C),onKeyDown:D=>{(D.key==="Enter"||D.key===" ")&&b(C)},role:"button",tabIndex:0,"aria-expanded":d===C,"aria-controls":`faq${C}-content`,id:`faq${C}-header`,children:v}),e.jsx("div",{id:`faq${C}-content`,className:`accordion-content ${d===C?"active":""}`,role:"region","aria-labelledby":`faq${C}-header`,children:e.jsx("p",{children:x})})]},C))})]}),e.jsxs("section",{className:"projects-gallery",id:"projects",role:"region","aria-label":"Projects Gallery",children:[e.jsx("h2",{children:"Our Construction Projects"}),e.jsxs("div",{className:"gallery-grid",children:[e.jsx("div",{className:"gallery-item",children:e.jsx("div",{className:"image-container",children:e.jsxs("div",{className:"project-image residential",style:{backgroundImage:"url('./images/projects/residential-1.jpg')"},children:[e.jsxs("div",{className:"image-overlay",children:[e.jsx("h3",{children:"Residential Projects"}),e.jsx("p",{children:"Modern homes with sustainable design"}),e.jsxs("div",{className:"project-stats",children:[e.jsx("span",{children:" 50+ Homes Built"}),e.jsx("span",{children:" 4.9/5 Rating"})]})]}),e.jsxs("div",{className:"image-fallback",children:[e.jsx("div",{className:"fallback-icon",children:""}),e.jsx("div",{className:"fallback-text",children:"Residential Construction"})]})]})})}),e.jsx("div",{className:"gallery-item",children:e.jsx("div",{className:"image-container",children:e.jsxs("div",{className:"project-image commercial",style:{backgroundImage:"url('./images/projects/commercial-1.jpg')"},children:[e.jsxs("div",{className:"image-overlay",children:[e.jsx("h3",{children:"Commercial Buildings"}),e.jsx("p",{children:"Office spaces and retail complexes"}),e.jsxs("div",{className:"project-stats",children:[e.jsx("span",{children:" 25+ Buildings"}),e.jsx("span",{children:" 4.8/5 Rating"})]})]}),e.jsxs("div",{className:"image-fallback",children:[e.jsx("div",{className:"fallback-icon",children:""}),e.jsx("div",{className:"fallback-text",children:"Commercial Construction"})]})]})})}),e.jsx("div",{className:"gallery-item",children:e.jsx("div",{className:"image-container",children:e.jsxs("div",{className:"project-image industrial",style:{backgroundImage:"url('./images/projects/industrial-1.jpg')"},children:[e.jsxs("div",{className:"image-overlay",children:[e.jsx("h3",{children:"Industrial Facilities"}),e.jsx("p",{children:"Manufacturing and warehouse projects"}),e.jsxs("div",{className:"project-stats",children:[e.jsx("span",{children:" 15+ Facilities"}),e.jsx("span",{children:" 4.9/5 Rating"})]})]}),e.jsxs("div",{className:"image-fallback",children:[e.jsx("div",{className:"fallback-icon",children:""}),e.jsx("div",{className:"fallback-text",children:"Industrial Construction"})]})]})})}),e.jsx("div",{className:"gallery-item",children:e.jsx("div",{className:"image-container",children:e.jsxs("div",{className:"project-image renovation",style:{backgroundImage:"url('./images/projects/renovation-1.jpg')"},children:[e.jsxs("div",{className:"image-overlay",children:[e.jsx("h3",{children:"Renovation Projects"}),e.jsx("p",{children:"Transforming existing structures"}),e.jsxs("div",{className:"project-stats",children:[e.jsx("span",{children:" 30+ Renovations"}),e.jsx("span",{children:" 4.7/5 Rating"})]})]}),e.jsxs("div",{className:"image-fallback",children:[e.jsx("div",{className:"fallback-icon",children:""}),e.jsx("div",{className:"fallback-text",children:"Renovation Projects"})]})]})})})]})]}),e.jsxs("section",{className:"services-showcase",id:"services",role:"region","aria-label":"Services Showcase",children:[e.jsx("h2",{children:"Our Services"}),e.jsxs("div",{className:"services-grid",children:[e.jsxs("div",{className:"service-item",children:[e.jsx("div",{className:"service-image-container",children:e.jsxs("div",{className:"service-image planning",style:{backgroundImage:"url('./images/services/project-planning.jpg')"},children:[e.jsx("div",{className:"image-fallback",children:e.jsx("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),e.jsxs("div",{className:"service-overlay",children:[e.jsx("h3",{children:"Project Planning"}),e.jsx("p",{children:"Comprehensive project management"})]})]})}),e.jsxs("div",{className:"service-content",children:[e.jsx("h3",{children:"Smart Project Planning"}),e.jsx("p",{children:"Advanced project management tools with AI-powered scheduling and resource optimization."})]})]}),e.jsxs("div",{className:"service-item",children:[e.jsx("div",{className:"service-image-container",children:e.jsxs("div",{className:"service-image design",style:{backgroundImage:"url('./images/services/architectural-design.jpg')"},children:[e.jsx("div",{className:"image-fallback",children:e.jsx("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),e.jsxs("div",{className:"service-overlay",children:[e.jsx("h3",{children:"Architectural Design"}),e.jsx("p",{children:"Professional design services"})]})]})}),e.jsxs("div",{className:"service-content",children:[e.jsx("h3",{children:"Architectural Excellence"}),e.jsx("p",{children:"Innovative designs from certified architects with modern construction techniques."})]})]}),e.jsxs("div",{className:"service-item",children:[e.jsx("div",{className:"service-image-container",children:e.jsxs("div",{className:"service-image construction",style:{backgroundImage:"url('./images/services/construction-management.jpg')"},children:[e.jsx("div",{className:"image-fallback",children:e.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2H5a2 2 0 00-2-2z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M8 21v-4a2 2 0 012-2h4a2 2 0 012 2v4",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})}),e.jsxs("div",{className:"service-overlay",children:[e.jsx("h3",{children:"Construction Management"}),e.jsx("p",{children:"End-to-end project execution"})]})]})}),e.jsxs("div",{className:"service-content",children:[e.jsx("h3",{children:"Construction Management"}),e.jsx("p",{children:"Complete project oversight from start to finish with quality assurance and timeline management."})]})]}),e.jsxs("div",{className:"service-item",children:[e.jsx("div",{className:"service-image-container",children:e.jsxs("div",{className:"service-image consultation",style:{backgroundImage:"url('./images/services/consultation.jpg')"},children:[e.jsx("div",{className:"image-fallback",children:e.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M17 21v-2a4 4 0 00-4-4H5a4 4 0 00-4 4v2",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("circle",{cx:"9",cy:"7",r:"4",stroke:"currentColor",strokeWidth:"2"}),e.jsx("path",{d:"M23 21v-2a4 4 0 00-3-3.87m-4-12a4 4 0 010 7.75",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})}),e.jsxs("div",{className:"service-overlay",children:[e.jsx("h3",{children:"Expert Consultation"}),e.jsx("p",{children:"Professional guidance and advice"})]})]})}),e.jsxs("div",{className:"service-content",children:[e.jsx("h3",{children:"Expert Consultation"}),e.jsx("p",{children:"Get professional advice from experienced construction experts for your project needs."})]})]}),e.jsxs("div",{className:"service-item",children:[e.jsx("div",{className:"service-image-container",children:e.jsxs("div",{className:"service-image maintenance",style:{backgroundImage:"url('./images/services/maintenance.jpg')"},children:[e.jsx("div",{className:"image-fallback",children:e.jsx("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M14.7 6.3a1 1 0 000 1.4l1.6 1.6a1 1 0 001.4 0l3.77-3.77a6 6 0 01-7.94 7.94l-6.91 6.91a2.12 2.12 0 01-3-3l6.91-6.91a6 6 0 017.94-7.94l-3.76 3.76z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),e.jsxs("div",{className:"service-overlay",children:[e.jsx("h3",{children:"Maintenance & Support"}),e.jsx("p",{children:"Ongoing project support"})]})]})}),e.jsxs("div",{className:"service-content",children:[e.jsx("h3",{children:"Maintenance & Support"}),e.jsx("p",{children:"Comprehensive maintenance services and ongoing support for your construction projects."})]})]})]})]}),e.jsxs("section",{className:"team-section",id:"team",role:"region","aria-label":"Team Section",children:[e.jsx("h2",{children:"Our Expert Team"}),e.jsxs("div",{className:"team-grid",children:[e.jsxs("div",{className:"team-member",children:[e.jsx("div",{className:"member-image",children:e.jsxs("div",{className:"member-photo architect",children:[e.jsx("div",{className:"role-icon",children:e.jsx("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),e.jsxs("div",{className:"member-overlay",children:[e.jsx("h4",{children:"Senior Architect"}),e.jsx("p",{children:"15+ years experience"})]})]})}),e.jsxs("div",{className:"member-info",children:[e.jsx("h3",{children:"Lead Architect"}),e.jsx("p",{children:"15+ years experience"})]})]}),e.jsxs("div",{className:"team-member",children:[e.jsx("div",{className:"member-image",children:e.jsxs("div",{className:"member-photo engineer",children:[e.jsx("div",{className:"role-icon",children:e.jsx("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M14.7 6.3a1 1 0 000 1.4l1.6 1.6a1 1 0 001.4 0l3.77-3.77a6 6 0 01-7.94 7.94l-6.91 6.91a2.12 2.12 0 01-3-3l6.91-6.91a6 6 0 017.94-7.94l-3.76 3.76z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),e.jsxs("div",{className:"member-overlay",children:[e.jsx("h4",{children:"Structural Engineer"}),e.jsx("p",{children:"20+ years experience"})]})]})}),e.jsxs("div",{className:"member-info",children:[e.jsx("h3",{children:"Senior Engineer"}),e.jsx("p",{children:"20+ years experience"})]})]}),e.jsxs("div",{className:"team-member",children:[e.jsx("div",{className:"member-image",children:e.jsxs("div",{className:"member-photo manager",children:[e.jsx("div",{className:"role-icon",children:e.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M12 2a10 10 0 100 20 10 10 0 000-20z",stroke:"currentColor",strokeWidth:"2"})]})}),e.jsxs("div",{className:"member-overlay",children:[e.jsx("h4",{children:"Project Manager"}),e.jsx("p",{children:"12+ years experience"})]})]})}),e.jsxs("div",{className:"member-info",children:[e.jsx("h3",{children:"Project Manager"}),e.jsx("p",{children:"12+ years experience"})]})]})]})]}),e.jsxs("section",{className:"contact",id:"contact",role:"region","aria-label":"Contact Section",children:[e.jsx("h2",{children:"Contact Us"}),e.jsxs("form",{onSubmit:v=>{v.preventDefault(),a.success("Thank you for reaching out! We will get back to you soon."),v.target.reset()},children:[e.jsx("input",{type:"text",name:"name",placeholder:"Your Name",required:!0,"aria-label":"Your Name"}),e.jsx("input",{type:"email",name:"email",placeholder:"Your Email",required:!0,"aria-label":"Your Email"}),e.jsx("textarea",{name:"message",placeholder:"Your Message",required:!0,"aria-label":"Your Message"}),e.jsx("button",{type:"submit",children:"Send Message"})]})]}),e.jsxs("footer",{children:[" ",new Date().getFullYear()," BuildHub. All rights reserved."]})]})}function sE(){const[t,a]=w.useState(!1),[s,i]=w.useState(null);return w.useEffect(()=>{const o=()=>{a(!0),s&&clearTimeout(s);const l=setTimeout(()=>{a(!1)},1500);i(l)};return window.addEventListener("beforeunload",o),()=>{s&&clearTimeout(s),window.removeEventListener("beforeunload",o)}},[s]),e.jsx(n1,{children:e.jsxs(R_,{children:[e.jsx(tE,{children:e.jsxs(h_,{children:[e.jsx(ii,{path:"/",element:e.jsx(aE,{})}),e.jsx(ii,{path:"/register",element:e.jsx(aN,{})}),e.jsx(ii,{path:"/login",element:e.jsx(iN,{})}),e.jsx(ii,{path:"/homeowner-dashboard",element:e.jsx(Qb,{children:e.jsx(KF,{})})}),e.jsx(ii,{path:"/contractor-dashboard",element:e.jsx(K6,{children:e.jsx(y6,{})})}),e.jsx(ii,{path:"/architect-dashboard",element:e.jsx(Rb,{children:e.jsx(Tb,{})})}),e.jsx(ii,{path:"/architect-dashboard-old",element:e.jsx(Rb,{children:e.jsx(Tb,{})})}),e.jsx(ii,{path:"/homeowner/request",element:e.jsx(L6,{})}),e.jsx(ii,{path:"/homeowner/profile",element:e.jsx(Qb,{children:e.jsx(o6,{})})}),e.jsx(ii,{path:"/architect/upload",element:e.jsx(T6,{})}),e.jsx(ii,{path:"/architect/upload/simple",element:e.jsx(Z6,{})}),e.jsx(ii,{path:"/contractor/estimate",element:e.jsx(Q6,{})}),e.jsx(ii,{path:"/admin/material/new",element:e.jsx(R6,{})}),e.jsx(ii,{path:"/authorized-redirect-uris",element:e.jsx(k6,{})}),e.jsx(ii,{path:"/admin",element:e.jsx(D6,{})}),e.jsx(ii,{path:"/admin-dashboard",element:e.jsx(q6,{children:e.jsx(H6,{})})}),e.jsx(ii,{path:"/forgot-password",element:e.jsx(rN,{})})]})}),e.jsx(X6,{})]})})}if(typeof window<"u"&&!window.Razorpay){const t=document.createElement("script");t.src="https://checkout.razorpay.com/v1/checkout.js",t.async=!0,t.onerror=function(){console.error("Failed to load Razorpay SDK")},document.head.appendChild(t),window._razorpayLoading=!0}w2.createRoot(document.getElementById("root")).render(e.jsx(An.StrictMode,{children:e.jsx(n1,{children:e.jsx(sE,{})})}));export{Ls as _,nE as c,Pb as g};
