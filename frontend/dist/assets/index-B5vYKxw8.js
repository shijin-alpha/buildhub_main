(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const A of l.addedNodes)A.tagName==="LINK"&&A.rel==="modulepreload"&&r(A)}).observe(document,{childList:!0,subtree:!0});function a(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(o){if(o.ep)return;o.ep=!0;const l=a(o);fetch(o.href,l)}})();var Y6=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ib(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Wf={exports:{}},Fd={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var J0;function pj(){if(J0)return Fd;J0=1;var t=Symbol.for("react.transitional.element"),s=Symbol.for("react.fragment");function a(r,o,l){var A=null;if(l!==void 0&&(A=""+l),o.key!==void 0&&(A=""+o.key),"key"in o){l={};for(var u in o)u!=="key"&&(l[u]=o[u])}else l=o;return o=l.ref,{$$typeof:t,type:r,key:A,ref:o!==void 0?o:null,props:l}}return Fd.Fragment=s,Fd.jsx=a,Fd.jsxs=a,Fd}var Z0;function fj(){return Z0||(Z0=1,Wf.exports=pj()),Wf.exports}var e=fj(),Yf={exports:{}},Os={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ey;function mj(){if(ey)return Os;ey=1;var t=Symbol.for("react.transitional.element"),s=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),A=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),v=Symbol.iterator;function b(te){return te===null||typeof te!="object"?null:(te=v&&te[v]||te["@@iterator"],typeof te=="function"?te:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C=Object.assign,Q={};function j(te,he,k){this.props=te,this.context=he,this.refs=Q,this.updater=k||x}j.prototype.isReactComponent={},j.prototype.setState=function(te,he){if(typeof te!="object"&&typeof te!="function"&&te!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,te,he,"setState")},j.prototype.forceUpdate=function(te){this.updater.enqueueForceUpdate(this,te,"forceUpdate")};function B(){}B.prototype=j.prototype;function L(te,he,k){this.props=te,this.context=he,this.refs=Q,this.updater=k||x}var P=L.prototype=new B;P.constructor=L,C(P,j.prototype),P.isPureReactComponent=!0;var F=Array.isArray,ee={H:null,A:null,T:null,S:null,V:null},K=Object.prototype.hasOwnProperty;function q(te,he,k,T,z,le){return k=le.ref,{$$typeof:t,type:te,key:he,ref:k!==void 0?k:null,props:le}}function E(te,he){return q(te.type,he,void 0,void 0,void 0,te.props)}function U(te){return typeof te=="object"&&te!==null&&te.$$typeof===t}function V(te){var he={"=":"=0",":":"=2"};return"$"+te.replace(/[=:]/g,function(k){return he[k]})}var H=/\/+/g;function I(te,he){return typeof te=="object"&&te!==null&&te.key!=null?V(""+te.key):he.toString(36)}function M(){}function re(te){switch(te.status){case"fulfilled":return te.value;case"rejected":throw te.reason;default:switch(typeof te.status=="string"?te.then(M,M):(te.status="pending",te.then(function(he){te.status==="pending"&&(te.status="fulfilled",te.value=he)},function(he){te.status==="pending"&&(te.status="rejected",te.reason=he)})),te.status){case"fulfilled":return te.value;case"rejected":throw te.reason}}throw te}function G(te,he,k,T,z){var le=typeof te;(le==="undefined"||le==="boolean")&&(te=null);var X=!1;if(te===null)X=!0;else switch(le){case"bigint":case"string":case"number":X=!0;break;case"object":switch(te.$$typeof){case t:case s:X=!0;break;case m:return X=te._init,G(X(te._payload),he,k,T,z)}}if(X)return z=z(te),X=T===""?"."+I(te,0):T,F(z)?(k="",X!=null&&(k=X.replace(H,"$&/")+"/"),G(z,he,k,"",function(me){return me})):z!=null&&(U(z)&&(z=E(z,k+(z.key==null||te&&te.key===z.key?"":(""+z.key).replace(H,"$&/")+"/")+X)),he.push(z)),1;X=0;var W=T===""?".":T+":";if(F(te))for(var de=0;de<te.length;de++)T=te[de],le=W+I(T,de),X+=G(T,he,k,le,z);else if(de=b(te),typeof de=="function")for(te=de.call(te),de=0;!(T=te.next()).done;)T=T.value,le=W+I(T,de++),X+=G(T,he,k,le,z);else if(le==="object"){if(typeof te.then=="function")return G(re(te),he,k,T,z);throw he=String(te),Error("Objects are not valid as a React child (found: "+(he==="[object Object]"?"object with keys {"+Object.keys(te).join(", ")+"}":he)+"). If you meant to render a collection of children, use an array instead.")}return X}function Z(te,he,k){if(te==null)return te;var T=[],z=0;return G(te,T,"","",function(le){return he.call(k,le,z++)}),T}function fe(te){if(te._status===-1){var he=te._result;he=he(),he.then(function(k){(te._status===0||te._status===-1)&&(te._status=1,te._result=k)},function(k){(te._status===0||te._status===-1)&&(te._status=2,te._result=k)}),te._status===-1&&(te._status=0,te._result=he)}if(te._status===1)return te._result.default;throw te._result}var Ae=typeof reportError=="function"?reportError:function(te){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var he=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof te=="object"&&te!==null&&typeof te.message=="string"?String(te.message):String(te),error:te});if(!window.dispatchEvent(he))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",te);return}console.error(te)};function Ce(){}return Os.Children={map:Z,forEach:function(te,he,k){Z(te,function(){he.apply(this,arguments)},k)},count:function(te){var he=0;return Z(te,function(){he++}),he},toArray:function(te){return Z(te,function(he){return he})||[]},only:function(te){if(!U(te))throw Error("React.Children.only expected to receive a single React element child.");return te}},Os.Component=j,Os.Fragment=a,Os.Profiler=o,Os.PureComponent=L,Os.StrictMode=r,Os.Suspense=h,Os.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=ee,Os.__COMPILER_RUNTIME={__proto__:null,c:function(te){return ee.H.useMemoCache(te)}},Os.cache=function(te){return function(){return te.apply(null,arguments)}},Os.cloneElement=function(te,he,k){if(te==null)throw Error("The argument must be a React element, but you passed "+te+".");var T=C({},te.props),z=te.key,le=void 0;if(he!=null)for(X in he.ref!==void 0&&(le=void 0),he.key!==void 0&&(z=""+he.key),he)!K.call(he,X)||X==="key"||X==="__self"||X==="__source"||X==="ref"&&he.ref===void 0||(T[X]=he[X]);var X=arguments.length-2;if(X===1)T.children=k;else if(1<X){for(var W=Array(X),de=0;de<X;de++)W[de]=arguments[de+2];T.children=W}return q(te.type,z,void 0,void 0,le,T)},Os.createContext=function(te){return te={$$typeof:A,_currentValue:te,_currentValue2:te,_threadCount:0,Provider:null,Consumer:null},te.Provider=te,te.Consumer={$$typeof:l,_context:te},te},Os.createElement=function(te,he,k){var T,z={},le=null;if(he!=null)for(T in he.key!==void 0&&(le=""+he.key),he)K.call(he,T)&&T!=="key"&&T!=="__self"&&T!=="__source"&&(z[T]=he[T]);var X=arguments.length-2;if(X===1)z.children=k;else if(1<X){for(var W=Array(X),de=0;de<X;de++)W[de]=arguments[de+2];z.children=W}if(te&&te.defaultProps)for(T in X=te.defaultProps,X)z[T]===void 0&&(z[T]=X[T]);return q(te,le,void 0,void 0,null,z)},Os.createRef=function(){return{current:null}},Os.forwardRef=function(te){return{$$typeof:u,render:te}},Os.isValidElement=U,Os.lazy=function(te){return{$$typeof:m,_payload:{_status:-1,_result:te},_init:fe}},Os.memo=function(te,he){return{$$typeof:p,type:te,compare:he===void 0?null:he}},Os.startTransition=function(te){var he=ee.T,k={};ee.T=k;try{var T=te(),z=ee.S;z!==null&&z(k,T),typeof T=="object"&&T!==null&&typeof T.then=="function"&&T.then(Ce,Ae)}catch(le){Ae(le)}finally{ee.T=he}},Os.unstable_useCacheRefresh=function(){return ee.H.useCacheRefresh()},Os.use=function(te){return ee.H.use(te)},Os.useActionState=function(te,he,k){return ee.H.useActionState(te,he,k)},Os.useCallback=function(te,he){return ee.H.useCallback(te,he)},Os.useContext=function(te){return ee.H.useContext(te)},Os.useDebugValue=function(){},Os.useDeferredValue=function(te,he){return ee.H.useDeferredValue(te,he)},Os.useEffect=function(te,he,k){var T=ee.H;if(typeof k=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return T.useEffect(te,he)},Os.useId=function(){return ee.H.useId()},Os.useImperativeHandle=function(te,he,k){return ee.H.useImperativeHandle(te,he,k)},Os.useInsertionEffect=function(te,he){return ee.H.useInsertionEffect(te,he)},Os.useLayoutEffect=function(te,he){return ee.H.useLayoutEffect(te,he)},Os.useMemo=function(te,he){return ee.H.useMemo(te,he)},Os.useOptimistic=function(te,he){return ee.H.useOptimistic(te,he)},Os.useReducer=function(te,he,k){return ee.H.useReducer(te,he,k)},Os.useRef=function(te){return ee.H.useRef(te)},Os.useState=function(te){return ee.H.useState(te)},Os.useSyncExternalStore=function(te,he,k){return ee.H.useSyncExternalStore(te,he,k)},Os.useTransition=function(){return ee.H.useTransition()},Os.version="19.1.1",Os}var ty;function Eg(){return ty||(ty=1,Yf.exports=mj()),Yf.exports}var N=Eg();const Ar=Ib(N);var Xf={exports:{}},Ud={},Jf={exports:{}},Zf={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sy;function gj(){return sy||(sy=1,function(t){function s(Z,fe){var Ae=Z.length;Z.push(fe);e:for(;0<Ae;){var Ce=Ae-1>>>1,te=Z[Ce];if(0<o(te,fe))Z[Ce]=fe,Z[Ae]=te,Ae=Ce;else break e}}function a(Z){return Z.length===0?null:Z[0]}function r(Z){if(Z.length===0)return null;var fe=Z[0],Ae=Z.pop();if(Ae!==fe){Z[0]=Ae;e:for(var Ce=0,te=Z.length,he=te>>>1;Ce<he;){var k=2*(Ce+1)-1,T=Z[k],z=k+1,le=Z[z];if(0>o(T,Ae))z<te&&0>o(le,T)?(Z[Ce]=le,Z[z]=Ae,Ce=z):(Z[Ce]=T,Z[k]=Ae,Ce=k);else if(z<te&&0>o(le,Ae))Z[Ce]=le,Z[z]=Ae,Ce=z;else break e}}return fe}function o(Z,fe){var Ae=Z.sortIndex-fe.sortIndex;return Ae!==0?Ae:Z.id-fe.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;t.unstable_now=function(){return l.now()}}else{var A=Date,u=A.now();t.unstable_now=function(){return A.now()-u}}var h=[],p=[],m=1,v=null,b=3,x=!1,C=!1,Q=!1,j=!1,B=typeof setTimeout=="function"?setTimeout:null,L=typeof clearTimeout=="function"?clearTimeout:null,P=typeof setImmediate<"u"?setImmediate:null;function F(Z){for(var fe=a(p);fe!==null;){if(fe.callback===null)r(p);else if(fe.startTime<=Z)r(p),fe.sortIndex=fe.expirationTime,s(h,fe);else break;fe=a(p)}}function ee(Z){if(Q=!1,F(Z),!C)if(a(h)!==null)C=!0,K||(K=!0,I());else{var fe=a(p);fe!==null&&G(ee,fe.startTime-Z)}}var K=!1,q=-1,E=5,U=-1;function V(){return j?!0:!(t.unstable_now()-U<E)}function H(){if(j=!1,K){var Z=t.unstable_now();U=Z;var fe=!0;try{e:{C=!1,Q&&(Q=!1,L(q),q=-1),x=!0;var Ae=b;try{t:{for(F(Z),v=a(h);v!==null&&!(v.expirationTime>Z&&V());){var Ce=v.callback;if(typeof Ce=="function"){v.callback=null,b=v.priorityLevel;var te=Ce(v.expirationTime<=Z);if(Z=t.unstable_now(),typeof te=="function"){v.callback=te,F(Z),fe=!0;break t}v===a(h)&&r(h),F(Z)}else r(h);v=a(h)}if(v!==null)fe=!0;else{var he=a(p);he!==null&&G(ee,he.startTime-Z),fe=!1}}break e}finally{v=null,b=Ae,x=!1}fe=void 0}}finally{fe?I():K=!1}}}var I;if(typeof P=="function")I=function(){P(H)};else if(typeof MessageChannel<"u"){var M=new MessageChannel,re=M.port2;M.port1.onmessage=H,I=function(){re.postMessage(null)}}else I=function(){B(H,0)};function G(Z,fe){q=B(function(){Z(t.unstable_now())},fe)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(Z){Z.callback=null},t.unstable_forceFrameRate=function(Z){0>Z||125<Z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<Z?Math.floor(1e3/Z):5},t.unstable_getCurrentPriorityLevel=function(){return b},t.unstable_next=function(Z){switch(b){case 1:case 2:case 3:var fe=3;break;default:fe=b}var Ae=b;b=fe;try{return Z()}finally{b=Ae}},t.unstable_requestPaint=function(){j=!0},t.unstable_runWithPriority=function(Z,fe){switch(Z){case 1:case 2:case 3:case 4:case 5:break;default:Z=3}var Ae=b;b=Z;try{return fe()}finally{b=Ae}},t.unstable_scheduleCallback=function(Z,fe,Ae){var Ce=t.unstable_now();switch(typeof Ae=="object"&&Ae!==null?(Ae=Ae.delay,Ae=typeof Ae=="number"&&0<Ae?Ce+Ae:Ce):Ae=Ce,Z){case 1:var te=-1;break;case 2:te=250;break;case 5:te=1073741823;break;case 4:te=1e4;break;default:te=5e3}return te=Ae+te,Z={id:m++,callback:fe,priorityLevel:Z,startTime:Ae,expirationTime:te,sortIndex:-1},Ae>Ce?(Z.sortIndex=Ae,s(p,Z),a(h)===null&&Z===a(p)&&(Q?(L(q),q=-1):Q=!0,G(ee,Ae-Ce))):(Z.sortIndex=te,s(h,Z),C||x||(C=!0,K||(K=!0,I()))),Z},t.unstable_shouldYield=V,t.unstable_wrapCallback=function(Z){var fe=b;return function(){var Ae=b;b=fe;try{return Z.apply(this,arguments)}finally{b=Ae}}}}(Zf)),Zf}var ay;function xj(){return ay||(ay=1,Jf.exports=gj()),Jf.exports}var em={exports:{}},Cr={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ny;function yj(){if(ny)return Cr;ny=1;var t=Eg();function s(h){var p="https://react.dev/errors/"+h;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)p+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+h+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(){}var r={d:{f:a,r:function(){throw Error(s(522))},D:a,C:a,L:a,m:a,X:a,S:a,M:a},p:0,findDOMNode:null},o=Symbol.for("react.portal");function l(h,p,m){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:v==null?null:""+v,children:h,containerInfo:p,implementation:m}}var A=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(h,p){if(h==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return Cr.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Cr.createPortal=function(h,p){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(s(299));return l(h,p,null,m)},Cr.flushSync=function(h){var p=A.T,m=r.p;try{if(A.T=null,r.p=2,h)return h()}finally{A.T=p,r.p=m,r.d.f()}},Cr.preconnect=function(h,p){typeof h=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,r.d.C(h,p))},Cr.prefetchDNS=function(h){typeof h=="string"&&r.d.D(h)},Cr.preinit=function(h,p){if(typeof h=="string"&&p&&typeof p.as=="string"){var m=p.as,v=u(m,p.crossOrigin),b=typeof p.integrity=="string"?p.integrity:void 0,x=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;m==="style"?r.d.S(h,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:v,integrity:b,fetchPriority:x}):m==="script"&&r.d.X(h,{crossOrigin:v,integrity:b,fetchPriority:x,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},Cr.preinitModule=function(h,p){if(typeof h=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var m=u(p.as,p.crossOrigin);r.d.M(h,{crossOrigin:m,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&r.d.M(h)},Cr.preload=function(h,p){if(typeof h=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var m=p.as,v=u(m,p.crossOrigin);r.d.L(h,m,{crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},Cr.preloadModule=function(h,p){if(typeof h=="string")if(p){var m=u(p.as,p.crossOrigin);r.d.m(h,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:m,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else r.d.m(h)},Cr.requestFormReset=function(h){r.d.r(h)},Cr.unstable_batchedUpdates=function(h,p){return h(p)},Cr.useFormState=function(h,p,m){return A.H.useFormState(h,p,m)},Cr.useFormStatus=function(){return A.H.useHostTransitionStatus()},Cr.version="19.1.1",Cr}var ry;function Hb(){if(ry)return em.exports;ry=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(s){console.error(s)}}return t(),em.exports=yj(),em.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iy;function vj(){if(iy)return Ud;iy=1;var t=xj(),s=Eg(),a=Hb();function r(n){var i="https://react.dev/errors/"+n;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)i+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+n+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function l(n){var i=n,c=n;if(n.alternate)for(;i.return;)i=i.return;else{n=i;do i=n,(i.flags&4098)!==0&&(c=i.return),n=i.return;while(n)}return i.tag===3?c:null}function A(n){if(n.tag===13){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function u(n){if(l(n)!==n)throw Error(r(188))}function h(n){var i=n.alternate;if(!i){if(i=l(n),i===null)throw Error(r(188));return i!==n?null:n}for(var c=n,d=i;;){var g=c.return;if(g===null)break;var w=g.alternate;if(w===null){if(d=g.return,d!==null){c=d;continue}break}if(g.child===w.child){for(w=g.child;w;){if(w===c)return u(g),n;if(w===d)return u(g),i;w=w.sibling}throw Error(r(188))}if(c.return!==d.return)c=g,d=w;else{for(var O=!1,ce=g.child;ce;){if(ce===c){O=!0,c=g,d=w;break}if(ce===d){O=!0,d=g,c=w;break}ce=ce.sibling}if(!O){for(ce=w.child;ce;){if(ce===c){O=!0,c=w,d=g;break}if(ce===d){O=!0,d=w,c=g;break}ce=ce.sibling}if(!O)throw Error(r(189))}}if(c.alternate!==d)throw Error(r(190))}if(c.tag!==3)throw Error(r(188));return c.stateNode.current===c?n:i}function p(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n;for(n=n.child;n!==null;){if(i=p(n),i!==null)return i;n=n.sibling}return null}var m=Object.assign,v=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),x=Symbol.for("react.portal"),C=Symbol.for("react.fragment"),Q=Symbol.for("react.strict_mode"),j=Symbol.for("react.profiler"),B=Symbol.for("react.provider"),L=Symbol.for("react.consumer"),P=Symbol.for("react.context"),F=Symbol.for("react.forward_ref"),ee=Symbol.for("react.suspense"),K=Symbol.for("react.suspense_list"),q=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),U=Symbol.for("react.activity"),V=Symbol.for("react.memo_cache_sentinel"),H=Symbol.iterator;function I(n){return n===null||typeof n!="object"?null:(n=H&&n[H]||n["@@iterator"],typeof n=="function"?n:null)}var M=Symbol.for("react.client.reference");function re(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===M?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case C:return"Fragment";case j:return"Profiler";case Q:return"StrictMode";case ee:return"Suspense";case K:return"SuspenseList";case U:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case x:return"Portal";case P:return(n.displayName||"Context")+".Provider";case L:return(n._context.displayName||"Context")+".Consumer";case F:var i=n.render;return n=n.displayName,n||(n=i.displayName||i.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case q:return i=n.displayName||null,i!==null?i:re(n.type)||"Memo";case E:i=n._payload,n=n._init;try{return re(n(i))}catch{}}return null}var G=Array.isArray,Z=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,fe=a.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ae={pending:!1,data:null,method:null,action:null},Ce=[],te=-1;function he(n){return{current:n}}function k(n){0>te||(n.current=Ce[te],Ce[te]=null,te--)}function T(n,i){te++,Ce[te]=n.current,n.current=i}var z=he(null),le=he(null),X=he(null),W=he(null);function de(n,i){switch(T(X,i),T(le,n),T(z,null),i.nodeType){case 9:case 11:n=(n=i.documentElement)&&(n=n.namespaceURI)?N0(n):0;break;default:if(n=i.tagName,i=i.namespaceURI)i=N0(i),n=C0(i,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}k(z),T(z,n)}function me(){k(z),k(le),k(X)}function Be(n){n.memoizedState!==null&&T(W,n);var i=z.current,c=C0(i,n.type);i!==c&&(T(le,n),T(z,c))}function Qe(n){le.current===n&&(k(z),k(le)),W.current===n&&(k(W),Bd._currentValue=Ae)}var ut=Object.prototype.hasOwnProperty,mt=t.unstable_scheduleCallback,Ve=t.unstable_cancelCallback,je=t.unstable_shouldYield,Ft=t.unstable_requestPaint,Rt=t.unstable_now,at=t.unstable_getCurrentPriorityLevel,Xe=t.unstable_ImmediatePriority,pt=t.unstable_UserBlockingPriority,xe=t.unstable_NormalPriority,et=t.unstable_LowPriority,Oe=t.unstable_IdlePriority,Bt=t.log,xt=t.unstable_setDisableYieldValue,dt=null,Ut=null;function wt(n){if(typeof Bt=="function"&&xt(n),Ut&&typeof Ut.setStrictMode=="function")try{Ut.setStrictMode(dt,n)}catch{}}var bt=Math.clz32?Math.clz32:Gt,Ht=Math.log,_t=Math.LN2;function Gt(n){return n>>>=0,n===0?32:31-(Ht(n)/_t|0)|0}var $t=256,J=4194304;function tt(n){var i=n&42;if(i!==0)return i;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function Qt(n,i,c){var d=n.pendingLanes;if(d===0)return 0;var g=0,w=n.suspendedLanes,O=n.pingedLanes;n=n.warmLanes;var ce=d&134217727;return ce!==0?(d=ce&~w,d!==0?g=tt(d):(O&=ce,O!==0?g=tt(O):c||(c=ce&~n,c!==0&&(g=tt(c))))):(ce=d&~w,ce!==0?g=tt(ce):O!==0?g=tt(O):c||(c=d&~n,c!==0&&(g=tt(c)))),g===0?0:i!==0&&i!==g&&(i&w)===0&&(w=g&-g,c=i&-i,w>=c||w===32&&(c&4194048)!==0)?i:g}function Et(n,i){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&i)===0}function Jt(n,i){switch(n){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function os(){var n=$t;return $t<<=1,($t&4194048)===0&&($t=256),n}function _e(){var n=J;return J<<=1,(J&62914560)===0&&(J=4194304),n}function St(n){for(var i=[],c=0;31>c;c++)i.push(n);return i}function $e(n,i){n.pendingLanes|=i,i!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function kt(n,i,c,d,g,w){var O=n.pendingLanes;n.pendingLanes=c,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=c,n.entangledLanes&=c,n.errorRecoveryDisabledLanes&=c,n.shellSuspendCounter=0;var ce=n.entanglements,Ne=n.expirationTimes,Ke=n.hiddenUpdates;for(c=O&~c;0<c;){var ht=31-bt(c),vt=1<<ht;ce[ht]=0,Ne[ht]=-1;var Ye=Ke[ht];if(Ye!==null)for(Ke[ht]=null,ht=0;ht<Ye.length;ht++){var Je=Ye[ht];Je!==null&&(Je.lane&=-536870913)}c&=~vt}d!==0&&Ze(n,d,0),w!==0&&g===0&&n.tag!==0&&(n.suspendedLanes|=w&~(O&~i))}function Ze(n,i,c){n.pendingLanes|=i,n.suspendedLanes&=~i;var d=31-bt(i);n.entangledLanes|=i,n.entanglements[d]=n.entanglements[d]|1073741824|c&4194090}function oe(n,i){var c=n.entangledLanes|=i;for(n=n.entanglements;c;){var d=31-bt(c),g=1<<d;g&i|n[d]&i&&(n[d]|=i),c&=~g}}function we(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function Ee(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function Re(){var n=fe.p;return n!==0?n:(n=window.event,n===void 0?32:G0(n.type))}function We(n,i){var c=fe.p;try{return fe.p=n,i()}finally{fe.p=c}}var Lt=Math.random().toString(36).slice(2),Vt="__reactFiber$"+Lt,Ot="__reactProps$"+Lt,ss="__reactContainer$"+Lt,xs="__reactEvents$"+Lt,Hs="__reactListeners$"+Lt,Ms="__reactHandles$"+Lt,la="__reactResources$"+Lt,Zs="__reactMarker$"+Lt;function Sa(n){delete n[Vt],delete n[Ot],delete n[xs],delete n[Hs],delete n[Ms]}function da(n){var i=n[Vt];if(i)return i;for(var c=n.parentNode;c;){if(i=c[ss]||c[Vt]){if(c=i.alternate,i.child!==null||c!==null&&c.child!==null)for(n=U0(n);n!==null;){if(c=n[Vt])return c;n=U0(n)}return i}n=c,c=n.parentNode}return null}function xa(n){if(n=n[Vt]||n[ss]){var i=n.tag;if(i===5||i===6||i===13||i===26||i===27||i===3)return n}return null}function ha(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n.stateNode;throw Error(r(33))}function ya(n){var i=n[la];return i||(i=n[la]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function Ws(n){n[Zs]=!0}var Dn=new Set,Ma={};function ie(n,i){Se(n,i),Se(n+"Capture",i)}function Se(n,i){for(Ma[n]=i,n=0;n<i.length;n++)Dn.add(i[n])}var ot=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),qt={},Zt={};function ys(n){return ut.call(Zt,n)?!0:ut.call(qt,n)?!1:ot.test(n)?Zt[n]=!0:(qt[n]=!0,!1)}function vs(n,i,c){if(ys(i))if(c===null)n.removeAttribute(i);else{switch(typeof c){case"undefined":case"function":case"symbol":n.removeAttribute(i);return;case"boolean":var d=i.toLowerCase().slice(0,5);if(d!=="data-"&&d!=="aria-"){n.removeAttribute(i);return}}n.setAttribute(i,""+c)}}function as(n,i,c){if(c===null)n.removeAttribute(i);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(i);return}n.setAttribute(i,""+c)}}function ps(n,i,c,d){if(d===null)n.removeAttribute(c);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(c);return}n.setAttributeNS(i,c,""+d)}}var fs,pa;function Ps(n){if(fs===void 0)try{throw Error()}catch(c){var i=c.stack.trim().match(/\n( *(at )?)/);fs=i&&i[1]||"",pa=-1<c.stack.indexOf(`
    at`)?" (<anonymous>)":-1<c.stack.indexOf("@")?"@unknown:0:0":""}return`
`+fs+n+pa}var ca=!1;function In(n,i){if(!n||ca)return"";ca=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var d={DetermineComponentFrameRoot:function(){try{if(i){var vt=function(){throw Error()};if(Object.defineProperty(vt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(vt,[])}catch(Je){var Ye=Je}Reflect.construct(n,[],vt)}else{try{vt.call()}catch(Je){Ye=Je}n.call(vt.prototype)}}else{try{throw Error()}catch(Je){Ye=Je}(vt=n())&&typeof vt.catch=="function"&&vt.catch(function(){})}}catch(Je){if(Je&&Ye&&typeof Je.stack=="string")return[Je.stack,Ye.stack]}return[null,null]}};d.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var g=Object.getOwnPropertyDescriptor(d.DetermineComponentFrameRoot,"name");g&&g.configurable&&Object.defineProperty(d.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var w=d.DetermineComponentFrameRoot(),O=w[0],ce=w[1];if(O&&ce){var Ne=O.split(`
`),Ke=ce.split(`
`);for(g=d=0;d<Ne.length&&!Ne[d].includes("DetermineComponentFrameRoot");)d++;for(;g<Ke.length&&!Ke[g].includes("DetermineComponentFrameRoot");)g++;if(d===Ne.length||g===Ke.length)for(d=Ne.length-1,g=Ke.length-1;1<=d&&0<=g&&Ne[d]!==Ke[g];)g--;for(;1<=d&&0<=g;d--,g--)if(Ne[d]!==Ke[g]){if(d!==1||g!==1)do if(d--,g--,0>g||Ne[d]!==Ke[g]){var ht=`
`+Ne[d].replace(" at new "," at ");return n.displayName&&ht.includes("<anonymous>")&&(ht=ht.replace("<anonymous>",n.displayName)),ht}while(1<=d&&0<=g);break}}}finally{ca=!1,Error.prepareStackTrace=c}return(c=n?n.displayName||n.name:"")?Ps(c):""}function Yr(n){switch(n.tag){case 26:case 27:case 5:return Ps(n.type);case 16:return Ps("Lazy");case 13:return Ps("Suspense");case 19:return Ps("SuspenseList");case 0:case 15:return In(n.type,!1);case 11:return In(n.type.render,!1);case 1:return In(n.type,!0);case 31:return Ps("Activity");default:return""}}function Ai(n){try{var i="";do i+=Yr(n),n=n.return;while(n);return i}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}function qs(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Xn(n){var i=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Ci(n){var i=Xn(n)?"checked":"value",c=Object.getOwnPropertyDescriptor(n.constructor.prototype,i),d=""+n[i];if(!n.hasOwnProperty(i)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var g=c.get,w=c.set;return Object.defineProperty(n,i,{configurable:!0,get:function(){return g.call(this)},set:function(O){d=""+O,w.call(this,O)}}),Object.defineProperty(n,i,{enumerable:c.enumerable}),{getValue:function(){return d},setValue:function(O){d=""+O},stopTracking:function(){n._valueTracker=null,delete n[i]}}}}function ea(n){n._valueTracker||(n._valueTracker=Ci(n))}function Jn(n){if(!n)return!1;var i=n._valueTracker;if(!i)return!0;var c=i.getValue(),d="";return n&&(d=Xn(n)?n.checked?"true":"false":n.value),n=d,n!==c?(i.setValue(n),!0):!1}function ja(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var wr=/[\n"\\]/g;function Ks(n){return n.replace(wr,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function Qr(n,i,c,d,g,w,O,ce){n.name="",O!=null&&typeof O!="function"&&typeof O!="symbol"&&typeof O!="boolean"?n.type=O:n.removeAttribute("type"),i!=null?O==="number"?(i===0&&n.value===""||n.value!=i)&&(n.value=""+qs(i)):n.value!==""+qs(i)&&(n.value=""+qs(i)):O!=="submit"&&O!=="reset"||n.removeAttribute("value"),i!=null?Xr(n,O,qs(i)):c!=null?Xr(n,O,qs(c)):d!=null&&n.removeAttribute("value"),g==null&&w!=null&&(n.defaultChecked=!!w),g!=null&&(n.checked=g&&typeof g!="function"&&typeof g!="symbol"),ce!=null&&typeof ce!="function"&&typeof ce!="symbol"&&typeof ce!="boolean"?n.name=""+qs(ce):n.removeAttribute("name")}function Zn(n,i,c,d,g,w,O,ce){if(w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(n.type=w),i!=null||c!=null){if(!(w!=="submit"&&w!=="reset"||i!=null))return;c=c!=null?""+qs(c):"",i=i!=null?""+qs(i):c,ce||i===n.value||(n.value=i),n.defaultValue=i}d=d??g,d=typeof d!="function"&&typeof d!="symbol"&&!!d,n.checked=ce?n.checked:!!d,n.defaultChecked=!!d,O!=null&&typeof O!="function"&&typeof O!="symbol"&&typeof O!="boolean"&&(n.name=O)}function Xr(n,i,c){i==="number"&&ja(n.ownerDocument)===n||n.defaultValue===""+c||(n.defaultValue=""+c)}function Tr(n,i,c,d){if(n=n.options,i){i={};for(var g=0;g<c.length;g++)i["$"+c[g]]=!0;for(c=0;c<n.length;c++)g=i.hasOwnProperty("$"+n[c].value),n[c].selected!==g&&(n[c].selected=g),g&&d&&(n[c].defaultSelected=!0)}else{for(c=""+qs(c),i=null,g=0;g<n.length;g++){if(n[g].value===c){n[g].selected=!0,d&&(n[g].defaultSelected=!0);return}i!==null||n[g].disabled||(i=n[g])}i!==null&&(i.selected=!0)}}function er(n,i,c){if(i!=null&&(i=""+qs(i),i!==n.value&&(n.value=i),c==null)){n.defaultValue!==i&&(n.defaultValue=i);return}n.defaultValue=c!=null?""+qs(c):""}function di(n,i,c,d){if(i==null){if(d!=null){if(c!=null)throw Error(r(92));if(G(d)){if(1<d.length)throw Error(r(93));d=d[0]}c=d}c==null&&(c=""),i=c}c=qs(i),n.defaultValue=c,d=n.textContent,d===c&&d!==""&&d!==null&&(n.value=d)}function jr(n,i){if(i){var c=n.firstChild;if(c&&c===n.lastChild&&c.nodeType===3){c.nodeValue=i;return}}n.textContent=i}var bs=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function ae(n,i,c){var d=i.indexOf("--")===0;c==null||typeof c=="boolean"||c===""?d?n.setProperty(i,""):i==="float"?n.cssFloat="":n[i]="":d?n.setProperty(i,c):typeof c!="number"||c===0||bs.has(i)?i==="float"?n.cssFloat=c:n[i]=(""+c).trim():n[i]=c+"px"}function ge(n,i,c){if(i!=null&&typeof i!="object")throw Error(r(62));if(n=n.style,c!=null){for(var d in c)!c.hasOwnProperty(d)||i!=null&&i.hasOwnProperty(d)||(d.indexOf("--")===0?n.setProperty(d,""):d==="float"?n.cssFloat="":n[d]="");for(var g in i)d=i[g],i.hasOwnProperty(g)&&c[g]!==d&&ae(n,g,d)}else for(var w in i)i.hasOwnProperty(w)&&ae(n,w,i[w])}function De(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var st=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),gt=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function rt(n){return gt.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}var Dt=null;function Pt(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Wt=null,ms=null;function Mt(n){var i=xa(n);if(i&&(n=i.stateNode)){var c=n[Ot]||null;e:switch(n=i.stateNode,i.type){case"input":if(Qr(n,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name),i=c.name,c.type==="radio"&&i!=null){for(c=n;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll('input[name="'+Ks(""+i)+'"][type="radio"]'),i=0;i<c.length;i++){var d=c[i];if(d!==n&&d.form===n.form){var g=d[Ot]||null;if(!g)throw Error(r(90));Qr(d,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name)}}for(i=0;i<c.length;i++)d=c[i],d.form===n.form&&Jn(d)}break e;case"textarea":er(n,c.value,c.defaultValue);break e;case"select":i=c.value,i!=null&&Tr(n,!!c.multiple,i,!1)}}}var fa=!1;function dn(n,i,c){if(fa)return n(i,c);fa=!0;try{var d=n(i);return d}finally{if(fa=!1,(Wt!==null||ms!==null)&&(Ju(),Wt&&(i=Wt,n=ms,ms=Wt=null,Mt(i),n)))for(i=0;i<n.length;i++)Mt(n[i])}}function zn(n,i){var c=n.stateNode;if(c===null)return null;var d=c[Ot]||null;if(d===null)return null;c=d[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(n=n.type,d=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!d;break e;default:n=!1}if(n)return null;if(c&&typeof c!="function")throw Error(r(231,i,typeof c));return c}var ka=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),yn=!1;if(ka)try{var jn={};Object.defineProperty(jn,"passive",{get:function(){yn=!0}}),window.addEventListener("test",jn,jn),window.removeEventListener("test",jn,jn)}catch{yn=!1}var Rr=null,Vo=null,Jr=null;function Xi(){if(Jr)return Jr;var n,i=Vo,c=i.length,d,g="value"in Rr?Rr.value:Rr.textContent,w=g.length;for(n=0;n<c&&i[n]===g[n];n++);var O=c-n;for(d=1;d<=O&&i[c-d]===g[w-d];d++);return Jr=g.slice(n,1<d?1-d:void 0)}function Dr(n){var i=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&i===13&&(n=13)):n=i,n===10&&(n=13),32<=n||n===13?n:0}function Ir(){return!0}function Qa(){return!1}function Za(n){function i(c,d,g,w,O){this._reactName=c,this._targetInst=g,this.type=d,this.nativeEvent=w,this.target=O,this.currentTarget=null;for(var ce in n)n.hasOwnProperty(ce)&&(c=n[ce],this[ce]=c?c(w):w[ce]);return this.isDefaultPrevented=(w.defaultPrevented!=null?w.defaultPrevented:w.returnValue===!1)?Ir:Qa,this.isPropagationStopped=Qa,this}return m(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=Ir)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=Ir)},persist:function(){},isPersistent:Ir}),i}var _r={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Zr=Za(_r),Br=m({},_r,{view:0,detail:0}),Si=Za(Br),Hn,ui,Ts,dr=m({},Br,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Xt,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Ts&&(Ts&&n.type==="mousemove"?(Hn=n.screenX-Ts.screenX,ui=n.screenY-Ts.screenY):ui=Hn=0,Ts=n),Hn)},movementY:function(n){return"movementY"in n?n.movementY:ui}}),_o=Za(dr),Ji=m({},dr,{dataTransfer:0}),ei=Za(Ji),hi=m({},Br,{relatedTarget:0}),Bo=Za(hi),Zi=m({},_r,{animationName:0,elapsedTime:0,pseudoElement:0}),pi=Za(Zi),wl=m({},_r,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),_=Za(wl),$=m({},_r,{data:0}),ve=Za($),ke={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ie={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ct={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function jt(n){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(n):(n=ct[n])?!!i[n]:!1}function Xt(){return jt}var ds=m({},Br,{key:function(n){if(n.key){var i=ke[n.key]||n.key;if(i!=="Unidentified")return i}return n.type==="keypress"?(n=Dr(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Ie[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Xt,charCode:function(n){return n.type==="keypress"?Dr(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Dr(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),_s=Za(ds),Cs=m({},dr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Gs=Za(Cs),Ta=m({},Br,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Xt}),Va=Za(Ta),va=m({},_r,{propertyName:0,elapsedTime:0,pseudoElement:0}),un=Za(va),$a=m({},dr,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),hn=Za($a),tr=m({},_r,{newState:0,oldState:0}),qn=Za(tr),jl=[9,13,27,32],ki=ka&&"CompositionEvent"in window,Hr=null;ka&&"documentMode"in document&&(Hr=document.documentMode);var fi=ka&&"TextEvent"in window&&!Hr,Fi=ka&&(!ki||Hr&&8<Hr&&11>=Hr),Ui=" ",Ei=!1;function _n(n,i){switch(n){case"keyup":return jl.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function R(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Fe=!1;function Ge(n,i){switch(n){case"compositionend":return R(i);case"keypress":return i.which!==32?null:(Ei=!0,Ui);case"textInput":return n=i.data,n===Ui&&Ei?null:n;default:return null}}function it(n,i){if(Fe)return n==="compositionend"||!ki&&_n(n,i)?(n=Xi(),Jr=Vo=Rr=null,Fe=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return Fi&&i.locale!=="ko"?null:i.data;default:return null}}var Ct={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Kt(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i==="input"?!!Ct[n.type]:i==="textarea"}function Tt(n,i,c,d){Wt?ms?ms.push(d):ms=[d]:Wt=d,i=nh(i,"onChange"),0<i.length&&(c=new Zr("onChange","change",null,c,d),n.push({event:c,listeners:i}))}var It=null,Rs=null;function na(n){b0(n,0)}function ra(n){var i=ha(n);if(Jn(i))return n}function Ds(n,i){if(n==="change")return i}var Ra=!1;if(ka){var Wa;if(ka){var Da="oninput"in document;if(!Da){var en=document.createElement("div");en.setAttribute("oninput","return;"),Da=typeof en.oninput=="function"}Wa=Da}else Wa=!1;Ra=Wa&&(!document.documentMode||9<document.documentMode)}function ur(){It&&(It.detachEvent("onpropertychange",Bs),Rs=It=null)}function Bs(n){if(n.propertyName==="value"&&ra(Rs)){var i=[];Tt(i,Rs,n,Pt(n)),dn(na,i)}}function ls(n,i,c){n==="focusin"?(ur(),It=i,Rs=c,It.attachEvent("onpropertychange",Bs)):n==="focusout"&&ur()}function pn(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return ra(Rs)}function Nr(n,i){if(n==="click")return ra(i)}function Ya(n,i){if(n==="input"||n==="change")return ra(i)}function Pr(n,i){return n===i&&(n!==0||1/n===1/i)||n!==n&&i!==i}var za=typeof Object.is=="function"?Object.is:Pr;function Kn(n,i){if(za(n,i))return!0;if(typeof n!="object"||n===null||typeof i!="object"||i===null)return!1;var c=Object.keys(n),d=Object.keys(i);if(c.length!==d.length)return!1;for(d=0;d<c.length;d++){var g=c[d];if(!ut.call(i,g)||!za(n[g],i[g]))return!1}return!0}function No(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function $o(n,i){var c=No(n);n=0;for(var d;c;){if(c.nodeType===3){if(d=n+c.textContent.length,n<=i&&d>=i)return{node:c,offset:i-n};n=d}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=No(c)}}function Li(n,i){return n&&i?n===i?!0:n&&n.nodeType===3?!1:i&&i.nodeType===3?Li(n,i.parentNode):"contains"in n?n.contains(i):n.compareDocumentPosition?!!(n.compareDocumentPosition(i)&16):!1:!1}function _l(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var i=ja(n.document);i instanceof n.HTMLIFrameElement;){try{var c=typeof i.contentWindow.location.href=="string"}catch{c=!1}if(c)n=i.contentWindow;else break;i=ja(n.document)}return i}function Qi(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i&&(i==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||i==="textarea"||n.contentEditable==="true")}var Co=ka&&"documentMode"in document&&11>=document.documentMode,Or=null,eo=null,ti=null,to=!1;function Mr(n,i,c){var d=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;to||Or==null||Or!==ja(d)||(d=Or,"selectionStart"in d&&Qi(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),ti&&Kn(ti,d)||(ti=d,d=nh(eo,"onSelect"),0<d.length&&(i=new Zr("onSelect","select",null,i,c),n.push({event:i,listeners:d}),i.target=Or)))}function sr(n,i){var c={};return c[n.toLowerCase()]=i.toLowerCase(),c["Webkit"+n]="webkit"+i,c["Moz"+n]="moz"+i,c}var Ys={animationend:sr("Animation","AnimationEnd"),animationiteration:sr("Animation","AnimationIteration"),animationstart:sr("Animation","AnimationStart"),transitionrun:sr("Transition","TransitionRun"),transitionstart:sr("Transition","TransitionStart"),transitioncancel:sr("Transition","TransitionCancel"),transitionend:sr("Transition","TransitionEnd")},ma={},tn={};ka&&(tn=document.createElement("div").style,"AnimationEvent"in window||(delete Ys.animationend.animation,delete Ys.animationiteration.animation,delete Ys.animationstart.animation),"TransitionEvent"in window||delete Ys.transitionend.transition);function Ia(n){if(ma[n])return ma[n];if(!Ys[n])return n;var i=Ys[n],c;for(c in i)if(i.hasOwnProperty(c)&&c in tn)return ma[n]=i[c];return n}var Ti=Ia("animationend"),Bl=Ia("animationiteration"),Wo=Ia("animationstart"),$c=Ia("transitionrun"),vu=Ia("transitionstart"),bu=Ia("transitioncancel"),KA=Ia("transitionend"),GA=new Map,Wc="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Wc.push("scrollEnd");function si(n,i){GA.set(n,i),ie(i,[n])}var Nl=new WeakMap;function zr(n,i){if(typeof n=="object"&&n!==null){var c=Nl.get(n);return c!==void 0?c:(i={value:n,source:i,stack:Ai(i)},Nl.set(n,i),i)}return{value:n,source:i,stack:Ai(i)}}var qr=[],Yo=0,Yc=0;function uc(){for(var n=Yo,i=Yc=Yo=0;i<n;){var c=qr[i];qr[i++]=null;var d=qr[i];qr[i++]=null;var g=qr[i];qr[i++]=null;var w=qr[i];if(qr[i++]=null,d!==null&&g!==null){var O=d.pending;O===null?g.next=g:(g.next=O.next,O.next=g),d.pending=g}w!==0&&Jc(c,g,w)}}function hc(n,i,c,d){qr[Yo++]=n,qr[Yo++]=i,qr[Yo++]=c,qr[Yo++]=d,Yc|=d,n.lanes|=d,n=n.alternate,n!==null&&(n.lanes|=d)}function Xc(n,i,c,d){return hc(n,i,c,d),Jo(n)}function Xo(n,i){return hc(n,null,null,i),Jo(n)}function Jc(n,i,c){n.lanes|=c;var d=n.alternate;d!==null&&(d.lanes|=c);for(var g=!1,w=n.return;w!==null;)w.childLanes|=c,d=w.alternate,d!==null&&(d.childLanes|=c),w.tag===22&&(n=w.stateNode,n===null||n._visibility&1||(g=!0)),n=w,w=w.return;return n.tag===3?(w=n.stateNode,g&&i!==null&&(g=31-bt(c),n=w.hiddenUpdates,d=n[g],d===null?n[g]=[i]:d.push(i),i.lane=c|536870912),w):null}function Jo(n){if(50<gd)throw gd=0,yf=null,Error(r(185));for(var i=n.return;i!==null;)n=i,i=n.return;return n.tag===3?n.stateNode:null}var Pn={};function ai(n,i,c,d){this.tag=n,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ar(n,i,c,d){return new ai(n,i,c,d)}function Cl(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Ri(n,i){var c=n.alternate;return c===null?(c=ar(n.tag,i,n.key,n.mode),c.elementType=n.elementType,c.type=n.type,c.stateNode=n.stateNode,c.alternate=n,n.alternate=c):(c.pendingProps=i,c.type=n.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=n.flags&65011712,c.childLanes=n.childLanes,c.lanes=n.lanes,c.child=n.child,c.memoizedProps=n.memoizedProps,c.memoizedState=n.memoizedState,c.updateQueue=n.updateQueue,i=n.dependencies,c.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},c.sibling=n.sibling,c.index=n.index,c.ref=n.ref,c.refCleanup=n.refCleanup,c}function pc(n,i){n.flags&=65011714;var c=n.alternate;return c===null?(n.childLanes=0,n.lanes=i,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=c.childLanes,n.lanes=c.lanes,n.child=c.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=c.memoizedProps,n.memoizedState=c.memoizedState,n.updateQueue=c.updateQueue,n.type=c.type,i=c.dependencies,n.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),n}function Zo(n,i,c,d,g,w){var O=0;if(d=n,typeof n=="function")Cl(n)&&(O=1);else if(typeof n=="string")O=tj(n,c,z.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case U:return n=ar(31,c,i,g),n.elementType=U,n.lanes=w,n;case C:return so(c.children,g,w,i);case Q:O=8,g|=24;break;case j:return n=ar(12,c,i,g|2),n.elementType=j,n.lanes=w,n;case ee:return n=ar(13,c,i,g),n.elementType=ee,n.lanes=w,n;case K:return n=ar(19,c,i,g),n.elementType=K,n.lanes=w,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case B:case P:O=10;break e;case L:O=9;break e;case F:O=11;break e;case q:O=14;break e;case E:O=16,d=null;break e}O=29,c=Error(r(130,n===null?"null":typeof n,"")),d=null}return i=ar(O,c,i,g),i.elementType=n,i.type=d,i.lanes=w,i}function so(n,i,c,d){return n=ar(7,n,d,i),n.lanes=c,n}function Zc(n,i,c){return n=ar(6,n,null,i),n.lanes=c,n}function fc(n,i,c){return i=ar(4,n.children!==null?n.children:[],n.key,i),i.lanes=c,i.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},i}var So=[],ao=0,Sl=null,eA=0,ni=[],Kr=0,el=null,no=1,ro="";function tl(n,i){So[ao++]=eA,So[ao++]=Sl,Sl=n,eA=i}function wu(n,i,c){ni[Kr++]=no,ni[Kr++]=ro,ni[Kr++]=el,el=n;var d=no;n=ro;var g=32-bt(d)-1;d&=~(1<<g),c+=1;var w=32-bt(i)+g;if(30<w){var O=g-g%5;w=(d&(1<<O)-1).toString(32),d>>=O,g-=O,no=1<<32-bt(i)+g|c<<g|d,ro=w+n}else no=1<<w|c<<g|d,ro=n}function mc(n){n.return!==null&&(tl(n,1),wu(n,1,0))}function gc(n){for(;n===Sl;)Sl=So[--ao],So[ao]=null,eA=So[--ao],So[ao]=null;for(;n===el;)el=ni[--Kr],ni[Kr]=null,ro=ni[--Kr],ni[Kr]=null,no=ni[--Kr],ni[Kr]=null}var Bn=null,sn=null,Aa=!1,ko=null,Di=!1,VA=Error(r(519));function sl(n){var i=Error(r(418,""));throw kl(zr(i,n)),VA}function ju(n){var i=n.stateNode,c=n.type,d=n.memoizedProps;switch(i[Vt]=n,i[Ot]=d,c){case"dialog":Js("cancel",i),Js("close",i);break;case"iframe":case"object":case"embed":Js("load",i);break;case"video":case"audio":for(c=0;c<yd.length;c++)Js(yd[c],i);break;case"source":Js("error",i);break;case"img":case"image":case"link":Js("error",i),Js("load",i);break;case"details":Js("toggle",i);break;case"input":Js("invalid",i),Zn(i,d.value,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name,!0),ea(i);break;case"select":Js("invalid",i);break;case"textarea":Js("invalid",i),di(i,d.value,d.defaultValue,d.children),ea(i)}c=d.children,typeof c!="string"&&typeof c!="number"&&typeof c!="bigint"||i.textContent===""+c||d.suppressHydrationWarning===!0||B0(i.textContent,c)?(d.popover!=null&&(Js("beforetoggle",i),Js("toggle",i)),d.onScroll!=null&&Js("scroll",i),d.onScrollEnd!=null&&Js("scrollend",i),d.onClick!=null&&(i.onclick=rh),i=!0):i=!1,i||sl(n)}function io(n){for(Bn=n.return;Bn;)switch(Bn.tag){case 5:case 13:Di=!1;return;case 27:case 3:Di=!0;return;default:Bn=Bn.return}}function hr(n){if(n!==Bn)return!1;if(!Aa)return io(n),Aa=!0,!1;var i=n.tag,c;if((c=i!==3&&i!==27)&&((c=i===5)&&(c=n.type,c=!(c!=="form"&&c!=="button")||Tf(n.type,n.memoizedProps)),c=!c),c&&sn&&sl(n),io(n),i===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(317));e:{for(n=n.nextSibling,i=0;n;){if(n.nodeType===8)if(c=n.data,c==="/$"){if(i===0){sn=fo(n.nextSibling);break e}i--}else c!=="$"&&c!=="$!"&&c!=="$?"||i++;n=n.nextSibling}sn=null}}else i===27?(i=sn,Kl(n.type)?(n=Hf,Hf=null,sn=n):sn=i):sn=Bn?fo(n.stateNode.nextSibling):null;return!0}function Gr(){sn=Bn=null,Aa=!1}function _u(){var n=ko;return n!==null&&(ii===null?ii=n:ii.push.apply(ii,n),ko=null),n}function kl(n){ko===null?ko=[n]:ko.push(n)}var Ii=he(null),On=null,oo=null;function Fo(n,i,c){T(Ii,i._currentValue),i._currentValue=c}function Hi(n){n._currentValue=Ii.current,k(Ii)}function tA(n,i,c){for(;n!==null;){var d=n.alternate;if((n.childLanes&i)!==i?(n.childLanes|=i,d!==null&&(d.childLanes|=i)):d!==null&&(d.childLanes&i)!==i&&(d.childLanes|=i),n===c)break;n=n.return}}function sA(n,i,c,d){var g=n.child;for(g!==null&&(g.return=n);g!==null;){var w=g.dependencies;if(w!==null){var O=g.child;w=w.firstContext;e:for(;w!==null;){var ce=w;w=g;for(var Ne=0;Ne<i.length;Ne++)if(ce.context===i[Ne]){w.lanes|=c,ce=w.alternate,ce!==null&&(ce.lanes|=c),tA(w.return,c,n),d||(O=null);break e}w=ce.next}}else if(g.tag===18){if(O=g.return,O===null)throw Error(r(341));O.lanes|=c,w=O.alternate,w!==null&&(w.lanes|=c),tA(O,c,n),O=null}else O=g.child;if(O!==null)O.return=g;else for(O=g;O!==null;){if(O===n){O=null;break}if(g=O.sibling,g!==null){g.return=O.return,O=g;break}O=O.return}g=O}}function Fl(n,i,c,d){n=null;for(var g=i,w=!1;g!==null;){if(!w){if((g.flags&524288)!==0)w=!0;else if((g.flags&262144)!==0)break}if(g.tag===10){var O=g.alternate;if(O===null)throw Error(r(387));if(O=O.memoizedProps,O!==null){var ce=g.type;za(g.pendingProps.value,O.value)||(n!==null?n.push(ce):n=[ce])}}else if(g===W.current){if(O=g.alternate,O===null)throw Error(r(387));O.memoizedState.memoizedState!==g.memoizedState.memoizedState&&(n!==null?n.push(Bd):n=[Bd])}g=g.return}n!==null&&sA(i,n,c,d),i.flags|=262144}function aA(n){for(n=n.firstContext;n!==null;){if(!za(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function Pi(n){On=n,oo=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function Nn(n){return nA(On,n)}function Uo(n,i){return On===null&&Pi(n),nA(n,i)}function nA(n,i){var c=i._currentValue;if(i={context:i,memoizedValue:c,next:null},oo===null){if(n===null)throw Error(r(308));oo=i,n.dependencies={lanes:0,firstContext:i},n.flags|=524288}else oo=oo.next=i;return c}var zp=typeof AbortController<"u"?AbortController:function(){var n=[],i=this.signal={aborted:!1,addEventListener:function(c,d){n.push(d)}};this.abort=function(){i.aborted=!0,n.forEach(function(c){return c()})}},Bu=t.unstable_scheduleCallback,qp=t.unstable_NormalPriority,Cn={$$typeof:P,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function $A(){return{controller:new zp,data:new Map,refCount:0}}function xc(n){n.refCount--,n.refCount===0&&Bu(qp,function(){n.controller.abort()})}var yc=null,WA=0,al=0,lo=null;function Kp(n,i){if(yc===null){var c=yc=[];WA=0,al=Nf(),lo={status:"pending",value:void 0,then:function(d){c.push(d)}}}return WA++,i.then(Nu,Nu),i}function Nu(){if(--WA===0&&yc!==null){lo!==null&&(lo.status="fulfilled");var n=yc;yc=null,al=0,lo=null;for(var i=0;i<n.length;i++)(0,n[i])()}}function Cu(n,i){var c=[],d={status:"pending",value:null,reason:null,then:function(g){c.push(g)}};return n.then(function(){d.status="fulfilled",d.value=i;for(var g=0;g<c.length;g++)(0,c[g])(i)},function(g){for(d.status="rejected",d.reason=g,g=0;g<c.length;g++)(0,c[g])(void 0)}),d}var f=Z.S;Z.S=function(n,i){typeof i=="object"&&i!==null&&typeof i.then=="function"&&Kp(n,i),f!==null&&f(n,i)};var y=he(null);function S(){var n=y.current;return n!==null?n:qa.pooledCache}function D(n,i){i===null?T(y,y.current):T(y,i.pool)}function Y(){var n=S();return n===null?null:{parent:Cn._currentValue,pool:n}}var se=Error(r(460)),ne=Error(r(474)),ue=Error(r(542)),pe={then:function(){}};function be(n){return n=n.status,n==="fulfilled"||n==="rejected"}function Ue(){}function qe(n,i,c){switch(c=n[c],c===void 0?n.push(i):c!==i&&(i.then(Ue,Ue),i=c),i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,Pe(n),n;default:if(typeof i.status=="string")i.then(Ue,Ue);else{if(n=qa,n!==null&&100<n.shellSuspendCounter)throw Error(r(482));n=i,n.status="pending",n.then(function(d){if(i.status==="pending"){var g=i;g.status="fulfilled",g.value=d}},function(d){if(i.status==="pending"){var g=i;g.status="rejected",g.reason=d}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,Pe(n),n}throw ye=i,se}}var ye=null;function Te(){if(ye===null)throw Error(r(459));var n=ye;return ye=null,n}function Pe(n){if(n===se||n===ue)throw Error(r(483))}var nt=!1;function ze(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function At(n,i){n=n.updateQueue,i.updateQueue===n&&(i.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function lt(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function Nt(n,i,c){var d=n.updateQueue;if(d===null)return null;if(d=d.shared,(Ba&2)!==0){var g=d.pending;return g===null?i.next=i:(i.next=g.next,g.next=i),d.pending=i,i=Jo(n),Jc(n,null,c),i}return hc(n,d,i,c),Jo(n)}function yt(n,i,c){if(i=i.updateQueue,i!==null&&(i=i.shared,(c&4194048)!==0)){var d=i.lanes;d&=n.pendingLanes,c|=d,i.lanes=c,oe(n,c)}}function hs(n,i){var c=n.updateQueue,d=n.alternate;if(d!==null&&(d=d.updateQueue,c===d)){var g=null,w=null;if(c=c.firstBaseUpdate,c!==null){do{var O={lane:c.lane,tag:c.tag,payload:c.payload,callback:null,next:null};w===null?g=w=O:w=w.next=O,c=c.next}while(c!==null);w===null?g=w=i:w=w.next=i}else g=w=i;c={baseState:d.baseState,firstBaseUpdate:g,lastBaseUpdate:w,shared:d.shared,callbacks:d.callbacks},n.updateQueue=c;return}n=c.lastBaseUpdate,n===null?c.firstBaseUpdate=i:n.next=i,c.lastBaseUpdate=i}var es=!1;function Fs(){if(es){var n=lo;if(n!==null)throw n}}function ns(n,i,c,d){es=!1;var g=n.updateQueue;nt=!1;var w=g.firstBaseUpdate,O=g.lastBaseUpdate,ce=g.shared.pending;if(ce!==null){g.shared.pending=null;var Ne=ce,Ke=Ne.next;Ne.next=null,O===null?w=Ke:O.next=Ke,O=Ne;var ht=n.alternate;ht!==null&&(ht=ht.updateQueue,ce=ht.lastBaseUpdate,ce!==O&&(ce===null?ht.firstBaseUpdate=Ke:ce.next=Ke,ht.lastBaseUpdate=Ne))}if(w!==null){var vt=g.baseState;O=0,ht=Ke=Ne=null,ce=w;do{var Ye=ce.lane&-536870913,Je=Ye!==ce.lane;if(Je?(oa&Ye)===Ye:(d&Ye)===Ye){Ye!==0&&Ye===al&&(es=!0),ht!==null&&(ht=ht.next={lane:0,tag:ce.tag,payload:ce.payload,callback:null,next:null});e:{var ks=n,js=ce;Ye=i;var Ea=c;switch(js.tag){case 1:if(ks=js.payload,typeof ks=="function"){vt=ks.call(Ea,vt,Ye);break e}vt=ks;break e;case 3:ks.flags=ks.flags&-65537|128;case 0:if(ks=js.payload,Ye=typeof ks=="function"?ks.call(Ea,vt,Ye):ks,Ye==null)break e;vt=m({},vt,Ye);break e;case 2:nt=!0}}Ye=ce.callback,Ye!==null&&(n.flags|=64,Je&&(n.flags|=8192),Je=g.callbacks,Je===null?g.callbacks=[Ye]:Je.push(Ye))}else Je={lane:Ye,tag:ce.tag,payload:ce.payload,callback:ce.callback,next:null},ht===null?(Ke=ht=Je,Ne=vt):ht=ht.next=Je,O|=Ye;if(ce=ce.next,ce===null){if(ce=g.shared.pending,ce===null)break;Je=ce,ce=Je.next,Je.next=null,g.lastBaseUpdate=Je,g.shared.pending=null}}while(!0);ht===null&&(Ne=vt),g.baseState=Ne,g.firstBaseUpdate=Ke,g.lastBaseUpdate=ht,w===null&&(g.shared.lanes=0),Ol|=O,n.lanes=O,n.memoizedState=vt}}function Vs(n,i){if(typeof n!="function")throw Error(r(191,n));n.call(i)}function vn(n,i){var c=n.callbacks;if(c!==null)for(n.callbacks=null,n=0;n<c.length;n++)Vs(c[n],i)}var Ss=he(null),rs=he(0);function zt(n,i){n=dl,T(rs,n),T(Ss,i),dl=n|i.baseLanes}function Xa(){T(rs,dl),T(Ss,Ss.current)}function Us(){dl=rs.current,k(Ss),k(rs)}var Is=0,cs=null,Ls=null,ta=null,Ha=!1,fn=!1,mn=!1,an=0,zs=0,sa=null,nn=0;function ws(){throw Error(r(321))}function Sn(n,i){if(i===null)return!1;for(var c=0;c<i.length&&c<n.length;c++)if(!za(n[c],i[c]))return!1;return!0}function Vr(n,i,c,d,g,w){return Is=w,cs=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,Z.H=n===null||n.memoizedState===null?rx:ix,mn=!1,w=c(d,g),mn=!1,fn&&(w=pr(i,c,d,g)),rn(n),w}function rn(n){Z.H=Hu;var i=Ls!==null&&Ls.next!==null;if(Is=0,ta=Ls=cs=null,Ha=!1,zs=0,sa=null,i)throw Error(r(300));n===null||rr||(n=n.dependencies,n!==null&&aA(n)&&(rr=!0))}function pr(n,i,c,d){cs=n;var g=0;do{if(fn&&(sa=null),zs=0,fn=!1,25<=g)throw Error(r(301));if(g+=1,ta=Ls=null,n.updateQueue!=null){var w=n.updateQueue;w.lastEffect=null,w.events=null,w.stores=null,w.memoCache!=null&&(w.memoCache.index=0)}Z.H=u2,w=i(c,d)}while(fn);return w}function _a(){var n=Z.H,i=n.useState()[0];return i=typeof i.then=="function"?Vn(i):i,n=n.useState()[0],(Ls!==null?Ls.memoizedState:null)!==n&&(cs.flags|=1024),i}function gn(){var n=an!==0;return an=0,n}function fr(n,i,c){i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~c}function Gn(n){if(Ha){for(n=n.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}Ha=!1}Is=0,ta=Ls=cs=null,fn=!1,zs=an=0,sa=null}function Fa(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ta===null?cs.memoizedState=ta=n:ta=ta.next=n,ta}function ia(){if(Ls===null){var n=cs.alternate;n=n!==null?n.memoizedState:null}else n=Ls.next;var i=ta===null?cs.memoizedState:ta.next;if(i!==null)ta=i,Ls=n;else{if(n===null)throw cs.alternate===null?Error(r(467)):Error(r(310));Ls=n,n={memoizedState:Ls.memoizedState,baseState:Ls.baseState,baseQueue:Ls.baseQueue,queue:Ls.queue,next:null},ta===null?cs.memoizedState=ta=n:ta=ta.next=n}return ta}function nr(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Vn(n){var i=zs;return zs+=1,sa===null&&(sa=[]),n=qe(sa,n,i),i=cs,(ta===null?i.memoizedState:ta.next)===null&&(i=i.alternate,Z.H=i===null||i.memoizedState===null?rx:ix),n}function ga(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return Vn(n);if(n.$$typeof===P)return Nn(n)}throw Error(r(438,String(n)))}function mr(n){var i=null,c=cs.updateQueue;if(c!==null&&(i=c.memoCache),i==null){var d=cs.alternate;d!==null&&(d=d.updateQueue,d!==null&&(d=d.memoCache,d!=null&&(i={data:d.data.map(function(g){return g.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),c===null&&(c=nr(),cs.updateQueue=c),c.memoCache=i,c=i.data[i.index],c===void 0)for(c=i.data[i.index]=Array(n),d=0;d<n;d++)c[d]=V;return i.index++,c}function kn(n,i){return typeof i=="function"?i(n):i}function Oi(n){var i=ia();return mi(i,Ls,n)}function mi(n,i,c){var d=n.queue;if(d===null)throw Error(r(311));d.lastRenderedReducer=c;var g=n.baseQueue,w=d.pending;if(w!==null){if(g!==null){var O=g.next;g.next=w.next,w.next=O}i.baseQueue=g=w,d.pending=null}if(w=n.baseState,g===null)n.memoizedState=w;else{i=g.next;var ce=O=null,Ne=null,Ke=i,ht=!1;do{var vt=Ke.lane&-536870913;if(vt!==Ke.lane?(oa&vt)===vt:(Is&vt)===vt){var Ye=Ke.revertLane;if(Ye===0)Ne!==null&&(Ne=Ne.next={lane:0,revertLane:0,action:Ke.action,hasEagerState:Ke.hasEagerState,eagerState:Ke.eagerState,next:null}),vt===al&&(ht=!0);else if((Is&Ye)===Ye){Ke=Ke.next,Ye===al&&(ht=!0);continue}else vt={lane:0,revertLane:Ke.revertLane,action:Ke.action,hasEagerState:Ke.hasEagerState,eagerState:Ke.eagerState,next:null},Ne===null?(ce=Ne=vt,O=w):Ne=Ne.next=vt,cs.lanes|=Ye,Ol|=Ye;vt=Ke.action,mn&&c(w,vt),w=Ke.hasEagerState?Ke.eagerState:c(w,vt)}else Ye={lane:vt,revertLane:Ke.revertLane,action:Ke.action,hasEagerState:Ke.hasEagerState,eagerState:Ke.eagerState,next:null},Ne===null?(ce=Ne=Ye,O=w):Ne=Ne.next=Ye,cs.lanes|=vt,Ol|=vt;Ke=Ke.next}while(Ke!==null&&Ke!==i);if(Ne===null?O=w:Ne.next=ce,!za(w,n.memoizedState)&&(rr=!0,ht&&(c=lo,c!==null)))throw c;n.memoizedState=w,n.baseState=O,n.baseQueue=Ne,d.lastRenderedState=w}return g===null&&(d.lanes=0),[n.memoizedState,d.dispatch]}function Fn(n){var i=ia(),c=i.queue;if(c===null)throw Error(r(311));c.lastRenderedReducer=n;var d=c.dispatch,g=c.pending,w=i.memoizedState;if(g!==null){c.pending=null;var O=g=g.next;do w=n(w,O.action),O=O.next;while(O!==g);za(w,i.memoizedState)||(rr=!0),i.memoizedState=w,i.baseQueue===null&&(i.baseState=w),c.lastRenderedState=w}return[w,d]}function vc(n,i,c){var d=cs,g=ia(),w=Aa;if(w){if(c===void 0)throw Error(r(407));c=c()}else c=i();var O=!za((Ls||g).memoizedState,c);O&&(g.memoizedState=c,rr=!0),g=g.queue;var ce=Ul.bind(null,d,g,n);if(Ql(2048,8,ce,[n]),g.getSnapshot!==i||O||ta!==null&&ta.memoizedState.tag&1){if(d.flags|=2048,Ao(9,_c(),bc.bind(null,d,g,c,i),null),qa===null)throw Error(r(349));w||(Is&124)!==0||rA(d,i,c)}return c}function rA(n,i,c){n.flags|=16384,n={getSnapshot:i,value:c},i=cs.updateQueue,i===null?(i=nr(),cs.updateQueue=i,i.stores=[n]):(c=i.stores,c===null?i.stores=[n]:c.push(n))}function bc(n,i,c,d){i.value=c,i.getSnapshot=d,Su(i)&&ku(n)}function Ul(n,i,c){return c(function(){Su(i)&&ku(n)})}function Su(n){var i=n.getSnapshot;n=n.value;try{var c=i();return!za(n,c)}catch{return!0}}function ku(n){var i=Xo(n,2);i!==null&&wi(i,n,2)}function wc(n){var i=Fa();if(typeof n=="function"){var c=n;if(n=c(),mn){wt(!0);try{c()}finally{wt(!1)}}}return i.memoizedState=i.baseState=n,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:kn,lastRenderedState:n},i}function co(n,i,c,d){return n.baseState=c,mi(n,Ls,typeof d=="function"?d:kn)}function Gp(n,i,c,d,g){if(Iu(n))throw Error(r(485));if(n=i.action,n!==null){var w={payload:g,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(O){w.listeners.push(O)}};Z.T!==null?c(!0):w.isTransition=!1,d(w),c=i.pending,c===null?(w.next=i.pending=w,Fu(i,w)):(w.next=c.next,i.pending=c.next=w)}}function Fu(n,i){var c=i.action,d=i.payload,g=n.state;if(i.isTransition){var w=Z.T,O={};Z.T=O;try{var ce=c(g,d),Ne=Z.S;Ne!==null&&Ne(O,ce),Uu(n,i,ce)}catch(Ke){El(n,i,Ke)}finally{Z.T=w}}else try{w=c(g,d),Uu(n,i,w)}catch(Ke){El(n,i,Ke)}}function Uu(n,i,c){c!==null&&typeof c=="object"&&typeof c.then=="function"?c.then(function(d){YA(n,i,d)},function(d){return El(n,i,d)}):YA(n,i,c)}function YA(n,i,c){i.status="fulfilled",i.value=c,XA(i),n.state=c,i=n.pending,i!==null&&(c=i.next,c===i?n.pending=null:(c=c.next,i.next=c,Fu(n,c)))}function El(n,i,c){var d=n.pending;if(n.pending=null,d!==null){d=d.next;do i.status="rejected",i.reason=c,XA(i),i=i.next;while(i!==d)}n.action=null}function XA(n){n=n.listeners;for(var i=0;i<n.length;i++)(0,n[i])()}function JA(n,i){return i}function jc(n,i){if(Aa){var c=qa.formState;if(c!==null){e:{var d=cs;if(Aa){if(sn){t:{for(var g=sn,w=Di;g.nodeType!==8;){if(!w){g=null;break t}if(g=fo(g.nextSibling),g===null){g=null;break t}}w=g.data,g=w==="F!"||w==="F"?g:null}if(g){sn=fo(g.nextSibling),d=g.data==="F!";break e}}sl(d)}d=!1}d&&(i=c[0])}}return c=Fa(),c.memoizedState=c.baseState=i,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:JA,lastRenderedState:i},c.queue=d,c=sx.bind(null,cs,d),d.dispatch=c,d=wc(!1),w=Vp.bind(null,cs,!1,d.queue),d=Fa(),g={state:i,dispatch:null,action:n,pending:null},d.queue=g,c=Gp.bind(null,cs,g,w,c),g.dispatch=c,d.memoizedState=n,[i,c,!1]}function iA(n){var i=ia();return Ll(i,Ls,n)}function Ll(n,i,c){if(i=mi(n,i,JA)[0],n=Oi(kn)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var d=Vn(i)}catch(O){throw O===se?ue:O}else d=i;i=ia();var g=i.queue,w=g.dispatch;return c!==i.memoizedState&&(cs.flags|=2048,Ao(9,_c(),Eu.bind(null,g,c),null)),[d,w,n]}function Eu(n,i){n.action=i}function Lu(n){var i=ia(),c=Ls;if(c!==null)return Ll(i,c,n);ia(),i=i.memoizedState,c=ia();var d=c.queue.dispatch;return c.memoizedState=n,[i,d,!1]}function Ao(n,i,c,d){return n={tag:n,create:c,deps:d,inst:i,next:null},i=cs.updateQueue,i===null&&(i=nr(),cs.updateQueue=i),c=i.lastEffect,c===null?i.lastEffect=n.next=n:(d=c.next,c.next=n,n.next=d,i.lastEffect=n),n}function _c(){return{destroy:void 0,resource:void 0}}function oA(){return ia().memoizedState}function gi(n,i,c,d){var g=Fa();d=d===void 0?null:d,cs.flags|=n,g.memoizedState=Ao(1|i,_c(),c,d)}function Ql(n,i,c,d){var g=ia();d=d===void 0?null:d;var w=g.memoizedState.inst;Ls!==null&&d!==null&&Sn(d,Ls.memoizedState.deps)?g.memoizedState=Ao(i,w,c,d):(cs.flags|=n,g.memoizedState=Ao(1|i,w,c,d))}function ZA(n,i){gi(8390656,8,n,i)}function Qu(n,i){Ql(2048,8,n,i)}function ed(n,i){return Ql(4,2,n,i)}function nl(n,i){return Ql(4,4,n,i)}function Tu(n,i){if(typeof i=="function"){n=n();var c=i(n);return function(){typeof c=="function"?c():i(null)}}if(i!=null)return n=n(),i.current=n,function(){i.current=null}}function td(n,i,c){c=c!=null?c.concat([n]):null,Ql(4,4,Tu.bind(null,i,n),c)}function sd(){}function ad(n,i){var c=ia();i=i===void 0?null:i;var d=c.memoizedState;return i!==null&&Sn(i,d[1])?d[0]:(c.memoizedState=[n,i],n)}function Ru(n,i){var c=ia();i=i===void 0?null:i;var d=c.memoizedState;if(i!==null&&Sn(i,d[1]))return d[0];if(d=n(),mn){wt(!0);try{n()}finally{wt(!1)}}return c.memoizedState=[d,i],d}function rl(n,i,c){return c===void 0||(Is&1073741824)!==0?n.memoizedState=i:(n.memoizedState=c,n=Jx(),cs.lanes|=n,Ol|=n,c)}function lA(n,i,c,d){return za(c,i)?c:Ss.current!==null?(n=rl(n,c,d),za(n,i)||(rr=!0),n):(Is&42)===0?(rr=!0,n.memoizedState=c):(n=Jx(),cs.lanes|=n,Ol|=n,i)}function Bc(n,i,c,d,g){var w=fe.p;fe.p=w!==0&&8>w?w:8;var O=Z.T,ce={};Z.T=ce,Vp(n,!1,i,c);try{var Ne=g(),Ke=Z.S;if(Ke!==null&&Ke(ce,Ne),Ne!==null&&typeof Ne=="object"&&typeof Ne.then=="function"){var ht=Cu(Ne,d);od(n,i,ht,bi(n))}else od(n,i,d,bi(n))}catch(vt){od(n,i,{then:function(){},status:"rejected",reason:vt},bi())}finally{fe.p=w,Z.T=O}}function uo(){}function Mi(n,i,c,d){if(n.tag!==5)throw Error(r(476));var g=ho(n).queue;Bc(n,g,i,Ae,c===null?uo:function(){return Nc(n),c(d)})}function ho(n){var i=n.memoizedState;if(i!==null)return i;i={memoizedState:Ae,baseState:Ae,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:kn,lastRenderedState:Ae},next:null};var c={};return i.next={memoizedState:c,baseState:c,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:kn,lastRenderedState:c},next:null},n.memoizedState=i,n=n.alternate,n!==null&&(n.memoizedState=i),i}function Nc(n){var i=ho(n).next.queue;od(n,i,{},bi())}function Cc(){return Nn(Bd)}function nd(){return ia().memoizedState}function Du(){return ia().memoizedState}function rd(n){for(var i=n.return;i!==null;){switch(i.tag){case 24:case 3:var c=bi();n=lt(c);var d=Nt(i,n,c);d!==null&&(wi(d,i,c),yt(d,i,c)),i={cache:$A()},n.payload=i;return}i=i.return}}function id(n,i,c){var d=bi();c={lane:d,revertLane:0,action:c,hasEagerState:!1,eagerState:null,next:null},Iu(n)?ax(i,c):(c=Xc(n,i,c,d),c!==null&&(wi(c,n,d),nx(c,i,d)))}function sx(n,i,c){var d=bi();od(n,i,c,d)}function od(n,i,c,d){var g={lane:d,revertLane:0,action:c,hasEagerState:!1,eagerState:null,next:null};if(Iu(n))ax(i,g);else{var w=n.alternate;if(n.lanes===0&&(w===null||w.lanes===0)&&(w=i.lastRenderedReducer,w!==null))try{var O=i.lastRenderedState,ce=w(O,c);if(g.hasEagerState=!0,g.eagerState=ce,za(ce,O))return hc(n,i,g,0),qa===null&&uc(),!1}catch{}finally{}if(c=Xc(n,i,g,d),c!==null)return wi(c,n,d),nx(c,i,d),!0}return!1}function Vp(n,i,c,d){if(d={lane:2,revertLane:Nf(),action:d,hasEagerState:!1,eagerState:null,next:null},Iu(n)){if(i)throw Error(r(479))}else i=Xc(n,c,d,2),i!==null&&wi(i,n,2)}function Iu(n){var i=n.alternate;return n===cs||i!==null&&i===cs}function ax(n,i){fn=Ha=!0;var c=n.pending;c===null?i.next=i:(i.next=c.next,c.next=i),n.pending=i}function nx(n,i,c){if((c&4194048)!==0){var d=i.lanes;d&=n.pendingLanes,c|=d,i.lanes=c,oe(n,c)}}var Hu={readContext:Nn,use:ga,useCallback:ws,useContext:ws,useEffect:ws,useImperativeHandle:ws,useLayoutEffect:ws,useInsertionEffect:ws,useMemo:ws,useReducer:ws,useRef:ws,useState:ws,useDebugValue:ws,useDeferredValue:ws,useTransition:ws,useSyncExternalStore:ws,useId:ws,useHostTransitionStatus:ws,useFormState:ws,useActionState:ws,useOptimistic:ws,useMemoCache:ws,useCacheRefresh:ws},rx={readContext:Nn,use:ga,useCallback:function(n,i){return Fa().memoizedState=[n,i===void 0?null:i],n},useContext:Nn,useEffect:ZA,useImperativeHandle:function(n,i,c){c=c!=null?c.concat([n]):null,gi(4194308,4,Tu.bind(null,i,n),c)},useLayoutEffect:function(n,i){return gi(4194308,4,n,i)},useInsertionEffect:function(n,i){gi(4,2,n,i)},useMemo:function(n,i){var c=Fa();i=i===void 0?null:i;var d=n();if(mn){wt(!0);try{n()}finally{wt(!1)}}return c.memoizedState=[d,i],d},useReducer:function(n,i,c){var d=Fa();if(c!==void 0){var g=c(i);if(mn){wt(!0);try{c(i)}finally{wt(!1)}}}else g=i;return d.memoizedState=d.baseState=g,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:g},d.queue=n,n=n.dispatch=id.bind(null,cs,n),[d.memoizedState,n]},useRef:function(n){var i=Fa();return n={current:n},i.memoizedState=n},useState:function(n){n=wc(n);var i=n.queue,c=sx.bind(null,cs,i);return i.dispatch=c,[n.memoizedState,c]},useDebugValue:sd,useDeferredValue:function(n,i){var c=Fa();return rl(c,n,i)},useTransition:function(){var n=wc(!1);return n=Bc.bind(null,cs,n.queue,!0,!1),Fa().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,i,c){var d=cs,g=Fa();if(Aa){if(c===void 0)throw Error(r(407));c=c()}else{if(c=i(),qa===null)throw Error(r(349));(oa&124)!==0||rA(d,i,c)}g.memoizedState=c;var w={value:c,getSnapshot:i};return g.queue=w,ZA(Ul.bind(null,d,w,n),[n]),d.flags|=2048,Ao(9,_c(),bc.bind(null,d,w,c,i),null),c},useId:function(){var n=Fa(),i=qa.identifierPrefix;if(Aa){var c=ro,d=no;c=(d&~(1<<32-bt(d)-1)).toString(32)+c,i=""+i+"R"+c,c=an++,0<c&&(i+="H"+c.toString(32)),i+=""}else c=nn++,i=""+i+"r"+c.toString(32)+"";return n.memoizedState=i},useHostTransitionStatus:Cc,useFormState:jc,useActionState:jc,useOptimistic:function(n){var i=Fa();i.memoizedState=i.baseState=n;var c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=c,i=Vp.bind(null,cs,!0,c),c.dispatch=i,[n,i]},useMemoCache:mr,useCacheRefresh:function(){return Fa().memoizedState=rd.bind(null,cs)}},ix={readContext:Nn,use:ga,useCallback:ad,useContext:Nn,useEffect:Qu,useImperativeHandle:td,useInsertionEffect:ed,useLayoutEffect:nl,useMemo:Ru,useReducer:Oi,useRef:oA,useState:function(){return Oi(kn)},useDebugValue:sd,useDeferredValue:function(n,i){var c=ia();return lA(c,Ls.memoizedState,n,i)},useTransition:function(){var n=Oi(kn)[0],i=ia().memoizedState;return[typeof n=="boolean"?n:Vn(n),i]},useSyncExternalStore:vc,useId:nd,useHostTransitionStatus:Cc,useFormState:iA,useActionState:iA,useOptimistic:function(n,i){var c=ia();return co(c,Ls,n,i)},useMemoCache:mr,useCacheRefresh:Du},u2={readContext:Nn,use:ga,useCallback:ad,useContext:Nn,useEffect:Qu,useImperativeHandle:td,useInsertionEffect:ed,useLayoutEffect:nl,useMemo:Ru,useReducer:Fn,useRef:oA,useState:function(){return Fn(kn)},useDebugValue:sd,useDeferredValue:function(n,i){var c=ia();return Ls===null?rl(c,n,i):lA(c,Ls.memoizedState,n,i)},useTransition:function(){var n=Fn(kn)[0],i=ia().memoizedState;return[typeof n=="boolean"?n:Vn(n),i]},useSyncExternalStore:vc,useId:nd,useHostTransitionStatus:Cc,useFormState:Lu,useActionState:Lu,useOptimistic:function(n,i){var c=ia();return Ls!==null?co(c,Ls,n,i):(c.baseState=n,[n,c.queue.dispatch])},useMemoCache:mr,useCacheRefresh:Du},cA=null,ld=0;function Pu(n){var i=ld;return ld+=1,cA===null&&(cA=[]),qe(cA,n,i)}function cd(n,i){i=i.props.ref,n.ref=i!==void 0?i:null}function Ou(n,i){throw i.$$typeof===v?Error(r(525)):(n=Object.prototype.toString.call(i),Error(r(31,n==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":n)))}function ox(n){var i=n._init;return i(n._payload)}function lx(n){function i(He,Le){if(n){var Me=He.deletions;Me===null?(He.deletions=[Le],He.flags|=16):Me.push(Le)}}function c(He,Le){if(!n)return null;for(;Le!==null;)i(He,Le),Le=Le.sibling;return null}function d(He){for(var Le=new Map;He!==null;)He.key!==null?Le.set(He.key,He):Le.set(He.index,He),He=He.sibling;return Le}function g(He,Le){return He=Ri(He,Le),He.index=0,He.sibling=null,He}function w(He,Le,Me){return He.index=Me,n?(Me=He.alternate,Me!==null?(Me=Me.index,Me<Le?(He.flags|=67108866,Le):Me):(He.flags|=67108866,Le)):(He.flags|=1048576,Le)}function O(He){return n&&He.alternate===null&&(He.flags|=67108866),He}function ce(He,Le,Me,ft){return Le===null||Le.tag!==6?(Le=Zc(Me,He.mode,ft),Le.return=He,Le):(Le=g(Le,Me),Le.return=He,Le)}function Ne(He,Le,Me,ft){var us=Me.type;return us===C?ht(He,Le,Me.props.children,ft,Me.key):Le!==null&&(Le.elementType===us||typeof us=="object"&&us!==null&&us.$$typeof===E&&ox(us)===Le.type)?(Le=g(Le,Me.props),cd(Le,Me),Le.return=He,Le):(Le=Zo(Me.type,Me.key,Me.props,null,He.mode,ft),cd(Le,Me),Le.return=He,Le)}function Ke(He,Le,Me,ft){return Le===null||Le.tag!==4||Le.stateNode.containerInfo!==Me.containerInfo||Le.stateNode.implementation!==Me.implementation?(Le=fc(Me,He.mode,ft),Le.return=He,Le):(Le=g(Le,Me.children||[]),Le.return=He,Le)}function ht(He,Le,Me,ft,us){return Le===null||Le.tag!==7?(Le=so(Me,He.mode,ft,us),Le.return=He,Le):(Le=g(Le,Me),Le.return=He,Le)}function vt(He,Le,Me){if(typeof Le=="string"&&Le!==""||typeof Le=="number"||typeof Le=="bigint")return Le=Zc(""+Le,He.mode,Me),Le.return=He,Le;if(typeof Le=="object"&&Le!==null){switch(Le.$$typeof){case b:return Me=Zo(Le.type,Le.key,Le.props,null,He.mode,Me),cd(Me,Le),Me.return=He,Me;case x:return Le=fc(Le,He.mode,Me),Le.return=He,Le;case E:var ft=Le._init;return Le=ft(Le._payload),vt(He,Le,Me)}if(G(Le)||I(Le))return Le=so(Le,He.mode,Me,null),Le.return=He,Le;if(typeof Le.then=="function")return vt(He,Pu(Le),Me);if(Le.$$typeof===P)return vt(He,Uo(He,Le),Me);Ou(He,Le)}return null}function Ye(He,Le,Me,ft){var us=Le!==null?Le.key:null;if(typeof Me=="string"&&Me!==""||typeof Me=="number"||typeof Me=="bigint")return us!==null?null:ce(He,Le,""+Me,ft);if(typeof Me=="object"&&Me!==null){switch(Me.$$typeof){case b:return Me.key===us?Ne(He,Le,Me,ft):null;case x:return Me.key===us?Ke(He,Le,Me,ft):null;case E:return us=Me._init,Me=us(Me._payload),Ye(He,Le,Me,ft)}if(G(Me)||I(Me))return us!==null?null:ht(He,Le,Me,ft,null);if(typeof Me.then=="function")return Ye(He,Le,Pu(Me),ft);if(Me.$$typeof===P)return Ye(He,Le,Uo(He,Me),ft);Ou(He,Me)}return null}function Je(He,Le,Me,ft,us){if(typeof ft=="string"&&ft!==""||typeof ft=="number"||typeof ft=="bigint")return He=He.get(Me)||null,ce(Le,He,""+ft,us);if(typeof ft=="object"&&ft!==null){switch(ft.$$typeof){case b:return He=He.get(ft.key===null?Me:ft.key)||null,Ne(Le,He,ft,us);case x:return He=He.get(ft.key===null?Me:ft.key)||null,Ke(Le,He,ft,us);case E:var $s=ft._init;return ft=$s(ft._payload),Je(He,Le,Me,ft,us)}if(G(ft)||I(ft))return He=He.get(Me)||null,ht(Le,He,ft,us,null);if(typeof ft.then=="function")return Je(He,Le,Me,Pu(ft),us);if(ft.$$typeof===P)return Je(He,Le,Me,Uo(Le,ft),us);Ou(Le,ft)}return null}function ks(He,Le,Me,ft){for(var us=null,$s=null,gs=Le,Ns=Le=0,or=null;gs!==null&&Ns<Me.length;Ns++){gs.index>Ns?(or=gs,gs=null):or=gs.sibling;var ua=Ye(He,gs,Me[Ns],ft);if(ua===null){gs===null&&(gs=or);break}n&&gs&&ua.alternate===null&&i(He,gs),Le=w(ua,Le,Ns),$s===null?us=ua:$s.sibling=ua,$s=ua,gs=or}if(Ns===Me.length)return c(He,gs),Aa&&tl(He,Ns),us;if(gs===null){for(;Ns<Me.length;Ns++)gs=vt(He,Me[Ns],ft),gs!==null&&(Le=w(gs,Le,Ns),$s===null?us=gs:$s.sibling=gs,$s=gs);return Aa&&tl(He,Ns),us}for(gs=d(gs);Ns<Me.length;Ns++)or=Je(gs,He,Ns,Me[Ns],ft),or!==null&&(n&&or.alternate!==null&&gs.delete(or.key===null?Ns:or.key),Le=w(or,Le,Ns),$s===null?us=or:$s.sibling=or,$s=or);return n&&gs.forEach(function(Yl){return i(He,Yl)}),Aa&&tl(He,Ns),us}function js(He,Le,Me,ft){if(Me==null)throw Error(r(151));for(var us=null,$s=null,gs=Le,Ns=Le=0,or=null,ua=Me.next();gs!==null&&!ua.done;Ns++,ua=Me.next()){gs.index>Ns?(or=gs,gs=null):or=gs.sibling;var Yl=Ye(He,gs,ua.value,ft);if(Yl===null){gs===null&&(gs=or);break}n&&gs&&Yl.alternate===null&&i(He,gs),Le=w(Yl,Le,Ns),$s===null?us=Yl:$s.sibling=Yl,$s=Yl,gs=or}if(ua.done)return c(He,gs),Aa&&tl(He,Ns),us;if(gs===null){for(;!ua.done;Ns++,ua=Me.next())ua=vt(He,ua.value,ft),ua!==null&&(Le=w(ua,Le,Ns),$s===null?us=ua:$s.sibling=ua,$s=ua);return Aa&&tl(He,Ns),us}for(gs=d(gs);!ua.done;Ns++,ua=Me.next())ua=Je(gs,He,Ns,ua.value,ft),ua!==null&&(n&&ua.alternate!==null&&gs.delete(ua.key===null?Ns:ua.key),Le=w(ua,Le,Ns),$s===null?us=ua:$s.sibling=ua,$s=ua);return n&&gs.forEach(function(hj){return i(He,hj)}),Aa&&tl(He,Ns),us}function Ea(He,Le,Me,ft){if(typeof Me=="object"&&Me!==null&&Me.type===C&&Me.key===null&&(Me=Me.props.children),typeof Me=="object"&&Me!==null){switch(Me.$$typeof){case b:e:{for(var us=Me.key;Le!==null;){if(Le.key===us){if(us=Me.type,us===C){if(Le.tag===7){c(He,Le.sibling),ft=g(Le,Me.props.children),ft.return=He,He=ft;break e}}else if(Le.elementType===us||typeof us=="object"&&us!==null&&us.$$typeof===E&&ox(us)===Le.type){c(He,Le.sibling),ft=g(Le,Me.props),cd(ft,Me),ft.return=He,He=ft;break e}c(He,Le);break}else i(He,Le);Le=Le.sibling}Me.type===C?(ft=so(Me.props.children,He.mode,ft,Me.key),ft.return=He,He=ft):(ft=Zo(Me.type,Me.key,Me.props,null,He.mode,ft),cd(ft,Me),ft.return=He,He=ft)}return O(He);case x:e:{for(us=Me.key;Le!==null;){if(Le.key===us)if(Le.tag===4&&Le.stateNode.containerInfo===Me.containerInfo&&Le.stateNode.implementation===Me.implementation){c(He,Le.sibling),ft=g(Le,Me.children||[]),ft.return=He,He=ft;break e}else{c(He,Le);break}else i(He,Le);Le=Le.sibling}ft=fc(Me,He.mode,ft),ft.return=He,He=ft}return O(He);case E:return us=Me._init,Me=us(Me._payload),Ea(He,Le,Me,ft)}if(G(Me))return ks(He,Le,Me,ft);if(I(Me)){if(us=I(Me),typeof us!="function")throw Error(r(150));return Me=us.call(Me),js(He,Le,Me,ft)}if(typeof Me.then=="function")return Ea(He,Le,Pu(Me),ft);if(Me.$$typeof===P)return Ea(He,Le,Uo(He,Me),ft);Ou(He,Me)}return typeof Me=="string"&&Me!==""||typeof Me=="number"||typeof Me=="bigint"?(Me=""+Me,Le!==null&&Le.tag===6?(c(He,Le.sibling),ft=g(Le,Me),ft.return=He,He=ft):(c(He,Le),ft=Zc(Me,He.mode,ft),ft.return=He,He=ft),O(He)):c(He,Le)}return function(He,Le,Me,ft){try{ld=0;var us=Ea(He,Le,Me,ft);return cA=null,us}catch(gs){if(gs===se||gs===ue)throw gs;var $s=ar(29,gs,null,He.mode);return $s.lanes=ft,$s.return=He,$s}finally{}}}var AA=lx(!0),cx=lx(!1),zi=he(null),Eo=null;function Tl(n){var i=n.alternate;T($n,$n.current&1),T(zi,n),Eo===null&&(i===null||Ss.current!==null||i.memoizedState!==null)&&(Eo=n)}function Ax(n){if(n.tag===22){if(T($n,$n.current),T(zi,n),Eo===null){var i=n.alternate;i!==null&&i.memoizedState!==null&&(Eo=n)}}else Rl()}function Rl(){T($n,$n.current),T(zi,zi.current)}function il(n){k(zi),Eo===n&&(Eo=null),k($n)}var $n=he(0);function Mu(n){for(var i=n;i!==null;){if(i.tag===13){var c=i.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||c.data==="$?"||If(c)))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}function $p(n,i,c,d){i=n.memoizedState,c=c(d,i),c=c==null?i:m({},i,c),n.memoizedState=c,n.lanes===0&&(n.updateQueue.baseState=c)}var Wp={enqueueSetState:function(n,i,c){n=n._reactInternals;var d=bi(),g=lt(d);g.payload=i,c!=null&&(g.callback=c),i=Nt(n,g,d),i!==null&&(wi(i,n,d),yt(i,n,d))},enqueueReplaceState:function(n,i,c){n=n._reactInternals;var d=bi(),g=lt(d);g.tag=1,g.payload=i,c!=null&&(g.callback=c),i=Nt(n,g,d),i!==null&&(wi(i,n,d),yt(i,n,d))},enqueueForceUpdate:function(n,i){n=n._reactInternals;var c=bi(),d=lt(c);d.tag=2,i!=null&&(d.callback=i),i=Nt(n,d,c),i!==null&&(wi(i,n,c),yt(i,n,c))}};function dx(n,i,c,d,g,w,O){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(d,w,O):i.prototype&&i.prototype.isPureReactComponent?!Kn(c,d)||!Kn(g,w):!0}function ux(n,i,c,d){n=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(c,d),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(c,d),i.state!==n&&Wp.enqueueReplaceState(i,i.state,null)}function Sc(n,i){var c=i;if("ref"in i){c={};for(var d in i)d!=="ref"&&(c[d]=i[d])}if(n=n.defaultProps){c===i&&(c=m({},c));for(var g in n)c[g]===void 0&&(c[g]=n[g])}return c}var zu=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)};function hx(n){zu(n)}function px(n){console.error(n)}function fx(n){zu(n)}function qu(n,i){try{var c=n.onUncaughtError;c(i.value,{componentStack:i.stack})}catch(d){setTimeout(function(){throw d})}}function mx(n,i,c){try{var d=n.onCaughtError;d(c.value,{componentStack:c.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(g){setTimeout(function(){throw g})}}function Yp(n,i,c){return c=lt(c),c.tag=3,c.payload={element:null},c.callback=function(){qu(n,i)},c}function gx(n){return n=lt(n),n.tag=3,n}function xx(n,i,c,d){var g=c.type.getDerivedStateFromError;if(typeof g=="function"){var w=d.value;n.payload=function(){return g(w)},n.callback=function(){mx(i,c,d)}}var O=c.stateNode;O!==null&&typeof O.componentDidCatch=="function"&&(n.callback=function(){mx(i,c,d),typeof g!="function"&&(Ml===null?Ml=new Set([this]):Ml.add(this));var ce=d.stack;this.componentDidCatch(d.value,{componentStack:ce!==null?ce:""})})}function h2(n,i,c,d,g){if(c.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){if(i=c.alternate,i!==null&&Fl(i,c,g,!0),c=zi.current,c!==null){switch(c.tag){case 13:return Eo===null?bf():c.alternate===null&&bn===0&&(bn=3),c.flags&=-257,c.flags|=65536,c.lanes=g,d===pe?c.flags|=16384:(i=c.updateQueue,i===null?c.updateQueue=new Set([d]):i.add(d),jf(n,d,g)),!1;case 22:return c.flags|=65536,d===pe?c.flags|=16384:(i=c.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([d])},c.updateQueue=i):(c=i.retryQueue,c===null?i.retryQueue=new Set([d]):c.add(d)),jf(n,d,g)),!1}throw Error(r(435,c.tag))}return jf(n,d,g),bf(),!1}if(Aa)return i=zi.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=g,d!==VA&&(n=Error(r(422),{cause:d}),kl(zr(n,c)))):(d!==VA&&(i=Error(r(423),{cause:d}),kl(zr(i,c))),n=n.current.alternate,n.flags|=65536,g&=-g,n.lanes|=g,d=zr(d,c),g=Yp(n.stateNode,d,g),hs(n,g),bn!==4&&(bn=2)),!1;var w=Error(r(520),{cause:d});if(w=zr(w,c),md===null?md=[w]:md.push(w),bn!==4&&(bn=2),i===null)return!0;d=zr(d,c),c=i;do{switch(c.tag){case 3:return c.flags|=65536,n=g&-g,c.lanes|=n,n=Yp(c.stateNode,d,n),hs(c,n),!1;case 1:if(i=c.type,w=c.stateNode,(c.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Ml===null||!Ml.has(w))))return c.flags|=65536,g&=-g,c.lanes|=g,g=gx(g),xx(g,n,c,d),hs(c,g),!1}c=c.return}while(c!==null);return!1}var yx=Error(r(461)),rr=!1;function gr(n,i,c,d){i.child=n===null?cx(i,null,c,d):AA(i,n.child,c,d)}function vx(n,i,c,d,g){c=c.render;var w=i.ref;if("ref"in d){var O={};for(var ce in d)ce!=="ref"&&(O[ce]=d[ce])}else O=d;return Pi(i),d=Vr(n,i,c,O,w,g),ce=gn(),n!==null&&!rr?(fr(n,i,g),ol(n,i,g)):(Aa&&ce&&mc(i),i.flags|=1,gr(n,i,d,g),i.child)}function bx(n,i,c,d,g){if(n===null){var w=c.type;return typeof w=="function"&&!Cl(w)&&w.defaultProps===void 0&&c.compare===null?(i.tag=15,i.type=w,wx(n,i,w,d,g)):(n=Zo(c.type,null,d,i,i.mode,g),n.ref=i.ref,n.return=i,i.child=n)}if(w=n.child,!nf(n,g)){var O=w.memoizedProps;if(c=c.compare,c=c!==null?c:Kn,c(O,d)&&n.ref===i.ref)return ol(n,i,g)}return i.flags|=1,n=Ri(w,d),n.ref=i.ref,n.return=i,i.child=n}function wx(n,i,c,d,g){if(n!==null){var w=n.memoizedProps;if(Kn(w,d)&&n.ref===i.ref)if(rr=!1,i.pendingProps=d=w,nf(n,g))(n.flags&131072)!==0&&(rr=!0);else return i.lanes=n.lanes,ol(n,i,g)}return Xp(n,i,c,d,g)}function jx(n,i,c){var d=i.pendingProps,g=d.children,w=n!==null?n.memoizedState:null;if(d.mode==="hidden"){if((i.flags&128)!==0){if(d=w!==null?w.baseLanes|c:c,n!==null){for(g=i.child=n.child,w=0;g!==null;)w=w|g.lanes|g.childLanes,g=g.sibling;i.childLanes=w&~d}else i.childLanes=0,i.child=null;return _x(n,i,d,c)}if((c&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},n!==null&&D(i,w!==null?w.cachePool:null),w!==null?zt(i,w):Xa(),Ax(i);else return i.lanes=i.childLanes=536870912,_x(n,i,w!==null?w.baseLanes|c:c,c)}else w!==null?(D(i,w.cachePool),zt(i,w),Rl(),i.memoizedState=null):(n!==null&&D(i,null),Xa(),Rl());return gr(n,i,g,c),i.child}function _x(n,i,c,d){var g=S();return g=g===null?null:{parent:Cn._currentValue,pool:g},i.memoizedState={baseLanes:c,cachePool:g},n!==null&&D(i,null),Xa(),Ax(i),n!==null&&Fl(n,i,d,!0),null}function Ku(n,i){var c=i.ref;if(c===null)n!==null&&n.ref!==null&&(i.flags|=4194816);else{if(typeof c!="function"&&typeof c!="object")throw Error(r(284));(n===null||n.ref!==c)&&(i.flags|=4194816)}}function Xp(n,i,c,d,g){return Pi(i),c=Vr(n,i,c,d,void 0,g),d=gn(),n!==null&&!rr?(fr(n,i,g),ol(n,i,g)):(Aa&&d&&mc(i),i.flags|=1,gr(n,i,c,g),i.child)}function Bx(n,i,c,d,g,w){return Pi(i),i.updateQueue=null,c=pr(i,d,c,g),rn(n),d=gn(),n!==null&&!rr?(fr(n,i,w),ol(n,i,w)):(Aa&&d&&mc(i),i.flags|=1,gr(n,i,c,w),i.child)}function Nx(n,i,c,d,g){if(Pi(i),i.stateNode===null){var w=Pn,O=c.contextType;typeof O=="object"&&O!==null&&(w=Nn(O)),w=new c(d,w),i.memoizedState=w.state!==null&&w.state!==void 0?w.state:null,w.updater=Wp,i.stateNode=w,w._reactInternals=i,w=i.stateNode,w.props=d,w.state=i.memoizedState,w.refs={},ze(i),O=c.contextType,w.context=typeof O=="object"&&O!==null?Nn(O):Pn,w.state=i.memoizedState,O=c.getDerivedStateFromProps,typeof O=="function"&&($p(i,c,O,d),w.state=i.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof w.getSnapshotBeforeUpdate=="function"||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(O=w.state,typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount(),O!==w.state&&Wp.enqueueReplaceState(w,w.state,null),ns(i,d,w,g),Fs(),w.state=i.memoizedState),typeof w.componentDidMount=="function"&&(i.flags|=4194308),d=!0}else if(n===null){w=i.stateNode;var ce=i.memoizedProps,Ne=Sc(c,ce);w.props=Ne;var Ke=w.context,ht=c.contextType;O=Pn,typeof ht=="object"&&ht!==null&&(O=Nn(ht));var vt=c.getDerivedStateFromProps;ht=typeof vt=="function"||typeof w.getSnapshotBeforeUpdate=="function",ce=i.pendingProps!==ce,ht||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(ce||Ke!==O)&&ux(i,w,d,O),nt=!1;var Ye=i.memoizedState;w.state=Ye,ns(i,d,w,g),Fs(),Ke=i.memoizedState,ce||Ye!==Ke||nt?(typeof vt=="function"&&($p(i,c,vt,d),Ke=i.memoizedState),(Ne=nt||dx(i,c,Ne,d,Ye,Ke,O))?(ht||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(i.flags|=4194308)):(typeof w.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=d,i.memoizedState=Ke),w.props=d,w.state=Ke,w.context=O,d=Ne):(typeof w.componentDidMount=="function"&&(i.flags|=4194308),d=!1)}else{w=i.stateNode,At(n,i),O=i.memoizedProps,ht=Sc(c,O),w.props=ht,vt=i.pendingProps,Ye=w.context,Ke=c.contextType,Ne=Pn,typeof Ke=="object"&&Ke!==null&&(Ne=Nn(Ke)),ce=c.getDerivedStateFromProps,(Ke=typeof ce=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(O!==vt||Ye!==Ne)&&ux(i,w,d,Ne),nt=!1,Ye=i.memoizedState,w.state=Ye,ns(i,d,w,g),Fs();var Je=i.memoizedState;O!==vt||Ye!==Je||nt||n!==null&&n.dependencies!==null&&aA(n.dependencies)?(typeof ce=="function"&&($p(i,c,ce,d),Je=i.memoizedState),(ht=nt||dx(i,c,ht,d,Ye,Je,Ne)||n!==null&&n.dependencies!==null&&aA(n.dependencies))?(Ke||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(d,Je,Ne),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(d,Je,Ne)),typeof w.componentDidUpdate=="function"&&(i.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof w.componentDidUpdate!="function"||O===n.memoizedProps&&Ye===n.memoizedState||(i.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||O===n.memoizedProps&&Ye===n.memoizedState||(i.flags|=1024),i.memoizedProps=d,i.memoizedState=Je),w.props=d,w.state=Je,w.context=Ne,d=ht):(typeof w.componentDidUpdate!="function"||O===n.memoizedProps&&Ye===n.memoizedState||(i.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||O===n.memoizedProps&&Ye===n.memoizedState||(i.flags|=1024),d=!1)}return w=d,Ku(n,i),d=(i.flags&128)!==0,w||d?(w=i.stateNode,c=d&&typeof c.getDerivedStateFromError!="function"?null:w.render(),i.flags|=1,n!==null&&d?(i.child=AA(i,n.child,null,g),i.child=AA(i,null,c,g)):gr(n,i,c,g),i.memoizedState=w.state,n=i.child):n=ol(n,i,g),n}function Cx(n,i,c,d){return Gr(),i.flags|=256,gr(n,i,c,d),i.child}var Jp={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Zp(n){return{baseLanes:n,cachePool:Y()}}function ef(n,i,c){return n=n!==null?n.childLanes&~c:0,i&&(n|=qi),n}function Sx(n,i,c){var d=i.pendingProps,g=!1,w=(i.flags&128)!==0,O;if((O=w)||(O=n!==null&&n.memoizedState===null?!1:($n.current&2)!==0),O&&(g=!0,i.flags&=-129),O=(i.flags&32)!==0,i.flags&=-33,n===null){if(Aa){if(g?Tl(i):Rl(),Aa){var ce=sn,Ne;if(Ne=ce){e:{for(Ne=ce,ce=Di;Ne.nodeType!==8;){if(!ce){ce=null;break e}if(Ne=fo(Ne.nextSibling),Ne===null){ce=null;break e}}ce=Ne}ce!==null?(i.memoizedState={dehydrated:ce,treeContext:el!==null?{id:no,overflow:ro}:null,retryLane:536870912,hydrationErrors:null},Ne=ar(18,null,null,0),Ne.stateNode=ce,Ne.return=i,i.child=Ne,Bn=i,sn=null,Ne=!0):Ne=!1}Ne||sl(i)}if(ce=i.memoizedState,ce!==null&&(ce=ce.dehydrated,ce!==null))return If(ce)?i.lanes=32:i.lanes=536870912,null;il(i)}return ce=d.children,d=d.fallback,g?(Rl(),g=i.mode,ce=Gu({mode:"hidden",children:ce},g),d=so(d,g,c,null),ce.return=i,d.return=i,ce.sibling=d,i.child=ce,g=i.child,g.memoizedState=Zp(c),g.childLanes=ef(n,O,c),i.memoizedState=Jp,d):(Tl(i),tf(i,ce))}if(Ne=n.memoizedState,Ne!==null&&(ce=Ne.dehydrated,ce!==null)){if(w)i.flags&256?(Tl(i),i.flags&=-257,i=sf(n,i,c)):i.memoizedState!==null?(Rl(),i.child=n.child,i.flags|=128,i=null):(Rl(),g=d.fallback,ce=i.mode,d=Gu({mode:"visible",children:d.children},ce),g=so(g,ce,c,null),g.flags|=2,d.return=i,g.return=i,d.sibling=g,i.child=d,AA(i,n.child,null,c),d=i.child,d.memoizedState=Zp(c),d.childLanes=ef(n,O,c),i.memoizedState=Jp,i=g);else if(Tl(i),If(ce)){if(O=ce.nextSibling&&ce.nextSibling.dataset,O)var Ke=O.dgst;O=Ke,d=Error(r(419)),d.stack="",d.digest=O,kl({value:d,source:null,stack:null}),i=sf(n,i,c)}else if(rr||Fl(n,i,c,!1),O=(c&n.childLanes)!==0,rr||O){if(O=qa,O!==null&&(d=c&-c,d=(d&42)!==0?1:we(d),d=(d&(O.suspendedLanes|c))!==0?0:d,d!==0&&d!==Ne.retryLane))throw Ne.retryLane=d,Xo(n,d),wi(O,n,d),yx;ce.data==="$?"||bf(),i=sf(n,i,c)}else ce.data==="$?"?(i.flags|=192,i.child=n.child,i=null):(n=Ne.treeContext,sn=fo(ce.nextSibling),Bn=i,Aa=!0,ko=null,Di=!1,n!==null&&(ni[Kr++]=no,ni[Kr++]=ro,ni[Kr++]=el,no=n.id,ro=n.overflow,el=i),i=tf(i,d.children),i.flags|=4096);return i}return g?(Rl(),g=d.fallback,ce=i.mode,Ne=n.child,Ke=Ne.sibling,d=Ri(Ne,{mode:"hidden",children:d.children}),d.subtreeFlags=Ne.subtreeFlags&65011712,Ke!==null?g=Ri(Ke,g):(g=so(g,ce,c,null),g.flags|=2),g.return=i,d.return=i,d.sibling=g,i.child=d,d=g,g=i.child,ce=n.child.memoizedState,ce===null?ce=Zp(c):(Ne=ce.cachePool,Ne!==null?(Ke=Cn._currentValue,Ne=Ne.parent!==Ke?{parent:Ke,pool:Ke}:Ne):Ne=Y(),ce={baseLanes:ce.baseLanes|c,cachePool:Ne}),g.memoizedState=ce,g.childLanes=ef(n,O,c),i.memoizedState=Jp,d):(Tl(i),c=n.child,n=c.sibling,c=Ri(c,{mode:"visible",children:d.children}),c.return=i,c.sibling=null,n!==null&&(O=i.deletions,O===null?(i.deletions=[n],i.flags|=16):O.push(n)),i.child=c,i.memoizedState=null,c)}function tf(n,i){return i=Gu({mode:"visible",children:i},n.mode),i.return=n,n.child=i}function Gu(n,i){return n=ar(22,n,null,i),n.lanes=0,n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},n}function sf(n,i,c){return AA(i,n.child,null,c),n=tf(i,i.pendingProps.children),n.flags|=2,i.memoizedState=null,n}function kx(n,i,c){n.lanes|=i;var d=n.alternate;d!==null&&(d.lanes|=i),tA(n.return,i,c)}function af(n,i,c,d,g){var w=n.memoizedState;w===null?n.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:d,tail:c,tailMode:g}:(w.isBackwards=i,w.rendering=null,w.renderingStartTime=0,w.last=d,w.tail=c,w.tailMode=g)}function Fx(n,i,c){var d=i.pendingProps,g=d.revealOrder,w=d.tail;if(gr(n,i,d.children,c),d=$n.current,(d&2)!==0)d=d&1|2,i.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=i.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&kx(n,c,i);else if(n.tag===19)kx(n,c,i);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===i)break e;for(;n.sibling===null;){if(n.return===null||n.return===i)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}d&=1}switch(T($n,d),g){case"forwards":for(c=i.child,g=null;c!==null;)n=c.alternate,n!==null&&Mu(n)===null&&(g=c),c=c.sibling;c=g,c===null?(g=i.child,i.child=null):(g=c.sibling,c.sibling=null),af(i,!1,g,c,w);break;case"backwards":for(c=null,g=i.child,i.child=null;g!==null;){if(n=g.alternate,n!==null&&Mu(n)===null){i.child=g;break}n=g.sibling,g.sibling=c,c=g,g=n}af(i,!0,c,null,w);break;case"together":af(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function ol(n,i,c){if(n!==null&&(i.dependencies=n.dependencies),Ol|=i.lanes,(c&i.childLanes)===0)if(n!==null){if(Fl(n,i,c,!1),(c&i.childLanes)===0)return null}else return null;if(n!==null&&i.child!==n.child)throw Error(r(153));if(i.child!==null){for(n=i.child,c=Ri(n,n.pendingProps),i.child=c,c.return=i;n.sibling!==null;)n=n.sibling,c=c.sibling=Ri(n,n.pendingProps),c.return=i;c.sibling=null}return i.child}function nf(n,i){return(n.lanes&i)!==0?!0:(n=n.dependencies,!!(n!==null&&aA(n)))}function p2(n,i,c){switch(i.tag){case 3:de(i,i.stateNode.containerInfo),Fo(i,Cn,n.memoizedState.cache),Gr();break;case 27:case 5:Be(i);break;case 4:de(i,i.stateNode.containerInfo);break;case 10:Fo(i,i.type,i.memoizedProps.value);break;case 13:var d=i.memoizedState;if(d!==null)return d.dehydrated!==null?(Tl(i),i.flags|=128,null):(c&i.child.childLanes)!==0?Sx(n,i,c):(Tl(i),n=ol(n,i,c),n!==null?n.sibling:null);Tl(i);break;case 19:var g=(n.flags&128)!==0;if(d=(c&i.childLanes)!==0,d||(Fl(n,i,c,!1),d=(c&i.childLanes)!==0),g){if(d)return Fx(n,i,c);i.flags|=128}if(g=i.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),T($n,$n.current),d)break;return null;case 22:case 23:return i.lanes=0,jx(n,i,c);case 24:Fo(i,Cn,n.memoizedState.cache)}return ol(n,i,c)}function Ux(n,i,c){if(n!==null)if(n.memoizedProps!==i.pendingProps)rr=!0;else{if(!nf(n,c)&&(i.flags&128)===0)return rr=!1,p2(n,i,c);rr=(n.flags&131072)!==0}else rr=!1,Aa&&(i.flags&1048576)!==0&&wu(i,eA,i.index);switch(i.lanes=0,i.tag){case 16:e:{n=i.pendingProps;var d=i.elementType,g=d._init;if(d=g(d._payload),i.type=d,typeof d=="function")Cl(d)?(n=Sc(d,n),i.tag=1,i=Nx(null,i,d,n,c)):(i.tag=0,i=Xp(null,i,d,n,c));else{if(d!=null){if(g=d.$$typeof,g===F){i.tag=11,i=vx(null,i,d,n,c);break e}else if(g===q){i.tag=14,i=bx(null,i,d,n,c);break e}}throw i=re(d)||d,Error(r(306,i,""))}}return i;case 0:return Xp(n,i,i.type,i.pendingProps,c);case 1:return d=i.type,g=Sc(d,i.pendingProps),Nx(n,i,d,g,c);case 3:e:{if(de(i,i.stateNode.containerInfo),n===null)throw Error(r(387));d=i.pendingProps;var w=i.memoizedState;g=w.element,At(n,i),ns(i,d,null,c);var O=i.memoizedState;if(d=O.cache,Fo(i,Cn,d),d!==w.cache&&sA(i,[Cn],c,!0),Fs(),d=O.element,w.isDehydrated)if(w={element:d,isDehydrated:!1,cache:O.cache},i.updateQueue.baseState=w,i.memoizedState=w,i.flags&256){i=Cx(n,i,d,c);break e}else if(d!==g){g=zr(Error(r(424)),i),kl(g),i=Cx(n,i,d,c);break e}else{switch(n=i.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(sn=fo(n.firstChild),Bn=i,Aa=!0,ko=null,Di=!0,c=cx(i,null,d,c),i.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling}else{if(Gr(),d===g){i=ol(n,i,c);break e}gr(n,i,d,c)}i=i.child}return i;case 26:return Ku(n,i),n===null?(c=T0(i.type,null,i.pendingProps,null))?i.memoizedState=c:Aa||(c=i.type,n=i.pendingProps,d=ih(X.current).createElement(c),d[Vt]=i,d[Ot]=n,yr(d,c,n),Ws(d),i.stateNode=d):i.memoizedState=T0(i.type,n.memoizedProps,i.pendingProps,n.memoizedState),null;case 27:return Be(i),n===null&&Aa&&(d=i.stateNode=E0(i.type,i.pendingProps,X.current),Bn=i,Di=!0,g=sn,Kl(i.type)?(Hf=g,sn=fo(d.firstChild)):sn=g),gr(n,i,i.pendingProps.children,c),Ku(n,i),n===null&&(i.flags|=4194304),i.child;case 5:return n===null&&Aa&&((g=d=sn)&&(d=M2(d,i.type,i.pendingProps,Di),d!==null?(i.stateNode=d,Bn=i,sn=fo(d.firstChild),Di=!1,g=!0):g=!1),g||sl(i)),Be(i),g=i.type,w=i.pendingProps,O=n!==null?n.memoizedProps:null,d=w.children,Tf(g,w)?d=null:O!==null&&Tf(g,O)&&(i.flags|=32),i.memoizedState!==null&&(g=Vr(n,i,_a,null,null,c),Bd._currentValue=g),Ku(n,i),gr(n,i,d,c),i.child;case 6:return n===null&&Aa&&((n=c=sn)&&(c=z2(c,i.pendingProps,Di),c!==null?(i.stateNode=c,Bn=i,sn=null,n=!0):n=!1),n||sl(i)),null;case 13:return Sx(n,i,c);case 4:return de(i,i.stateNode.containerInfo),d=i.pendingProps,n===null?i.child=AA(i,null,d,c):gr(n,i,d,c),i.child;case 11:return vx(n,i,i.type,i.pendingProps,c);case 7:return gr(n,i,i.pendingProps,c),i.child;case 8:return gr(n,i,i.pendingProps.children,c),i.child;case 12:return gr(n,i,i.pendingProps.children,c),i.child;case 10:return d=i.pendingProps,Fo(i,i.type,d.value),gr(n,i,d.children,c),i.child;case 9:return g=i.type._context,d=i.pendingProps.children,Pi(i),g=Nn(g),d=d(g),i.flags|=1,gr(n,i,d,c),i.child;case 14:return bx(n,i,i.type,i.pendingProps,c);case 15:return wx(n,i,i.type,i.pendingProps,c);case 19:return Fx(n,i,c);case 31:return d=i.pendingProps,c=i.mode,d={mode:d.mode,children:d.children},n===null?(c=Gu(d,c),c.ref=i.ref,i.child=c,c.return=i,i=c):(c=Ri(n.child,d),c.ref=i.ref,i.child=c,c.return=i,i=c),i;case 22:return jx(n,i,c);case 24:return Pi(i),d=Nn(Cn),n===null?(g=S(),g===null&&(g=qa,w=$A(),g.pooledCache=w,w.refCount++,w!==null&&(g.pooledCacheLanes|=c),g=w),i.memoizedState={parent:d,cache:g},ze(i),Fo(i,Cn,g)):((n.lanes&c)!==0&&(At(n,i),ns(i,null,null,c),Fs()),g=n.memoizedState,w=i.memoizedState,g.parent!==d?(g={parent:d,cache:d},i.memoizedState=g,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=g),Fo(i,Cn,d)):(d=w.cache,Fo(i,Cn,d),d!==g.cache&&sA(i,[Cn],c,!0))),gr(n,i,i.pendingProps.children,c),i.child;case 29:throw i.pendingProps}throw Error(r(156,i.tag))}function ll(n){n.flags|=4}function Ex(n,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!P0(i)){if(i=zi.current,i!==null&&((oa&4194048)===oa?Eo!==null:(oa&62914560)!==oa&&(oa&536870912)===0||i!==Eo))throw ye=pe,ne;n.flags|=8192}}function Vu(n,i){i!==null&&(n.flags|=4),n.flags&16384&&(i=n.tag!==22?_e():536870912,n.lanes|=i,pA|=i)}function Ad(n,i){if(!Aa)switch(n.tailMode){case"hidden":i=n.tail;for(var c=null;i!==null;)i.alternate!==null&&(c=i),i=i.sibling;c===null?n.tail=null:c.sibling=null;break;case"collapsed":c=n.tail;for(var d=null;c!==null;)c.alternate!==null&&(d=c),c=c.sibling;d===null?i||n.tail===null?n.tail=null:n.tail.sibling=null:d.sibling=null}}function xn(n){var i=n.alternate!==null&&n.alternate.child===n.child,c=0,d=0;if(i)for(var g=n.child;g!==null;)c|=g.lanes|g.childLanes,d|=g.subtreeFlags&65011712,d|=g.flags&65011712,g.return=n,g=g.sibling;else for(g=n.child;g!==null;)c|=g.lanes|g.childLanes,d|=g.subtreeFlags,d|=g.flags,g.return=n,g=g.sibling;return n.subtreeFlags|=d,n.childLanes=c,i}function f2(n,i,c){var d=i.pendingProps;switch(gc(i),i.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return xn(i),null;case 1:return xn(i),null;case 3:return c=i.stateNode,d=null,n!==null&&(d=n.memoizedState.cache),i.memoizedState.cache!==d&&(i.flags|=2048),Hi(Cn),me(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(n===null||n.child===null)&&(hr(i)?ll(i):n===null||n.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,_u())),xn(i),null;case 26:return c=i.memoizedState,n===null?(ll(i),c!==null?(xn(i),Ex(i,c)):(xn(i),i.flags&=-16777217)):c?c!==n.memoizedState?(ll(i),xn(i),Ex(i,c)):(xn(i),i.flags&=-16777217):(n.memoizedProps!==d&&ll(i),xn(i),i.flags&=-16777217),null;case 27:Qe(i),c=X.current;var g=i.type;if(n!==null&&i.stateNode!=null)n.memoizedProps!==d&&ll(i);else{if(!d){if(i.stateNode===null)throw Error(r(166));return xn(i),null}n=z.current,hr(i)?ju(i):(n=E0(g,d,c),i.stateNode=n,ll(i))}return xn(i),null;case 5:if(Qe(i),c=i.type,n!==null&&i.stateNode!=null)n.memoizedProps!==d&&ll(i);else{if(!d){if(i.stateNode===null)throw Error(r(166));return xn(i),null}if(n=z.current,hr(i))ju(i);else{switch(g=ih(X.current),n){case 1:n=g.createElementNS("http://www.w3.org/2000/svg",c);break;case 2:n=g.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;default:switch(c){case"svg":n=g.createElementNS("http://www.w3.org/2000/svg",c);break;case"math":n=g.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;case"script":n=g.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild);break;case"select":n=typeof d.is=="string"?g.createElement("select",{is:d.is}):g.createElement("select"),d.multiple?n.multiple=!0:d.size&&(n.size=d.size);break;default:n=typeof d.is=="string"?g.createElement(c,{is:d.is}):g.createElement(c)}}n[Vt]=i,n[Ot]=d;e:for(g=i.child;g!==null;){if(g.tag===5||g.tag===6)n.appendChild(g.stateNode);else if(g.tag!==4&&g.tag!==27&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===i)break e;for(;g.sibling===null;){if(g.return===null||g.return===i)break e;g=g.return}g.sibling.return=g.return,g=g.sibling}i.stateNode=n;e:switch(yr(n,c,d),c){case"button":case"input":case"select":case"textarea":n=!!d.autoFocus;break e;case"img":n=!0;break e;default:n=!1}n&&ll(i)}}return xn(i),i.flags&=-16777217,null;case 6:if(n&&i.stateNode!=null)n.memoizedProps!==d&&ll(i);else{if(typeof d!="string"&&i.stateNode===null)throw Error(r(166));if(n=X.current,hr(i)){if(n=i.stateNode,c=i.memoizedProps,d=null,g=Bn,g!==null)switch(g.tag){case 27:case 5:d=g.memoizedProps}n[Vt]=i,n=!!(n.nodeValue===c||d!==null&&d.suppressHydrationWarning===!0||B0(n.nodeValue,c)),n||sl(i)}else n=ih(n).createTextNode(d),n[Vt]=i,i.stateNode=n}return xn(i),null;case 13:if(d=i.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(g=hr(i),d!==null&&d.dehydrated!==null){if(n===null){if(!g)throw Error(r(318));if(g=i.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(r(317));g[Vt]=i}else Gr(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;xn(i),g=!1}else g=_u(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=g),g=!0;if(!g)return i.flags&256?(il(i),i):(il(i),null)}if(il(i),(i.flags&128)!==0)return i.lanes=c,i;if(c=d!==null,n=n!==null&&n.memoizedState!==null,c){d=i.child,g=null,d.alternate!==null&&d.alternate.memoizedState!==null&&d.alternate.memoizedState.cachePool!==null&&(g=d.alternate.memoizedState.cachePool.pool);var w=null;d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(w=d.memoizedState.cachePool.pool),w!==g&&(d.flags|=2048)}return c!==n&&c&&(i.child.flags|=8192),Vu(i,i.updateQueue),xn(i),null;case 4:return me(),n===null&&Ff(i.stateNode.containerInfo),xn(i),null;case 10:return Hi(i.type),xn(i),null;case 19:if(k($n),g=i.memoizedState,g===null)return xn(i),null;if(d=(i.flags&128)!==0,w=g.rendering,w===null)if(d)Ad(g,!1);else{if(bn!==0||n!==null&&(n.flags&128)!==0)for(n=i.child;n!==null;){if(w=Mu(n),w!==null){for(i.flags|=128,Ad(g,!1),n=w.updateQueue,i.updateQueue=n,Vu(i,n),i.subtreeFlags=0,n=c,c=i.child;c!==null;)pc(c,n),c=c.sibling;return T($n,$n.current&1|2),i.child}n=n.sibling}g.tail!==null&&Rt()>Yu&&(i.flags|=128,d=!0,Ad(g,!1),i.lanes=4194304)}else{if(!d)if(n=Mu(w),n!==null){if(i.flags|=128,d=!0,n=n.updateQueue,i.updateQueue=n,Vu(i,n),Ad(g,!0),g.tail===null&&g.tailMode==="hidden"&&!w.alternate&&!Aa)return xn(i),null}else 2*Rt()-g.renderingStartTime>Yu&&c!==536870912&&(i.flags|=128,d=!0,Ad(g,!1),i.lanes=4194304);g.isBackwards?(w.sibling=i.child,i.child=w):(n=g.last,n!==null?n.sibling=w:i.child=w,g.last=w)}return g.tail!==null?(i=g.tail,g.rendering=i,g.tail=i.sibling,g.renderingStartTime=Rt(),i.sibling=null,n=$n.current,T($n,d?n&1|2:n&1),i):(xn(i),null);case 22:case 23:return il(i),Us(),d=i.memoizedState!==null,n!==null?n.memoizedState!==null!==d&&(i.flags|=8192):d&&(i.flags|=8192),d?(c&536870912)!==0&&(i.flags&128)===0&&(xn(i),i.subtreeFlags&6&&(i.flags|=8192)):xn(i),c=i.updateQueue,c!==null&&Vu(i,c.retryQueue),c=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(c=n.memoizedState.cachePool.pool),d=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(d=i.memoizedState.cachePool.pool),d!==c&&(i.flags|=2048),n!==null&&k(y),null;case 24:return c=null,n!==null&&(c=n.memoizedState.cache),i.memoizedState.cache!==c&&(i.flags|=2048),Hi(Cn),xn(i),null;case 25:return null;case 30:return null}throw Error(r(156,i.tag))}function m2(n,i){switch(gc(i),i.tag){case 1:return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 3:return Hi(Cn),me(),n=i.flags,(n&65536)!==0&&(n&128)===0?(i.flags=n&-65537|128,i):null;case 26:case 27:case 5:return Qe(i),null;case 13:if(il(i),n=i.memoizedState,n!==null&&n.dehydrated!==null){if(i.alternate===null)throw Error(r(340));Gr()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 19:return k($n),null;case 4:return me(),null;case 10:return Hi(i.type),null;case 22:case 23:return il(i),Us(),n!==null&&k(y),n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 24:return Hi(Cn),null;case 25:return null;default:return null}}function Lx(n,i){switch(gc(i),i.tag){case 3:Hi(Cn),me();break;case 26:case 27:case 5:Qe(i);break;case 4:me();break;case 13:il(i);break;case 19:k($n);break;case 10:Hi(i.type);break;case 22:case 23:il(i),Us(),n!==null&&k(y);break;case 24:Hi(Cn)}}function dd(n,i){try{var c=i.updateQueue,d=c!==null?c.lastEffect:null;if(d!==null){var g=d.next;c=g;do{if((c.tag&n)===n){d=void 0;var w=c.create,O=c.inst;d=w(),O.destroy=d}c=c.next}while(c!==g)}}catch(ce){Pa(i,i.return,ce)}}function Dl(n,i,c){try{var d=i.updateQueue,g=d!==null?d.lastEffect:null;if(g!==null){var w=g.next;d=w;do{if((d.tag&n)===n){var O=d.inst,ce=O.destroy;if(ce!==void 0){O.destroy=void 0,g=i;var Ne=c,Ke=ce;try{Ke()}catch(ht){Pa(g,Ne,ht)}}}d=d.next}while(d!==w)}}catch(ht){Pa(i,i.return,ht)}}function Qx(n){var i=n.updateQueue;if(i!==null){var c=n.stateNode;try{vn(i,c)}catch(d){Pa(n,n.return,d)}}}function Tx(n,i,c){c.props=Sc(n.type,n.memoizedProps),c.state=n.memoizedState;try{c.componentWillUnmount()}catch(d){Pa(n,i,d)}}function ud(n,i){try{var c=n.ref;if(c!==null){switch(n.tag){case 26:case 27:case 5:var d=n.stateNode;break;case 30:d=n.stateNode;break;default:d=n.stateNode}typeof c=="function"?n.refCleanup=c(d):c.current=d}}catch(g){Pa(n,i,g)}}function Lo(n,i){var c=n.ref,d=n.refCleanup;if(c!==null)if(typeof d=="function")try{d()}catch(g){Pa(n,i,g)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof c=="function")try{c(null)}catch(g){Pa(n,i,g)}else c.current=null}function Rx(n){var i=n.type,c=n.memoizedProps,d=n.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":c.autoFocus&&d.focus();break e;case"img":c.src?d.src=c.src:c.srcSet&&(d.srcset=c.srcSet)}}catch(g){Pa(n,n.return,g)}}function rf(n,i,c){try{var d=n.stateNode;D2(d,n.type,c,i),d[Ot]=i}catch(g){Pa(n,n.return,g)}}function Dx(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&Kl(n.type)||n.tag===4}function of(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||Dx(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&Kl(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function lf(n,i,c){var d=n.tag;if(d===5||d===6)n=n.stateNode,i?(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c).insertBefore(n,i):(i=c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,i.appendChild(n),c=c._reactRootContainer,c!=null||i.onclick!==null||(i.onclick=rh));else if(d!==4&&(d===27&&Kl(n.type)&&(c=n.stateNode,i=null),n=n.child,n!==null))for(lf(n,i,c),n=n.sibling;n!==null;)lf(n,i,c),n=n.sibling}function $u(n,i,c){var d=n.tag;if(d===5||d===6)n=n.stateNode,i?c.insertBefore(n,i):c.appendChild(n);else if(d!==4&&(d===27&&Kl(n.type)&&(c=n.stateNode),n=n.child,n!==null))for($u(n,i,c),n=n.sibling;n!==null;)$u(n,i,c),n=n.sibling}function Ix(n){var i=n.stateNode,c=n.memoizedProps;try{for(var d=n.type,g=i.attributes;g.length;)i.removeAttributeNode(g[0]);yr(i,d,c),i[Vt]=n,i[Ot]=c}catch(w){Pa(n,n.return,w)}}var cl=!1,Un=!1,cf=!1,Hx=typeof WeakSet=="function"?WeakSet:Set,ir=null;function g2(n,i){if(n=n.containerInfo,Lf=uh,n=_l(n),Qi(n)){if("selectionStart"in n)var c={start:n.selectionStart,end:n.selectionEnd};else e:{c=(c=n.ownerDocument)&&c.defaultView||window;var d=c.getSelection&&c.getSelection();if(d&&d.rangeCount!==0){c=d.anchorNode;var g=d.anchorOffset,w=d.focusNode;d=d.focusOffset;try{c.nodeType,w.nodeType}catch{c=null;break e}var O=0,ce=-1,Ne=-1,Ke=0,ht=0,vt=n,Ye=null;t:for(;;){for(var Je;vt!==c||g!==0&&vt.nodeType!==3||(ce=O+g),vt!==w||d!==0&&vt.nodeType!==3||(Ne=O+d),vt.nodeType===3&&(O+=vt.nodeValue.length),(Je=vt.firstChild)!==null;)Ye=vt,vt=Je;for(;;){if(vt===n)break t;if(Ye===c&&++Ke===g&&(ce=O),Ye===w&&++ht===d&&(Ne=O),(Je=vt.nextSibling)!==null)break;vt=Ye,Ye=vt.parentNode}vt=Je}c=ce===-1||Ne===-1?null:{start:ce,end:Ne}}else c=null}c=c||{start:0,end:0}}else c=null;for(Qf={focusedElem:n,selectionRange:c},uh=!1,ir=i;ir!==null;)if(i=ir,n=i.child,(i.subtreeFlags&1024)!==0&&n!==null)n.return=i,ir=n;else for(;ir!==null;){switch(i=ir,w=i.alternate,n=i.flags,i.tag){case 0:break;case 11:case 15:break;case 1:if((n&1024)!==0&&w!==null){n=void 0,c=i,g=w.memoizedProps,w=w.memoizedState,d=c.stateNode;try{var ks=Sc(c.type,g,c.elementType===c.type);n=d.getSnapshotBeforeUpdate(ks,w),d.__reactInternalSnapshotBeforeUpdate=n}catch(js){Pa(c,c.return,js)}}break;case 3:if((n&1024)!==0){if(n=i.stateNode.containerInfo,c=n.nodeType,c===9)Df(n);else if(c===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":Df(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(r(163))}if(n=i.sibling,n!==null){n.return=i.return,ir=n;break}ir=i.return}}function Px(n,i,c){var d=c.flags;switch(c.tag){case 0:case 11:case 15:Il(n,c),d&4&&dd(5,c);break;case 1:if(Il(n,c),d&4)if(n=c.stateNode,i===null)try{n.componentDidMount()}catch(O){Pa(c,c.return,O)}else{var g=Sc(c.type,i.memoizedProps);i=i.memoizedState;try{n.componentDidUpdate(g,i,n.__reactInternalSnapshotBeforeUpdate)}catch(O){Pa(c,c.return,O)}}d&64&&Qx(c),d&512&&ud(c,c.return);break;case 3:if(Il(n,c),d&64&&(n=c.updateQueue,n!==null)){if(i=null,c.child!==null)switch(c.child.tag){case 27:case 5:i=c.child.stateNode;break;case 1:i=c.child.stateNode}try{vn(n,i)}catch(O){Pa(c,c.return,O)}}break;case 27:i===null&&d&4&&Ix(c);case 26:case 5:Il(n,c),i===null&&d&4&&Rx(c),d&512&&ud(c,c.return);break;case 12:Il(n,c);break;case 13:Il(n,c),d&4&&zx(n,c),d&64&&(n=c.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(c=N2.bind(null,c),q2(n,c))));break;case 22:if(d=c.memoizedState!==null||cl,!d){i=i!==null&&i.memoizedState!==null||Un,g=cl;var w=Un;cl=d,(Un=i)&&!w?Hl(n,c,(c.subtreeFlags&8772)!==0):Il(n,c),cl=g,Un=w}break;case 30:break;default:Il(n,c)}}function Ox(n){var i=n.alternate;i!==null&&(n.alternate=null,Ox(i)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(i=n.stateNode,i!==null&&Sa(i)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var on=null,ri=!1;function Al(n,i,c){for(c=c.child;c!==null;)Mx(n,i,c),c=c.sibling}function Mx(n,i,c){if(Ut&&typeof Ut.onCommitFiberUnmount=="function")try{Ut.onCommitFiberUnmount(dt,c)}catch{}switch(c.tag){case 26:Un||Lo(c,i),Al(n,i,c),c.memoizedState?c.memoizedState.count--:c.stateNode&&(c=c.stateNode,c.parentNode.removeChild(c));break;case 27:Un||Lo(c,i);var d=on,g=ri;Kl(c.type)&&(on=c.stateNode,ri=!1),Al(n,i,c),bd(c.stateNode),on=d,ri=g;break;case 5:Un||Lo(c,i);case 6:if(d=on,g=ri,on=null,Al(n,i,c),on=d,ri=g,on!==null)if(ri)try{(on.nodeType===9?on.body:on.nodeName==="HTML"?on.ownerDocument.body:on).removeChild(c.stateNode)}catch(w){Pa(c,i,w)}else try{on.removeChild(c.stateNode)}catch(w){Pa(c,i,w)}break;case 18:on!==null&&(ri?(n=on,F0(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,c.stateNode),kd(n)):F0(on,c.stateNode));break;case 4:d=on,g=ri,on=c.stateNode.containerInfo,ri=!0,Al(n,i,c),on=d,ri=g;break;case 0:case 11:case 14:case 15:Un||Dl(2,c,i),Un||Dl(4,c,i),Al(n,i,c);break;case 1:Un||(Lo(c,i),d=c.stateNode,typeof d.componentWillUnmount=="function"&&Tx(c,i,d)),Al(n,i,c);break;case 21:Al(n,i,c);break;case 22:Un=(d=Un)||c.memoizedState!==null,Al(n,i,c),Un=d;break;default:Al(n,i,c)}}function zx(n,i){if(i.memoizedState===null&&(n=i.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{kd(n)}catch(c){Pa(i,i.return,c)}}function x2(n){switch(n.tag){case 13:case 19:var i=n.stateNode;return i===null&&(i=n.stateNode=new Hx),i;case 22:return n=n.stateNode,i=n._retryCache,i===null&&(i=n._retryCache=new Hx),i;default:throw Error(r(435,n.tag))}}function Af(n,i){var c=x2(n);i.forEach(function(d){var g=C2.bind(null,n,d);c.has(d)||(c.add(d),d.then(g,g))})}function xi(n,i){var c=i.deletions;if(c!==null)for(var d=0;d<c.length;d++){var g=c[d],w=n,O=i,ce=O;e:for(;ce!==null;){switch(ce.tag){case 27:if(Kl(ce.type)){on=ce.stateNode,ri=!1;break e}break;case 5:on=ce.stateNode,ri=!1;break e;case 3:case 4:on=ce.stateNode.containerInfo,ri=!0;break e}ce=ce.return}if(on===null)throw Error(r(160));Mx(w,O,g),on=null,ri=!1,w=g.alternate,w!==null&&(w.return=null),g.return=null}if(i.subtreeFlags&13878)for(i=i.child;i!==null;)qx(i,n),i=i.sibling}var po=null;function qx(n,i){var c=n.alternate,d=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:xi(i,n),yi(n),d&4&&(Dl(3,n,n.return),dd(3,n),Dl(5,n,n.return));break;case 1:xi(i,n),yi(n),d&512&&(Un||c===null||Lo(c,c.return)),d&64&&cl&&(n=n.updateQueue,n!==null&&(d=n.callbacks,d!==null&&(c=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=c===null?d:c.concat(d))));break;case 26:var g=po;if(xi(i,n),yi(n),d&512&&(Un||c===null||Lo(c,c.return)),d&4){var w=c!==null?c.memoizedState:null;if(d=n.memoizedState,c===null)if(d===null)if(n.stateNode===null){e:{d=n.type,c=n.memoizedProps,g=g.ownerDocument||g;t:switch(d){case"title":w=g.getElementsByTagName("title")[0],(!w||w[Zs]||w[Vt]||w.namespaceURI==="http://www.w3.org/2000/svg"||w.hasAttribute("itemprop"))&&(w=g.createElement(d),g.head.insertBefore(w,g.querySelector("head > title"))),yr(w,d,c),w[Vt]=n,Ws(w),d=w;break e;case"link":var O=I0("link","href",g).get(d+(c.href||""));if(O){for(var ce=0;ce<O.length;ce++)if(w=O[ce],w.getAttribute("href")===(c.href==null||c.href===""?null:c.href)&&w.getAttribute("rel")===(c.rel==null?null:c.rel)&&w.getAttribute("title")===(c.title==null?null:c.title)&&w.getAttribute("crossorigin")===(c.crossOrigin==null?null:c.crossOrigin)){O.splice(ce,1);break t}}w=g.createElement(d),yr(w,d,c),g.head.appendChild(w);break;case"meta":if(O=I0("meta","content",g).get(d+(c.content||""))){for(ce=0;ce<O.length;ce++)if(w=O[ce],w.getAttribute("content")===(c.content==null?null:""+c.content)&&w.getAttribute("name")===(c.name==null?null:c.name)&&w.getAttribute("property")===(c.property==null?null:c.property)&&w.getAttribute("http-equiv")===(c.httpEquiv==null?null:c.httpEquiv)&&w.getAttribute("charset")===(c.charSet==null?null:c.charSet)){O.splice(ce,1);break t}}w=g.createElement(d),yr(w,d,c),g.head.appendChild(w);break;default:throw Error(r(468,d))}w[Vt]=n,Ws(w),d=w}n.stateNode=d}else H0(g,n.type,n.stateNode);else n.stateNode=D0(g,d,n.memoizedProps);else w!==d?(w===null?c.stateNode!==null&&(c=c.stateNode,c.parentNode.removeChild(c)):w.count--,d===null?H0(g,n.type,n.stateNode):D0(g,d,n.memoizedProps)):d===null&&n.stateNode!==null&&rf(n,n.memoizedProps,c.memoizedProps)}break;case 27:xi(i,n),yi(n),d&512&&(Un||c===null||Lo(c,c.return)),c!==null&&d&4&&rf(n,n.memoizedProps,c.memoizedProps);break;case 5:if(xi(i,n),yi(n),d&512&&(Un||c===null||Lo(c,c.return)),n.flags&32){g=n.stateNode;try{jr(g,"")}catch(Je){Pa(n,n.return,Je)}}d&4&&n.stateNode!=null&&(g=n.memoizedProps,rf(n,g,c!==null?c.memoizedProps:g)),d&1024&&(cf=!0);break;case 6:if(xi(i,n),yi(n),d&4){if(n.stateNode===null)throw Error(r(162));d=n.memoizedProps,c=n.stateNode;try{c.nodeValue=d}catch(Je){Pa(n,n.return,Je)}}break;case 3:if(ch=null,g=po,po=oh(i.containerInfo),xi(i,n),po=g,yi(n),d&4&&c!==null&&c.memoizedState.isDehydrated)try{kd(i.containerInfo)}catch(Je){Pa(n,n.return,Je)}cf&&(cf=!1,Kx(n));break;case 4:d=po,po=oh(n.stateNode.containerInfo),xi(i,n),yi(n),po=d;break;case 12:xi(i,n),yi(n);break;case 13:xi(i,n),yi(n),n.child.flags&8192&&n.memoizedState!==null!=(c!==null&&c.memoizedState!==null)&&(mf=Rt()),d&4&&(d=n.updateQueue,d!==null&&(n.updateQueue=null,Af(n,d)));break;case 22:g=n.memoizedState!==null;var Ne=c!==null&&c.memoizedState!==null,Ke=cl,ht=Un;if(cl=Ke||g,Un=ht||Ne,xi(i,n),Un=ht,cl=Ke,yi(n),d&8192)e:for(i=n.stateNode,i._visibility=g?i._visibility&-2:i._visibility|1,g&&(c===null||Ne||cl||Un||kc(n)),c=null,i=n;;){if(i.tag===5||i.tag===26){if(c===null){Ne=c=i;try{if(w=Ne.stateNode,g)O=w.style,typeof O.setProperty=="function"?O.setProperty("display","none","important"):O.display="none";else{ce=Ne.stateNode;var vt=Ne.memoizedProps.style,Ye=vt!=null&&vt.hasOwnProperty("display")?vt.display:null;ce.style.display=Ye==null||typeof Ye=="boolean"?"":(""+Ye).trim()}}catch(Je){Pa(Ne,Ne.return,Je)}}}else if(i.tag===6){if(c===null){Ne=i;try{Ne.stateNode.nodeValue=g?"":Ne.memoizedProps}catch(Je){Pa(Ne,Ne.return,Je)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===n)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break e;for(;i.sibling===null;){if(i.return===null||i.return===n)break e;c===i&&(c=null),i=i.return}c===i&&(c=null),i.sibling.return=i.return,i=i.sibling}d&4&&(d=n.updateQueue,d!==null&&(c=d.retryQueue,c!==null&&(d.retryQueue=null,Af(n,c))));break;case 19:xi(i,n),yi(n),d&4&&(d=n.updateQueue,d!==null&&(n.updateQueue=null,Af(n,d)));break;case 30:break;case 21:break;default:xi(i,n),yi(n)}}function yi(n){var i=n.flags;if(i&2){try{for(var c,d=n.return;d!==null;){if(Dx(d)){c=d;break}d=d.return}if(c==null)throw Error(r(160));switch(c.tag){case 27:var g=c.stateNode,w=of(n);$u(n,w,g);break;case 5:var O=c.stateNode;c.flags&32&&(jr(O,""),c.flags&=-33);var ce=of(n);$u(n,ce,O);break;case 3:case 4:var Ne=c.stateNode.containerInfo,Ke=of(n);lf(n,Ke,Ne);break;default:throw Error(r(161))}}catch(ht){Pa(n,n.return,ht)}n.flags&=-3}i&4096&&(n.flags&=-4097)}function Kx(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var i=n;Kx(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),n=n.sibling}}function Il(n,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)Px(n,i.alternate,i),i=i.sibling}function kc(n){for(n=n.child;n!==null;){var i=n;switch(i.tag){case 0:case 11:case 14:case 15:Dl(4,i,i.return),kc(i);break;case 1:Lo(i,i.return);var c=i.stateNode;typeof c.componentWillUnmount=="function"&&Tx(i,i.return,c),kc(i);break;case 27:bd(i.stateNode);case 26:case 5:Lo(i,i.return),kc(i);break;case 22:i.memoizedState===null&&kc(i);break;case 30:kc(i);break;default:kc(i)}n=n.sibling}}function Hl(n,i,c){for(c=c&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var d=i.alternate,g=n,w=i,O=w.flags;switch(w.tag){case 0:case 11:case 15:Hl(g,w,c),dd(4,w);break;case 1:if(Hl(g,w,c),d=w,g=d.stateNode,typeof g.componentDidMount=="function")try{g.componentDidMount()}catch(Ke){Pa(d,d.return,Ke)}if(d=w,g=d.updateQueue,g!==null){var ce=d.stateNode;try{var Ne=g.shared.hiddenCallbacks;if(Ne!==null)for(g.shared.hiddenCallbacks=null,g=0;g<Ne.length;g++)Vs(Ne[g],ce)}catch(Ke){Pa(d,d.return,Ke)}}c&&O&64&&Qx(w),ud(w,w.return);break;case 27:Ix(w);case 26:case 5:Hl(g,w,c),c&&d===null&&O&4&&Rx(w),ud(w,w.return);break;case 12:Hl(g,w,c);break;case 13:Hl(g,w,c),c&&O&4&&zx(g,w);break;case 22:w.memoizedState===null&&Hl(g,w,c),ud(w,w.return);break;case 30:break;default:Hl(g,w,c)}i=i.sibling}}function df(n,i){var c=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(c=n.memoizedState.cachePool.pool),n=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(n=i.memoizedState.cachePool.pool),n!==c&&(n!=null&&n.refCount++,c!=null&&xc(c))}function uf(n,i){n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&xc(n))}function Qo(n,i,c,d){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Gx(n,i,c,d),i=i.sibling}function Gx(n,i,c,d){var g=i.flags;switch(i.tag){case 0:case 11:case 15:Qo(n,i,c,d),g&2048&&dd(9,i);break;case 1:Qo(n,i,c,d);break;case 3:Qo(n,i,c,d),g&2048&&(n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&xc(n)));break;case 12:if(g&2048){Qo(n,i,c,d),n=i.stateNode;try{var w=i.memoizedProps,O=w.id,ce=w.onPostCommit;typeof ce=="function"&&ce(O,i.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(Ne){Pa(i,i.return,Ne)}}else Qo(n,i,c,d);break;case 13:Qo(n,i,c,d);break;case 23:break;case 22:w=i.stateNode,O=i.alternate,i.memoizedState!==null?w._visibility&2?Qo(n,i,c,d):hd(n,i):w._visibility&2?Qo(n,i,c,d):(w._visibility|=2,dA(n,i,c,d,(i.subtreeFlags&10256)!==0)),g&2048&&df(O,i);break;case 24:Qo(n,i,c,d),g&2048&&uf(i.alternate,i);break;default:Qo(n,i,c,d)}}function dA(n,i,c,d,g){for(g=g&&(i.subtreeFlags&10256)!==0,i=i.child;i!==null;){var w=n,O=i,ce=c,Ne=d,Ke=O.flags;switch(O.tag){case 0:case 11:case 15:dA(w,O,ce,Ne,g),dd(8,O);break;case 23:break;case 22:var ht=O.stateNode;O.memoizedState!==null?ht._visibility&2?dA(w,O,ce,Ne,g):hd(w,O):(ht._visibility|=2,dA(w,O,ce,Ne,g)),g&&Ke&2048&&df(O.alternate,O);break;case 24:dA(w,O,ce,Ne,g),g&&Ke&2048&&uf(O.alternate,O);break;default:dA(w,O,ce,Ne,g)}i=i.sibling}}function hd(n,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var c=n,d=i,g=d.flags;switch(d.tag){case 22:hd(c,d),g&2048&&df(d.alternate,d);break;case 24:hd(c,d),g&2048&&uf(d.alternate,d);break;default:hd(c,d)}i=i.sibling}}var pd=8192;function uA(n){if(n.subtreeFlags&pd)for(n=n.child;n!==null;)Vx(n),n=n.sibling}function Vx(n){switch(n.tag){case 26:uA(n),n.flags&pd&&n.memoizedState!==null&&aj(po,n.memoizedState,n.memoizedProps);break;case 5:uA(n);break;case 3:case 4:var i=po;po=oh(n.stateNode.containerInfo),uA(n),po=i;break;case 22:n.memoizedState===null&&(i=n.alternate,i!==null&&i.memoizedState!==null?(i=pd,pd=16777216,uA(n),pd=i):uA(n));break;default:uA(n)}}function $x(n){var i=n.alternate;if(i!==null&&(n=i.child,n!==null)){i.child=null;do i=n.sibling,n.sibling=null,n=i;while(n!==null)}}function fd(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var c=0;c<i.length;c++){var d=i[c];ir=d,Yx(d,n)}$x(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)Wx(n),n=n.sibling}function Wx(n){switch(n.tag){case 0:case 11:case 15:fd(n),n.flags&2048&&Dl(9,n,n.return);break;case 3:fd(n);break;case 12:fd(n);break;case 22:var i=n.stateNode;n.memoizedState!==null&&i._visibility&2&&(n.return===null||n.return.tag!==13)?(i._visibility&=-3,Wu(n)):fd(n);break;default:fd(n)}}function Wu(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var c=0;c<i.length;c++){var d=i[c];ir=d,Yx(d,n)}$x(n)}for(n=n.child;n!==null;){switch(i=n,i.tag){case 0:case 11:case 15:Dl(8,i,i.return),Wu(i);break;case 22:c=i.stateNode,c._visibility&2&&(c._visibility&=-3,Wu(i));break;default:Wu(i)}n=n.sibling}}function Yx(n,i){for(;ir!==null;){var c=ir;switch(c.tag){case 0:case 11:case 15:Dl(8,c,i);break;case 23:case 22:if(c.memoizedState!==null&&c.memoizedState.cachePool!==null){var d=c.memoizedState.cachePool.pool;d!=null&&d.refCount++}break;case 24:xc(c.memoizedState.cache)}if(d=c.child,d!==null)d.return=c,ir=d;else e:for(c=n;ir!==null;){d=ir;var g=d.sibling,w=d.return;if(Ox(d),d===c){ir=null;break e}if(g!==null){g.return=w,ir=g;break e}ir=w}}}var y2={getCacheForType:function(n){var i=Nn(Cn),c=i.data.get(n);return c===void 0&&(c=n(),i.data.set(n,c)),c}},v2=typeof WeakMap=="function"?WeakMap:Map,Ba=0,qa=null,Xs=null,oa=0,Na=0,vi=null,Pl=!1,hA=!1,hf=!1,dl=0,bn=0,Ol=0,Fc=0,pf=0,qi=0,pA=0,md=null,ii=null,ff=!1,mf=0,Yu=1/0,Xu=null,Ml=null,xr=0,zl=null,fA=null,mA=0,gf=0,xf=null,Xx=null,gd=0,yf=null;function bi(){if((Ba&2)!==0&&oa!==0)return oa&-oa;if(Z.T!==null){var n=al;return n!==0?n:Nf()}return Re()}function Jx(){qi===0&&(qi=(oa&536870912)===0||Aa?os():536870912);var n=zi.current;return n!==null&&(n.flags|=32),qi}function wi(n,i,c){(n===qa&&(Na===2||Na===9)||n.cancelPendingCommit!==null)&&(gA(n,0),ql(n,oa,qi,!1)),$e(n,c),((Ba&2)===0||n!==qa)&&(n===qa&&((Ba&2)===0&&(Fc|=c),bn===4&&ql(n,oa,qi,!1)),To(n))}function Zx(n,i,c){if((Ba&6)!==0)throw Error(r(327));var d=!c&&(i&124)===0&&(i&n.expiredLanes)===0||Et(n,i),g=d?j2(n,i):wf(n,i,!0),w=d;do{if(g===0){hA&&!d&&ql(n,i,0,!1);break}else{if(c=n.current.alternate,w&&!b2(c)){g=wf(n,i,!1),w=!1;continue}if(g===2){if(w=i,n.errorRecoveryDisabledLanes&w)var O=0;else O=n.pendingLanes&-536870913,O=O!==0?O:O&536870912?536870912:0;if(O!==0){i=O;e:{var ce=n;g=md;var Ne=ce.current.memoizedState.isDehydrated;if(Ne&&(gA(ce,O).flags|=256),O=wf(ce,O,!1),O!==2){if(hf&&!Ne){ce.errorRecoveryDisabledLanes|=w,Fc|=w,g=4;break e}w=ii,ii=g,w!==null&&(ii===null?ii=w:ii.push.apply(ii,w))}g=O}if(w=!1,g!==2)continue}}if(g===1){gA(n,0),ql(n,i,0,!0);break}e:{switch(d=n,w=g,w){case 0:case 1:throw Error(r(345));case 4:if((i&4194048)!==i)break;case 6:ql(d,i,qi,!Pl);break e;case 2:ii=null;break;case 3:case 5:break;default:throw Error(r(329))}if((i&62914560)===i&&(g=mf+300-Rt(),10<g)){if(ql(d,i,qi,!Pl),Qt(d,0,!0)!==0)break e;d.timeoutHandle=S0(e0.bind(null,d,c,ii,Xu,ff,i,qi,Fc,pA,Pl,w,2,-0,0),g);break e}e0(d,c,ii,Xu,ff,i,qi,Fc,pA,Pl,w,0,-0,0)}}break}while(!0);To(n)}function e0(n,i,c,d,g,w,O,ce,Ne,Ke,ht,vt,Ye,Je){if(n.timeoutHandle=-1,vt=i.subtreeFlags,(vt&8192||(vt&16785408)===16785408)&&(_d={stylesheets:null,count:0,unsuspend:sj},Vx(i),vt=nj(),vt!==null)){n.cancelPendingCommit=vt(o0.bind(null,n,i,w,c,d,g,O,ce,Ne,ht,1,Ye,Je)),ql(n,w,O,!Ke);return}o0(n,i,w,c,d,g,O,ce,Ne)}function b2(n){for(var i=n;;){var c=i.tag;if((c===0||c===11||c===15)&&i.flags&16384&&(c=i.updateQueue,c!==null&&(c=c.stores,c!==null)))for(var d=0;d<c.length;d++){var g=c[d],w=g.getSnapshot;g=g.value;try{if(!za(w(),g))return!1}catch{return!1}}if(c=i.child,i.subtreeFlags&16384&&c!==null)c.return=i,i=c;else{if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function ql(n,i,c,d){i&=~pf,i&=~Fc,n.suspendedLanes|=i,n.pingedLanes&=~i,d&&(n.warmLanes|=i),d=n.expirationTimes;for(var g=i;0<g;){var w=31-bt(g),O=1<<w;d[w]=-1,g&=~O}c!==0&&Ze(n,c,i)}function Ju(){return(Ba&6)===0?(xd(0),!1):!0}function vf(){if(Xs!==null){if(Na===0)var n=Xs.return;else n=Xs,oo=On=null,Gn(n),cA=null,ld=0,n=Xs;for(;n!==null;)Lx(n.alternate,n),n=n.return;Xs=null}}function gA(n,i){var c=n.timeoutHandle;c!==-1&&(n.timeoutHandle=-1,H2(c)),c=n.cancelPendingCommit,c!==null&&(n.cancelPendingCommit=null,c()),vf(),qa=n,Xs=c=Ri(n.current,null),oa=i,Na=0,vi=null,Pl=!1,hA=Et(n,i),hf=!1,pA=qi=pf=Fc=Ol=bn=0,ii=md=null,ff=!1,(i&8)!==0&&(i|=i&32);var d=n.entangledLanes;if(d!==0)for(n=n.entanglements,d&=i;0<d;){var g=31-bt(d),w=1<<g;i|=n[g],d&=~w}return dl=i,uc(),c}function t0(n,i){cs=null,Z.H=Hu,i===se||i===ue?(i=Te(),Na=3):i===ne?(i=Te(),Na=4):Na=i===yx?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,vi=i,Xs===null&&(bn=1,qu(n,zr(i,n.current)))}function s0(){var n=Z.H;return Z.H=Hu,n===null?Hu:n}function a0(){var n=Z.A;return Z.A=y2,n}function bf(){bn=4,Pl||(oa&4194048)!==oa&&zi.current!==null||(hA=!0),(Ol&134217727)===0&&(Fc&134217727)===0||qa===null||ql(qa,oa,qi,!1)}function wf(n,i,c){var d=Ba;Ba|=2;var g=s0(),w=a0();(qa!==n||oa!==i)&&(Xu=null,gA(n,i)),i=!1;var O=bn;e:do try{if(Na!==0&&Xs!==null){var ce=Xs,Ne=vi;switch(Na){case 8:vf(),O=6;break e;case 3:case 2:case 9:case 6:zi.current===null&&(i=!0);var Ke=Na;if(Na=0,vi=null,xA(n,ce,Ne,Ke),c&&hA){O=0;break e}break;default:Ke=Na,Na=0,vi=null,xA(n,ce,Ne,Ke)}}w2(),O=bn;break}catch(ht){t0(n,ht)}while(!0);return i&&n.shellSuspendCounter++,oo=On=null,Ba=d,Z.H=g,Z.A=w,Xs===null&&(qa=null,oa=0,uc()),O}function w2(){for(;Xs!==null;)n0(Xs)}function j2(n,i){var c=Ba;Ba|=2;var d=s0(),g=a0();qa!==n||oa!==i?(Xu=null,Yu=Rt()+500,gA(n,i)):hA=Et(n,i);e:do try{if(Na!==0&&Xs!==null){i=Xs;var w=vi;t:switch(Na){case 1:Na=0,vi=null,xA(n,i,w,1);break;case 2:case 9:if(be(w)){Na=0,vi=null,r0(i);break}i=function(){Na!==2&&Na!==9||qa!==n||(Na=7),To(n)},w.then(i,i);break e;case 3:Na=7;break e;case 4:Na=5;break e;case 7:be(w)?(Na=0,vi=null,r0(i)):(Na=0,vi=null,xA(n,i,w,7));break;case 5:var O=null;switch(Xs.tag){case 26:O=Xs.memoizedState;case 5:case 27:var ce=Xs;if(!O||P0(O)){Na=0,vi=null;var Ne=ce.sibling;if(Ne!==null)Xs=Ne;else{var Ke=ce.return;Ke!==null?(Xs=Ke,Zu(Ke)):Xs=null}break t}}Na=0,vi=null,xA(n,i,w,5);break;case 6:Na=0,vi=null,xA(n,i,w,6);break;case 8:vf(),bn=6;break e;default:throw Error(r(462))}}_2();break}catch(ht){t0(n,ht)}while(!0);return oo=On=null,Z.H=d,Z.A=g,Ba=c,Xs!==null?0:(qa=null,oa=0,uc(),bn)}function _2(){for(;Xs!==null&&!je();)n0(Xs)}function n0(n){var i=Ux(n.alternate,n,dl);n.memoizedProps=n.pendingProps,i===null?Zu(n):Xs=i}function r0(n){var i=n,c=i.alternate;switch(i.tag){case 15:case 0:i=Bx(c,i,i.pendingProps,i.type,void 0,oa);break;case 11:i=Bx(c,i,i.pendingProps,i.type.render,i.ref,oa);break;case 5:Gn(i);default:Lx(c,i),i=Xs=pc(i,dl),i=Ux(c,i,dl)}n.memoizedProps=n.pendingProps,i===null?Zu(n):Xs=i}function xA(n,i,c,d){oo=On=null,Gn(i),cA=null,ld=0;var g=i.return;try{if(h2(n,g,i,c,oa)){bn=1,qu(n,zr(c,n.current)),Xs=null;return}}catch(w){if(g!==null)throw Xs=g,w;bn=1,qu(n,zr(c,n.current)),Xs=null;return}i.flags&32768?(Aa||d===1?n=!0:hA||(oa&536870912)!==0?n=!1:(Pl=n=!0,(d===2||d===9||d===3||d===6)&&(d=zi.current,d!==null&&d.tag===13&&(d.flags|=16384))),i0(i,n)):Zu(i)}function Zu(n){var i=n;do{if((i.flags&32768)!==0){i0(i,Pl);return}n=i.return;var c=f2(i.alternate,i,dl);if(c!==null){Xs=c;return}if(i=i.sibling,i!==null){Xs=i;return}Xs=i=n}while(i!==null);bn===0&&(bn=5)}function i0(n,i){do{var c=m2(n.alternate,n);if(c!==null){c.flags&=32767,Xs=c;return}if(c=n.return,c!==null&&(c.flags|=32768,c.subtreeFlags=0,c.deletions=null),!i&&(n=n.sibling,n!==null)){Xs=n;return}Xs=n=c}while(n!==null);bn=6,Xs=null}function o0(n,i,c,d,g,w,O,ce,Ne){n.cancelPendingCommit=null;do eh();while(xr!==0);if((Ba&6)!==0)throw Error(r(327));if(i!==null){if(i===n.current)throw Error(r(177));if(w=i.lanes|i.childLanes,w|=Yc,kt(n,c,w,O,ce,Ne),n===qa&&(Xs=qa=null,oa=0),fA=i,zl=n,mA=c,gf=w,xf=g,Xx=d,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,S2(xe,function(){return u0(),null})):(n.callbackNode=null,n.callbackPriority=0),d=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||d){d=Z.T,Z.T=null,g=fe.p,fe.p=2,O=Ba,Ba|=4;try{g2(n,i,c)}finally{Ba=O,fe.p=g,Z.T=d}}xr=1,l0(),c0(),A0()}}function l0(){if(xr===1){xr=0;var n=zl,i=fA,c=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||c){c=Z.T,Z.T=null;var d=fe.p;fe.p=2;var g=Ba;Ba|=4;try{qx(i,n);var w=Qf,O=_l(n.containerInfo),ce=w.focusedElem,Ne=w.selectionRange;if(O!==ce&&ce&&ce.ownerDocument&&Li(ce.ownerDocument.documentElement,ce)){if(Ne!==null&&Qi(ce)){var Ke=Ne.start,ht=Ne.end;if(ht===void 0&&(ht=Ke),"selectionStart"in ce)ce.selectionStart=Ke,ce.selectionEnd=Math.min(ht,ce.value.length);else{var vt=ce.ownerDocument||document,Ye=vt&&vt.defaultView||window;if(Ye.getSelection){var Je=Ye.getSelection(),ks=ce.textContent.length,js=Math.min(Ne.start,ks),Ea=Ne.end===void 0?js:Math.min(Ne.end,ks);!Je.extend&&js>Ea&&(O=Ea,Ea=js,js=O);var He=$o(ce,js),Le=$o(ce,Ea);if(He&&Le&&(Je.rangeCount!==1||Je.anchorNode!==He.node||Je.anchorOffset!==He.offset||Je.focusNode!==Le.node||Je.focusOffset!==Le.offset)){var Me=vt.createRange();Me.setStart(He.node,He.offset),Je.removeAllRanges(),js>Ea?(Je.addRange(Me),Je.extend(Le.node,Le.offset)):(Me.setEnd(Le.node,Le.offset),Je.addRange(Me))}}}}for(vt=[],Je=ce;Je=Je.parentNode;)Je.nodeType===1&&vt.push({element:Je,left:Je.scrollLeft,top:Je.scrollTop});for(typeof ce.focus=="function"&&ce.focus(),ce=0;ce<vt.length;ce++){var ft=vt[ce];ft.element.scrollLeft=ft.left,ft.element.scrollTop=ft.top}}uh=!!Lf,Qf=Lf=null}finally{Ba=g,fe.p=d,Z.T=c}}n.current=i,xr=2}}function c0(){if(xr===2){xr=0;var n=zl,i=fA,c=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||c){c=Z.T,Z.T=null;var d=fe.p;fe.p=2;var g=Ba;Ba|=4;try{Px(n,i.alternate,i)}finally{Ba=g,fe.p=d,Z.T=c}}xr=3}}function A0(){if(xr===4||xr===3){xr=0,Ft();var n=zl,i=fA,c=mA,d=Xx;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?xr=5:(xr=0,fA=zl=null,d0(n,n.pendingLanes));var g=n.pendingLanes;if(g===0&&(Ml=null),Ee(c),i=i.stateNode,Ut&&typeof Ut.onCommitFiberRoot=="function")try{Ut.onCommitFiberRoot(dt,i,void 0,(i.current.flags&128)===128)}catch{}if(d!==null){i=Z.T,g=fe.p,fe.p=2,Z.T=null;try{for(var w=n.onRecoverableError,O=0;O<d.length;O++){var ce=d[O];w(ce.value,{componentStack:ce.stack})}}finally{Z.T=i,fe.p=g}}(mA&3)!==0&&eh(),To(n),g=n.pendingLanes,(c&4194090)!==0&&(g&42)!==0?n===yf?gd++:(gd=0,yf=n):gd=0,xd(0)}}function d0(n,i){(n.pooledCacheLanes&=i)===0&&(i=n.pooledCache,i!=null&&(n.pooledCache=null,xc(i)))}function eh(n){return l0(),c0(),A0(),u0()}function u0(){if(xr!==5)return!1;var n=zl,i=gf;gf=0;var c=Ee(mA),d=Z.T,g=fe.p;try{fe.p=32>c?32:c,Z.T=null,c=xf,xf=null;var w=zl,O=mA;if(xr=0,fA=zl=null,mA=0,(Ba&6)!==0)throw Error(r(331));var ce=Ba;if(Ba|=4,Wx(w.current),Gx(w,w.current,O,c),Ba=ce,xd(0,!1),Ut&&typeof Ut.onPostCommitFiberRoot=="function")try{Ut.onPostCommitFiberRoot(dt,w)}catch{}return!0}finally{fe.p=g,Z.T=d,d0(n,i)}}function h0(n,i,c){i=zr(c,i),i=Yp(n.stateNode,i,2),n=Nt(n,i,2),n!==null&&($e(n,2),To(n))}function Pa(n,i,c){if(n.tag===3)h0(n,n,c);else for(;i!==null;){if(i.tag===3){h0(i,n,c);break}else if(i.tag===1){var d=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(Ml===null||!Ml.has(d))){n=zr(c,n),c=gx(2),d=Nt(i,c,2),d!==null&&(xx(c,d,i,n),$e(d,2),To(d));break}}i=i.return}}function jf(n,i,c){var d=n.pingCache;if(d===null){d=n.pingCache=new v2;var g=new Set;d.set(i,g)}else g=d.get(i),g===void 0&&(g=new Set,d.set(i,g));g.has(c)||(hf=!0,g.add(c),n=B2.bind(null,n,i,c),i.then(n,n))}function B2(n,i,c){var d=n.pingCache;d!==null&&d.delete(i),n.pingedLanes|=n.suspendedLanes&c,n.warmLanes&=~c,qa===n&&(oa&c)===c&&(bn===4||bn===3&&(oa&62914560)===oa&&300>Rt()-mf?(Ba&2)===0&&gA(n,0):pf|=c,pA===oa&&(pA=0)),To(n)}function p0(n,i){i===0&&(i=_e()),n=Xo(n,i),n!==null&&($e(n,i),To(n))}function N2(n){var i=n.memoizedState,c=0;i!==null&&(c=i.retryLane),p0(n,c)}function C2(n,i){var c=0;switch(n.tag){case 13:var d=n.stateNode,g=n.memoizedState;g!==null&&(c=g.retryLane);break;case 19:d=n.stateNode;break;case 22:d=n.stateNode._retryCache;break;default:throw Error(r(314))}d!==null&&d.delete(i),p0(n,c)}function S2(n,i){return mt(n,i)}var th=null,yA=null,_f=!1,sh=!1,Bf=!1,Uc=0;function To(n){n!==yA&&n.next===null&&(yA===null?th=yA=n:yA=yA.next=n),sh=!0,_f||(_f=!0,F2())}function xd(n,i){if(!Bf&&sh){Bf=!0;do for(var c=!1,d=th;d!==null;){if(n!==0){var g=d.pendingLanes;if(g===0)var w=0;else{var O=d.suspendedLanes,ce=d.pingedLanes;w=(1<<31-bt(42|n)+1)-1,w&=g&~(O&~ce),w=w&201326741?w&201326741|1:w?w|2:0}w!==0&&(c=!0,x0(d,w))}else w=oa,w=Qt(d,d===qa?w:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),(w&3)===0||Et(d,w)||(c=!0,x0(d,w));d=d.next}while(c);Bf=!1}}function k2(){f0()}function f0(){sh=_f=!1;var n=0;Uc!==0&&(I2()&&(n=Uc),Uc=0);for(var i=Rt(),c=null,d=th;d!==null;){var g=d.next,w=m0(d,i);w===0?(d.next=null,c===null?th=g:c.next=g,g===null&&(yA=c)):(c=d,(n!==0||(w&3)!==0)&&(sh=!0)),d=g}xd(n)}function m0(n,i){for(var c=n.suspendedLanes,d=n.pingedLanes,g=n.expirationTimes,w=n.pendingLanes&-62914561;0<w;){var O=31-bt(w),ce=1<<O,Ne=g[O];Ne===-1?((ce&c)===0||(ce&d)!==0)&&(g[O]=Jt(ce,i)):Ne<=i&&(n.expiredLanes|=ce),w&=~ce}if(i=qa,c=oa,c=Qt(n,n===i?c:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),d=n.callbackNode,c===0||n===i&&(Na===2||Na===9)||n.cancelPendingCommit!==null)return d!==null&&d!==null&&Ve(d),n.callbackNode=null,n.callbackPriority=0;if((c&3)===0||Et(n,c)){if(i=c&-c,i===n.callbackPriority)return i;switch(d!==null&&Ve(d),Ee(c)){case 2:case 8:c=pt;break;case 32:c=xe;break;case 268435456:c=Oe;break;default:c=xe}return d=g0.bind(null,n),c=mt(c,d),n.callbackPriority=i,n.callbackNode=c,i}return d!==null&&d!==null&&Ve(d),n.callbackPriority=2,n.callbackNode=null,2}function g0(n,i){if(xr!==0&&xr!==5)return n.callbackNode=null,n.callbackPriority=0,null;var c=n.callbackNode;if(eh()&&n.callbackNode!==c)return null;var d=oa;return d=Qt(n,n===qa?d:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),d===0?null:(Zx(n,d,i),m0(n,Rt()),n.callbackNode!=null&&n.callbackNode===c?g0.bind(null,n):null)}function x0(n,i){if(eh())return null;Zx(n,i,!0)}function F2(){P2(function(){(Ba&6)!==0?mt(Xe,k2):f0()})}function Nf(){return Uc===0&&(Uc=os()),Uc}function y0(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:rt(""+n)}function v0(n,i){var c=i.ownerDocument.createElement("input");return c.name=i.name,c.value=i.value,n.id&&c.setAttribute("form",n.id),i.parentNode.insertBefore(c,i),n=new FormData(n),c.parentNode.removeChild(c),n}function U2(n,i,c,d,g){if(i==="submit"&&c&&c.stateNode===g){var w=y0((g[Ot]||null).action),O=d.submitter;O&&(i=(i=O[Ot]||null)?y0(i.formAction):O.getAttribute("formAction"),i!==null&&(w=i,O=null));var ce=new Zr("action","action",null,d,g);n.push({event:ce,listeners:[{instance:null,listener:function(){if(d.defaultPrevented){if(Uc!==0){var Ne=O?v0(g,O):new FormData(g);Mi(c,{pending:!0,data:Ne,method:g.method,action:w},null,Ne)}}else typeof w=="function"&&(ce.preventDefault(),Ne=O?v0(g,O):new FormData(g),Mi(c,{pending:!0,data:Ne,method:g.method,action:w},w,Ne))},currentTarget:g}]})}}for(var Cf=0;Cf<Wc.length;Cf++){var Sf=Wc[Cf],E2=Sf.toLowerCase(),L2=Sf[0].toUpperCase()+Sf.slice(1);si(E2,"on"+L2)}si(Ti,"onAnimationEnd"),si(Bl,"onAnimationIteration"),si(Wo,"onAnimationStart"),si("dblclick","onDoubleClick"),si("focusin","onFocus"),si("focusout","onBlur"),si($c,"onTransitionRun"),si(vu,"onTransitionStart"),si(bu,"onTransitionCancel"),si(KA,"onTransitionEnd"),Se("onMouseEnter",["mouseout","mouseover"]),Se("onMouseLeave",["mouseout","mouseover"]),Se("onPointerEnter",["pointerout","pointerover"]),Se("onPointerLeave",["pointerout","pointerover"]),ie("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ie("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ie("onBeforeInput",["compositionend","keypress","textInput","paste"]),ie("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ie("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ie("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var yd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Q2=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(yd));function b0(n,i){i=(i&4)!==0;for(var c=0;c<n.length;c++){var d=n[c],g=d.event;d=d.listeners;e:{var w=void 0;if(i)for(var O=d.length-1;0<=O;O--){var ce=d[O],Ne=ce.instance,Ke=ce.currentTarget;if(ce=ce.listener,Ne!==w&&g.isPropagationStopped())break e;w=ce,g.currentTarget=Ke;try{w(g)}catch(ht){zu(ht)}g.currentTarget=null,w=Ne}else for(O=0;O<d.length;O++){if(ce=d[O],Ne=ce.instance,Ke=ce.currentTarget,ce=ce.listener,Ne!==w&&g.isPropagationStopped())break e;w=ce,g.currentTarget=Ke;try{w(g)}catch(ht){zu(ht)}g.currentTarget=null,w=Ne}}}}function Js(n,i){var c=i[xs];c===void 0&&(c=i[xs]=new Set);var d=n+"__bubble";c.has(d)||(w0(i,n,2,!1),c.add(d))}function kf(n,i,c){var d=0;i&&(d|=4),w0(c,n,d,i)}var ah="_reactListening"+Math.random().toString(36).slice(2);function Ff(n){if(!n[ah]){n[ah]=!0,Dn.forEach(function(c){c!=="selectionchange"&&(Q2.has(c)||kf(c,!1,n),kf(c,!0,n))});var i=n.nodeType===9?n:n.ownerDocument;i===null||i[ah]||(i[ah]=!0,kf("selectionchange",!1,i))}}function w0(n,i,c,d){switch(G0(i)){case 2:var g=oj;break;case 8:g=lj;break;default:g=qf}c=g.bind(null,i,c,n),g=void 0,!yn||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(g=!0),d?g!==void 0?n.addEventListener(i,c,{capture:!0,passive:g}):n.addEventListener(i,c,!0):g!==void 0?n.addEventListener(i,c,{passive:g}):n.addEventListener(i,c,!1)}function Uf(n,i,c,d,g){var w=d;if((i&1)===0&&(i&2)===0&&d!==null)e:for(;;){if(d===null)return;var O=d.tag;if(O===3||O===4){var ce=d.stateNode.containerInfo;if(ce===g)break;if(O===4)for(O=d.return;O!==null;){var Ne=O.tag;if((Ne===3||Ne===4)&&O.stateNode.containerInfo===g)return;O=O.return}for(;ce!==null;){if(O=da(ce),O===null)return;if(Ne=O.tag,Ne===5||Ne===6||Ne===26||Ne===27){d=w=O;continue e}ce=ce.parentNode}}d=d.return}dn(function(){var Ke=w,ht=Pt(c),vt=[];e:{var Ye=GA.get(n);if(Ye!==void 0){var Je=Zr,ks=n;switch(n){case"keypress":if(Dr(c)===0)break e;case"keydown":case"keyup":Je=_s;break;case"focusin":ks="focus",Je=Bo;break;case"focusout":ks="blur",Je=Bo;break;case"beforeblur":case"afterblur":Je=Bo;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Je=_o;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Je=ei;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Je=Va;break;case Ti:case Bl:case Wo:Je=pi;break;case KA:Je=un;break;case"scroll":case"scrollend":Je=Si;break;case"wheel":Je=hn;break;case"copy":case"cut":case"paste":Je=_;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Je=Gs;break;case"toggle":case"beforetoggle":Je=qn}var js=(i&4)!==0,Ea=!js&&(n==="scroll"||n==="scrollend"),He=js?Ye!==null?Ye+"Capture":null:Ye;js=[];for(var Le=Ke,Me;Le!==null;){var ft=Le;if(Me=ft.stateNode,ft=ft.tag,ft!==5&&ft!==26&&ft!==27||Me===null||He===null||(ft=zn(Le,He),ft!=null&&js.push(vd(Le,ft,Me))),Ea)break;Le=Le.return}0<js.length&&(Ye=new Je(Ye,ks,null,c,ht),vt.push({event:Ye,listeners:js}))}}if((i&7)===0){e:{if(Ye=n==="mouseover"||n==="pointerover",Je=n==="mouseout"||n==="pointerout",Ye&&c!==Dt&&(ks=c.relatedTarget||c.fromElement)&&(da(ks)||ks[ss]))break e;if((Je||Ye)&&(Ye=ht.window===ht?ht:(Ye=ht.ownerDocument)?Ye.defaultView||Ye.parentWindow:window,Je?(ks=c.relatedTarget||c.toElement,Je=Ke,ks=ks?da(ks):null,ks!==null&&(Ea=l(ks),js=ks.tag,ks!==Ea||js!==5&&js!==27&&js!==6)&&(ks=null)):(Je=null,ks=Ke),Je!==ks)){if(js=_o,ft="onMouseLeave",He="onMouseEnter",Le="mouse",(n==="pointerout"||n==="pointerover")&&(js=Gs,ft="onPointerLeave",He="onPointerEnter",Le="pointer"),Ea=Je==null?Ye:ha(Je),Me=ks==null?Ye:ha(ks),Ye=new js(ft,Le+"leave",Je,c,ht),Ye.target=Ea,Ye.relatedTarget=Me,ft=null,da(ht)===Ke&&(js=new js(He,Le+"enter",ks,c,ht),js.target=Me,js.relatedTarget=Ea,ft=js),Ea=ft,Je&&ks)t:{for(js=Je,He=ks,Le=0,Me=js;Me;Me=vA(Me))Le++;for(Me=0,ft=He;ft;ft=vA(ft))Me++;for(;0<Le-Me;)js=vA(js),Le--;for(;0<Me-Le;)He=vA(He),Me--;for(;Le--;){if(js===He||He!==null&&js===He.alternate)break t;js=vA(js),He=vA(He)}js=null}else js=null;Je!==null&&j0(vt,Ye,Je,js,!1),ks!==null&&Ea!==null&&j0(vt,Ea,ks,js,!0)}}e:{if(Ye=Ke?ha(Ke):window,Je=Ye.nodeName&&Ye.nodeName.toLowerCase(),Je==="select"||Je==="input"&&Ye.type==="file")var us=Ds;else if(Kt(Ye))if(Ra)us=Ya;else{us=pn;var $s=ls}else Je=Ye.nodeName,!Je||Je.toLowerCase()!=="input"||Ye.type!=="checkbox"&&Ye.type!=="radio"?Ke&&De(Ke.elementType)&&(us=Ds):us=Nr;if(us&&(us=us(n,Ke))){Tt(vt,us,c,ht);break e}$s&&$s(n,Ye,Ke),n==="focusout"&&Ke&&Ye.type==="number"&&Ke.memoizedProps.value!=null&&Xr(Ye,"number",Ye.value)}switch($s=Ke?ha(Ke):window,n){case"focusin":(Kt($s)||$s.contentEditable==="true")&&(Or=$s,eo=Ke,ti=null);break;case"focusout":ti=eo=Or=null;break;case"mousedown":to=!0;break;case"contextmenu":case"mouseup":case"dragend":to=!1,Mr(vt,c,ht);break;case"selectionchange":if(Co)break;case"keydown":case"keyup":Mr(vt,c,ht)}var gs;if(ki)e:{switch(n){case"compositionstart":var Ns="onCompositionStart";break e;case"compositionend":Ns="onCompositionEnd";break e;case"compositionupdate":Ns="onCompositionUpdate";break e}Ns=void 0}else Fe?_n(n,c)&&(Ns="onCompositionEnd"):n==="keydown"&&c.keyCode===229&&(Ns="onCompositionStart");Ns&&(Fi&&c.locale!=="ko"&&(Fe||Ns!=="onCompositionStart"?Ns==="onCompositionEnd"&&Fe&&(gs=Xi()):(Rr=ht,Vo="value"in Rr?Rr.value:Rr.textContent,Fe=!0)),$s=nh(Ke,Ns),0<$s.length&&(Ns=new ve(Ns,n,null,c,ht),vt.push({event:Ns,listeners:$s}),gs?Ns.data=gs:(gs=R(c),gs!==null&&(Ns.data=gs)))),(gs=fi?Ge(n,c):it(n,c))&&(Ns=nh(Ke,"onBeforeInput"),0<Ns.length&&($s=new ve("onBeforeInput","beforeinput",null,c,ht),vt.push({event:$s,listeners:Ns}),$s.data=gs)),U2(vt,n,Ke,c,ht)}b0(vt,i)})}function vd(n,i,c){return{instance:n,listener:i,currentTarget:c}}function nh(n,i){for(var c=i+"Capture",d=[];n!==null;){var g=n,w=g.stateNode;if(g=g.tag,g!==5&&g!==26&&g!==27||w===null||(g=zn(n,c),g!=null&&d.unshift(vd(n,g,w)),g=zn(n,i),g!=null&&d.push(vd(n,g,w))),n.tag===3)return d;n=n.return}return[]}function vA(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function j0(n,i,c,d,g){for(var w=i._reactName,O=[];c!==null&&c!==d;){var ce=c,Ne=ce.alternate,Ke=ce.stateNode;if(ce=ce.tag,Ne!==null&&Ne===d)break;ce!==5&&ce!==26&&ce!==27||Ke===null||(Ne=Ke,g?(Ke=zn(c,w),Ke!=null&&O.unshift(vd(c,Ke,Ne))):g||(Ke=zn(c,w),Ke!=null&&O.push(vd(c,Ke,Ne)))),c=c.return}O.length!==0&&n.push({event:i,listeners:O})}var T2=/\r\n?/g,R2=/\u0000|\uFFFD/g;function _0(n){return(typeof n=="string"?n:""+n).replace(T2,`
`).replace(R2,"")}function B0(n,i){return i=_0(i),_0(n)===i}function rh(){}function Ua(n,i,c,d,g,w){switch(c){case"children":typeof d=="string"?i==="body"||i==="textarea"&&d===""||jr(n,d):(typeof d=="number"||typeof d=="bigint")&&i!=="body"&&jr(n,""+d);break;case"className":as(n,"class",d);break;case"tabIndex":as(n,"tabindex",d);break;case"dir":case"role":case"viewBox":case"width":case"height":as(n,c,d);break;case"style":ge(n,d,w);break;case"data":if(i!=="object"){as(n,"data",d);break}case"src":case"href":if(d===""&&(i!=="a"||c!=="href")){n.removeAttribute(c);break}if(d==null||typeof d=="function"||typeof d=="symbol"||typeof d=="boolean"){n.removeAttribute(c);break}d=rt(""+d),n.setAttribute(c,d);break;case"action":case"formAction":if(typeof d=="function"){n.setAttribute(c,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof w=="function"&&(c==="formAction"?(i!=="input"&&Ua(n,i,"name",g.name,g,null),Ua(n,i,"formEncType",g.formEncType,g,null),Ua(n,i,"formMethod",g.formMethod,g,null),Ua(n,i,"formTarget",g.formTarget,g,null)):(Ua(n,i,"encType",g.encType,g,null),Ua(n,i,"method",g.method,g,null),Ua(n,i,"target",g.target,g,null)));if(d==null||typeof d=="symbol"||typeof d=="boolean"){n.removeAttribute(c);break}d=rt(""+d),n.setAttribute(c,d);break;case"onClick":d!=null&&(n.onclick=rh);break;case"onScroll":d!=null&&Js("scroll",n);break;case"onScrollEnd":d!=null&&Js("scrollend",n);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(r(61));if(c=d.__html,c!=null){if(g.children!=null)throw Error(r(60));n.innerHTML=c}}break;case"multiple":n.multiple=d&&typeof d!="function"&&typeof d!="symbol";break;case"muted":n.muted=d&&typeof d!="function"&&typeof d!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(d==null||typeof d=="function"||typeof d=="boolean"||typeof d=="symbol"){n.removeAttribute("xlink:href");break}c=rt(""+d),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":d!=null&&typeof d!="function"&&typeof d!="symbol"?n.setAttribute(c,""+d):n.removeAttribute(c);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":d&&typeof d!="function"&&typeof d!="symbol"?n.setAttribute(c,""):n.removeAttribute(c);break;case"capture":case"download":d===!0?n.setAttribute(c,""):d!==!1&&d!=null&&typeof d!="function"&&typeof d!="symbol"?n.setAttribute(c,d):n.removeAttribute(c);break;case"cols":case"rows":case"size":case"span":d!=null&&typeof d!="function"&&typeof d!="symbol"&&!isNaN(d)&&1<=d?n.setAttribute(c,d):n.removeAttribute(c);break;case"rowSpan":case"start":d==null||typeof d=="function"||typeof d=="symbol"||isNaN(d)?n.removeAttribute(c):n.setAttribute(c,d);break;case"popover":Js("beforetoggle",n),Js("toggle",n),vs(n,"popover",d);break;case"xlinkActuate":ps(n,"http://www.w3.org/1999/xlink","xlink:actuate",d);break;case"xlinkArcrole":ps(n,"http://www.w3.org/1999/xlink","xlink:arcrole",d);break;case"xlinkRole":ps(n,"http://www.w3.org/1999/xlink","xlink:role",d);break;case"xlinkShow":ps(n,"http://www.w3.org/1999/xlink","xlink:show",d);break;case"xlinkTitle":ps(n,"http://www.w3.org/1999/xlink","xlink:title",d);break;case"xlinkType":ps(n,"http://www.w3.org/1999/xlink","xlink:type",d);break;case"xmlBase":ps(n,"http://www.w3.org/XML/1998/namespace","xml:base",d);break;case"xmlLang":ps(n,"http://www.w3.org/XML/1998/namespace","xml:lang",d);break;case"xmlSpace":ps(n,"http://www.w3.org/XML/1998/namespace","xml:space",d);break;case"is":vs(n,"is",d);break;case"innerText":case"textContent":break;default:(!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(c=st.get(c)||c,vs(n,c,d))}}function Ef(n,i,c,d,g,w){switch(c){case"style":ge(n,d,w);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(r(61));if(c=d.__html,c!=null){if(g.children!=null)throw Error(r(60));n.innerHTML=c}}break;case"children":typeof d=="string"?jr(n,d):(typeof d=="number"||typeof d=="bigint")&&jr(n,""+d);break;case"onScroll":d!=null&&Js("scroll",n);break;case"onScrollEnd":d!=null&&Js("scrollend",n);break;case"onClick":d!=null&&(n.onclick=rh);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ma.hasOwnProperty(c))e:{if(c[0]==="o"&&c[1]==="n"&&(g=c.endsWith("Capture"),i=c.slice(2,g?c.length-7:void 0),w=n[Ot]||null,w=w!=null?w[c]:null,typeof w=="function"&&n.removeEventListener(i,w,g),typeof d=="function")){typeof w!="function"&&w!==null&&(c in n?n[c]=null:n.hasAttribute(c)&&n.removeAttribute(c)),n.addEventListener(i,d,g);break e}c in n?n[c]=d:d===!0?n.setAttribute(c,""):vs(n,c,d)}}}function yr(n,i,c){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Js("error",n),Js("load",n);var d=!1,g=!1,w;for(w in c)if(c.hasOwnProperty(w)){var O=c[w];if(O!=null)switch(w){case"src":d=!0;break;case"srcSet":g=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:Ua(n,i,w,O,c,null)}}g&&Ua(n,i,"srcSet",c.srcSet,c,null),d&&Ua(n,i,"src",c.src,c,null);return;case"input":Js("invalid",n);var ce=w=O=g=null,Ne=null,Ke=null;for(d in c)if(c.hasOwnProperty(d)){var ht=c[d];if(ht!=null)switch(d){case"name":g=ht;break;case"type":O=ht;break;case"checked":Ne=ht;break;case"defaultChecked":Ke=ht;break;case"value":w=ht;break;case"defaultValue":ce=ht;break;case"children":case"dangerouslySetInnerHTML":if(ht!=null)throw Error(r(137,i));break;default:Ua(n,i,d,ht,c,null)}}Zn(n,w,ce,Ne,Ke,O,g,!1),ea(n);return;case"select":Js("invalid",n),d=O=w=null;for(g in c)if(c.hasOwnProperty(g)&&(ce=c[g],ce!=null))switch(g){case"value":w=ce;break;case"defaultValue":O=ce;break;case"multiple":d=ce;default:Ua(n,i,g,ce,c,null)}i=w,c=O,n.multiple=!!d,i!=null?Tr(n,!!d,i,!1):c!=null&&Tr(n,!!d,c,!0);return;case"textarea":Js("invalid",n),w=g=d=null;for(O in c)if(c.hasOwnProperty(O)&&(ce=c[O],ce!=null))switch(O){case"value":d=ce;break;case"defaultValue":g=ce;break;case"children":w=ce;break;case"dangerouslySetInnerHTML":if(ce!=null)throw Error(r(91));break;default:Ua(n,i,O,ce,c,null)}di(n,d,g,w),ea(n);return;case"option":for(Ne in c)if(c.hasOwnProperty(Ne)&&(d=c[Ne],d!=null))switch(Ne){case"selected":n.selected=d&&typeof d!="function"&&typeof d!="symbol";break;default:Ua(n,i,Ne,d,c,null)}return;case"dialog":Js("beforetoggle",n),Js("toggle",n),Js("cancel",n),Js("close",n);break;case"iframe":case"object":Js("load",n);break;case"video":case"audio":for(d=0;d<yd.length;d++)Js(yd[d],n);break;case"image":Js("error",n),Js("load",n);break;case"details":Js("toggle",n);break;case"embed":case"source":case"link":Js("error",n),Js("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Ke in c)if(c.hasOwnProperty(Ke)&&(d=c[Ke],d!=null))switch(Ke){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:Ua(n,i,Ke,d,c,null)}return;default:if(De(i)){for(ht in c)c.hasOwnProperty(ht)&&(d=c[ht],d!==void 0&&Ef(n,i,ht,d,c,void 0));return}}for(ce in c)c.hasOwnProperty(ce)&&(d=c[ce],d!=null&&Ua(n,i,ce,d,c,null))}function D2(n,i,c,d){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var g=null,w=null,O=null,ce=null,Ne=null,Ke=null,ht=null;for(Je in c){var vt=c[Je];if(c.hasOwnProperty(Je)&&vt!=null)switch(Je){case"checked":break;case"value":break;case"defaultValue":Ne=vt;default:d.hasOwnProperty(Je)||Ua(n,i,Je,null,d,vt)}}for(var Ye in d){var Je=d[Ye];if(vt=c[Ye],d.hasOwnProperty(Ye)&&(Je!=null||vt!=null))switch(Ye){case"type":w=Je;break;case"name":g=Je;break;case"checked":Ke=Je;break;case"defaultChecked":ht=Je;break;case"value":O=Je;break;case"defaultValue":ce=Je;break;case"children":case"dangerouslySetInnerHTML":if(Je!=null)throw Error(r(137,i));break;default:Je!==vt&&Ua(n,i,Ye,Je,d,vt)}}Qr(n,O,ce,Ne,Ke,ht,w,g);return;case"select":Je=O=ce=Ye=null;for(w in c)if(Ne=c[w],c.hasOwnProperty(w)&&Ne!=null)switch(w){case"value":break;case"multiple":Je=Ne;default:d.hasOwnProperty(w)||Ua(n,i,w,null,d,Ne)}for(g in d)if(w=d[g],Ne=c[g],d.hasOwnProperty(g)&&(w!=null||Ne!=null))switch(g){case"value":Ye=w;break;case"defaultValue":ce=w;break;case"multiple":O=w;default:w!==Ne&&Ua(n,i,g,w,d,Ne)}i=ce,c=O,d=Je,Ye!=null?Tr(n,!!c,Ye,!1):!!d!=!!c&&(i!=null?Tr(n,!!c,i,!0):Tr(n,!!c,c?[]:"",!1));return;case"textarea":Je=Ye=null;for(ce in c)if(g=c[ce],c.hasOwnProperty(ce)&&g!=null&&!d.hasOwnProperty(ce))switch(ce){case"value":break;case"children":break;default:Ua(n,i,ce,null,d,g)}for(O in d)if(g=d[O],w=c[O],d.hasOwnProperty(O)&&(g!=null||w!=null))switch(O){case"value":Ye=g;break;case"defaultValue":Je=g;break;case"children":break;case"dangerouslySetInnerHTML":if(g!=null)throw Error(r(91));break;default:g!==w&&Ua(n,i,O,g,d,w)}er(n,Ye,Je);return;case"option":for(var ks in c)if(Ye=c[ks],c.hasOwnProperty(ks)&&Ye!=null&&!d.hasOwnProperty(ks))switch(ks){case"selected":n.selected=!1;break;default:Ua(n,i,ks,null,d,Ye)}for(Ne in d)if(Ye=d[Ne],Je=c[Ne],d.hasOwnProperty(Ne)&&Ye!==Je&&(Ye!=null||Je!=null))switch(Ne){case"selected":n.selected=Ye&&typeof Ye!="function"&&typeof Ye!="symbol";break;default:Ua(n,i,Ne,Ye,d,Je)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var js in c)Ye=c[js],c.hasOwnProperty(js)&&Ye!=null&&!d.hasOwnProperty(js)&&Ua(n,i,js,null,d,Ye);for(Ke in d)if(Ye=d[Ke],Je=c[Ke],d.hasOwnProperty(Ke)&&Ye!==Je&&(Ye!=null||Je!=null))switch(Ke){case"children":case"dangerouslySetInnerHTML":if(Ye!=null)throw Error(r(137,i));break;default:Ua(n,i,Ke,Ye,d,Je)}return;default:if(De(i)){for(var Ea in c)Ye=c[Ea],c.hasOwnProperty(Ea)&&Ye!==void 0&&!d.hasOwnProperty(Ea)&&Ef(n,i,Ea,void 0,d,Ye);for(ht in d)Ye=d[ht],Je=c[ht],!d.hasOwnProperty(ht)||Ye===Je||Ye===void 0&&Je===void 0||Ef(n,i,ht,Ye,d,Je);return}}for(var He in c)Ye=c[He],c.hasOwnProperty(He)&&Ye!=null&&!d.hasOwnProperty(He)&&Ua(n,i,He,null,d,Ye);for(vt in d)Ye=d[vt],Je=c[vt],!d.hasOwnProperty(vt)||Ye===Je||Ye==null&&Je==null||Ua(n,i,vt,Ye,d,Je)}var Lf=null,Qf=null;function ih(n){return n.nodeType===9?n:n.ownerDocument}function N0(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function C0(n,i){if(n===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&i==="foreignObject"?0:n}function Tf(n,i){return n==="textarea"||n==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Rf=null;function I2(){var n=window.event;return n&&n.type==="popstate"?n===Rf?!1:(Rf=n,!0):(Rf=null,!1)}var S0=typeof setTimeout=="function"?setTimeout:void 0,H2=typeof clearTimeout=="function"?clearTimeout:void 0,k0=typeof Promise=="function"?Promise:void 0,P2=typeof queueMicrotask=="function"?queueMicrotask:typeof k0<"u"?function(n){return k0.resolve(null).then(n).catch(O2)}:S0;function O2(n){setTimeout(function(){throw n})}function Kl(n){return n==="head"}function F0(n,i){var c=i,d=0,g=0;do{var w=c.nextSibling;if(n.removeChild(c),w&&w.nodeType===8)if(c=w.data,c==="/$"){if(0<d&&8>d){c=d;var O=n.ownerDocument;if(c&1&&bd(O.documentElement),c&2&&bd(O.body),c&4)for(c=O.head,bd(c),O=c.firstChild;O;){var ce=O.nextSibling,Ne=O.nodeName;O[Zs]||Ne==="SCRIPT"||Ne==="STYLE"||Ne==="LINK"&&O.rel.toLowerCase()==="stylesheet"||c.removeChild(O),O=ce}}if(g===0){n.removeChild(w),kd(i);return}g--}else c==="$"||c==="$?"||c==="$!"?g++:d=c.charCodeAt(0)-48;else d=0;c=w}while(c);kd(i)}function Df(n){var i=n.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var c=i;switch(i=i.nextSibling,c.nodeName){case"HTML":case"HEAD":case"BODY":Df(c),Sa(c);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(c.rel.toLowerCase()==="stylesheet")continue}n.removeChild(c)}}function M2(n,i,c,d){for(;n.nodeType===1;){var g=c;if(n.nodeName.toLowerCase()!==i.toLowerCase()){if(!d&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(d){if(!n[Zs])switch(i){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(w=n.getAttribute("rel"),w==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(w!==g.rel||n.getAttribute("href")!==(g.href==null||g.href===""?null:g.href)||n.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin)||n.getAttribute("title")!==(g.title==null?null:g.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(w=n.getAttribute("src"),(w!==(g.src==null?null:g.src)||n.getAttribute("type")!==(g.type==null?null:g.type)||n.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin))&&w&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(i==="input"&&n.type==="hidden"){var w=g.name==null?null:""+g.name;if(g.type==="hidden"&&n.getAttribute("name")===w)return n}else return n;if(n=fo(n.nextSibling),n===null)break}return null}function z2(n,i,c){if(i==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!c||(n=fo(n.nextSibling),n===null))return null;return n}function If(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState==="complete"}function q2(n,i){var c=n.ownerDocument;if(n.data!=="$?"||c.readyState==="complete")i();else{var d=function(){i(),c.removeEventListener("DOMContentLoaded",d)};c.addEventListener("DOMContentLoaded",d),n._reactRetry=d}}function fo(n){for(;n!=null;n=n.nextSibling){var i=n.nodeType;if(i===1||i===3)break;if(i===8){if(i=n.data,i==="$"||i==="$!"||i==="$?"||i==="F!"||i==="F")break;if(i==="/$")return null}}return n}var Hf=null;function U0(n){n=n.previousSibling;for(var i=0;n;){if(n.nodeType===8){var c=n.data;if(c==="$"||c==="$!"||c==="$?"){if(i===0)return n;i--}else c==="/$"&&i++}n=n.previousSibling}return null}function E0(n,i,c){switch(i=ih(c),n){case"html":if(n=i.documentElement,!n)throw Error(r(452));return n;case"head":if(n=i.head,!n)throw Error(r(453));return n;case"body":if(n=i.body,!n)throw Error(r(454));return n;default:throw Error(r(451))}}function bd(n){for(var i=n.attributes;i.length;)n.removeAttributeNode(i[0]);Sa(n)}var Ki=new Map,L0=new Set;function oh(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var ul=fe.d;fe.d={f:K2,r:G2,D:V2,C:$2,L:W2,m:Y2,X:J2,S:X2,M:Z2};function K2(){var n=ul.f(),i=Ju();return n||i}function G2(n){var i=xa(n);i!==null&&i.tag===5&&i.type==="form"?Nc(i):ul.r(n)}var bA=typeof document>"u"?null:document;function Q0(n,i,c){var d=bA;if(d&&typeof i=="string"&&i){var g=Ks(i);g='link[rel="'+n+'"][href="'+g+'"]',typeof c=="string"&&(g+='[crossorigin="'+c+'"]'),L0.has(g)||(L0.add(g),n={rel:n,crossOrigin:c,href:i},d.querySelector(g)===null&&(i=d.createElement("link"),yr(i,"link",n),Ws(i),d.head.appendChild(i)))}}function V2(n){ul.D(n),Q0("dns-prefetch",n,null)}function $2(n,i){ul.C(n,i),Q0("preconnect",n,i)}function W2(n,i,c){ul.L(n,i,c);var d=bA;if(d&&n&&i){var g='link[rel="preload"][as="'+Ks(i)+'"]';i==="image"&&c&&c.imageSrcSet?(g+='[imagesrcset="'+Ks(c.imageSrcSet)+'"]',typeof c.imageSizes=="string"&&(g+='[imagesizes="'+Ks(c.imageSizes)+'"]')):g+='[href="'+Ks(n)+'"]';var w=g;switch(i){case"style":w=wA(n);break;case"script":w=jA(n)}Ki.has(w)||(n=m({rel:"preload",href:i==="image"&&c&&c.imageSrcSet?void 0:n,as:i},c),Ki.set(w,n),d.querySelector(g)!==null||i==="style"&&d.querySelector(wd(w))||i==="script"&&d.querySelector(jd(w))||(i=d.createElement("link"),yr(i,"link",n),Ws(i),d.head.appendChild(i)))}}function Y2(n,i){ul.m(n,i);var c=bA;if(c&&n){var d=i&&typeof i.as=="string"?i.as:"script",g='link[rel="modulepreload"][as="'+Ks(d)+'"][href="'+Ks(n)+'"]',w=g;switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":w=jA(n)}if(!Ki.has(w)&&(n=m({rel:"modulepreload",href:n},i),Ki.set(w,n),c.querySelector(g)===null)){switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(c.querySelector(jd(w)))return}d=c.createElement("link"),yr(d,"link",n),Ws(d),c.head.appendChild(d)}}}function X2(n,i,c){ul.S(n,i,c);var d=bA;if(d&&n){var g=ya(d).hoistableStyles,w=wA(n);i=i||"default";var O=g.get(w);if(!O){var ce={loading:0,preload:null};if(O=d.querySelector(wd(w)))ce.loading=5;else{n=m({rel:"stylesheet",href:n,"data-precedence":i},c),(c=Ki.get(w))&&Pf(n,c);var Ne=O=d.createElement("link");Ws(Ne),yr(Ne,"link",n),Ne._p=new Promise(function(Ke,ht){Ne.onload=Ke,Ne.onerror=ht}),Ne.addEventListener("load",function(){ce.loading|=1}),Ne.addEventListener("error",function(){ce.loading|=2}),ce.loading|=4,lh(O,i,d)}O={type:"stylesheet",instance:O,count:1,state:ce},g.set(w,O)}}}function J2(n,i){ul.X(n,i);var c=bA;if(c&&n){var d=ya(c).hoistableScripts,g=jA(n),w=d.get(g);w||(w=c.querySelector(jd(g)),w||(n=m({src:n,async:!0},i),(i=Ki.get(g))&&Of(n,i),w=c.createElement("script"),Ws(w),yr(w,"link",n),c.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},d.set(g,w))}}function Z2(n,i){ul.M(n,i);var c=bA;if(c&&n){var d=ya(c).hoistableScripts,g=jA(n),w=d.get(g);w||(w=c.querySelector(jd(g)),w||(n=m({src:n,async:!0,type:"module"},i),(i=Ki.get(g))&&Of(n,i),w=c.createElement("script"),Ws(w),yr(w,"link",n),c.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},d.set(g,w))}}function T0(n,i,c,d){var g=(g=X.current)?oh(g):null;if(!g)throw Error(r(446));switch(n){case"meta":case"title":return null;case"style":return typeof c.precedence=="string"&&typeof c.href=="string"?(i=wA(c.href),c=ya(g).hoistableStyles,d=c.get(i),d||(d={type:"style",instance:null,count:0,state:null},c.set(i,d)),d):{type:"void",instance:null,count:0,state:null};case"link":if(c.rel==="stylesheet"&&typeof c.href=="string"&&typeof c.precedence=="string"){n=wA(c.href);var w=ya(g).hoistableStyles,O=w.get(n);if(O||(g=g.ownerDocument||g,O={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},w.set(n,O),(w=g.querySelector(wd(n)))&&!w._p&&(O.instance=w,O.state.loading=5),Ki.has(n)||(c={rel:"preload",as:"style",href:c.href,crossOrigin:c.crossOrigin,integrity:c.integrity,media:c.media,hrefLang:c.hrefLang,referrerPolicy:c.referrerPolicy},Ki.set(n,c),w||ej(g,n,c,O.state))),i&&d===null)throw Error(r(528,""));return O}if(i&&d!==null)throw Error(r(529,""));return null;case"script":return i=c.async,c=c.src,typeof c=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=jA(c),c=ya(g).hoistableScripts,d=c.get(i),d||(d={type:"script",instance:null,count:0,state:null},c.set(i,d)),d):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,n))}}function wA(n){return'href="'+Ks(n)+'"'}function wd(n){return'link[rel="stylesheet"]['+n+"]"}function R0(n){return m({},n,{"data-precedence":n.precedence,precedence:null})}function ej(n,i,c,d){n.querySelector('link[rel="preload"][as="style"]['+i+"]")?d.loading=1:(i=n.createElement("link"),d.preload=i,i.addEventListener("load",function(){return d.loading|=1}),i.addEventListener("error",function(){return d.loading|=2}),yr(i,"link",c),Ws(i),n.head.appendChild(i))}function jA(n){return'[src="'+Ks(n)+'"]'}function jd(n){return"script[async]"+n}function D0(n,i,c){if(i.count++,i.instance===null)switch(i.type){case"style":var d=n.querySelector('style[data-href~="'+Ks(c.href)+'"]');if(d)return i.instance=d,Ws(d),d;var g=m({},c,{"data-href":c.href,"data-precedence":c.precedence,href:null,precedence:null});return d=(n.ownerDocument||n).createElement("style"),Ws(d),yr(d,"style",g),lh(d,c.precedence,n),i.instance=d;case"stylesheet":g=wA(c.href);var w=n.querySelector(wd(g));if(w)return i.state.loading|=4,i.instance=w,Ws(w),w;d=R0(c),(g=Ki.get(g))&&Pf(d,g),w=(n.ownerDocument||n).createElement("link"),Ws(w);var O=w;return O._p=new Promise(function(ce,Ne){O.onload=ce,O.onerror=Ne}),yr(w,"link",d),i.state.loading|=4,lh(w,c.precedence,n),i.instance=w;case"script":return w=jA(c.src),(g=n.querySelector(jd(w)))?(i.instance=g,Ws(g),g):(d=c,(g=Ki.get(w))&&(d=m({},c),Of(d,g)),n=n.ownerDocument||n,g=n.createElement("script"),Ws(g),yr(g,"link",d),n.head.appendChild(g),i.instance=g);case"void":return null;default:throw Error(r(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(d=i.instance,i.state.loading|=4,lh(d,c.precedence,n));return i.instance}function lh(n,i,c){for(var d=c.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),g=d.length?d[d.length-1]:null,w=g,O=0;O<d.length;O++){var ce=d[O];if(ce.dataset.precedence===i)w=ce;else if(w!==g)break}w?w.parentNode.insertBefore(n,w.nextSibling):(i=c.nodeType===9?c.head:c,i.insertBefore(n,i.firstChild))}function Pf(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.title==null&&(n.title=i.title)}function Of(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.integrity==null&&(n.integrity=i.integrity)}var ch=null;function I0(n,i,c){if(ch===null){var d=new Map,g=ch=new Map;g.set(c,d)}else g=ch,d=g.get(c),d||(d=new Map,g.set(c,d));if(d.has(n))return d;for(d.set(n,null),c=c.getElementsByTagName(n),g=0;g<c.length;g++){var w=c[g];if(!(w[Zs]||w[Vt]||n==="link"&&w.getAttribute("rel")==="stylesheet")&&w.namespaceURI!=="http://www.w3.org/2000/svg"){var O=w.getAttribute(i)||"";O=n+O;var ce=d.get(O);ce?ce.push(w):d.set(O,[w])}}return d}function H0(n,i,c){n=n.ownerDocument||n,n.head.insertBefore(c,i==="title"?n.querySelector("head > title"):null)}function tj(n,i,c){if(c===1||i.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return n=i.disabled,typeof i.precedence=="string"&&n==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function P0(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}var _d=null;function sj(){}function aj(n,i,c){if(_d===null)throw Error(r(475));var d=_d;if(i.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var g=wA(c.href),w=n.querySelector(wd(g));if(w){n=w._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(d.count++,d=Ah.bind(d),n.then(d,d)),i.state.loading|=4,i.instance=w,Ws(w);return}w=n.ownerDocument||n,c=R0(c),(g=Ki.get(g))&&Pf(c,g),w=w.createElement("link"),Ws(w);var O=w;O._p=new Promise(function(ce,Ne){O.onload=ce,O.onerror=Ne}),yr(w,"link",c),i.instance=w}d.stylesheets===null&&(d.stylesheets=new Map),d.stylesheets.set(i,n),(n=i.state.preload)&&(i.state.loading&3)===0&&(d.count++,i=Ah.bind(d),n.addEventListener("load",i),n.addEventListener("error",i))}}function nj(){if(_d===null)throw Error(r(475));var n=_d;return n.stylesheets&&n.count===0&&Mf(n,n.stylesheets),0<n.count?function(i){var c=setTimeout(function(){if(n.stylesheets&&Mf(n,n.stylesheets),n.unsuspend){var d=n.unsuspend;n.unsuspend=null,d()}},6e4);return n.unsuspend=i,function(){n.unsuspend=null,clearTimeout(c)}}:null}function Ah(){if(this.count--,this.count===0){if(this.stylesheets)Mf(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var dh=null;function Mf(n,i){n.stylesheets=null,n.unsuspend!==null&&(n.count++,dh=new Map,i.forEach(rj,n),dh=null,Ah.call(n))}function rj(n,i){if(!(i.state.loading&4)){var c=dh.get(n);if(c)var d=c.get(null);else{c=new Map,dh.set(n,c);for(var g=n.querySelectorAll("link[data-precedence],style[data-precedence]"),w=0;w<g.length;w++){var O=g[w];(O.nodeName==="LINK"||O.getAttribute("media")!=="not all")&&(c.set(O.dataset.precedence,O),d=O)}d&&c.set(null,d)}g=i.instance,O=g.getAttribute("data-precedence"),w=c.get(O)||d,w===d&&c.set(null,g),c.set(O,g),this.count++,d=Ah.bind(this),g.addEventListener("load",d),g.addEventListener("error",d),w?w.parentNode.insertBefore(g,w.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(g,n.firstChild)),i.state.loading|=4}}var Bd={$$typeof:P,Provider:null,Consumer:null,_currentValue:Ae,_currentValue2:Ae,_threadCount:0};function ij(n,i,c,d,g,w,O,ce){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=St(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=St(0),this.hiddenUpdates=St(null),this.identifierPrefix=d,this.onUncaughtError=g,this.onCaughtError=w,this.onRecoverableError=O,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=ce,this.incompleteTransitions=new Map}function O0(n,i,c,d,g,w,O,ce,Ne,Ke,ht,vt){return n=new ij(n,i,c,O,ce,Ne,Ke,vt),i=1,w===!0&&(i|=24),w=ar(3,null,null,i),n.current=w,w.stateNode=n,i=$A(),i.refCount++,n.pooledCache=i,i.refCount++,w.memoizedState={element:d,isDehydrated:c,cache:i},ze(w),n}function M0(n){return n?(n=Pn,n):Pn}function z0(n,i,c,d,g,w){g=M0(g),d.context===null?d.context=g:d.pendingContext=g,d=lt(i),d.payload={element:c},w=w===void 0?null:w,w!==null&&(d.callback=w),c=Nt(n,d,i),c!==null&&(wi(c,n,i),yt(c,n,i))}function q0(n,i){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var c=n.retryLane;n.retryLane=c!==0&&c<i?c:i}}function zf(n,i){q0(n,i),(n=n.alternate)&&q0(n,i)}function K0(n){if(n.tag===13){var i=Xo(n,67108864);i!==null&&wi(i,n,67108864),zf(n,67108864)}}var uh=!0;function oj(n,i,c,d){var g=Z.T;Z.T=null;var w=fe.p;try{fe.p=2,qf(n,i,c,d)}finally{fe.p=w,Z.T=g}}function lj(n,i,c,d){var g=Z.T;Z.T=null;var w=fe.p;try{fe.p=8,qf(n,i,c,d)}finally{fe.p=w,Z.T=g}}function qf(n,i,c,d){if(uh){var g=Kf(d);if(g===null)Uf(n,i,d,hh,c),V0(n,d);else if(Aj(g,n,i,c,d))d.stopPropagation();else if(V0(n,d),i&4&&-1<cj.indexOf(n)){for(;g!==null;){var w=xa(g);if(w!==null)switch(w.tag){case 3:if(w=w.stateNode,w.current.memoizedState.isDehydrated){var O=tt(w.pendingLanes);if(O!==0){var ce=w;for(ce.pendingLanes|=2,ce.entangledLanes|=2;O;){var Ne=1<<31-bt(O);ce.entanglements[1]|=Ne,O&=~Ne}To(w),(Ba&6)===0&&(Yu=Rt()+500,xd(0))}}break;case 13:ce=Xo(w,2),ce!==null&&wi(ce,w,2),Ju(),zf(w,2)}if(w=Kf(d),w===null&&Uf(n,i,d,hh,c),w===g)break;g=w}g!==null&&d.stopPropagation()}else Uf(n,i,d,null,c)}}function Kf(n){return n=Pt(n),Gf(n)}var hh=null;function Gf(n){if(hh=null,n=da(n),n!==null){var i=l(n);if(i===null)n=null;else{var c=i.tag;if(c===13){if(n=A(i),n!==null)return n;n=null}else if(c===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null)}}return hh=n,null}function G0(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(at()){case Xe:return 2;case pt:return 8;case xe:case et:return 32;case Oe:return 268435456;default:return 32}default:return 32}}var Vf=!1,Gl=null,Vl=null,$l=null,Nd=new Map,Cd=new Map,Wl=[],cj="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function V0(n,i){switch(n){case"focusin":case"focusout":Gl=null;break;case"dragenter":case"dragleave":Vl=null;break;case"mouseover":case"mouseout":$l=null;break;case"pointerover":case"pointerout":Nd.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Cd.delete(i.pointerId)}}function Sd(n,i,c,d,g,w){return n===null||n.nativeEvent!==w?(n={blockedOn:i,domEventName:c,eventSystemFlags:d,nativeEvent:w,targetContainers:[g]},i!==null&&(i=xa(i),i!==null&&K0(i)),n):(n.eventSystemFlags|=d,i=n.targetContainers,g!==null&&i.indexOf(g)===-1&&i.push(g),n)}function Aj(n,i,c,d,g){switch(i){case"focusin":return Gl=Sd(Gl,n,i,c,d,g),!0;case"dragenter":return Vl=Sd(Vl,n,i,c,d,g),!0;case"mouseover":return $l=Sd($l,n,i,c,d,g),!0;case"pointerover":var w=g.pointerId;return Nd.set(w,Sd(Nd.get(w)||null,n,i,c,d,g)),!0;case"gotpointercapture":return w=g.pointerId,Cd.set(w,Sd(Cd.get(w)||null,n,i,c,d,g)),!0}return!1}function $0(n){var i=da(n.target);if(i!==null){var c=l(i);if(c!==null){if(i=c.tag,i===13){if(i=A(c),i!==null){n.blockedOn=i,We(n.priority,function(){if(c.tag===13){var d=bi();d=we(d);var g=Xo(c,d);g!==null&&wi(g,c,d),zf(c,d)}});return}}else if(i===3&&c.stateNode.current.memoizedState.isDehydrated){n.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}n.blockedOn=null}function ph(n){if(n.blockedOn!==null)return!1;for(var i=n.targetContainers;0<i.length;){var c=Kf(n.nativeEvent);if(c===null){c=n.nativeEvent;var d=new c.constructor(c.type,c);Dt=d,c.target.dispatchEvent(d),Dt=null}else return i=xa(c),i!==null&&K0(i),n.blockedOn=c,!1;i.shift()}return!0}function W0(n,i,c){ph(n)&&c.delete(i)}function dj(){Vf=!1,Gl!==null&&ph(Gl)&&(Gl=null),Vl!==null&&ph(Vl)&&(Vl=null),$l!==null&&ph($l)&&($l=null),Nd.forEach(W0),Cd.forEach(W0)}function fh(n,i){n.blockedOn===i&&(n.blockedOn=null,Vf||(Vf=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,dj)))}var mh=null;function Y0(n){mh!==n&&(mh=n,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){mh===n&&(mh=null);for(var i=0;i<n.length;i+=3){var c=n[i],d=n[i+1],g=n[i+2];if(typeof d!="function"){if(Gf(d||c)===null)continue;break}var w=xa(c);w!==null&&(n.splice(i,3),i-=3,Mi(w,{pending:!0,data:g,method:c.method,action:d},d,g))}}))}function kd(n){function i(Ne){return fh(Ne,n)}Gl!==null&&fh(Gl,n),Vl!==null&&fh(Vl,n),$l!==null&&fh($l,n),Nd.forEach(i),Cd.forEach(i);for(var c=0;c<Wl.length;c++){var d=Wl[c];d.blockedOn===n&&(d.blockedOn=null)}for(;0<Wl.length&&(c=Wl[0],c.blockedOn===null);)$0(c),c.blockedOn===null&&Wl.shift();if(c=(n.ownerDocument||n).$$reactFormReplay,c!=null)for(d=0;d<c.length;d+=3){var g=c[d],w=c[d+1],O=g[Ot]||null;if(typeof w=="function")O||Y0(c);else if(O){var ce=null;if(w&&w.hasAttribute("formAction")){if(g=w,O=w[Ot]||null)ce=O.formAction;else if(Gf(g)!==null)continue}else ce=O.action;typeof ce=="function"?c[d+1]=ce:(c.splice(d,3),d-=3),Y0(c)}}}function $f(n){this._internalRoot=n}gh.prototype.render=$f.prototype.render=function(n){var i=this._internalRoot;if(i===null)throw Error(r(409));var c=i.current,d=bi();z0(c,d,n,i,null,null)},gh.prototype.unmount=$f.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var i=n.containerInfo;z0(n.current,2,null,n,null,null),Ju(),i[ss]=null}};function gh(n){this._internalRoot=n}gh.prototype.unstable_scheduleHydration=function(n){if(n){var i=Re();n={blockedOn:null,target:n,priority:i};for(var c=0;c<Wl.length&&i!==0&&i<Wl[c].priority;c++);Wl.splice(c,0,n),c===0&&$0(n)}};var X0=s.version;if(X0!=="19.1.1")throw Error(r(527,X0,"19.1.1"));fe.findDOMNode=function(n){var i=n._reactInternals;if(i===void 0)throw typeof n.render=="function"?Error(r(188)):(n=Object.keys(n).join(","),Error(r(268,n)));return n=h(i),n=n!==null?p(n):null,n=n===null?null:n.stateNode,n};var uj={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:Z,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var xh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!xh.isDisabled&&xh.supportsFiber)try{dt=xh.inject(uj),Ut=xh}catch{}}return Ud.createRoot=function(n,i){if(!o(n))throw Error(r(299));var c=!1,d="",g=hx,w=px,O=fx,ce=null;return i!=null&&(i.unstable_strictMode===!0&&(c=!0),i.identifierPrefix!==void 0&&(d=i.identifierPrefix),i.onUncaughtError!==void 0&&(g=i.onUncaughtError),i.onCaughtError!==void 0&&(w=i.onCaughtError),i.onRecoverableError!==void 0&&(O=i.onRecoverableError),i.unstable_transitionCallbacks!==void 0&&(ce=i.unstable_transitionCallbacks)),i=O0(n,1,!1,null,null,c,d,g,w,O,ce,null),n[ss]=i.current,Ff(n),new $f(i)},Ud.hydrateRoot=function(n,i,c){if(!o(n))throw Error(r(299));var d=!1,g="",w=hx,O=px,ce=fx,Ne=null,Ke=null;return c!=null&&(c.unstable_strictMode===!0&&(d=!0),c.identifierPrefix!==void 0&&(g=c.identifierPrefix),c.onUncaughtError!==void 0&&(w=c.onUncaughtError),c.onCaughtError!==void 0&&(O=c.onCaughtError),c.onRecoverableError!==void 0&&(ce=c.onRecoverableError),c.unstable_transitionCallbacks!==void 0&&(Ne=c.unstable_transitionCallbacks),c.formState!==void 0&&(Ke=c.formState)),i=O0(n,1,!0,i,c??null,d,g,w,O,ce,Ne,Ke),i.context=M0(null),c=i.current,d=bi(),d=we(d),g=lt(d),g.callback=null,Nt(c,g,d),c=d,i.current.lanes=c,$e(i,c),To(i),n[ss]=i.current,Ff(n),new gh(i)},Ud.version="19.1.1",Ud}var oy;function bj(){if(oy)return Xf.exports;oy=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(s){console.error(s)}}return t(),Xf.exports=vj(),Xf.exports}var wj=bj();const jj=Ib(wj);/**
 * react-router v7.8.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var ly="popstate";function _j(t={}){function s(r,o){let{pathname:l,search:A,hash:u}=r.location;return Gm("",{pathname:l,search:A,hash:u},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function a(r,o){return typeof o=="string"?o:au(o)}return Nj(s,a,null,t)}function An(t,s){if(t===!1||t===null||typeof t>"u")throw new Error(s)}function xo(t,s){if(!t){typeof console<"u"&&console.warn(s);try{throw new Error(s)}catch{}}}function Bj(){return Math.random().toString(36).substring(2,10)}function cy(t,s){return{usr:t.state,key:t.key,idx:s}}function Gm(t,s,a=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof s=="string"?PA(s):s,state:a,key:s&&s.key||r||Bj()}}function au({pathname:t="/",search:s="",hash:a=""}){return s&&s!=="?"&&(t+=s.charAt(0)==="?"?s:"?"+s),a&&a!=="#"&&(t+=a.charAt(0)==="#"?a:"#"+a),t}function PA(t){let s={};if(t){let a=t.indexOf("#");a>=0&&(s.hash=t.substring(a),t=t.substring(0,a));let r=t.indexOf("?");r>=0&&(s.search=t.substring(r),t=t.substring(0,r)),t&&(s.pathname=t)}return s}function Nj(t,s,a,r={}){let{window:o=document.defaultView,v5Compat:l=!1}=r,A=o.history,u="POP",h=null,p=m();p==null&&(p=0,A.replaceState({...A.state,idx:p},""));function m(){return(A.state||{idx:null}).idx}function v(){u="POP";let j=m(),B=j==null?null:j-p;p=j,h&&h({action:u,location:Q.location,delta:B})}function b(j,B){u="PUSH";let L=Gm(Q.location,j,B);p=m()+1;let P=cy(L,p),F=Q.createHref(L);try{A.pushState(P,"",F)}catch(ee){if(ee instanceof DOMException&&ee.name==="DataCloneError")throw ee;o.location.assign(F)}l&&h&&h({action:u,location:Q.location,delta:1})}function x(j,B){u="REPLACE";let L=Gm(Q.location,j,B);p=m();let P=cy(L,p),F=Q.createHref(L);A.replaceState(P,"",F),l&&h&&h({action:u,location:Q.location,delta:0})}function C(j){return Cj(j)}let Q={get action(){return u},get location(){return t(o,A)},listen(j){if(h)throw new Error("A history only accepts one active listener");return o.addEventListener(ly,v),h=j,()=>{o.removeEventListener(ly,v),h=null}},createHref(j){return s(o,j)},createURL:C,encodeLocation(j){let B=C(j);return{pathname:B.pathname,search:B.search,hash:B.hash}},push:b,replace:x,go(j){return A.go(j)}};return Q}function Cj(t,s=!1){let a="http://localhost";typeof window<"u"&&(a=window.location.origin!=="null"?window.location.origin:window.location.href),An(a,"No window.location.(origin|href) available to create URL");let r=typeof t=="string"?t:au(t);return r=r.replace(/ $/,"%20"),!s&&r.startsWith("//")&&(r=a+r),new URL(r,a)}function Pb(t,s,a="/"){return Sj(t,s,a,!1)}function Sj(t,s,a,r){let o=typeof s=="string"?PA(s):s,l=vl(o.pathname||"/",a);if(l==null)return null;let A=Ob(t);kj(A);let u=null;for(let h=0;u==null&&h<A.length;++h){let p=Pj(l);u=Ij(A[h],p,r)}return u}function Ob(t,s=[],a=[],r=""){let o=(l,A,u)=>{let h={relativePath:u===void 0?l.path||"":u,caseSensitive:l.caseSensitive===!0,childrenIndex:A,route:l};h.relativePath.startsWith("/")&&(An(h.relativePath.startsWith(r),`Absolute route path "${h.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),h.relativePath=h.relativePath.slice(r.length));let p=xl([r,h.relativePath]),m=a.concat(h);l.children&&l.children.length>0&&(An(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${p}".`),Ob(l.children,s,m,p)),!(l.path==null&&!l.index)&&s.push({path:p,score:Rj(p,l.index),routesMeta:m})};return t.forEach((l,A)=>{if(l.path===""||!l.path?.includes("?"))o(l,A);else for(let u of Mb(l.path))o(l,A,u)}),s}function Mb(t){let s=t.split("/");if(s.length===0)return[];let[a,...r]=s,o=a.endsWith("?"),l=a.replace(/\?$/,"");if(r.length===0)return o?[l,""]:[l];let A=Mb(r.join("/")),u=[];return u.push(...A.map(h=>h===""?l:[l,h].join("/"))),o&&u.push(...A),u.map(h=>t.startsWith("/")&&h===""?"/":h)}function kj(t){t.sort((s,a)=>s.score!==a.score?a.score-s.score:Dj(s.routesMeta.map(r=>r.childrenIndex),a.routesMeta.map(r=>r.childrenIndex)))}var Fj=/^:[\w-]+$/,Uj=3,Ej=2,Lj=1,Qj=10,Tj=-2,Ay=t=>t==="*";function Rj(t,s){let a=t.split("/"),r=a.length;return a.some(Ay)&&(r+=Tj),s&&(r+=Ej),a.filter(o=>!Ay(o)).reduce((o,l)=>o+(Fj.test(l)?Uj:l===""?Lj:Qj),r)}function Dj(t,s){return t.length===s.length&&t.slice(0,-1).every((r,o)=>r===s[o])?t[t.length-1]-s[s.length-1]:0}function Ij(t,s,a=!1){let{routesMeta:r}=t,o={},l="/",A=[];for(let u=0;u<r.length;++u){let h=r[u],p=u===r.length-1,m=l==="/"?s:s.slice(l.length)||"/",v=ip({path:h.relativePath,caseSensitive:h.caseSensitive,end:p},m),b=h.route;if(!v&&p&&a&&!r[r.length-1].route.index&&(v=ip({path:h.relativePath,caseSensitive:h.caseSensitive,end:!1},m)),!v)return null;Object.assign(o,v.params),A.push({params:o,pathname:xl([l,v.pathname]),pathnameBase:qj(xl([l,v.pathnameBase])),route:b}),v.pathnameBase!=="/"&&(l=xl([l,v.pathnameBase]))}return A}function ip(t,s){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[a,r]=Hj(t.path,t.caseSensitive,t.end),o=s.match(a);if(!o)return null;let l=o[0],A=l.replace(/(.)\/+$/,"$1"),u=o.slice(1);return{params:r.reduce((p,{paramName:m,isOptional:v},b)=>{if(m==="*"){let C=u[b]||"";A=l.slice(0,l.length-C.length).replace(/(.)\/+$/,"$1")}const x=u[b];return v&&!x?p[m]=void 0:p[m]=(x||"").replace(/%2F/g,"/"),p},{}),pathname:l,pathnameBase:A,pattern:t}}function Hj(t,s=!1,a=!0){xo(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],o="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(A,u,h)=>(r.push({paramName:u,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),o+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):a?o+="\\/*$":t!==""&&t!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,s?void 0:"i"),r]}function Pj(t){try{return t.split("/").map(s=>decodeURIComponent(s).replace(/\//g,"%2F")).join("/")}catch(s){return xo(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${s}).`),t}}function vl(t,s){if(s==="/")return t;if(!t.toLowerCase().startsWith(s.toLowerCase()))return null;let a=s.endsWith("/")?s.length-1:s.length,r=t.charAt(a);return r&&r!=="/"?null:t.slice(a)||"/"}function Oj(t,s="/"){let{pathname:a,search:r="",hash:o=""}=typeof t=="string"?PA(t):t;return{pathname:a?a.startsWith("/")?a:Mj(a,s):s,search:Kj(r),hash:Gj(o)}}function Mj(t,s){let a=s.replace(/\/+$/,"").split("/");return t.split("/").forEach(o=>{o===".."?a.length>1&&a.pop():o!=="."&&a.push(o)}),a.length>1?a.join("/"):"/"}function tm(t,s,a,r){return`Cannot include a '${t}' character in a manually specified \`to.${s}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${a}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function zj(t){return t.filter((s,a)=>a===0||s.route.path&&s.route.path.length>0)}function Lg(t){let s=zj(t);return s.map((a,r)=>r===s.length-1?a.pathname:a.pathnameBase)}function Qg(t,s,a,r=!1){let o;typeof t=="string"?o=PA(t):(o={...t},An(!o.pathname||!o.pathname.includes("?"),tm("?","pathname","search",o)),An(!o.pathname||!o.pathname.includes("#"),tm("#","pathname","hash",o)),An(!o.search||!o.search.includes("#"),tm("#","search","hash",o)));let l=t===""||o.pathname==="",A=l?"/":o.pathname,u;if(A==null)u=a;else{let v=s.length-1;if(!r&&A.startsWith("..")){let b=A.split("/");for(;b[0]==="..";)b.shift(),v-=1;o.pathname=b.join("/")}u=v>=0?s[v]:"/"}let h=Oj(o,u),p=A&&A!=="/"&&A.endsWith("/"),m=(l||A===".")&&a.endsWith("/");return!h.pathname.endsWith("/")&&(p||m)&&(h.pathname+="/"),h}var xl=t=>t.join("/").replace(/\/\/+/g,"/"),qj=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Kj=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Gj=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function Vj(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var zb=["POST","PUT","PATCH","DELETE"];new Set(zb);var $j=["GET",...zb];new Set($j);var OA=N.createContext(null);OA.displayName="DataRouter";var _p=N.createContext(null);_p.displayName="DataRouterState";N.createContext(!1);var qb=N.createContext({isTransitioning:!1});qb.displayName="ViewTransition";var Wj=N.createContext(new Map);Wj.displayName="Fetchers";var Yj=N.createContext(null);Yj.displayName="Await";var vo=N.createContext(null);vo.displayName="Navigation";var pu=N.createContext(null);pu.displayName="Location";var Mo=N.createContext({outlet:null,matches:[],isDataRoute:!1});Mo.displayName="Route";var Tg=N.createContext(null);Tg.displayName="RouteError";function Xj(t,{relative:s}={}){An(MA(),"useHref() may be used only in the context of a <Router> component.");let{basename:a,navigator:r}=N.useContext(vo),{hash:o,pathname:l,search:A}=fu(t,{relative:s}),u=l;return a!=="/"&&(u=l==="/"?a:xl([a,l])),r.createHref({pathname:u,search:A,hash:o})}function MA(){return N.useContext(pu)!=null}function zo(){return An(MA(),"useLocation() may be used only in the context of a <Router> component."),N.useContext(pu).location}var Kb="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Gb(t){N.useContext(vo).static||N.useLayoutEffect(t)}function Wr(){let{isDataRoute:t}=N.useContext(Mo);return t?A_():Jj()}function Jj(){An(MA(),"useNavigate() may be used only in the context of a <Router> component.");let t=N.useContext(OA),{basename:s,navigator:a}=N.useContext(vo),{matches:r}=N.useContext(Mo),{pathname:o}=zo(),l=JSON.stringify(Lg(r)),A=N.useRef(!1);return Gb(()=>{A.current=!0}),N.useCallback((h,p={})=>{if(xo(A.current,Kb),!A.current)return;if(typeof h=="number"){a.go(h);return}let m=Qg(h,JSON.parse(l),o,p.relative==="path");t==null&&s!=="/"&&(m.pathname=m.pathname==="/"?s:xl([s,m.pathname])),(p.replace?a.replace:a.push)(m,p.state,p)},[s,a,l,o,t])}N.createContext(null);function fu(t,{relative:s}={}){let{matches:a}=N.useContext(Mo),{pathname:r}=zo(),o=JSON.stringify(Lg(a));return N.useMemo(()=>Qg(t,JSON.parse(o),r,s==="path"),[t,o,r,s])}function Zj(t,s){return Vb(t,s)}function Vb(t,s,a,r){An(MA(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=N.useContext(vo),{matches:l}=N.useContext(Mo),A=l[l.length-1],u=A?A.params:{},h=A?A.pathname:"/",p=A?A.pathnameBase:"/",m=A&&A.route;{let B=m&&m.path||"";$b(h,!m||B.endsWith("*")||B.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${h}" (under <Route path="${B}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${B}"> to <Route path="${B==="/"?"*":`${B}/*`}">.`)}let v=zo(),b;if(s){let B=typeof s=="string"?PA(s):s;An(p==="/"||B.pathname?.startsWith(p),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${p}" but pathname "${B.pathname}" was given in the \`location\` prop.`),b=B}else b=v;let x=b.pathname||"/",C=x;if(p!=="/"){let B=p.replace(/^\//,"").split("/");C="/"+x.replace(/^\//,"").split("/").slice(B.length).join("/")}let Q=Pb(t,{pathname:C});xo(m||Q!=null,`No routes matched location "${b.pathname}${b.search}${b.hash}" `),xo(Q==null||Q[Q.length-1].route.element!==void 0||Q[Q.length-1].route.Component!==void 0||Q[Q.length-1].route.lazy!==void 0,`Matched leaf route at location "${b.pathname}${b.search}${b.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let j=n_(Q&&Q.map(B=>Object.assign({},B,{params:Object.assign({},u,B.params),pathname:xl([p,o.encodeLocation?o.encodeLocation(B.pathname).pathname:B.pathname]),pathnameBase:B.pathnameBase==="/"?p:xl([p,o.encodeLocation?o.encodeLocation(B.pathnameBase).pathname:B.pathnameBase])})),l,a,r);return s&&j?N.createElement(pu.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...b},navigationType:"POP"}},j):j}function e_(){let t=c_(),s=Vj(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),a=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:r},l={padding:"2px 4px",backgroundColor:r},A=null;return console.error("Error handled by React Router default ErrorBoundary:",t),A=N.createElement(N.Fragment,null,N.createElement("p",null," Hey developer "),N.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",N.createElement("code",{style:l},"ErrorBoundary")," or"," ",N.createElement("code",{style:l},"errorElement")," prop on your route.")),N.createElement(N.Fragment,null,N.createElement("h2",null,"Unexpected Application Error!"),N.createElement("h3",{style:{fontStyle:"italic"}},s),a?N.createElement("pre",{style:o},a):null,A)}var t_=N.createElement(e_,null),s_=class extends N.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,s){return s.location!==t.location||s.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:s.error,location:s.location,revalidation:t.revalidation||s.revalidation}}componentDidCatch(t,s){console.error("React Router caught the following error during render",t,s)}render(){return this.state.error!==void 0?N.createElement(Mo.Provider,{value:this.props.routeContext},N.createElement(Tg.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function a_({routeContext:t,match:s,children:a}){let r=N.useContext(OA);return r&&r.static&&r.staticContext&&(s.route.errorElement||s.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=s.route.id),N.createElement(Mo.Provider,{value:t},a)}function n_(t,s=[],a=null,r=null){if(t==null){if(!a)return null;if(a.errors)t=a.matches;else if(s.length===0&&!a.initialized&&a.matches.length>0)t=a.matches;else return null}let o=t,l=a?.errors;if(l!=null){let h=o.findIndex(p=>p.route.id&&l?.[p.route.id]!==void 0);An(h>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),o=o.slice(0,Math.min(o.length,h+1))}let A=!1,u=-1;if(a)for(let h=0;h<o.length;h++){let p=o[h];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(u=h),p.route.id){let{loaderData:m,errors:v}=a,b=p.route.loader&&!m.hasOwnProperty(p.route.id)&&(!v||v[p.route.id]===void 0);if(p.route.lazy||b){A=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((h,p,m)=>{let v,b=!1,x=null,C=null;a&&(v=l&&p.route.id?l[p.route.id]:void 0,x=p.route.errorElement||t_,A&&(u<0&&m===0?($b("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),b=!0,C=null):u===m&&(b=!0,C=p.route.hydrateFallbackElement||null)));let Q=s.concat(o.slice(0,m+1)),j=()=>{let B;return v?B=x:b?B=C:p.route.Component?B=N.createElement(p.route.Component,null):p.route.element?B=p.route.element:B=h,N.createElement(a_,{match:p,routeContext:{outlet:h,matches:Q,isDataRoute:a!=null},children:B})};return a&&(p.route.ErrorBoundary||p.route.errorElement||m===0)?N.createElement(s_,{location:a.location,revalidation:a.revalidation,component:x,error:v,children:j(),routeContext:{outlet:null,matches:Q,isDataRoute:!0}}):j()},null)}function Rg(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function r_(t){let s=N.useContext(OA);return An(s,Rg(t)),s}function i_(t){let s=N.useContext(_p);return An(s,Rg(t)),s}function o_(t){let s=N.useContext(Mo);return An(s,Rg(t)),s}function Dg(t){let s=o_(t),a=s.matches[s.matches.length-1];return An(a.route.id,`${t} can only be used on routes that contain a unique "id"`),a.route.id}function l_(){return Dg("useRouteId")}function c_(){let t=N.useContext(Tg),s=i_("useRouteError"),a=Dg("useRouteError");return t!==void 0?t:s.errors?.[a]}function A_(){let{router:t}=r_("useNavigate"),s=Dg("useNavigate"),a=N.useRef(!1);return Gb(()=>{a.current=!0}),N.useCallback(async(o,l={})=>{xo(a.current,Kb),a.current&&(typeof o=="number"?t.navigate(o):await t.navigate(o,{fromRouteId:s,...l}))},[t,s])}var dy={};function $b(t,s,a){!s&&!dy[t]&&(dy[t]=!0,xo(!1,a))}N.memo(d_);function d_({routes:t,future:s,state:a}){return Vb(t,void 0,a,s)}function Bp({to:t,replace:s,state:a,relative:r}){An(MA(),"<Navigate> may be used only in the context of a <Router> component.");let{static:o}=N.useContext(vo);xo(!o,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:l}=N.useContext(Mo),{pathname:A}=zo(),u=Wr(),h=Qg(t,Lg(l),A,r==="path"),p=JSON.stringify(h);return N.useEffect(()=>{u(JSON.parse(p),{replace:s,state:a,relative:r})},[u,p,r,s,a]),null}function lr(t){An(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function u_({basename:t="/",children:s=null,location:a,navigationType:r="POP",navigator:o,static:l=!1}){An(!MA(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let A=t.replace(/^\/*/,"/"),u=N.useMemo(()=>({basename:A,navigator:o,static:l,future:{}}),[A,o,l]);typeof a=="string"&&(a=PA(a));let{pathname:h="/",search:p="",hash:m="",state:v=null,key:b="default"}=a,x=N.useMemo(()=>{let C=vl(h,A);return C==null?null:{location:{pathname:C,search:p,hash:m,state:v,key:b},navigationType:r}},[A,h,p,m,v,b,r]);return xo(x!=null,`<Router basename="${A}"> is not able to match the URL "${h}${p}${m}" because it does not start with the basename, so the <Router> won't render anything.`),x==null?null:N.createElement(vo.Provider,{value:u},N.createElement(pu.Provider,{children:s,value:x}))}function h_({children:t,location:s}){return Zj(Vm(t),s)}function Vm(t,s=[]){let a=[];return N.Children.forEach(t,(r,o)=>{if(!N.isValidElement(r))return;let l=[...s,o];if(r.type===N.Fragment){a.push.apply(a,Vm(r.props.children,l));return}An(r.type===lr,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),An(!r.props.index||!r.props.children,"An index route cannot have child routes.");let A={id:r.props.id||l.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(A.children=Vm(r.props.children,l)),a.push(A)}),a}var Jh="get",Zh="application/x-www-form-urlencoded";function Np(t){return t!=null&&typeof t.tagName=="string"}function p_(t){return Np(t)&&t.tagName.toLowerCase()==="button"}function f_(t){return Np(t)&&t.tagName.toLowerCase()==="form"}function m_(t){return Np(t)&&t.tagName.toLowerCase()==="input"}function g_(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function x_(t,s){return t.button===0&&(!s||s==="_self")&&!g_(t)}var yh=null;function y_(){if(yh===null)try{new FormData(document.createElement("form"),0),yh=!1}catch{yh=!0}return yh}var v_=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function sm(t){return t!=null&&!v_.has(t)?(xo(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Zh}"`),null):t}function b_(t,s){let a,r,o,l,A;if(f_(t)){let u=t.getAttribute("action");r=u?vl(u,s):null,a=t.getAttribute("method")||Jh,o=sm(t.getAttribute("enctype"))||Zh,l=new FormData(t)}else if(p_(t)||m_(t)&&(t.type==="submit"||t.type==="image")){let u=t.form;if(u==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let h=t.getAttribute("formaction")||u.getAttribute("action");if(r=h?vl(h,s):null,a=t.getAttribute("formmethod")||u.getAttribute("method")||Jh,o=sm(t.getAttribute("formenctype"))||sm(u.getAttribute("enctype"))||Zh,l=new FormData(u,t),!y_()){let{name:p,type:m,value:v}=t;if(m==="image"){let b=p?`${p}.`:"";l.append(`${b}x`,"0"),l.append(`${b}y`,"0")}else p&&l.append(p,v)}}else{if(Np(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');a=Jh,r=null,o=Zh,A=t}return l&&o==="text/plain"&&(A=l,l=void 0),{action:r,method:a.toLowerCase(),encType:o,formData:l,body:A}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Ig(t,s){if(t===!1||t===null||typeof t>"u")throw new Error(s)}function w_(t,s,a){let r=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return r.pathname==="/"?r.pathname=`_root.${a}`:s&&vl(r.pathname,s)==="/"?r.pathname=`${s.replace(/\/$/,"")}/_root.${a}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${a}`,r}async function j_(t,s){if(t.id in s)return s[t.id];try{let a=await import(t.module);return s[t.id]=a,a}catch(a){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(a),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function __(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function B_(t,s,a){let r=await Promise.all(t.map(async o=>{let l=s.routes[o.route.id];if(l){let A=await j_(l,a);return A.links?A.links():[]}return[]}));return k_(r.flat(1).filter(__).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function uy(t,s,a,r,o,l){let A=(h,p)=>a[p]?h.route.id!==a[p].route.id:!0,u=(h,p)=>a[p].pathname!==h.pathname||a[p].route.path?.endsWith("*")&&a[p].params["*"]!==h.params["*"];return l==="assets"?s.filter((h,p)=>A(h,p)||u(h,p)):l==="data"?s.filter((h,p)=>{let m=r.routes[h.route.id];if(!m||!m.hasLoader)return!1;if(A(h,p)||u(h,p))return!0;if(h.route.shouldRevalidate){let v=h.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:a[0]?.params||{},nextUrl:new URL(t,window.origin),nextParams:h.params,defaultShouldRevalidate:!0});if(typeof v=="boolean")return v}return!0}):[]}function N_(t,s,{includeHydrateFallback:a}={}){return C_(t.map(r=>{let o=s.routes[r.route.id];if(!o)return[];let l=[o.module];return o.clientActionModule&&(l=l.concat(o.clientActionModule)),o.clientLoaderModule&&(l=l.concat(o.clientLoaderModule)),a&&o.hydrateFallbackModule&&(l=l.concat(o.hydrateFallbackModule)),o.imports&&(l=l.concat(o.imports)),l}).flat(1))}function C_(t){return[...new Set(t)]}function S_(t){let s={},a=Object.keys(t).sort();for(let r of a)s[r]=t[r];return s}function k_(t,s){let a=new Set;return new Set(s),t.reduce((r,o)=>{let l=JSON.stringify(S_(o));return a.has(l)||(a.add(l),r.push({key:l,link:o})),r},[])}function Wb(){let t=N.useContext(OA);return Ig(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function F_(){let t=N.useContext(_p);return Ig(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var Hg=N.createContext(void 0);Hg.displayName="FrameworkContext";function Yb(){let t=N.useContext(Hg);return Ig(t,"You must render this element inside a <HydratedRouter> element"),t}function U_(t,s){let a=N.useContext(Hg),[r,o]=N.useState(!1),[l,A]=N.useState(!1),{onFocus:u,onBlur:h,onMouseEnter:p,onMouseLeave:m,onTouchStart:v}=s,b=N.useRef(null);N.useEffect(()=>{if(t==="render"&&A(!0),t==="viewport"){let Q=B=>{B.forEach(L=>{A(L.isIntersecting)})},j=new IntersectionObserver(Q,{threshold:.5});return b.current&&j.observe(b.current),()=>{j.disconnect()}}},[t]),N.useEffect(()=>{if(r){let Q=setTimeout(()=>{A(!0)},100);return()=>{clearTimeout(Q)}}},[r]);let x=()=>{o(!0)},C=()=>{o(!1),A(!1)};return a?t!=="intent"?[l,b,{}]:[l,b,{onFocus:Ed(u,x),onBlur:Ed(h,C),onMouseEnter:Ed(p,x),onMouseLeave:Ed(m,C),onTouchStart:Ed(v,x)}]:[!1,b,{}]}function Ed(t,s){return a=>{t&&t(a),a.defaultPrevented||s(a)}}function E_({page:t,...s}){let{router:a}=Wb(),r=N.useMemo(()=>Pb(a.routes,t,a.basename),[a.routes,t,a.basename]);return r?N.createElement(Q_,{page:t,matches:r,...s}):null}function L_(t){let{manifest:s,routeModules:a}=Yb(),[r,o]=N.useState([]);return N.useEffect(()=>{let l=!1;return B_(t,s,a).then(A=>{l||o(A)}),()=>{l=!0}},[t,s,a]),r}function Q_({page:t,matches:s,...a}){let r=zo(),{manifest:o,routeModules:l}=Yb(),{basename:A}=Wb(),{loaderData:u,matches:h}=F_(),p=N.useMemo(()=>uy(t,s,h,o,r,"data"),[t,s,h,o,r]),m=N.useMemo(()=>uy(t,s,h,o,r,"assets"),[t,s,h,o,r]),v=N.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let C=new Set,Q=!1;if(s.forEach(B=>{let L=o.routes[B.route.id];!L||!L.hasLoader||(!p.some(P=>P.route.id===B.route.id)&&B.route.id in u&&l[B.route.id]?.shouldRevalidate||L.hasClientLoader?Q=!0:C.add(B.route.id))}),C.size===0)return[];let j=w_(t,A,"data");return Q&&C.size>0&&j.searchParams.set("_routes",s.filter(B=>C.has(B.route.id)).map(B=>B.route.id).join(",")),[j.pathname+j.search]},[A,u,r,o,p,s,t,l]),b=N.useMemo(()=>N_(m,o),[m,o]),x=L_(m);return N.createElement(N.Fragment,null,v.map(C=>N.createElement("link",{key:C,rel:"prefetch",as:"fetch",href:C,...a})),b.map(C=>N.createElement("link",{key:C,rel:"modulepreload",href:C,...a})),x.map(({key:C,link:Q})=>N.createElement("link",{key:C,nonce:a.nonce,...Q})))}function T_(...t){return s=>{t.forEach(a=>{typeof a=="function"?a(s):a!=null&&(a.current=s)})}}var Xb=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Xb&&(window.__reactRouterVersion="7.8.0")}catch{}function R_({basename:t,children:s,window:a}){let r=N.useRef();r.current==null&&(r.current=_j({window:a,v5Compat:!0}));let o=r.current,[l,A]=N.useState({action:o.action,location:o.location}),u=N.useCallback(h=>{N.startTransition(()=>A(h))},[A]);return N.useLayoutEffect(()=>o.listen(u),[o,u]),N.createElement(u_,{basename:t,children:s,location:l.location,navigationType:l.action,navigator:o})}var Jb=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Zb=N.forwardRef(function({onClick:s,discover:a="render",prefetch:r="none",relative:o,reloadDocument:l,replace:A,state:u,target:h,to:p,preventScrollReset:m,viewTransition:v,...b},x){let{basename:C}=N.useContext(vo),Q=typeof p=="string"&&Jb.test(p),j,B=!1;if(typeof p=="string"&&Q&&(j=p,Xb))try{let U=new URL(window.location.href),V=p.startsWith("//")?new URL(U.protocol+p):new URL(p),H=vl(V.pathname,C);V.origin===U.origin&&H!=null?p=H+V.search+V.hash:B=!0}catch{xo(!1,`<Link to="${p}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let L=Xj(p,{relative:o}),[P,F,ee]=U_(r,b),K=P_(p,{replace:A,state:u,target:h,preventScrollReset:m,relative:o,viewTransition:v});function q(U){s&&s(U),U.defaultPrevented||K(U)}let E=N.createElement("a",{...b,...ee,href:j||L,onClick:B||l?s:q,ref:T_(x,F),target:h,"data-discover":!Q&&a==="render"?"true":void 0});return P&&!Q?N.createElement(N.Fragment,null,E,N.createElement(E_,{page:L})):E});Zb.displayName="Link";var D_=N.forwardRef(function({"aria-current":s="page",caseSensitive:a=!1,className:r="",end:o=!1,style:l,to:A,viewTransition:u,children:h,...p},m){let v=fu(A,{relative:p.relative}),b=zo(),x=N.useContext(_p),{navigator:C,basename:Q}=N.useContext(vo),j=x!=null&&K_(v)&&u===!0,B=C.encodeLocation?C.encodeLocation(v).pathname:v.pathname,L=b.pathname,P=x&&x.navigation&&x.navigation.location?x.navigation.location.pathname:null;a||(L=L.toLowerCase(),P=P?P.toLowerCase():null,B=B.toLowerCase()),P&&Q&&(P=vl(P,Q)||P);const F=B!=="/"&&B.endsWith("/")?B.length-1:B.length;let ee=L===B||!o&&L.startsWith(B)&&L.charAt(F)==="/",K=P!=null&&(P===B||!o&&P.startsWith(B)&&P.charAt(B.length)==="/"),q={isActive:ee,isPending:K,isTransitioning:j},E=ee?s:void 0,U;typeof r=="function"?U=r(q):U=[r,ee?"active":null,K?"pending":null,j?"transitioning":null].filter(Boolean).join(" ");let V=typeof l=="function"?l(q):l;return N.createElement(Zb,{...p,"aria-current":E,className:U,ref:m,style:V,to:A,viewTransition:u},typeof h=="function"?h(q):h)});D_.displayName="NavLink";var I_=N.forwardRef(({discover:t="render",fetcherKey:s,navigate:a,reloadDocument:r,replace:o,state:l,method:A=Jh,action:u,onSubmit:h,relative:p,preventScrollReset:m,viewTransition:v,...b},x)=>{let C=z_(),Q=q_(u,{relative:p}),j=A.toLowerCase()==="get"?"get":"post",B=typeof u=="string"&&Jb.test(u),L=P=>{if(h&&h(P),P.defaultPrevented)return;P.preventDefault();let F=P.nativeEvent.submitter,ee=F?.getAttribute("formmethod")||A;C(F||P.currentTarget,{fetcherKey:s,method:ee,navigate:a,replace:o,state:l,relative:p,preventScrollReset:m,viewTransition:v})};return N.createElement("form",{ref:x,method:j,action:Q,onSubmit:r?h:L,...b,"data-discover":!B&&t==="render"?"true":void 0})});I_.displayName="Form";function H_(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function e1(t){let s=N.useContext(OA);return An(s,H_(t)),s}function P_(t,{target:s,replace:a,state:r,preventScrollReset:o,relative:l,viewTransition:A}={}){let u=Wr(),h=zo(),p=fu(t,{relative:l});return N.useCallback(m=>{if(x_(m,s)){m.preventDefault();let v=a!==void 0?a:au(h)===au(p);u(t,{replace:v,state:r,preventScrollReset:o,relative:l,viewTransition:A})}},[h,u,p,a,r,s,t,o,l,A])}var O_=0,M_=()=>`__${String(++O_)}__`;function z_(){let{router:t}=e1("useSubmit"),{basename:s}=N.useContext(vo),a=l_();return N.useCallback(async(r,o={})=>{let{action:l,method:A,encType:u,formData:h,body:p}=b_(r,s);if(o.navigate===!1){let m=o.fetcherKey||M_();await t.fetch(m,a,o.action||l,{preventScrollReset:o.preventScrollReset,formData:h,body:p,formMethod:o.method||A,formEncType:o.encType||u,flushSync:o.flushSync})}else await t.navigate(o.action||l,{preventScrollReset:o.preventScrollReset,formData:h,body:p,formMethod:o.method||A,formEncType:o.encType||u,replace:o.replace,state:o.state,fromRouteId:a,flushSync:o.flushSync,viewTransition:o.viewTransition})},[t,s,a])}function q_(t,{relative:s}={}){let{basename:a}=N.useContext(vo),r=N.useContext(Mo);An(r,"useFormAction must be used inside a RouteContext");let[o]=r.matches.slice(-1),l={...fu(t||".",{relative:s})},A=zo();if(t==null){l.search=A.search;let u=new URLSearchParams(l.search),h=u.getAll("index");if(h.some(m=>m==="")){u.delete("index"),h.filter(v=>v).forEach(v=>u.append("index",v));let m=u.toString();l.search=m?`?${m}`:""}}return(!t||t===".")&&o.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),a!=="/"&&(l.pathname=l.pathname==="/"?a:xl([a,l.pathname])),au(l)}function K_(t,{relative:s}={}){let a=N.useContext(qb);An(a!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=e1("useViewTransitionState"),o=fu(t,{relative:s});if(!a.isTransitioning)return!1;let l=vl(a.currentLocation.pathname,r)||a.currentLocation.pathname,A=vl(a.nextLocation.pathname,r)||a.nextLocation.pathname;return ip(o.pathname,A)!=null||ip(o.pathname,l)!=null}Hb();/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G_=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),V_=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(s,a,r)=>r?r.toUpperCase():a.toLowerCase()),hy=t=>{const s=V_(t);return s.charAt(0).toUpperCase()+s.slice(1)},t1=(...t)=>t.filter((s,a,r)=>!!s&&s.trim()!==""&&r.indexOf(s)===a).join(" ").trim(),$_=t=>{for(const s in t)if(s.startsWith("aria-")||s==="role"||s==="title")return!0};/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var W_={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y_=N.forwardRef(({color:t="currentColor",size:s=24,strokeWidth:a=2,absoluteStrokeWidth:r,className:o="",children:l,iconNode:A,...u},h)=>N.createElement("svg",{ref:h,...W_,width:s,height:s,stroke:t,strokeWidth:r?Number(a)*24/Number(s):a,className:t1("lucide",o),...!l&&!$_(u)&&{"aria-hidden":"true"},...u},[...A.map(([p,m])=>N.createElement(p,m)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pg=(t,s)=>{const a=N.forwardRef(({className:r,...o},l)=>N.createElement(Y_,{ref:l,iconNode:s,className:t1(`lucide-${G_(hy(t))}`,`lucide-${t}`,r),...o}));return a.displayName=hy(t),a};/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X_=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],J_=Pg("arrow-left",X_);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z_=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],$m=Pg("eye-off",Z_);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eB=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Wm=Pg("eye",eB),tB="1024134456606-et46lrm2ce8tl567a4m4s4e0u3v5t4sa.apps.googleusercontent.com",sB=()=>{const[t,s]=N.useState({firstName:"",lastName:"",email:"",password:"",confirmPassword:"",role:""}),[a,r]=N.useState(""),[o,l]=N.useState(null),[A,u]=N.useState(!1),[h,p]=N.useState(!1),[m,v]=N.useState(""),[b,x]=N.useState({license:null,portfolio:null,architectLicense:null}),[C,Q]=N.useState(!1),[j,B]=N.useState(!1),[L,P]=N.useState(null),[F,ee]=N.useState(""),[K,q]=N.useState(""),[E,U]=N.useState(!1),[V,H]=N.useState({license:null,portfolio:null,architectLicense:null}),I=N.useRef(null),M=Wr();function re(W){if(!W)return{};const me=W.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),Be=decodeURIComponent(atob(me).split("").map(function(Qe){return"%"+("00"+Qe.charCodeAt(0).toString(16)).slice(-2)}).join(""));return JSON.parse(Be)}N.useEffect(()=>{let W=!1,de=0;const me=30,Be=()=>{if(window.google&&I.current&&!W)try{const Qe=document.getElementById("google-btn-fallback");return Qe&&(Qe.style.display="none"),window.google.accounts.id.initialize({client_id:tB,callback:G}),window.google.accounts.id.renderButton(I.current,{theme:"outline",size:"large",text:"signup_with",shape:"rectangular",logo_alignment:"left"}),console.log("Google button rendered successfully in Register"),!0}catch(Qe){return console.error("Error rendering Google button in Register:",Qe),!1}else window.google?I.current||console.log("Google button container not found in Register"):console.log("Google API not loaded yet in Register, attempt:",de);return!1};if(!Be()){const Qe=setInterval(()=>{if(de+=1,Be()||de>=me){if(de>=me){console.log("Max attempts reached, Google button not rendered in Register");const ut=document.getElementById("google-btn-fallback");ut&&(ut.textContent="Unable to load Google Sign-Up. Please refresh the page.")}clearInterval(Qe)}},150)}return()=>{if(W=!0,window.google?.accounts?.id)try{window.google.accounts.id.cancel()}catch{}}},[]);const G=W=>{if(!W.credential){q("Google sign-in failed. Please try again.");return}const de=re(W.credential);console.log("GOOGLE PROFILE DATA:",de);let me="",Be="";de.given_name?me=de.given_name:de.name&&(me=de.name.split(" ")[0]||""),de.family_name?Be=de.family_name:de.name&&(Be=de.name.split(" ").slice(1).join(" ")||""),!me&&de.email&&(me=de.email.split("@")[0]),console.log("EXTRACTED NAMES:",{firstName:me,lastName:Be,originalName:de.name}),P({firstName:me,lastName:Be,email:de.email||"",picture:de.picture||""})},Z=async W=>{if(W.preventDefault(),q(""),U(!0),!L){q("Google user info missing. Please sign in again."),U(!1);return}if(!L.firstName||!L.firstName.trim()){q("First name is missing from Google profile. Please try signing in again."),U(!1);return}if(!L.lastName||!L.lastName.trim()){q("Last name is missing from Google profile. Please try signing in again."),U(!1);return}if(!L.email||!L.email.trim()){q("Email is missing from Google profile. Please try signing in again."),U(!1);return}if(!F){q("Please select your role."),U(!1);return}if(F==="contractor"&&!V.license){q("Contractor license document is required."),U(!1);return}if(F==="architect"&&(!V.architectLicense||!V.portfolio)){q("Both architect license and portfolio documents are required."),U(!1);return}console.log("GOOGLE SIGNUP PAYLOAD:",{firstName:L.firstName,lastName:L.lastName,email:L.email,role:F,license:V.license,portfolio:V.portfolio});try{const de=new FormData;de.append("firstName",L.firstName),de.append("lastName",L.lastName),de.append("email",L.email),de.append("role",F);const me=Math.random().toString(36).slice(-12)+"!A1";de.append("password",me),F==="contractor"&&V.license&&de.append("license",V.license),F==="architect"&&(V.architectLicense&&de.append("architectLicense",V.architectLicense),V.portfolio&&de.append("portfolio",V.portfolio));const Qe=await(await fetch("/buildhub/backend/api/google_register.php",{method:"POST",body:de})).text();let ut;try{ut=JSON.parse(Qe)}catch{q("Server returned invalid response."),U(!1);return}ut.success?(q(""),P(null),ee(""),H({license:null,portfolio:null,architectLicense:null}),setTimeout(()=>{ut.redirect==="homeowner-dashboard"||F==="homeowner"?M("/homeowner-dashboard"):M("/login")},1e3)):q(ut.message||"Google registration failed.")}catch{q("Network or server error. Please try again.")}finally{U(!1)}},fe=W=>{const{name:de,files:me}=W.target;H(Be=>({...Be,[de]:me[0]||null}))},Ae=W=>{const{name:de,value:me}=W.target;let Be=me;de==="firstName"||de==="lastName"?Be=me.replace(/\s+/g," ").replace(/^\s+/,""):de==="email"?Be=me.replace(/\s+/g,""):(de==="password"||de==="confirmPassword")&&(Be=me.replace(/\s+/g,"")),s(Qe=>({...Qe,[de]:Be})),de==="email"&&l(null),de==="password"&&z(k(Be)),r(""),v("")},Ce=W=>{const{name:de,files:me}=W.target;x(Be=>({...Be,[de]:me[0]||null})),r(""),v("")},te=W=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(W),he=W=>W.length<8?"Password must be at least 8 characters long.":/\s/.test(W)?"Password cannot contain spaces.":/[A-Za-z]/.test(W)?/[0-9]/.test(W)?/[!@#$%^&*()_+\-=[\]{};':"\\|,.<>/?`~]/.test(W)?"":"Password must include at least one special character.":"Password must include at least one number.":"Password must include at least one letter.",k=W=>{let de=0;return W.length>=8&&de++,/[A-Z]/.test(W)&&/[a-z]/.test(W)&&de++,/[0-9]/.test(W)&&de++,/[!@#$%^&*()_+\-=[\]{};':"\\|,.<>/?`~]/.test(W)&&de++,de},[T,z]=N.useState(0);N.useEffect(()=>{const W=t.email;if(!W||!te(W)){u(!1),l(null);return}u(!0);const de=new AbortController,me=setTimeout(async()=>{try{const Qe=await(await fetch(`/buildhub/backend/api/check_email.php?email=${encodeURIComponent(W)}`,{signal:de.signal})).json().catch(()=>({}));if(t.email!==W)return;Qe&&Qe.success===!0?l(!!Qe.exists):l(null)}catch(Be){Be&&Be.name!=="AbortError"&&l(null)}finally{t.email===W&&u(!1)}},400);return()=>{clearTimeout(me),de.abort()}},[t.email]);const le=async W=>{if(W.preventDefault(),r(""),v(""),!t.firstName.trim())return r("First Name is required.");if(!t.lastName.trim())return r("Last Name is required.");if(!t.email)return r("Email is required.");if(!te(t.email))return r("Enter a valid email address.");if(o===!0)return r("This email is already registered.");const de=he(t.password);if(de)return r(de);if(t.password!==t.confirmPassword)return r("Passwords do not match!");if(!t.role)return r("Please select your role.");if(t.role==="contractor"&&!b.license)return r("Contractor license document is required.");if(t.role==="architect"&&(!b.architectLicense||!b.portfolio))return r("Both architect license and portfolio documents are required.");p(!0);const me=new FormData;me.append("firstName",t.firstName),me.append("lastName",t.lastName),me.append("email",t.email),me.append("password",t.password),me.append("role",t.role),t.role==="contractor"&&b.license&&me.append("license",b.license),t.role==="architect"&&(b.architectLicense&&me.append("architectLicense",b.architectLicense),b.portfolio&&me.append("portfolio",b.portfolio));try{const Be=await fetch("/buildhub/backend/api/register.php",{method:"POST",body:me});if(!Be.ok)throw new Error(`HTTP error! status: ${Be.status}`);const Qe=await Be.text();let ut;try{ut=JSON.parse(Qe)}catch{throw console.error("Invalid JSON response:",Qe),new Error("Server returned invalid response. Please try again.")}ut.success?(v(ut.message||"Registration successful!"),s({firstName:"",lastName:"",email:"",password:"",confirmPassword:"",role:""}),x({license:null,portfolio:null,architectLicense:null}),r(""),setTimeout(()=>{ut.redirect==="homeowner-dashboard"?M("/homeowner-dashboard"):M("/login")},2e3)):r(ut.message||"Registration failed.")}catch(Be){console.error("Registration error:",Be),r("Server error. Please try again.")}finally{p(!1)}},X=()=>{P(null),ee(""),H({license:null,portfolio:null,architectLicense:null}),q(""),U(!1),v("")};return e.jsxs("main",{className:"register-page","aria-label":"Registration section",children:[e.jsx("section",{className:"register-logo-section","aria-label":"BuildHub brand",children:e.jsxs("div",{className:"brand",children:[e.jsx("img",{src:"/images/logo.png",alt:"BuildHub Logo",className:"brand-logo"}),e.jsx("h1",{className:"brand-title",children:"BuildHub"}),e.jsx("p",{className:"brand-tagline",children:"Where homeowners meet trusted contractors and architects"}),e.jsxs("ul",{className:"brand-highlights","aria-label":"Key highlights",children:[e.jsx("li",{children:"Secure onboarding"}),e.jsx("li",{children:"Verified professionals"}),e.jsx("li",{children:"Fast project matching"})]})]})}),e.jsxs("section",{className:"register-form-section","aria-label":"Registration form",children:[e.jsx("h2",{children:"Create Your Account"}),e.jsx("p",{className:"subtitle",children:"Join us today and start your journey "}),e.jsxs("form",{onSubmit:le,noValidate:!0,children:[e.jsxs("div",{className:"grid-two-col",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"firstName",children:"First Name"}),e.jsx("input",{id:"firstName",name:"firstName",type:"text",required:!0,placeholder:"First name",value:t.firstName,onChange:Ae,onKeyDown:W=>{W.key===" "&&W.currentTarget.selectionStart===0&&W.preventDefault()},onPaste:W=>{const de=W.clipboardData.getData("text");/^\s+/.test(de)&&W.preventDefault()}})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"lastName",children:"Last Name"}),e.jsx("input",{id:"lastName",name:"lastName",type:"text",required:!0,placeholder:"Last name",value:t.lastName,onChange:Ae,onKeyDown:W=>{W.key===" "&&W.currentTarget.selectionStart===0&&W.preventDefault()},onPaste:W=>{const de=W.clipboardData.getData("text");/^\s+/.test(de)&&W.preventDefault()}})]})]}),e.jsxs("div",{className:"full-width",children:[e.jsx("label",{htmlFor:"email",children:"Email Address"}),e.jsx("input",{id:"email",name:"email",type:"email",required:!0,placeholder:"Email address",value:t.email,onChange:Ae,onKeyDown:W=>{(W.key===" "||W.key==="Spacebar")&&W.preventDefault()},onPaste:W=>{const de=W.clipboardData.getData("text");/\s/.test(de)&&W.preventDefault()}}),A&&e.jsx("div",{className:"muted",style:{marginTop:6,fontSize:13,color:"#6b7280"},children:"Checking email"}),o===!0&&e.jsx("p",{className:"error",style:{marginTop:6},children:"This email is already registered."}),o===!1&&te(t.email)&&e.jsx("div",{className:"muted",style:{marginTop:6,fontSize:13,color:"#16a34a"},children:"Email is available."})]}),e.jsxs("div",{className:"grid-two-col",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",children:"Password"}),e.jsxs("div",{style:{position:"relative"},children:[e.jsx("input",{id:"password",name:"password",type:C?"text":"password",required:!0,placeholder:"Create a strong password",value:t.password,onChange:Ae,style:{paddingRight:36},onKeyDown:W=>{(W.key===" "||W.key==="Spacebar")&&W.preventDefault()},onPaste:W=>{const de=W.clipboardData.getData("text");/\s/.test(de)&&W.preventDefault()}}),e.jsx("button",{type:"button","aria-label":C?"Hide password":"Show password",onClick:()=>Q(W=>!W),style:{position:"absolute",right:8,top:"50%",transform:"translateY(-50%)",background:"transparent",border:"none",cursor:"pointer",padding:4,display:"flex",alignItems:"center",justifyContent:"center"},children:C?e.jsx($m,{size:18,"aria-hidden":"true"}):e.jsx(Wm,{size:18,"aria-hidden":"true"})})]}),e.jsxs("div",{className:"pwd-meter","aria-live":"polite",children:[e.jsx("div",{className:`pwd-meter-bar s${T}`,role:"progressbar","aria-valuemin":0,"aria-valuemax":4,"aria-valuenow":T}),e.jsx("div",{className:`pwd-meter-label s${T}`,children:T<=1?"Weak":T===2?"Fair":T===3?"Good":"Strong"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"confirmPassword",children:"Confirm Password"}),e.jsxs("div",{style:{position:"relative"},children:[e.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:j?"text":"password",required:!0,placeholder:"Re-enter password",value:t.confirmPassword,onChange:Ae,style:{paddingRight:36},onKeyDown:W=>{(W.key===" "||W.key==="Spacebar")&&W.preventDefault()},onPaste:W=>{const de=W.clipboardData.getData("text");/\s/.test(de)&&W.preventDefault()}}),e.jsx("button",{type:"button","aria-label":j?"Hide password":"Show password",onClick:()=>B(W=>!W),style:{position:"absolute",right:8,top:"50%",transform:"translateY(-50%)",background:"transparent",border:"none",cursor:"pointer",padding:4,display:"flex",alignItems:"center",justifyContent:"center"},children:j?e.jsx($m,{size:18,"aria-hidden":"true"}):e.jsx(Wm,{size:18,"aria-hidden":"true"})})]})]})]}),e.jsxs("div",{className:"full-width",children:[e.jsx("label",{htmlFor:"role",children:"Select Role"}),e.jsxs("select",{id:"role",name:"role",required:!0,value:t.role,onChange:Ae,children:[e.jsx("option",{value:"",disabled:!0,children:"Select your role"}),e.jsx("option",{value:"homeowner",children:"Homeowner"}),e.jsx("option",{value:"contractor",children:"Contractor"}),e.jsx("option",{value:"architect",children:"Architect"})]})]}),t.role==="contractor"&&e.jsxs("div",{className:"full-width",children:[e.jsxs("label",{htmlFor:"license",children:["Upload Contractor License ",e.jsx("span",{style:{color:"red"},children:"*"})]}),e.jsx("input",{id:"license",name:"license",type:"file",accept:".pdf,.jpg,.jpeg,.png",required:!0,onChange:Ce}),b.license&&e.jsx("span",{className:"file-name",children:b.license.name})]}),t.role==="architect"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"full-width",children:[e.jsxs("label",{htmlFor:"architectLicense",children:["Upload Architect License ",e.jsx("span",{style:{color:"red"},children:"*"})]}),e.jsx("input",{id:"architectLicense",name:"architectLicense",type:"file",accept:".pdf,.jpg,.jpeg,.png",required:!0,onChange:Ce}),b.architectLicense&&e.jsx("span",{className:"file-name",children:b.architectLicense.name})]}),e.jsxs("div",{className:"full-width",children:[e.jsxs("label",{htmlFor:"portfolio",children:["Upload Portfolio ",e.jsx("span",{style:{color:"red"},children:"*"})]}),e.jsx("input",{id:"portfolio",name:"portfolio",type:"file",accept:".pdf,.jpg,.jpeg,.png",required:!0,onChange:Ce}),b.portfolio&&e.jsx("span",{className:"file-name",children:b.portfolio.name})]})]}),a&&e.jsx("p",{className:"error",children:a}),m&&e.jsx("p",{className:"success",style:{color:"green",fontWeight:"bold"},children:m}),e.jsx("button",{type:"submit",className:"btn-submit",disabled:h,children:h?"Creating account...":"Create account"}),e.jsxs("div",{className:"form-links",children:[e.jsx("a",{href:"/forgot-password",children:"Forgot password?"}),e.jsx("a",{href:"/login",children:"Already have an account? Login"})]}),e.jsx("div",{className:"google-signin-block",style:{marginTop:12},children:e.jsx("div",{className:"google-btn-container",ref:I,children:e.jsx("div",{id:"google-btn-fallback",style:{textAlign:"center",padding:"10px",color:"#6c757d",fontSize:"14px"},children:"Google Sign-Up button loading..."})})})]}),L&&e.jsxs("div",{className:"google-role-form",children:[e.jsxs("p",{children:["Welcome,"," ",e.jsxs("b",{children:[L.firstName," ",L.lastName]}),"!",e.jsx("br",{}),"Please select your role to complete registration:"]}),e.jsxs("form",{onSubmit:Z,children:[e.jsxs("select",{value:F,onChange:W=>ee(W.target.value),required:!0,disabled:E,children:[e.jsx("option",{value:"",children:"Select your role"}),e.jsx("option",{value:"homeowner",children:"Homeowner"}),e.jsx("option",{value:"contractor",children:"Contractor"}),e.jsx("option",{value:"architect",children:"Architect"})]}),F==="contractor"&&e.jsxs("div",{className:"full-width",style:{marginTop:8},children:[e.jsxs("label",{htmlFor:"google_license",children:["Contractor License ",e.jsx("span",{style:{color:"red"},children:"*"})]}),e.jsx("input",{id:"google_license",name:"license",type:"file",accept:".pdf,.jpg,.jpeg,.png",required:!0,disabled:E,onChange:fe}),V.license&&e.jsx("span",{className:"file-name",children:V.license.name})]}),F==="architect"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"full-width",style:{marginTop:8},children:[e.jsxs("label",{htmlFor:"google_architectLicense",children:["Architect License ",e.jsx("span",{style:{color:"red"},children:"*"})]}),e.jsx("input",{id:"google_architectLicense",name:"architectLicense",type:"file",accept:".pdf,.jpg,.jpeg,.png",required:!0,disabled:E,onChange:fe}),V.architectLicense&&e.jsx("span",{className:"file-name",children:V.architectLicense.name})]}),e.jsxs("div",{className:"full-width",style:{marginTop:8},children:[e.jsxs("label",{htmlFor:"google_portfolio",children:["Portfolio ",e.jsx("span",{style:{color:"red"},children:"*"})]}),e.jsx("input",{id:"google_portfolio",name:"portfolio",type:"file",accept:".pdf,.jpg,.jpeg,.png",required:!0,disabled:E,onChange:fe}),V.portfolio&&e.jsx("span",{className:"file-name",children:V.portfolio.name})]})]}),e.jsxs("div",{style:{display:"flex",gap:"12px",marginTop:12},children:[e.jsx("button",{type:"submit",className:"btn-submit",disabled:E,children:E?"Processing...":"Complete Registration"}),e.jsx("button",{type:"button",className:"btn-secondary",onClick:X,disabled:E,style:{backgroundColor:"#6c757d",color:"white",border:"none",padding:"10px 20px",borderRadius:"5px",cursor:E?"not-allowed":"pointer"},children:"Cancel"})]})]}),K&&e.jsx("p",{className:"error",style:{marginTop:8},children:K}),m&&e.jsx("p",{className:"success",style:{color:"green",fontWeight:"bold",marginTop:8},children:m})]})]})]})},s1=N.createContext(null);let aB=0;function a1({children:t}){const[s,a]=N.useState([]),r=N.useRef(new Map),o=N.useCallback(u=>{a(p=>p.filter(m=>m.id!==u));const h=r.current.get(u);h&&(clearTimeout(h),r.current.delete(u))},[]),l=N.useCallback((u,h={})=>{const p=++aB,m={id:p,message:u,type:h.type||"info",duration:typeof h.duration=="number"?h.duration:3500};if(a(v=>[...v,m]),m.duration>0){const v=setTimeout(()=>o(p),m.duration);r.current.set(p,v)}return p},[o]),A=N.useMemo(()=>({show:l,info:(u,h)=>l(u,{...h||{},type:"info"}),success:(u,h)=>l(u,{...h||{},type:"success"}),error:(u,h)=>l(u,{...h||{},type:"error"}),warning:(u,h)=>l(u,{...h||{},type:"warning"}),remove:o}),[l,o]);return N.useEffect(()=>()=>{for(const u of r.current.values())clearTimeout(u);r.current.clear()},[]),e.jsxs(s1.Provider,{value:A,children:[t,e.jsx("div",{className:"toast-container",role:"status","aria-live":"polite","aria-atomic":"true",children:s.map(u=>e.jsxs("div",{className:`toast ${u.type}`,children:[e.jsx("span",{className:"toast-message",children:u.message}),e.jsx("button",{className:"toast-close","aria-label":"Close",onClick:()=>o(u.id),children:""})]},u.id))})]})}function Ni(){const t=N.useContext(s1);if(!t)throw new Error("useToast must be used within a ToastProvider");return t}const nB="1024134456606-et46lrm2ce8tl567a4m4s4e0u3v5t4sa.apps.googleusercontent.com",rB=()=>{const[t,s]=N.useState({email:"",password:""}),[a,r]=N.useState(""),[o,l]=N.useState(!1),A=Wr(),u=Ni();N.useEffect(()=>{(async()=>{const j=JSON.parse(sessionStorage.getItem("user")||"{}");let B=!1;try{B=!!(await(await fetch("/buildhub/backend/api/session_check.php",{credentials:"include"})).json()).authenticated}catch{}j?.role==="homeowner"&&B?A("/homeowner-dashboard",{replace:!0}):j?.role==="contractor"&&B?A("/contractor-dashboard",{replace:!0}):j?.role==="architect"&&B&&A("/architect-dashboard",{replace:!0})})()},[]);const h=N.useRef(null),[p,m]=N.useState("");N.useEffect(()=>{let j=!1,B=0;const L=30,P=()=>{if(window.google&&h.current&&!j)try{const F=document.getElementById("google-btn-fallback");return F&&(F.style.display="none"),window.google.accounts.id.initialize({client_id:nB,callback:Q,auto_select:!1,cancel_on_tap_outside:!0,use_fedcm_for_prompt:!1}),window.google.accounts.id.renderButton(h.current,{theme:"filled_blue",size:"large",text:"signin_with",shape:"rectangular",logo_alignment:"left",width:350}),console.log("Google button rendered successfully in Login"),!0}catch(F){return console.error("Error rendering Google button in Login:",F),!1}else window.google?h.current||console.log("Google button container not found in Login"):console.log("Google API not loaded yet in Login, attempt:",B);return!1};if(!P()){const F=setInterval(()=>{if(B+=1,P()||B>=L){if(B>=L){console.log("Max attempts reached, Google button not rendered in Login");const ee=document.getElementById("google-btn-fallback");ee&&(ee.textContent="Unable to load Google Sign-In. Please refresh the page.")}clearInterval(F)}},150)}return()=>{if(j=!0,window.google?.accounts?.id)try{window.google.accounts.id.cancel()}catch{}}},[]);const v=j=>{const{name:B,value:L}=j.target;s(P=>({...P,[B]:L})),r("")},b=j=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(j),x=j=>t.email==="shijinthomas369@gmail.com"?"":j.length<8?"Password must be at least 8 characters long.":/\s/.test(j)?"Password cannot contain spaces.":"",C=async j=>{if(j.preventDefault(),!t.email){r("Email is required.");return}if(!b(t.email)){r("Please enter a valid email address.");return}const B=x(t.password);if(B){r(B);return}try{const P=await(await fetch("/buildhub/backend/api/login.php",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(t)})).json();P.success?(P.redirect==="admin-dashboard"?(localStorage.setItem("admin_logged_in","true"),localStorage.setItem("admin_username","admin"),A("/admin-dashboard")):(sessionStorage.setItem("user",JSON.stringify(P.user)),localStorage.setItem("bh_user",JSON.stringify({email:t.email,name:P.user?`${P.user.first_name} ${P.user.last_name}`.trim():"",method:"email",role:P.user?.role})),P.redirect==="homeowner-dashboard"?A("/homeowner-dashboard"):P.user?.role==="contractor"?A("/contractor-dashboard"):P.user?.role==="architect"?A("/architect-dashboard"):A("/login")),s({email:"",password:""}),r("")):r(P.message||"Login failed.")}catch{r("Server error. Please try again.")}},Q=async j=>{m("");try{window.google.accounts.id.disableAutoSelect()}catch{}const L=await(await fetch(`https://www.googleapis.com/oauth2/v3/tokeninfo?id_token=${j.credential}`)).json();try{const F=await(await fetch("/buildhub/backend/api/login.php",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({google:!0,email:L.email})})).json();F.success?(F.user&&sessionStorage.setItem("user",JSON.stringify(F.user)),localStorage.setItem("bh_user",JSON.stringify({email:L.email,name:`${L.given_name||""} ${L.family_name||""}`.trim(),picture:L.picture,method:"google",role:F.user?.role})),F.redirect==="homeowner-dashboard"?A("/homeowner-dashboard"):F.redirect==="contractor-dashboard"?A("/contractor-dashboard"):F.redirect==="architect-dashboard"?A("/architect-dashboard"):(u.info(F.message||"Login successful! Await admin verification."),A("/login"))):m(F.message||"Google login failed.")}catch{m("Server error. Please try again.")}};return e.jsxs("main",{className:"register-page","aria-label":"Login section",children:[e.jsx("section",{className:"register-logo-section","aria-label":"BuildHub brand",children:e.jsxs("div",{className:"brand",children:[e.jsx("img",{src:"/images/logo.png",alt:"BuildHub Logo",className:"brand-logo"}),e.jsx("h1",{className:"brand-title",children:"BuildHub"}),e.jsx("p",{className:"brand-tagline",children:"Welcome back! Continue building with confidence."}),e.jsxs("ul",{className:"brand-highlights","aria-label":"Key highlights",children:[e.jsx("li",{children:"Secure login"}),e.jsx("li",{children:"Verified professionals"}),e.jsx("li",{children:"Fast project matching"})]})]})}),e.jsxs("section",{className:"register-form-section","aria-label":"Login form",children:[e.jsx("h2",{children:"Login to your account"}),e.jsx("p",{className:"subtitle",children:"Access your dashboard and projects"}),e.jsxs("form",{onSubmit:C,noValidate:!0,children:[e.jsxs("div",{className:"full-width",children:[e.jsx("label",{htmlFor:"email",children:"Email Address"}),e.jsx("input",{id:"email",name:"email",type:"email",required:!0,placeholder:"Email address",value:t.email,onChange:v,autoComplete:"email","aria-describedby":"emailError",onKeyDown:j=>{(j.key===" "||j.key==="Spacebar")&&j.preventDefault()},onPaste:j=>{const B=j.clipboardData.getData("text");/\s/.test(B)&&j.preventDefault()}})]}),e.jsxs("div",{className:"full-width",children:[e.jsx("label",{htmlFor:"password",children:"Password"}),e.jsxs("div",{style:{position:"relative"},children:[e.jsx("input",{id:"password",name:"password",type:o?"text":"password",required:!0,placeholder:"Enter your password",value:t.password,onChange:v,autoComplete:"current-password","aria-describedby":"passwordError",style:{paddingRight:36},onKeyDown:j=>{(j.key===" "||j.key==="Spacebar")&&j.preventDefault()},onPaste:j=>{const B=j.clipboardData.getData("text");/\s/.test(B)&&j.preventDefault()}}),e.jsx("button",{type:"button","aria-label":o?"Hide password":"Show password",onClick:()=>l(j=>!j),style:{position:"absolute",right:8,top:"50%",transform:"translateY(-50%)",background:"transparent",border:"none",cursor:"pointer",padding:4,display:"flex",alignItems:"center",justifyContent:"center"},children:o?e.jsx($m,{size:18,"aria-hidden":"true"}):e.jsx(Wm,{size:18,"aria-hidden":"true"})})]})]}),a&&e.jsx("p",{className:"error",role:"alert",children:a}),e.jsx("button",{type:"submit",className:"btn-submit",children:"Login"}),e.jsxs("div",{className:"form-links",children:[e.jsx("a",{href:"/forgot-password","aria-label":"Forgot password?",children:"Forgot password?"}),e.jsx("a",{href:"/register","aria-label":"Go to registration page",children:"Don't have an account? Register"})]}),e.jsx("div",{className:"google-signin-block",style:{marginTop:12},children:e.jsx("div",{className:"google-btn-container",ref:h,style:{minHeight:"50px",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx("div",{id:"google-btn-fallback",style:{textAlign:"center",padding:"10px",color:"#6c757d",fontSize:"14px"},children:"Loading Google Sign-In..."})})}),p&&e.jsx("p",{className:"error",role:"alert",children:p})]})]})]})};function iB(){const[t,s]=N.useState(1),[a,r]=N.useState(""),[o,l]=N.useState(""),[A,u]=N.useState(""),[h,p]=N.useState(""),[m,v]=N.useState(""),[b,x]=N.useState(!1),[C,Q]=N.useState(!1),[j,B]=N.useState(!1),[L,P]=N.useState(!1),[F,ee]=N.useState(0),K=Wr();N.useEffect(()=>{v("")},[t]);const q=I=>{let M=0;return I.length>=8&&M++,/[A-Z]/.test(I)&&/[a-z]/.test(I)&&M++,/[0-9]/.test(I)&&M++,/[^A-Za-z0-9]/.test(I)&&M++,M},E=I=>I.length<8?"Password must be at least 8 characters long.":/\s/.test(I)?"Password cannot contain spaces.":/[A-Za-z]/.test(I)?/[0-9]/.test(I)?/[^A-Za-z0-9]/.test(I)?"":"Password must include at least one special character.":"Password must include at least one number.":"Password must include at least one letter.",U=async I=>{if(I.preventDefault(),v(""),!a){v("Enter your email.");return}x(!0);try{const re=await(await fetch("/buildhub/backend/api/forgot_password_request.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:a})})).json();v(re.message||"If an account exists, an OTP has been sent."),s(2)}catch{v("Server error. Please try again.")}finally{x(!1)}},V=async()=>{if(v(""),!a||!o){v("Enter your email and OTP.");return}if(!/^\d{6}$/.test(o)){v("Enter a valid 6-digit OTP.");return}x(!0);try{const M=await(await fetch("/buildhub/backend/api/reset_password_verify.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:a,token:o})})).json();M.success?(Q(!0),v("OTP verified. You can now set a new password."),s(3)):(Q(!1),v(M.message||"Invalid or expired OTP."))}catch{Q(!1),v("Server error. Please try again.")}finally{x(!1)}},H=async I=>{if(I.preventDefault(),v(""),!C){v("Verify the OTP first.");return}if(!A||!h){v("Enter new password.");return}const M=E(A);if(M){v(M);return}if(A!==h){v("Passwords do not match!");return}x(!0);try{const G=await(await fetch("/buildhub/backend/api/reset_password_update.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:a,token:o,password:A})})).json();G.success?(v("Password updated successfully. Redirecting to login..."),setTimeout(()=>K("/login"),1500)):v(G.message||"Failed to update password.")}catch{v("Server error. Please try again.")}finally{x(!1)}};return e.jsx("main",{className:"register-page","aria-label":"Forgot password",children:e.jsxs("section",{className:"register-form-section",style:{alignItems:"center"},children:[e.jsx("div",{style:{width:"100%",maxWidth:520,marginBottom:12},children:e.jsxs("button",{type:"button",onClick:()=>K("/login"),"aria-label":"Back to login",className:"back-link",children:[e.jsx(J_,{size:18}),e.jsx("span",{children:"Back to Login"})]})}),e.jsx("h2",{children:"Forgot Password"}),e.jsxs("form",{className:"glass-card",style:{maxWidth:460,width:"100%"},onSubmit:t===1?U:t===3?H:I=>I.preventDefault(),children:[t===1&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"full-width",children:[e.jsx("label",{htmlFor:"email",children:"Your Email"}),e.jsx("input",{id:"email",type:"email",value:a,onChange:I=>{const M=I.target.value.replace(/\s+/g,"");r(M)},placeholder:"Email address",required:!0,onKeyDown:I=>{(I.key===" "||I.key==="Spacebar")&&I.preventDefault()},onPaste:I=>{const M=I.clipboardData.getData("text");/\s/.test(M)&&I.preventDefault()}})]}),m&&e.jsx("p",{className:/sent|success/i.test(m)?"success":"error",children:m}),e.jsx("button",{className:"btn-submit",disabled:b,type:"submit",children:b?"Sending...":"Send OTP"})]}),t===2&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"full-width",children:[e.jsx("label",{children:"Email"}),e.jsx("input",{type:"email",value:a,disabled:!0})]}),e.jsxs("div",{className:"full-width",children:[e.jsx("label",{children:"Enter OTP"}),e.jsx("input",{type:"text",inputMode:"numeric",pattern:"\\\\d{6}",maxLength:6,value:o,onChange:I=>l(I.target.value.replace(/[^0-9]/g,"")),placeholder:"6-digit OTP",required:!0})]}),m&&e.jsx("p",{className:/verified/i.test(m)?"success":"error",children:m}),e.jsxs("div",{style:{display:"flex",gap:8,flexWrap:"wrap"},children:[e.jsx("button",{type:"button",className:"btn-submit",disabled:b,onClick:V,children:b?"Verifying...":"Verify OTP"}),e.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>s(1),children:"Change Email"})]})]}),t===3&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"full-width",children:[e.jsx("label",{children:"Email"}),e.jsx("input",{type:"email",value:a,disabled:!0})]}),e.jsxs("div",{className:"full-width",children:[e.jsx("label",{children:"New Password"}),e.jsxs("div",{style:{position:"relative"},children:[e.jsx("input",{type:j?"text":"password",value:A,onChange:I=>{const M=I.target.value.replace(/\s+/g,"");u(M),ee(q(M))},placeholder:"Create a strong password",required:!0,onKeyDown:I=>{(I.key===" "||I.key==="Spacebar")&&I.preventDefault()},onPaste:I=>{const M=I.clipboardData.getData("text");/\s/.test(M)&&I.preventDefault()}}),e.jsx("button",{type:"button","aria-label":j?"Hide password":"Show password",onClick:()=>B(I=>!I),style:{position:"absolute",right:8,top:"50%",transform:"translateY(-50%)",background:"transparent",border:"none",cursor:"pointer"},children:j?"":""})]}),e.jsxs("div",{className:"pwd-meter","aria-hidden":"true",children:[e.jsx("div",{className:`pwd-meter-bar s${F}`}),e.jsx("div",{className:"pwd-meter-label",children:F<=1?"Weak":F===2?"Fair":F===3?"Good":"Strong"})]})]}),e.jsxs("div",{className:"full-width",children:[e.jsx("label",{children:"Confirm Password"}),e.jsxs("div",{style:{position:"relative"},children:[e.jsx("input",{type:L?"text":"password",value:h,onChange:I=>{const M=I.target.value.replace(/\s+/g,"");p(M)},placeholder:"Re-enter password",required:!0,onKeyDown:I=>{(I.key===" "||I.key==="Spacebar")&&I.preventDefault()},onPaste:I=>{const M=I.clipboardData.getData("text");/\s/.test(M)&&I.preventDefault()}}),e.jsx("button",{type:"button","aria-label":L?"Hide password":"Show password",onClick:()=>P(I=>!I),style:{position:"absolute",right:8,top:"50%",transform:"translateY(-50%)",background:"transparent",border:"none",cursor:"pointer"},children:L?"":""})]})]}),m&&e.jsx("p",{className:/updated|success/i.test(m)?"success":"error",children:m}),e.jsx("button",{className:"btn-submit",type:"submit",disabled:b,children:b?"Updating...":"Update Password"})]})]})]})})}const oB="modulepreload",lB=function(t){return"/"+t},py={},li=function(s,a,r){let o=Promise.resolve();if(a&&a.length>0){let h=function(p){return Promise.all(p.map(m=>Promise.resolve(m).then(v=>({status:"fulfilled",value:v}),v=>({status:"rejected",reason:v}))))};document.getElementsByTagName("link");const A=document.querySelector("meta[property=csp-nonce]"),u=A?.nonce||A?.getAttribute("nonce");o=h(a.map(p=>{if(p=lB(p),p in py)return;py[p]=!0;const m=p.endsWith(".css"),v=m?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${v}`))return;const b=document.createElement("link");if(b.rel=m?"stylesheet":oB,m||(b.as="script"),b.crossOrigin="",b.href=p,u&&b.setAttribute("nonce",u),document.head.appendChild(b),m)return new Promise((x,C)=>{b.addEventListener("load",x),b.addEventListener("error",()=>C(new Error(`Unable to preload CSS for ${p}`)))})}))}function l(A){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=A,window.dispatchEvent(u),!u.defaultPrevented)throw A}return o.then(A=>{for(const u of A||[])u.status==="rejected"&&l(u.reason);return s().catch(l)})},cB=t=>e.jsx("span",{title:typeof t=="number"?`${t} / 5`:"No ratings yet",children:[1,2,3,4,5].map(s=>e.jsx("span",{style:{color:(t||0)>=s?"#f5a623":"#ddd"},children:""},s))}),AB=({open:t,onClose:s,architect:a,reviews:r,loading:o})=>{if(!t||!a)return null;const l=`${a.first_name||""} ${a.last_name||""}`.trim()||"Architect";return e.jsx("div",{className:"form-modal",onClick:s,children:e.jsxs("div",{className:"form-content",style:{maxWidth:"720px"},onClick:A=>A.stopPropagation(),children:[e.jsxs("div",{className:"form-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{children:[e.jsx("h3",{style:{margin:0},children:l}),e.jsx("p",{style:{margin:"4px 0 0 0",color:"#64748b"},children:a.company_name||a.email||""})]}),e.jsx("button",{className:"btn btn-secondary",onClick:s,children:"Close"})]}),e.jsx("div",{className:"details-panel",style:{marginTop:8},children:e.jsxs("div",{className:"details-grid",style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:12},children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Specialization:"})," ",a.specialization||"General"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Experience:"})," ",a.experience_years??"N/A"," years"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"City:"})," ",a.city||"N/A"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Email:"})," ",a.email||"N/A"]}),a.phone&&e.jsxs("div",{children:[e.jsx("strong",{children:"Phone:"})," ",a.phone]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Rating:"})," ",e.jsxs("span",{style:{marginLeft:6},children:[cB(a.avg_rating)," ",e.jsxs("span",{style:{marginLeft:6,color:"#666",fontSize:"0.9rem"},children:["(",a.review_count||0,")"]})]})]})]})}),e.jsxs("div",{className:"section-card",style:{marginTop:16},children:[e.jsxs("div",{className:"section-header",children:[e.jsx("h4",{children:"Recent Reviews"}),e.jsx("p",{children:"Feedback from homeowners"})]}),e.jsx("div",{className:"section-content",children:o?e.jsx("div",{className:"loading",children:"Loading reviews..."}):Array.isArray(r)&&r.length>0?e.jsx("div",{className:"item-list",children:r.slice(0,5).map(A=>e.jsxs("div",{className:"list-item",children:[e.jsx("div",{className:"item-icon",children:""}),e.jsxs("div",{className:"item-content",children:[e.jsxs("h4",{className:"item-title",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("span",{children:A.author||"Homeowner"}),e.jsxs("span",{style:{color:"#f5a623"},children:["".repeat(A.rating),"".repeat(5-A.rating)]})]}),e.jsx("p",{className:"item-meta",children:new Date(A.created_at).toLocaleString()}),A.comment&&e.jsx("p",{className:"item-description",style:{whiteSpace:"pre-wrap"},children:A.comment})]})]},A.id))}):e.jsxs("div",{className:"empty-state",children:[e.jsx("div",{className:"empty-icon",children:""}),e.jsx("h3",{children:"No reviews yet"}),e.jsx("p",{children:"Be the first to work with this architect."})]})})]})]})})},Ym=({selectedArchitectIds:t=[],onSelectionChange:s,layoutRequestId:a=null,showAIRecommendations:r=!1,stylePreferences:o={}})=>{const[l,A]=N.useState([]),[u,h]=N.useState(!1),[p,m]=N.useState(""),[v,b]=N.useState(""),[x,C]=N.useState(""),[Q,j]=N.useState(""),[B,L]=N.useState("best"),[P,F]=N.useState(!1),[ee,K]=N.useState(null),[q,E]=N.useState({}),[U,V]=N.useState({}),[H,I]=N.useState([]),[M,re]=N.useState(!1);N.useEffect(()=>{const T=setTimeout(()=>{G()},300);return()=>clearTimeout(T)},[v,x,Q]);const G=N.useCallback(async()=>{h(!0),m("");try{const T=new URLSearchParams;v.trim()&&T.append("search",v.trim()),x.trim()&&T.append("specialization",x.trim()),Q&&T.append("min_experience",Q),a&&T.append("layout_request_id",a);const z=T.toString(),le=`/buildhub/backend/api/homeowner/get_architects.php${z?`?${z}`:""}`,W=await(await fetch(le,{credentials:"include"})).json();W.success?A(W.architects||[]):m(W.message||"Failed to load architects")}catch(T){m("Error loading architects: "+T.message)}finally{h(!1)}},[v,x,Q,a]);N.useEffect(()=>{G()},[]),N.useEffect(()=>{if(r&&Object.keys(o).length>0&&l.length>0){const T=setTimeout(()=>{Z()},300);return()=>clearTimeout(T)}},[l,o,r]);const Z=async()=>{if(!(!r||Object.keys(o).length===0))try{h(!0);const T={budget_range:o.budget_range||"",plot_size:o.plot_size||"",plot_unit:o.plot_unit||"cents",building_size:o.building_size||"",num_floors:o.num_floors||"1",aesthetic:o.aesthetic||"",rooms:o.rooms||[],location:o.location||"",num_recommendations:5};console.log(" Sending project data to KNN engine:",T);const z=await fetch("http://localhost:5001/api/architect-recommendations",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(T)});if(!z.ok)throw new Error(`HTTP error! status: ${z.status}`);const le=await z.json();if(le.success&&le.recommendations){console.log(" KNN recommendations received:",le.recommendations);const X=le.recommendations.map((W,de)=>({id:W.architect_id,first_name:W.name.split(" ")[0]||"",last_name:W.name.split(" ").slice(1).join(" ")||"",email:W.email,specialization:W.specialty,experience_years:W.experience_years,avg_rating:W.rating,review_count:W.num_reviews,location:W.location,price_range_min:W.price_range_min,price_range_max:W.price_range_max,specializations:W.specializations,portfolio_count:W.portfolio_count,success_rate:W.success_rate,response_time_hours:W.response_time_hours,aiScore:Math.round(W.similarity_score*100),aiReasons:[W.match_reason],knnSimilarity:W.similarity_score,knnRank:de+1}));I(X),console.log(" AI recommendations updated:",X)}else console.warn(" KNN API returned no recommendations:",le),I([])}catch(T){console.error(" Error fetching KNN recommendations:",T),T.message.includes("Failed to fetch")||T.message.includes("ERR_CONNECTION_REFUSED")?console.log(" KNN API server not running, using fallback recommendations"):T.message.includes("404")&&console.log(" No architects found in database, using fallback recommendations");const z=l.map(le=>{let X=0,W=[];if(o.aesthetic){const de=o.aesthetic.toLowerCase(),me=(le.specialization||"").toLowerCase();(me.includes(de)||de.includes(me))&&(X+=30,W.push("Specialization matches your style preference"))}return le.experience_years>=5?(X+=20,W.push("Experienced professional")):le.experience_years>=3&&(X+=15,W.push("Good experience level")),le.avg_rating>=4.5?(X+=25,W.push("Highly rated by clients")):le.avg_rating>=4?(X+=20,W.push("Well-rated professional")):le.avg_rating>=3.5&&(X+=15,W.push("Good client feedback")),le.review_count>=10?(X+=15,W.push("Many client reviews")):le.review_count>=5&&(X+=10,W.push("Several client reviews")),le.is_verified&&(X+=10,W.push("Verified professional")),{...le,aiScore:X,aiReasons:W,knnSimilarity:null,knnRank:null}}).filter(le=>le.aiScore>0).sort((le,X)=>X.aiScore-le.aiScore).slice(0,3);I(z),console.log(" Using fallback recommendations:",z)}finally{h(!1)}},fe=T=>{const z=t.includes(T)?t.filter(X=>X!==T):[...t,T],le=l.filter(X=>z.includes(X.id));s(z,le)},Ae=async T=>{if(ee===T){K(null);return}if(K(T),!q[T]&&!U[T]){V(z=>({...z,[T]:!0}));try{const le=await(await fetch(`/buildhub/backend/api/reviews/get_reviews.php?architect_id=${T}`)).json();le.success&&E(X=>({...X,[T]:le.reviews||[]}))}catch(z){console.error("Error loading reviews:",z)}finally{V(z=>({...z,[T]:!1}))}}},Ce=()=>{b(""),C(""),j(""),L("best")},te=[...l].sort((T,z)=>{switch(B){case"experience":return(z.experience_years||0)-(T.experience_years||0);case"rating":return(z.avg_rating||0)-(T.avg_rating||0);case"recent":return new Date(z.created_at||0)-new Date(T.created_at||0);default:return 0}}),he=T=>{const z="".repeat(Math.floor(T||0)),le="".repeat(5-Math.floor(T||0));return z+le},k=(T,z)=>{const le=(T||"").charAt(0).toUpperCase(),X=(z||"").charAt(0).toUpperCase();return le+X};return e.jsxs("div",{className:"architect-selection-container",children:[e.jsxs("div",{className:"architect-selection-header",children:[e.jsx("h3",{className:"architect-selection-title",children:"Choose Your Architect"}),e.jsxs("p",{className:"architect-selection-subtitle",children:["Select one or more architects to work on your project",r&&Object.keys(o).length>0&&e.jsx("span",{className:"ai-recommendation-badge",children:" AI recommendations based on your style preferences"})]})]}),e.jsxs("div",{className:"architect-search-section",children:[e.jsxs("div",{className:"search-bar-container",children:[e.jsxs("div",{className:"search-input-group",children:[e.jsx("i",{className:"fas fa-search search-icon"}),e.jsx("input",{type:"text",placeholder:"Search by name, company, or email...",value:v,onChange:T=>b(T.target.value),className:"search-input"})]}),e.jsxs("button",{className:"filter-toggle-btn",onClick:()=>F(!P),children:[e.jsx("i",{className:"fas fa-filter"}),"Filters",(x||Q)&&e.jsx("span",{className:"filter-indicator"})]})]}),P&&e.jsxs("div",{className:"advanced-filters",children:[e.jsxs("div",{className:"filter-row",children:[e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{children:"Specialization"}),e.jsx("input",{type:"text",placeholder:"e.g., Residential, Commercial, Interior",value:x,onChange:T=>C(T.target.value)})]}),e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{children:"Min Experience (years)"}),e.jsx("input",{type:"number",min:"0",placeholder:"0",value:Q,onChange:T=>j(T.target.value)})]}),e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{children:"Sort by"}),e.jsxs("select",{value:B,onChange:T=>L(T.target.value),children:[e.jsx("option",{value:"best",children:"Best Match"}),e.jsx("option",{value:"rating",children:"Highest Rating"}),e.jsx("option",{value:"experience",children:"Most Experience"}),e.jsx("option",{value:"recent",children:"Recently Joined"})]})]})]}),e.jsxs("div",{className:"filter-actions",children:[e.jsxs("button",{className:"clear-filters-btn",onClick:Ce,children:[e.jsx("i",{className:"fas fa-times"}),"Clear Filters"]}),e.jsxs("div",{className:"selected-count",children:[t.length," selected"]})]})]})]}),r&&H.length>0&&e.jsxs("div",{className:"ai-recommendations-section",children:[e.jsxs("div",{className:"recommendations-header",children:[e.jsxs("h4",{className:"recommendations-title",children:[e.jsx("i",{className:"fas fa-robot"}),"AI Recommendations"]}),e.jsxs("button",{className:"toggle-recommendations-btn",onClick:()=>re(!M),children:[M?"Hide":"Show"," Recommendations",e.jsx("i",{className:`fas fa-chevron-${M?"up":"down"}`})]})]}),M&&e.jsx("div",{className:"recommendations-grid",children:H.map((T,z)=>e.jsxs("div",{className:`recommendation-card ${t.includes(T.id)?"selected":""}`,onClick:()=>fe(T.id),children:[e.jsxs("div",{className:"recommendation-badge",children:[e.jsxs("span",{className:"badge-rank",children:["#",T.knnRank||z+1]}),e.jsxs("span",{className:"badge-score",children:[T.aiScore,"% Match"]}),T.knnSimilarity&&e.jsx("span",{className:"badge-knn",children:" KNN"})]}),e.jsxs("div",{className:"recommendation-content",children:[e.jsxs("div",{className:"architect-info",children:[e.jsx("div",{className:"architect-avatar",children:k(T.first_name,T.last_name)}),e.jsxs("div",{className:"architect-details",children:[e.jsx("h5",{className:"architect-name",children:`${T.first_name||""} ${T.last_name||""}`.trim()||`Architect #${T.id}`}),e.jsx("p",{className:"architect-email",children:T.email})]})]}),e.jsxs("div",{className:"recommendation-reasons",children:[e.jsx("h6",{children:"Why we recommend:"}),e.jsx("ul",{children:T.aiReasons.map((le,X)=>e.jsx("li",{children:le},X))})]})]})]},T.id))})]}),p&&e.jsxs("div",{className:"error-message",children:[e.jsx("i",{className:"fas fa-exclamation-triangle"}),p]}),u&&e.jsxs("div",{className:"loading-state",children:[e.jsx("div",{className:"loading-spinner"}),e.jsx("span",{children:"Loading architects..."})]}),!u&&e.jsx("div",{className:"architect-grid",children:te.map(T=>e.jsxs("div",{className:`architect-card ${t.includes(T.id)?"selected":""} ${T.already_assigned?"disabled":""}`,onClick:()=>!T.already_assigned&&fe(T.id),children:[e.jsx("div",{className:"selection-indicator",children:t.includes(T.id)&&e.jsx("i",{className:"fas fa-check"})}),T.already_assigned&&e.jsxs("div",{className:"status-badge assigned",children:[e.jsx("i",{className:"fas fa-user-check"}),"Already Assigned"]}),e.jsx("div",{className:"architect-card-header",children:e.jsxs("div",{className:"architect-info",children:[e.jsx("div",{className:"architect-avatar",children:k(T.first_name,T.last_name)}),e.jsxs("div",{className:"architect-details",children:[e.jsx("h4",{className:"architect-name",children:`${T.first_name||""} ${T.last_name||""}`.trim()||`Architect #${T.id}`}),e.jsx("p",{className:"architect-email",children:T.email}),T.company_name&&e.jsx("p",{className:"architect-company",children:T.company_name})]})]})}),e.jsxs("div",{className:"architect-rating",children:[e.jsx("div",{className:"rating-stars",children:he(T.avg_rating)}),e.jsx("span",{className:"rating-text",children:typeof T.avg_rating=="number"?`${T.avg_rating.toFixed(1)}/5`:"No rating"}),e.jsxs("span",{className:"rating-count",children:["(",T.review_count||0," reviews)"]})]}),e.jsxs("div",{className:"architect-tags",children:[T.specialization&&e.jsxs("span",{className:"architect-tag specialization",children:[e.jsx("i",{className:"fas fa-briefcase"}),T.specialization]}),typeof T.experience_years=="number"&&e.jsxs("span",{className:"architect-tag experience",children:[e.jsx("i",{className:"fas fa-calendar-alt"}),T.experience_years," years"]})]}),e.jsxs("button",{className:"architect-action-btn",onClick:z=>{z.stopPropagation(),Ae(T.id)},children:[e.jsx("i",{className:"fas fa-eye"}),ee===T.id?"Hide Details":"View Details"]}),ee===T.id&&e.jsx("div",{className:"architect-details-expanded",children:e.jsxs("div",{className:"details-section",children:[e.jsx("h5",{children:"Reviews"}),U[T.id]?e.jsx("div",{className:"loading-reviews",children:"Loading reviews..."}):q[T.id]?.length>0?e.jsxs("div",{className:"reviews-list",children:[q[T.id].slice(0,3).map(z=>e.jsxs("div",{className:"review-item",children:[e.jsxs("div",{className:"review-header",children:[e.jsx("span",{className:"review-author",children:z.author||"Homeowner"}),e.jsx("span",{className:"review-rating",children:he(z.rating)})]}),e.jsx("p",{className:"review-comment",children:z.comment}),e.jsx("span",{className:"review-date",children:new Date(z.created_at).toLocaleDateString()})]},z.id)),q[T.id].length>3&&e.jsxs("p",{className:"more-reviews",children:["+",q[T.id].length-3," more reviews"]})]}):e.jsx("p",{className:"no-reviews",children:"No reviews yet"})]})})]},T.id))}),!u&&te.length===0&&e.jsxs("div",{className:"empty-state",children:[e.jsx("div",{className:"empty-icon",children:""}),e.jsx("h3",{children:"No architects found"}),e.jsx("p",{children:"Try adjusting your search criteria or filters"}),e.jsxs("button",{className:"retry-btn",onClick:G,children:[e.jsx("i",{className:"fas fa-refresh"}),"Try Again"]})]})]})},dB=({projectId:t,homeownerId:s})=>{const a=Ni(),[r,o]=N.useState([]),[l,A]=N.useState(!0),[u,h]=N.useState(null),[p,m]=N.useState(null),[v,b]=N.useState("all"),[x,C]=N.useState("newest");N.useEffect(()=>{Q()},[t,v,x]);const Q=async()=>{A(!0);try{const K=new URLSearchParams({limit:"50",offset:"0"});t&&K.append("project_id",t);const E=await(await fetch(`/buildhub/backend/api/homeowner/get_geo_photos.php?${K}`,{credentials:"include"})).json();if(E.success){let U=E.data.photos||[];if(v==="unviewed")U=U.filter(V=>!V.viewing.viewed);else if(v==="recent"){const V=new Date(Date.now()-864e5);U=U.filter(H=>new Date(H.timestamps.uploaded)>V)}x==="oldest"?U.sort((V,H)=>new Date(V.timestamps.uploaded)-new Date(H.timestamps.uploaded)):x==="location"&&U.sort((V,H)=>(V.location.place_name||"").localeCompare(H.location.place_name||"")),o(U),m(E.data.project_summary)}else a.error("Failed to load photos: "+E.message)}catch(K){console.error("Error loading photos:",K),a.error("Error loading photos")}finally{A(!1)}},j=async K=>{try{(await(await fetch("/buildhub/backend/api/homeowner/mark_photo_viewed.php",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({photo_id:K})})).json()).success&&o(U=>U.map(V=>V.id===K?{...V,viewing:{...V.viewing,viewed:!0,viewed_at:new Date().toISOString()}}:V))}catch(q){console.error("Error marking photo as viewed:",q)}},B=K=>{h(K),K.viewing.viewed||j(K.id)},L=()=>{h(null)},P=(K,q,E)=>{if(K&&q){const U=`https://www.google.com/maps?q=${K},${q}`;window.open(U,"_blank")}else a.error("Location coordinates not available")},F=K=>{if(K.photo_url){const q=document.createElement("a");q.href=K.photo_url,q.download=K.original_filename,q.click()}},ee=K=>{switch(K){case"unviewed":return r.filter(E=>!E.viewing.viewed).length;case"recent":const q=new Date(Date.now()-1440*60*1e3);return r.filter(E=>new Date(E.timestamps.uploaded)>q).length;default:return r.length}};return l?e.jsx("div",{className:"geo-photo-viewer loading",children:e.jsxs("div",{className:"loading-spinner",children:[e.jsx("div",{className:"spinner"}),e.jsx("p",{children:"Loading construction photos..."})]})}):e.jsxs("div",{className:"geo-photo-viewer",children:[e.jsx("div",{className:"viewer-header",children:e.jsxs("div",{className:"header-content",children:[e.jsx("h3",{children:" Construction Progress Photos"}),p&&e.jsxs("div",{className:"project-info",children:[e.jsxs("span",{className:"contractor-name",children:["by ",p.contractor_name]}),e.jsxs("div",{className:"photo-stats",children:[e.jsxs("span",{className:"stat",children:[p.photo_stats.total_photos," photos"]}),p.photo_stats.unviewed_photos>0&&e.jsxs("span",{className:"stat unviewed",children:[p.photo_stats.unviewed_photos," new"]})]})]})]})}),e.jsxs("div",{className:"viewer-controls",children:[e.jsxs("div",{className:"filter-controls",children:[e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{children:"Filter:"}),e.jsxs("select",{value:v,onChange:K=>b(K.target.value),children:[e.jsxs("option",{value:"all",children:["All Photos (",r.length,")"]}),e.jsxs("option",{value:"unviewed",children:["Unviewed (",ee("unviewed"),")"]}),e.jsxs("option",{value:"recent",children:["Recent (24h) (",ee("recent"),")"]})]})]}),e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{children:"Sort by:"}),e.jsxs("select",{value:x,onChange:K=>C(K.target.value),children:[e.jsx("option",{value:"newest",children:"Newest First"}),e.jsx("option",{value:"oldest",children:"Oldest First"}),e.jsx("option",{value:"location",children:"Location"})]})]})]}),e.jsx("button",{className:"refresh-btn",onClick:Q,children:" Refresh"})]}),r.length===0?e.jsxs("div",{className:"empty-state",children:[e.jsx("div",{className:"empty-icon",children:""}),e.jsx("h3",{children:"No Photos Yet"}),e.jsx("p",{children:"Construction photos from your contractor will appear here with location details."})]}):e.jsx("div",{className:"photos-grid",children:r.map(K=>e.jsxs("div",{className:`photo-card ${K.viewing.viewed?"":"unviewed"}`,onClick:()=>B(K),children:[!K.viewing.viewed&&e.jsx("div",{className:"new-badge",children:"NEW"}),e.jsx("div",{className:"photo-preview",children:K.file_exists&&K.photo_url?e.jsx("img",{src:K.photo_url,alt:"Construction progress"}):e.jsxs("div",{className:"photo-unavailable",children:[e.jsx("span",{children:""}),e.jsx("p",{children:"Photo unavailable"})]})}),e.jsxs("div",{className:"photo-info",children:[e.jsxs("div",{className:"location-info",children:[e.jsxs("div",{className:"place-name",children:[" ",K.location.place_name||"Location unavailable"]}),K.location.latitude&&K.location.longitude&&e.jsxs("div",{className:"coordinates",children:[K.location.latitude.toFixed(6),", ",K.location.longitude.toFixed(6)]})]}),e.jsxs("div",{className:"timestamp-info",children:[e.jsxs("div",{className:"upload-time",children:[" ",K.timestamps.time_ago]}),e.jsxs("div",{className:"contractor-name",children:[" ",K.contractor.name]})]})]})]},K.id))}),u&&e.jsx("div",{className:"photo-modal-overlay",onClick:L,children:e.jsxs("div",{className:"photo-modal",onClick:K=>K.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{children:"Construction Photo Details"}),e.jsx("button",{className:"close-btn",onClick:L,children:""})]}),e.jsxs("div",{className:"modal-content",children:[e.jsx("div",{className:"photo-display",children:u.file_exists&&u.photo_url?e.jsx("img",{src:u.photo_url,alt:"Construction progress"}):e.jsxs("div",{className:"photo-unavailable-large",children:[e.jsx("span",{children:""}),e.jsx("p",{children:"Photo not available"})]})}),e.jsxs("div",{className:"photo-details",children:[e.jsxs("div",{className:"detail-section",children:[e.jsx("h4",{children:" Location Information"}),e.jsxs("div",{className:"detail-grid",children:[e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"label",children:"Place:"}),e.jsx("span",{className:"value",children:u.location.place_name||"Not available"})]}),u.location.latitude&&u.location.longitude&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"label",children:"Coordinates:"}),e.jsxs("span",{className:"value",children:[u.location.latitude.toFixed(6),", ",u.location.longitude.toFixed(6)]})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"label",children:"Accuracy:"}),e.jsxs("span",{className:"value",children:["",Math.round(u.location.accuracy||0),"m"]})]})]})]}),u.location.latitude&&u.location.longitude&&e.jsx("button",{className:"maps-btn",onClick:()=>P(u.location.latitude,u.location.longitude,u.location.place_name),children:" View on Maps"})]}),e.jsxs("div",{className:"detail-section",children:[e.jsx("h4",{children:" Timing Information"}),e.jsxs("div",{className:"detail-grid",children:[e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"label",children:"Photo Taken:"}),e.jsx("span",{className:"value",children:u.timestamps.photo_taken_formatted||"Not available"})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"label",children:"Uploaded:"}),e.jsx("span",{className:"value",children:u.timestamps.uploaded_formatted})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"label",children:"Time Ago:"}),e.jsx("span",{className:"value",children:u.timestamps.time_ago})]})]})]}),e.jsxs("div",{className:"detail-section",children:[e.jsx("h4",{children:" Contractor Information"}),e.jsxs("div",{className:"detail-grid",children:[e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"label",children:"Name:"}),e.jsx("span",{className:"value",children:u.contractor.name})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"label",children:"Email:"}),e.jsx("span",{className:"value",children:u.contractor.email})]}),u.contractor.phone&&e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"label",children:"Phone:"}),e.jsx("span",{className:"value",children:u.contractor.phone})]})]})]}),e.jsxs("div",{className:"detail-section",children:[e.jsx("h4",{children:" File Information"}),e.jsxs("div",{className:"detail-grid",children:[e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"label",children:"Filename:"}),e.jsx("span",{className:"value",children:u.original_filename})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"label",children:"Size:"}),e.jsx("span",{className:"value",children:u.file_size_formatted})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"label",children:"Type:"}),e.jsx("span",{className:"value",children:u.mime_type})]})]}),u.file_exists&&u.photo_url&&e.jsx("button",{className:"download-btn",onClick:()=>F(u),children:" Download Photo"})]})]})]})]})})]})},uB=()=>{const[t,s]=N.useState([]),[a,r]=N.useState(!0),[o,l]=N.useState(null),[A,u]=N.useState(!1),[h,p]=N.useState(""),[m,v]=N.useState(""),[b,x]=N.useState(!1),[C,Q]=N.useState(!1),j=N.useRef(null);N.useEffect(()=>{B()},[]);const B=async()=>{try{r(!0);const U=await fetch("/buildhub/backend/api/homeowner/get_house_plans.php",{method:"GET",credentials:"include"});if(!U.ok)throw new Error(`HTTP error! status: ${U.status}`);const V=await U.json();V.success?s(V.plans||[]):console.error("Failed to fetch house plans:",V.message)}catch(U){console.error("Error fetching house plans:",U)}finally{r(!1)}},L=U=>{l(U),u(!0),p(U.review_info?.feedback||""),v(U.review_info?.status||"pending")},P=async()=>{if(!(!o||!m)){x(!0);try{const V=await(await fetch("/buildhub/backend/api/homeowner/review_house_plan.php",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({house_plan_id:o.id,status:m,feedback:h})})).json();V.success?(s(H=>H.map(I=>I.id===o.id?{...I,review_info:{status:m,feedback:h,reviewed_at:new Date().toISOString()}}:I)),u(!1),alert("Review submitted successfully!")):alert("Failed to submit review: "+V.message)}catch(U){console.error("Error submitting review:",U),alert("Error submitting review. Please try again.")}finally{x(!1)}}},F=U=>{const V={pending:"status-pending",approved:"status-approved",rejected:"status-rejected",revision_requested:"status-revision"},H={pending:"Pending Review",approved:"Approved",rejected:"Rejected",revision_requested:"Revision Requested"};return e.jsx("span",{className:`status-badge ${V[U]||"status-pending"}`,children:H[U]||U})},ee=async U=>{Q(!0);try{const{default:V}=await li(async()=>{const{default:M}=await Promise.resolve().then(()=>Gg);return{default:M}},[]),H=new V("l","mm","a4");H.setFontSize(20),H.text(U.plan_name,20,20),H.setFontSize(12);let I=40;if(H.text(`Plot Size: ${U.plot_width}'  ${U.plot_height}'`,20,I),I+=10,H.text(`Total Area: ${U.total_area?.toFixed(0)} sq ft`,20,I),I+=10,H.text(`Number of Rooms: ${U.plan_data?.rooms?.length||0}`,20,I),I+=10,H.text(`Architect: ${U.architect_info?.name}`,20,I),I+=20,U.technical_details&&Object.keys(U.technical_details).length>0){H.setFontSize(14),H.text("Technical Specifications:",20,I),I+=10,H.setFontSize(10);const M=U.technical_details;M.construction_cost&&(H.text(`Estimated Cost: ${M.construction_cost}`,20,I),I+=8),M.construction_duration&&(H.text(`Duration: ${M.construction_duration}`,20,I),I+=8),M.foundation_type&&(H.text(`Foundation: ${M.foundation_type}`,20,I),I+=8),M.structure_type&&(H.text(`Structure: ${M.structure_type}`,20,I),I+=8),M.wall_material&&(H.text(`Wall Material: ${M.wall_material}`,20,I),I+=8),I+=10}if(U.plan_data?.rooms&&U.plan_data.rooms.length>0&&(H.setFontSize(14),H.text("Room Details:",20,I),I+=10,H.setFontSize(10),U.plan_data.rooms.forEach((M,re)=>{const G=`${M.name}: ${M.layout_width}'  ${M.layout_height}' (${(M.layout_width*M.layout_height).toFixed(0)} sq ft)`;H.text(G,20,I),I+=8,I>180&&(H.addPage(),I=20)})),j.current)try{const M=(await li(async()=>{const{default:Ae}=await Promise.resolve().then(()=>Au);return{default:Ae}},void 0)).default,re=await M(j.current),G=re.toDataURL("image/png");H.addPage(),H.setFontSize(14),H.text("Plan Layout:",20,20);const Z=250,fe=re.height*Z/re.width;H.addImage(G,"PNG",20,30,Z,fe)}catch(M){console.error("Error adding canvas to PDF:",M)}H.save(`${U.plan_name.replace(/[^a-z0-9]/gi,"_")}_house_plan.pdf`)}catch(V){console.error("Error generating PDF:",V),alert("Error generating PDF. Please try again.")}finally{Q(!1)}},K=async U=>{Q(!0);try{if(j.current){const V=(await li(async()=>{const{default:M}=await Promise.resolve().then(()=>Au);return{default:M}},void 0)).default,H=await V(j.current,{backgroundColor:"#ffffff",scale:2}),I=document.createElement("a");I.download=`${U.plan_name.replace(/[^a-z0-9]/gi,"_")}_layout.png`,I.href=H.toDataURL("image/png"),I.click()}else alert("Plan visualization not available for download.")}catch(V){console.error("Error generating image:",V),alert("Error generating image. Please try again.")}finally{Q(!1)}},q=U=>{try{const V={plan_info:{name:U.plan_name,plot_width:U.plot_width,plot_height:U.plot_height,total_area:U.total_area,created_at:U.created_at,updated_at:U.updated_at},architect_info:U.architect_info,technical_details:U.technical_details,plan_data:U.plan_data,notes:U.notes},H=JSON.stringify(V,null,2),I=new Blob([H],{type:"application/json"}),M=document.createElement("a");M.href=URL.createObjectURL(I),M.download=`${U.plan_name.replace(/[^a-z0-9]/gi,"_")}_data.json`,M.click(),URL.revokeObjectURL(M.href)}catch(V){console.error("Error generating JSON:",V),alert("Error generating JSON file. Please try again.")}},E=U=>{if(!U.plan_data?.rooms||U.plan_data.rooms.length===0)return null;const V=10,H=U.plot_width*V+40,I=U.plot_height*V+40;return e.jsx("div",{className:"plan-canvas-container",ref:j,children:e.jsxs("svg",{width:H,height:I,className:"plan-svg",children:[e.jsx("rect",{x:20,y:20,width:U.plot_width*V,height:U.plot_height*V,fill:"none",stroke:"#2c3e50",strokeWidth:"2"}),e.jsxs("text",{x:20+U.plot_width*V/2,y:15,textAnchor:"middle",fontSize:"10",fill:"#2c3e50",children:[U.plot_width,"'"]}),e.jsxs("text",{x:10,y:20+U.plot_height*V/2,textAnchor:"middle",fontSize:"10",fill:"#2c3e50",transform:`rotate(-90, 10, ${20+U.plot_height*V/2})`,children:[U.plot_height,"'"]}),U.plan_data.rooms.map((M,re)=>{const G=(M.x||0)+20,Z=(M.y||0)+20,fe=(M.layout_width||10)*V,Ae=(M.layout_height||10)*V;return e.jsxs("g",{children:[e.jsx("rect",{x:G,y:Z,width:fe,height:Ae,fill:M.color||"#e3f2fd",stroke:"#666",strokeWidth:"1"}),e.jsx("text",{x:G+fe/2,y:Z+Ae/2-5,textAnchor:"middle",fontSize:"8",fill:"#333",children:M.name}),e.jsxs("text",{x:G+fe/2,y:Z+Ae/2+5,textAnchor:"middle",fontSize:"6",fill:"#666",children:[M.layout_width,"'  ",M.layout_height,"'"]})]},re)})]})})};return a?e.jsx("div",{className:"house-plan-viewer",children:e.jsxs("div",{className:"loading-state",children:[e.jsx("div",{className:"loading-spinner"}),e.jsx("p",{children:"Loading your house plans..."})]})}):e.jsxs("div",{className:"house-plan-viewer",children:[e.jsxs("div",{className:"section-header",children:[e.jsx("h2",{children:" House Plans"}),e.jsx("p",{children:"Review house plans submitted by your architect"})]}),t.length===0?e.jsxs("div",{className:"empty-state",children:[e.jsx("div",{className:"empty-icon",children:""}),e.jsx("h3",{children:"No House Plans Yet"}),e.jsx("p",{children:"Your architect will submit house plans here for your review."})]}):e.jsx("div",{className:"plans-grid",children:t.map(U=>e.jsxs("div",{className:"plan-card",children:[e.jsxs("div",{className:"plan-header",children:[e.jsx("h3",{children:U.plan_name}),F(U.review_info?.status||"pending")]}),e.jsxs("div",{className:"plan-summary",children:[e.jsxs("div",{className:"summary-item",children:[e.jsx("span",{className:"label",children:"Plot Size:"}),e.jsxs("span",{className:"value",children:[U.plot_width,"'  ",U.plot_height,"'"]})]}),e.jsxs("div",{className:"summary-item",children:[e.jsx("span",{className:"label",children:"Total Area:"}),e.jsxs("span",{className:"value",children:[U.total_area?.toFixed(0)," sq ft"]})]}),e.jsxs("div",{className:"summary-item",children:[e.jsx("span",{className:"label",children:"Rooms:"}),e.jsx("span",{className:"value",children:U.plan_data?.rooms?.length||0})]}),U.technical_details?.construction_cost&&e.jsxs("div",{className:"summary-item",children:[e.jsx("span",{className:"label",children:"Estimated Cost:"}),e.jsx("span",{className:"value",children:U.technical_details.construction_cost})]})]}),e.jsxs("div",{className:"plan-architect",children:[e.jsx("span",{className:"architect-label",children:"Architect:"}),e.jsx("span",{className:"architect-name",children:U.architect_info?.name})]}),e.jsxs("div",{className:"plan-actions",children:[e.jsx("button",{className:"btn-primary",onClick:()=>L(U),children:"View Details"}),e.jsxs("div",{className:"download-actions",children:[e.jsx("button",{className:"btn-download",onClick:()=>ee(U),disabled:C,title:"Download as PDF",children:" PDF"}),e.jsx("button",{className:"btn-download",onClick:()=>K(U),disabled:C,title:"Download as Image",children:" PNG"}),e.jsx("button",{className:"btn-download",onClick:()=>q(U),disabled:C,title:"Download as JSON",children:" JSON"})]})]}),e.jsx("div",{className:"plan-dates",children:e.jsxs("small",{children:["Submitted: ",new Date(U.updated_at).toLocaleDateString()]})})]},U.id))}),A&&o&&e.jsx("div",{className:"modal-overlay",children:e.jsxs("div",{className:"plan-details-modal",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h2",{children:o.plan_name}),e.jsx("button",{className:"close-btn",onClick:()=>u(!1),children:""})]}),e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"plan-info-grid",children:[e.jsxs("div",{className:"info-section plan-visualization",children:[e.jsx("h3",{children:" Plan Layout"}),E(o)]}),e.jsxs("div",{className:"info-section",children:[e.jsx("h3",{children:" Plan Information"}),e.jsxs("div",{className:"info-grid",children:[e.jsxs("div",{className:"info-item",children:[e.jsx("label",{children:"Plot Dimensions:"}),e.jsxs("span",{children:[o.plot_width,"'  ",o.plot_height,"'"]})]}),e.jsxs("div",{className:"info-item",children:[e.jsx("label",{children:"Total Area:"}),e.jsxs("span",{children:[o.total_area?.toFixed(0)," sq ft"]})]}),e.jsxs("div",{className:"info-item",children:[e.jsx("label",{children:"Number of Rooms:"}),e.jsx("span",{children:o.plan_data?.rooms?.length||0})]}),e.jsxs("div",{className:"info-item",children:[e.jsx("label",{children:"Status:"}),F(o.review_info?.status||"pending")]})]})]}),o.technical_details&&Object.keys(o.technical_details).length>0&&e.jsxs("div",{className:"info-section",children:[e.jsx("h3",{children:" Technical Specifications"}),e.jsxs("div",{className:"technical-details",children:[o.technical_details.construction_cost&&e.jsxs("div",{className:"tech-item",children:[e.jsx("label",{children:"Estimated Cost:"}),e.jsx("span",{className:"cost-highlight",children:o.technical_details.construction_cost})]}),o.technical_details.construction_duration&&e.jsxs("div",{className:"tech-item",children:[e.jsx("label",{children:"Construction Duration:"}),e.jsx("span",{children:o.technical_details.construction_duration})]}),o.technical_details.foundation_type&&e.jsxs("div",{className:"tech-item",children:[e.jsx("label",{children:"Foundation Type:"}),e.jsx("span",{children:o.technical_details.foundation_type})]}),o.technical_details.structure_type&&e.jsxs("div",{className:"tech-item",children:[e.jsx("label",{children:"Structure Type:"}),e.jsx("span",{children:o.technical_details.structure_type})]}),o.technical_details.wall_material&&e.jsxs("div",{className:"tech-item",children:[e.jsx("label",{children:"Wall Material:"}),e.jsx("span",{children:o.technical_details.wall_material})]}),o.technical_details.roofing_type&&e.jsxs("div",{className:"tech-item",children:[e.jsx("label",{children:"Roofing Type:"}),e.jsx("span",{children:o.technical_details.roofing_type})]})]})]}),o.plan_data?.rooms&&e.jsxs("div",{className:"info-section",children:[e.jsx("h3",{children:" Room Details"}),e.jsx("div",{className:"rooms-list",children:o.plan_data.rooms.map((U,V)=>e.jsxs("div",{className:"room-item",children:[e.jsx("span",{className:"room-name",children:U.name}),e.jsxs("span",{className:"room-size",children:[U.layout_width,"'  ",U.layout_height,"' (",(U.layout_width*U.layout_height).toFixed(0)," sq ft)"]})]},V))})]}),e.jsxs("div",{className:"info-section",children:[e.jsx("h3",{children:" Architect Information"}),e.jsxs("div",{className:"architect-info",children:[e.jsxs("div",{className:"info-item",children:[e.jsx("label",{children:"Name:"}),e.jsx("span",{children:o.architect_info?.name})]}),e.jsxs("div",{className:"info-item",children:[e.jsx("label",{children:"Email:"}),e.jsx("span",{children:o.architect_info?.email})]}),o.architect_info?.specialization&&e.jsxs("div",{className:"info-item",children:[e.jsx("label",{children:"Specialization:"}),e.jsx("span",{children:o.architect_info.specialization})]})]})]}),o.notes&&e.jsxs("div",{className:"info-section",children:[e.jsx("h3",{children:" Notes"}),e.jsx("p",{className:"plan-notes",children:o.notes})]})]}),e.jsxs("div",{className:"review-section",children:[e.jsx("h3",{children:" Your Review"}),e.jsxs("div",{className:"review-form",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Status:"}),e.jsxs("select",{value:m,onChange:U=>v(U.target.value),children:[e.jsx("option",{value:"pending",children:"Pending Review"}),e.jsx("option",{value:"approved",children:"Approve Plan"}),e.jsx("option",{value:"revision_requested",children:"Request Revisions"}),e.jsx("option",{value:"rejected",children:"Reject Plan"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Feedback:"}),e.jsx("textarea",{value:h,onChange:U=>p(U.target.value),placeholder:"Provide your feedback on the house plan...",rows:"4"})]})]})]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsxs("div",{className:"download-section",children:[e.jsx("span",{className:"download-label",children:"Download:"}),e.jsxs("div",{className:"download-buttons",children:[e.jsx("button",{className:"btn-download-modal",onClick:()=>ee(o),disabled:C,title:"Download complete plan as PDF",children:" PDF Report"}),e.jsx("button",{className:"btn-download-modal",onClick:()=>K(o),disabled:C,title:"Download layout as image",children:" Layout Image"}),e.jsx("button",{className:"btn-download-modal",onClick:()=>q(o),disabled:C,title:"Download plan data as JSON",children:" Plan Data"})]})]}),e.jsxs("div",{className:"modal-actions",children:[e.jsx("button",{className:"btn-secondary",onClick:()=>u(!1),children:"Close"}),e.jsx("button",{className:"btn-primary",onClick:P,disabled:b,children:b?"Submitting...":"Submit Review"})]})]})]})})]})};function Ca(t){"@babel/helpers - typeof";return Ca=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Ca(t)}var yo=Uint8Array,Bi=Uint16Array,Og=Int32Array,Mg=new yo([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),zg=new yo([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),fy=new yo([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),n1=function(t,s){for(var a=new Bi(31),r=0;r<31;++r)a[r]=s+=1<<t[r-1];for(var o=new Og(a[30]),r=1;r<30;++r)for(var l=a[r];l<a[r+1];++l)o[l]=l-a[r]<<5|r;return{b:a,r:o}},r1=n1(Mg,2),hB=r1.b,Xm=r1.r;hB[28]=258,Xm[258]=28;var pB=n1(zg,0),my=pB.r,Jm=new Bi(32768);for(var Ja=0;Ja<32768;++Ja){var Xl=(Ja&43690)>>1|(Ja&21845)<<1;Xl=(Xl&52428)>>2|(Xl&13107)<<2,Xl=(Xl&61680)>>4|(Xl&3855)<<4,Jm[Ja]=((Xl&65280)>>8|(Xl&255)<<8)>>1}var Gd=function(t,s,a){for(var r=t.length,o=0,l=new Bi(s);o<r;++o)t[o]&&++l[t[o]-1];var A=new Bi(s);for(o=1;o<s;++o)A[o]=A[o-1]+l[o-1]<<1;var u;if(a){u=new Bi(1<<s);var h=15-s;for(o=0;o<r;++o)if(t[o])for(var p=o<<4|t[o],m=s-t[o],v=A[t[o]-1]++<<m,b=v|(1<<m)-1;v<=b;++v)u[Jm[v]>>h]=p}else for(u=new Bi(r),o=0;o<r;++o)t[o]&&(u[o]=Jm[A[t[o]-1]++]>>15-t[o]);return u},zc=new yo(288);for(var Ja=0;Ja<144;++Ja)zc[Ja]=8;for(var Ja=144;Ja<256;++Ja)zc[Ja]=9;for(var Ja=256;Ja<280;++Ja)zc[Ja]=7;for(var Ja=280;Ja<288;++Ja)zc[Ja]=8;var op=new yo(32);for(var Ja=0;Ja<32;++Ja)op[Ja]=5;var fB=Gd(zc,9,0),mB=Gd(op,5,0),i1=function(t){return(t+7)/8|0},gB=function(t,s,a){return(a==null||a>t.length)&&(a=t.length),new yo(t.subarray(s,a))},hl=function(t,s,a){a<<=s&7;var r=s/8|0;t[r]|=a,t[r+1]|=a>>8},Ld=function(t,s,a){a<<=s&7;var r=s/8|0;t[r]|=a,t[r+1]|=a>>8,t[r+2]|=a>>16},am=function(t,s){for(var a=[],r=0;r<t.length;++r)t[r]&&a.push({s:r,f:t[r]});var o=a.length,l=a.slice();if(!o)return{t:l1,l:0};if(o==1){var A=new yo(a[0].s+1);return A[a[0].s]=1,{t:A,l:1}}a.sort(function(ee,K){return ee.f-K.f}),a.push({s:-1,f:25001});var u=a[0],h=a[1],p=0,m=1,v=2;for(a[0]={s:-1,f:u.f+h.f,l:u,r:h};m!=o-1;)u=a[a[p].f<a[v].f?p++:v++],h=a[p!=m&&a[p].f<a[v].f?p++:v++],a[m++]={s:-1,f:u.f+h.f,l:u,r:h};for(var b=l[0].s,r=1;r<o;++r)l[r].s>b&&(b=l[r].s);var x=new Bi(b+1),C=Zm(a[m-1],x,0);if(C>s){var r=0,Q=0,j=C-s,B=1<<j;for(l.sort(function(K,q){return x[q.s]-x[K.s]||K.f-q.f});r<o;++r){var L=l[r].s;if(x[L]>s)Q+=B-(1<<C-x[L]),x[L]=s;else break}for(Q>>=j;Q>0;){var P=l[r].s;x[P]<s?Q-=1<<s-x[P]++-1:++r}for(;r>=0&&Q;--r){var F=l[r].s;x[F]==s&&(--x[F],++Q)}C=s}return{t:new yo(x),l:C}},Zm=function(t,s,a){return t.s==-1?Math.max(Zm(t.l,s,a+1),Zm(t.r,s,a+1)):s[t.s]=a},gy=function(t){for(var s=t.length;s&&!t[--s];);for(var a=new Bi(++s),r=0,o=t[0],l=1,A=function(h){a[r++]=h},u=1;u<=s;++u)if(t[u]==o&&u!=s)++l;else{if(!o&&l>2){for(;l>138;l-=138)A(32754);l>2&&(A(l>10?l-11<<5|28690:l-3<<5|12305),l=0)}else if(l>3){for(A(o),--l;l>6;l-=6)A(8304);l>2&&(A(l-3<<5|8208),l=0)}for(;l--;)A(o);l=1,o=t[u]}return{c:a.subarray(0,r),n:s}},Qd=function(t,s){for(var a=0,r=0;r<s.length;++r)a+=t[r]*s[r];return a},o1=function(t,s,a){var r=a.length,o=i1(s+2);t[o]=r&255,t[o+1]=r>>8,t[o+2]=t[o]^255,t[o+3]=t[o+1]^255;for(var l=0;l<r;++l)t[o+l+4]=a[l];return(o+4+r)*8},xy=function(t,s,a,r,o,l,A,u,h,p,m){hl(s,m++,a),++o[256];for(var v=am(o,15),b=v.t,x=v.l,C=am(l,15),Q=C.t,j=C.l,B=gy(b),L=B.c,P=B.n,F=gy(Q),ee=F.c,K=F.n,q=new Bi(19),E=0;E<L.length;++E)++q[L[E]&31];for(var E=0;E<ee.length;++E)++q[ee[E]&31];for(var U=am(q,7),V=U.t,H=U.l,I=19;I>4&&!V[fy[I-1]];--I);var M=p+5<<3,re=Qd(o,zc)+Qd(l,op)+A,G=Qd(o,b)+Qd(l,Q)+A+14+3*I+Qd(q,V)+2*q[16]+3*q[17]+7*q[18];if(h>=0&&M<=re&&M<=G)return o1(s,m,t.subarray(h,h+p));var Z,fe,Ae,Ce;if(hl(s,m,1+(G<re)),m+=2,G<re){Z=Gd(b,x,0),fe=b,Ae=Gd(Q,j,0),Ce=Q;var te=Gd(V,H,0);hl(s,m,P-257),hl(s,m+5,K-1),hl(s,m+10,I-4),m+=14;for(var E=0;E<I;++E)hl(s,m+3*E,V[fy[E]]);m+=3*I;for(var he=[L,ee],k=0;k<2;++k)for(var T=he[k],E=0;E<T.length;++E){var z=T[E]&31;hl(s,m,te[z]),m+=V[z],z>15&&(hl(s,m,T[E]>>5&127),m+=T[E]>>12)}}else Z=fB,fe=zc,Ae=mB,Ce=op;for(var E=0;E<u;++E){var le=r[E];if(le>255){var z=le>>18&31;Ld(s,m,Z[z+257]),m+=fe[z+257],z>7&&(hl(s,m,le>>23&31),m+=Mg[z]);var X=le&31;Ld(s,m,Ae[X]),m+=Ce[X],X>3&&(Ld(s,m,le>>5&8191),m+=zg[X])}else Ld(s,m,Z[le]),m+=fe[le]}return Ld(s,m,Z[256]),m+fe[256]},xB=new Og([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),l1=new yo(0),yB=function(t,s,a,r,o,l){var A=l.z||t.length,u=new yo(r+A+5*(1+Math.ceil(A/7e3))+o),h=u.subarray(r,u.length-o),p=l.l,m=(l.r||0)&7;if(s){m&&(h[0]=l.r>>3);for(var v=xB[s-1],b=v>>13,x=v&8191,C=(1<<a)-1,Q=l.p||new Bi(32768),j=l.h||new Bi(C+1),B=Math.ceil(a/3),L=2*B,P=function(Ve){return(t[Ve]^t[Ve+1]<<B^t[Ve+2]<<L)&C},F=new Og(25e3),ee=new Bi(288),K=new Bi(32),q=0,E=0,U=l.i||0,V=0,H=l.w||0,I=0;U+2<A;++U){var M=P(U),re=U&32767,G=j[M];if(Q[re]=G,j[M]=re,H<=U){var Z=A-U;if((q>7e3||V>24576)&&(Z>423||!p)){m=xy(t,h,0,F,ee,K,E,V,I,U-I,m),V=q=E=0,I=U;for(var fe=0;fe<286;++fe)ee[fe]=0;for(var fe=0;fe<30;++fe)K[fe]=0}var Ae=2,Ce=0,te=x,he=re-G&32767;if(Z>2&&M==P(U-he))for(var k=Math.min(b,Z)-1,T=Math.min(32767,U),z=Math.min(258,Z);he<=T&&--te&&re!=G;){if(t[U+Ae]==t[U+Ae-he]){for(var le=0;le<z&&t[U+le]==t[U+le-he];++le);if(le>Ae){if(Ae=le,Ce=he,le>k)break;for(var X=Math.min(he,le-2),W=0,fe=0;fe<X;++fe){var de=U-he+fe&32767,me=Q[de],Be=de-me&32767;Be>W&&(W=Be,G=de)}}}re=G,G=Q[re],he+=re-G&32767}if(Ce){F[V++]=268435456|Xm[Ae]<<18|my[Ce];var Qe=Xm[Ae]&31,ut=my[Ce]&31;E+=Mg[Qe]+zg[ut],++ee[257+Qe],++K[ut],H=U+Ae,++q}else F[V++]=t[U],++ee[t[U]]}}for(U=Math.max(U,H);U<A;++U)F[V++]=t[U],++ee[t[U]];m=xy(t,h,p,F,ee,K,E,V,I,U-I,m),p||(l.r=m&7|h[m/8|0]<<3,m-=7,l.h=j,l.p=Q,l.i=U,l.w=H)}else{for(var U=l.w||0;U<A+p;U+=65535){var mt=U+65535;mt>=A&&(h[m/8|0]=p,mt=A),m=o1(h,m+1,t.subarray(U,mt))}l.i=A}return gB(u,0,r+i1(m)+o)},c1=function(){var t=1,s=0;return{p:function(a){for(var r=t,o=s,l=a.length|0,A=0;A!=l;){for(var u=Math.min(A+2655,l);A<u;++A)o+=r+=a[A];r=(r&65535)+15*(r>>16),o=(o&65535)+15*(o>>16)}t=r,s=o},d:function(){return t%=65521,s%=65521,(t&255)<<24|(t&65280)<<8|(s&255)<<8|s>>8}}},vB=function(t,s,a,r,o){if(!o&&(o={l:1},s.dictionary)){var l=s.dictionary.subarray(-32768),A=new yo(l.length+t.length);A.set(l),A.set(t,l.length),t=A,o.w=l.length}return yB(t,s.level==null?6:s.level,s.mem==null?o.l?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):20:12+s.mem,a,r,o)},A1=function(t,s,a){for(;a;++s)t[s]=a,a>>>=8},bB=function(t,s){var a=s.level,r=a==0?0:a<6?1:a==9?3:2;if(t[0]=120,t[1]=r<<6|(s.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,s.dictionary){var o=c1();o.p(s.dictionary),A1(t,2,o.d())}};function eg(t,s){s||(s={});var a=c1();a.p(t);var r=vB(t,s,s.dictionary?6:2,4);return bB(r,s),A1(r,r.length-4,a.d()),r}var wB=typeof TextDecoder<"u"&&new TextDecoder,jB=0;try{wB.decode(l1,{stream:!0}),jB=1}catch{}function _B(t){if(Array.isArray(t))return t}function BB(t,s){var a=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(a!=null){var r,o,l,A,u=[],h=!0,p=!1;try{if(l=(a=a.call(t)).next,s!==0)for(;!(h=(r=l.call(a)).done)&&(u.push(r.value),u.length!==s);h=!0);}catch(m){p=!0,o=m}finally{try{if(!h&&a.return!=null&&(A=a.return(),Object(A)!==A))return}finally{if(p)throw o}}return u}}function yy(t,s){(s==null||s>t.length)&&(s=t.length);for(var a=0,r=Array(s);a<s;a++)r[a]=t[a];return r}function NB(t,s){if(t){if(typeof t=="string")return yy(t,s);var a={}.toString.call(t).slice(8,-1);return a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set"?Array.from(t):a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?yy(t,s):void 0}}function CB(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function vy(t,s){return _B(t)||BB(t,s)||NB(t,s)||CB()}function by(t,s="utf8"){return new TextDecoder(s).decode(t)}const SB=new TextEncoder;function kB(t){return SB.encode(t)}const FB=1024*8,UB=(()=>{const t=new Uint8Array(4),s=new Uint32Array(t.buffer);return!((s[0]=1)&t[0])})(),nm={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class qg{buffer;byteLength;byteOffset;length;offset;lastWrittenByte;littleEndian;_data;_mark;_marks;constructor(s=FB,a={}){let r=!1;typeof s=="number"?s=new ArrayBuffer(s):(r=!0,this.lastWrittenByte=s.byteLength);const o=a.offset?a.offset>>>0:0,l=s.byteLength-o;let A=o;(ArrayBuffer.isView(s)||s instanceof qg)&&(s.byteLength!==s.buffer.byteLength&&(A=s.byteOffset+o),s=s.buffer),r?this.lastWrittenByte=l:this.lastWrittenByte=0,this.buffer=s,this.length=l,this.byteLength=l,this.byteOffset=A,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,A,l),this._mark=0,this._marks=[]}available(s=1){return this.offset+s<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(s=1){return this.offset+=s,this}back(s=1){return this.offset-=s,this}seek(s){return this.offset=s,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const s=this._marks.pop();if(s===void 0)throw new Error("Mark stack empty");return this.seek(s),this}rewind(){return this.offset=0,this}ensureAvailable(s=1){if(!this.available(s)){const r=(this.offset+s)*2,o=new Uint8Array(r);o.set(new Uint8Array(this.buffer)),this.buffer=o.buffer,this.length=r,this.byteLength=r,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(s=1){return this.readArray(s,"uint8")}readArray(s,a){const r=nm[a].BYTES_PER_ELEMENT*s,o=this.byteOffset+this.offset,l=this.buffer.slice(o,o+r);if(this.littleEndian===UB&&a!=="uint8"&&a!=="int8"){const u=new Uint8Array(this.buffer.slice(o,o+r));u.reverse();const h=new nm[a](u.buffer);return this.offset+=r,h.reverse(),h}const A=new nm[a](l);return this.offset+=r,A}readInt16(){const s=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,s}readUint16(){const s=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,s}readInt32(){const s=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,s}readUint32(){const s=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,s}readFloat32(){const s=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,s}readFloat64(){const s=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,s}readBigInt64(){const s=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,s}readBigUint64(){const s=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,s}readChar(){return String.fromCharCode(this.readInt8())}readChars(s=1){let a="";for(let r=0;r<s;r++)a+=this.readChar();return a}readUtf8(s=1){return by(this.readBytes(s))}decodeText(s=1,a="utf8"){return by(this.readBytes(s),a)}writeBoolean(s){return this.writeUint8(s?255:0),this}writeInt8(s){return this.ensureAvailable(1),this._data.setInt8(this.offset++,s),this._updateLastWrittenByte(),this}writeUint8(s){return this.ensureAvailable(1),this._data.setUint8(this.offset++,s),this._updateLastWrittenByte(),this}writeByte(s){return this.writeUint8(s)}writeBytes(s){this.ensureAvailable(s.length);for(let a=0;a<s.length;a++)this._data.setUint8(this.offset++,s[a]);return this._updateLastWrittenByte(),this}writeInt16(s){return this.ensureAvailable(2),this._data.setInt16(this.offset,s,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(s){return this.ensureAvailable(2),this._data.setUint16(this.offset,s,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(s){return this.ensureAvailable(4),this._data.setInt32(this.offset,s,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(s){return this.ensureAvailable(4),this._data.setUint32(this.offset,s,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(s){return this.ensureAvailable(4),this._data.setFloat32(this.offset,s,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(s){return this.ensureAvailable(8),this._data.setFloat64(this.offset,s,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(s){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,s,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(s){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,s,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(s){return this.writeUint8(s.charCodeAt(0))}writeChars(s){for(let a=0;a<s.length;a++)this.writeUint8(s.charCodeAt(a));return this}writeUtf8(s){return this.writeBytes(kB(s))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function zA(t){let s=t.length;for(;--s>=0;)t[s]=0}const EB=3,LB=258,d1=29,QB=256,TB=QB+1+d1,u1=30,RB=512,DB=new Array((TB+2)*2);zA(DB);const IB=new Array(u1*2);zA(IB);const HB=new Array(RB);zA(HB);const PB=new Array(LB-EB+1);zA(PB);const OB=new Array(d1);zA(OB);const MB=new Array(u1);zA(MB);const zB=(t,s,a,r)=>{let o=t&65535|0,l=t>>>16&65535|0,A=0;for(;a!==0;){A=a>2e3?2e3:a,a-=A;do o=o+s[r++]|0,l=l+o|0;while(--A);o%=65521,l%=65521}return o|l<<16|0};var tg=zB;const qB=()=>{let t,s=[];for(var a=0;a<256;a++){t=a;for(var r=0;r<8;r++)t=t&1?3988292384^t>>>1:t>>>1;s[a]=t}return s},KB=new Uint32Array(qB()),GB=(t,s,a,r)=>{const o=KB,l=r+a;t^=-1;for(let A=r;A<l;A++)t=t>>>8^o[(t^s[A])&255];return t^-1};var Ro=GB,sg={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},h1={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const VB=(t,s)=>Object.prototype.hasOwnProperty.call(t,s);var $B=function(t){const s=Array.prototype.slice.call(arguments,1);for(;s.length;){const a=s.shift();if(a){if(typeof a!="object")throw new TypeError(a+"must be non-object");for(const r in a)VB(a,r)&&(t[r]=a[r])}}return t},WB=t=>{let s=0;for(let r=0,o=t.length;r<o;r++)s+=t[r].length;const a=new Uint8Array(s);for(let r=0,o=0,l=t.length;r<l;r++){let A=t[r];a.set(A,o),o+=A.length}return a},p1={assign:$B,flattenChunks:WB};let f1=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{f1=!1}const nu=new Uint8Array(256);for(let t=0;t<256;t++)nu[t]=t>=252?6:t>=248?5:t>=240?4:t>=224?3:t>=192?2:1;nu[254]=nu[254]=1;var YB=t=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(t);let s,a,r,o,l,A=t.length,u=0;for(o=0;o<A;o++)a=t.charCodeAt(o),(a&64512)===55296&&o+1<A&&(r=t.charCodeAt(o+1),(r&64512)===56320&&(a=65536+(a-55296<<10)+(r-56320),o++)),u+=a<128?1:a<2048?2:a<65536?3:4;for(s=new Uint8Array(u),l=0,o=0;l<u;o++)a=t.charCodeAt(o),(a&64512)===55296&&o+1<A&&(r=t.charCodeAt(o+1),(r&64512)===56320&&(a=65536+(a-55296<<10)+(r-56320),o++)),a<128?s[l++]=a:a<2048?(s[l++]=192|a>>>6,s[l++]=128|a&63):a<65536?(s[l++]=224|a>>>12,s[l++]=128|a>>>6&63,s[l++]=128|a&63):(s[l++]=240|a>>>18,s[l++]=128|a>>>12&63,s[l++]=128|a>>>6&63,s[l++]=128|a&63);return s};const XB=(t,s)=>{if(s<65534&&t.subarray&&f1)return String.fromCharCode.apply(null,t.length===s?t:t.subarray(0,s));let a="";for(let r=0;r<s;r++)a+=String.fromCharCode(t[r]);return a};var JB=(t,s)=>{const a=s||t.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(t.subarray(0,s));let r,o;const l=new Array(a*2);for(o=0,r=0;r<a;){let A=t[r++];if(A<128){l[o++]=A;continue}let u=nu[A];if(u>4){l[o++]=65533,r+=u-1;continue}for(A&=u===2?31:u===3?15:7;u>1&&r<a;)A=A<<6|t[r++]&63,u--;if(u>1){l[o++]=65533;continue}A<65536?l[o++]=A:(A-=65536,l[o++]=55296|A>>10&1023,l[o++]=56320|A&1023)}return XB(l,o)},ZB=(t,s)=>{s=s||t.length,s>t.length&&(s=t.length);let a=s-1;for(;a>=0&&(t[a]&192)===128;)a--;return a<0||a===0?s:a+nu[t[a]]>s?a:s},ag={string2buf:YB,buf2string:JB,utf8border:ZB};function e5(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var t5=e5;const vh=16209,s5=16191;var a5=function(s,a){let r,o,l,A,u,h,p,m,v,b,x,C,Q,j,B,L,P,F,ee,K,q,E,U,V;const H=s.state;r=s.next_in,U=s.input,o=r+(s.avail_in-5),l=s.next_out,V=s.output,A=l-(a-s.avail_out),u=l+(s.avail_out-257),h=H.dmax,p=H.wsize,m=H.whave,v=H.wnext,b=H.window,x=H.hold,C=H.bits,Q=H.lencode,j=H.distcode,B=(1<<H.lenbits)-1,L=(1<<H.distbits)-1;e:do{C<15&&(x+=U[r++]<<C,C+=8,x+=U[r++]<<C,C+=8),P=Q[x&B];t:for(;;){if(F=P>>>24,x>>>=F,C-=F,F=P>>>16&255,F===0)V[l++]=P&65535;else if(F&16){ee=P&65535,F&=15,F&&(C<F&&(x+=U[r++]<<C,C+=8),ee+=x&(1<<F)-1,x>>>=F,C-=F),C<15&&(x+=U[r++]<<C,C+=8,x+=U[r++]<<C,C+=8),P=j[x&L];s:for(;;){if(F=P>>>24,x>>>=F,C-=F,F=P>>>16&255,F&16){if(K=P&65535,F&=15,C<F&&(x+=U[r++]<<C,C+=8,C<F&&(x+=U[r++]<<C,C+=8)),K+=x&(1<<F)-1,K>h){s.msg="invalid distance too far back",H.mode=vh;break e}if(x>>>=F,C-=F,F=l-A,K>F){if(F=K-F,F>m&&H.sane){s.msg="invalid distance too far back",H.mode=vh;break e}if(q=0,E=b,v===0){if(q+=p-F,F<ee){ee-=F;do V[l++]=b[q++];while(--F);q=l-K,E=V}}else if(v<F){if(q+=p+v-F,F-=v,F<ee){ee-=F;do V[l++]=b[q++];while(--F);if(q=0,v<ee){F=v,ee-=F;do V[l++]=b[q++];while(--F);q=l-K,E=V}}}else if(q+=v-F,F<ee){ee-=F;do V[l++]=b[q++];while(--F);q=l-K,E=V}for(;ee>2;)V[l++]=E[q++],V[l++]=E[q++],V[l++]=E[q++],ee-=3;ee&&(V[l++]=E[q++],ee>1&&(V[l++]=E[q++]))}else{q=l-K;do V[l++]=V[q++],V[l++]=V[q++],V[l++]=V[q++],ee-=3;while(ee>2);ee&&(V[l++]=V[q++],ee>1&&(V[l++]=V[q++]))}}else if((F&64)===0){P=j[(P&65535)+(x&(1<<F)-1)];continue s}else{s.msg="invalid distance code",H.mode=vh;break e}break}}else if((F&64)===0){P=Q[(P&65535)+(x&(1<<F)-1)];continue t}else if(F&32){H.mode=s5;break e}else{s.msg="invalid literal/length code",H.mode=vh;break e}break}}while(r<o&&l<u);ee=C>>3,r-=ee,C-=ee<<3,x&=(1<<C)-1,s.next_in=r,s.next_out=l,s.avail_in=r<o?5+(o-r):5-(r-o),s.avail_out=l<u?257+(u-l):257-(l-u),H.hold=x,H.bits=C};const _A=15,wy=852,jy=592,_y=0,rm=1,By=2,n5=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),r5=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),i5=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),o5=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),l5=(t,s,a,r,o,l,A,u)=>{const h=u.bits;let p=0,m=0,v=0,b=0,x=0,C=0,Q=0,j=0,B=0,L=0,P,F,ee,K,q,E=null,U;const V=new Uint16Array(_A+1),H=new Uint16Array(_A+1);let I=null,M,re,G;for(p=0;p<=_A;p++)V[p]=0;for(m=0;m<r;m++)V[s[a+m]]++;for(x=h,b=_A;b>=1&&V[b]===0;b--);if(x>b&&(x=b),b===0)return o[l++]=1<<24|64<<16|0,o[l++]=1<<24|64<<16|0,u.bits=1,0;for(v=1;v<b&&V[v]===0;v++);for(x<v&&(x=v),j=1,p=1;p<=_A;p++)if(j<<=1,j-=V[p],j<0)return-1;if(j>0&&(t===_y||b!==1))return-1;for(H[1]=0,p=1;p<_A;p++)H[p+1]=H[p]+V[p];for(m=0;m<r;m++)s[a+m]!==0&&(A[H[s[a+m]]++]=m);if(t===_y?(E=I=A,U=20):t===rm?(E=n5,I=r5,U=257):(E=i5,I=o5,U=0),L=0,m=0,p=v,q=l,C=x,Q=0,ee=-1,B=1<<x,K=B-1,t===rm&&B>wy||t===By&&B>jy)return 1;for(;;){M=p-Q,A[m]+1<U?(re=0,G=A[m]):A[m]>=U?(re=I[A[m]-U],G=E[A[m]-U]):(re=96,G=0),P=1<<p-Q,F=1<<C,v=F;do F-=P,o[q+(L>>Q)+F]=M<<24|re<<16|G|0;while(F!==0);for(P=1<<p-1;L&P;)P>>=1;if(P!==0?(L&=P-1,L+=P):L=0,m++,--V[p]===0){if(p===b)break;p=s[a+A[m]]}if(p>x&&(L&K)!==ee){for(Q===0&&(Q=x),q+=v,C=p-Q,j=1<<C;C+Q<b&&(j-=V[C+Q],!(j<=0));)C++,j<<=1;if(B+=1<<C,t===rm&&B>wy||t===By&&B>jy)return 1;ee=L&K,o[ee]=x<<24|C<<16|q-l|0}}return L!==0&&(o[q+L]=p-Q<<24|64<<16|0),u.bits=x,0};var Vd=l5;const c5=0,m1=1,g1=2,{Z_FINISH:Ny,Z_BLOCK:A5,Z_TREES:bh,Z_OK:qc,Z_STREAM_END:d5,Z_NEED_DICT:u5,Z_STREAM_ERROR:Yi,Z_DATA_ERROR:x1,Z_MEM_ERROR:y1,Z_BUF_ERROR:h5,Z_DEFLATED:Cy}=h1,Cp=16180,Sy=16181,ky=16182,Fy=16183,Uy=16184,Ey=16185,Ly=16186,Qy=16187,Ty=16188,Ry=16189,lp=16190,pl=16191,im=16192,Dy=16193,om=16194,Iy=16195,Hy=16196,Py=16197,Oy=16198,wh=16199,jh=16200,My=16201,zy=16202,qy=16203,Ky=16204,Gy=16205,lm=16206,Vy=16207,$y=16208,ln=16209,v1=16210,b1=16211,p5=852,f5=592,m5=15,g5=m5,Wy=t=>(t>>>24&255)+(t>>>8&65280)+((t&65280)<<8)+((t&255)<<24);function x5(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const Gc=t=>{if(!t)return 1;const s=t.state;return!s||s.strm!==t||s.mode<Cp||s.mode>b1?1:0},w1=t=>{if(Gc(t))return Yi;const s=t.state;return t.total_in=t.total_out=s.total=0,t.msg="",s.wrap&&(t.adler=s.wrap&1),s.mode=Cp,s.last=0,s.havedict=0,s.flags=-1,s.dmax=32768,s.head=null,s.hold=0,s.bits=0,s.lencode=s.lendyn=new Int32Array(p5),s.distcode=s.distdyn=new Int32Array(f5),s.sane=1,s.back=-1,qc},j1=t=>{if(Gc(t))return Yi;const s=t.state;return s.wsize=0,s.whave=0,s.wnext=0,w1(t)},_1=(t,s)=>{let a;if(Gc(t))return Yi;const r=t.state;return s<0?(a=0,s=-s):(a=(s>>4)+5,s<48&&(s&=15)),s&&(s<8||s>15)?Yi:(r.window!==null&&r.wbits!==s&&(r.window=null),r.wrap=a,r.wbits=s,j1(t))},B1=(t,s)=>{if(!t)return Yi;const a=new x5;t.state=a,a.strm=t,a.window=null,a.mode=Cp;const r=_1(t,s);return r!==qc&&(t.state=null),r},y5=t=>B1(t,g5);let Yy=!0,cm,Am;const v5=t=>{if(Yy){cm=new Int32Array(512),Am=new Int32Array(32);let s=0;for(;s<144;)t.lens[s++]=8;for(;s<256;)t.lens[s++]=9;for(;s<280;)t.lens[s++]=7;for(;s<288;)t.lens[s++]=8;for(Vd(m1,t.lens,0,288,cm,0,t.work,{bits:9}),s=0;s<32;)t.lens[s++]=5;Vd(g1,t.lens,0,32,Am,0,t.work,{bits:5}),Yy=!1}t.lencode=cm,t.lenbits=9,t.distcode=Am,t.distbits=5},N1=(t,s,a,r)=>{let o;const l=t.state;return l.window===null&&(l.wsize=1<<l.wbits,l.wnext=0,l.whave=0,l.window=new Uint8Array(l.wsize)),r>=l.wsize?(l.window.set(s.subarray(a-l.wsize,a),0),l.wnext=0,l.whave=l.wsize):(o=l.wsize-l.wnext,o>r&&(o=r),l.window.set(s.subarray(a-r,a-r+o),l.wnext),r-=o,r?(l.window.set(s.subarray(a-r,a),0),l.wnext=r,l.whave=l.wsize):(l.wnext+=o,l.wnext===l.wsize&&(l.wnext=0),l.whave<l.wsize&&(l.whave+=o))),0},b5=(t,s)=>{let a,r,o,l,A,u,h,p,m,v,b,x,C,Q,j=0,B,L,P,F,ee,K,q,E;const U=new Uint8Array(4);let V,H;const I=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(Gc(t)||!t.output||!t.input&&t.avail_in!==0)return Yi;a=t.state,a.mode===pl&&(a.mode=im),A=t.next_out,o=t.output,h=t.avail_out,l=t.next_in,r=t.input,u=t.avail_in,p=a.hold,m=a.bits,v=u,b=h,E=qc;e:for(;;)switch(a.mode){case Cp:if(a.wrap===0){a.mode=im;break}for(;m<16;){if(u===0)break e;u--,p+=r[l++]<<m,m+=8}if(a.wrap&2&&p===35615){a.wbits===0&&(a.wbits=15),a.check=0,U[0]=p&255,U[1]=p>>>8&255,a.check=Ro(a.check,U,2,0),p=0,m=0,a.mode=Sy;break}if(a.head&&(a.head.done=!1),!(a.wrap&1)||(((p&255)<<8)+(p>>8))%31){t.msg="incorrect header check",a.mode=ln;break}if((p&15)!==Cy){t.msg="unknown compression method",a.mode=ln;break}if(p>>>=4,m-=4,q=(p&15)+8,a.wbits===0&&(a.wbits=q),q>15||q>a.wbits){t.msg="invalid window size",a.mode=ln;break}a.dmax=1<<a.wbits,a.flags=0,t.adler=a.check=1,a.mode=p&512?Ry:pl,p=0,m=0;break;case Sy:for(;m<16;){if(u===0)break e;u--,p+=r[l++]<<m,m+=8}if(a.flags=p,(a.flags&255)!==Cy){t.msg="unknown compression method",a.mode=ln;break}if(a.flags&57344){t.msg="unknown header flags set",a.mode=ln;break}a.head&&(a.head.text=p>>8&1),a.flags&512&&a.wrap&4&&(U[0]=p&255,U[1]=p>>>8&255,a.check=Ro(a.check,U,2,0)),p=0,m=0,a.mode=ky;case ky:for(;m<32;){if(u===0)break e;u--,p+=r[l++]<<m,m+=8}a.head&&(a.head.time=p),a.flags&512&&a.wrap&4&&(U[0]=p&255,U[1]=p>>>8&255,U[2]=p>>>16&255,U[3]=p>>>24&255,a.check=Ro(a.check,U,4,0)),p=0,m=0,a.mode=Fy;case Fy:for(;m<16;){if(u===0)break e;u--,p+=r[l++]<<m,m+=8}a.head&&(a.head.xflags=p&255,a.head.os=p>>8),a.flags&512&&a.wrap&4&&(U[0]=p&255,U[1]=p>>>8&255,a.check=Ro(a.check,U,2,0)),p=0,m=0,a.mode=Uy;case Uy:if(a.flags&1024){for(;m<16;){if(u===0)break e;u--,p+=r[l++]<<m,m+=8}a.length=p,a.head&&(a.head.extra_len=p),a.flags&512&&a.wrap&4&&(U[0]=p&255,U[1]=p>>>8&255,a.check=Ro(a.check,U,2,0)),p=0,m=0}else a.head&&(a.head.extra=null);a.mode=Ey;case Ey:if(a.flags&1024&&(x=a.length,x>u&&(x=u),x&&(a.head&&(q=a.head.extra_len-a.length,a.head.extra||(a.head.extra=new Uint8Array(a.head.extra_len)),a.head.extra.set(r.subarray(l,l+x),q)),a.flags&512&&a.wrap&4&&(a.check=Ro(a.check,r,x,l)),u-=x,l+=x,a.length-=x),a.length))break e;a.length=0,a.mode=Ly;case Ly:if(a.flags&2048){if(u===0)break e;x=0;do q=r[l+x++],a.head&&q&&a.length<65536&&(a.head.name+=String.fromCharCode(q));while(q&&x<u);if(a.flags&512&&a.wrap&4&&(a.check=Ro(a.check,r,x,l)),u-=x,l+=x,q)break e}else a.head&&(a.head.name=null);a.length=0,a.mode=Qy;case Qy:if(a.flags&4096){if(u===0)break e;x=0;do q=r[l+x++],a.head&&q&&a.length<65536&&(a.head.comment+=String.fromCharCode(q));while(q&&x<u);if(a.flags&512&&a.wrap&4&&(a.check=Ro(a.check,r,x,l)),u-=x,l+=x,q)break e}else a.head&&(a.head.comment=null);a.mode=Ty;case Ty:if(a.flags&512){for(;m<16;){if(u===0)break e;u--,p+=r[l++]<<m,m+=8}if(a.wrap&4&&p!==(a.check&65535)){t.msg="header crc mismatch",a.mode=ln;break}p=0,m=0}a.head&&(a.head.hcrc=a.flags>>9&1,a.head.done=!0),t.adler=a.check=0,a.mode=pl;break;case Ry:for(;m<32;){if(u===0)break e;u--,p+=r[l++]<<m,m+=8}t.adler=a.check=Wy(p),p=0,m=0,a.mode=lp;case lp:if(a.havedict===0)return t.next_out=A,t.avail_out=h,t.next_in=l,t.avail_in=u,a.hold=p,a.bits=m,u5;t.adler=a.check=1,a.mode=pl;case pl:if(s===A5||s===bh)break e;case im:if(a.last){p>>>=m&7,m-=m&7,a.mode=lm;break}for(;m<3;){if(u===0)break e;u--,p+=r[l++]<<m,m+=8}switch(a.last=p&1,p>>>=1,m-=1,p&3){case 0:a.mode=Dy;break;case 1:if(v5(a),a.mode=wh,s===bh){p>>>=2,m-=2;break e}break;case 2:a.mode=Hy;break;case 3:t.msg="invalid block type",a.mode=ln}p>>>=2,m-=2;break;case Dy:for(p>>>=m&7,m-=m&7;m<32;){if(u===0)break e;u--,p+=r[l++]<<m,m+=8}if((p&65535)!==(p>>>16^65535)){t.msg="invalid stored block lengths",a.mode=ln;break}if(a.length=p&65535,p=0,m=0,a.mode=om,s===bh)break e;case om:a.mode=Iy;case Iy:if(x=a.length,x){if(x>u&&(x=u),x>h&&(x=h),x===0)break e;o.set(r.subarray(l,l+x),A),u-=x,l+=x,h-=x,A+=x,a.length-=x;break}a.mode=pl;break;case Hy:for(;m<14;){if(u===0)break e;u--,p+=r[l++]<<m,m+=8}if(a.nlen=(p&31)+257,p>>>=5,m-=5,a.ndist=(p&31)+1,p>>>=5,m-=5,a.ncode=(p&15)+4,p>>>=4,m-=4,a.nlen>286||a.ndist>30){t.msg="too many length or distance symbols",a.mode=ln;break}a.have=0,a.mode=Py;case Py:for(;a.have<a.ncode;){for(;m<3;){if(u===0)break e;u--,p+=r[l++]<<m,m+=8}a.lens[I[a.have++]]=p&7,p>>>=3,m-=3}for(;a.have<19;)a.lens[I[a.have++]]=0;if(a.lencode=a.lendyn,a.lenbits=7,V={bits:a.lenbits},E=Vd(c5,a.lens,0,19,a.lencode,0,a.work,V),a.lenbits=V.bits,E){t.msg="invalid code lengths set",a.mode=ln;break}a.have=0,a.mode=Oy;case Oy:for(;a.have<a.nlen+a.ndist;){for(;j=a.lencode[p&(1<<a.lenbits)-1],B=j>>>24,L=j>>>16&255,P=j&65535,!(B<=m);){if(u===0)break e;u--,p+=r[l++]<<m,m+=8}if(P<16)p>>>=B,m-=B,a.lens[a.have++]=P;else{if(P===16){for(H=B+2;m<H;){if(u===0)break e;u--,p+=r[l++]<<m,m+=8}if(p>>>=B,m-=B,a.have===0){t.msg="invalid bit length repeat",a.mode=ln;break}q=a.lens[a.have-1],x=3+(p&3),p>>>=2,m-=2}else if(P===17){for(H=B+3;m<H;){if(u===0)break e;u--,p+=r[l++]<<m,m+=8}p>>>=B,m-=B,q=0,x=3+(p&7),p>>>=3,m-=3}else{for(H=B+7;m<H;){if(u===0)break e;u--,p+=r[l++]<<m,m+=8}p>>>=B,m-=B,q=0,x=11+(p&127),p>>>=7,m-=7}if(a.have+x>a.nlen+a.ndist){t.msg="invalid bit length repeat",a.mode=ln;break}for(;x--;)a.lens[a.have++]=q}}if(a.mode===ln)break;if(a.lens[256]===0){t.msg="invalid code -- missing end-of-block",a.mode=ln;break}if(a.lenbits=9,V={bits:a.lenbits},E=Vd(m1,a.lens,0,a.nlen,a.lencode,0,a.work,V),a.lenbits=V.bits,E){t.msg="invalid literal/lengths set",a.mode=ln;break}if(a.distbits=6,a.distcode=a.distdyn,V={bits:a.distbits},E=Vd(g1,a.lens,a.nlen,a.ndist,a.distcode,0,a.work,V),a.distbits=V.bits,E){t.msg="invalid distances set",a.mode=ln;break}if(a.mode=wh,s===bh)break e;case wh:a.mode=jh;case jh:if(u>=6&&h>=258){t.next_out=A,t.avail_out=h,t.next_in=l,t.avail_in=u,a.hold=p,a.bits=m,a5(t,b),A=t.next_out,o=t.output,h=t.avail_out,l=t.next_in,r=t.input,u=t.avail_in,p=a.hold,m=a.bits,a.mode===pl&&(a.back=-1);break}for(a.back=0;j=a.lencode[p&(1<<a.lenbits)-1],B=j>>>24,L=j>>>16&255,P=j&65535,!(B<=m);){if(u===0)break e;u--,p+=r[l++]<<m,m+=8}if(L&&(L&240)===0){for(F=B,ee=L,K=P;j=a.lencode[K+((p&(1<<F+ee)-1)>>F)],B=j>>>24,L=j>>>16&255,P=j&65535,!(F+B<=m);){if(u===0)break e;u--,p+=r[l++]<<m,m+=8}p>>>=F,m-=F,a.back+=F}if(p>>>=B,m-=B,a.back+=B,a.length=P,L===0){a.mode=Gy;break}if(L&32){a.back=-1,a.mode=pl;break}if(L&64){t.msg="invalid literal/length code",a.mode=ln;break}a.extra=L&15,a.mode=My;case My:if(a.extra){for(H=a.extra;m<H;){if(u===0)break e;u--,p+=r[l++]<<m,m+=8}a.length+=p&(1<<a.extra)-1,p>>>=a.extra,m-=a.extra,a.back+=a.extra}a.was=a.length,a.mode=zy;case zy:for(;j=a.distcode[p&(1<<a.distbits)-1],B=j>>>24,L=j>>>16&255,P=j&65535,!(B<=m);){if(u===0)break e;u--,p+=r[l++]<<m,m+=8}if((L&240)===0){for(F=B,ee=L,K=P;j=a.distcode[K+((p&(1<<F+ee)-1)>>F)],B=j>>>24,L=j>>>16&255,P=j&65535,!(F+B<=m);){if(u===0)break e;u--,p+=r[l++]<<m,m+=8}p>>>=F,m-=F,a.back+=F}if(p>>>=B,m-=B,a.back+=B,L&64){t.msg="invalid distance code",a.mode=ln;break}a.offset=P,a.extra=L&15,a.mode=qy;case qy:if(a.extra){for(H=a.extra;m<H;){if(u===0)break e;u--,p+=r[l++]<<m,m+=8}a.offset+=p&(1<<a.extra)-1,p>>>=a.extra,m-=a.extra,a.back+=a.extra}if(a.offset>a.dmax){t.msg="invalid distance too far back",a.mode=ln;break}a.mode=Ky;case Ky:if(h===0)break e;if(x=b-h,a.offset>x){if(x=a.offset-x,x>a.whave&&a.sane){t.msg="invalid distance too far back",a.mode=ln;break}x>a.wnext?(x-=a.wnext,C=a.wsize-x):C=a.wnext-x,x>a.length&&(x=a.length),Q=a.window}else Q=o,C=A-a.offset,x=a.length;x>h&&(x=h),h-=x,a.length-=x;do o[A++]=Q[C++];while(--x);a.length===0&&(a.mode=jh);break;case Gy:if(h===0)break e;o[A++]=a.length,h--,a.mode=jh;break;case lm:if(a.wrap){for(;m<32;){if(u===0)break e;u--,p|=r[l++]<<m,m+=8}if(b-=h,t.total_out+=b,a.total+=b,a.wrap&4&&b&&(t.adler=a.check=a.flags?Ro(a.check,o,b,A-b):tg(a.check,o,b,A-b)),b=h,a.wrap&4&&(a.flags?p:Wy(p))!==a.check){t.msg="incorrect data check",a.mode=ln;break}p=0,m=0}a.mode=Vy;case Vy:if(a.wrap&&a.flags){for(;m<32;){if(u===0)break e;u--,p+=r[l++]<<m,m+=8}if(a.wrap&4&&p!==(a.total&4294967295)){t.msg="incorrect length check",a.mode=ln;break}p=0,m=0}a.mode=$y;case $y:E=d5;break e;case ln:E=x1;break e;case v1:return y1;case b1:default:return Yi}return t.next_out=A,t.avail_out=h,t.next_in=l,t.avail_in=u,a.hold=p,a.bits=m,(a.wsize||b!==t.avail_out&&a.mode<ln&&(a.mode<lm||s!==Ny))&&N1(t,t.output,t.next_out,b-t.avail_out),v-=t.avail_in,b-=t.avail_out,t.total_in+=v,t.total_out+=b,a.total+=b,a.wrap&4&&b&&(t.adler=a.check=a.flags?Ro(a.check,o,b,t.next_out-b):tg(a.check,o,b,t.next_out-b)),t.data_type=a.bits+(a.last?64:0)+(a.mode===pl?128:0)+(a.mode===wh||a.mode===om?256:0),(v===0&&b===0||s===Ny)&&E===qc&&(E=h5),E},w5=t=>{if(Gc(t))return Yi;let s=t.state;return s.window&&(s.window=null),t.state=null,qc},j5=(t,s)=>{if(Gc(t))return Yi;const a=t.state;return(a.wrap&2)===0?Yi:(a.head=s,s.done=!1,qc)},_5=(t,s)=>{const a=s.length;let r,o,l;return Gc(t)||(r=t.state,r.wrap!==0&&r.mode!==lp)?Yi:r.mode===lp&&(o=1,o=tg(o,s,a,0),o!==r.check)?x1:(l=N1(t,s,a,a),l?(r.mode=v1,y1):(r.havedict=1,qc))};var B5=j1,N5=_1,C5=w1,S5=y5,k5=B1,F5=b5,U5=w5,E5=j5,L5=_5,Q5="pako inflate (from Nodeca project)",gl={inflateReset:B5,inflateReset2:N5,inflateResetKeep:C5,inflateInit:S5,inflateInit2:k5,inflate:F5,inflateEnd:U5,inflateGetHeader:E5,inflateSetDictionary:L5,inflateInfo:Q5};function T5(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var R5=T5;const C1=Object.prototype.toString,{Z_NO_FLUSH:D5,Z_FINISH:I5,Z_OK:ru,Z_STREAM_END:dm,Z_NEED_DICT:um,Z_STREAM_ERROR:H5,Z_DATA_ERROR:Xy,Z_MEM_ERROR:P5}=h1;function mu(t){this.options=p1.assign({chunkSize:1024*64,windowBits:15,to:""},t||{});const s=this.options;s.raw&&s.windowBits>=0&&s.windowBits<16&&(s.windowBits=-s.windowBits,s.windowBits===0&&(s.windowBits=-15)),s.windowBits>=0&&s.windowBits<16&&!(t&&t.windowBits)&&(s.windowBits+=32),s.windowBits>15&&s.windowBits<48&&(s.windowBits&15)===0&&(s.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new t5,this.strm.avail_out=0;let a=gl.inflateInit2(this.strm,s.windowBits);if(a!==ru)throw new Error(sg[a]);if(this.header=new R5,gl.inflateGetHeader(this.strm,this.header),s.dictionary&&(typeof s.dictionary=="string"?s.dictionary=ag.string2buf(s.dictionary):C1.call(s.dictionary)==="[object ArrayBuffer]"&&(s.dictionary=new Uint8Array(s.dictionary)),s.raw&&(a=gl.inflateSetDictionary(this.strm,s.dictionary),a!==ru)))throw new Error(sg[a])}mu.prototype.push=function(t,s){const a=this.strm,r=this.options.chunkSize,o=this.options.dictionary;let l,A,u;if(this.ended)return!1;for(s===~~s?A=s:A=s===!0?I5:D5,C1.call(t)==="[object ArrayBuffer]"?a.input=new Uint8Array(t):a.input=t,a.next_in=0,a.avail_in=a.input.length;;){for(a.avail_out===0&&(a.output=new Uint8Array(r),a.next_out=0,a.avail_out=r),l=gl.inflate(a,A),l===um&&o&&(l=gl.inflateSetDictionary(a,o),l===ru?l=gl.inflate(a,A):l===Xy&&(l=um));a.avail_in>0&&l===dm&&a.state.wrap>0&&t[a.next_in]!==0;)gl.inflateReset(a),l=gl.inflate(a,A);switch(l){case H5:case Xy:case um:case P5:return this.onEnd(l),this.ended=!0,!1}if(u=a.avail_out,a.next_out&&(a.avail_out===0||l===dm))if(this.options.to==="string"){let h=ag.utf8border(a.output,a.next_out),p=a.next_out-h,m=ag.buf2string(a.output,h);a.next_out=p,a.avail_out=r-p,p&&a.output.set(a.output.subarray(h,h+p),0),this.onData(m)}else this.onData(a.output.length===a.next_out?a.output:a.output.subarray(0,a.next_out));if(!(l===ru&&u===0)){if(l===dm)return l=gl.inflateEnd(this.strm),this.onEnd(l),this.ended=!0,!0;if(a.avail_in===0)break}}return!0};mu.prototype.onData=function(t){this.chunks.push(t)};mu.prototype.onEnd=function(t){t===ru&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=p1.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};function O5(t,s){const a=new mu(s);if(a.push(t),a.err)throw a.msg||sg[a.err];return a.result}var M5=mu,z5=O5,q5={Inflate:M5,inflate:z5};const{Inflate:K5,inflate:G5}=q5;var Jy=K5,V5=G5;const S1=[];for(let t=0;t<256;t++){let s=t;for(let a=0;a<8;a++)s&1?s=3988292384^s>>>1:s=s>>>1;S1[t]=s}const Zy=4294967295;function $5(t,s,a){let r=t;for(let o=0;o<a;o++)r=S1[(r^s[o])&255]^r>>>8;return r}function W5(t,s){return($5(Zy,t,s)^Zy)>>>0}function ev(t,s,a){const r=t.readUint32(),o=W5(new Uint8Array(t.buffer,t.byteOffset+t.offset-s-4,s),s);if(o!==r)throw new Error(`CRC mismatch for chunk ${a}. Expected ${r}, found ${o}`)}function k1(t,s,a){for(let r=0;r<a;r++)s[r]=t[r]}function F1(t,s,a,r){let o=0;for(;o<r;o++)s[o]=t[o];for(;o<a;o++)s[o]=t[o]+s[o-r]&255}function U1(t,s,a,r){let o=0;if(a.length===0)for(;o<r;o++)s[o]=t[o];else for(;o<r;o++)s[o]=t[o]+a[o]&255}function E1(t,s,a,r,o){let l=0;if(a.length===0){for(;l<o;l++)s[l]=t[l];for(;l<r;l++)s[l]=t[l]+(s[l-o]>>1)&255}else{for(;l<o;l++)s[l]=t[l]+(a[l]>>1)&255;for(;l<r;l++)s[l]=t[l]+(s[l-o]+a[l]>>1)&255}}function L1(t,s,a,r,o){let l=0;if(a.length===0){for(;l<o;l++)s[l]=t[l];for(;l<r;l++)s[l]=t[l]+s[l-o]&255}else{for(;l<o;l++)s[l]=t[l]+a[l]&255;for(;l<r;l++)s[l]=t[l]+Y5(s[l-o],a[l],a[l-o])&255}}function Y5(t,s,a){const r=t+s-a,o=Math.abs(r-t),l=Math.abs(r-s),A=Math.abs(r-a);return o<=l&&o<=A?t:l<=A?s:a}function X5(t,s,a,r,o,l){switch(t){case 0:k1(s,a,o);break;case 1:F1(s,a,o,l);break;case 2:U1(s,a,r,o);break;case 3:E1(s,a,r,o,l);break;case 4:L1(s,a,r,o,l);break;default:throw new Error(`Unsupported filter: ${t}`)}}const J5=new Uint16Array([255]),Z5=new Uint8Array(J5.buffer),eN=Z5[0]===255;function tN(t){const{data:s,width:a,height:r,channels:o,depth:l}=t,A=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],u=Math.ceil(l/8)*o,h=new Uint8Array(r*a*u);let p=0;for(let m=0;m<7;m++){const v=A[m],b=Math.ceil((a-v.x)/v.xStep),x=Math.ceil((r-v.y)/v.yStep);if(b<=0||x<=0)continue;const C=b*u,Q=new Uint8Array(C);for(let j=0;j<x;j++){const B=s[p++],L=s.subarray(p,p+C);p+=C;const P=new Uint8Array(C);X5(B,L,P,Q,C,u),Q.set(P);for(let F=0;F<b;F++){const ee=v.x+F*v.xStep,K=v.y+j*v.yStep;if(!(ee>=a||K>=r))for(let q=0;q<u;q++)h[(K*a+ee)*u+q]=P[F*u+q]}}}if(l===16){const m=new Uint16Array(h.buffer);if(eN)for(let v=0;v<m.length;v++)m[v]=sN(m[v]);return m}else return h}function sN(t){return(t&255)<<8|t>>8&255}const aN=new Uint16Array([255]),nN=new Uint8Array(aN.buffer),rN=nN[0]===255,iN=new Uint8Array(0);function tv(t){const{data:s,width:a,height:r,channels:o,depth:l}=t,A=Math.ceil(l/8)*o,u=Math.ceil(l/8*o*a),h=new Uint8Array(r*u);let p=iN,m=0,v,b;for(let x=0;x<r;x++){switch(v=s.subarray(m+1,m+1+u),b=h.subarray(x*u,(x+1)*u),s[m]){case 0:k1(v,b,u);break;case 1:F1(v,b,u,A);break;case 2:U1(v,b,p,u);break;case 3:E1(v,b,p,u,A);break;case 4:L1(v,b,p,u,A);break;default:throw new Error(`Unsupported filter: ${s[m]}`)}p=b,m+=u+1}if(l===16){const x=new Uint16Array(h.buffer);if(rN)for(let C=0;C<x.length;C++)x[C]=oN(x[C]);return x}else return h}function oN(t){return(t&255)<<8|t>>8&255}const ep=Uint8Array.of(137,80,78,71,13,10,26,10);function sv(t){if(!lN(t.readBytes(ep.length)))throw new Error("wrong PNG signature")}function lN(t){if(t.length<ep.length)return!1;for(let s=0;s<ep.length;s++)if(t[s]!==ep[s])return!1;return!0}const cN="tEXt",AN=0,Q1=new TextDecoder("latin1");function dN(t){if(hN(t),t.length===0||t.length>79)throw new Error("keyword length must be between 1 and 79")}const uN=/^[\u0000-\u00FF]*$/;function hN(t){if(!uN.test(t))throw new Error("invalid latin1 text")}function pN(t,s,a){const r=T1(s);t[r]=fN(s,a-r.length-1)}function T1(t){for(t.mark();t.readByte()!==AN;);const s=t.offset;t.reset();const a=Q1.decode(t.readBytes(s-t.offset-1));return t.skip(1),dN(a),a}function fN(t,s){return Q1.decode(t.readBytes(s))}const ji={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},hm={UNKNOWN:-1,DEFLATE:0},av={UNKNOWN:-1,ADAPTIVE:0},pm={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},_h={NONE:0,BACKGROUND:1,PREVIOUS:2},fm={SOURCE:0,OVER:1};class mN extends qg{_checkCrc;_inflator;_png;_apng;_end;_hasPalette;_palette;_hasTransparency;_transparency;_compressionMethod;_filterMethod;_interlaceMethod;_colorType;_isAnimated;_numberOfFrames;_numberOfPlays;_frames;_writingDataChunks;constructor(s,a={}){super(s);const{checkCrc:r=!1}=a;this._checkCrc=r,this._inflator=new Jy,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=hm.UNKNOWN,this._filterMethod=av.UNKNOWN,this._interlaceMethod=pm.UNKNOWN,this._colorType=ji.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(sv(this);!this._end;){const s=this.readUint32(),a=this.readChars(4);this.decodeChunk(s,a)}return this.decodeImage(),this._png}decodeApng(){for(sv(this);!this._end;){const s=this.readUint32(),a=this.readChars(4);this.decodeApngChunk(s,a)}return this.decodeApngImage(),this._apng}decodeChunk(s,a){const r=this.offset;switch(a){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(s);break;case"IDAT":this.decodeIDAT(s);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(s);break;case"iCCP":this.decodeiCCP(s);break;case cN:pN(this._png.text,this,s);break;case"pHYs":this.decodepHYs();break;default:this.skip(s);break}if(this.offset-r!==s)throw new Error(`Length mismatch while decoding chunk ${a}`);this._checkCrc?ev(this,s+4,a):this.skip(4)}decodeApngChunk(s,a){const r=this.offset;switch(a!=="fdAT"&&a!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),a){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(s);break;default:this.decodeChunk(s,a),this.offset=r+s;break}if(this.offset-r!==s)throw new Error(`Length mismatch while decoding chunk ${a}`);this._checkCrc?ev(this,s+4,a):this.skip(4)}decodeIHDR(){const s=this._png;s.width=this.readUint32(),s.height=this.readUint32(),s.depth=gN(this.readUint8());const a=this.readUint8();this._colorType=a;let r;switch(a){case ji.GREYSCALE:r=1;break;case ji.TRUECOLOUR:r=3;break;case ji.INDEXED_COLOUR:r=1;break;case ji.GREYSCALE_ALPHA:r=2;break;case ji.TRUECOLOUR_ALPHA:r=4;break;case ji.UNKNOWN:default:throw new Error(`Unknown color type: ${a}`)}if(this._png.channels=r,this._compressionMethod=this.readUint8(),this._compressionMethod!==hm.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const s={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(s)}decodePLTE(s){if(s%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${s}`);const a=s/3;this._hasPalette=!0;const r=[];this._palette=r;for(let o=0;o<a;o++)r.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(s){this._writingDataChunks=!0;const a=s,r=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,r,a)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(s)}decodeFDAT(s){this._writingDataChunks=!0;let a=s,r=this.offset+this.byteOffset;if(r+=4,a-=4,this._inflator.push(new Uint8Array(this.buffer,r,a)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(s)}decodetRNS(s){switch(this._colorType){case ji.GREYSCALE:case ji.TRUECOLOUR:{if(s%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${s}`);if(s/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${s/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(s/2);for(let a=0;a<s/2;a++)this._transparency[a]=this.readUint16();break}case ji.INDEXED_COLOUR:{if(s>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${s} vs ${this._palette.length})`);let a=0;for(;a<s;a++){const r=this.readByte();this._palette[a].push(r)}for(;a<this._palette.length;a++)this._palette[a].push(255);break}case ji.UNKNOWN:case ji.GREYSCALE_ALPHA:case ji.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(s){const a=T1(this),r=this.readUint8();if(r!==hm.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${r}`);const o=this.readBytes(s-a.length-2);this._png.iccEmbeddedProfile={name:a,profile:V5(o)}}decodepHYs(){const s=this.readUint32(),a=this.readUint32(),r=this.readByte();this._png.resolution={x:s,y:a,unit:r}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let s=0;s<this._numberOfFrames;s++){const a={sequenceNumber:this._frames[s].sequenceNumber,delayNumber:this._frames[s].delayNumber,delayDenominator:this._frames[s].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},r=this._frames.at(s);if(r){if(r.data=tv({data:r.data,width:r.width,height:r.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),s===0||r.xOffset===0&&r.yOffset===0&&r.width===this._png.width&&r.height===this._png.height)a.data=r.data;else{const o=this._apng.frames.at(s-1);this.disposeFrame(r,o,a),this.addFrameDataToCanvas(a,r)}this._apng.frames.push(a)}}return this._apng}disposeFrame(s,a,r){switch(s.disposeOp){case _h.NONE:break;case _h.BACKGROUND:for(let o=0;o<this._png.height;o++)for(let l=0;l<this._png.width;l++){const A=(o*s.width+l)*this._png.channels;for(let u=0;u<this._png.channels;u++)r.data[A+u]=0}break;case _h.PREVIOUS:r.data.set(a.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(s,a){const r=1<<this._png.depth,o=(l,A)=>{const u=((l+a.yOffset)*this._png.width+a.xOffset+A)*this._png.channels,h=(l*a.width+A)*this._png.channels;return{index:u,frameIndex:h}};switch(a.blendOp){case fm.SOURCE:for(let l=0;l<a.height;l++)for(let A=0;A<a.width;A++){const{index:u,frameIndex:h}=o(l,A);for(let p=0;p<this._png.channels;p++)s.data[u+p]=a.data[h+p]}break;case fm.OVER:for(let l=0;l<a.height;l++)for(let A=0;A<a.width;A++){const{index:u,frameIndex:h}=o(l,A);for(let p=0;p<this._png.channels;p++){const m=a.data[h+this._png.channels-1]/r,v=p%(this._png.channels-1)===0?1:a.data[h+p],b=Math.floor(m*v+(1-m)*s.data[u+p]);s.data[u+p]+=b}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const s=this._isAnimated?(this._frames?.at(0)).data:this._inflator.result;if(this._filterMethod!==av.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===pm.NO_INTERLACE)this._png.data=tv({data:s,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===pm.ADAM7)this._png.data=tN({data:s,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const s=this._inflator.result,a=this._frames.at(-1);a?a.data=s:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:_h.NONE,blendOp:fm.SOURCE,data:s}),this._inflator=new Jy,this._writingDataChunks=!1}}function gN(t){if(t!==1&&t!==2&&t!==4&&t!==8&&t!==16)throw new Error(`invalid bit depth: ${t}`);return t}var nv;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.METRE=1]="METRE"})(nv||(nv={}));function xN(t,s){return new mN(t,s).decode()}var Es=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function mm(){Es.console&&typeof Es.console.log=="function"&&Es.console.log.apply(Es.console,arguments)}var Oa={log:mm,warn:function(t){Es.console&&(typeof Es.console.warn=="function"?Es.console.warn.apply(Es.console,arguments):mm.call(null,arguments))},error:function(t){Es.console&&(typeof Es.console.error=="function"?Es.console.error.apply(Es.console,arguments):mm(t))}};function gm(t,s,a){var r=new XMLHttpRequest;r.open("GET",t),r.responseType="blob",r.onload=function(){Lc(r.response,s,a)},r.onerror=function(){Oa.error("could not download file")},r.send()}function rv(t){var s=new XMLHttpRequest;s.open("HEAD",t,!1);try{s.send()}catch{}return s.status>=200&&s.status<=299}function Bh(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{var s=document.createEvent("MouseEvents");s.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(s)}}var Lc=Es.saveAs||((typeof window>"u"?"undefined":Ca(window))!=="object"||window!==Es?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(t,s,a){var r=Es.URL||Es.webkitURL,o=document.createElement("a");s=s||t.name||"download",o.download=s,o.rel="noopener",typeof t=="string"?(o.href=t,o.origin!==location.origin?rv(o.href)?gm(t,s,a):Bh(o,o.target="_blank"):Bh(o)):(o.href=r.createObjectURL(t),setTimeout(function(){r.revokeObjectURL(o.href)},4e4),setTimeout(function(){Bh(o)},0))}:"msSaveOrOpenBlob"in navigator?function(t,s,a){if(s=s||t.name||"download",typeof t=="string")if(rv(t))gm(t,s,a);else{var r=document.createElement("a");r.href=t,r.target="_blank",setTimeout(function(){Bh(r)})}else navigator.msSaveOrOpenBlob(function(o,l){return l===void 0?l={autoBom:!1}:Ca(l)!=="object"&&(Oa.warn("Deprecated: Expected third argument to be a object"),l={autoBom:!l}),l.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(o.type)?new Blob(["\uFEFF",o],{type:o.type}):o}(t,a),s)}:function(t,s,a,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof t=="string")return gm(t,s,a);var o=t.type==="application/octet-stream",l=/constructor/i.test(Es.HTMLElement)||Es.safari,A=/CriOS\/[\d]+/.test(navigator.userAgent);if((A||o&&l)&&(typeof FileReader>"u"?"undefined":Ca(FileReader))==="object"){var u=new FileReader;u.onloadend=function(){var m=u.result;m=A?m:m.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=m:location=m,r=null},u.readAsDataURL(t)}else{var h=Es.URL||Es.webkitURL,p=h.createObjectURL(t);r?r.location=p:location.href=p,r=null,setTimeout(function(){h.revokeObjectURL(p)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function R1(t){var s;t=t||"",this.ok=!1,t.charAt(0)=="#"&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var a=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(u){return[parseInt(u[1]),parseInt(u[2]),parseInt(u[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(u){return[parseInt(u[1],16),parseInt(u[2],16),parseInt(u[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(u){return[parseInt(u[1]+u[1],16),parseInt(u[2]+u[2],16),parseInt(u[3]+u[3],16)]}}],r=0;r<a.length;r++){var o=a[r].re,l=a[r].process,A=o.exec(t);A&&(s=l(A),this.r=s[0],this.g=s[1],this.b=s[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var u=this.r.toString(16),h=this.g.toString(16),p=this.b.toString(16);return u.length==1&&(u="0"+u),h.length==1&&(h="0"+h),p.length==1&&(p="0"+p),"#"+u+h+p}}var tp=Es.atob.bind(Es),iv=Es.btoa.bind(Es);/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function xm(t,s){var a=t[0],r=t[1],o=t[2],l=t[3];a=Sr(a,r,o,l,s[0],7,-680876936),l=Sr(l,a,r,o,s[1],12,-389564586),o=Sr(o,l,a,r,s[2],17,606105819),r=Sr(r,o,l,a,s[3],22,-1044525330),a=Sr(a,r,o,l,s[4],7,-176418897),l=Sr(l,a,r,o,s[5],12,1200080426),o=Sr(o,l,a,r,s[6],17,-1473231341),r=Sr(r,o,l,a,s[7],22,-45705983),a=Sr(a,r,o,l,s[8],7,1770035416),l=Sr(l,a,r,o,s[9],12,-1958414417),o=Sr(o,l,a,r,s[10],17,-42063),r=Sr(r,o,l,a,s[11],22,-1990404162),a=Sr(a,r,o,l,s[12],7,1804603682),l=Sr(l,a,r,o,s[13],12,-40341101),o=Sr(o,l,a,r,s[14],17,-1502002290),a=kr(a,r=Sr(r,o,l,a,s[15],22,1236535329),o,l,s[1],5,-165796510),l=kr(l,a,r,o,s[6],9,-1069501632),o=kr(o,l,a,r,s[11],14,643717713),r=kr(r,o,l,a,s[0],20,-373897302),a=kr(a,r,o,l,s[5],5,-701558691),l=kr(l,a,r,o,s[10],9,38016083),o=kr(o,l,a,r,s[15],14,-660478335),r=kr(r,o,l,a,s[4],20,-405537848),a=kr(a,r,o,l,s[9],5,568446438),l=kr(l,a,r,o,s[14],9,-1019803690),o=kr(o,l,a,r,s[3],14,-187363961),r=kr(r,o,l,a,s[8],20,1163531501),a=kr(a,r,o,l,s[13],5,-1444681467),l=kr(l,a,r,o,s[2],9,-51403784),o=kr(o,l,a,r,s[7],14,1735328473),a=Fr(a,r=kr(r,o,l,a,s[12],20,-1926607734),o,l,s[5],4,-378558),l=Fr(l,a,r,o,s[8],11,-2022574463),o=Fr(o,l,a,r,s[11],16,1839030562),r=Fr(r,o,l,a,s[14],23,-35309556),a=Fr(a,r,o,l,s[1],4,-1530992060),l=Fr(l,a,r,o,s[4],11,1272893353),o=Fr(o,l,a,r,s[7],16,-155497632),r=Fr(r,o,l,a,s[10],23,-1094730640),a=Fr(a,r,o,l,s[13],4,681279174),l=Fr(l,a,r,o,s[0],11,-358537222),o=Fr(o,l,a,r,s[3],16,-722521979),r=Fr(r,o,l,a,s[6],23,76029189),a=Fr(a,r,o,l,s[9],4,-640364487),l=Fr(l,a,r,o,s[12],11,-421815835),o=Fr(o,l,a,r,s[15],16,530742520),a=Ur(a,r=Fr(r,o,l,a,s[2],23,-995338651),o,l,s[0],6,-198630844),l=Ur(l,a,r,o,s[7],10,1126891415),o=Ur(o,l,a,r,s[14],15,-1416354905),r=Ur(r,o,l,a,s[5],21,-57434055),a=Ur(a,r,o,l,s[12],6,1700485571),l=Ur(l,a,r,o,s[3],10,-1894986606),o=Ur(o,l,a,r,s[10],15,-1051523),r=Ur(r,o,l,a,s[1],21,-2054922799),a=Ur(a,r,o,l,s[8],6,1873313359),l=Ur(l,a,r,o,s[15],10,-30611744),o=Ur(o,l,a,r,s[6],15,-1560198380),r=Ur(r,o,l,a,s[13],21,1309151649),a=Ur(a,r,o,l,s[4],6,-145523070),l=Ur(l,a,r,o,s[11],10,-1120210379),o=Ur(o,l,a,r,s[2],15,718787259),r=Ur(r,o,l,a,s[9],21,-343485551),t[0]=ac(a,t[0]),t[1]=ac(r,t[1]),t[2]=ac(o,t[2]),t[3]=ac(l,t[3])}function Sp(t,s,a,r,o,l){return s=ac(ac(s,t),ac(r,l)),ac(s<<o|s>>>32-o,a)}function Sr(t,s,a,r,o,l,A){return Sp(s&a|~s&r,t,s,o,l,A)}function kr(t,s,a,r,o,l,A){return Sp(s&r|a&~r,t,s,o,l,A)}function Fr(t,s,a,r,o,l,A){return Sp(s^a^r,t,s,o,l,A)}function Ur(t,s,a,r,o,l,A){return Sp(a^(s|~r),t,s,o,l,A)}function D1(t){var s,a=t.length,r=[1732584193,-271733879,-1732584194,271733878];for(s=64;s<=t.length;s+=64)xm(r,yN(t.substring(s-64,s)));t=t.substring(s-64);var o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(s=0;s<t.length;s++)o[s>>2]|=t.charCodeAt(s)<<(s%4<<3);if(o[s>>2]|=128<<(s%4<<3),s>55)for(xm(r,o),s=0;s<16;s++)o[s]=0;return o[14]=8*a,xm(r,o),r}function yN(t){var s,a=[];for(s=0;s<64;s+=4)a[s>>2]=t.charCodeAt(s)+(t.charCodeAt(s+1)<<8)+(t.charCodeAt(s+2)<<16)+(t.charCodeAt(s+3)<<24);return a}var ov="0123456789abcdef".split("");function vN(t){for(var s="",a=0;a<4;a++)s+=ov[t>>8*a+4&15]+ov[t>>8*a&15];return s}function bN(t){return String.fromCharCode(255&t,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function ng(t){return D1(t).map(bN).join("")}var wN=function(t){for(var s=0;s<t.length;s++)t[s]=vN(t[s]);return t.join("")}(D1("hello"))!="5d41402abc4b2a76b9719d911017c592";function ac(t,s){if(wN){var a=(65535&t)+(65535&s);return(t>>16)+(s>>16)+(a>>16)<<16|65535&a}return t+s&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function rg(t,s){var a,r,o,l;if(t!==a){for(var A=(o=t,l=1+(256/t.length|0),new Array(l+1).join(o)),u=[],h=0;h<256;h++)u[h]=h;var p=0;for(h=0;h<256;h++){var m=u[h];p=(p+m+A.charCodeAt(h))%256,u[h]=u[p],u[p]=m}a=t,r=u}else u=r;var v=s.length,b=0,x=0,C="";for(h=0;h<v;h++)x=(x+(m=u[b=(b+1)%256]))%256,u[b]=u[x],u[x]=m,A=u[(u[b]+u[x])%256],C+=String.fromCharCode(s.charCodeAt(h)^A);return C}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var lv={print:4,modify:8,copy:16,"annot-forms":32};function LA(t,s,a,r){this.v=1,this.r=2;var o=192;t.forEach(function(u){if(lv.perm!==void 0)throw new Error("Invalid permission: "+u);o+=lv[u]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var l=(s+this.padding).substr(0,32),A=(a+this.padding).substr(0,32);this.O=this.processOwnerPassword(l,A),this.P=-(1+(255^o)),this.encryptionKey=ng(l+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=rg(this.encryptionKey,this.padding)}function QA(t){if(/[^\u0000-\u00ff]/.test(t))throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var s="",a=t.length,r=0;r<a;r++){var o=t.charCodeAt(r);s+=o<33||o===35||o===37||o===40||o===41||o===47||o===60||o===62||o===91||o===93||o===123||o===125||o>126?"#"+("0"+o.toString(16)).slice(-2):t[r]}return s}function cv(t){if(Ca(t)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var s={};this.subscribe=function(a,r,o){if(o=o||!1,typeof a!="string"||typeof r!="function"||typeof o!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");s.hasOwnProperty(a)||(s[a]={});var l=Math.random().toString(35);return s[a][l]=[r,!!o],l},this.unsubscribe=function(a){for(var r in s)if(s[r][a])return delete s[r][a],Object.keys(s[r]).length===0&&delete s[r],!0;return!1},this.publish=function(a){if(s.hasOwnProperty(a)){var r=Array.prototype.slice.call(arguments,1),o=[];for(var l in s[a]){var A=s[a][l];try{A[0].apply(t,r)}catch(u){Es.console&&Oa.error("jsPDF PubSub Error",u.message,u)}A[1]&&o.push(l)}o.length&&o.forEach(this.unsubscribe)}},this.getTopics=function(){return s}}function iu(t){if(!(this instanceof iu))return new iu(t);var s="opacity,stroke-opacity".split(",");for(var a in t)t.hasOwnProperty(a)&&s.indexOf(a)>=0&&(this[a]=t[a]);this.id="",this.objectNumber=-1}function I1(t,s){this.gState=t,this.matrix=s,this.id="",this.objectNumber=-1}function sc(t,s,a,r,o){if(!(this instanceof sc))return new sc(t,s,a,r,o);this.type=t==="axial"?2:3,this.coords=s,this.colors=a,I1.call(this,r,o)}function Tc(t,s,a,r,o){if(!(this instanceof Tc))return new Tc(t,s,a,r,o);this.boundingBox=t,this.xStep=s,this.yStep=a,this.stream="",this.cloneIndex=0,I1.call(this,r,o)}function is(t){var s,a=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],o=arguments[2],l=arguments[3],A=[],u=1,h=16,p="S",m=null;Ca(t=t||{})==="object"&&(a=t.orientation,r=t.unit||r,o=t.format||o,l=t.compress||t.compressPdf||l,(m=t.encryption||null)!==null&&(m.userPassword=m.userPassword||"",m.ownerPassword=m.ownerPassword||"",m.userPermissions=m.userPermissions||[]),u=typeof t.userUnit=="number"?Math.abs(t.userUnit):1,t.precision!==void 0&&(s=t.precision),t.floatPrecision!==void 0&&(h=t.floatPrecision),p=t.defaultPathOperation||"S"),A=t.filters||(l===!0?["FlateEncode"]:A),r=r||"mm",a=(""+(a||"P")).toLowerCase();var v=t.putOnlyUsedFonts||!1,b={},x={internal:{},__private__:{}};x.__private__.PubSub=cv;var C="1.3",Q=x.__private__.getPdfVersion=function(){return C};x.__private__.setPdfVersion=function(_){C=_};var j={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};x.__private__.getPageFormats=function(){return j};var B=x.__private__.getPageFormat=function(_){return j[_]};o=o||"a4";var L="compat",P="advanced",F=L;function ee(){this.saveGraphicsState(),je(new We(Ht,0,0,-Ht,0,pi()*Ht).toString()+" cm"),this.setFontSize(this.getFontSize()/Ht),p="n",F=P}function K(){this.restoreGraphicsState(),p="S",F=L}var q=x.__private__.combineFontStyleAndFontWeight=function(_,$){if(_=="bold"&&$=="normal"||_=="bold"&&$==400||_=="normal"&&$=="italic"||_=="bold"&&$=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return $&&(_=$==400||$==="normal"?_==="italic"?"italic":"normal":$!=700&&$!=="bold"||_!=="normal"?($==700?"bold":$)+""+_:"bold"),_};x.advancedAPI=function(_){var $=F===L;return $&&ee.call(this),typeof _!="function"||(_(this),$&&K.call(this)),this},x.compatAPI=function(_){var $=F===P;return $&&K.call(this),typeof _!="function"||(_(this),$&&ee.call(this)),this},x.isAdvancedAPI=function(){return F===P};var E,U=function(_){if(F!==P)throw new Error(_+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},V=x.roundToPrecision=x.__private__.roundToPrecision=function(_,$){var ve=s||$;if(isNaN(_)||isNaN(ve))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return _.toFixed(ve).replace(/0+$/,"")};E=x.hpf=x.__private__.hpf=typeof h=="number"?function(_){if(isNaN(_))throw new Error("Invalid argument passed to jsPDF.hpf");return V(_,h)}:h==="smart"?function(_){if(isNaN(_))throw new Error("Invalid argument passed to jsPDF.hpf");return V(_,_>-1&&_<1?16:5)}:function(_){if(isNaN(_))throw new Error("Invalid argument passed to jsPDF.hpf");return V(_,16)};var H=x.f2=x.__private__.f2=function(_){if(isNaN(_))throw new Error("Invalid argument passed to jsPDF.f2");return V(_,2)},I=x.__private__.f3=function(_){if(isNaN(_))throw new Error("Invalid argument passed to jsPDF.f3");return V(_,3)},M=x.scale=x.__private__.scale=function(_){if(isNaN(_))throw new Error("Invalid argument passed to jsPDF.scale");return F===L?_*Ht:F===P?_:void 0},re=function(_){return M(function($){return F===L?pi()-$:F===P?$:void 0}(_))};x.__private__.setPrecision=x.setPrecision=function(_){typeof parseInt(_,10)=="number"&&(s=parseInt(_,10))};var G,Z="00000000000000000000000000000000",fe=x.__private__.getFileId=function(){return Z},Ae=x.__private__.setFileId=function(_){return Z=_!==void 0&&/^[a-fA-F0-9]{32}$/.test(_)?_.toUpperCase():Z.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),m!==null&&(Ks=new LA(m.userPermissions,m.userPassword,m.ownerPassword,Z)),Z};x.setFileId=function(_){return Ae(_),this},x.getFileId=function(){return fe()};var Ce=x.__private__.convertDateToPDFDate=function(_){var $=_.getTimezoneOffset(),ve=$<0?"+":"-",ke=Math.floor(Math.abs($/60)),Ie=Math.abs($%60),ct=[ve,z(ke),"'",z(Ie),"'"].join("");return["D:",_.getFullYear(),z(_.getMonth()+1),z(_.getDate()),z(_.getHours()),z(_.getMinutes()),z(_.getSeconds()),ct].join("")},te=x.__private__.convertPDFDateToDate=function(_){var $=parseInt(_.substr(2,4),10),ve=parseInt(_.substr(6,2),10)-1,ke=parseInt(_.substr(8,2),10),Ie=parseInt(_.substr(10,2),10),ct=parseInt(_.substr(12,2),10),jt=parseInt(_.substr(14,2),10);return new Date($,ve,ke,Ie,ct,jt,0)},he=x.__private__.setCreationDate=function(_){var $;if(_===void 0&&(_=new Date),_ instanceof Date)$=Ce(_);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(_))throw new Error("Invalid argument passed to jsPDF.setCreationDate");$=_}return G=$},k=x.__private__.getCreationDate=function(_){var $=G;return _==="jsDate"&&($=te(G)),$};x.setCreationDate=function(_){return he(_),this},x.getCreationDate=function(_){return k(_)};var T,z=x.__private__.padd2=function(_){return("0"+parseInt(_)).slice(-2)},le=x.__private__.padd2Hex=function(_){return("00"+(_=_.toString())).substr(_.length)},X=0,W=[],de=[],me=0,Be=[],Qe=[],ut=!1,mt=de;x.__private__.setCustomOutputDestination=function(_){ut=!0,mt=_};var Ve=function(_){ut||(mt=_)};x.__private__.resetCustomOutputDestination=function(){ut=!1,mt=de};var je=x.__private__.out=function(_){return _=_.toString(),me+=_.length+1,mt.push(_),mt},Ft=x.__private__.write=function(_){return je(arguments.length===1?_.toString():Array.prototype.join.call(arguments," "))},Rt=x.__private__.getArrayBuffer=function(_){for(var $=_.length,ve=new ArrayBuffer($),ke=new Uint8Array(ve);$--;)ke[$]=_.charCodeAt($);return ve},at=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];x.__private__.getStandardFonts=function(){return at};var Xe=t.fontSize||16;x.__private__.setFontSize=x.setFontSize=function(_){return Xe=F===P?_/Ht:_,this};var pt,xe=x.__private__.getFontSize=x.getFontSize=function(){return F===L?Xe:Xe*Ht},et=t.R2L||!1;x.__private__.setR2L=x.setR2L=function(_){return et=_,this},x.__private__.getR2L=x.getR2L=function(){return et};var Oe,Bt=x.__private__.setZoomMode=function(_){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(_))pt=_;else if(isNaN(_)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(_)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+_+'" is not recognized.');pt=_}else pt=parseInt(_,10)};x.__private__.getZoomMode=function(){return pt};var xt,dt=x.__private__.setPageMode=function(_){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(_)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+_+'" is not recognized.');Oe=_};x.__private__.getPageMode=function(){return Oe};var Ut=x.__private__.setLayoutMode=function(_){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(_)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+_+'" is not recognized.');xt=_};x.__private__.getLayoutMode=function(){return xt},x.__private__.setDisplayMode=x.setDisplayMode=function(_,$,ve){return Bt(_),Ut($),dt(ve),this};var wt={title:"",subject:"",author:"",keywords:"",creator:""};x.__private__.getDocumentProperty=function(_){if(Object.keys(wt).indexOf(_)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return wt[_]},x.__private__.getDocumentProperties=function(){return wt},x.__private__.setDocumentProperties=x.setProperties=x.setDocumentProperties=function(_){for(var $ in wt)wt.hasOwnProperty($)&&_[$]&&(wt[$]=_[$]);return this},x.__private__.setDocumentProperty=function(_,$){if(Object.keys(wt).indexOf(_)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return wt[_]=$};var bt,Ht,_t,Gt,$t,J={},tt={},Qt=[],Et={},Jt={},os={},_e={},St=null,$e=0,kt=[],Ze=new cv(x),oe=t.hotfixes||[],we={},Ee={},Re=[],We=function _($,ve,ke,Ie,ct,jt){if(!(this instanceof _))return new _($,ve,ke,Ie,ct,jt);isNaN($)&&($=1),isNaN(ve)&&(ve=0),isNaN(ke)&&(ke=0),isNaN(Ie)&&(Ie=1),isNaN(ct)&&(ct=0),isNaN(jt)&&(jt=0),this._matrix=[$,ve,ke,Ie,ct,jt]};Object.defineProperty(We.prototype,"sx",{get:function(){return this._matrix[0]},set:function(_){this._matrix[0]=_}}),Object.defineProperty(We.prototype,"shy",{get:function(){return this._matrix[1]},set:function(_){this._matrix[1]=_}}),Object.defineProperty(We.prototype,"shx",{get:function(){return this._matrix[2]},set:function(_){this._matrix[2]=_}}),Object.defineProperty(We.prototype,"sy",{get:function(){return this._matrix[3]},set:function(_){this._matrix[3]=_}}),Object.defineProperty(We.prototype,"tx",{get:function(){return this._matrix[4]},set:function(_){this._matrix[4]=_}}),Object.defineProperty(We.prototype,"ty",{get:function(){return this._matrix[5]},set:function(_){this._matrix[5]=_}}),Object.defineProperty(We.prototype,"a",{get:function(){return this._matrix[0]},set:function(_){this._matrix[0]=_}}),Object.defineProperty(We.prototype,"b",{get:function(){return this._matrix[1]},set:function(_){this._matrix[1]=_}}),Object.defineProperty(We.prototype,"c",{get:function(){return this._matrix[2]},set:function(_){this._matrix[2]=_}}),Object.defineProperty(We.prototype,"d",{get:function(){return this._matrix[3]},set:function(_){this._matrix[3]=_}}),Object.defineProperty(We.prototype,"e",{get:function(){return this._matrix[4]},set:function(_){this._matrix[4]=_}}),Object.defineProperty(We.prototype,"f",{get:function(){return this._matrix[5]},set:function(_){this._matrix[5]=_}}),Object.defineProperty(We.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(We.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(We.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(We.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),We.prototype.join=function(_){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(E).join(_)},We.prototype.multiply=function(_){var $=_.sx*this.sx+_.shy*this.shx,ve=_.sx*this.shy+_.shy*this.sy,ke=_.shx*this.sx+_.sy*this.shx,Ie=_.shx*this.shy+_.sy*this.sy,ct=_.tx*this.sx+_.ty*this.shx+this.tx,jt=_.tx*this.shy+_.ty*this.sy+this.ty;return new We($,ve,ke,Ie,ct,jt)},We.prototype.decompose=function(){var _=this.sx,$=this.shy,ve=this.shx,ke=this.sy,Ie=this.tx,ct=this.ty,jt=Math.sqrt(_*_+$*$),Xt=(_/=jt)*ve+($/=jt)*ke;ve-=_*Xt,ke-=$*Xt;var ds=Math.sqrt(ve*ve+ke*ke);return Xt/=ds,_*(ke/=ds)<$*(ve/=ds)&&(_=-_,$=-$,Xt=-Xt,jt=-jt),{scale:new We(jt,0,0,ds,0,0),translate:new We(1,0,0,1,Ie,ct),rotate:new We(_,$,-$,_,0,0),skew:new We(1,0,Xt,1,0,0)}},We.prototype.toString=function(_){return this.join(" ")},We.prototype.inversed=function(){var _=this.sx,$=this.shy,ve=this.shx,ke=this.sy,Ie=this.tx,ct=this.ty,jt=1/(_*ke-$*ve),Xt=ke*jt,ds=-$*jt,_s=-ve*jt,Cs=_*jt;return new We(Xt,ds,_s,Cs,-Xt*Ie-_s*ct,-ds*Ie-Cs*ct)},We.prototype.applyToPoint=function(_){var $=_.x*this.sx+_.y*this.shx+this.tx,ve=_.x*this.shy+_.y*this.sy+this.ty;return new Si($,ve)},We.prototype.applyToRectangle=function(_){var $=this.applyToPoint(_),ve=this.applyToPoint(new Si(_.x+_.w,_.y+_.h));return new Hn($.x,$.y,ve.x-$.x,ve.y-$.y)},We.prototype.clone=function(){var _=this.sx,$=this.shy,ve=this.shx,ke=this.sy,Ie=this.tx,ct=this.ty;return new We(_,$,ve,ke,Ie,ct)},x.Matrix=We;var Lt=x.matrixMult=function(_,$){return $.multiply(_)},Vt=new We(1,0,0,1,0,0);x.unitMatrix=x.identityMatrix=Vt;var Ot=function(_,$){if(!Jt[_]){var ve=($ instanceof sc?"Sh":"P")+(Object.keys(Et).length+1).toString(10);$.id=ve,Jt[_]=ve,Et[ve]=$,Ze.publish("addPattern",$)}};x.ShadingPattern=sc,x.TilingPattern=Tc,x.addShadingPattern=function(_,$){return U("addShadingPattern()"),Ot(_,$),this},x.beginTilingPattern=function(_){U("beginTilingPattern()"),Ts(_.boundingBox[0],_.boundingBox[1],_.boundingBox[2]-_.boundingBox[0],_.boundingBox[3]-_.boundingBox[1],_.matrix)},x.endTilingPattern=function(_,$){U("endTilingPattern()"),$.stream=Qe[T].join(`
`),Ot(_,$),Ze.publish("endTilingPattern",$),Re.pop().restore()};var ss,xs=x.__private__.newObject=function(){var _=Hs();return Ms(_,!0),_},Hs=x.__private__.newObjectDeferred=function(){return X++,W[X]=function(){return me},X},Ms=function(_,$){return $=typeof $=="boolean"&&$,W[_]=me,$&&je(_+" 0 obj"),_},la=x.__private__.newAdditionalObject=function(){var _={objId:Hs(),content:""};return Be.push(_),_},Zs=Hs(),Sa=Hs(),da=x.__private__.decodeColorString=function(_){var $=_.split(" ");if($.length!==2||$[1]!=="g"&&$[1]!=="G")$.length!==5||$[4]!=="k"&&$[4]!=="K"||($=[(1-$[0])*(1-$[3]),(1-$[1])*(1-$[3]),(1-$[2])*(1-$[3]),"r"]);else{var ve=parseFloat($[0]);$=[ve,ve,ve,"r"]}for(var ke="#",Ie=0;Ie<3;Ie++)ke+=("0"+Math.floor(255*parseFloat($[Ie])).toString(16)).slice(-2);return ke},xa=x.__private__.encodeColorString=function(_){var $;typeof _=="string"&&(_={ch1:_});var ve=_.ch1,ke=_.ch2,Ie=_.ch3,ct=_.ch4,jt=_.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof ve=="string"&&ve.charAt(0)!=="#"){var Xt=new R1(ve);if(Xt.ok)ve=Xt.toHex();else if(!/^\d*\.?\d*$/.test(ve))throw new Error('Invalid color "'+ve+'" passed to jsPDF.encodeColorString.')}if(typeof ve=="string"&&/^#[0-9A-Fa-f]{3}$/.test(ve)&&(ve="#"+ve[1]+ve[1]+ve[2]+ve[2]+ve[3]+ve[3]),typeof ve=="string"&&/^#[0-9A-Fa-f]{6}$/.test(ve)){var ds=parseInt(ve.substr(1),16);ve=ds>>16&255,ke=ds>>8&255,Ie=255&ds}if(ke===void 0||ct===void 0&&ve===ke&&ke===Ie)$=typeof ve=="string"?ve+" "+jt[0]:_.precision===2?H(ve/255)+" "+jt[0]:I(ve/255)+" "+jt[0];else if(ct===void 0||Ca(ct)==="object"){if(ct&&!isNaN(ct.a)&&ct.a===0)return["1.","1.","1.",jt[1]].join(" ");$=typeof ve=="string"?[ve,ke,Ie,jt[1]].join(" "):_.precision===2?[H(ve/255),H(ke/255),H(Ie/255),jt[1]].join(" "):[I(ve/255),I(ke/255),I(Ie/255),jt[1]].join(" ")}else $=typeof ve=="string"?[ve,ke,Ie,ct,jt[2]].join(" "):_.precision===2?[H(ve),H(ke),H(Ie),H(ct),jt[2]].join(" "):[I(ve),I(ke),I(Ie),I(ct),jt[2]].join(" ");return $},ha=x.__private__.getFilters=function(){return A},ya=x.__private__.putStream=function(_){var $=(_=_||{}).data||"",ve=_.filters||ha(),ke=_.alreadyAppliedFilters||[],Ie=_.addLength1||!1,ct=$.length,jt=_.objectId,Xt=function(un){return un};if(m!==null&&jt===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");m!==null&&(Xt=Ks.encryptor(jt,0));var ds={};ve===!0&&(ve=["FlateEncode"]);var _s=_.additionalKeyValues||[],Cs=(ds=is.API.processDataByFilters!==void 0?is.API.processDataByFilters($,ve):{data:$,reverseChain:[]}).reverseChain+(Array.isArray(ke)?ke.join(" "):ke.toString());if(ds.data.length!==0&&(_s.push({key:"Length",value:ds.data.length}),Ie===!0&&_s.push({key:"Length1",value:ct})),Cs.length!=0)if(Cs.split("/").length-1==1)_s.push({key:"Filter",value:Cs});else{_s.push({key:"Filter",value:"["+Cs+"]"});for(var Gs=0;Gs<_s.length;Gs+=1)if(_s[Gs].key==="DecodeParms"){for(var Ta=[],Va=0;Va<ds.reverseChain.split("/").length-1;Va+=1)Ta.push("null");Ta.push(_s[Gs].value),_s[Gs].value="["+Ta.join(" ")+"]"}}je("<<");for(var va=0;va<_s.length;va++)je("/"+_s[va].key+" "+_s[va].value);je(">>"),ds.data.length!==0&&(je("stream"),je(Xt(ds.data)),je("endstream"))},Ws=x.__private__.putPage=function(_){var $=_.number,ve=_.data,ke=_.objId,Ie=_.contentsObjId;Ms(ke,!0),je("<</Type /Page"),je("/Parent "+_.rootDictionaryObjId+" 0 R"),je("/Resources "+_.resourceDictionaryObjId+" 0 R"),je("/MediaBox ["+parseFloat(E(_.mediaBox.bottomLeftX))+" "+parseFloat(E(_.mediaBox.bottomLeftY))+" "+E(_.mediaBox.topRightX)+" "+E(_.mediaBox.topRightY)+"]"),_.cropBox!==null&&je("/CropBox ["+E(_.cropBox.bottomLeftX)+" "+E(_.cropBox.bottomLeftY)+" "+E(_.cropBox.topRightX)+" "+E(_.cropBox.topRightY)+"]"),_.bleedBox!==null&&je("/BleedBox ["+E(_.bleedBox.bottomLeftX)+" "+E(_.bleedBox.bottomLeftY)+" "+E(_.bleedBox.topRightX)+" "+E(_.bleedBox.topRightY)+"]"),_.trimBox!==null&&je("/TrimBox ["+E(_.trimBox.bottomLeftX)+" "+E(_.trimBox.bottomLeftY)+" "+E(_.trimBox.topRightX)+" "+E(_.trimBox.topRightY)+"]"),_.artBox!==null&&je("/ArtBox ["+E(_.artBox.bottomLeftX)+" "+E(_.artBox.bottomLeftY)+" "+E(_.artBox.topRightX)+" "+E(_.artBox.topRightY)+"]"),typeof _.userUnit=="number"&&_.userUnit!==1&&je("/UserUnit "+_.userUnit),Ze.publish("putPage",{objId:ke,pageContext:kt[$],pageNumber:$,page:ve}),je("/Contents "+Ie+" 0 R"),je(">>"),je("endobj");var ct=ve.join(`
`);return F===P&&(ct+=`
Q`),Ms(Ie,!0),ya({data:ct,filters:ha(),objectId:Ie}),je("endobj"),ke},Dn=x.__private__.putPages=function(){var _,$,ve=[];for(_=1;_<=$e;_++)kt[_].objId=Hs(),kt[_].contentsObjId=Hs();for(_=1;_<=$e;_++)ve.push(Ws({number:_,data:Qe[_],objId:kt[_].objId,contentsObjId:kt[_].contentsObjId,mediaBox:kt[_].mediaBox,cropBox:kt[_].cropBox,bleedBox:kt[_].bleedBox,trimBox:kt[_].trimBox,artBox:kt[_].artBox,userUnit:kt[_].userUnit,rootDictionaryObjId:Zs,resourceDictionaryObjId:Sa}));Ms(Zs,!0),je("<</Type /Pages");var ke="/Kids [";for($=0;$<$e;$++)ke+=ve[$]+" 0 R ";je(ke+"]"),je("/Count "+$e),je(">>"),je("endobj"),Ze.publish("postPutPages")},Ma=function(_){Ze.publish("putFont",{font:_,out:je,newObject:xs,putStream:ya}),_.isAlreadyPutted!==!0&&(_.objectNumber=xs(),je("<<"),je("/Type /Font"),je("/BaseFont /"+QA(_.postScriptName)),je("/Subtype /Type1"),typeof _.encoding=="string"&&je("/Encoding /"+_.encoding),je("/FirstChar 32"),je("/LastChar 255"),je(">>"),je("endobj"))},ie=function(_){_.objectNumber=xs();var $=[];$.push({key:"Type",value:"/XObject"}),$.push({key:"Subtype",value:"/Form"}),$.push({key:"BBox",value:"["+[E(_.x),E(_.y),E(_.x+_.width),E(_.y+_.height)].join(" ")+"]"}),$.push({key:"Matrix",value:"["+_.matrix.toString()+"]"});var ve=_.pages[1].join(`
`);ya({data:ve,additionalKeyValues:$,objectId:_.objectNumber}),je("endobj")},Se=function(_,$){$||($=21);var ve=xs(),ke=function(jt,Xt){var ds,_s=[],Cs=1/(Xt-1);for(ds=0;ds<1;ds+=Cs)_s.push(ds);if(_s.push(1),jt[0].offset!=0){var Gs={offset:0,color:jt[0].color};jt.unshift(Gs)}if(jt[jt.length-1].offset!=1){var Ta={offset:1,color:jt[jt.length-1].color};jt.push(Ta)}for(var Va="",va=0,un=0;un<_s.length;un++){for(ds=_s[un];ds>jt[va+1].offset;)va++;var $a=jt[va].offset,hn=(ds-$a)/(jt[va+1].offset-$a),tr=jt[va].color,qn=jt[va+1].color;Va+=le(Math.round((1-hn)*tr[0]+hn*qn[0]).toString(16))+le(Math.round((1-hn)*tr[1]+hn*qn[1]).toString(16))+le(Math.round((1-hn)*tr[2]+hn*qn[2]).toString(16))}return Va.trim()}(_.colors,$),Ie=[];Ie.push({key:"FunctionType",value:"0"}),Ie.push({key:"Domain",value:"[0.0 1.0]"}),Ie.push({key:"Size",value:"["+$+"]"}),Ie.push({key:"BitsPerSample",value:"8"}),Ie.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Ie.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),ya({data:ke,additionalKeyValues:Ie,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:ve}),je("endobj"),_.objectNumber=xs(),je("<< /ShadingType "+_.type),je("/ColorSpace /DeviceRGB");var ct="/Coords ["+E(parseFloat(_.coords[0]))+" "+E(parseFloat(_.coords[1]))+" ";_.type===2?ct+=E(parseFloat(_.coords[2]))+" "+E(parseFloat(_.coords[3])):ct+=E(parseFloat(_.coords[2]))+" "+E(parseFloat(_.coords[3]))+" "+E(parseFloat(_.coords[4]))+" "+E(parseFloat(_.coords[5])),je(ct+="]"),_.matrix&&je("/Matrix ["+_.matrix.toString()+"]"),je("/Function "+ve+" 0 R"),je("/Extend [true true]"),je(">>"),je("endobj")},ot=function(_,$){var ve=Hs(),ke=xs();$.push({resourcesOid:ve,objectOid:ke}),_.objectNumber=ke;var Ie=[];Ie.push({key:"Type",value:"/Pattern"}),Ie.push({key:"PatternType",value:"1"}),Ie.push({key:"PaintType",value:"1"}),Ie.push({key:"TilingType",value:"1"}),Ie.push({key:"BBox",value:"["+_.boundingBox.map(E).join(" ")+"]"}),Ie.push({key:"XStep",value:E(_.xStep)}),Ie.push({key:"YStep",value:E(_.yStep)}),Ie.push({key:"Resources",value:ve+" 0 R"}),_.matrix&&Ie.push({key:"Matrix",value:"["+_.matrix.toString()+"]"}),ya({data:_.stream,additionalKeyValues:Ie,objectId:_.objectNumber}),je("endobj")},qt=function(_){for(var $ in _.objectNumber=xs(),je("<<"),_)switch($){case"opacity":je("/ca "+H(_[$]));break;case"stroke-opacity":je("/CA "+H(_[$]))}je(">>"),je("endobj")},Zt=function(_){Ms(_.resourcesOid,!0),je("<<"),je("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),function(){for(var $ in je("/Font <<"),J)J.hasOwnProperty($)&&(v===!1||v===!0&&b.hasOwnProperty($))&&je("/"+$+" "+J[$].objectNumber+" 0 R");je(">>")}(),function(){if(Object.keys(Et).length>0){for(var $ in je("/Shading <<"),Et)Et.hasOwnProperty($)&&Et[$]instanceof sc&&Et[$].objectNumber>=0&&je("/"+$+" "+Et[$].objectNumber+" 0 R");Ze.publish("putShadingPatternDict"),je(">>")}}(),function($){if(Object.keys(Et).length>0){for(var ve in je("/Pattern <<"),Et)Et.hasOwnProperty(ve)&&Et[ve]instanceof x.TilingPattern&&Et[ve].objectNumber>=0&&Et[ve].objectNumber<$&&je("/"+ve+" "+Et[ve].objectNumber+" 0 R");Ze.publish("putTilingPatternDict"),je(">>")}}(_.objectOid),function(){if(Object.keys(os).length>0){var $;for($ in je("/ExtGState <<"),os)os.hasOwnProperty($)&&os[$].objectNumber>=0&&je("/"+$+" "+os[$].objectNumber+" 0 R");Ze.publish("putGStateDict"),je(">>")}}(),function(){for(var $ in je("/XObject <<"),we)we.hasOwnProperty($)&&we[$].objectNumber>=0&&je("/"+$+" "+we[$].objectNumber+" 0 R");Ze.publish("putXobjectDict"),je(">>")}(),je(">>"),je("endobj")},ys=function(_){tt[_.fontName]=tt[_.fontName]||{},tt[_.fontName][_.fontStyle]=_.id},vs=function(_,$,ve,ke,Ie){var ct={id:"F"+(Object.keys(J).length+1).toString(10),postScriptName:_,fontName:$,fontStyle:ve,encoding:ke,isStandardFont:Ie||!1,metadata:{}};return Ze.publish("addFont",{font:ct,instance:this}),J[ct.id]=ct,ys(ct),ct.id},as=x.__private__.pdfEscape=x.pdfEscape=function(_,$){return function(ve,ke){var Ie,ct,jt,Xt,ds,_s,Cs,Gs,Ta;if(jt=(ke=ke||{}).sourceEncoding||"Unicode",ds=ke.outputEncoding,(ke.autoencode||ds)&&J[bt].metadata&&J[bt].metadata[jt]&&J[bt].metadata[jt].encoding&&(Xt=J[bt].metadata[jt].encoding,!ds&&J[bt].encoding&&(ds=J[bt].encoding),!ds&&Xt.codePages&&(ds=Xt.codePages[0]),typeof ds=="string"&&(ds=Xt[ds]),ds)){for(Cs=!1,_s=[],Ie=0,ct=ve.length;Ie<ct;Ie++)(Gs=ds[ve.charCodeAt(Ie)])?_s.push(String.fromCharCode(Gs)):_s.push(ve[Ie]),_s[Ie].charCodeAt(0)>>8&&(Cs=!0);ve=_s.join("")}for(Ie=ve.length;Cs===void 0&&Ie!==0;)ve.charCodeAt(Ie-1)>>8&&(Cs=!0),Ie--;if(!Cs)return ve;for(_s=ke.noBOM?[]:[254,255],Ie=0,ct=ve.length;Ie<ct;Ie++){if((Ta=(Gs=ve.charCodeAt(Ie))>>8)>>8)throw new Error("Character at position "+Ie+" of string '"+ve+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");_s.push(Ta),_s.push(Gs-(Ta<<8))}return String.fromCharCode.apply(void 0,_s)}(_,$).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},ps=x.__private__.beginPage=function(_){Qe[++$e]=[],kt[$e]={objId:0,contentsObjId:0,userUnit:Number(u),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(_[0]),topRightY:Number(_[1])}},Ps($e),Ve(Qe[T])},fs=function(_,$){var ve,ke,Ie;switch(a=$||a,typeof _=="string"&&(ve=B(_.toLowerCase()),Array.isArray(ve)&&(ke=ve[0],Ie=ve[1])),Array.isArray(_)&&(ke=_[0]*Ht,Ie=_[1]*Ht),isNaN(ke)&&(ke=o[0],Ie=o[1]),(ke>14400||Ie>14400)&&(Oa.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),ke=Math.min(14400,ke),Ie=Math.min(14400,Ie)),o=[ke,Ie],a.substr(0,1)){case"l":Ie>ke&&(o=[Ie,ke]);break;case"p":ke>Ie&&(o=[Ie,ke])}ps(o),fa(ms),je(Jr),_r!==0&&je(_r+" J"),Zr!==0&&je(Zr+" j"),Ze.publish("addPage",{pageNumber:$e})},pa=function(_){_>0&&_<=$e&&(Qe.splice(_,1),kt.splice(_,1),$e--,T>$e&&(T=$e),this.setPage(T))},Ps=function(_){_>0&&_<=$e&&(T=_)},ca=x.__private__.getNumberOfPages=x.getNumberOfPages=function(){return Qe.length-1},In=function(_,$,ve){var ke,Ie=void 0;return ve=ve||{},_=_!==void 0?_:J[bt].fontName,$=$!==void 0?$:J[bt].fontStyle,ke=_.toLowerCase(),tt[ke]!==void 0&&tt[ke][$]!==void 0?Ie=tt[ke][$]:tt[_]!==void 0&&tt[_][$]!==void 0?Ie=tt[_][$]:ve.disableWarning===!1&&Oa.warn("Unable to look up font label for font '"+_+"', '"+$+"'. Refer to getFontList() for available fonts."),Ie||ve.noFallback||(Ie=tt.times[$])==null&&(Ie=tt.times.normal),Ie},Yr=x.__private__.putInfo=function(){var _=xs(),$=function(ke){return ke};for(var ve in m!==null&&($=Ks.encryptor(_,0)),je("<<"),je("/Producer ("+as($("jsPDF "+is.version))+")"),wt)wt.hasOwnProperty(ve)&&wt[ve]&&je("/"+ve.substr(0,1).toUpperCase()+ve.substr(1)+" ("+as($(wt[ve]))+")");je("/CreationDate ("+as($(G))+")"),je(">>"),je("endobj")},Ai=x.__private__.putCatalog=function(_){var $=(_=_||{}).rootDictionaryObjId||Zs;switch(xs(),je("<<"),je("/Type /Catalog"),je("/Pages "+$+" 0 R"),pt||(pt="fullwidth"),pt){case"fullwidth":je("/OpenAction [3 0 R /FitH null]");break;case"fullheight":je("/OpenAction [3 0 R /FitV null]");break;case"fullpage":je("/OpenAction [3 0 R /Fit]");break;case"original":je("/OpenAction [3 0 R /XYZ null null 1]");break;default:var ve=""+pt;ve.substr(ve.length-1)==="%"&&(pt=parseInt(pt)/100),typeof pt=="number"&&je("/OpenAction [3 0 R /XYZ null null "+H(pt)+"]")}switch(xt||(xt="continuous"),xt){case"continuous":je("/PageLayout /OneColumn");break;case"single":je("/PageLayout /SinglePage");break;case"two":case"twoleft":je("/PageLayout /TwoColumnLeft");break;case"tworight":je("/PageLayout /TwoColumnRight")}Oe&&je("/PageMode /"+Oe),Ze.publish("putCatalog"),je(">>"),je("endobj")},qs=x.__private__.putTrailer=function(){je("trailer"),je("<<"),je("/Size "+(X+1)),je("/Root "+X+" 0 R"),je("/Info "+(X-1)+" 0 R"),m!==null&&je("/Encrypt "+Ks.oid+" 0 R"),je("/ID [ <"+Z+"> <"+Z+"> ]"),je(">>")},Xn=x.__private__.putHeader=function(){je("%PDF-"+C),je("%")},Ci=x.__private__.putXRef=function(){var _="0000000000";je("xref"),je("0 "+(X+1)),je("0000000000 65535 f ");for(var $=1;$<=X;$++)typeof W[$]=="function"?je((_+W[$]()).slice(-10)+" 00000 n "):W[$]!==void 0?je((_+W[$]).slice(-10)+" 00000 n "):je("0000000000 00000 n ")},ea=x.__private__.buildDocument=function(){var _;X=0,me=0,de=[],W=[],Be=[],Zs=Hs(),Sa=Hs(),Ve(de),Ze.publish("buildDocument"),Xn(),Dn(),function(){Ze.publish("putAdditionalObjects");for(var ve=0;ve<Be.length;ve++){var ke=Be[ve];Ms(ke.objId,!0),je(ke.content),je("endobj")}Ze.publish("postPutAdditionalObjects")}(),_=[],function(){for(var ve in J)J.hasOwnProperty(ve)&&(v===!1||v===!0&&b.hasOwnProperty(ve))&&Ma(J[ve])}(),function(){var ve;for(ve in os)os.hasOwnProperty(ve)&&qt(os[ve])}(),function(){for(var ve in we)we.hasOwnProperty(ve)&&ie(we[ve])}(),function(ve){var ke;for(ke in Et)Et.hasOwnProperty(ke)&&(Et[ke]instanceof sc?Se(Et[ke]):Et[ke]instanceof Tc&&ot(Et[ke],ve))}(_),Ze.publish("putResources"),_.forEach(Zt),Zt({resourcesOid:Sa,objectOid:Number.MAX_SAFE_INTEGER}),Ze.publish("postPutResources"),m!==null&&(Ks.oid=xs(),je("<<"),je("/Filter /Standard"),je("/V "+Ks.v),je("/R "+Ks.r),je("/U <"+Ks.toHexString(Ks.U)+">"),je("/O <"+Ks.toHexString(Ks.O)+">"),je("/P "+Ks.P),je(">>"),je("endobj")),Yr(),Ai();var $=me;return Ci(),qs(),je("startxref"),je(""+$),je("%%EOF"),Ve(Qe[T]),de.join(`
`)},Jn=x.__private__.getBlob=function(_){return new Blob([Rt(_)],{type:"application/pdf"})},ja=x.output=x.__private__.output=(ss=function(_,$){switch(typeof($=$||{})=="string"?$={filename:$}:$.filename=$.filename||"generated.pdf",_){case void 0:return ea();case"save":x.save($.filename);break;case"arraybuffer":return Rt(ea());case"blob":return Jn(ea());case"bloburi":case"bloburl":if(Es.URL!==void 0&&typeof Es.URL.createObjectURL=="function")return Es.URL&&Es.URL.createObjectURL(Jn(ea()))||void 0;Oa.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var ve="",ke=ea();try{ve=iv(ke)}catch{ve=iv(unescape(encodeURIComponent(ke)))}return"data:application/pdf;filename="+$.filename+";base64,"+ve;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Es)==="[object Window]"){var Ie="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",ct=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';$.pdfObjectUrl&&(Ie=$.pdfObjectUrl,ct="");var jt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Ie+'"'+ct+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify($)+");<\/script></body></html>",Xt=Es.open();return Xt!==null&&Xt.document.write(jt),Xt}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Es)==="[object Window]"){var ds='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+($.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+$.filename+'" width="500px" height="400px" /></body></html>',_s=Es.open();if(_s!==null){_s.document.write(ds);var Cs=this;_s.document.documentElement.querySelector("#pdfViewer").onload=function(){_s.document.title=$.filename,_s.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Cs.output("bloburl"))}}return _s}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Es)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Gs='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",$)+'"></iframe></body></html>',Ta=Es.open();if(Ta!==null&&(Ta.document.write(Gs),Ta.document.title=$.filename),Ta||typeof safari>"u")return Ta;break;case"datauri":case"dataurl":return Es.document.location.href=this.output("datauristring",$);default:return null}},ss.foo=function(){try{return ss.apply(this,arguments)}catch(ve){var _=ve.stack||"";~_.indexOf(" at ")&&(_=_.split(" at ")[1]);var $="Error in function "+_.split(`
`)[0].split("<")[0]+": "+ve.message;if(!Es.console)throw new Error($);Es.console.error($,ve),Es.alert&&alert($)}},ss.foo.bar=ss,ss.foo),wr=function(_){return Array.isArray(oe)===!0&&oe.indexOf(_)>-1};switch(r){case"pt":Ht=1;break;case"mm":Ht=72/25.4;break;case"cm":Ht=72/2.54;break;case"in":Ht=72;break;case"px":Ht=wr("px_scaling")==1?.75:96/72;break;case"pc":case"em":Ht=12;break;case"ex":Ht=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);Ht=r}var Ks=null;he(),Ae();var Qr=x.__private__.getPageInfo=x.getPageInfo=function(_){if(isNaN(_)||_%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:kt[_].objId,pageNumber:_,pageContext:kt[_]}},Zn=x.__private__.getPageInfoByObjId=function(_){if(isNaN(_)||_%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var $ in kt)if(kt[$].objId===_)break;return Qr($)},Xr=x.__private__.getCurrentPageInfo=x.getCurrentPageInfo=function(){return{objId:kt[T].objId,pageNumber:T,pageContext:kt[T]}};x.addPage=function(){return fs.apply(this,arguments),this},x.setPage=function(){return Ps.apply(this,arguments),Ve.call(this,Qe[T]),this},x.insertPage=function(_){return this.addPage(),this.movePage(T,_),this},x.movePage=function(_,$){var ve,ke;if(_>$){ve=Qe[_],ke=kt[_];for(var Ie=_;Ie>$;Ie--)Qe[Ie]=Qe[Ie-1],kt[Ie]=kt[Ie-1];Qe[$]=ve,kt[$]=ke,this.setPage($)}else if(_<$){ve=Qe[_],ke=kt[_];for(var ct=_;ct<$;ct++)Qe[ct]=Qe[ct+1],kt[ct]=kt[ct+1];Qe[$]=ve,kt[$]=ke,this.setPage($)}return this},x.deletePage=function(){return pa.apply(this,arguments),this},x.__private__.text=x.text=function(_,$,ve,ke,Ie){var ct,jt,Xt,ds,_s,Cs,Gs,Ta,Va,va=(ke=ke||{}).scope||this;if(typeof _=="number"&&typeof $=="number"&&(typeof ve=="string"||Array.isArray(ve))){var un=ve;ve=$,$=_,_=un}if(arguments[3]instanceof We==0?(Xt=arguments[4],ds=arguments[5],Ca(Gs=arguments[3])==="object"&&Gs!==null||(typeof Xt=="string"&&(ds=Xt,Xt=null),typeof Gs=="string"&&(ds=Gs,Gs=null),typeof Gs=="number"&&(Xt=Gs,Gs=null),ke={flags:Gs,angle:Xt,align:ds})):(U("The transform parameter of text() with a Matrix value"),Va=Ie),isNaN($)||isNaN(ve)||_==null)throw new Error("Invalid arguments passed to jsPDF.text");if(_.length===0)return va;var $a,hn="",tr=typeof ke.lineHeightFactor=="number"?ke.lineHeightFactor:Wt,qn=va.internal.scaleFactor;function jl(Ys){return Ys=Ys.split("	").join(Array(ke.TabLen||9).join(" ")),as(Ys,Gs)}function ki(Ys){for(var ma,tn=Ys.concat(),Ia=[],Ti=tn.length;Ti--;)typeof(ma=tn.shift())=="string"?Ia.push(ma):Array.isArray(Ys)&&(ma.length===1||ma[1]===void 0&&ma[2]===void 0)?Ia.push(ma[0]):Ia.push([ma[0],ma[1],ma[2]]);return Ia}function Hr(Ys,ma){var tn;if(typeof Ys=="string")tn=ma(Ys)[0];else if(Array.isArray(Ys)){for(var Ia,Ti,Bl=Ys.concat(),Wo=[],$c=Bl.length;$c--;)typeof(Ia=Bl.shift())=="string"?Wo.push(ma(Ia)[0]):Array.isArray(Ia)&&typeof Ia[0]=="string"&&(Ti=ma(Ia[0],Ia[1],Ia[2]),Wo.push([Ti[0],Ti[1],Ti[2]]));tn=Wo}return tn}var fi=!1,Fi=!0;if(typeof _=="string")fi=!0;else if(Array.isArray(_)){var Ui=_.concat();jt=[];for(var Ei,_n=Ui.length;_n--;)(typeof(Ei=Ui.shift())!="string"||Array.isArray(Ei)&&typeof Ei[0]!="string")&&(Fi=!1);fi=Fi}if(fi===!1)throw new Error('Type of text must be string or Array. "'+_+'" is not recognized.');typeof _=="string"&&(_=_.match(/[\r?\n]/)?_.split(/\r\n|\r|\n/g):[_]);var R=Xe/va.internal.scaleFactor,Fe=R*(tr-1);switch(ke.baseline){case"bottom":ve-=Fe;break;case"top":ve+=R-Fe;break;case"hanging":ve+=R-2*Fe;break;case"middle":ve+=R/2-Fe}if((Cs=ke.maxWidth||0)>0&&(typeof _=="string"?_=va.splitTextToSize(_,Cs):Object.prototype.toString.call(_)==="[object Array]"&&(_=_.reduce(function(Ys,ma){return Ys.concat(va.splitTextToSize(ma,Cs))},[]))),ct={text:_,x:$,y:ve,options:ke,mutex:{pdfEscape:as,activeFontKey:bt,fonts:J,activeFontSize:Xe}},Ze.publish("preProcessText",ct),_=ct.text,Xt=(ke=ct.options).angle,Va instanceof We==0&&Xt&&typeof Xt=="number"){Xt*=Math.PI/180,ke.rotationDirection===0&&(Xt=-Xt),F===P&&(Xt=-Xt);var Ge=Math.cos(Xt),it=Math.sin(Xt);Va=new We(Ge,it,-it,Ge,0,0)}else Xt&&Xt instanceof We&&(Va=Xt);F!==P||Va||(Va=Vt),(_s=ke.charSpace||Qa)!==void 0&&(hn+=E(M(_s))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Ta=ke.horizontalScale)!==void 0&&(hn+=E(100*Ta)+` Tz
`),ke.lang;var Ct=-1,Kt=ke.renderingMode!==void 0?ke.renderingMode:ke.stroke,Tt=va.internal.getCurrentPageInfo().pageContext;switch(Kt){case 0:case!1:case"fill":Ct=0;break;case 1:case!0:case"stroke":Ct=1;break;case 2:case"fillThenStroke":Ct=2;break;case 3:case"invisible":Ct=3;break;case 4:case"fillAndAddForClipping":Ct=4;break;case 5:case"strokeAndAddPathForClipping":Ct=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Ct=6;break;case 7:case"addToPathForClipping":Ct=7}var It=Tt.usedRenderingMode!==void 0?Tt.usedRenderingMode:-1;Ct!==-1?hn+=Ct+` Tr
`:It!==-1&&(hn+=`0 Tr
`),Ct!==-1&&(Tt.usedRenderingMode=Ct),ds=ke.align||"left";var Rs,na=Xe*tr,ra=va.internal.pageSize.getWidth(),Ds=J[bt];_s=ke.charSpace||Qa,Cs=ke.maxWidth||0,Gs=Object.assign({autoencode:!0,noBOM:!0},ke.flags);var Ra=[],Wa=function(Ys){return va.getStringUnitWidth(Ys,{font:Ds,charSpace:_s,fontSize:Xe,doKerning:!1})*Xe/qn};if(Object.prototype.toString.call(_)==="[object Array]"){var Da;jt=ki(_),ds!=="left"&&(Rs=jt.map(Wa));var en,ur=0;if(ds==="right"){$-=Rs[0],_=[],_n=jt.length;for(var Bs=0;Bs<_n;Bs++)Bs===0?(en=yn($),Da=jn(ve)):(en=M(ur-Rs[Bs]),Da=-na),_.push([jt[Bs],en,Da]),ur=Rs[Bs]}else if(ds==="center"){$-=Rs[0]/2,_=[],_n=jt.length;for(var ls=0;ls<_n;ls++)ls===0?(en=yn($),Da=jn(ve)):(en=M((ur-Rs[ls])/2),Da=-na),_.push([jt[ls],en,Da]),ur=Rs[ls]}else if(ds==="left"){_=[],_n=jt.length;for(var pn=0;pn<_n;pn++)_.push(jt[pn])}else if(ds==="justify"&&Ds.encoding==="Identity-H"){_=[],_n=jt.length,Cs=Cs!==0?Cs:ra;for(var Nr=0,Ya=0;Ya<_n;Ya++)if(Da=Ya===0?jn(ve):-na,en=Ya===0?yn($):Nr,Ya<_n-1){var Pr=M((Cs-Rs[Ya])/(jt[Ya].split(" ").length-1)),za=jt[Ya].split(" ");_.push([za[0]+" ",en,Da]),Nr=0;for(var Kn=1;Kn<za.length;Kn++){var No=(Wa(za[Kn-1]+" "+za[Kn])-Wa(za[Kn]))*qn+Pr;Kn==za.length-1?_.push([za[Kn],No,0]):_.push([za[Kn]+" ",No,0]),Nr-=No}}else _.push([jt[Ya],en,Da]);_.push(["",Nr,0])}else{if(ds!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(_=[],_n=jt.length,Cs=Cs!==0?Cs:ra,Ya=0;Ya<_n;Ya++){Da=Ya===0?jn(ve):-na,en=Ya===0?yn($):0;var $o=jt[Ya].split(" ").length-1,Li=$o>0?(Cs-Rs[Ya])/$o:0;Ya<_n-1?Ra.push(E(M(Li))):Ra.push(0),_.push([jt[Ya],en,Da])}}}(typeof ke.R2L=="boolean"?ke.R2L:et)===!0&&(_=Hr(_,function(Ys,ma,tn){return[Ys.split("").reverse().join(""),ma,tn]})),ct={text:_,x:$,y:ve,options:ke,mutex:{pdfEscape:as,activeFontKey:bt,fonts:J,activeFontSize:Xe}},Ze.publish("postProcessText",ct),_=ct.text,$a=ct.mutex.isHex||!1;var _l=J[bt].encoding;_l!=="WinAnsiEncoding"&&_l!=="StandardEncoding"||(_=Hr(_,function(Ys,ma,tn){return[jl(Ys),ma,tn]})),jt=ki(_),_=[];for(var Qi,Co,Or,eo=Array.isArray(jt[0])?1:0,ti="",to=function(Ys,ma,tn){var Ia="";return tn instanceof We?(tn=typeof ke.angle=="number"?Lt(tn,new We(1,0,0,1,Ys,ma)):Lt(new We(1,0,0,1,Ys,ma),tn),F===P&&(tn=Lt(new We(1,0,0,-1,0,0),tn)),Ia=tn.join(" ")+` Tm
`):Ia=E(Ys)+" "+E(ma)+` Td
`,Ia},Mr=0;Mr<jt.length;Mr++){switch(ti="",eo){case 1:Or=($a?"<":"(")+jt[Mr][0]+($a?">":")"),Qi=parseFloat(jt[Mr][1]),Co=parseFloat(jt[Mr][2]);break;case 0:Or=($a?"<":"(")+jt[Mr]+($a?">":")"),Qi=yn($),Co=jn(ve)}Ra!==void 0&&Ra[Mr]!==void 0&&(ti=Ra[Mr]+` Tw
`),Mr===0?_.push(ti+to(Qi,Co,Va)+Or):eo===0?_.push(ti+Or):eo===1&&_.push(ti+to(Qi,Co,Va)+Or)}_=eo===0?_.join(` Tj
T* `):_.join(` Tj
`),_+=` Tj
`;var sr=`BT
/`;return sr+=bt+" "+Xe+` Tf
`,sr+=E(Xe*tr)+` TL
`,sr+=Dr+`
`,sr+=hn,sr+=_,je(sr+="ET"),b[bt]=!0,va};var Tr=x.__private__.clip=x.clip=function(_){return je(_==="evenodd"?"W*":"W"),this};x.clipEvenOdd=function(){return Tr("evenodd")},x.__private__.discardPath=x.discardPath=function(){return je("n"),this};var er=x.__private__.isValidStyle=function(_){var $=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(_)!==-1&&($=!0),$};x.__private__.setDefaultPathOperation=x.setDefaultPathOperation=function(_){return er(_)&&(p=_),this};var di=x.__private__.getStyle=x.getStyle=function(_){var $=p;switch(_){case"D":case"S":$="S";break;case"F":$="f";break;case"FD":case"DF":$="B";break;case"f":case"f*":case"B":case"B*":$=_}return $},jr=x.close=function(){return je("h"),this};x.stroke=function(){return je("S"),this},x.fill=function(_){return bs("f",_),this},x.fillEvenOdd=function(_){return bs("f*",_),this},x.fillStroke=function(_){return bs("B",_),this},x.fillStrokeEvenOdd=function(_){return bs("B*",_),this};var bs=function(_,$){Ca($)==="object"?De($,_):je(_)},ae=function(_){_===null||F===P&&_===void 0||(_=di(_),je(_))};function ge(_,$,ve,ke,Ie){var ct=new Tc($||this.boundingBox,ve||this.xStep,ke||this.yStep,this.gState,Ie||this.matrix);ct.stream=this.stream;var jt=_+"$$"+this.cloneIndex+++"$$";return Ot(jt,ct),ct}var De=function(_,$){var ve=Jt[_.key],ke=Et[ve];if(ke instanceof sc)je("q"),je(st($)),ke.gState&&x.setGState(ke.gState),je(_.matrix.toString()+" cm"),je("/"+ve+" sh"),je("Q");else if(ke instanceof Tc){var Ie=new We(1,0,0,-1,0,pi());_.matrix&&(Ie=Ie.multiply(_.matrix||Vt),ve=ge.call(ke,_.key,_.boundingBox,_.xStep,_.yStep,Ie).id),je("q"),je("/Pattern cs"),je("/"+ve+" scn"),ke.gState&&x.setGState(ke.gState),je($),je("Q")}},st=function(_){switch(_){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},gt=x.moveTo=function(_,$){return je(E(M(_))+" "+E(re($))+" m"),this},rt=x.lineTo=function(_,$){return je(E(M(_))+" "+E(re($))+" l"),this},Dt=x.curveTo=function(_,$,ve,ke,Ie,ct){return je([E(M(_)),E(re($)),E(M(ve)),E(re(ke)),E(M(Ie)),E(re(ct)),"c"].join(" ")),this};x.__private__.line=x.line=function(_,$,ve,ke,Ie){if(isNaN(_)||isNaN($)||isNaN(ve)||isNaN(ke)||!er(Ie))throw new Error("Invalid arguments passed to jsPDF.line");return F===L?this.lines([[ve-_,ke-$]],_,$,[1,1],Ie||"S"):this.lines([[ve-_,ke-$]],_,$,[1,1]).stroke()},x.__private__.lines=x.lines=function(_,$,ve,ke,Ie,ct){var jt,Xt,ds,_s,Cs,Gs,Ta,Va,va,un,$a,hn;if(typeof _=="number"&&(hn=ve,ve=$,$=_,_=hn),ke=ke||[1,1],ct=ct||!1,isNaN($)||isNaN(ve)||!Array.isArray(_)||!Array.isArray(ke)||!er(Ie)||typeof ct!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(gt($,ve),jt=ke[0],Xt=ke[1],_s=_.length,un=$,$a=ve,ds=0;ds<_s;ds++)(Cs=_[ds]).length===2?(un=Cs[0]*jt+un,$a=Cs[1]*Xt+$a,rt(un,$a)):(Gs=Cs[0]*jt+un,Ta=Cs[1]*Xt+$a,Va=Cs[2]*jt+un,va=Cs[3]*Xt+$a,un=Cs[4]*jt+un,$a=Cs[5]*Xt+$a,Dt(Gs,Ta,Va,va,un,$a));return ct&&jr(),ae(Ie),this},x.path=function(_){for(var $=0;$<_.length;$++){var ve=_[$],ke=ve.c;switch(ve.op){case"m":gt(ke[0],ke[1]);break;case"l":rt(ke[0],ke[1]);break;case"c":Dt.apply(this,ke);break;case"h":jr()}}return this},x.__private__.rect=x.rect=function(_,$,ve,ke,Ie){if(isNaN(_)||isNaN($)||isNaN(ve)||isNaN(ke)||!er(Ie))throw new Error("Invalid arguments passed to jsPDF.rect");return F===L&&(ke=-ke),je([E(M(_)),E(re($)),E(M(ve)),E(M(ke)),"re"].join(" ")),ae(Ie),this},x.__private__.triangle=x.triangle=function(_,$,ve,ke,Ie,ct,jt){if(isNaN(_)||isNaN($)||isNaN(ve)||isNaN(ke)||isNaN(Ie)||isNaN(ct)||!er(jt))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[ve-_,ke-$],[Ie-ve,ct-ke],[_-Ie,$-ct]],_,$,[1,1],jt,!0),this},x.__private__.roundedRect=x.roundedRect=function(_,$,ve,ke,Ie,ct,jt){if(isNaN(_)||isNaN($)||isNaN(ve)||isNaN(ke)||isNaN(Ie)||isNaN(ct)||!er(jt))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Xt=4/3*(Math.SQRT2-1);return Ie=Math.min(Ie,.5*ve),ct=Math.min(ct,.5*ke),this.lines([[ve-2*Ie,0],[Ie*Xt,0,Ie,ct-ct*Xt,Ie,ct],[0,ke-2*ct],[0,ct*Xt,-Ie*Xt,ct,-Ie,ct],[2*Ie-ve,0],[-Ie*Xt,0,-Ie,-ct*Xt,-Ie,-ct],[0,2*ct-ke],[0,-ct*Xt,Ie*Xt,-ct,Ie,-ct]],_+Ie,$,[1,1],jt,!0),this},x.__private__.ellipse=x.ellipse=function(_,$,ve,ke,Ie){if(isNaN(_)||isNaN($)||isNaN(ve)||isNaN(ke)||!er(Ie))throw new Error("Invalid arguments passed to jsPDF.ellipse");var ct=4/3*(Math.SQRT2-1)*ve,jt=4/3*(Math.SQRT2-1)*ke;return gt(_+ve,$),Dt(_+ve,$-jt,_+ct,$-ke,_,$-ke),Dt(_-ct,$-ke,_-ve,$-jt,_-ve,$),Dt(_-ve,$+jt,_-ct,$+ke,_,$+ke),Dt(_+ct,$+ke,_+ve,$+jt,_+ve,$),ae(Ie),this},x.__private__.circle=x.circle=function(_,$,ve,ke){if(isNaN(_)||isNaN($)||isNaN(ve)||!er(ke))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(_,$,ve,ve,ke)},x.setFont=function(_,$,ve){return ve&&($=q($,ve)),bt=In(_,$,{disableWarning:!1}),this};var Pt=x.__private__.getFont=x.getFont=function(){return J[In.apply(x,arguments)]};x.__private__.getFontList=x.getFontList=function(){var _,$,ve={};for(_ in tt)if(tt.hasOwnProperty(_))for($ in ve[_]=[],tt[_])tt[_].hasOwnProperty($)&&ve[_].push($);return ve},x.addFont=function(_,$,ve,ke,Ie){var ct=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&ct.indexOf(arguments[3])!==-1?Ie=arguments[3]:arguments[3]&&ct.indexOf(arguments[3])==-1&&(ve=q(ve,ke)),vs.call(this,_,$,ve,Ie=Ie||"Identity-H")};var Wt,ms=t.lineWidth||.200025,Mt=x.__private__.getLineWidth=x.getLineWidth=function(){return ms},fa=x.__private__.setLineWidth=x.setLineWidth=function(_){return ms=_,je(E(M(_))+" w"),this};x.__private__.setLineDash=is.API.setLineDash=is.API.setLineDashPattern=function(_,$){if(_=_||[],$=$||0,isNaN($)||!Array.isArray(_))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return _=_.map(function(ve){return E(M(ve))}).join(" "),$=E(M($)),je("["+_+"] "+$+" d"),this};var dn=x.__private__.getLineHeight=x.getLineHeight=function(){return Xe*Wt};x.__private__.getLineHeight=x.getLineHeight=function(){return Xe*Wt};var zn=x.__private__.setLineHeightFactor=x.setLineHeightFactor=function(_){return typeof(_=_||1.15)=="number"&&(Wt=_),this},ka=x.__private__.getLineHeightFactor=x.getLineHeightFactor=function(){return Wt};zn(t.lineHeight);var yn=x.__private__.getHorizontalCoordinate=function(_){return M(_)},jn=x.__private__.getVerticalCoordinate=function(_){return F===P?_:kt[T].mediaBox.topRightY-kt[T].mediaBox.bottomLeftY-M(_)},Rr=x.__private__.getHorizontalCoordinateString=x.getHorizontalCoordinateString=function(_){return E(yn(_))},Vo=x.__private__.getVerticalCoordinateString=x.getVerticalCoordinateString=function(_){return E(jn(_))},Jr=t.strokeColor||"0 G";x.__private__.getStrokeColor=x.getDrawColor=function(){return da(Jr)},x.__private__.setStrokeColor=x.setDrawColor=function(_,$,ve,ke){return Jr=xa({ch1:_,ch2:$,ch3:ve,ch4:ke,pdfColorType:"draw",precision:2}),je(Jr),this};var Xi=t.fillColor||"0 g";x.__private__.getFillColor=x.getFillColor=function(){return da(Xi)},x.__private__.setFillColor=x.setFillColor=function(_,$,ve,ke){return Xi=xa({ch1:_,ch2:$,ch3:ve,ch4:ke,pdfColorType:"fill",precision:2}),je(Xi),this};var Dr=t.textColor||"0 g",Ir=x.__private__.getTextColor=x.getTextColor=function(){return da(Dr)};x.__private__.setTextColor=x.setTextColor=function(_,$,ve,ke){return Dr=xa({ch1:_,ch2:$,ch3:ve,ch4:ke,pdfColorType:"text",precision:3}),this};var Qa=t.charSpace,Za=x.__private__.getCharSpace=x.getCharSpace=function(){return parseFloat(Qa||0)};x.__private__.setCharSpace=x.setCharSpace=function(_){if(isNaN(_))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Qa=_,this};var _r=0;x.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},x.__private__.setLineCap=x.setLineCap=function(_){var $=x.CapJoinStyles[_];if($===void 0)throw new Error("Line cap style of '"+_+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return _r=$,je($+" J"),this};var Zr=0;x.__private__.setLineJoin=x.setLineJoin=function(_){var $=x.CapJoinStyles[_];if($===void 0)throw new Error("Line join style of '"+_+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Zr=$,je($+" j"),this},x.__private__.setLineMiterLimit=x.__private__.setMiterLimit=x.setLineMiterLimit=x.setMiterLimit=function(_){if(_=_||0,isNaN(_))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return je(E(M(_))+" M"),this},x.GState=iu,x.setGState=function(_){(_=typeof _=="string"?os[_e[_]]:Br(null,_)).equals(St)||(je("/"+_.id+" gs"),St=_)};var Br=function(_,$){if(!_||!_e[_]){var ve=!1;for(var ke in os)if(os.hasOwnProperty(ke)&&os[ke].equals($)){ve=!0;break}if(ve)$=os[ke];else{var Ie="GS"+(Object.keys(os).length+1).toString(10);os[Ie]=$,$.id=Ie}return _&&(_e[_]=$.id),Ze.publish("addGState",$),$}};x.addGState=function(_,$){return Br(_,$),this},x.saveGraphicsState=function(){return je("q"),Qt.push({key:bt,size:Xe,color:Dr}),this},x.restoreGraphicsState=function(){je("Q");var _=Qt.pop();return bt=_.key,Xe=_.size,Dr=_.color,St=null,this},x.setCurrentTransformationMatrix=function(_){return je(_.toString()+" cm"),this},x.comment=function(_){return je("#"+_),this};var Si=function(_,$){var ve=_||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return ve},set:function(ct){isNaN(ct)||(ve=parseFloat(ct))}});var ke=$||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return ke},set:function(ct){isNaN(ct)||(ke=parseFloat(ct))}});var Ie="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Ie},set:function(ct){Ie=ct.toString()}}),this},Hn=function(_,$,ve,ke){Si.call(this,_,$),this.type="rect";var Ie=ve||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Ie},set:function(jt){isNaN(jt)||(Ie=parseFloat(jt))}});var ct=ke||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return ct},set:function(jt){isNaN(jt)||(ct=parseFloat(jt))}}),this},ui=function(){this.page=$e,this.currentPage=T,this.pages=Qe.slice(0),this.pagesContext=kt.slice(0),this.x=_t,this.y=Gt,this.matrix=$t,this.width=_o(T),this.height=ei(T),this.outputDestination=mt,this.id="",this.objectNumber=-1};ui.prototype.restore=function(){$e=this.page,T=this.currentPage,kt=this.pagesContext,Qe=this.pages,_t=this.x,Gt=this.y,$t=this.matrix,Ji(T,this.width),hi(T,this.height),mt=this.outputDestination};var Ts=function(_,$,ve,ke,Ie){Re.push(new ui),$e=T=0,Qe=[],_t=_,Gt=$,$t=Ie,ps([ve,ke])};for(var dr in x.beginFormObject=function(_,$,ve,ke,Ie){return Ts(_,$,ve,ke,Ie),this},x.endFormObject=function(_){return function($){if(Ee[$])Re.pop().restore();else{var ve=new ui,ke="Xo"+(Object.keys(we).length+1).toString(10);ve.id=ke,Ee[$]=ke,we[ke]=ve,Ze.publish("addFormObject",ve),Re.pop().restore()}}(_),this},x.doFormObject=function(_,$){var ve=we[Ee[_]];return je("q"),je($.toString()+" cm"),je("/"+ve.id+" Do"),je("Q"),this},x.getFormObject=function(_){var $=we[Ee[_]];return{x:$.x,y:$.y,width:$.width,height:$.height,matrix:$.matrix}},x.save=function(_,$){return _=_||"generated.pdf",($=$||{}).returnPromise=$.returnPromise||!1,$.returnPromise===!1?(Lc(Jn(ea()),_),typeof Lc.unload=="function"&&Es.setTimeout&&setTimeout(Lc.unload,911),this):new Promise(function(ve,ke){try{var Ie=Lc(Jn(ea()),_);typeof Lc.unload=="function"&&Es.setTimeout&&setTimeout(Lc.unload,911),ve(Ie)}catch(ct){ke(ct.message)}})},is.API)is.API.hasOwnProperty(dr)&&(dr==="events"&&is.API.events.length?function(_,$){var ve,ke,Ie;for(Ie=$.length-1;Ie!==-1;Ie--)ve=$[Ie][0],ke=$[Ie][1],_.subscribe.apply(_,[ve].concat(typeof ke=="function"?[ke]:ke))}(Ze,is.API.events):x[dr]=is.API[dr]);function _o(_){return kt[_].mediaBox.topRightX-kt[_].mediaBox.bottomLeftX}function Ji(_,$){kt[_].mediaBox.topRightX=$+kt[_].mediaBox.bottomLeftX}function ei(_){return kt[_].mediaBox.topRightY-kt[_].mediaBox.bottomLeftY}function hi(_,$){kt[_].mediaBox.topRightY=$+kt[_].mediaBox.bottomLeftY}var Bo=x.getPageWidth=function(_){return _o(_=_||T)/Ht},Zi=x.setPageWidth=function(_,$){Ji(_,$*Ht)},pi=x.getPageHeight=function(_){return ei(_=_||T)/Ht},wl=x.setPageHeight=function(_,$){hi(_,$*Ht)};return x.internal={pdfEscape:as,getStyle:di,getFont:Pt,getFontSize:xe,getCharSpace:Za,getTextColor:Ir,getLineHeight:dn,getLineHeightFactor:ka,getLineWidth:Mt,write:Ft,getHorizontalCoordinate:yn,getVerticalCoordinate:jn,getCoordinateString:Rr,getVerticalCoordinateString:Vo,collections:{},newObject:xs,newAdditionalObject:la,newObjectDeferred:Hs,newObjectDeferredBegin:Ms,getFilters:ha,putStream:ya,events:Ze,scaleFactor:Ht,pageSize:{getWidth:function(){return Bo(T)},setWidth:function(_){Zi(T,_)},getHeight:function(){return pi(T)},setHeight:function(_){wl(T,_)}},encryptionOptions:m,encryption:Ks,getEncryptor:function(_){return m!==null?Ks.encryptor(_,0):function($){return $}},output:ja,getNumberOfPages:ca,pages:Qe,out:je,f2:H,f3:I,getPageInfo:Qr,getPageInfoByObjId:Zn,getCurrentPageInfo:Xr,getPDFVersion:Q,Point:Si,Rectangle:Hn,Matrix:We,hasHotfix:wr},Object.defineProperty(x.internal.pageSize,"width",{get:function(){return Bo(T)},set:function(_){Zi(T,_)},enumerable:!0,configurable:!0}),Object.defineProperty(x.internal.pageSize,"height",{get:function(){return pi(T)},set:function(_){wl(T,_)},enumerable:!0,configurable:!0}),(function(_){for(var $=0,ve=at.length;$<ve;$++){var ke=vs.call(this,_[$][0],_[$][1],_[$][2],at[$][3],!0);v===!1&&(b[ke]=!0);var Ie=_[$][0].split("-");ys({id:ke,fontName:Ie[0],fontStyle:Ie[1]||""})}Ze.publish("addFonts",{fonts:J,dictionary:tt})}).call(x,at),bt="F1",fs(o,a),Ze.publish("initialized"),x}LA.prototype.lsbFirstWord=function(t){return String.fromCharCode(255&t,t>>8&255,t>>16&255,t>>24&255)},LA.prototype.toHexString=function(t){return t.split("").map(function(s){return("0"+(255&s.charCodeAt(0)).toString(16)).slice(-2)}).join("")},LA.prototype.hexToBytes=function(t){for(var s=[],a=0;a<t.length;a+=2)s.push(String.fromCharCode(parseInt(t.substr(a,2),16)));return s.join("")},LA.prototype.processOwnerPassword=function(t,s){return rg(ng(s).substr(0,5),t)},LA.prototype.encryptor=function(t,s){var a=ng(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&s,s>>8&255)).substr(0,10);return function(r){return rg(a,r)}},iu.prototype.equals=function(t){var s,a="id,objectNumber,equals";if(!t||Ca(t)!==Ca(this))return!1;var r=0;for(s in this)if(!(a.indexOf(s)>=0)){if(this.hasOwnProperty(s)&&!t.hasOwnProperty(s)||this[s]!==t[s])return!1;r++}for(s in t)t.hasOwnProperty(s)&&a.indexOf(s)<0&&r--;return r===0},is.API={events:[]},is.version="3.0.3";var wn=is.API,Kg=1,Vc=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},BA=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Qs=function(t){return t.toFixed(2)},Jl=function(t){return t.toFixed(5)};wn.__acroform__={};var ci=function(t,s){t.prototype=Object.create(s.prototype),t.prototype.constructor=t},Av=function(t){return t*Kg},Io=function(t){var s=new P1,a=As.internal.getHeight(t)||0,r=As.internal.getWidth(t)||0;return s.BBox=[0,0,Number(Qs(r)),Number(Qs(a))],s},jN=wn.__acroform__.setBit=function(t,s){if(t=t||0,s=s||0,isNaN(t)||isNaN(s))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|1<<s},_N=wn.__acroform__.clearBit=function(t,s){if(t=t||0,s=s||0,isNaN(t)||isNaN(s))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&~(1<<s)},BN=wn.__acroform__.getBit=function(t,s){if(isNaN(t)||isNaN(s))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return t&1<<s?1:0},Qn=wn.__acroform__.getBitForPdf=function(t,s){if(isNaN(t)||isNaN(s))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return BN(t,s-1)},Tn=wn.__acroform__.setBitForPdf=function(t,s){if(isNaN(t)||isNaN(s))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return jN(t,s-1)},Rn=wn.__acroform__.clearBitForPdf=function(t,s){if(isNaN(t)||isNaN(s))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return _N(t,s-1)},NN=wn.__acroform__.calculateCoordinates=function(t,s){var a=s.internal.getHorizontalCoordinate,r=s.internal.getVerticalCoordinate,o=t[0],l=t[1],A=t[2],u=t[3],h={};return h.lowerLeft_X=a(o)||0,h.lowerLeft_Y=r(l+u)||0,h.upperRight_X=a(o+A)||0,h.upperRight_Y=r(l)||0,[Number(Qs(h.lowerLeft_X)),Number(Qs(h.lowerLeft_Y)),Number(Qs(h.upperRight_X)),Number(Qs(h.upperRight_Y))]},CN=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var s=[],a=t._V||t.DV,r=ig(t,a),o=t.scope.internal.getFont(t.fontName,t.fontStyle).id;s.push("/Tx BMC"),s.push("q"),s.push("BT"),s.push(t.scope.__private__.encodeColorString(t.color)),s.push("/"+o+" "+Qs(r.fontSize)+" Tf"),s.push("1 0 0 1 0 0 Tm"),s.push(r.text),s.push("ET"),s.push("Q"),s.push("EMC");var l=Io(t);return l.scope=t.scope,l.stream=s.join(`
`),l}},ig=function(t,s){var a=t.fontSize===0?t.maxFontSize:t.fontSize,r={text:"",fontSize:""},o=(s=(s=s.substr(0,1)=="("?s.substr(1):s).substr(s.length-1)==")"?s.substr(0,s.length-1):s).split(" ");o=t.multiline?o.map(function(H){return H.split(`
`)}):o.map(function(H){return[H]});var l=a,A=As.internal.getHeight(t)||0;A=A<0?-A:A;var u=As.internal.getWidth(t)||0;u=u<0?-u:u;var h=function(H,I,M){if(H+1<o.length){var re=I+" "+o[H+1][0];return Nh(re,t,M).width<=u-4}return!1};l++;e:for(;l>0;){s="",l--;var p,m,v=Nh("3",t,l).height,b=t.multiline?A-l:(A-v)/2,x=b+=2,C=0,Q=0,j=0;if(l<=0){s=`(...) Tj
`,s+="% Width of Text: "+Nh(s,t,l=12).width+", FieldWidth:"+u+`
`;break}for(var B="",L=0,P=0;P<o.length;P++)if(o.hasOwnProperty(P)){var F=!1;if(o[P].length!==1&&j!==o[P].length-1){if((v+2)*(L+2)+2>A)continue e;B+=o[P][j],F=!0,Q=P,P--}else{B=(B+=o[P][j]+" ").substr(B.length-1)==" "?B.substr(0,B.length-1):B;var ee=parseInt(P),K=h(ee,B,l),q=P>=o.length-1;if(K&&!q){B+=" ",j=0;continue}if(K||q){if(q)Q=ee;else if(t.multiline&&(v+2)*(L+2)+2>A)continue e}else{if(!t.multiline||(v+2)*(L+2)+2>A)continue e;Q=ee}}for(var E="",U=C;U<=Q;U++){var V=o[U];if(t.multiline){if(U===Q){E+=V[j]+" ",j=(j+1)%V.length;continue}if(U===C){E+=V[V.length-1]+" ";continue}}E+=V[0]+" "}switch(E=E.substr(E.length-1)==" "?E.substr(0,E.length-1):E,m=Nh(E,t,l).width,t.textAlign){case"right":p=u-m-2;break;case"center":p=(u-m)/2;break;default:p=2}s+=Qs(p)+" "+Qs(x)+` Td
`,s+="("+Vc(E)+`) Tj
`,s+=-Qs(p)+` 0 Td
`,x=-(l+2),m=0,C=F?Q:Q+1,L++,B=""}break}return r.text=s,r.fontSize=l,r},Nh=function(t,s,a){var r=s.scope.internal.getFont(s.fontName,s.fontStyle),o=s.scope.getStringUnitWidth(t,{font:r,fontSize:parseFloat(a),charSpace:0})*parseFloat(a);return{height:s.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(a),charSpace:0})*parseFloat(a)*1.5,width:o}},SN={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},kN=function(t,s){var a={type:"reference",object:t};s.internal.getPageInfo(t.page).pageContext.annotations.find(function(r){return r.type===a.type&&r.object===a.object})===void 0&&s.internal.getPageInfo(t.page).pageContext.annotations.push(a)},FN=function(t,s){if(s.scope=t,t.internal!==void 0&&(t.internal.acroformPlugin===void 0||t.internal.acroformPlugin.isInitialized===!1)){if(bo.FieldNum=0,t.internal.acroformPlugin=JSON.parse(JSON.stringify(SN)),t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");Kg=t.internal.scaleFactor,t.internal.acroformPlugin.acroFormDictionaryRoot=new O1,t.internal.acroformPlugin.acroFormDictionaryRoot.scope=t,t.internal.acroformPlugin.acroFormDictionaryRoot._eventID=t.internal.events.subscribe("postPutResources",function(){(function(a){a.internal.events.unsubscribe(a.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete a.internal.acroformPlugin.acroFormDictionaryRoot._eventID,a.internal.acroformPlugin.printedOut=!0})(t)}),t.internal.events.subscribe("buildDocument",function(){(function(a){a.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=a.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var o in r)if(r.hasOwnProperty(o)){var l=r[o];l.objId=void 0,l.hasAnnotation&&kN(l,a)}})(t)}),t.internal.events.subscribe("putCatalog",function(){(function(a){if(a.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");a.internal.write("/AcroForm "+a.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(t)}),t.internal.events.subscribe("postPutPages",function(a){(function(r,o){var l=!r;for(var A in r||(o.internal.newObjectDeferredBegin(o.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),o.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||o.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(A)){var u=r[A],h=[],p=u.Rect;if(u.Rect&&(u.Rect=NN(u.Rect,o)),o.internal.newObjectDeferredBegin(u.objId,!0),u.DA=As.createDefaultAppearanceStream(u),Ca(u)==="object"&&typeof u.getKeyValueListForStream=="function"&&(h=u.getKeyValueListForStream()),u.Rect=p,u.hasAppearanceStream&&!u.appearanceStreamContent){var m=CN(u);h.push({key:"AP",value:"<</N "+m+">>"}),o.internal.acroformPlugin.xForms.push(m)}if(u.appearanceStreamContent){var v="";for(var b in u.appearanceStreamContent)if(u.appearanceStreamContent.hasOwnProperty(b)){var x=u.appearanceStreamContent[b];if(v+="/"+b+" ",v+="<<",Object.keys(x).length>=1||Array.isArray(x)){for(var A in x)if(x.hasOwnProperty(A)){var C=x[A];typeof C=="function"&&(C=C.call(o,u)),v+="/"+A+" "+C+" ",o.internal.acroformPlugin.xForms.indexOf(C)>=0||o.internal.acroformPlugin.xForms.push(C)}}else typeof(C=x)=="function"&&(C=C.call(o,u)),v+="/"+A+" "+C,o.internal.acroformPlugin.xForms.indexOf(C)>=0||o.internal.acroformPlugin.xForms.push(C);v+=">>"}h.push({key:"AP",value:`<<
`+v+">>"})}o.internal.putStream({additionalKeyValues:h,objectId:u.objId}),o.internal.out("endobj")}l&&function(Q,j){for(var B in Q)if(Q.hasOwnProperty(B)){var L=B,P=Q[B];j.internal.newObjectDeferredBegin(P.objId,!0),Ca(P)==="object"&&typeof P.putStream=="function"&&P.putStream(),delete Q[L]}}(o.internal.acroformPlugin.xForms,o)})(a,t)}),t.internal.acroformPlugin.isInitialized=!0}},H1=wn.__acroform__.arrayToPdfArray=function(t,s,a){var r=function(A){return A};if(Array.isArray(t)){for(var o="[",l=0;l<t.length;l++)switch(l!==0&&(o+=" "),Ca(t[l])){case"boolean":case"number":case"object":o+=t[l].toString();break;case"string":t[l].substr(0,1)!=="/"?(s!==void 0&&a&&(r=a.internal.getEncryptor(s)),o+="("+Vc(r(t[l].toString()))+")"):o+=t[l].toString()}return o+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},ym=function(t,s,a){var r=function(o){return o};return s!==void 0&&a&&(r=a.internal.getEncryptor(s)),(t=t||"").toString(),"("+Vc(r(t))+")"},Po=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Po.prototype.toString=function(){return this.objId+" 0 R"},Po.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},Po.prototype.getKeyValueListForStream=function(){var t=[],s=Object.getOwnPropertyNames(this).filter(function(l){return l!="content"&&l!="appearanceStreamContent"&&l!="scope"&&l!="objId"&&l.substring(0,1)!="_"});for(var a in s)if(Object.getOwnPropertyDescriptor(this,s[a]).configurable===!1){var r=s[a],o=this[r];o&&(Array.isArray(o)?t.push({key:r,value:H1(o,this.objId,this.scope)}):o instanceof Po?(o.scope=this.scope,t.push({key:r,value:o.objId+" 0 R"})):typeof o!="function"&&t.push({key:r,value:o}))}return t};var P1=function(){Po.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,s=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return s},set:function(a){s=a}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(a){t=a.trim()},get:function(){return t||null}})};ci(P1,Po);var O1=function(){Po.call(this);var t,s=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return s.length>0?s:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return s}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var a=function(r){return r};return this.scope&&(a=this.scope.internal.getEncryptor(this.objId)),"("+Vc(a(t))+")"}},set:function(a){t=a}})};ci(O1,Po);var bo=function t(){Po.call(this);var s=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return s},set:function(B){if(isNaN(B))throw new Error('Invalid value "'+B+'" for attribute F supplied.');s=B}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Qn(s,3)},set:function(B){B?this.F=Tn(s,3):this.F=Rn(s,3)}});var a=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return a},set:function(B){if(isNaN(B))throw new Error('Invalid value "'+B+'" for attribute Ff supplied.');a=B}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(B){r=B!==void 0?B:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(B){r[0]=B}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(B){r[1]=B}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(B){r[2]=B}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(B){r[3]=B}});var o="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return o},set:function(B){switch(B){case"/Btn":case"/Tx":case"/Ch":case"/Sig":o=B;break;default:throw new Error('Invalid value "'+B+'" for attribute FT supplied.')}}});var l=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!l||l.length<1){if(this instanceof cp)return;l="FieldObject"+t.FieldNum++}var B=function(L){return L};return this.scope&&(B=this.scope.internal.getEncryptor(this.objId)),"("+Vc(B(l))+")"},set:function(B){l=B.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return l},set:function(B){l=B}});var A="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return A},set:function(B){A=B}});var u="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return u},set:function(B){u=B}});var h=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return h},set:function(B){h=B}});var p=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return p===void 0?50/Kg:p},set:function(B){p=B}});var m="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return m},set:function(B){m=B}});var v="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!v||this instanceof cp||this instanceof oc))return ym(v,this.objId,this.scope)},set:function(B){B=B.toString(),v=B}});var b=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(b)return this instanceof Wn==0?ym(b,this.objId,this.scope):b},set:function(B){B=B.toString(),b=this instanceof Wn==0?B.substr(0,1)==="("?BA(B.substr(1,B.length-2)):BA(B):B}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Wn==1?BA(b.substr(1,b.length-1)):b},set:function(B){B=B.toString(),b=this instanceof Wn==1?"/"+B:B}});var x=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(x)return x},set:function(B){this.V=B}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(x)return this instanceof Wn==0?ym(x,this.objId,this.scope):x},set:function(B){B=B.toString(),x=this instanceof Wn==0?B.substr(0,1)==="("?BA(B.substr(1,B.length-2)):BA(B):B}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Wn==1?BA(x.substr(1,x.length-1)):x},set:function(B){B=B.toString(),x=this instanceof Wn==1?"/"+B:B}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var C,Q=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return Q},set:function(B){B=!!B,Q=B}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(C)return C},set:function(B){C=B}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Qn(this.Ff,1)},set:function(B){B?this.Ff=Tn(this.Ff,1):this.Ff=Rn(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Qn(this.Ff,2)},set:function(B){B?this.Ff=Tn(this.Ff,2):this.Ff=Rn(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Qn(this.Ff,3)},set:function(B){B?this.Ff=Tn(this.Ff,3):this.Ff=Rn(this.Ff,3)}});var j=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(j!==null)return j},set:function(B){if([0,1,2].indexOf(B)===-1)throw new Error('Invalid value "'+B+'" for attribute Q supplied.');j=B}}),Object.defineProperty(this,"textAlign",{get:function(){var B;switch(j){case 0:default:B="left";break;case 1:B="center";break;case 2:B="right"}return B},configurable:!0,enumerable:!0,set:function(B){switch(B){case"right":case 2:j=2;break;case"center":case 1:j=1;break;default:j=0}}})};ci(bo,Po);var Dc=function(){bo.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(a){t=a}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(a){t=a}});var s=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return H1(s,this.objId,this.scope)},set:function(a){var r,o;o=[],typeof(r=a)=="string"&&(o=function(l,A,u){u||(u=1);for(var h,p=[];h=A.exec(l);)p.push(h[u]);return p}(r,/\((.*?)\)/g)),s=o}}),this.getOptions=function(){return s},this.setOptions=function(a){s=a,this.sort&&s.sort()},this.addOption=function(a){a=(a=a||"").toString(),s.push(a),this.sort&&s.sort()},this.removeOption=function(a,r){for(r=r||!1,a=(a=a||"").toString();s.indexOf(a)!==-1&&(s.splice(s.indexOf(a),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Qn(this.Ff,18)},set:function(a){a?this.Ff=Tn(this.Ff,18):this.Ff=Rn(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Qn(this.Ff,19)},set:function(a){this.combo===!0&&(a?this.Ff=Tn(this.Ff,19):this.Ff=Rn(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Qn(this.Ff,20)},set:function(a){a?(this.Ff=Tn(this.Ff,20),s.sort()):this.Ff=Rn(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Qn(this.Ff,22)},set:function(a){a?this.Ff=Tn(this.Ff,22):this.Ff=Rn(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Qn(this.Ff,23)},set:function(a){a?this.Ff=Tn(this.Ff,23):this.Ff=Rn(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Qn(this.Ff,27)},set:function(a){a?this.Ff=Tn(this.Ff,27):this.Ff=Rn(this.Ff,27)}}),this.hasAppearanceStream=!1};ci(Dc,bo);var Ic=function(){Dc.call(this),this.fontName="helvetica",this.combo=!1};ci(Ic,Dc);var Hc=function(){Ic.call(this),this.combo=!0};ci(Hc,Ic);var $d=function(){Hc.call(this),this.edit=!0};ci($d,Hc);var Wn=function(){bo.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Qn(this.Ff,15)},set:function(a){a?this.Ff=Tn(this.Ff,15):this.Ff=Rn(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Qn(this.Ff,16)},set:function(a){a?this.Ff=Tn(this.Ff,16):this.Ff=Rn(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Qn(this.Ff,17)},set:function(a){a?this.Ff=Tn(this.Ff,17):this.Ff=Rn(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Qn(this.Ff,26)},set:function(a){a?this.Ff=Tn(this.Ff,26):this.Ff=Rn(this.Ff,26)}});var t,s={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var a=function(l){return l};if(this.scope&&(a=this.scope.internal.getEncryptor(this.objId)),Object.keys(s).length!==0){var r,o=[];for(r in o.push("<<"),s)o.push("/"+r+" ("+Vc(a(s[r]))+")");return o.push(">>"),o.join(`
`)}},set:function(a){Ca(a)==="object"&&(s=a)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return s.CA||""},set:function(a){typeof a=="string"&&(s.CA=a)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(a){t=a}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(a){t="/"+a}})};ci(Wn,bo);var Wd=function(){Wn.call(this),this.pushButton=!0};ci(Wd,Wn);var Pc=function(){Wn.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(s){t=s!==void 0?s:[]}})};ci(Pc,Wn);var cp=function(){var t,s;bo.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(o){t=o}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return s},set:function(o){s=o}});var a,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var o=function(u){return u};this.scope&&(o=this.scope.internal.getEncryptor(this.objId));var l,A=[];for(l in A.push("<<"),r)A.push("/"+l+" ("+Vc(o(r[l]))+")");return A.push(">>"),A.join(`
`)},set:function(o){Ca(o)==="object"&&(r=o)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(o){typeof o=="string"&&(r.CA=o)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return a},set:function(o){a=o}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return a.substr(1,a.length-1)},set:function(o){a="/"+o}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=As.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};ci(cp,bo),Pc.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var s in this.Kids)if(this.Kids.hasOwnProperty(s)){var a=this.Kids[s];a.appearanceStreamContent=t.createAppearanceStream(a.optionName),a.caption=t.getCA()}},Pc.prototype.createOption=function(t){var s=new cp;return s.Parent=this,s.optionName=t,this.Kids.push(s),UN.call(this.scope,s),s};var Yd=function(){Wn.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=As.CheckBox.createAppearanceStream()};ci(Yd,Wn);var oc=function(){bo.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Qn(this.Ff,13)},set:function(s){s?this.Ff=Tn(this.Ff,13):this.Ff=Rn(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Qn(this.Ff,21)},set:function(s){s?this.Ff=Tn(this.Ff,21):this.Ff=Rn(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Qn(this.Ff,23)},set:function(s){s?this.Ff=Tn(this.Ff,23):this.Ff=Rn(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Qn(this.Ff,24)},set:function(s){s?this.Ff=Tn(this.Ff,24):this.Ff=Rn(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Qn(this.Ff,25)},set:function(s){s?this.Ff=Tn(this.Ff,25):this.Ff=Rn(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Qn(this.Ff,26)},set:function(s){s?this.Ff=Tn(this.Ff,26):this.Ff=Rn(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(s){t=s}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(s){Number.isInteger(s)&&(t=s)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};ci(oc,bo);var Xd=function(){oc.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Qn(this.Ff,14)},set:function(t){t?this.Ff=Tn(this.Ff,14):this.Ff=Rn(this.Ff,14)}}),this.password=!0};ci(Xd,oc);var As={CheckBox:{createAppearanceStream:function(){return{N:{On:As.CheckBox.YesNormal},D:{On:As.CheckBox.YesPushDown,Off:As.CheckBox.OffPushDown}}},YesPushDown:function(t){var s=Io(t);s.scope=t.scope;var a=[],r=t.scope.internal.getFont(t.fontName,t.fontStyle).id,o=t.scope.__private__.encodeColorString(t.color),l=ig(t,t.caption);return a.push("0.749023 g"),a.push("0 0 "+Qs(As.internal.getWidth(t))+" "+Qs(As.internal.getHeight(t))+" re"),a.push("f"),a.push("BMC"),a.push("q"),a.push("0 0 1 rg"),a.push("/"+r+" "+Qs(l.fontSize)+" Tf "+o),a.push("BT"),a.push(l.text),a.push("ET"),a.push("Q"),a.push("EMC"),s.stream=a.join(`
`),s},YesNormal:function(t){var s=Io(t);s.scope=t.scope;var a=t.scope.internal.getFont(t.fontName,t.fontStyle).id,r=t.scope.__private__.encodeColorString(t.color),o=[],l=As.internal.getHeight(t),A=As.internal.getWidth(t),u=ig(t,t.caption);return o.push("1 g"),o.push("0 0 "+Qs(A)+" "+Qs(l)+" re"),o.push("f"),o.push("q"),o.push("0 0 1 rg"),o.push("0 0 "+Qs(A-1)+" "+Qs(l-1)+" re"),o.push("W"),o.push("n"),o.push("0 g"),o.push("BT"),o.push("/"+a+" "+Qs(u.fontSize)+" Tf "+r),o.push(u.text),o.push("ET"),o.push("Q"),s.stream=o.join(`
`),s},OffPushDown:function(t){var s=Io(t);s.scope=t.scope;var a=[];return a.push("0.749023 g"),a.push("0 0 "+Qs(As.internal.getWidth(t))+" "+Qs(As.internal.getHeight(t))+" re"),a.push("f"),s.stream=a.join(`
`),s}},RadioButton:{Circle:{createAppearanceStream:function(t){var s={D:{Off:As.RadioButton.Circle.OffPushDown},N:{}};return s.N[t]=As.RadioButton.Circle.YesNormal,s.D[t]=As.RadioButton.Circle.YesPushDown,s},getCA:function(){return"l"},YesNormal:function(t){var s=Io(t);s.scope=t.scope;var a=[],r=As.internal.getWidth(t)<=As.internal.getHeight(t)?As.internal.getWidth(t)/4:As.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var o=As.internal.Bezier_C,l=Number((r*o).toFixed(5));return a.push("q"),a.push("1 0 0 1 "+Jl(As.internal.getWidth(t)/2)+" "+Jl(As.internal.getHeight(t)/2)+" cm"),a.push(r+" 0 m"),a.push(r+" "+l+" "+l+" "+r+" 0 "+r+" c"),a.push("-"+l+" "+r+" -"+r+" "+l+" -"+r+" 0 c"),a.push("-"+r+" -"+l+" -"+l+" -"+r+" 0 -"+r+" c"),a.push(l+" -"+r+" "+r+" -"+l+" "+r+" 0 c"),a.push("f"),a.push("Q"),s.stream=a.join(`
`),s},YesPushDown:function(t){var s=Io(t);s.scope=t.scope;var a=[],r=As.internal.getWidth(t)<=As.internal.getHeight(t)?As.internal.getWidth(t)/4:As.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var o=Number((2*r).toFixed(5)),l=Number((o*As.internal.Bezier_C).toFixed(5)),A=Number((r*As.internal.Bezier_C).toFixed(5));return a.push("0.749023 g"),a.push("q"),a.push("1 0 0 1 "+Jl(As.internal.getWidth(t)/2)+" "+Jl(As.internal.getHeight(t)/2)+" cm"),a.push(o+" 0 m"),a.push(o+" "+l+" "+l+" "+o+" 0 "+o+" c"),a.push("-"+l+" "+o+" -"+o+" "+l+" -"+o+" 0 c"),a.push("-"+o+" -"+l+" -"+l+" -"+o+" 0 -"+o+" c"),a.push(l+" -"+o+" "+o+" -"+l+" "+o+" 0 c"),a.push("f"),a.push("Q"),a.push("0 g"),a.push("q"),a.push("1 0 0 1 "+Jl(As.internal.getWidth(t)/2)+" "+Jl(As.internal.getHeight(t)/2)+" cm"),a.push(r+" 0 m"),a.push(r+" "+A+" "+A+" "+r+" 0 "+r+" c"),a.push("-"+A+" "+r+" -"+r+" "+A+" -"+r+" 0 c"),a.push("-"+r+" -"+A+" -"+A+" -"+r+" 0 -"+r+" c"),a.push(A+" -"+r+" "+r+" -"+A+" "+r+" 0 c"),a.push("f"),a.push("Q"),s.stream=a.join(`
`),s},OffPushDown:function(t){var s=Io(t);s.scope=t.scope;var a=[],r=As.internal.getWidth(t)<=As.internal.getHeight(t)?As.internal.getWidth(t)/4:As.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var o=Number((2*r).toFixed(5)),l=Number((o*As.internal.Bezier_C).toFixed(5));return a.push("0.749023 g"),a.push("q"),a.push("1 0 0 1 "+Jl(As.internal.getWidth(t)/2)+" "+Jl(As.internal.getHeight(t)/2)+" cm"),a.push(o+" 0 m"),a.push(o+" "+l+" "+l+" "+o+" 0 "+o+" c"),a.push("-"+l+" "+o+" -"+o+" "+l+" -"+o+" 0 c"),a.push("-"+o+" -"+l+" -"+l+" -"+o+" 0 -"+o+" c"),a.push(l+" -"+o+" "+o+" -"+l+" "+o+" 0 c"),a.push("f"),a.push("Q"),s.stream=a.join(`
`),s}},Cross:{createAppearanceStream:function(t){var s={D:{Off:As.RadioButton.Cross.OffPushDown},N:{}};return s.N[t]=As.RadioButton.Cross.YesNormal,s.D[t]=As.RadioButton.Cross.YesPushDown,s},getCA:function(){return"8"},YesNormal:function(t){var s=Io(t);s.scope=t.scope;var a=[],r=As.internal.calculateCross(t);return a.push("q"),a.push("1 1 "+Qs(As.internal.getWidth(t)-2)+" "+Qs(As.internal.getHeight(t)-2)+" re"),a.push("W"),a.push("n"),a.push(Qs(r.x1.x)+" "+Qs(r.x1.y)+" m"),a.push(Qs(r.x2.x)+" "+Qs(r.x2.y)+" l"),a.push(Qs(r.x4.x)+" "+Qs(r.x4.y)+" m"),a.push(Qs(r.x3.x)+" "+Qs(r.x3.y)+" l"),a.push("s"),a.push("Q"),s.stream=a.join(`
`),s},YesPushDown:function(t){var s=Io(t);s.scope=t.scope;var a=As.internal.calculateCross(t),r=[];return r.push("0.749023 g"),r.push("0 0 "+Qs(As.internal.getWidth(t))+" "+Qs(As.internal.getHeight(t))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+Qs(As.internal.getWidth(t)-2)+" "+Qs(As.internal.getHeight(t)-2)+" re"),r.push("W"),r.push("n"),r.push(Qs(a.x1.x)+" "+Qs(a.x1.y)+" m"),r.push(Qs(a.x2.x)+" "+Qs(a.x2.y)+" l"),r.push(Qs(a.x4.x)+" "+Qs(a.x4.y)+" m"),r.push(Qs(a.x3.x)+" "+Qs(a.x3.y)+" l"),r.push("s"),r.push("Q"),s.stream=r.join(`
`),s},OffPushDown:function(t){var s=Io(t);s.scope=t.scope;var a=[];return a.push("0.749023 g"),a.push("0 0 "+Qs(As.internal.getWidth(t))+" "+Qs(As.internal.getHeight(t))+" re"),a.push("f"),s.stream=a.join(`
`),s}}},createDefaultAppearanceStream:function(t){var s=t.scope.internal.getFont(t.fontName,t.fontStyle).id,a=t.scope.__private__.encodeColorString(t.color);return"/"+s+" "+t.fontSize+" Tf "+a}};As.internal={Bezier_C:.551915024494,calculateCross:function(t){var s=As.internal.getWidth(t),a=As.internal.getHeight(t),r=Math.min(s,a);return{x1:{x:(s-r)/2,y:(a-r)/2+r},x2:{x:(s-r)/2+r,y:(a-r)/2},x3:{x:(s-r)/2,y:(a-r)/2},x4:{x:(s-r)/2+r,y:(a-r)/2+r}}}},As.internal.getWidth=function(t){var s=0;return Ca(t)==="object"&&(s=Av(t.Rect[2])),s},As.internal.getHeight=function(t){var s=0;return Ca(t)==="object"&&(s=Av(t.Rect[3])),s};var UN=wn.addField=function(t){if(FN(this,t),!(t instanceof bo))throw new Error("Invalid argument passed to jsPDF.addField.");var s;return(s=t).scope.internal.acroformPlugin.printedOut&&(s.scope.internal.acroformPlugin.printedOut=!1,s.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),s.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(s),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};wn.AcroFormChoiceField=Dc,wn.AcroFormListBox=Ic,wn.AcroFormComboBox=Hc,wn.AcroFormEditBox=$d,wn.AcroFormButton=Wn,wn.AcroFormPushButton=Wd,wn.AcroFormRadioButton=Pc,wn.AcroFormCheckBox=Yd,wn.AcroFormTextField=oc,wn.AcroFormPasswordField=Xd,wn.AcroFormAppearance=As,wn.AcroForm={ChoiceField:Dc,ListBox:Ic,ComboBox:Hc,EditBox:$d,Button:Wn,PushButton:Wd,RadioButton:Pc,CheckBox:Yd,TextField:oc,PasswordField:Xd,Appearance:As},is.AcroForm={ChoiceField:Dc,ListBox:Ic,ComboBox:Hc,EditBox:$d,Button:Wn,PushButton:Wd,RadioButton:Pc,CheckBox:Yd,TextField:oc,PasswordField:Xd,Appearance:As};is.AcroForm;function M1(t){return t.reduce(function(s,a,r){return s[a]=r,s},{})}(function(t){var s="addImage_";t.__addimage__={};var a="UNKNOWN",r={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},o=t.__addimage__.getImageFileTypeByImageData=function(H,I){var M,re,G,Z,fe,Ae=a;if((I=I||a)==="RGBA"||H.data!==void 0&&H.data instanceof Uint8ClampedArray&&"height"in H&&"width"in H)return"RGBA";if(K(H))for(fe in r)for(G=r[fe],M=0;M<G.length;M+=1){for(Z=!0,re=0;re<G[M].length;re+=1)if(G[M][re]!==void 0&&G[M][re]!==H[re]){Z=!1;break}if(Z===!0){Ae=fe;break}}else for(fe in r)for(G=r[fe],M=0;M<G.length;M+=1){for(Z=!0,re=0;re<G[M].length;re+=1)if(G[M][re]!==void 0&&G[M][re]!==H.charCodeAt(re)){Z=!1;break}if(Z===!0){Ae=fe;break}}return Ae===a&&I!==a&&(Ae=I),Ae},l=function H(I){for(var M=this.internal.write,re=this.internal.putStream,G=(0,this.internal.getFilters)();G.indexOf("FlateEncode")!==-1;)G.splice(G.indexOf("FlateEncode"),1);I.objectId=this.internal.newObject();var Z=[];if(Z.push({key:"Type",value:"/XObject"}),Z.push({key:"Subtype",value:"/Image"}),Z.push({key:"Width",value:I.width}),Z.push({key:"Height",value:I.height}),I.colorSpace===B.INDEXED?Z.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(I.palette.length/3-1)+" "+("sMask"in I&&I.sMask!==void 0?I.objectId+2:I.objectId+1)+" 0 R]"}):(Z.push({key:"ColorSpace",value:"/"+I.colorSpace}),I.colorSpace===B.DEVICE_CMYK&&Z.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),Z.push({key:"BitsPerComponent",value:I.bitsPerComponent}),"decodeParameters"in I&&I.decodeParameters!==void 0&&Z.push({key:"DecodeParms",value:"<<"+I.decodeParameters+">>"}),"transparency"in I&&Array.isArray(I.transparency)&&I.transparency.length>0){for(var fe="",Ae=0,Ce=I.transparency.length;Ae<Ce;Ae++)fe+=I.transparency[Ae]+" "+I.transparency[Ae]+" ";Z.push({key:"Mask",value:"["+fe+"]"})}I.sMask!==void 0&&Z.push({key:"SMask",value:I.objectId+1+" 0 R"});var te=I.filter!==void 0?["/"+I.filter]:void 0;if(re({data:I.data,additionalKeyValues:Z,alreadyAppliedFilters:te,objectId:I.objectId}),M("endobj"),"sMask"in I&&I.sMask!==void 0){var he,k=(he=I.sMaskBitsPerComponent)!==null&&he!==void 0?he:I.bitsPerComponent,T={width:I.width,height:I.height,colorSpace:"DeviceGray",bitsPerComponent:k,data:I.sMask};"filter"in I&&(T.decodeParameters="/Predictor ".concat(I.predictor," /Colors 1 /BitsPerComponent ").concat(k," /Columns ").concat(I.width),T.filter=I.filter),H.call(this,T)}if(I.colorSpace===B.INDEXED){var z=this.internal.newObject();re({data:E(new Uint8Array(I.palette)),objectId:z}),M("endobj")}},A=function(){var H=this.internal.collections[s+"images"];for(var I in H)l.call(this,H[I])},u=function(){var H,I=this.internal.collections[s+"images"],M=this.internal.write;for(var re in I)M("/I"+(H=I[re]).index,H.objectId,"0","R")},h=function(){this.internal.collections[s+"images"]||(this.internal.collections[s+"images"]={},this.internal.events.subscribe("putResources",A),this.internal.events.subscribe("putXobjectDict",u))},p=function(){var H=this.internal.collections[s+"images"];return h.call(this),H},m=function(){return Object.keys(this.internal.collections[s+"images"]).length},v=function(H){return typeof t["process"+H.toUpperCase()]=="function"},b=function(H){return Ca(H)==="object"&&H.nodeType===1},x=function(H,I){if(H.nodeName==="IMG"&&H.hasAttribute("src")){var M=""+H.getAttribute("src");if(M.indexOf("data:image/")===0)return tp(unescape(M).split("base64,").pop());var re=t.loadFile(M,!0);if(re!==void 0)return re}if(H.nodeName==="CANVAS"){if(H.width===0||H.height===0)throw new Error("Given canvas must have data. Canvas width: "+H.width+", height: "+H.height);var G;switch(I){case"PNG":G="image/png";break;case"WEBP":G="image/webp";break;default:G="image/jpeg"}return tp(H.toDataURL(G,1).split("base64,").pop())}},C=function(H){var I=this.internal.collections[s+"images"];if(I){for(var M in I)if(H===I[M].alias)return I[M]}},Q=function(H,I,M){return H||I||(H=-96,I=-96),H<0&&(H=-1*M.width*72/H/this.internal.scaleFactor),I<0&&(I=-1*M.height*72/I/this.internal.scaleFactor),H===0&&(H=I*M.width/M.height),I===0&&(I=H*M.height/M.width),[H,I]},j=function(H,I,M,re,G,Z){var fe=Q.call(this,M,re,G),Ae=this.internal.getCoordinateString,Ce=this.internal.getVerticalCoordinateString,te=p.call(this);if(M=fe[0],re=fe[1],te[G.index]=G,Z){Z*=Math.PI/180;var he=Math.cos(Z),k=Math.sin(Z),T=function(le){return le.toFixed(4)},z=[T(he),T(k),T(-1*k),T(he),0,0,"cm"]}this.internal.write("q"),Z?(this.internal.write([1,"0","0",1,Ae(H),Ce(I+re),"cm"].join(" ")),this.internal.write(z.join(" ")),this.internal.write([Ae(M),"0","0",Ae(re),"0","0","cm"].join(" "))):this.internal.write([Ae(M),"0","0",Ae(re),Ae(H),Ce(I+re),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+G.index+" Do"),this.internal.write("Q")},B=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var L=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},P=t.__addimage__.sHashCode=function(H){var I,M,re=0;if(typeof H=="string")for(M=H.length,I=0;I<M;I++)re=(re<<5)-re+H.charCodeAt(I),re|=0;else if(K(H))for(M=H.byteLength/2,I=0;I<M;I++)re=(re<<5)-re+H[I],re|=0;return re},F=t.__addimage__.validateStringAsBase64=function(H){(H=H||"").toString().trim();var I=!0;return H.length===0&&(I=!1),H.length%4!=0&&(I=!1),/^[A-Za-z0-9+/]+$/.test(H.substr(0,H.length-2))===!1&&(I=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(H.substr(-2))===!1&&(I=!1),I},ee=t.__addimage__.extractImageFromDataUrl=function(H){if(H==null||!(H=H.trim()).startsWith("data:"))return null;var I=H.indexOf(",");return I<0?null:H.substring(0,I).trim().endsWith("base64")?H.substring(I+1):null};t.__addimage__.isArrayBuffer=function(H){return H instanceof ArrayBuffer};var K=t.__addimage__.isArrayBufferView=function(H){return H instanceof Int8Array||H instanceof Uint8Array||H instanceof Uint8ClampedArray||H instanceof Int16Array||H instanceof Uint16Array||H instanceof Int32Array||H instanceof Uint32Array||H instanceof Float32Array||H instanceof Float64Array},q=t.__addimage__.binaryStringToUint8Array=function(H){for(var I=H.length,M=new Uint8Array(I),re=0;re<I;re++)M[re]=H.charCodeAt(re);return M},E=t.__addimage__.arrayBufferToBinaryString=function(H){for(var I="",M=K(H)?H:new Uint8Array(H),re=0;re<M.length;re+=8192)I+=String.fromCharCode.apply(null,M.subarray(re,re+8192));return I};t.addImage=function(){var H,I,M,re,G,Z,fe,Ae,Ce;if(typeof arguments[1]=="number"?(I=a,M=arguments[1],re=arguments[2],G=arguments[3],Z=arguments[4],fe=arguments[5],Ae=arguments[6],Ce=arguments[7]):(I=arguments[1],M=arguments[2],re=arguments[3],G=arguments[4],Z=arguments[5],fe=arguments[6],Ae=arguments[7],Ce=arguments[8]),Ca(H=arguments[0])==="object"&&!b(H)&&"imageData"in H){var te=H;H=te.imageData,I=te.format||I||a,M=te.x||M||0,re=te.y||re||0,G=te.w||te.width||G,Z=te.h||te.height||Z,fe=te.alias||fe,Ae=te.compression||Ae,Ce=te.rotation||te.angle||Ce}var he=this.internal.getFilters();if(Ae===void 0&&he.indexOf("FlateEncode")!==-1&&(Ae="SLOW"),isNaN(M)||isNaN(re))throw new Error("Invalid coordinates passed to jsPDF.addImage");h.call(this);var k=U.call(this,H,I,fe,Ae);return j.call(this,M,re,G,Z,k,Ce),this};var U=function(H,I,M,re){var G,Z,fe;if(typeof H=="string"&&o(H)===a){H=unescape(H);var Ae=V(H,!1);(Ae!==""||(Ae=t.loadFile(H,!0))!==void 0)&&(H=Ae)}if(b(H)&&(H=x(H,I)),I=o(H,I),!v(I))throw new Error("addImage does not support files of type '"+I+"', please ensure that a plugin for '"+I+"' support is added.");if(((fe=M)==null||fe.length===0)&&(M=function(Ce){return typeof Ce=="string"||K(Ce)?P(Ce):K(Ce.data)?P(Ce.data):null}(H)),(G=C.call(this,M))||(H instanceof Uint8Array||I==="RGBA"||(Z=H,H=q(H)),G=this["process"+I.toUpperCase()](H,m.call(this),M,function(Ce){return Ce&&typeof Ce=="string"&&(Ce=Ce.toUpperCase()),Ce in t.image_compression?Ce:L.NONE}(re),Z)),!G)throw new Error("An unknown error occurred whilst processing the image.");return G},V=t.__addimage__.convertBase64ToBinaryString=function(H,I){I=typeof I!="boolean"||I;var M,re="";if(typeof H=="string"){var G;M=(G=ee(H))!==null&&G!==void 0?G:H;try{re=tp(M)}catch(Z){if(I)throw F(M)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+Z.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return re};t.getImageProperties=function(H){var I,M,re="";if(b(H)&&(H=x(H)),typeof H=="string"&&o(H)===a&&((re=V(H,!1))===""&&(re=t.loadFile(H)||""),H=re),M=o(H),!v(M))throw new Error("addImage does not support files of type '"+M+"', please ensure that a plugin for '"+M+"' support is added.");if(H instanceof Uint8Array||(H=q(H)),!(I=this["process"+M.toUpperCase()](H)))throw new Error("An unknown error occurred whilst processing the image");return I.fileType=M,I}})(is.API),function(t){var s=function(a){if(a!==void 0&&a!="")return!0};is.API.events.push(["addPage",function(a){this.internal.getPageInfo(a.pageNumber).pageContext.annotations=[]}]),t.events.push(["putPage",function(a){for(var r,o,l,A=this.internal.getCoordinateString,u=this.internal.getVerticalCoordinateString,h=this.internal.getPageInfoByObjId(a.objId),p=a.pageContext.annotations,m=!1,v=0;v<p.length&&!m;v++)switch((r=p[v]).type){case"link":(s(r.options.url)||s(r.options.pageNumber))&&(m=!0);break;case"reference":case"text":case"freetext":m=!0}if(m!=0){this.internal.write("/Annots [");for(var b=0;b<p.length;b++){r=p[b];var x=this.internal.pdfEscape,C=this.internal.getEncryptor(a.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var Q=this.internal.newAdditionalObject(),j=this.internal.newAdditionalObject(),B=this.internal.getEncryptor(Q.objId),L=r.title||"Note";l="<</Type /Annot /Subtype /Text "+(o="/Rect ["+A(r.bounds.x)+" "+u(r.bounds.y+r.bounds.h)+" "+A(r.bounds.x+r.bounds.w)+" "+u(r.bounds.y)+"] ")+"/Contents ("+x(B(r.contents))+")",l+=" /Popup "+j.objId+" 0 R",l+=" /P "+h.objId+" 0 R",l+=" /T ("+x(B(L))+") >>",Q.content=l;var P=Q.objId+" 0 R";l="<</Type /Annot /Subtype /Popup "+(o="/Rect ["+A(r.bounds.x+30)+" "+u(r.bounds.y+r.bounds.h)+" "+A(r.bounds.x+r.bounds.w+30)+" "+u(r.bounds.y)+"] ")+" /Parent "+P,r.open&&(l+=" /Open true"),l+=" >>",j.content=l,this.internal.write(Q.objId,"0 R",j.objId,"0 R");break;case"freetext":o="/Rect ["+A(r.bounds.x)+" "+u(r.bounds.y)+" "+A(r.bounds.x+r.bounds.w)+" "+u(r.bounds.y+r.bounds.h)+"] ";var F=r.color||"#000000";l="<</Type /Annot /Subtype /FreeText "+o+"/Contents ("+x(C(r.contents))+")",l+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+F+")",l+=" /Border [0 0 0]",l+=" >>",this.internal.write(l);break;case"link":if(r.options.name){var ee=this.annotations._nameMap[r.options.name];r.options.pageNumber=ee.page,r.options.top=ee.y}else r.options.top||(r.options.top=0);if(o="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",l="",r.options.url)l="<</Type /Annot /Subtype /Link "+o+"/Border [0 0 0] /A <</S /URI /URI ("+x(C(r.options.url))+") >>";else if(r.options.pageNumber)switch(l="<</Type /Annot /Subtype /Link "+o+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":l+=" /Fit]";break;case"FitH":l+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,l+=" /FitV "+r.options.left+"]";break;default:var K=u(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),l+=" /XYZ "+r.options.left+" "+K+" "+r.options.zoom+"]"}l!=""&&(l+=" >>",this.internal.write(l))}}this.internal.write("]")}}]),t.createAnnotation=function(a){var r=this.internal.getCurrentPageInfo();switch(a.type){case"link":this.link(a.bounds.x,a.bounds.y,a.bounds.w,a.bounds.h,a);break;case"text":case"freetext":r.pageContext.annotations.push(a)}},t.link=function(a,r,o,l,A){var u=this.internal.getCurrentPageInfo(),h=this.internal.getCoordinateString,p=this.internal.getVerticalCoordinateString;u.pageContext.annotations.push({finalBounds:{x:h(a),y:p(r),w:h(a+o),h:p(r+l)},options:A,type:"link"})},t.textWithLink=function(a,r,o,l){var A,u,h=this.getTextWidth(a),p=this.internal.getLineHeight()/this.internal.scaleFactor;if(l.maxWidth!==void 0){u=l.maxWidth;var m=this.splitTextToSize(a,u).length;A=Math.ceil(p*m)}else u=h,A=p;return this.text(a,r,o,l),o+=.2*p,l.align==="center"&&(r-=h/2),l.align==="right"&&(r-=h),this.link(r,o-p,u,A,l),h},t.getTextWidth=function(a){var r=this.internal.getFontSize();return this.getStringUnitWidth(a)*r/this.internal.scaleFactor}}(is.API),function(t){var s={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},a={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},o=[1570,1571,1573,1575];t.__arabicParser__={};var l=t.__arabicParser__.isInArabicSubstitutionA=function(Q){return s[Q.charCodeAt(0)]!==void 0},A=t.__arabicParser__.isArabicLetter=function(Q){return typeof Q=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(Q)},u=t.__arabicParser__.isArabicEndLetter=function(Q){return A(Q)&&l(Q)&&s[Q.charCodeAt(0)].length<=2},h=t.__arabicParser__.isArabicAlfLetter=function(Q){return A(Q)&&o.indexOf(Q.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function(Q){return A(Q)&&l(Q)&&s[Q.charCodeAt(0)].length>=1};var p=t.__arabicParser__.arabicLetterHasFinalForm=function(Q){return A(Q)&&l(Q)&&s[Q.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function(Q){return A(Q)&&l(Q)&&s[Q.charCodeAt(0)].length>=3};var m=t.__arabicParser__.arabicLetterHasMedialForm=function(Q){return A(Q)&&l(Q)&&s[Q.charCodeAt(0)].length==4},v=t.__arabicParser__.resolveLigatures=function(Q){var j=0,B=a,L="",P=0;for(j=0;j<Q.length;j+=1)B[Q.charCodeAt(j)]!==void 0?(P++,typeof(B=B[Q.charCodeAt(j)])=="number"&&(L+=String.fromCharCode(B),B=a,P=0),j===Q.length-1&&(B=a,L+=Q.charAt(j-(P-1)),j-=P-1,P=0)):(B=a,L+=Q.charAt(j-P),j-=P,P=0);return L};t.__arabicParser__.isArabicDiacritic=function(Q){return Q!==void 0&&r[Q.charCodeAt(0)]!==void 0};var b=t.__arabicParser__.getCorrectForm=function(Q,j,B){return A(Q)?l(Q)===!1?-1:!p(Q)||!A(j)&&!A(B)||!A(B)&&u(j)||u(Q)&&!A(j)||u(Q)&&h(j)||u(Q)&&u(j)?0:m(Q)&&A(j)&&!u(j)&&A(B)&&p(B)?3:u(Q)||!A(B)?1:2:-1},x=function(Q){var j=0,B=0,L=0,P="",F="",ee="",K=(Q=Q||"").split("\\s+"),q=[];for(j=0;j<K.length;j+=1){for(q.push(""),B=0;B<K[j].length;B+=1)P=K[j][B],F=K[j][B-1],ee=K[j][B+1],A(P)?(L=b(P,F,ee),q[j]+=L!==-1?String.fromCharCode(s[P.charCodeAt(0)][L]):P):q[j]+=P;q[j]=v(q[j])}return q.join(" ")},C=t.__arabicParser__.processArabic=t.processArabic=function(){var Q,j=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,B=[];if(Array.isArray(j)){var L=0;for(B=[],L=0;L<j.length;L+=1)Array.isArray(j[L])?B.push([x(j[L][0]),j[L][1],j[L][2]]):B.push([x(j[L])]);Q=B}else Q=x(j);return typeof arguments[0]=="string"?Q:(arguments[0].text=Q,arguments[0])};t.events.push(["preProcessText",C])}(is.API),is.API.autoPrint=function(t){var s;return(t=t||{}).variant=t.variant||"non-conform",t.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){s=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+s+" 0 R")})),this},function(t){var s=function(){var a=void 0;Object.defineProperty(this,"pdf",{get:function(){return a},set:function(u){a=u}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(u){r=isNaN(u)||Number.isInteger(u)===!1||u<0?150:u,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var o=300;Object.defineProperty(this,"height",{get:function(){return o},set:function(u){o=isNaN(u)||Number.isInteger(u)===!1||u<0?300:u,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=o+1)}});var l=[];Object.defineProperty(this,"childNodes",{get:function(){return l},set:function(u){l=u}});var A={};Object.defineProperty(this,"style",{get:function(){return A},set:function(u){A=u}}),Object.defineProperty(this,"parentNode",{})};s.prototype.getContext=function(a,r){var o;if((a=a||"2d")!=="2d")return null;for(o in r)this.pdf.context2d.hasOwnProperty(o)&&(this.pdf.context2d[o]=r[o]);return this.pdf.context2d._canvas=this,this.pdf.context2d},s.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new s,this.canvas.pdf=this}])}(is.API),function(t){var s={left:0,top:0,bottom:0,right:0},a=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},s),this.internal.__cell__.margins.width=this.getPageWidth(),o.call(this))},o=function(){this.internal.__cell__.lastCell=new l,this.internal.__cell__.pages=1},l=function(){var h=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return h},set:function(Q){h=Q}});var p=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return p},set:function(Q){p=Q}});var m=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return m},set:function(Q){m=Q}});var v=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return v},set:function(Q){v=Q}});var b=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return b},set:function(Q){b=Q}});var x=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return x},set:function(Q){x=Q}});var C=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return C},set:function(Q){C=Q}}),this};l.prototype.clone=function(){return new l(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},l.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(h){return r.call(this),this.internal.__cell__.headerFunction=typeof h=="function"?h:void 0,this},t.getTextDimensions=function(h,p){r.call(this);var m=(p=p||{}).fontSize||this.getFontSize(),v=p.font||this.getFont(),b=p.scaleFactor||this.internal.scaleFactor,x=0,C=0,Q=0,j=this;if(!Array.isArray(h)&&typeof h!="string"){if(typeof h!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");h=String(h)}var B=p.maxWidth;B>0?typeof h=="string"?h=this.splitTextToSize(h,B):Object.prototype.toString.call(h)==="[object Array]"&&(h=h.reduce(function(P,F){return P.concat(j.splitTextToSize(F,B))},[])):h=Array.isArray(h)?h:[h];for(var L=0;L<h.length;L++)x<(Q=this.getStringUnitWidth(h[L],{font:v})*m)&&(x=Q);return x!==0&&(C=h.length),{w:x/=b,h:Math.max((C*m*this.getLineHeightFactor()-m*(this.getLineHeightFactor()-1))/b,0)}},t.cellAddPage=function(){r.call(this),this.addPage();var h=this.internal.__cell__.margins||s;return this.internal.__cell__.lastCell=new l(h.left,h.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var A=t.cell=function(){var h;h=arguments[0]instanceof l?arguments[0]:new l(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),r.call(this);var p=this.internal.__cell__.lastCell,m=this.internal.__cell__.padding,v=this.internal.__cell__.margins||s,b=this.internal.__cell__.tableHeaderRow,x=this.internal.__cell__.printHeaders;return p.lineNumber!==void 0&&(p.lineNumber===h.lineNumber?(h.x=(p.x||0)+(p.width||0),h.y=p.y||0):p.y+p.height+h.height+v.bottom>this.getPageHeight()?(this.cellAddPage(),h.y=v.top,x&&b&&(this.printHeaderRow(h.lineNumber,!0),h.y+=b[0].height)):h.y=p.y+p.height||h.y),h.text[0]!==void 0&&(this.rect(h.x,h.y,h.width,h.height,a===!0?"FD":void 0),h.align==="right"?this.text(h.text,h.x+h.width-m,h.y+m,{align:"right",baseline:"top"}):h.align==="center"?this.text(h.text,h.x+h.width/2,h.y+m,{align:"center",baseline:"top",maxWidth:h.width-m-m}):this.text(h.text,h.x+m,h.y+m,{align:"left",baseline:"top",maxWidth:h.width-m-m})),this.internal.__cell__.lastCell=h,this};t.table=function(h,p,m,v,b){if(r.call(this),!m)throw new Error("No data for PDF table.");var x,C,Q,j,B=[],L=[],P=[],F={},ee={},K=[],q=[],E=(b=b||{}).autoSize||!1,U=b.printHeaders!==!1,V=b.css&&b.css["font-size"]!==void 0?16*b.css["font-size"]:b.fontSize||12,H=b.margins||Object.assign({width:this.getPageWidth()},s),I=typeof b.padding=="number"?b.padding:3,M=b.headerBackgroundColor||"#c8c8c8",re=b.headerTextColor||"#000";if(o.call(this),this.internal.__cell__.printHeaders=U,this.internal.__cell__.margins=H,this.internal.__cell__.table_font_size=V,this.internal.__cell__.padding=I,this.internal.__cell__.headerBackgroundColor=M,this.internal.__cell__.headerTextColor=re,this.setFontSize(V),v==null)L=B=Object.keys(m[0]),P=B.map(function(){return"left"});else if(Array.isArray(v)&&Ca(v[0])==="object")for(B=v.map(function(te){return te.name}),L=v.map(function(te){return te.prompt||te.name||""}),P=v.map(function(te){return te.align||"left"}),x=0;x<v.length;x+=1)ee[v[x].name]=.7499990551181103*v[x].width;else Array.isArray(v)&&typeof v[0]=="string"&&(L=B=v,P=B.map(function(){return"left"}));if(E||Array.isArray(v)&&typeof v[0]=="string")for(x=0;x<B.length;x+=1){for(F[j=B[x]]=m.map(function(te){return te[j]}),this.setFont(void 0,"bold"),K.push(this.getTextDimensions(L[x],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),C=F[j],this.setFont(void 0,"normal"),Q=0;Q<C.length;Q+=1)K.push(this.getTextDimensions(C[Q],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);ee[j]=Math.max.apply(null,K)+I+I,K=[]}if(U){var G={};for(x=0;x<B.length;x+=1)G[B[x]]={},G[B[x]].text=L[x],G[B[x]].align=P[x];var Z=u.call(this,G,ee);q=B.map(function(te){return new l(h,p,ee[te],Z,G[te].text,void 0,G[te].align)}),this.setTableHeaderRow(q),this.printHeaderRow(1,!1)}var fe=v.reduce(function(te,he){return te[he.name]=he.align,te},{});for(x=0;x<m.length;x+=1){"rowStart"in b&&b.rowStart instanceof Function&&b.rowStart({row:x,data:m[x]},this);var Ae=u.call(this,m[x],ee);for(Q=0;Q<B.length;Q+=1){var Ce=m[x][B[Q]];"cellStart"in b&&b.cellStart instanceof Function&&b.cellStart({row:x,col:Q,data:Ce},this),A.call(this,new l(h,p,ee[B[Q]],Ae,Ce,x+2,fe[B[Q]]))}}return this.internal.__cell__.table_x=h,this.internal.__cell__.table_y=p,this};var u=function(h,p){var m=this.internal.__cell__.padding,v=this.internal.__cell__.table_font_size,b=this.internal.scaleFactor;return Object.keys(h).map(function(x){var C=h[x];return this.splitTextToSize(C.hasOwnProperty("text")?C.text:C,p[x]-m-m)},this).map(function(x){return this.getLineHeightFactor()*x.length*v/b+m+m},this).reduce(function(x,C){return Math.max(x,C)},0)};t.setTableHeaderRow=function(h){r.call(this),this.internal.__cell__.tableHeaderRow=h},t.printHeaderRow=function(h,p){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var m;if(a=!0,typeof this.internal.__cell__.headerFunction=="function"){var v=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new l(v[0],v[1],v[2],v[3],void 0,-1)}this.setFont(void 0,"bold");for(var b=[],x=0;x<this.internal.__cell__.tableHeaderRow.length;x+=1){m=this.internal.__cell__.tableHeaderRow[x].clone(),p&&(m.y=this.internal.__cell__.margins.top||0,b.push(m)),m.lineNumber=h;var C=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),A.call(this,m),this.setTextColor(C)}b.length>0&&this.setTableHeaderRow(b),this.setFont(void 0,"normal"),a=!1}}(is.API);var z1={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},q1=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],og=M1(q1),K1=[100,200,300,400,500,600,700,800,900],EN=M1(K1);function vm(t){var s=t.family.replace(/"|'/g,"").toLowerCase(),a=function(l){return z1[l=l||"normal"]?l:"normal"}(t.style),r=function(l){return l?typeof l=="number"?l>=100&&l<=900&&l%100==0?l:400:/^\d00$/.test(l)?parseInt(l):l==="bold"?700:400:400}(t.weight),o=function(l){return typeof og[l=l||"normal"]=="number"?l:"normal"}(t.stretch);return{family:s,style:a,weight:r,stretch:o,src:t.src||[],ref:t.ref||{name:s,style:[o,a,r].join(" ")}}}function dv(t,s,a,r){var o;for(o=a;o>=0&&o<s.length;o+=r)if(t[s[o]])return t[s[o]];for(o=a;o>=0&&o<s.length;o-=r)if(t[s[o]])return t[s[o]]}var LN={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},uv={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function hv(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function pv(t){return t.trimLeft()}function QN(t,s){for(var a=0;a<t.length;){if(t.charAt(a)===s)return[t.substring(0,a),t.substring(a+1)];a+=1}return null}function TN(t){var s=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return s===null?null:[s[0],t.substring(s[0].length)]}var Ch,fv,mv,NA,Sh,gv,xv,yv,bm=["times"];function vv(t,s,a,r,o){var l=4,A=wv;switch(o){case is.API.image_compression.FAST:l=1,A=bv;break;case is.API.image_compression.MEDIUM:l=6,A=jv;break;case is.API.image_compression.SLOW:l=9,A=_v}t=function(h,p,m,v){for(var b,x=h.length/p,C=new Uint8Array(h.length+x),Q=[RN,bv,wv,jv,_v],j=0;j<x;j+=1){var B=j*p,L=h.subarray(B,B+p);if(v)C.set(v(L,m,b),B+j);else{for(var P=Q.length,F=[],ee=0;ee<P;ee+=1)F[ee]=Q[ee](L,m,b);var K=IN(F.concat());C.set(F[K],B+j)}b=L}return C}(t,s,Math.ceil(a*r/8),A);var u=eg(t,{level:l});return is.API.__addimage__.arrayBufferToBinaryString(u)}function RN(t){var s=Array.apply([],t);return s.unshift(0),s}function bv(t,s){var a=t.length,r=[];r[0]=1;for(var o=0;o<a;o+=1){var l=t[o-s]||0;r[o+1]=t[o]-l+256&255}return r}function wv(t,s,a){var r=t.length,o=[];o[0]=2;for(var l=0;l<r;l+=1){var A=a&&a[l]||0;o[l+1]=t[l]-A+256&255}return o}function jv(t,s,a){var r=t.length,o=[];o[0]=3;for(var l=0;l<r;l+=1){var A=t[l-s]||0,u=a&&a[l]||0;o[l+1]=t[l]+256-(A+u>>>1)&255}return o}function _v(t,s,a){var r=t.length,o=[];o[0]=4;for(var l=0;l<r;l+=1){var A=DN(t[l-s]||0,a&&a[l]||0,a&&a[l-s]||0);o[l+1]=t[l]-A+256&255}return o}function DN(t,s,a){if(t===s&&s===a)return t;var r=Math.abs(s-a),o=Math.abs(t-a),l=Math.abs(t+s-a-a);return r<=o&&r<=l?t:o<=l?s:a}function IN(t){var s=t.map(function(a){return a.reduce(function(r,o){return r+Math.abs(o)},0)});return s.indexOf(Math.min.apply(null,s))}function wm(t,s,a){var r=s*a,o=Math.floor(r/8),l=16-(r-8*o+a),A=(1<<a)-1;return G1(t,o)>>l&A}function Bv(t,s,a,r){var o=a*r,l=Math.floor(o/8),A=16-(o-8*l+r),u=(1<<r)-1,h=(s&u)<<A;(function(p,m,v){if(m+1<p.byteLength)p.setUint16(m,v,!1);else{var b=v>>8&255;p.setUint8(m,b)}})(t,l,G1(t,l)&~(u<<A)&65535|h)}function G1(t,s){return s+1<t.byteLength?t.getUint16(s,!1):t.getUint8(s)<<8}function HN(t){var s=0;if(t[s++]!==71||t[s++]!==73||t[s++]!==70||t[s++]!==56||(t[s++]+1&253)!=56||t[s++]!==97)throw new Error("Invalid GIF 87a/89a header.");var a=t[s++]|t[s++]<<8,r=t[s++]|t[s++]<<8,o=t[s++],l=o>>7,A=1<<1+(7&o);t[s++],t[s++];var u=null,h=null;l&&(u=s,h=A,s+=3*A);var p=!0,m=[],v=0,b=null,x=0,C=null;for(this.width=a,this.height=r;p&&s<t.length;)switch(t[s++]){case 33:switch(t[s++]){case 255:if(t[s]!==11||t[s+1]==78&&t[s+2]==69&&t[s+3]==84&&t[s+4]==83&&t[s+5]==67&&t[s+6]==65&&t[s+7]==80&&t[s+8]==69&&t[s+9]==50&&t[s+10]==46&&t[s+11]==48&&t[s+12]==3&&t[s+13]==1&&t[s+16]==0)s+=14,C=t[s++]|t[s++]<<8,s++;else for(s+=12;;){if(!((H=t[s++])>=0))throw Error("Invalid block size");if(H===0)break;s+=H}break;case 249:if(t[s++]!==4||t[s+4]!==0)throw new Error("Invalid graphics extension block.");var Q=t[s++];v=t[s++]|t[s++]<<8,b=t[s++],1&Q||(b=null),x=Q>>2&7,s++;break;case 254:for(;;){if(!((H=t[s++])>=0))throw Error("Invalid block size");if(H===0)break;s+=H}break;default:throw new Error("Unknown graphic control label: 0x"+t[s-1].toString(16))}break;case 44:var j=t[s++]|t[s++]<<8,B=t[s++]|t[s++]<<8,L=t[s++]|t[s++]<<8,P=t[s++]|t[s++]<<8,F=t[s++],ee=F>>6&1,K=1<<1+(7&F),q=u,E=h,U=!1;F>>7&&(U=!0,q=s,E=K,s+=3*K);var V=s;for(s++;;){var H;if(!((H=t[s++])>=0))throw Error("Invalid block size");if(H===0)break;s+=H}m.push({x:j,y:B,width:L,height:P,has_local_palette:U,palette_offset:q,palette_size:E,data_offset:V,data_length:s-V,transparent_index:b,interlaced:!!ee,delay:v,disposal:x});break;case 59:p=!1;break;default:throw new Error("Unknown gif block: 0x"+t[s-1].toString(16))}this.numFrames=function(){return m.length},this.loopCount=function(){return C},this.frameInfo=function(I){if(I<0||I>=m.length)throw new Error("Frame index out of range.");return m[I]},this.decodeAndBlitFrameBGRA=function(I,M){var re=this.frameInfo(I),G=re.width*re.height,Z=new Uint8Array(G);Nv(t,re.data_offset,Z,G);var fe=re.palette_offset,Ae=re.transparent_index;Ae===null&&(Ae=256);var Ce=re.width,te=a-Ce,he=Ce,k=4*(re.y*a+re.x),T=4*((re.y+re.height)*a+re.x),z=k,le=4*te;re.interlaced===!0&&(le+=4*a*7);for(var X=8,W=0,de=Z.length;W<de;++W){var me=Z[W];if(he===0&&(he=Ce,(z+=le)>=T&&(le=4*te+4*a*(X-1),z=k+(Ce+te)*(X<<1),X>>=1)),me===Ae)z+=4;else{var Be=t[fe+3*me],Qe=t[fe+3*me+1],ut=t[fe+3*me+2];M[z++]=ut,M[z++]=Qe,M[z++]=Be,M[z++]=255}--he}},this.decodeAndBlitFrameRGBA=function(I,M){var re=this.frameInfo(I),G=re.width*re.height,Z=new Uint8Array(G);Nv(t,re.data_offset,Z,G);var fe=re.palette_offset,Ae=re.transparent_index;Ae===null&&(Ae=256);var Ce=re.width,te=a-Ce,he=Ce,k=4*(re.y*a+re.x),T=4*((re.y+re.height)*a+re.x),z=k,le=4*te;re.interlaced===!0&&(le+=4*a*7);for(var X=8,W=0,de=Z.length;W<de;++W){var me=Z[W];if(he===0&&(he=Ce,(z+=le)>=T&&(le=4*te+4*a*(X-1),z=k+(Ce+te)*(X<<1),X>>=1)),me===Ae)z+=4;else{var Be=t[fe+3*me],Qe=t[fe+3*me+1],ut=t[fe+3*me+2];M[z++]=Be,M[z++]=Qe,M[z++]=ut,M[z++]=255}--he}}}function Nv(t,s,a,r){for(var o=t[s++],l=1<<o,A=l+1,u=A+1,h=o+1,p=(1<<h)-1,m=0,v=0,b=0,x=t[s++],C=new Int32Array(4096),Q=null;;){for(;m<16&&x!==0;)v|=t[s++]<<m,m+=8,x===1?x=t[s++]:--x;if(m<h)break;var j=v&p;if(v>>=h,m-=h,j!==l){if(j===A)break;for(var B=j<u?j:Q,L=0,P=B;P>l;)P=C[P]>>8,++L;var F=P;if(b+L+(B!==j?1:0)>r)return void Oa.log("Warning, gif stream longer than expected.");a[b++]=F;var ee=b+=L;for(B!==j&&(a[b++]=F),P=B;L--;)P=C[P],a[--ee]=255&P,P>>=8;Q!==null&&u<4096&&(C[u++]=Q<<8|F,u>=p+1&&h<12&&(++h,p=p<<1|1)),Q=j}else u=A+1,p=(1<<(h=o+1))-1,Q=null}return b!==r&&Oa.log("Warning, gif stream shorter than expected."),a}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function jm(t){var s,a,r,o,l,A=Math.floor,u=new Array(64),h=new Array(64),p=new Array(64),m=new Array(64),v=new Array(65535),b=new Array(65535),x=new Array(64),C=new Array(64),Q=[],j=0,B=7,L=new Array(64),P=new Array(64),F=new Array(64),ee=new Array(256),K=new Array(2048),q=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],E=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],U=[0,1,2,3,4,5,6,7,8,9,10,11],V=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],H=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],I=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],M=[0,1,2,3,4,5,6,7,8,9,10,11],re=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],G=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function Z(k,T){for(var z=0,le=0,X=new Array,W=1;W<=16;W++){for(var de=1;de<=k[W];de++)X[T[le]]=[],X[T[le]][0]=z,X[T[le]][1]=W,le++,z++;z*=2}return X}function fe(k){for(var T=k[0],z=k[1]-1;z>=0;)T&1<<z&&(j|=1<<B),z--,--B<0&&(j==255?(Ae(255),Ae(0)):Ae(j),B=7,j=0)}function Ae(k){Q.push(k)}function Ce(k){Ae(k>>8&255),Ae(255&k)}function te(k,T,z,le,X){for(var W,de=X[0],me=X[240],Be=function(Xe,pt){var xe,et,Oe,Bt,xt,dt,Ut,wt,bt,Ht,_t=0;for(bt=0;bt<8;++bt){xe=Xe[_t],et=Xe[_t+1],Oe=Xe[_t+2],Bt=Xe[_t+3],xt=Xe[_t+4],dt=Xe[_t+5],Ut=Xe[_t+6];var Gt=xe+(wt=Xe[_t+7]),$t=xe-wt,J=et+Ut,tt=et-Ut,Qt=Oe+dt,Et=Oe-dt,Jt=Bt+xt,os=Bt-xt,_e=Gt+Jt,St=Gt-Jt,$e=J+Qt,kt=J-Qt;Xe[_t]=_e+$e,Xe[_t+4]=_e-$e;var Ze=.707106781*(kt+St);Xe[_t+2]=St+Ze,Xe[_t+6]=St-Ze;var oe=.382683433*((_e=os+Et)-(kt=tt+$t)),we=.5411961*_e+oe,Ee=1.306562965*kt+oe,Re=.707106781*($e=Et+tt),We=$t+Re,Lt=$t-Re;Xe[_t+5]=Lt+we,Xe[_t+3]=Lt-we,Xe[_t+1]=We+Ee,Xe[_t+7]=We-Ee,_t+=8}for(_t=0,bt=0;bt<8;++bt){xe=Xe[_t],et=Xe[_t+8],Oe=Xe[_t+16],Bt=Xe[_t+24],xt=Xe[_t+32],dt=Xe[_t+40],Ut=Xe[_t+48];var Vt=xe+(wt=Xe[_t+56]),Ot=xe-wt,ss=et+Ut,xs=et-Ut,Hs=Oe+dt,Ms=Oe-dt,la=Bt+xt,Zs=Bt-xt,Sa=Vt+la,da=Vt-la,xa=ss+Hs,ha=ss-Hs;Xe[_t]=Sa+xa,Xe[_t+32]=Sa-xa;var ya=.707106781*(ha+da);Xe[_t+16]=da+ya,Xe[_t+48]=da-ya;var Ws=.382683433*((Sa=Zs+Ms)-(ha=xs+Ot)),Dn=.5411961*Sa+Ws,Ma=1.306562965*ha+Ws,ie=.707106781*(xa=Ms+xs),Se=Ot+ie,ot=Ot-ie;Xe[_t+40]=ot+Dn,Xe[_t+24]=ot-Dn,Xe[_t+8]=Se+Ma,Xe[_t+56]=Se-Ma,_t++}for(bt=0;bt<64;++bt)Ht=Xe[bt]*pt[bt],x[bt]=Ht>0?Ht+.5|0:Ht-.5|0;return x}(k,T),Qe=0;Qe<64;++Qe)C[q[Qe]]=Be[Qe];var ut=C[0]-z;z=C[0],ut==0?fe(le[0]):(fe(le[b[W=32767+ut]]),fe(v[W]));for(var mt=63;mt>0&&C[mt]==0;)mt--;if(mt==0)return fe(de),z;for(var Ve,je=1;je<=mt;){for(var Ft=je;C[je]==0&&je<=mt;)++je;var Rt=je-Ft;if(Rt>=16){Ve=Rt>>4;for(var at=1;at<=Ve;++at)fe(me);Rt&=15}W=32767+C[je],fe(X[(Rt<<4)+b[W]]),fe(v[W]),je++}return mt!=63&&fe(de),z}function he(k){k=Math.min(Math.max(k,1),100),l!=k&&(function(T){for(var z=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],le=0;le<64;le++){var X=A((z[le]*T+50)/100);X=Math.min(Math.max(X,1),255),u[q[le]]=X}for(var W=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],de=0;de<64;de++){var me=A((W[de]*T+50)/100);me=Math.min(Math.max(me,1),255),h[q[de]]=me}for(var Be=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Qe=0,ut=0;ut<8;ut++)for(var mt=0;mt<8;mt++)p[Qe]=1/(u[q[Qe]]*Be[ut]*Be[mt]*8),m[Qe]=1/(h[q[Qe]]*Be[ut]*Be[mt]*8),Qe++}(k<50?Math.floor(5e3/k):Math.floor(200-2*k)),l=k)}this.encode=function(k,T){T&&he(T),Q=new Array,j=0,B=7,Ce(65496),Ce(65504),Ce(16),Ae(74),Ae(70),Ae(73),Ae(70),Ae(0),Ae(1),Ae(1),Ae(0),Ce(1),Ce(1),Ae(0),Ae(0),function(){Ce(65499),Ce(132),Ae(0);for(var et=0;et<64;et++)Ae(u[et]);Ae(1);for(var Oe=0;Oe<64;Oe++)Ae(h[Oe])}(),function(et,Oe){Ce(65472),Ce(17),Ae(8),Ce(Oe),Ce(et),Ae(3),Ae(1),Ae(17),Ae(0),Ae(2),Ae(17),Ae(1),Ae(3),Ae(17),Ae(1)}(k.width,k.height),function(){Ce(65476),Ce(418),Ae(0);for(var et=0;et<16;et++)Ae(E[et+1]);for(var Oe=0;Oe<=11;Oe++)Ae(U[Oe]);Ae(16);for(var Bt=0;Bt<16;Bt++)Ae(V[Bt+1]);for(var xt=0;xt<=161;xt++)Ae(H[xt]);Ae(1);for(var dt=0;dt<16;dt++)Ae(I[dt+1]);for(var Ut=0;Ut<=11;Ut++)Ae(M[Ut]);Ae(17);for(var wt=0;wt<16;wt++)Ae(re[wt+1]);for(var bt=0;bt<=161;bt++)Ae(G[bt])}(),Ce(65498),Ce(12),Ae(3),Ae(1),Ae(0),Ae(2),Ae(17),Ae(3),Ae(17),Ae(0),Ae(63),Ae(0);var z=0,le=0,X=0;j=0,B=7,this.encode.displayName="_encode_";for(var W,de,me,Be,Qe,ut,mt,Ve,je,Ft=k.data,Rt=k.width,at=k.height,Xe=4*Rt,pt=0;pt<at;){for(W=0;W<Xe;){for(Qe=Xe*pt+W,mt=-1,Ve=0,je=0;je<64;je++)ut=Qe+(Ve=je>>3)*Xe+(mt=4*(7&je)),pt+Ve>=at&&(ut-=Xe*(pt+1+Ve-at)),W+mt>=Xe&&(ut-=W+mt-Xe+4),de=Ft[ut++],me=Ft[ut++],Be=Ft[ut++],L[je]=(K[de]+K[me+256|0]+K[Be+512|0]>>16)-128,P[je]=(K[de+768|0]+K[me+1024|0]+K[Be+1280|0]>>16)-128,F[je]=(K[de+1280|0]+K[me+1536|0]+K[Be+1792|0]>>16)-128;z=te(L,p,z,s,r),le=te(P,m,le,a,o),X=te(F,m,X,a,o),W+=32}pt+=8}if(B>=0){var xe=[];xe[1]=B+1,xe[0]=(1<<B+1)-1,fe(xe)}return Ce(65497),new Uint8Array(Q)},t=t||50,function(){for(var k=String.fromCharCode,T=0;T<256;T++)ee[T]=k(T)}(),s=Z(E,U),a=Z(I,M),r=Z(V,H),o=Z(re,G),function(){for(var k=1,T=2,z=1;z<=15;z++){for(var le=k;le<T;le++)b[32767+le]=z,v[32767+le]=[],v[32767+le][1]=z,v[32767+le][0]=le;for(var X=-(T-1);X<=-k;X++)b[32767+X]=z,v[32767+X]=[],v[32767+X][1]=z,v[32767+X][0]=T-1+X;k<<=1,T<<=1}}(),function(){for(var k=0;k<256;k++)K[k]=19595*k,K[k+256|0]=38470*k,K[k+512|0]=7471*k+32768,K[k+768|0]=-11059*k,K[k+1024|0]=-21709*k,K[k+1280|0]=32768*k+8421375,K[k+1536|0]=-27439*k,K[k+1792|0]=-5329*k}(),he(t)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function mo(t,s){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!s,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function Cv(t){function s(U){if(!U)throw Error("assert :P")}function a(U,V,H){for(var I=0;4>I;I++)if(U[V+I]!=H.charCodeAt(I))return!0;return!1}function r(U,V,H,I,M){for(var re=0;re<M;re++)U[V+re]=H[I+re]}function o(U,V,H,I){for(var M=0;M<I;M++)U[V+M]=H}function l(U){return new Int32Array(U)}function A(U,V){for(var H=[],I=0;I<U;I++)H.push(new V);return H}function u(U,V){var H=[];return function I(M,re,G){for(var Z=G[re],fe=0;fe<Z&&(M.push(G.length>re+1?[]:new V),!(G.length<re+1));fe++)I(M[fe],re+1,G)}(H,0,U),H}var h=function(){var U=this;function V(f,y){for(var S=1<<y-1>>>0;f&S;)S>>>=1;return S?(f&S-1)+S:f}function H(f,y,S,D,Y){s(!(D%S));do f[y+(D-=S)]=Y;while(0<D)}function I(f,y,S,D,Y){if(s(2328>=Y),512>=Y)var se=l(512);else if((se=l(Y))==null)return 0;return function(ne,ue,pe,be,Ue,qe){var ye,Te,Pe=ue,nt=1<<pe,ze=l(16),At=l(16);for(s(Ue!=0),s(be!=null),s(ne!=null),s(0<pe),Te=0;Te<Ue;++Te){if(15<be[Te])return 0;++ze[be[Te]]}if(ze[0]==Ue)return 0;for(At[1]=0,ye=1;15>ye;++ye){if(ze[ye]>1<<ye)return 0;At[ye+1]=At[ye]+ze[ye]}for(Te=0;Te<Ue;++Te)ye=be[Te],0<be[Te]&&(qe[At[ye]++]=Te);if(At[15]==1)return(be=new M).g=0,be.value=qe[0],H(ne,Pe,1,nt,be),nt;var lt,Nt=-1,yt=nt-1,hs=0,es=1,Fs=1,ns=1<<pe;for(Te=0,ye=1,Ue=2;ye<=pe;++ye,Ue<<=1){if(es+=Fs<<=1,0>(Fs-=ze[ye]))return 0;for(;0<ze[ye];--ze[ye])(be=new M).g=ye,be.value=qe[Te++],H(ne,Pe+hs,Ue,ns,be),hs=V(hs,ye)}for(ye=pe+1,Ue=2;15>=ye;++ye,Ue<<=1){if(es+=Fs<<=1,0>(Fs-=ze[ye]))return 0;for(;0<ze[ye];--ze[ye]){if(be=new M,(hs&yt)!=Nt){for(Pe+=ns,lt=1<<(Nt=ye)-pe;15>Nt&&!(0>=(lt-=ze[Nt]));)++Nt,lt<<=1;nt+=ns=1<<(lt=Nt-pe),ne[ue+(Nt=hs&yt)].g=lt+pe,ne[ue+Nt].value=Pe-ue-Nt}be.g=ye-pe,be.value=qe[Te++],H(ne,Pe+(hs>>pe),Ue,ns,be),hs=V(hs,ye)}}return es!=2*At[15]-1?0:nt}(f,y,S,D,Y,se)}function M(){this.value=this.g=0}function re(){this.value=this.g=0}function G(){this.G=A(5,M),this.H=l(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=A(Wa,re)}function Z(f,y,S,D){s(f!=null),s(y!=null),s(2147483648>D),f.Ca=254,f.I=0,f.b=-8,f.Ka=0,f.oa=y,f.pa=S,f.Jd=y,f.Yc=S+D,f.Zc=4<=D?S+D-4+1:S,de(f)}function fe(f,y){for(var S=0;0<y--;)S|=Be(f,128)<<y;return S}function Ae(f,y){var S=fe(f,y);return me(f)?-S:S}function Ce(f,y,S,D){var Y,se=0;for(s(f!=null),s(y!=null),s(4294967288>D),f.Sb=D,f.Ra=0,f.u=0,f.h=0,4<D&&(D=4),Y=0;Y<D;++Y)se+=y[S+Y]<<8*Y;f.Ra=se,f.bb=D,f.oa=y,f.pa=S}function te(f){for(;8<=f.u&&f.bb<f.Sb;)f.Ra>>>=8,f.Ra+=f.oa[f.pa+f.bb]<<ur-8>>>0,++f.bb,f.u-=8;le(f)&&(f.h=1,f.u=0)}function he(f,y){if(s(0<=y),!f.h&&y<=en){var S=z(f)&Da[y];return f.u+=y,te(f),S}return f.h=1,f.u=0}function k(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function T(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function z(f){return f.Ra>>>(f.u&ur-1)>>>0}function le(f){return s(f.bb<=f.Sb),f.h||f.bb==f.Sb&&f.u>ur}function X(f,y){f.u=y,f.h=le(f)}function W(f){f.u>=Bs&&(s(f.u>=Bs),te(f))}function de(f){s(f!=null&&f.oa!=null),f.pa<f.Zc?(f.I=(f.oa[f.pa++]|f.I<<8)>>>0,f.b+=8):(s(f!=null&&f.oa!=null),f.pa<f.Yc?(f.b+=8,f.I=f.oa[f.pa++]|f.I<<8):f.Ka?f.b=0:(f.I<<=8,f.b+=8,f.Ka=1))}function me(f){return fe(f,1)}function Be(f,y){var S=f.Ca;0>f.b&&de(f);var D=f.b,Y=S*y>>>8,se=(f.I>>>D>Y)+0;for(se?(S-=Y,f.I-=Y+1<<D>>>0):S=Y+1,D=S,Y=0;256<=D;)Y+=8,D>>=8;return D=7^Y+ls[D],f.b-=D,f.Ca=(S<<D)-1,se}function Qe(f,y,S){f[y+0]=S>>24&255,f[y+1]=S>>16&255,f[y+2]=S>>8&255,f[y+3]=255&S}function ut(f,y){return f[y+0]|f[y+1]<<8}function mt(f,y){return ut(f,y)|f[y+2]<<16}function Ve(f,y){return ut(f,y)|ut(f,y+2)<<16}function je(f,y){var S=1<<y;return s(f!=null),s(0<y),f.X=l(S),f.X==null?0:(f.Mb=32-y,f.Xa=y,1)}function Ft(f,y){s(f!=null),s(y!=null),s(f.Xa==y.Xa),r(y.X,0,f.X,0,1<<y.Xa)}function Rt(){this.X=[],this.Xa=this.Mb=0}function at(f,y,S,D){s(S!=null),s(D!=null);var Y=S[0],se=D[0];return Y==0&&(Y=(f*se+y/2)/y),se==0&&(se=(y*Y+f/2)/f),0>=Y||0>=se?0:(S[0]=Y,D[0]=se,1)}function Xe(f,y){return f+(1<<y)-1>>>y}function pt(f,y){return((4278255360&f)+(4278255360&y)>>>0&4278255360)+((16711935&f)+(16711935&y)>>>0&16711935)>>>0}function xe(f,y){U[y]=function(S,D,Y,se,ne,ue,pe){var be;for(be=0;be<ne;++be){var Ue=U[f](ue[pe+be-1],Y,se+be);ue[pe+be]=pt(S[D+be],Ue)}}}function et(){this.ud=this.hd=this.jd=0}function Oe(f,y){return((4278124286&(f^y))>>>1)+(f&y)>>>0}function Bt(f){return 0<=f&&256>f?f:0>f?0:255<f?255:void 0}function xt(f,y){return Bt(f+(f-y+.5>>1))}function dt(f,y,S){return Math.abs(y-S)-Math.abs(f-S)}function Ut(f,y,S,D,Y,se,ne){for(D=se[ne-1],S=0;S<Y;++S)se[ne+S]=D=pt(f[y+S],D)}function wt(f,y,S,D,Y){var se;for(se=0;se<S;++se){var ne=f[y+se],ue=ne>>8&255,pe=16711935&(pe=(pe=16711935&ne)+((ue<<16)+ue));D[Y+se]=(4278255360&ne)+pe>>>0}}function bt(f,y){y.jd=255&f,y.hd=f>>8&255,y.ud=f>>16&255}function Ht(f,y,S,D,Y,se){var ne;for(ne=0;ne<D;++ne){var ue=y[S+ne],pe=ue>>>8,be=ue,Ue=255&(Ue=(Ue=ue>>>16)+((f.jd<<24>>24)*(pe<<24>>24)>>>5));be=255&(be=(be+=(f.hd<<24>>24)*(pe<<24>>24)>>>5)+((f.ud<<24>>24)*(Ue<<24>>24)>>>5)),Y[se+ne]=(4278255360&ue)+(Ue<<16)+be}}function _t(f,y,S,D,Y){U[y]=function(se,ne,ue,pe,be,Ue,qe,ye,Te){for(pe=qe;pe<ye;++pe)for(qe=0;qe<Te;++qe)be[Ue++]=Y(ue[D(se[ne++])])},U[f]=function(se,ne,ue,pe,be,Ue,qe){var ye=8>>se.b,Te=se.Ea,Pe=se.K[0],nt=se.w;if(8>ye)for(se=(1<<se.b)-1,nt=(1<<ye)-1;ne<ue;++ne){var ze,At=0;for(ze=0;ze<Te;++ze)ze&se||(At=D(pe[be++])),Ue[qe++]=Y(Pe[At&nt]),At>>=ye}else U["VP8LMapColor"+S](pe,be,Pe,nt,Ue,qe,ne,ue,Te)}}function Gt(f,y,S,D,Y){for(S=y+S;y<S;){var se=f[y++];D[Y++]=se>>16&255,D[Y++]=se>>8&255,D[Y++]=255&se}}function $t(f,y,S,D,Y){for(S=y+S;y<S;){var se=f[y++];D[Y++]=se>>16&255,D[Y++]=se>>8&255,D[Y++]=255&se,D[Y++]=se>>24&255}}function J(f,y,S,D,Y){for(S=y+S;y<S;){var se=(ne=f[y++])>>16&240|ne>>12&15,ne=240&ne|ne>>28&15;D[Y++]=se,D[Y++]=ne}}function tt(f,y,S,D,Y){for(S=y+S;y<S;){var se=(ne=f[y++])>>16&248|ne>>13&7,ne=ne>>5&224|ne>>3&31;D[Y++]=se,D[Y++]=ne}}function Qt(f,y,S,D,Y){for(S=y+S;y<S;){var se=f[y++];D[Y++]=255&se,D[Y++]=se>>8&255,D[Y++]=se>>16&255}}function Et(f,y,S,D,Y,se){if(se==0)for(S=y+S;y<S;)Qe(D,((se=f[y++])[0]>>24|se[1]>>8&65280|se[2]<<8&16711680|se[3]<<24)>>>0),Y+=32;else r(D,Y,f,y,S)}function Jt(f,y){U[y][0]=U[f+"0"],U[y][1]=U[f+"1"],U[y][2]=U[f+"2"],U[y][3]=U[f+"3"],U[y][4]=U[f+"4"],U[y][5]=U[f+"5"],U[y][6]=U[f+"6"],U[y][7]=U[f+"7"],U[y][8]=U[f+"8"],U[y][9]=U[f+"9"],U[y][10]=U[f+"10"],U[y][11]=U[f+"11"],U[y][12]=U[f+"12"],U[y][13]=U[f+"13"],U[y][14]=U[f+"0"],U[y][15]=U[f+"0"]}function os(f){return f==fc||f==So||f==ao||f==Sl}function _e(){this.eb=[],this.size=this.A=this.fb=0}function St(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function $e(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new _e,this.f.kb=new St,this.sd=null}function kt(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Ze(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function oe(f){return alert("todo:WebPSamplerProcessPlane"),f.T}function we(f,y){var S=f.T,D=y.ba.f.RGBA,Y=D.eb,se=D.fb+f.ka*D.A,ne=On[y.ba.S],ue=f.y,pe=f.O,be=f.f,Ue=f.N,qe=f.ea,ye=f.W,Te=y.cc,Pe=y.dc,nt=y.Mc,ze=y.Nc,At=f.ka,lt=f.ka+f.T,Nt=f.U,yt=Nt+1>>1;for(At==0?ne(ue,pe,null,null,be,Ue,qe,ye,be,Ue,qe,ye,Y,se,null,null,Nt):(ne(y.ec,y.fc,ue,pe,Te,Pe,nt,ze,be,Ue,qe,ye,Y,se-D.A,Y,se,Nt),++S);At+2<lt;At+=2)Te=be,Pe=Ue,nt=qe,ze=ye,Ue+=f.Rc,ye+=f.Rc,se+=2*D.A,ne(ue,(pe+=2*f.fa)-f.fa,ue,pe,Te,Pe,nt,ze,be,Ue,qe,ye,Y,se-D.A,Y,se,Nt);return pe+=f.fa,f.j+lt<f.o?(r(y.ec,y.fc,ue,pe,Nt),r(y.cc,y.dc,be,Ue,yt),r(y.Mc,y.Nc,qe,ye,yt),S--):1&lt||ne(ue,pe,null,null,be,Ue,qe,ye,be,Ue,qe,ye,Y,se+D.A,null,null,Nt),S}function Ee(f,y,S){var D=f.F,Y=[f.J];if(D!=null){var se=f.U,ne=y.ba.S,ue=ne==Zo||ne==ao;y=y.ba.f.RGBA;var pe=[0],be=f.ka;pe[0]=f.T,f.Kb&&(be==0?--pe[0]:(--be,Y[0]-=f.width),f.j+f.ka+f.T==f.o&&(pe[0]=f.o-f.j-be));var Ue=y.eb;be=y.fb+be*y.A,f=qr(D,Y[0],f.width,se,pe,Ue,be+(ue?0:3),y.A),s(S==pe),f&&os(ne)&&Nl(Ue,be,ue,se,pe,y.A)}return 0}function Re(f){var y=f.ma,S=y.ba.S,D=11>S,Y=S==Cl||S==pc||S==Zo||S==so||S==12||os(S);if(y.memory=null,y.Ib=null,y.Jb=null,y.Nd=null,!ra(y.Oa,f,Y?11:12))return 0;if(Y&&os(S)&&jl(),f.da)alert("todo:use_scaling");else{if(D){if(y.Ib=oe,f.Kb){if(S=f.U+1>>1,y.memory=l(f.U+2*S),y.memory==null)return 0;y.ec=y.memory,y.fc=0,y.cc=y.ec,y.dc=y.fc+f.U,y.Mc=y.cc,y.Nc=y.dc+S,y.Ib=we,jl()}}else alert("todo:EmitYUV");Y&&(y.Jb=Ee,D&&tr())}if(D&&!Bu){for(f=0;256>f;++f)qp[f]=89858*(f-128)+Nn>>Pi,xc[f]=-22014*(f-128)+Nn,$A[f]=-45773*(f-128),Cn[f]=113618*(f-128)+Nn>>Pi;for(f=Uo;f<nA;++f)y=76283*(f-16)+Nn>>Pi,yc[f-Uo]=Ct(y,255),WA[f-Uo]=Ct(y+8>>4,15);Bu=1}return 1}function We(f){var y=f.ma,S=f.U,D=f.T;return s(!(1&f.ka)),0>=S||0>=D?0:(S=y.Ib(f,y),y.Jb!=null&&y.Jb(f,y,S),y.Dc+=S,1)}function Lt(f){f.ma.memory=null}function Vt(f,y,S,D){return he(f,8)!=47?0:(y[0]=he(f,14)+1,S[0]=he(f,14)+1,D[0]=he(f,1),he(f,3)!=0?0:!f.h)}function Ot(f,y){if(4>f)return f+1;var S=f-2>>1;return(2+(1&f)<<S)+he(y,S)+1}function ss(f,y){return 120<y?y-120:1<=(S=((S=ro[y-1])>>4)*f+(8-(15&S)))?S:1;var S}function xs(f,y,S){var D=z(S),Y=f[y+=255&D].g-8;return 0<Y&&(X(S,S.u+8),D=z(S),y+=f[y].value,y+=D&(1<<Y)-1),X(S,S.u+f[y].g),f[y].value}function Hs(f,y,S){return S.g+=f.g,S.value+=f.value<<y>>>0,s(8>=S.g),f.g}function Ms(f,y,S){var D=f.xc;return s((y=D==0?0:f.vc[f.md*(S>>D)+(y>>D)])<f.Wb),f.Ya[y]}function la(f,y,S,D){var Y=f.ab,se=f.c*y,ne=f.C;y=ne+y;var ue=S,pe=D;for(D=f.Ta,S=f.Ua;0<Y--;){var be=f.gc[Y],Ue=ne,qe=y,ye=ue,Te=pe,Pe=(pe=D,ue=S,be.Ea);switch(s(Ue<qe),s(qe<=be.nc),be.hc){case 2:Ya(ye,Te,(qe-Ue)*Pe,pe,ue);break;case 0:var nt=Ue,ze=qe,At=pe,lt=ue,Nt=(ns=be).Ea;nt==0&&(pn(ye,Te,null,null,1,At,lt),Ut(ye,Te+1,0,0,Nt-1,At,lt+1),Te+=Nt,lt+=Nt,++nt);for(var yt=1<<ns.b,hs=yt-1,es=Xe(Nt,ns.b),Fs=ns.K,ns=ns.w+(nt>>ns.b)*es;nt<ze;){var Vs=Fs,vn=ns,Ss=1;for(Nr(ye,Te,At,lt-Nt,1,At,lt);Ss<Nt;){var rs=(Ss&~hs)+yt;rs>Nt&&(rs=Nt),(0,$o[Vs[vn++]>>8&15])(ye,Te+ +Ss,At,lt+Ss-Nt,rs-Ss,At,lt+Ss),Ss=rs}Te+=Nt,lt+=Nt,++nt&hs||(ns+=es)}qe!=be.nc&&r(pe,ue-Pe,pe,ue+(qe-Ue-1)*Pe,Pe);break;case 1:for(Pe=ye,ze=Te,Nt=(ye=be.Ea)-(lt=ye&~(At=(Te=1<<be.b)-1)),nt=Xe(ye,be.b),yt=be.K,be=be.w+(Ue>>be.b)*nt;Ue<qe;){for(hs=yt,es=be,Fs=new et,ns=ze+lt,Vs=ze+ye;ze<ns;)bt(hs[es++],Fs),Li(Fs,Pe,ze,Te,pe,ue),ze+=Te,ue+=Te;ze<Vs&&(bt(hs[es++],Fs),Li(Fs,Pe,ze,Nt,pe,ue),ze+=Nt,ue+=Nt),++Ue&At||(be+=nt)}break;case 3:if(ye==pe&&Te==ue&&0<be.b){for(ze=pe,ye=Pe=ue+(qe-Ue)*Pe-(lt=(qe-Ue)*Xe(be.Ea,be.b)),Te=pe,At=ue,nt=[],lt=(Nt=lt)-1;0<=lt;--lt)nt[lt]=Te[At+lt];for(lt=Nt-1;0<=lt;--lt)ze[ye+lt]=nt[lt];Pr(be,Ue,qe,pe,Pe,pe,ue)}else Pr(be,Ue,qe,ye,Te,pe,ue)}ue=D,pe=S}pe!=S&&r(D,S,ue,pe,se)}function Zs(f,y){var S=f.V,D=f.Ba+f.c*f.C,Y=y-f.C;if(s(y<=f.l.o),s(16>=Y),0<Y){var se=f.l,ne=f.Ta,ue=f.Ua,pe=se.width;if(la(f,Y,S,D),Y=ue=[ue],s((S=f.C)<(D=y)),s(se.v<se.va),D>se.o&&(D=se.o),S<se.j){var be=se.j-S;S=se.j,Y[0]+=be*pe}if(S>=D?S=0:(Y[0]+=4*se.v,se.ka=S-se.j,se.U=se.va-se.v,se.T=D-S,S=1),S){if(ue=ue[0],11>(S=f.ca).S){var Ue=S.f.RGBA,qe=(D=S.S,Y=se.U,se=se.T,be=Ue.eb,Ue.A),ye=se;for(Ue=Ue.fb+f.Ma*Ue.A;0<ye--;){var Te=ne,Pe=ue,nt=Y,ze=be,At=Ue;switch(D){case ar:_l(Te,Pe,nt,ze,At);break;case Cl:Qi(Te,Pe,nt,ze,At);break;case fc:Qi(Te,Pe,nt,ze,At),Nl(ze,At,0,nt,1,0);break;case Ri:eo(Te,Pe,nt,ze,At);break;case pc:Et(Te,Pe,nt,ze,At,1);break;case So:Et(Te,Pe,nt,ze,At,1),Nl(ze,At,0,nt,1,0);break;case Zo:Et(Te,Pe,nt,ze,At,0);break;case ao:Et(Te,Pe,nt,ze,At,0),Nl(ze,At,1,nt,1,0);break;case so:Co(Te,Pe,nt,ze,At);break;case Sl:Co(Te,Pe,nt,ze,At),zr(ze,At,nt,1,0);break;case Zc:Or(Te,Pe,nt,ze,At);break;default:s(0)}ue+=pe,Ue+=qe}f.Ma+=se}else alert("todo:EmitRescaledRowsYUVA");s(f.Ma<=S.height)}}f.C=y,s(f.C<=f.i)}function Sa(f){var y;if(0<f.ua)return 0;for(y=0;y<f.Wb;++y){var S=f.Ya[y].G,D=f.Ya[y].H;if(0<S[1][D[1]+0].g||0<S[2][D[2]+0].g||0<S[3][D[3]+0].g)return 0}return 1}function da(f,y,S,D,Y,se){if(f.Z!=0){var ne=f.qd,ue=f.rd;for(s(Ii[f.Z]!=null);y<S;++y)Ii[f.Z](ne,ue,D,Y,D,Y,se),ne=D,ue=Y,Y+=se;f.qd=ne,f.rd=ue}}function xa(f,y){var S=f.l.ma,D=S.Z==0||S.Z==1?f.l.j:f.C;if(D=f.C<D?D:f.C,s(y<=f.l.o),y>D){var Y=f.l.width,se=S.ca,ne=S.tb+Y*D,ue=f.V,pe=f.Ba+f.c*D,be=f.gc;s(f.ab==1),s(be[0].hc==3),Kn(be[0],D,y,ue,pe,se,ne),da(S,D,y,se,ne,Y)}f.C=f.Ma=y}function ha(f,y,S,D,Y,se,ne){var ue=f.$/D,pe=f.$%D,be=f.m,Ue=f.s,qe=S+f.$,ye=qe;Y=S+D*Y;var Te=S+D*se,Pe=280+Ue.ua,nt=f.Pb?ue:16777216,ze=0<Ue.ua?Ue.Wa:null,At=Ue.wc,lt=qe<Te?Ms(Ue,pe,ue):null;s(f.C<se),s(Te<=Y);var Nt=!1;e:for(;;){for(;Nt||qe<Te;){var yt=0;if(ue>=nt){var hs=qe-S;s((nt=f).Pb),nt.wd=nt.m,nt.xd=hs,0<nt.s.ua&&Ft(nt.s.Wa,nt.s.vb),nt=ue+wu}if(pe&At||(lt=Ms(Ue,pe,ue)),s(lt!=null),lt.Qb&&(y[qe]=lt.qb,Nt=!0),!Nt)if(W(be),lt.jc){yt=be,hs=y;var es=qe,Fs=lt.pd[z(yt)&Wa-1];s(lt.jc),256>Fs.g?(X(yt,yt.u+Fs.g),hs[es]=Fs.value,yt=0):(X(yt,yt.u+Fs.g-256),s(256<=Fs.value),yt=Fs.value),yt==0&&(Nt=!0)}else yt=xs(lt.G[0],lt.H[0],be);if(be.h)break;if(Nt||256>yt){if(!Nt)if(lt.nd)y[qe]=(lt.qb|yt<<8)>>>0;else{if(W(be),Nt=xs(lt.G[1],lt.H[1],be),W(be),hs=xs(lt.G[2],lt.H[2],be),es=xs(lt.G[3],lt.H[3],be),be.h)break;y[qe]=(es<<24|Nt<<16|yt<<8|hs)>>>0}if(Nt=!1,++qe,++pe>=D&&(pe=0,++ue,ne!=null&&ue<=se&&!(ue%16)&&ne(f,ue),ze!=null))for(;ye<qe;)yt=y[ye++],ze.X[(506832829*yt&4294967295)>>>ze.Mb]=yt}else if(280>yt){if(yt=Ot(yt-256,be),hs=xs(lt.G[4],lt.H[4],be),W(be),hs=ss(D,hs=Ot(hs,be)),be.h)break;if(qe-S<hs||Y-qe<yt)break e;for(es=0;es<yt;++es)y[qe+es]=y[qe+es-hs];for(qe+=yt,pe+=yt;pe>=D;)pe-=D,++ue,ne!=null&&ue<=se&&!(ue%16)&&ne(f,ue);if(s(qe<=Y),pe&At&&(lt=Ms(Ue,pe,ue)),ze!=null)for(;ye<qe;)yt=y[ye++],ze.X[(506832829*yt&4294967295)>>>ze.Mb]=yt}else{if(!(yt<Pe))break e;for(Nt=yt-280,s(ze!=null);ye<qe;)yt=y[ye++],ze.X[(506832829*yt&4294967295)>>>ze.Mb]=yt;yt=qe,s(!(Nt>>>(hs=ze).Xa)),y[yt]=hs.X[Nt],Nt=!0}Nt||s(be.h==le(be))}if(f.Pb&&be.h&&qe<Y)s(f.m.h),f.a=5,f.m=f.wd,f.$=f.xd,0<f.s.ua&&Ft(f.s.vb,f.s.Wa);else{if(be.h)break e;ne?.(f,ue>se?se:ue),f.a=0,f.$=qe-S}return 1}return f.a=3,0}function ya(f){s(f!=null),f.vc=null,f.yc=null,f.Ya=null;var y=f.Wa;y!=null&&(y.X=null),f.vb=null,s(f!=null)}function Ws(){var f=new ds;return f==null?null:(f.a=0,f.xb=kl,Jt("Predictor","VP8LPredictors"),Jt("Predictor","VP8LPredictors_C"),Jt("PredictorAdd","VP8LPredictorsAdd"),Jt("PredictorAdd","VP8LPredictorsAdd_C"),Ya=wt,Li=Ht,_l=Gt,Qi=$t,Co=J,Or=tt,eo=Qt,U.VP8LMapColor32b=za,U.VP8LMapColor8b=No,f)}function Dn(f,y,S,D,Y){var se=1,ne=[f],ue=[y],pe=D.m,be=D.s,Ue=null,qe=0;e:for(;;){if(S)for(;se&&he(pe,1);){var ye=ne,Te=ue,Pe=D,nt=1,ze=Pe.m,At=Pe.gc[Pe.ab],lt=he(ze,2);if(Pe.Oc&1<<lt)se=0;else{switch(Pe.Oc|=1<<lt,At.hc=lt,At.Ea=ye[0],At.nc=Te[0],At.K=[null],++Pe.ab,s(4>=Pe.ab),lt){case 0:case 1:At.b=he(ze,3)+2,nt=Dn(Xe(At.Ea,At.b),Xe(At.nc,At.b),0,Pe,At.K),At.K=At.K[0];break;case 3:var Nt,yt=he(ze,8)+1,hs=16<yt?0:4<yt?1:2<yt?2:3;if(ye[0]=Xe(At.Ea,hs),At.b=hs,Nt=nt=Dn(yt,1,0,Pe,At.K)){var es,Fs=yt,ns=At,Vs=1<<(8>>ns.b),vn=l(Vs);if(vn==null)Nt=0;else{var Ss=ns.K[0],rs=ns.w;for(vn[0]=ns.K[0][0],es=1;es<1*Fs;++es)vn[es]=pt(Ss[rs+es],vn[es-1]);for(;es<4*Vs;++es)vn[es]=0;ns.K[0]=null,ns.K[0]=vn,Nt=1}}nt=Nt;break;case 2:break;default:s(0)}se=nt}}if(ne=ne[0],ue=ue[0],se&&he(pe,1)&&!(se=1<=(qe=he(pe,4))&&11>=qe)){D.a=3;break e}var zt;if(zt=se)t:{var Xa,Us,Is,cs=D,Ls=ne,ta=ue,Ha=qe,fn=S,mn=cs.m,an=cs.s,zs=[null],sa=1,nn=0,ws=tl[Ha];s:for(;;){if(fn&&he(mn,1)){var Sn=he(mn,3)+2,Vr=Xe(Ls,Sn),rn=Xe(ta,Sn),pr=Vr*rn;if(!Dn(Vr,rn,0,cs,zs))break s;for(zs=zs[0],an.xc=Sn,Xa=0;Xa<pr;++Xa){var _a=zs[Xa]>>8&65535;zs[Xa]=_a,_a>=sa&&(sa=_a+1)}}if(mn.h)break s;for(Us=0;5>Us;++Us){var gn=Kr[Us];!Us&&0<Ha&&(gn+=1<<Ha),nn<gn&&(nn=gn)}var fr=A(sa*ws,M),Gn=sa,Fa=A(Gn,G);if(Fa==null)var ia=null;else s(65536>=Gn),ia=Fa;var nr=l(nn);if(ia==null||nr==null||fr==null){cs.a=1;break s}var Vn=fr;for(Xa=Is=0;Xa<sa;++Xa){var ga=ia[Xa],mr=ga.G,kn=ga.H,Oi=0,mi=1,Fn=0;for(Us=0;5>Us;++Us){gn=Kr[Us],mr[Us]=Vn,kn[Us]=Is,!Us&&0<Ha&&(gn+=1<<Ha);n:{var vc,rA=gn,bc=cs,Ul=nr,Su=Vn,ku=Is,wc=0,co=bc.m,Gp=he(co,1);if(o(Ul,0,0,rA),Gp){var Fu=he(co,1)+1,Uu=he(co,1),YA=he(co,Uu==0?1:8);Ul[YA]=1,Fu==2&&(Ul[YA=he(co,8)]=1);var El=1}else{var XA=l(19),JA=he(co,4)+4;if(19<JA){bc.a=3;var jc=0;break n}for(vc=0;vc<JA;++vc)XA[no[vc]]=he(co,3);var iA=void 0,Ll=void 0,Eu=bc,Lu=XA,Ao=rA,_c=Ul,oA=0,gi=Eu.m,Ql=8,ZA=A(128,M);a:for(;I(ZA,0,7,Lu,19);){if(he(gi,1)){var Qu=2+2*he(gi,3);if((iA=2+he(gi,Qu))>Ao)break a}else iA=Ao;for(Ll=0;Ll<Ao&&iA--;){W(gi);var ed=ZA[0+(127&z(gi))];X(gi,gi.u+ed.g);var nl=ed.value;if(16>nl)_c[Ll++]=nl,nl!=0&&(Ql=nl);else{var Tu=nl==16,td=nl-16,sd=ni[td],ad=he(gi,eA[td])+sd;if(Ll+ad>Ao)break a;for(var Ru=Tu?Ql:0;0<ad--;)_c[Ll++]=Ru}}oA=1;break a}oA||(Eu.a=3),El=oA}(El=El&&!co.h)&&(wc=I(Su,ku,8,Ul,rA)),El&&wc!=0?jc=wc:(bc.a=3,jc=0)}if(jc==0)break s;if(mi&&el[Us]==1&&(mi=Vn[Is].g==0),Oi+=Vn[Is].g,Is+=jc,3>=Us){var rl,lA=nr[0];for(rl=1;rl<gn;++rl)nr[rl]>lA&&(lA=nr[rl]);Fn+=lA}}if(ga.nd=mi,ga.Qb=0,mi&&(ga.qb=(mr[3][kn[3]+0].value<<24|mr[1][kn[1]+0].value<<16|mr[2][kn[2]+0].value)>>>0,Oi==0&&256>mr[0][kn[0]+0].value&&(ga.Qb=1,ga.qb+=mr[0][kn[0]+0].value<<8)),ga.jc=!ga.Qb&&6>Fn,ga.jc){var Bc,uo=ga;for(Bc=0;Bc<Wa;++Bc){var Mi=Bc,ho=uo.pd[Mi],Nc=uo.G[0][uo.H[0]+Mi];256<=Nc.value?(ho.g=Nc.g+256,ho.value=Nc.value):(ho.g=0,ho.value=0,Mi>>=Hs(Nc,8,ho),Mi>>=Hs(uo.G[1][uo.H[1]+Mi],16,ho),Mi>>=Hs(uo.G[2][uo.H[2]+Mi],0,ho),Hs(uo.G[3][uo.H[3]+Mi],24,ho))}}}an.vc=zs,an.Wb=sa,an.Ya=ia,an.yc=fr,zt=1;break t}zt=0}if(!(se=zt)){D.a=3;break e}if(0<qe){if(be.ua=1<<qe,!je(be.Wa,qe)){D.a=1,se=0;break e}}else be.ua=0;var Cc=D,nd=ne,Du=ue,rd=Cc.s,id=rd.xc;if(Cc.c=nd,Cc.i=Du,rd.md=Xe(nd,id),rd.wc=id==0?-1:(1<<id)-1,S){D.xb=_u;break e}if((Ue=l(ne*ue))==null){D.a=1,se=0;break e}se=(se=ha(D,Ue,0,ne,ue,ue,null))&&!pe.h;break e}return se?(Y!=null?Y[0]=Ue:(s(Ue==null),s(S)),D.$=0,S||ya(be)):ya(be),se}function Ma(f,y){var S=f.c*f.i,D=S+y+16*y;return s(f.c<=y),f.V=l(D),f.V==null?(f.Ta=null,f.Ua=0,f.a=1,0):(f.Ta=f.V,f.Ua=f.Ba+S+y,1)}function ie(f,y){var S=f.C,D=y-S,Y=f.V,se=f.Ba+f.c*S;for(s(y<=f.l.o);0<D;){var ne=16<D?16:D,ue=f.l.ma,pe=f.l.width,be=pe*ne,Ue=ue.ca,qe=ue.tb+pe*S,ye=f.Ta,Te=f.Ua;la(f,ne,Y,se),Yo(ye,Te,Ue,qe,be),da(ue,S,S+ne,Ue,qe,pe),D-=ne,Y+=ne*f.c,S+=ne}s(S==y),f.C=f.Ma=y}function Se(){this.ub=this.yd=this.td=this.Rb=0}function ot(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function qt(){this.Fb=this.Bb=this.Cb=0,this.Zb=l(4),this.Lb=l(4)}function Zt(){this.Yb=function(){var f=[];return function y(S,D,Y){for(var se=Y[D],ne=0;ne<se&&(S.push(Y.length>D+1?[]:0),!(Y.length<D+1));ne++)y(S[ne],D+1,Y)}(f,0,[3,11]),f}()}function ys(){this.jb=l(3),this.Wc=u([4,8],Zt),this.Xc=u([4,17],Zt)}function vs(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new l(4),this.od=new l(4)}function as(){this.ld=this.La=this.dd=this.tc=0}function ps(){this.Na=this.la=0}function fs(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function pa(){this.ad=l(384),this.Za=0,this.Ob=l(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Ps(){this.uc=this.M=this.Nb=0,this.wa=Array(new as),this.Y=0,this.ya=Array(new pa),this.aa=0,this.l=new Yr}function ca(){this.y=l(16),this.f=l(8),this.ea=l(8)}function In(){this.cb=this.a=0,this.sc="",this.m=new k,this.Od=new Se,this.Kc=new ot,this.ed=new vs,this.Qa=new qt,this.Ic=this.$c=this.Aa=0,this.D=new Ps,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=A(8,k),this.ia=0,this.pb=A(4,fs),this.Pa=new ys,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new ca),this.Hd=0,this.rb=Array(new ps),this.sb=0,this.wa=Array(new as),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new pa),this.L=this.aa=0,this.gd=u([4,2],as),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Yr(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Ai(){var f=new In;return f!=null&&(f.a=0,f.sc="OK",f.cb=0,f.Xb=0,Bn||(Bn=ea)),f}function qs(f,y,S){return f.a==0&&(f.a=y,f.sc=S,f.cb=0),0}function Xn(f,y,S){return 3<=S&&f[y+0]==157&&f[y+1]==1&&f[y+2]==42}function Ci(f,y){if(f==null)return 0;if(f.a=0,f.sc="OK",y==null)return qs(f,2,"null VP8Io passed to VP8GetHeaders()");var S=y.data,D=y.w,Y=y.ha;if(4>Y)return qs(f,7,"Truncated header.");var se=S[D+0]|S[D+1]<<8|S[D+2]<<16,ne=f.Od;if(ne.Rb=!(1&se),ne.td=se>>1&7,ne.yd=se>>4&1,ne.ub=se>>5,3<ne.td)return qs(f,3,"Incorrect keyframe parameters.");if(!ne.yd)return qs(f,4,"Frame not displayable.");D+=3,Y-=3;var ue=f.Kc;if(ne.Rb){if(7>Y)return qs(f,7,"cannot parse picture header");if(!Xn(S,D,Y))return qs(f,3,"Bad code word");ue.c=16383&(S[D+4]<<8|S[D+3]),ue.Td=S[D+4]>>6,ue.i=16383&(S[D+6]<<8|S[D+5]),ue.Ud=S[D+6]>>6,D+=7,Y-=7,f.za=ue.c+15>>4,f.Ub=ue.i+15>>4,y.width=ue.c,y.height=ue.i,y.Da=0,y.j=0,y.v=0,y.va=y.width,y.o=y.height,y.da=0,y.ib=y.width,y.hb=y.height,y.U=y.width,y.T=y.height,o((se=f.Pa).jb,0,255,se.jb.length),s((se=f.Qa)!=null),se.Cb=0,se.Bb=0,se.Fb=1,o(se.Zb,0,0,se.Zb.length),o(se.Lb,0,0,se.Lb)}if(ne.ub>Y)return qs(f,7,"bad partition length");Z(se=f.m,S,D,ne.ub),D+=ne.ub,Y-=ne.ub,ne.Rb&&(ue.Ld=me(se),ue.Kd=me(se)),ue=f.Qa;var pe,be=f.Pa;if(s(se!=null),s(ue!=null),ue.Cb=me(se),ue.Cb){if(ue.Bb=me(se),me(se)){for(ue.Fb=me(se),pe=0;4>pe;++pe)ue.Zb[pe]=me(se)?Ae(se,7):0;for(pe=0;4>pe;++pe)ue.Lb[pe]=me(se)?Ae(se,6):0}if(ue.Bb)for(pe=0;3>pe;++pe)be.jb[pe]=me(se)?fe(se,8):255}else ue.Bb=0;if(se.Ka)return qs(f,3,"cannot parse segment header");if((ue=f.ed).zd=me(se),ue.Tb=fe(se,6),ue.wb=fe(se,3),ue.Pc=me(se),ue.Pc&&me(se)){for(be=0;4>be;++be)me(se)&&(ue.vd[be]=Ae(se,6));for(be=0;4>be;++be)me(se)&&(ue.od[be]=Ae(se,6))}if(f.L=ue.Tb==0?0:ue.zd?1:2,se.Ka)return qs(f,3,"cannot parse filter header");var Ue=Y;if(Y=pe=D,D=pe+Ue,ue=Ue,f.Xb=(1<<fe(f.m,2))-1,Ue<3*(be=f.Xb))S=7;else{for(pe+=3*be,ue-=3*be,Ue=0;Ue<be;++Ue){var qe=S[Y+0]|S[Y+1]<<8|S[Y+2]<<16;qe>ue&&(qe=ue),Z(f.Jc[+Ue],S,pe,qe),pe+=qe,ue-=qe,Y+=3}Z(f.Jc[+be],S,pe,ue),S=pe<D?0:5}if(S!=0)return qs(f,S,"cannot parse partitions");for(S=fe(pe=f.m,7),Y=me(pe)?Ae(pe,4):0,D=me(pe)?Ae(pe,4):0,ue=me(pe)?Ae(pe,4):0,be=me(pe)?Ae(pe,4):0,pe=me(pe)?Ae(pe,4):0,Ue=f.Qa,qe=0;4>qe;++qe){if(Ue.Cb){var ye=Ue.Zb[qe];Ue.Fb||(ye+=S)}else{if(0<qe){f.pb[qe]=f.pb[0];continue}ye=S}var Te=f.pb[qe];Te.Sc[0]=mc[Ct(ye+Y,127)],Te.Sc[1]=gc[Ct(ye+0,127)],Te.Eb[0]=2*mc[Ct(ye+D,127)],Te.Eb[1]=101581*gc[Ct(ye+ue,127)]>>16,8>Te.Eb[1]&&(Te.Eb[1]=8),Te.Qc[0]=mc[Ct(ye+be,117)],Te.Qc[1]=gc[Ct(ye+pe,127)],Te.lc=ye+pe}if(!ne.Rb)return qs(f,4,"Not a key frame.");for(me(se),ne=f.Pa,S=0;4>S;++S){for(Y=0;8>Y;++Y)for(D=0;3>D;++D)for(ue=0;11>ue;++ue)be=Be(se,sl[S][Y][D][ue])?fe(se,8):Di[S][Y][D][ue],ne.Wc[S][Y].Yb[D][ue]=be;for(Y=0;17>Y;++Y)ne.Xc[S][Y]=ne.Wc[S][ju[Y]]}return f.kc=me(se),f.kc&&(f.Bd=fe(se,8)),f.cb=1}function ea(f,y,S,D,Y,se,ne){var ue=y[Y].Yb[S];for(S=0;16>Y;++Y){if(!Be(f,ue[S+0]))return Y;for(;!Be(f,ue[S+1]);)if(ue=y[++Y].Yb[0],S=0,Y==16)return 16;var pe=y[Y+1].Yb;if(Be(f,ue[S+2])){var be=f,Ue=0;if(Be(be,(ye=ue)[(qe=S)+3]))if(Be(be,ye[qe+6])){for(ue=0,qe=2*(Ue=Be(be,ye[qe+8]))+(ye=Be(be,ye[qe+9+Ue])),Ue=0,ye=sn[qe];ye[ue];++ue)Ue+=Ue+Be(be,ye[ue]);Ue+=3+(8<<qe)}else Be(be,ye[qe+7])?(Ue=7+2*Be(be,165),Ue+=Be(be,145)):Ue=5+Be(be,159);else Ue=Be(be,ye[qe+4])?3+Be(be,ye[qe+5]):2;ue=pe[2]}else Ue=1,ue=pe[1];pe=ne+Aa[Y],0>(be=f).b&&de(be);var qe,ye=be.b,Te=(qe=be.Ca>>1)-(be.I>>ye)>>31;--be.b,be.Ca+=Te,be.Ca|=1,be.I-=(qe+1&Te)<<ye,se[pe]=((Ue^Te)-Te)*D[(0<Y)+0]}return 16}function Jn(f){var y=f.rb[f.sb-1];y.la=0,y.Na=0,o(f.zc,0,0,f.zc.length),f.ja=0}function ja(f,y,S,D,Y){Y=f[y+S+32*D]+(Y>>3),f[y+S+32*D]=-256&Y?0>Y?0:255:Y}function wr(f,y,S,D,Y,se){ja(f,y,0,S,D+Y),ja(f,y,1,S,D+se),ja(f,y,2,S,D-se),ja(f,y,3,S,D-Y)}function Ks(f){return(20091*f>>16)+f}function Qr(f,y,S,D){var Y,se=0,ne=l(16);for(Y=0;4>Y;++Y){var ue=f[y+0]+f[y+8],pe=f[y+0]-f[y+8],be=(35468*f[y+4]>>16)-Ks(f[y+12]),Ue=Ks(f[y+4])+(35468*f[y+12]>>16);ne[se+0]=ue+Ue,ne[se+1]=pe+be,ne[se+2]=pe-be,ne[se+3]=ue-Ue,se+=4,y++}for(Y=se=0;4>Y;++Y)ue=(f=ne[se+0]+4)+ne[se+8],pe=f-ne[se+8],be=(35468*ne[se+4]>>16)-Ks(ne[se+12]),ja(S,D,0,0,ue+(Ue=Ks(ne[se+4])+(35468*ne[se+12]>>16))),ja(S,D,1,0,pe+be),ja(S,D,2,0,pe-be),ja(S,D,3,0,ue-Ue),se++,D+=32}function Zn(f,y,S,D){var Y=f[y+0]+4,se=35468*f[y+4]>>16,ne=Ks(f[y+4]),ue=35468*f[y+1]>>16;wr(S,D,0,Y+ne,f=Ks(f[y+1]),ue),wr(S,D,1,Y+se,f,ue),wr(S,D,2,Y-se,f,ue),wr(S,D,3,Y-ne,f,ue)}function Xr(f,y,S,D,Y){Qr(f,y,S,D),Y&&Qr(f,y+16,S,D+4)}function Tr(f,y,S,D){to(f,y+0,S,D,1),to(f,y+32,S,D+128,1)}function er(f,y,S,D){var Y;for(f=f[y+0]+4,Y=0;4>Y;++Y)for(y=0;4>y;++y)ja(S,D,y,Y,f)}function di(f,y,S,D){f[y+0]&&Ys(f,y+0,S,D),f[y+16]&&Ys(f,y+16,S,D+4),f[y+32]&&Ys(f,y+32,S,D+128),f[y+48]&&Ys(f,y+48,S,D+128+4)}function jr(f,y,S,D){var Y,se=l(16);for(Y=0;4>Y;++Y){var ne=f[y+0+Y]+f[y+12+Y],ue=f[y+4+Y]+f[y+8+Y],pe=f[y+4+Y]-f[y+8+Y],be=f[y+0+Y]-f[y+12+Y];se[0+Y]=ne+ue,se[8+Y]=ne-ue,se[4+Y]=be+pe,se[12+Y]=be-pe}for(Y=0;4>Y;++Y)ne=(f=se[0+4*Y]+3)+se[3+4*Y],ue=se[1+4*Y]+se[2+4*Y],pe=se[1+4*Y]-se[2+4*Y],be=f-se[3+4*Y],S[D+0]=ne+ue>>3,S[D+16]=be+pe>>3,S[D+32]=ne-ue>>3,S[D+48]=be-pe>>3,D+=64}function bs(f,y,S){var D,Y=y-32,se=Pn,ne=255-f[Y-1];for(D=0;D<S;++D){var ue,pe=se,be=ne+f[y-1];for(ue=0;ue<S;++ue)f[y+ue]=pe[be+f[Y+ue]];y+=32}}function ae(f,y){bs(f,y,4)}function ge(f,y){bs(f,y,8)}function De(f,y){bs(f,y,16)}function st(f,y){var S;for(S=0;16>S;++S)r(f,y+32*S,f,y-32,16)}function gt(f,y){var S;for(S=16;0<S;--S)o(f,y,f[y-1],16),y+=32}function rt(f,y,S){var D;for(D=0;16>D;++D)o(y,S+32*D,f,16)}function Dt(f,y){var S,D=16;for(S=0;16>S;++S)D+=f[y-1+32*S]+f[y+S-32];rt(D>>5,f,y)}function Pt(f,y){var S,D=8;for(S=0;16>S;++S)D+=f[y-1+32*S];rt(D>>4,f,y)}function Wt(f,y){var S,D=8;for(S=0;16>S;++S)D+=f[y+S-32];rt(D>>4,f,y)}function ms(f,y){rt(128,f,y)}function Mt(f,y,S){return f+2*y+S+2>>2}function fa(f,y){var S,D=y-32;for(D=new Uint8Array([Mt(f[D-1],f[D+0],f[D+1]),Mt(f[D+0],f[D+1],f[D+2]),Mt(f[D+1],f[D+2],f[D+3]),Mt(f[D+2],f[D+3],f[D+4])]),S=0;4>S;++S)r(f,y+32*S,D,0,D.length)}function dn(f,y){var S=f[y-1],D=f[y-1+32],Y=f[y-1+64],se=f[y-1+96];Qe(f,y+0,16843009*Mt(f[y-1-32],S,D)),Qe(f,y+32,16843009*Mt(S,D,Y)),Qe(f,y+64,16843009*Mt(D,Y,se)),Qe(f,y+96,16843009*Mt(Y,se,se))}function zn(f,y){var S,D=4;for(S=0;4>S;++S)D+=f[y+S-32]+f[y-1+32*S];for(D>>=3,S=0;4>S;++S)o(f,y+32*S,D,4)}function ka(f,y){var S=f[y-1+0],D=f[y-1+32],Y=f[y-1+64],se=f[y-1-32],ne=f[y+0-32],ue=f[y+1-32],pe=f[y+2-32],be=f[y+3-32];f[y+0+96]=Mt(D,Y,f[y-1+96]),f[y+1+96]=f[y+0+64]=Mt(S,D,Y),f[y+2+96]=f[y+1+64]=f[y+0+32]=Mt(se,S,D),f[y+3+96]=f[y+2+64]=f[y+1+32]=f[y+0+0]=Mt(ne,se,S),f[y+3+64]=f[y+2+32]=f[y+1+0]=Mt(ue,ne,se),f[y+3+32]=f[y+2+0]=Mt(pe,ue,ne),f[y+3+0]=Mt(be,pe,ue)}function yn(f,y){var S=f[y+1-32],D=f[y+2-32],Y=f[y+3-32],se=f[y+4-32],ne=f[y+5-32],ue=f[y+6-32],pe=f[y+7-32];f[y+0+0]=Mt(f[y+0-32],S,D),f[y+1+0]=f[y+0+32]=Mt(S,D,Y),f[y+2+0]=f[y+1+32]=f[y+0+64]=Mt(D,Y,se),f[y+3+0]=f[y+2+32]=f[y+1+64]=f[y+0+96]=Mt(Y,se,ne),f[y+3+32]=f[y+2+64]=f[y+1+96]=Mt(se,ne,ue),f[y+3+64]=f[y+2+96]=Mt(ne,ue,pe),f[y+3+96]=Mt(ue,pe,pe)}function jn(f,y){var S=f[y-1+0],D=f[y-1+32],Y=f[y-1+64],se=f[y-1-32],ne=f[y+0-32],ue=f[y+1-32],pe=f[y+2-32],be=f[y+3-32];f[y+0+0]=f[y+1+64]=se+ne+1>>1,f[y+1+0]=f[y+2+64]=ne+ue+1>>1,f[y+2+0]=f[y+3+64]=ue+pe+1>>1,f[y+3+0]=pe+be+1>>1,f[y+0+96]=Mt(Y,D,S),f[y+0+64]=Mt(D,S,se),f[y+0+32]=f[y+1+96]=Mt(S,se,ne),f[y+1+32]=f[y+2+96]=Mt(se,ne,ue),f[y+2+32]=f[y+3+96]=Mt(ne,ue,pe),f[y+3+32]=Mt(ue,pe,be)}function Rr(f,y){var S=f[y+0-32],D=f[y+1-32],Y=f[y+2-32],se=f[y+3-32],ne=f[y+4-32],ue=f[y+5-32],pe=f[y+6-32],be=f[y+7-32];f[y+0+0]=S+D+1>>1,f[y+1+0]=f[y+0+64]=D+Y+1>>1,f[y+2+0]=f[y+1+64]=Y+se+1>>1,f[y+3+0]=f[y+2+64]=se+ne+1>>1,f[y+0+32]=Mt(S,D,Y),f[y+1+32]=f[y+0+96]=Mt(D,Y,se),f[y+2+32]=f[y+1+96]=Mt(Y,se,ne),f[y+3+32]=f[y+2+96]=Mt(se,ne,ue),f[y+3+64]=Mt(ne,ue,pe),f[y+3+96]=Mt(ue,pe,be)}function Vo(f,y){var S=f[y-1+0],D=f[y-1+32],Y=f[y-1+64],se=f[y-1+96];f[y+0+0]=S+D+1>>1,f[y+2+0]=f[y+0+32]=D+Y+1>>1,f[y+2+32]=f[y+0+64]=Y+se+1>>1,f[y+1+0]=Mt(S,D,Y),f[y+3+0]=f[y+1+32]=Mt(D,Y,se),f[y+3+32]=f[y+1+64]=Mt(Y,se,se),f[y+3+64]=f[y+2+64]=f[y+0+96]=f[y+1+96]=f[y+2+96]=f[y+3+96]=se}function Jr(f,y){var S=f[y-1+0],D=f[y-1+32],Y=f[y-1+64],se=f[y-1+96],ne=f[y-1-32],ue=f[y+0-32],pe=f[y+1-32],be=f[y+2-32];f[y+0+0]=f[y+2+32]=S+ne+1>>1,f[y+0+32]=f[y+2+64]=D+S+1>>1,f[y+0+64]=f[y+2+96]=Y+D+1>>1,f[y+0+96]=se+Y+1>>1,f[y+3+0]=Mt(ue,pe,be),f[y+2+0]=Mt(ne,ue,pe),f[y+1+0]=f[y+3+32]=Mt(S,ne,ue),f[y+1+32]=f[y+3+64]=Mt(D,S,ne),f[y+1+64]=f[y+3+96]=Mt(Y,D,S),f[y+1+96]=Mt(se,Y,D)}function Xi(f,y){var S;for(S=0;8>S;++S)r(f,y+32*S,f,y-32,8)}function Dr(f,y){var S;for(S=0;8>S;++S)o(f,y,f[y-1],8),y+=32}function Ir(f,y,S){var D;for(D=0;8>D;++D)o(y,S+32*D,f,8)}function Qa(f,y){var S,D=8;for(S=0;8>S;++S)D+=f[y+S-32]+f[y-1+32*S];Ir(D>>4,f,y)}function Za(f,y){var S,D=4;for(S=0;8>S;++S)D+=f[y+S-32];Ir(D>>3,f,y)}function _r(f,y){var S,D=4;for(S=0;8>S;++S)D+=f[y-1+32*S];Ir(D>>3,f,y)}function Zr(f,y){Ir(128,f,y)}function Br(f,y,S){var D=f[y-S],Y=f[y+0],se=3*(Y-D)+Jc[1020+f[y-2*S]-f[y+S]],ne=Jo[112+(se+4>>3)];f[y-S]=Pn[255+D+Jo[112+(se+3>>3)]],f[y+0]=Pn[255+Y-ne]}function Si(f,y,S,D){var Y=f[y+0],se=f[y+S];return ai[255+f[y-2*S]-f[y-S]]>D||ai[255+se-Y]>D}function Hn(f,y,S,D){return 4*ai[255+f[y-S]-f[y+0]]+ai[255+f[y-2*S]-f[y+S]]<=D}function ui(f,y,S,D,Y){var se=f[y-3*S],ne=f[y-2*S],ue=f[y-S],pe=f[y+0],be=f[y+S],Ue=f[y+2*S],qe=f[y+3*S];return 4*ai[255+ue-pe]+ai[255+ne-be]>D?0:ai[255+f[y-4*S]-se]<=Y&&ai[255+se-ne]<=Y&&ai[255+ne-ue]<=Y&&ai[255+qe-Ue]<=Y&&ai[255+Ue-be]<=Y&&ai[255+be-pe]<=Y}function Ts(f,y,S,D){var Y=2*D+1;for(D=0;16>D;++D)Hn(f,y+D,S,Y)&&Br(f,y+D,S)}function dr(f,y,S,D){var Y=2*D+1;for(D=0;16>D;++D)Hn(f,y+D*S,1,Y)&&Br(f,y+D*S,1)}function _o(f,y,S,D){var Y;for(Y=3;0<Y;--Y)Ts(f,y+=4*S,S,D)}function Ji(f,y,S,D){var Y;for(Y=3;0<Y;--Y)dr(f,y+=4,S,D)}function ei(f,y,S,D,Y,se,ne,ue){for(se=2*se+1;0<Y--;){if(ui(f,y,S,se,ne))if(Si(f,y,S,ue))Br(f,y,S);else{var pe=f,be=y,Ue=S,qe=pe[be-2*Ue],ye=pe[be-Ue],Te=pe[be+0],Pe=pe[be+Ue],nt=pe[be+2*Ue],ze=27*(lt=Jc[1020+3*(Te-ye)+Jc[1020+qe-Pe]])+63>>7,At=18*lt+63>>7,lt=9*lt+63>>7;pe[be-3*Ue]=Pn[255+pe[be-3*Ue]+lt],pe[be-2*Ue]=Pn[255+qe+At],pe[be-Ue]=Pn[255+ye+ze],pe[be+0]=Pn[255+Te-ze],pe[be+Ue]=Pn[255+Pe-At],pe[be+2*Ue]=Pn[255+nt-lt]}y+=D}}function hi(f,y,S,D,Y,se,ne,ue){for(se=2*se+1;0<Y--;){if(ui(f,y,S,se,ne))if(Si(f,y,S,ue))Br(f,y,S);else{var pe=f,be=y,Ue=S,qe=pe[be-Ue],ye=pe[be+0],Te=pe[be+Ue],Pe=Jo[112+(4+(nt=3*(ye-qe))>>3)],nt=Jo[112+(nt+3>>3)],ze=Pe+1>>1;pe[be-2*Ue]=Pn[255+pe[be-2*Ue]+ze],pe[be-Ue]=Pn[255+qe+nt],pe[be+0]=Pn[255+ye-Pe],pe[be+Ue]=Pn[255+Te-ze]}y+=D}}function Bo(f,y,S,D,Y,se){ei(f,y,S,1,16,D,Y,se)}function Zi(f,y,S,D,Y,se){ei(f,y,1,S,16,D,Y,se)}function pi(f,y,S,D,Y,se){var ne;for(ne=3;0<ne;--ne)hi(f,y+=4*S,S,1,16,D,Y,se)}function wl(f,y,S,D,Y,se){var ne;for(ne=3;0<ne;--ne)hi(f,y+=4,1,S,16,D,Y,se)}function _(f,y,S,D,Y,se,ne,ue){ei(f,y,Y,1,8,se,ne,ue),ei(S,D,Y,1,8,se,ne,ue)}function $(f,y,S,D,Y,se,ne,ue){ei(f,y,1,Y,8,se,ne,ue),ei(S,D,1,Y,8,se,ne,ue)}function ve(f,y,S,D,Y,se,ne,ue){hi(f,y+4*Y,Y,1,8,se,ne,ue),hi(S,D+4*Y,Y,1,8,se,ne,ue)}function ke(f,y,S,D,Y,se,ne,ue){hi(f,y+4,1,Y,8,se,ne,ue),hi(S,D+4,1,Y,8,se,ne,ue)}function Ie(){this.ba=new $e,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Ze,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function ct(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function jt(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Xt(){this.ua=0,this.Wa=new Rt,this.vb=new Rt,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new G,this.yc=new M}function ds(){this.xb=this.a=0,this.l=new Yr,this.ca=new $e,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new T,this.Pb=0,this.wd=new T,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Xt,this.ab=0,this.gc=A(4,jt),this.Oc=0}function _s(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Yr,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Cs(f,y,S,D,Y,se,ne){for(f=f==null?0:f[y+0],y=0;y<ne;++y)Y[se+y]=f+S[D+y]&255,f=Y[se+y]}function Gs(f,y,S,D,Y,se,ne){var ue;if(f==null)Cs(null,null,S,D,Y,se,ne);else for(ue=0;ue<ne;++ue)Y[se+ue]=f[y+ue]+S[D+ue]&255}function Ta(f,y,S,D,Y,se,ne){if(f==null)Cs(null,null,S,D,Y,se,ne);else{var ue,pe=f[y+0],be=pe,Ue=pe;for(ue=0;ue<ne;++ue)be=Ue+(pe=f[y+ue])-be,Ue=S[D+ue]+(-256&be?0>be?0:255:be)&255,be=pe,Y[se+ue]=Ue}}function Va(f,y,S,D){var Y=y.width,se=y.o;if(s(f!=null&&y!=null),0>S||0>=D||S+D>se)return null;if(!f.Cc){if(f.ga==null){var ne;if(f.ga=new _s,(ne=f.ga==null)||(ne=y.width*y.o,s(f.Gb.length==0),f.Gb=l(ne),f.Uc=0,f.Gb==null?ne=0:(f.mb=f.Gb,f.nb=f.Uc,f.rc=null,ne=1),ne=!ne),!ne){ne=f.ga;var ue=f.Fa,pe=f.P,be=f.qc,Ue=f.mb,qe=f.nb,ye=pe+1,Te=be-1,Pe=ne.l;if(s(ue!=null&&Ue!=null&&y!=null),Ii[0]=null,Ii[1]=Cs,Ii[2]=Gs,Ii[3]=Ta,ne.ca=Ue,ne.tb=qe,ne.c=y.width,ne.i=y.height,s(0<ne.c&&0<ne.i),1>=be)y=0;else if(ne.$a=3&ue[pe+0],ne.Z=ue[pe+0]>>2&3,ne.Lc=ue[pe+0]>>4&3,pe=ue[pe+0]>>6&3,0>ne.$a||1<ne.$a||4<=ne.Z||1<ne.Lc||pe)y=0;else if(Pe.put=We,Pe.ac=Re,Pe.bc=Lt,Pe.ma=ne,Pe.width=y.width,Pe.height=y.height,Pe.Da=y.Da,Pe.v=y.v,Pe.va=y.va,Pe.j=y.j,Pe.o=y.o,ne.$a)e:{s(ne.$a==1),y=Ws();t:for(;;){if(y==null){y=0;break e}if(s(ne!=null),ne.mc=y,y.c=ne.c,y.i=ne.i,y.l=ne.l,y.l.ma=ne,y.l.width=ne.c,y.l.height=ne.i,y.a=0,Ce(y.m,ue,ye,Te),!Dn(ne.c,ne.i,1,y,null)||(y.ab==1&&y.gc[0].hc==3&&Sa(y.s)?(ne.ic=1,ue=y.c*y.i,y.Ta=null,y.Ua=0,y.V=l(ue),y.Ba=0,y.V==null?(y.a=1,y=0):y=1):(ne.ic=0,y=Ma(y,ne.c)),!y))break t;y=1;break e}ne.mc=null,y=0}else y=Te>=ne.c*ne.i;ne=!y}if(ne)return null;f.ga.Lc!=1?f.Ga=0:D=se-S}s(f.ga!=null),s(S+D<=se);e:{if(y=(ue=f.ga).c,se=ue.l.o,ue.$a==0){if(ye=f.rc,Te=f.Vc,Pe=f.Fa,pe=f.P+1+S*y,be=f.mb,Ue=f.nb+S*y,s(pe<=f.P+f.qc),ue.Z!=0)for(s(Ii[ue.Z]!=null),ne=0;ne<D;++ne)Ii[ue.Z](ye,Te,Pe,pe,be,Ue,y),ye=be,Te=Ue,Ue+=y,pe+=y;else for(ne=0;ne<D;++ne)r(be,Ue,Pe,pe,y),ye=be,Te=Ue,Ue+=y,pe+=y;f.rc=ye,f.Vc=Te}else{if(s(ue.mc!=null),y=S+D,s((ne=ue.mc)!=null),s(y<=ne.i),ne.C>=y)y=1;else if(ue.ic||tr(),ue.ic){ue=ne.V,ye=ne.Ba,Te=ne.c;var nt=ne.i,ze=(Pe=1,pe=ne.$/Te,be=ne.$%Te,Ue=ne.m,qe=ne.s,ne.$),At=Te*nt,lt=Te*y,Nt=qe.wc,yt=ze<lt?Ms(qe,be,pe):null;s(ze<=At),s(y<=nt),s(Sa(qe));t:for(;;){for(;!Ue.h&&ze<lt;){if(be&Nt||(yt=Ms(qe,be,pe)),s(yt!=null),W(Ue),256>(nt=xs(yt.G[0],yt.H[0],Ue)))ue[ye+ze]=nt,++ze,++be>=Te&&(be=0,++pe<=y&&!(pe%16)&&xa(ne,pe));else{if(!(280>nt)){Pe=0;break t}nt=Ot(nt-256,Ue);var hs,es=xs(yt.G[4],yt.H[4],Ue);if(W(Ue),!(ze>=(es=ss(Te,es=Ot(es,Ue)))&&At-ze>=nt)){Pe=0;break t}for(hs=0;hs<nt;++hs)ue[ye+ze+hs]=ue[ye+ze+hs-es];for(ze+=nt,be+=nt;be>=Te;)be-=Te,++pe<=y&&!(pe%16)&&xa(ne,pe);ze<lt&&be&Nt&&(yt=Ms(qe,be,pe))}s(Ue.h==le(Ue))}xa(ne,pe>y?y:pe);break t}!Pe||Ue.h&&ze<At?(Pe=0,ne.a=Ue.h?5:3):ne.$=ze,y=Pe}else y=ha(ne,ne.V,ne.Ba,ne.c,ne.i,y,ie);if(!y){D=0;break e}}S+D>=se&&(f.Cc=1),D=1}if(!D)return null;if(f.Cc&&((D=f.ga)!=null&&(D.mc=null),f.ga=null,0<f.Ga))return alert("todo:WebPDequantizeLevels"),null}return f.nb+S*Y}function va(f,y,S,D,Y,se){for(;0<Y--;){var ne,ue=f,pe=y+(S?1:0),be=f,Ue=y+(S?0:3);for(ne=0;ne<D;++ne){var qe=be[Ue+4*ne];qe!=255&&(qe*=32897,ue[pe+4*ne+0]=ue[pe+4*ne+0]*qe>>23,ue[pe+4*ne+1]=ue[pe+4*ne+1]*qe>>23,ue[pe+4*ne+2]=ue[pe+4*ne+2]*qe>>23)}y+=se}}function un(f,y,S,D,Y){for(;0<D--;){var se;for(se=0;se<S;++se){var ne=f[y+2*se+0],ue=15&(be=f[y+2*se+1]),pe=4369*ue,be=(240&be|be>>4)*pe>>16;f[y+2*se+0]=(240&ne|ne>>4)*pe>>16&240|(15&ne|ne<<4)*pe>>16>>4&15,f[y+2*se+1]=240&be|ue}y+=Y}}function $a(f,y,S,D,Y,se,ne,ue){var pe,be,Ue=255;for(be=0;be<Y;++be){for(pe=0;pe<D;++pe){var qe=f[y+pe];se[ne+4*pe]=qe,Ue&=qe}y+=S,ne+=ue}return Ue!=255}function hn(f,y,S,D,Y){var se;for(se=0;se<Y;++se)S[D+se]=f[y+se]>>8}function tr(){Nl=va,zr=un,qr=$a,Yo=hn}function qn(f,y,S){U[f]=function(D,Y,se,ne,ue,pe,be,Ue,qe,ye,Te,Pe,nt,ze,At,lt,Nt){var yt,hs=Nt-1>>1,es=ue[pe+0]|be[Ue+0]<<16,Fs=qe[ye+0]|Te[Pe+0]<<16;s(D!=null);var ns=3*es+Fs+131074>>2;for(y(D[Y+0],255&ns,ns>>16,nt,ze),se!=null&&(ns=3*Fs+es+131074>>2,y(se[ne+0],255&ns,ns>>16,At,lt)),yt=1;yt<=hs;++yt){var Vs=ue[pe+yt]|be[Ue+yt]<<16,vn=qe[ye+yt]|Te[Pe+yt]<<16,Ss=es+Vs+Fs+vn+524296,rs=Ss+2*(Vs+Fs)>>3;ns=rs+es>>1,es=(Ss=Ss+2*(es+vn)>>3)+Vs>>1,y(D[Y+2*yt-1],255&ns,ns>>16,nt,ze+(2*yt-1)*S),y(D[Y+2*yt-0],255&es,es>>16,nt,ze+(2*yt-0)*S),se!=null&&(ns=Ss+Fs>>1,es=rs+vn>>1,y(se[ne+2*yt-1],255&ns,ns>>16,At,lt+(2*yt-1)*S),y(se[ne+2*yt+0],255&es,es>>16,At,lt+(2*yt+0)*S)),es=Vs,Fs=vn}1&Nt||(ns=3*es+Fs+131074>>2,y(D[Y+Nt-1],255&ns,ns>>16,nt,ze+(Nt-1)*S),se!=null&&(ns=3*Fs+es+131074>>2,y(se[ne+Nt-1],255&ns,ns>>16,At,lt+(Nt-1)*S)))}}function jl(){On[ar]=oo,On[Cl]=Hi,On[Ri]=Fo,On[pc]=tA,On[Zo]=sA,On[so]=Fl,On[Zc]=aA,On[fc]=Hi,On[So]=tA,On[ao]=sA,On[Sl]=Fl}function ki(f){return f&-16384?0>f?0:255:f>>zp}function Hr(f,y){return ki((19077*f>>8)+(26149*y>>8)-14234)}function fi(f,y,S){return ki((19077*f>>8)-(6419*y>>8)-(13320*S>>8)+8708)}function Fi(f,y){return ki((19077*f>>8)+(33050*y>>8)-17685)}function Ui(f,y,S,D,Y){D[Y+0]=Hr(f,S),D[Y+1]=fi(f,y,S),D[Y+2]=Fi(f,y)}function Ei(f,y,S,D,Y){D[Y+0]=Fi(f,y),D[Y+1]=fi(f,y,S),D[Y+2]=Hr(f,S)}function _n(f,y,S,D,Y){var se=fi(f,y,S);y=se<<3&224|Fi(f,y)>>3,D[Y+0]=248&Hr(f,S)|se>>5,D[Y+1]=y}function R(f,y,S,D,Y){var se=240&Fi(f,y)|15;D[Y+0]=240&Hr(f,S)|fi(f,y,S)>>4,D[Y+1]=se}function Fe(f,y,S,D,Y){D[Y+0]=255,Ui(f,y,S,D,Y+1)}function Ge(f,y,S,D,Y){Ei(f,y,S,D,Y),D[Y+3]=255}function it(f,y,S,D,Y){Ui(f,y,S,D,Y),D[Y+3]=255}function Ct(f,y){return 0>f?0:f>y?y:f}function Kt(f,y,S){U[f]=function(D,Y,se,ne,ue,pe,be,Ue,qe){for(var ye=Ue+(-2&qe)*S;Ue!=ye;)y(D[Y+0],se[ne+0],ue[pe+0],be,Ue),y(D[Y+1],se[ne+0],ue[pe+0],be,Ue+S),Y+=2,++ne,++pe,Ue+=2*S;1&qe&&y(D[Y+0],se[ne+0],ue[pe+0],be,Ue)}}function Tt(f,y,S){return S==0?f==0?y==0?6:5:y==0?4:0:S}function It(f,y,S,D,Y){switch(f>>>30){case 3:to(y,S,D,Y,0);break;case 2:Mr(y,S,D,Y);break;case 1:Ys(y,S,D,Y)}}function Rs(f,y){var S,D,Y=y.M,se=y.Nb,ne=f.oc,ue=f.pc+40,pe=f.oc,be=f.pc+584,Ue=f.oc,qe=f.pc+600;for(S=0;16>S;++S)ne[ue+32*S-1]=129;for(S=0;8>S;++S)pe[be+32*S-1]=129,Ue[qe+32*S-1]=129;for(0<Y?ne[ue-1-32]=pe[be-1-32]=Ue[qe-1-32]=129:(o(ne,ue-32-1,127,21),o(pe,be-32-1,127,9),o(Ue,qe-32-1,127,9)),D=0;D<f.za;++D){var ye=y.ya[y.aa+D];if(0<D){for(S=-1;16>S;++S)r(ne,ue+32*S-4,ne,ue+32*S+12,4);for(S=-1;8>S;++S)r(pe,be+32*S-4,pe,be+32*S+4,4),r(Ue,qe+32*S-4,Ue,qe+32*S+4,4)}var Te=f.Gd,Pe=f.Hd+D,nt=ye.ad,ze=ye.Hc;if(0<Y&&(r(ne,ue-32,Te[Pe].y,0,16),r(pe,be-32,Te[Pe].f,0,8),r(Ue,qe-32,Te[Pe].ea,0,8)),ye.Za){var At=ne,lt=ue-32+16;for(0<Y&&(D>=f.za-1?o(At,lt,Te[Pe].y[15],4):r(At,lt,Te[Pe+1].y,0,4)),S=0;4>S;S++)At[lt+128+S]=At[lt+256+S]=At[lt+384+S]=At[lt+0+S];for(S=0;16>S;++S,ze<<=2)At=ne,lt=ue+al[S],hr[ye.Ob[S]](At,lt),It(ze,nt,16*+S,At,lt)}else if(At=Tt(D,Y,ye.Ob[0]),io[At](ne,ue),ze!=0)for(S=0;16>S;++S,ze<<=2)It(ze,nt,16*+S,ne,ue+al[S]);for(S=ye.Gc,At=Tt(D,Y,ye.Dd),Gr[At](pe,be),Gr[At](Ue,qe),ze=nt,At=pe,lt=be,255&(ye=0|S)&&(170&ye?sr(ze,256,At,lt):ma(ze,256,At,lt)),ye=Ue,ze=qe,255&(S>>=8)&&(170&S?sr(nt,320,ye,ze):ma(nt,320,ye,ze)),Y<f.Ub-1&&(r(Te[Pe].y,0,ne,ue+480,16),r(Te[Pe].f,0,pe,be+224,8),r(Te[Pe].ea,0,Ue,qe+224,8)),S=8*se*f.B,Te=f.sa,Pe=f.ta+16*D+16*se*f.R,nt=f.qa,ye=f.ra+8*D+S,ze=f.Ha,At=f.Ia+8*D+S,S=0;16>S;++S)r(Te,Pe+S*f.R,ne,ue+32*S,16);for(S=0;8>S;++S)r(nt,ye+S*f.B,pe,be+32*S,8),r(ze,At+S*f.B,Ue,qe+32*S,8)}}function na(f,y,S,D,Y,se,ne,ue,pe){var be=[0],Ue=[0],qe=0,ye=pe!=null?pe.kd:0,Te=pe??new ct;if(f==null||12>S)return 7;Te.data=f,Te.w=y,Te.ha=S,y=[y],S=[S],Te.gb=[Te.gb];e:{var Pe=y,nt=S,ze=Te.gb;if(s(f!=null),s(nt!=null),s(ze!=null),ze[0]=0,12<=nt[0]&&!a(f,Pe[0],"RIFF")){if(a(f,Pe[0]+8,"WEBP")){ze=3;break e}var At=Ve(f,Pe[0]+4);if(12>At||4294967286<At){ze=3;break e}if(ye&&At>nt[0]-8){ze=7;break e}ze[0]=At,Pe[0]+=12,nt[0]-=12}ze=0}if(ze!=0)return ze;for(At=0<Te.gb[0],S=S[0];;){e:{var lt=f;nt=y,ze=S;var Nt=be,yt=Ue,hs=Pe=[0];if((ns=qe=[qe])[0]=0,8>ze[0])ze=7;else{if(!a(lt,nt[0],"VP8X")){if(Ve(lt,nt[0]+4)!=10){ze=3;break e}if(18>ze[0]){ze=7;break e}var es=Ve(lt,nt[0]+8),Fs=1+mt(lt,nt[0]+12);if(2147483648<=Fs*(lt=1+mt(lt,nt[0]+15))){ze=3;break e}hs!=null&&(hs[0]=es),Nt!=null&&(Nt[0]=Fs),yt!=null&&(yt[0]=lt),nt[0]+=18,ze[0]-=18,ns[0]=1}ze=0}}if(qe=qe[0],Pe=Pe[0],ze!=0)return ze;if(nt=!!(2&Pe),!At&&qe)return 3;if(se!=null&&(se[0]=!!(16&Pe)),ne!=null&&(ne[0]=nt),ue!=null&&(ue[0]=0),ne=be[0],Pe=Ue[0],qe&&nt&&pe==null){ze=0;break}if(4>S){ze=7;break}if(At&&qe||!At&&!qe&&!a(f,y[0],"ALPH")){S=[S],Te.na=[Te.na],Te.P=[Te.P],Te.Sa=[Te.Sa];e:{es=f,ze=y,At=S;var ns=Te.gb;Nt=Te.na,yt=Te.P,hs=Te.Sa,Fs=22,s(es!=null),s(At!=null),lt=ze[0];var Vs=At[0];for(s(Nt!=null),s(hs!=null),Nt[0]=null,yt[0]=null,hs[0]=0;;){if(ze[0]=lt,At[0]=Vs,8>Vs){ze=7;break e}var vn=Ve(es,lt+4);if(4294967286<vn){ze=3;break e}var Ss=8+vn+1&-2;if(Fs+=Ss,0<ns&&Fs>ns){ze=3;break e}if(!a(es,lt,"VP8 ")||!a(es,lt,"VP8L")){ze=0;break e}if(Vs[0]<Ss){ze=7;break e}a(es,lt,"ALPH")||(Nt[0]=es,yt[0]=lt+8,hs[0]=vn),lt+=Ss,Vs-=Ss}}if(S=S[0],Te.na=Te.na[0],Te.P=Te.P[0],Te.Sa=Te.Sa[0],ze!=0)break}S=[S],Te.Ja=[Te.Ja],Te.xa=[Te.xa];e:if(ns=f,ze=y,At=S,Nt=Te.gb[0],yt=Te.Ja,hs=Te.xa,es=ze[0],lt=!a(ns,es,"VP8 "),Fs=!a(ns,es,"VP8L"),s(ns!=null),s(At!=null),s(yt!=null),s(hs!=null),8>At[0])ze=7;else{if(lt||Fs){if(ns=Ve(ns,es+4),12<=Nt&&ns>Nt-12){ze=3;break e}if(ye&&ns>At[0]-8){ze=7;break e}yt[0]=ns,ze[0]+=8,At[0]-=8,hs[0]=Fs}else hs[0]=5<=At[0]&&ns[es+0]==47&&!(ns[es+4]>>5),yt[0]=At[0];ze=0}if(S=S[0],Te.Ja=Te.Ja[0],Te.xa=Te.xa[0],y=y[0],ze!=0)break;if(4294967286<Te.Ja)return 3;if(ue==null||nt||(ue[0]=Te.xa?2:1),ne=[ne],Pe=[Pe],Te.xa){if(5>S){ze=7;break}ue=ne,ye=Pe,nt=se,f==null||5>S?f=0:5<=S&&f[y+0]==47&&!(f[y+4]>>5)?(At=[0],ns=[0],Nt=[0],Ce(yt=new T,f,y,S),Vt(yt,At,ns,Nt)?(ue!=null&&(ue[0]=At[0]),ye!=null&&(ye[0]=ns[0]),nt!=null&&(nt[0]=Nt[0]),f=1):f=0):f=0}else{if(10>S){ze=7;break}ue=Pe,f==null||10>S||!Xn(f,y+3,S-3)?f=0:(ye=f[y+0]|f[y+1]<<8|f[y+2]<<16,nt=16383&(f[y+7]<<8|f[y+6]),f=16383&(f[y+9]<<8|f[y+8]),1&ye||3<(ye>>1&7)||!(ye>>4&1)||ye>>5>=Te.Ja||!nt||!f?f=0:(ne&&(ne[0]=nt),ue&&(ue[0]=f),f=1))}if(!f||(ne=ne[0],Pe=Pe[0],qe&&(be[0]!=ne||Ue[0]!=Pe)))return 3;pe!=null&&(pe[0]=Te,pe.offset=y-pe.w,s(4294967286>y-pe.w),s(pe.offset==pe.ha-S));break}return ze==0||ze==7&&qe&&pe==null?(se!=null&&(se[0]|=Te.na!=null&&0<Te.na.length),D!=null&&(D[0]=ne),Y!=null&&(Y[0]=Pe),0):ze}function ra(f,y,S){var D=y.width,Y=y.height,se=0,ne=0,ue=D,pe=Y;if(y.Da=f!=null&&0<f.Da,y.Da&&(ue=f.cd,pe=f.bd,se=f.v,ne=f.j,11>S||(se&=-2,ne&=-2),0>se||0>ne||0>=ue||0>=pe||se+ue>D||ne+pe>Y))return 0;if(y.v=se,y.j=ne,y.va=se+ue,y.o=ne+pe,y.U=ue,y.T=pe,y.da=f!=null&&0<f.da,y.da){if(!at(ue,pe,S=[f.ib],se=[f.hb]))return 0;y.ib=S[0],y.hb=se[0]}return y.ob=f!=null&&f.ob,y.Kb=f==null||!f.Sd,y.da&&(y.ob=y.ib<3*D/4&&y.hb<3*Y/4,y.Kb=0),1}function Ds(f){if(f==null)return 2;if(11>f.S){var y=f.f.RGBA;y.fb+=(f.height-1)*y.A,y.A=-y.A}else y=f.f.kb,f=f.height,y.O+=(f-1)*y.fa,y.fa=-y.fa,y.N+=(f-1>>1)*y.Ab,y.Ab=-y.Ab,y.W+=(f-1>>1)*y.Db,y.Db=-y.Db,y.F!=null&&(y.J+=(f-1)*y.lb,y.lb=-y.lb);return 0}function Ra(f,y,S,D){if(D==null||0>=f||0>=y)return 2;if(S!=null){if(S.Da){var Y=S.cd,se=S.bd,ne=-2&S.v,ue=-2&S.j;if(0>ne||0>ue||0>=Y||0>=se||ne+Y>f||ue+se>y)return 2;f=Y,y=se}if(S.da){if(!at(f,y,Y=[S.ib],se=[S.hb]))return 2;f=Y[0],y=se[0]}}D.width=f,D.height=y;e:{var pe=D.width,be=D.height;if(f=D.S,0>=pe||0>=be||!(f>=ar&&13>f))f=2;else{if(0>=D.Rd&&D.sd==null){ne=se=Y=y=0;var Ue=(ue=pe*Cu[f])*be;if(11>f||(se=(be+1)/2*(y=(pe+1)/2),f==12&&(ne=(Y=pe)*be)),(be=l(Ue+2*se+ne))==null){f=1;break e}D.sd=be,11>f?((pe=D.f.RGBA).eb=be,pe.fb=0,pe.A=ue,pe.size=Ue):((pe=D.f.kb).y=be,pe.O=0,pe.fa=ue,pe.Fd=Ue,pe.f=be,pe.N=0+Ue,pe.Ab=y,pe.Cd=se,pe.ea=be,pe.W=0+Ue+se,pe.Db=y,pe.Ed=se,f==12&&(pe.F=be,pe.J=0+Ue+2*se),pe.Tc=ne,pe.lb=Y)}if(y=1,Y=D.S,se=D.width,ne=D.height,Y>=ar&&13>Y)if(11>Y)f=D.f.RGBA,y&=(ue=Math.abs(f.A))*(ne-1)+se<=f.size,y&=ue>=se*Cu[Y],y&=f.eb!=null;else{f=D.f.kb,ue=(se+1)/2,Ue=(ne+1)/2,pe=Math.abs(f.fa),be=Math.abs(f.Ab);var qe=Math.abs(f.Db),ye=Math.abs(f.lb),Te=ye*(ne-1)+se;y&=pe*(ne-1)+se<=f.Fd,y&=be*(Ue-1)+ue<=f.Cd,y=(y&=qe*(Ue-1)+ue<=f.Ed)&pe>=se&be>=ue&qe>=ue,y&=f.y!=null,y&=f.f!=null,y&=f.ea!=null,Y==12&&(y&=ye>=se,y&=Te<=f.Tc,y&=f.F!=null)}else y=0;f=y?0:2}}return f!=0||S!=null&&S.fd&&(f=Ds(D)),f}var Wa=64,Da=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],en=24,ur=32,Bs=8,ls=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];xe("Predictor0","PredictorAdd0"),U.Predictor0=function(){return 4278190080},U.Predictor1=function(f){return f},U.Predictor2=function(f,y,S){return y[S+0]},U.Predictor3=function(f,y,S){return y[S+1]},U.Predictor4=function(f,y,S){return y[S-1]},U.Predictor5=function(f,y,S){return Oe(Oe(f,y[S+1]),y[S+0])},U.Predictor6=function(f,y,S){return Oe(f,y[S-1])},U.Predictor7=function(f,y,S){return Oe(f,y[S+0])},U.Predictor8=function(f,y,S){return Oe(y[S-1],y[S+0])},U.Predictor9=function(f,y,S){return Oe(y[S+0],y[S+1])},U.Predictor10=function(f,y,S){return Oe(Oe(f,y[S-1]),Oe(y[S+0],y[S+1]))},U.Predictor11=function(f,y,S){var D=y[S+0];return 0>=dt(D>>24&255,f>>24&255,(y=y[S-1])>>24&255)+dt(D>>16&255,f>>16&255,y>>16&255)+dt(D>>8&255,f>>8&255,y>>8&255)+dt(255&D,255&f,255&y)?D:f},U.Predictor12=function(f,y,S){var D=y[S+0];return(Bt((f>>24&255)+(D>>24&255)-((y=y[S-1])>>24&255))<<24|Bt((f>>16&255)+(D>>16&255)-(y>>16&255))<<16|Bt((f>>8&255)+(D>>8&255)-(y>>8&255))<<8|Bt((255&f)+(255&D)-(255&y)))>>>0},U.Predictor13=function(f,y,S){var D=y[S-1];return(xt((f=Oe(f,y[S+0]))>>24&255,D>>24&255)<<24|xt(f>>16&255,D>>16&255)<<16|xt(f>>8&255,D>>8&255)<<8|xt(255&f,255&D))>>>0};var pn=U.PredictorAdd0;U.PredictorAdd1=Ut,xe("Predictor2","PredictorAdd2"),xe("Predictor3","PredictorAdd3"),xe("Predictor4","PredictorAdd4"),xe("Predictor5","PredictorAdd5"),xe("Predictor6","PredictorAdd6"),xe("Predictor7","PredictorAdd7"),xe("Predictor8","PredictorAdd8"),xe("Predictor9","PredictorAdd9"),xe("Predictor10","PredictorAdd10"),xe("Predictor11","PredictorAdd11"),xe("Predictor12","PredictorAdd12"),xe("Predictor13","PredictorAdd13");var Nr=U.PredictorAdd2;_t("ColorIndexInverseTransform","MapARGB","32b",function(f){return f>>8&255},function(f){return f}),_t("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(f){return f},function(f){return f>>8&255});var Ya,Pr=U.ColorIndexInverseTransform,za=U.MapARGB,Kn=U.VP8LColorIndexInverseTransformAlpha,No=U.MapAlpha,$o=U.VP8LPredictorsAdd=[];$o.length=16,(U.VP8LPredictors=[]).length=16,(U.VP8LPredictorsAdd_C=[]).length=16,(U.VP8LPredictors_C=[]).length=16;var Li,_l,Qi,Co,Or,eo,ti,to,Mr,sr,Ys,ma,tn,Ia,Ti,Bl,Wo,$c,vu,bu,KA,GA,Wc,si,Nl,zr,qr,Yo,Yc=l(511),uc=l(2041),hc=l(225),Xc=l(767),Xo=0,Jc=uc,Jo=hc,Pn=Xc,ai=Yc,ar=0,Cl=1,Ri=2,pc=3,Zo=4,so=5,Zc=6,fc=7,So=8,ao=9,Sl=10,eA=[2,3,7],ni=[3,3,11],Kr=[280,256,256,256,40],el=[0,1,1,1,0],no=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],ro=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],tl=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],wu=8,mc=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],gc=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Bn=null,sn=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Aa=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],ko=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],Di=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],VA=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],sl=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],ju=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],io=[],hr=[],Gr=[],_u=1,kl=2,Ii=[],On=[];qn("UpsampleRgbLinePair",Ui,3),qn("UpsampleBgrLinePair",Ei,3),qn("UpsampleRgbaLinePair",it,4),qn("UpsampleBgraLinePair",Ge,4),qn("UpsampleArgbLinePair",Fe,4),qn("UpsampleRgba4444LinePair",R,2),qn("UpsampleRgb565LinePair",_n,2);var oo=U.UpsampleRgbLinePair,Fo=U.UpsampleBgrLinePair,Hi=U.UpsampleRgbaLinePair,tA=U.UpsampleBgraLinePair,sA=U.UpsampleArgbLinePair,Fl=U.UpsampleRgba4444LinePair,aA=U.UpsampleRgb565LinePair,Pi=16,Nn=1<<Pi-1,Uo=-227,nA=482,zp=6,Bu=0,qp=l(256),Cn=l(256),$A=l(256),xc=l(256),yc=l(nA-Uo),WA=l(nA-Uo);Kt("YuvToRgbRow",Ui,3),Kt("YuvToBgrRow",Ei,3),Kt("YuvToRgbaRow",it,4),Kt("YuvToBgraRow",Ge,4),Kt("YuvToArgbRow",Fe,4),Kt("YuvToRgba4444Row",R,2),Kt("YuvToRgb565Row",_n,2);var al=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],lo=[0,2,8],Kp=[8,7,6,4,4,2,2,2,1,1,1,1],Nu=1;this.WebPDecodeRGBA=function(f,y,S,D,Y){var se=Cl,ne=new Ie,ue=new $e;ne.ba=ue,ue.S=se,ue.width=[ue.width],ue.height=[ue.height];var pe=ue.width,be=ue.height,Ue=new kt;if(Ue==null||f==null)var qe=2;else s(Ue!=null),qe=na(f,y,S,Ue.width,Ue.height,Ue.Pd,Ue.Qd,Ue.format,null);if(qe!=0?pe=0:(pe!=null&&(pe[0]=Ue.width[0]),be!=null&&(be[0]=Ue.height[0]),pe=1),pe){ue.width=ue.width[0],ue.height=ue.height[0],D!=null&&(D[0]=ue.width),Y!=null&&(Y[0]=ue.height);e:{if(D=new Yr,(Y=new ct).data=f,Y.w=y,Y.ha=S,Y.kd=1,y=[0],s(Y!=null),((f=na(Y.data,Y.w,Y.ha,null,null,null,y,null,Y))==0||f==7)&&y[0]&&(f=4),(y=f)==0){if(s(ne!=null),D.data=Y.data,D.w=Y.w+Y.offset,D.ha=Y.ha-Y.offset,D.put=We,D.ac=Re,D.bc=Lt,D.ma=ne,Y.xa){if((f=Ws())==null){ne=1;break e}if(function(ye,Te){var Pe=[0],nt=[0],ze=[0];t:for(;;){if(ye==null)return 0;if(Te==null)return ye.a=2,0;if(ye.l=Te,ye.a=0,Ce(ye.m,Te.data,Te.w,Te.ha),!Vt(ye.m,Pe,nt,ze)){ye.a=3;break t}if(ye.xb=kl,Te.width=Pe[0],Te.height=nt[0],!Dn(Pe[0],nt[0],1,ye,null))break t;return 1}return s(ye.a!=0),0}(f,D)){if(D=(y=Ra(D.width,D.height,ne.Oa,ne.ba))==0){t:{D=f;s:for(;;){if(D==null){D=0;break t}if(s(D.s.yc!=null),s(D.s.Ya!=null),s(0<D.s.Wb),s((S=D.l)!=null),s((Y=S.ma)!=null),D.xb!=0){if(D.ca=Y.ba,D.tb=Y.tb,s(D.ca!=null),!ra(Y.Oa,S,pc)){D.a=2;break s}if(!Ma(D,S.width)||S.da)break s;if((S.da||os(D.ca.S))&&tr(),11>D.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),D.ca.f.kb.F!=null&&tr()),D.Pb&&0<D.s.ua&&D.s.vb.X==null&&!je(D.s.vb,D.s.Wa.Xa)){D.a=1;break s}D.xb=0}if(!ha(D,D.V,D.Ba,D.c,D.i,S.o,Zs))break s;Y.Dc=D.Ma,D=1;break t}s(D.a!=0),D=0}D=!D}D&&(y=f.a)}else y=f.a}else{if((f=new Ai)==null){ne=1;break e}if(f.Fa=Y.na,f.P=Y.P,f.qc=Y.Sa,Ci(f,D)){if((y=Ra(D.width,D.height,ne.Oa,ne.ba))==0){if(f.Aa=0,S=ne.Oa,s((Y=f)!=null),S!=null){if(0<(pe=0>(pe=S.Md)?0:100<pe?255:255*pe/100)){for(be=Ue=0;4>be;++be)12>(qe=Y.pb[be]).lc&&(qe.ia=pe*Kp[0>qe.lc?0:qe.lc]>>3),Ue|=qe.ia;Ue&&(alert("todo:VP8InitRandom"),Y.ia=1)}Y.Ga=S.Id,100<Y.Ga?Y.Ga=100:0>Y.Ga&&(Y.Ga=0)}(function(ye,Te){if(ye==null)return 0;if(Te==null)return qs(ye,2,"NULL VP8Io parameter in VP8Decode().");if(!ye.cb&&!Ci(ye,Te))return 0;if(s(ye.cb),Te.ac==null||Te.ac(Te)){Te.ob&&(ye.L=0);var Pe=lo[ye.L];if(ye.L==2?(ye.yb=0,ye.zb=0):(ye.yb=Te.v-Pe>>4,ye.zb=Te.j-Pe>>4,0>ye.yb&&(ye.yb=0),0>ye.zb&&(ye.zb=0)),ye.Va=Te.o+15+Pe>>4,ye.Hb=Te.va+15+Pe>>4,ye.Hb>ye.za&&(ye.Hb=ye.za),ye.Va>ye.Ub&&(ye.Va=ye.Ub),0<ye.L){var nt=ye.ed;for(Pe=0;4>Pe;++Pe){var ze;if(ye.Qa.Cb){var At=ye.Qa.Lb[Pe];ye.Qa.Fb||(At+=nt.Tb)}else At=nt.Tb;for(ze=0;1>=ze;++ze){var lt=ye.gd[Pe][ze],Nt=At;if(nt.Pc&&(Nt+=nt.vd[0],ze&&(Nt+=nt.od[0])),0<(Nt=0>Nt?0:63<Nt?63:Nt)){var yt=Nt;0<nt.wb&&(yt=4<nt.wb?yt>>2:yt>>1)>9-nt.wb&&(yt=9-nt.wb),1>yt&&(yt=1),lt.dd=yt,lt.tc=2*Nt+yt,lt.ld=40<=Nt?2:15<=Nt?1:0}else lt.tc=0;lt.La=ze}}}Pe=0}else qs(ye,6,"Frame setup failed"),Pe=ye.a;if(Pe=Pe==0){if(Pe){ye.$c=0,0<ye.Aa||(ye.Ic=Nu);t:{Pe=ye.Ic,nt=4*(yt=ye.za);var hs=32*yt,es=yt+1,Fs=0<ye.L?yt*(0<ye.Aa?2:1):0,ns=(ye.Aa==2?2:1)*yt;if((lt=nt+832+(ze=3*(16*Pe+lo[ye.L])/2*hs)+(At=ye.Fa!=null&&0<ye.Fa.length?ye.Kc.c*ye.Kc.i:0))!=lt)Pe=0;else{if(lt>ye.Vb){if(ye.Vb=0,ye.Ec=l(lt),ye.Fc=0,ye.Ec==null){Pe=qs(ye,1,"no memory during frame initialization.");break t}ye.Vb=lt}lt=ye.Ec,Nt=ye.Fc,ye.Ac=lt,ye.Bc=Nt,Nt+=nt,ye.Gd=A(hs,ca),ye.Hd=0,ye.rb=A(es+1,ps),ye.sb=1,ye.wa=Fs?A(Fs,as):null,ye.Y=0,ye.D.Nb=0,ye.D.wa=ye.wa,ye.D.Y=ye.Y,0<ye.Aa&&(ye.D.Y+=yt),s(!0),ye.oc=lt,ye.pc=Nt,Nt+=832,ye.ya=A(ns,pa),ye.aa=0,ye.D.ya=ye.ya,ye.D.aa=ye.aa,ye.Aa==2&&(ye.D.aa+=yt),ye.R=16*yt,ye.B=8*yt,yt=(hs=lo[ye.L])*ye.R,hs=hs/2*ye.B,ye.sa=lt,ye.ta=Nt+yt,ye.qa=ye.sa,ye.ra=ye.ta+16*Pe*ye.R+hs,ye.Ha=ye.qa,ye.Ia=ye.ra+8*Pe*ye.B+hs,ye.$c=0,Nt+=ze,ye.mb=At?lt:null,ye.nb=At?Nt:null,s(Nt+At<=ye.Fc+ye.Vb),Jn(ye),o(ye.Ac,ye.Bc,0,nt),Pe=1}}if(Pe){if(Te.ka=0,Te.y=ye.sa,Te.O=ye.ta,Te.f=ye.qa,Te.N=ye.ra,Te.ea=ye.Ha,Te.Vd=ye.Ia,Te.fa=ye.R,Te.Rc=ye.B,Te.F=null,Te.J=0,!Xo){for(Pe=-255;255>=Pe;++Pe)Yc[255+Pe]=0>Pe?-Pe:Pe;for(Pe=-1020;1020>=Pe;++Pe)uc[1020+Pe]=-128>Pe?-128:127<Pe?127:Pe;for(Pe=-112;112>=Pe;++Pe)hc[112+Pe]=-16>Pe?-16:15<Pe?15:Pe;for(Pe=-255;510>=Pe;++Pe)Xc[255+Pe]=0>Pe?0:255<Pe?255:Pe;Xo=1}ti=jr,to=Xr,sr=Tr,Ys=er,ma=di,Mr=Zn,tn=Bo,Ia=Zi,Ti=_,Bl=$,Wo=pi,$c=wl,vu=ve,bu=ke,KA=Ts,GA=dr,Wc=_o,si=Ji,hr[0]=zn,hr[1]=ae,hr[2]=fa,hr[3]=dn,hr[4]=ka,hr[5]=jn,hr[6]=yn,hr[7]=Rr,hr[8]=Jr,hr[9]=Vo,io[0]=Dt,io[1]=De,io[2]=st,io[3]=gt,io[4]=Pt,io[5]=Wt,io[6]=ms,Gr[0]=Qa,Gr[1]=ge,Gr[2]=Xi,Gr[3]=Dr,Gr[4]=_r,Gr[5]=Za,Gr[6]=Zr,Pe=1}else Pe=0}Pe&&(Pe=function(Vs,vn){for(Vs.M=0;Vs.M<Vs.Va;++Vs.M){var Ss,rs=Vs.Jc[Vs.M&Vs.Xb],zt=Vs.m,Xa=Vs;for(Ss=0;Ss<Xa.za;++Ss){var Us=zt,Is=Xa,cs=Is.Ac,Ls=Is.Bc+4*Ss,ta=Is.zc,Ha=Is.ya[Is.aa+Ss];if(Is.Qa.Bb?Ha.$b=Be(Us,Is.Pa.jb[0])?2+Be(Us,Is.Pa.jb[2]):Be(Us,Is.Pa.jb[1]):Ha.$b=0,Is.kc&&(Ha.Ad=Be(Us,Is.Bd)),Ha.Za=!Be(Us,145)+0,Ha.Za){var fn=Ha.Ob,mn=0;for(Is=0;4>Is;++Is){var an,zs=ta[0+Is];for(an=0;4>an;++an){zs=VA[cs[Ls+an]][zs];for(var sa=ko[Be(Us,zs[0])];0<sa;)sa=ko[2*sa+Be(Us,zs[sa])];zs=-sa,cs[Ls+an]=zs}r(fn,mn,cs,Ls,4),mn+=4,ta[0+Is]=zs}}else zs=Be(Us,156)?Be(Us,128)?1:3:Be(Us,163)?2:0,Ha.Ob[0]=zs,o(cs,Ls,zs,4),o(ta,0,zs,4);Ha.Dd=Be(Us,142)?Be(Us,114)?Be(Us,183)?1:3:2:0}if(Xa.m.Ka)return qs(Vs,7,"Premature end-of-partition0 encountered.");for(;Vs.ja<Vs.za;++Vs.ja){if(Xa=rs,Us=(zt=Vs).rb[zt.sb-1],cs=zt.rb[zt.sb+zt.ja],Ss=zt.ya[zt.aa+zt.ja],Ls=zt.kc?Ss.Ad:0)Us.la=cs.la=0,Ss.Za||(Us.Na=cs.Na=0),Ss.Hc=0,Ss.Gc=0,Ss.ia=0;else{var nn,ws;if(Us=cs,cs=Xa,Ls=zt.Pa.Xc,ta=zt.ya[zt.aa+zt.ja],Ha=zt.pb[ta.$b],Is=ta.ad,fn=0,mn=zt.rb[zt.sb-1],zs=an=0,o(Is,fn,0,384),ta.Za)var Sn=0,Vr=Ls[3];else{sa=l(16);var rn=Us.Na+mn.Na;if(rn=Bn(cs,Ls[1],rn,Ha.Eb,0,sa,0),Us.Na=mn.Na=(0<rn)+0,1<rn)ti(sa,0,Is,fn);else{var pr=sa[0]+3>>3;for(sa=0;256>sa;sa+=16)Is[fn+sa]=pr}Sn=1,Vr=Ls[0]}var _a=15&Us.la,gn=15&mn.la;for(sa=0;4>sa;++sa){var fr=1&gn;for(pr=ws=0;4>pr;++pr)_a=_a>>1|(fr=(rn=Bn(cs,Vr,rn=fr+(1&_a),Ha.Sc,Sn,Is,fn))>Sn)<<7,ws=ws<<2|(3<rn?3:1<rn?2:Is[fn+0]!=0),fn+=16;_a>>=4,gn=gn>>1|fr<<7,an=(an<<8|ws)>>>0}for(Vr=_a,Sn=gn>>4,nn=0;4>nn;nn+=2){for(ws=0,_a=Us.la>>4+nn,gn=mn.la>>4+nn,sa=0;2>sa;++sa){for(fr=1&gn,pr=0;2>pr;++pr)rn=fr+(1&_a),_a=_a>>1|(fr=0<(rn=Bn(cs,Ls[2],rn,Ha.Qc,0,Is,fn)))<<3,ws=ws<<2|(3<rn?3:1<rn?2:Is[fn+0]!=0),fn+=16;_a>>=2,gn=gn>>1|fr<<5}zs|=ws<<4*nn,Vr|=_a<<4<<nn,Sn|=(240&gn)<<nn}Us.la=Vr,mn.la=Sn,ta.Hc=an,ta.Gc=zs,ta.ia=43690&zs?0:Ha.ia,Ls=!(an|zs)}if(0<zt.L&&(zt.wa[zt.Y+zt.ja]=zt.gd[Ss.$b][Ss.Za],zt.wa[zt.Y+zt.ja].La|=!Ls),Xa.Ka)return qs(Vs,7,"Premature end-of-file encountered.")}if(Jn(Vs),zt=vn,Xa=1,Ss=(rs=Vs).D,Us=0<rs.L&&rs.M>=rs.zb&&rs.M<=rs.Va,rs.Aa==0)t:{if(Ss.M=rs.M,Ss.uc=Us,Rs(rs,Ss),Xa=1,Ss=(ws=rs.D).Nb,Us=(zs=lo[rs.L])*rs.R,cs=zs/2*rs.B,sa=16*Ss*rs.R,pr=8*Ss*rs.B,Ls=rs.sa,ta=rs.ta-Us+sa,Ha=rs.qa,Is=rs.ra-cs+pr,fn=rs.Ha,mn=rs.Ia-cs+pr,gn=(_a=ws.M)==0,an=_a>=rs.Va-1,rs.Aa==2&&Rs(rs,ws),ws.uc)for(fr=(rn=rs).D.M,s(rn.D.uc),ws=rn.yb;ws<rn.Hb;++ws){Sn=ws,Vr=fr;var Gn=(Fa=(Fn=rn).D).Nb;nn=Fn.R;var Fa=Fa.wa[Fa.Y+Sn],ia=Fn.sa,nr=Fn.ta+16*Gn*nn+16*Sn,Vn=Fa.dd,ga=Fa.tc;if(ga!=0)if(s(3<=ga),Fn.L==1)0<Sn&&GA(ia,nr,nn,ga+4),Fa.La&&si(ia,nr,nn,ga),0<Vr&&KA(ia,nr,nn,ga+4),Fa.La&&Wc(ia,nr,nn,ga);else{var mr=Fn.B,kn=Fn.qa,Oi=Fn.ra+8*Gn*mr+8*Sn,mi=Fn.Ha,Fn=Fn.Ia+8*Gn*mr+8*Sn;Gn=Fa.ld,0<Sn&&(Ia(ia,nr,nn,ga+4,Vn,Gn),Bl(kn,Oi,mi,Fn,mr,ga+4,Vn,Gn)),Fa.La&&($c(ia,nr,nn,ga,Vn,Gn),bu(kn,Oi,mi,Fn,mr,ga,Vn,Gn)),0<Vr&&(tn(ia,nr,nn,ga+4,Vn,Gn),Ti(kn,Oi,mi,Fn,mr,ga+4,Vn,Gn)),Fa.La&&(Wo(ia,nr,nn,ga,Vn,Gn),vu(kn,Oi,mi,Fn,mr,ga,Vn,Gn))}}if(rs.ia&&alert("todo:DitherRow"),zt.put!=null){if(ws=16*_a,_a=16*(_a+1),gn?(zt.y=rs.sa,zt.O=rs.ta+sa,zt.f=rs.qa,zt.N=rs.ra+pr,zt.ea=rs.Ha,zt.W=rs.Ia+pr):(ws-=zs,zt.y=Ls,zt.O=ta,zt.f=Ha,zt.N=Is,zt.ea=fn,zt.W=mn),an||(_a-=zs),_a>zt.o&&(_a=zt.o),zt.F=null,zt.J=null,rs.Fa!=null&&0<rs.Fa.length&&ws<_a&&(zt.J=Va(rs,zt,ws,_a-ws),zt.F=rs.mb,zt.F==null&&zt.F.length==0)){Xa=qs(rs,3,"Could not decode alpha data.");break t}ws<zt.j&&(zs=zt.j-ws,ws=zt.j,s(!(1&zs)),zt.O+=rs.R*zs,zt.N+=rs.B*(zs>>1),zt.W+=rs.B*(zs>>1),zt.F!=null&&(zt.J+=zt.width*zs)),ws<_a&&(zt.O+=zt.v,zt.N+=zt.v>>1,zt.W+=zt.v>>1,zt.F!=null&&(zt.J+=zt.v),zt.ka=ws-zt.j,zt.U=zt.va-zt.v,zt.T=_a-ws,Xa=zt.put(zt))}Ss+1!=rs.Ic||an||(r(rs.sa,rs.ta-Us,Ls,ta+16*rs.R,Us),r(rs.qa,rs.ra-cs,Ha,Is+8*rs.B,cs),r(rs.Ha,rs.Ia-cs,fn,mn+8*rs.B,cs))}if(!Xa)return qs(Vs,6,"Output aborted.")}return 1}(ye,Te)),Te.bc!=null&&Te.bc(Te),Pe&=1}return Pe?(ye.cb=0,Pe):0})(f,D)||(y=f.a)}}else y=f.a}y==0&&ne.Oa!=null&&ne.Oa.fd&&(y=Ds(ne.ba))}ne=y}se=ne!=0?null:11>se?ue.f.RGBA.eb:ue.f.kb.y}else se=null;return se};var Cu=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function p(U,V){for(var H="",I=0;I<4;I++)H+=String.fromCharCode(U[V++]);return H}function m(U,V){return U[V+0]|U[V+1]<<8}function v(U,V){return(U[V+0]|U[V+1]<<8|U[V+2]<<16)>>>0}function b(U,V){return(U[V+0]|U[V+1]<<8|U[V+2]<<16|U[V+3]<<24)>>>0}new h;var x=[0],C=[0],Q=[],j=new h,B=t,L=function(U,V){var H={},I=0,M=!1,re=0,G=0;if(H.frames=[],!function(k,T){for(var z=0;z<4;z++)if(k[T+z]!="RIFF".charCodeAt(z))return!0;return!1}(U,V)){for(b(U,V+=4),V+=8;V<U.length;){var Z=p(U,V),fe=b(U,V+=4);V+=4;var Ae=fe+(1&fe);switch(Z){case"VP8 ":case"VP8L":H.frames[I]===void 0&&(H.frames[I]={}),(he=H.frames[I]).src_off=M?G:V-8,he.src_size=re+fe+8,I++,M&&(M=!1,re=0,G=0);break;case"VP8X":(he=H.header={}).feature_flags=U[V];var Ce=V+4;he.canvas_width=1+v(U,Ce),Ce+=3,he.canvas_height=1+v(U,Ce),Ce+=3;break;case"ALPH":M=!0,re=Ae+8,G=V-8;break;case"ANIM":(he=H.header).bgcolor=b(U,V),Ce=V+4,he.loop_count=m(U,Ce),Ce+=2;break;case"ANMF":var te,he;(he=H.frames[I]={}).offset_x=2*v(U,V),V+=3,he.offset_y=2*v(U,V),V+=3,he.width=1+v(U,V),V+=3,he.height=1+v(U,V),V+=3,he.duration=v(U,V),V+=3,te=U[V++],he.dispose=1&te,he.blend=te>>1&1}Z!="ANMF"&&(V+=Ae)}return H}}(B,0);L.response=B,L.rgbaoutput=!0,L.dataurl=!1;var P=L.header?L.header:null,F=L.frames?L.frames:null;if(P){P.loop_counter=P.loop_count,x=[P.canvas_height],C=[P.canvas_width];for(var ee=0;ee<F.length&&F[ee].blend!=0;ee++);}var K=F[0],q=j.WebPDecodeRGBA(B,K.src_off,K.src_size,C,x);K.rgba=q,K.imgwidth=C[0],K.imgheight=x[0];for(var E=0;E<C[0]*x[0]*4;E++)Q[E]=q[E];return this.width=C,this.height=x,this.data=Q,this}(function(t){var s,a,r,o,l,A,u,h,p,m=function(k){return k=k||{},this.isStrokeTransparent=k.isStrokeTransparent||!1,this.strokeOpacity=k.strokeOpacity||1,this.strokeStyle=k.strokeStyle||"#000000",this.fillStyle=k.fillStyle||"#000000",this.isFillTransparent=k.isFillTransparent||!1,this.fillOpacity=k.fillOpacity||1,this.font=k.font||"10px sans-serif",this.textBaseline=k.textBaseline||"alphabetic",this.textAlign=k.textAlign||"left",this.lineWidth=k.lineWidth||1,this.lineJoin=k.lineJoin||"miter",this.lineCap=k.lineCap||"butt",this.path=k.path||[],this.transform=k.transform!==void 0?k.transform.clone():new h,this.globalCompositeOperation=k.globalCompositeOperation||"normal",this.globalAlpha=k.globalAlpha||1,this.clip_path=k.clip_path||[],this.currentPoint=k.currentPoint||new A,this.miterLimit=k.miterLimit||10,this.lastPoint=k.lastPoint||new A,this.lineDashOffset=k.lineDashOffset||0,this.lineDash=k.lineDash||[],this.margin=k.margin||[0,0,0,0],this.prevPageLastElemOffset=k.prevPageLastElemOffset||0,this.ignoreClearRect=typeof k.ignoreClearRect!="boolean"||k.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new v(this),s=this.internal.f2,a=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,o=this.internal.getHorizontalCoordinate,l=this.internal.getVerticalCoordinate,A=this.internal.Point,u=this.internal.Rectangle,h=this.internal.Matrix,p=new m}]);var v=function(k){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var T=k;Object.defineProperty(this,"pdf",{get:function(){return T}});var z=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return z},set:function(Ve){z=!!Ve}});var le=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return le},set:function(Ve){le=!!Ve}});var X=0;Object.defineProperty(this,"posX",{get:function(){return X},set:function(Ve){isNaN(Ve)||(X=Ve)}});var W=0;Object.defineProperty(this,"posY",{get:function(){return W},set:function(Ve){isNaN(Ve)||(W=Ve)}}),Object.defineProperty(this,"margin",{get:function(){return p.margin},set:function(Ve){var je;typeof Ve=="number"?je=[Ve,Ve,Ve,Ve]:((je=new Array(4))[0]=Ve[0],je[1]=Ve.length>=2?Ve[1]:je[0],je[2]=Ve.length>=3?Ve[2]:je[0],je[3]=Ve.length>=4?Ve[3]:je[1]),p.margin=je}});var de=!1;Object.defineProperty(this,"autoPaging",{get:function(){return de},set:function(Ve){de=Ve}});var me=0;Object.defineProperty(this,"lastBreak",{get:function(){return me},set:function(Ve){me=Ve}});var Be=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Be},set:function(Ve){Be=Ve}}),Object.defineProperty(this,"ctx",{get:function(){return p},set:function(Ve){Ve instanceof m&&(p=Ve)}}),Object.defineProperty(this,"path",{get:function(){return p.path},set:function(Ve){p.path=Ve}});var Qe=[];Object.defineProperty(this,"ctxStack",{get:function(){return Qe},set:function(Ve){Qe=Ve}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(Ve){var je;je=b(Ve),this.ctx.fillStyle=je.style,this.ctx.isFillTransparent=je.a===0,this.ctx.fillOpacity=je.a,this.pdf.setFillColor(je.r,je.g,je.b,{a:je.a}),this.pdf.setTextColor(je.r,je.g,je.b,{a:je.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(Ve){var je=b(Ve);this.ctx.strokeStyle=je.style,this.ctx.isStrokeTransparent=je.a===0,this.ctx.strokeOpacity=je.a,je.a===0?this.pdf.setDrawColor(255,255,255):(je.a,this.pdf.setDrawColor(je.r,je.g,je.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(Ve){["butt","round","square"].indexOf(Ve)!==-1&&(this.ctx.lineCap=Ve,this.pdf.setLineCap(Ve))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(Ve){isNaN(Ve)||(this.ctx.lineWidth=Ve,this.pdf.setLineWidth(Ve))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(Ve){["bevel","round","miter"].indexOf(Ve)!==-1&&(this.ctx.lineJoin=Ve,this.pdf.setLineJoin(Ve))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(Ve){isNaN(Ve)||(this.ctx.miterLimit=Ve,this.pdf.setMiterLimit(Ve))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(Ve){this.ctx.textBaseline=Ve}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(Ve){["right","end","center","left","start"].indexOf(Ve)!==-1&&(this.ctx.textAlign=Ve)}});var ut=null,mt=null;Object.defineProperty(this,"fontFaces",{get:function(){return mt},set:function(Ve){ut=null,mt=Ve}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(Ve){var je;if(this.ctx.font=Ve,(je=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(Ve))!==null){var Ft=je[1];je[2];var Rt=je[3],at=je[4];je[5];var Xe=je[6],pt=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(at)[2];at=Math.floor(pt==="px"?parseFloat(at)*this.pdf.internal.scaleFactor:pt==="em"?parseFloat(at)*this.pdf.getFontSize():parseFloat(at)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(at);var xe=function(Ht){var _t,Gt,$t=[],J=Ht.trim();if(J==="")return bm;if(J in uv)return[uv[J]];for(;J!=="";){switch(Gt=null,_t=(J=pv(J)).charAt(0)){case'"':case"'":Gt=QN(J.substring(1),_t);break;default:Gt=TN(J)}if(Gt===null||($t.push(Gt[0]),(J=pv(Gt[1]))!==""&&J.charAt(0)!==","))return bm;J=J.replace(/^,/,"")}return $t}(Xe);if(this.fontFaces){var et=function(Ht,_t){if(ut===null){var Gt=function($t){var J=[];return Object.keys($t).forEach(function(tt){$t[tt].forEach(function(Qt){var Et=null;switch(Qt){case"bold":Et={family:tt,weight:"bold"};break;case"italic":Et={family:tt,style:"italic"};break;case"bolditalic":Et={family:tt,weight:"bold",style:"italic"};break;case"":case"normal":Et={family:tt}}Et!==null&&(Et.ref={name:tt,style:Qt},J.push(Et))})}),J}(Ht.getFontList());ut=function($t){for(var J={},tt=0;tt<$t.length;++tt){var Qt=vm($t[tt]),Et=Qt.family,Jt=Qt.stretch,os=Qt.style,_e=Qt.weight;J[Et]=J[Et]||{},J[Et][Jt]=J[Et][Jt]||{},J[Et][Jt][os]=J[Et][Jt][os]||{},J[Et][Jt][os][_e]=Qt}return J}(Gt.concat(_t))}return ut}(this.pdf,this.fontFaces),Oe=xe.map(function(Ht){return{family:Ht,stretch:"normal",weight:Rt,style:Ft}}),Bt=function(Ht,_t,Gt){for(var $t=(Gt=Gt||{}).defaultFontFamily||"times",J=Object.assign({},LN,Gt.genericFontFamilies||{}),tt=null,Qt=null,Et=0;Et<_t.length;++Et)if(J[(tt=vm(_t[Et])).family]&&(tt.family=J[tt.family]),Ht.hasOwnProperty(tt.family)){Qt=Ht[tt.family];break}if(!(Qt=Qt||Ht[$t]))throw new Error("Could not find a font-family for the rule '"+hv(tt)+"' and default family '"+$t+"'.");if(Qt=function(Jt,os){if(os[Jt])return os[Jt];var _e=og[Jt],St=_e<=og.normal?-1:1,$e=dv(os,q1,_e,St);if(!$e)throw new Error("Could not find a matching font-stretch value for "+Jt);return $e}(tt.stretch,Qt),Qt=function(Jt,os){if(os[Jt])return os[Jt];for(var _e=z1[Jt],St=0;St<_e.length;++St)if(os[_e[St]])return os[_e[St]];throw new Error("Could not find a matching font-style for "+Jt)}(tt.style,Qt),!(Qt=function(Jt,os){if(os[Jt])return os[Jt];if(Jt===400&&os[500])return os[500];if(Jt===500&&os[400])return os[400];var _e=EN[Jt],St=dv(os,K1,_e,Jt<400?-1:1);if(!St)throw new Error("Could not find a matching font-weight for value "+Jt);return St}(tt.weight,Qt)))throw new Error("Failed to resolve a font for the rule '"+hv(tt)+"'.");return Qt}(et,Oe);this.pdf.setFont(Bt.ref.name,Bt.ref.style)}else{var xt="";(Rt==="bold"||parseInt(Rt,10)>=700||Ft==="bold")&&(xt="bold"),Ft==="italic"&&(xt+="italic"),xt.length===0&&(xt="normal");for(var dt="",Ut={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},wt=0;wt<xe.length;wt++){if(this.pdf.internal.getFont(xe[wt],xt,{noFallback:!0,disableWarning:!0})!==void 0){dt=xe[wt];break}if(xt==="bolditalic"&&this.pdf.internal.getFont(xe[wt],"bold",{noFallback:!0,disableWarning:!0})!==void 0)dt=xe[wt],xt="bold";else if(this.pdf.internal.getFont(xe[wt],"normal",{noFallback:!0,disableWarning:!0})!==void 0){dt=xe[wt],xt="normal";break}}if(dt===""){for(var bt=0;bt<xe.length;bt++)if(Ut[xe[bt]]){dt=Ut[xe[bt]];break}}dt=dt===""?"Times":dt,this.pdf.setFont(dt,xt)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(Ve){this.ctx.globalCompositeOperation=Ve}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(Ve){this.ctx.globalAlpha=Ve}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(Ve){this.ctx.lineDashOffset=Ve,he.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(Ve){this.ctx.lineDash=Ve,he.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(Ve){this.ctx.ignoreClearRect=!!Ve}})};v.prototype.setLineDash=function(k){this.lineDash=k},v.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},v.prototype.fill=function(){F.call(this,"fill",!1)},v.prototype.stroke=function(){F.call(this,"stroke",!1)},v.prototype.beginPath=function(){this.path=[{type:"begin"}]},v.prototype.moveTo=function(k,T){if(isNaN(k)||isNaN(T))throw Oa.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var z=this.ctx.transform.applyToPoint(new A(k,T));this.path.push({type:"mt",x:z.x,y:z.y}),this.ctx.lastPoint=new A(k,T)},v.prototype.closePath=function(){var k=new A(0,0),T=0;for(T=this.path.length-1;T!==-1;T--)if(this.path[T].type==="begin"&&Ca(this.path[T+1])==="object"&&typeof this.path[T+1].x=="number"){k=new A(this.path[T+1].x,this.path[T+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new A(k.x,k.y)},v.prototype.lineTo=function(k,T){if(isNaN(k)||isNaN(T))throw Oa.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var z=this.ctx.transform.applyToPoint(new A(k,T));this.path.push({type:"lt",x:z.x,y:z.y}),this.ctx.lastPoint=new A(z.x,z.y)},v.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),F.call(this,null,!0)},v.prototype.quadraticCurveTo=function(k,T,z,le){if(isNaN(z)||isNaN(le)||isNaN(k)||isNaN(T))throw Oa.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var X=this.ctx.transform.applyToPoint(new A(z,le)),W=this.ctx.transform.applyToPoint(new A(k,T));this.path.push({type:"qct",x1:W.x,y1:W.y,x:X.x,y:X.y}),this.ctx.lastPoint=new A(X.x,X.y)},v.prototype.bezierCurveTo=function(k,T,z,le,X,W){if(isNaN(X)||isNaN(W)||isNaN(k)||isNaN(T)||isNaN(z)||isNaN(le))throw Oa.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var de=this.ctx.transform.applyToPoint(new A(X,W)),me=this.ctx.transform.applyToPoint(new A(k,T)),Be=this.ctx.transform.applyToPoint(new A(z,le));this.path.push({type:"bct",x1:me.x,y1:me.y,x2:Be.x,y2:Be.y,x:de.x,y:de.y}),this.ctx.lastPoint=new A(de.x,de.y)},v.prototype.arc=function(k,T,z,le,X,W){if(isNaN(k)||isNaN(T)||isNaN(z)||isNaN(le)||isNaN(X))throw Oa.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(W=!!W,!this.ctx.transform.isIdentity){var de=this.ctx.transform.applyToPoint(new A(k,T));k=de.x,T=de.y;var me=this.ctx.transform.applyToPoint(new A(0,z)),Be=this.ctx.transform.applyToPoint(new A(0,0));z=Math.sqrt(Math.pow(me.x-Be.x,2)+Math.pow(me.y-Be.y,2))}Math.abs(X-le)>=2*Math.PI&&(le=0,X=2*Math.PI),this.path.push({type:"arc",x:k,y:T,radius:z,startAngle:le,endAngle:X,counterclockwise:W})},v.prototype.arcTo=function(k,T,z,le,X){throw new Error("arcTo not implemented.")},v.prototype.rect=function(k,T,z,le){if(isNaN(k)||isNaN(T)||isNaN(z)||isNaN(le))throw Oa.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(k,T),this.lineTo(k+z,T),this.lineTo(k+z,T+le),this.lineTo(k,T+le),this.lineTo(k,T),this.lineTo(k+z,T),this.lineTo(k,T)},v.prototype.fillRect=function(k,T,z,le){if(isNaN(k)||isNaN(T)||isNaN(z)||isNaN(le))throw Oa.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!x.call(this)){var X={};this.lineCap!=="butt"&&(X.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(X.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(k,T,z,le),this.fill(),X.hasOwnProperty("lineCap")&&(this.lineCap=X.lineCap),X.hasOwnProperty("lineJoin")&&(this.lineJoin=X.lineJoin)}},v.prototype.strokeRect=function(k,T,z,le){if(isNaN(k)||isNaN(T)||isNaN(z)||isNaN(le))throw Oa.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");C.call(this)||(this.beginPath(),this.rect(k,T,z,le),this.stroke())},v.prototype.clearRect=function(k,T,z,le){if(isNaN(k)||isNaN(T)||isNaN(z)||isNaN(le))throw Oa.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(k,T,z,le))},v.prototype.save=function(k){k=typeof k!="boolean"||k;for(var T=this.pdf.internal.getCurrentPageInfo().pageNumber,z=0;z<this.pdf.internal.getNumberOfPages();z++)this.pdf.setPage(z+1),this.pdf.internal.out("q");if(this.pdf.setPage(T),k){this.ctx.fontSize=this.pdf.internal.getFontSize();var le=new m(this.ctx);this.ctxStack.push(this.ctx),this.ctx=le}},v.prototype.restore=function(k){k=typeof k!="boolean"||k;for(var T=this.pdf.internal.getCurrentPageInfo().pageNumber,z=0;z<this.pdf.internal.getNumberOfPages();z++)this.pdf.setPage(z+1),this.pdf.internal.out("Q");this.pdf.setPage(T),k&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},v.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var b=function(k){var T,z,le,X;if(k.isCanvasGradient===!0&&(k=k.getColor()),!k)return{r:0,g:0,b:0,a:0,style:k};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(k))T=0,z=0,le=0,X=0;else{var W=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(k);if(W!==null)T=parseInt(W[1]),z=parseInt(W[2]),le=parseInt(W[3]),X=1;else if((W=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(k))!==null)T=parseInt(W[1]),z=parseInt(W[2]),le=parseInt(W[3]),X=parseFloat(W[4]);else{if(X=1,typeof k=="string"&&k.charAt(0)!=="#"){var de=new R1(k);k=de.ok?de.toHex():"#000000"}k.length===4?(T=k.substring(1,2),T+=T,z=k.substring(2,3),z+=z,le=k.substring(3,4),le+=le):(T=k.substring(1,3),z=k.substring(3,5),le=k.substring(5,7)),T=parseInt(T,16),z=parseInt(z,16),le=parseInt(le,16)}}return{r:T,g:z,b:le,a:X,style:k}},x=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},C=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};v.prototype.fillText=function(k,T,z,le){if(isNaN(T)||isNaN(z)||typeof k!="string")throw Oa.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(le=isNaN(le)?void 0:le,!x.call(this)){var X=Ae(this.ctx.transform.rotation),W=this.ctx.transform.scaleX;I.call(this,{text:k,x:T,y:z,scale:W,angle:X,align:this.textAlign,maxWidth:le})}},v.prototype.strokeText=function(k,T,z,le){if(isNaN(T)||isNaN(z)||typeof k!="string")throw Oa.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!C.call(this)){le=isNaN(le)?void 0:le;var X=Ae(this.ctx.transform.rotation),W=this.ctx.transform.scaleX;I.call(this,{text:k,x:T,y:z,scale:W,renderingMode:"stroke",angle:X,align:this.textAlign,maxWidth:le})}},v.prototype.measureText=function(k){if(typeof k!="string")throw Oa.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var T=this.pdf,z=this.pdf.internal.scaleFactor,le=T.internal.getFontSize(),X=T.getStringUnitWidth(k)*le/T.internal.scaleFactor;return new function(W){var de=(W=W||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return de}}),this}({width:X*=Math.round(96*z/72*1e4)/1e4})},v.prototype.scale=function(k,T){if(isNaN(k)||isNaN(T))throw Oa.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var z=new h(k,0,0,T,0,0);this.ctx.transform=this.ctx.transform.multiply(z)},v.prototype.rotate=function(k){if(isNaN(k))throw Oa.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var T=new h(Math.cos(k),Math.sin(k),-Math.sin(k),Math.cos(k),0,0);this.ctx.transform=this.ctx.transform.multiply(T)},v.prototype.translate=function(k,T){if(isNaN(k)||isNaN(T))throw Oa.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var z=new h(1,0,0,1,k,T);this.ctx.transform=this.ctx.transform.multiply(z)},v.prototype.transform=function(k,T,z,le,X,W){if(isNaN(k)||isNaN(T)||isNaN(z)||isNaN(le)||isNaN(X)||isNaN(W))throw Oa.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var de=new h(k,T,z,le,X,W);this.ctx.transform=this.ctx.transform.multiply(de)},v.prototype.setTransform=function(k,T,z,le,X,W){k=isNaN(k)?1:k,T=isNaN(T)?0:T,z=isNaN(z)?0:z,le=isNaN(le)?1:le,X=isNaN(X)?0:X,W=isNaN(W)?0:W,this.ctx.transform=new h(k,T,z,le,X,W)};var Q=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};v.prototype.drawImage=function(k,T,z,le,X,W,de,me,Be){var Qe=this.pdf.getImageProperties(k),ut=1,mt=1,Ve=1,je=1;le!==void 0&&me!==void 0&&(Ve=me/le,je=Be/X,ut=Qe.width/le*me/le,mt=Qe.height/X*Be/X),W===void 0&&(W=T,de=z,T=0,z=0),le!==void 0&&me===void 0&&(me=le,Be=X),le===void 0&&me===void 0&&(me=Qe.width,Be=Qe.height);for(var Ft,Rt=this.ctx.transform.decompose(),at=Ae(Rt.rotate.shx),Xe=new h,pt=(Xe=(Xe=(Xe=Xe.multiply(Rt.translate)).multiply(Rt.skew)).multiply(Rt.scale)).applyToRectangle(new u(W-T*Ve,de-z*je,le*ut,X*mt)),xe=j.call(this,pt),et=[],Oe=0;Oe<xe.length;Oe+=1)et.indexOf(xe[Oe])===-1&&et.push(xe[Oe]);if(P(et),this.autoPaging)for(var Bt=et[0],xt=et[et.length-1],dt=Bt;dt<xt+1;dt++){this.pdf.setPage(dt);var Ut=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],wt=dt===1?this.posY+this.margin[0]:this.margin[0],bt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ht=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],_t=dt===1?0:bt+(dt-2)*Ht;if(this.ctx.clip_path.length!==0){var Gt=this.path;Ft=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=L(Ft,this.posX+this.margin[3],-_t+wt+this.ctx.prevPageLastElemOffset),ee.call(this,"fill",!0),this.path=Gt}var $t=JSON.parse(JSON.stringify(pt));$t=L([$t],this.posX+this.margin[3],-_t+wt+this.ctx.prevPageLastElemOffset)[0];var J=(dt>Bt||dt<xt)&&Q.call(this);J&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ut,Ht,null).clip().discardPath()),this.pdf.addImage(k,"JPEG",$t.x,$t.y,$t.w,$t.h,null,null,at),J&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(k,"JPEG",pt.x,pt.y,pt.w,pt.h,null,null,at)};var j=function(k,T,z){var le=[];T=T||this.pdf.internal.pageSize.width,z=z||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var X=this.posY+this.ctx.prevPageLastElemOffset;switch(k.type){default:case"mt":case"lt":le.push(Math.floor((k.y+X)/z)+1);break;case"arc":le.push(Math.floor((k.y+X-k.radius)/z)+1),le.push(Math.floor((k.y+X+k.radius)/z)+1);break;case"qct":var W=Ce(this.ctx.lastPoint.x,this.ctx.lastPoint.y,k.x1,k.y1,k.x,k.y);le.push(Math.floor((W.y+X)/z)+1),le.push(Math.floor((W.y+W.h+X)/z)+1);break;case"bct":var de=te(this.ctx.lastPoint.x,this.ctx.lastPoint.y,k.x1,k.y1,k.x2,k.y2,k.x,k.y);le.push(Math.floor((de.y+X)/z)+1),le.push(Math.floor((de.y+de.h+X)/z)+1);break;case"rect":le.push(Math.floor((k.y+X)/z)+1),le.push(Math.floor((k.y+k.h+X)/z)+1)}for(var me=0;me<le.length;me+=1)for(;this.pdf.internal.getNumberOfPages()<le[me];)B.call(this);return le},B=function(){var k=this.fillStyle,T=this.strokeStyle,z=this.font,le=this.lineCap,X=this.lineWidth,W=this.lineJoin;this.pdf.addPage(),this.fillStyle=k,this.strokeStyle=T,this.font=z,this.lineCap=le,this.lineWidth=X,this.lineJoin=W},L=function(k,T,z){for(var le=0;le<k.length;le++)switch(k[le].type){case"bct":k[le].x2+=T,k[le].y2+=z;case"qct":k[le].x1+=T,k[le].y1+=z;default:k[le].x+=T,k[le].y+=z}return k},P=function(k){return k.sort(function(T,z){return T-z})},F=function(k,T){for(var z,le,X=this.fillStyle,W=this.strokeStyle,de=this.lineCap,me=this.lineWidth,Be=Math.abs(me*this.ctx.transform.scaleX),Qe=this.lineJoin,ut=JSON.parse(JSON.stringify(this.path)),mt=JSON.parse(JSON.stringify(this.path)),Ve=[],je=0;je<mt.length;je++)if(mt[je].x!==void 0)for(var Ft=j.call(this,mt[je]),Rt=0;Rt<Ft.length;Rt+=1)Ve.indexOf(Ft[Rt])===-1&&Ve.push(Ft[Rt]);for(var at=0;at<Ve.length;at++)for(;this.pdf.internal.getNumberOfPages()<Ve[at];)B.call(this);if(P(Ve),this.autoPaging)for(var Xe=Ve[0],pt=Ve[Ve.length-1],xe=Xe;xe<pt+1;xe++){this.pdf.setPage(xe),this.fillStyle=X,this.strokeStyle=W,this.lineCap=de,this.lineWidth=Be,this.lineJoin=Qe;var et=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Oe=xe===1?this.posY+this.margin[0]:this.margin[0],Bt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],xt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],dt=xe===1?0:Bt+(xe-2)*xt;if(this.ctx.clip_path.length!==0){var Ut=this.path;z=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=L(z,this.posX+this.margin[3],-dt+Oe+this.ctx.prevPageLastElemOffset),ee.call(this,k,!0),this.path=Ut}if(le=JSON.parse(JSON.stringify(ut)),this.path=L(le,this.posX+this.margin[3],-dt+Oe+this.ctx.prevPageLastElemOffset),T===!1||xe===0){var wt=(xe>Xe||xe<pt)&&Q.call(this);wt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],et,xt,null).clip().discardPath()),ee.call(this,k,T),wt&&this.pdf.restoreGraphicsState()}this.lineWidth=me}else this.lineWidth=Be,ee.call(this,k,T),this.lineWidth=me;this.path=ut},ee=function(k,T){if((k!=="stroke"||T||!C.call(this))&&(k==="stroke"||T||!x.call(this))){for(var z,le,X=[],W=this.path,de=0;de<W.length;de++){var me=W[de];switch(me.type){case"begin":X.push({begin:!0});break;case"close":X.push({close:!0});break;case"mt":X.push({start:me,deltas:[],abs:[]});break;case"lt":var Be=X.length;if(W[de-1]&&!isNaN(W[de-1].x)&&(z=[me.x-W[de-1].x,me.y-W[de-1].y],Be>0)){for(;Be>=0;Be--)if(X[Be-1].close!==!0&&X[Be-1].begin!==!0){X[Be-1].deltas.push(z),X[Be-1].abs.push(me);break}}break;case"bct":z=[me.x1-W[de-1].x,me.y1-W[de-1].y,me.x2-W[de-1].x,me.y2-W[de-1].y,me.x-W[de-1].x,me.y-W[de-1].y],X[X.length-1].deltas.push(z);break;case"qct":var Qe=W[de-1].x+2/3*(me.x1-W[de-1].x),ut=W[de-1].y+2/3*(me.y1-W[de-1].y),mt=me.x+2/3*(me.x1-me.x),Ve=me.y+2/3*(me.y1-me.y),je=me.x,Ft=me.y;z=[Qe-W[de-1].x,ut-W[de-1].y,mt-W[de-1].x,Ve-W[de-1].y,je-W[de-1].x,Ft-W[de-1].y],X[X.length-1].deltas.push(z);break;case"arc":X.push({deltas:[],abs:[],arc:!0}),Array.isArray(X[X.length-1].abs)&&X[X.length-1].abs.push(me)}}le=T?null:k==="stroke"?"stroke":"fill";for(var Rt=!1,at=0;at<X.length;at++)if(X[at].arc)for(var Xe=X[at].abs,pt=0;pt<Xe.length;pt++){var xe=Xe[pt];xe.type==="arc"?E.call(this,xe.x,xe.y,xe.radius,xe.startAngle,xe.endAngle,xe.counterclockwise,void 0,T,!Rt):M.call(this,xe.x,xe.y),Rt=!0}else if(X[at].close===!0)this.pdf.internal.out("h"),Rt=!1;else if(X[at].begin!==!0){var et=X[at].start.x,Oe=X[at].start.y;re.call(this,X[at].deltas,et,Oe),Rt=!0}le&&U.call(this,le),T&&V.call(this)}},K=function(k){var T=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,z=T*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return k-z;case"top":return k+T-z;case"hanging":return k+T-2*z;case"middle":return k+T/2-z;default:return k}},q=function(k){return k+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};v.prototype.createLinearGradient=function(){var k=function(){};return k.colorStops=[],k.addColorStop=function(T,z){this.colorStops.push([T,z])},k.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},k.isCanvasGradient=!0,k},v.prototype.createPattern=function(){return this.createLinearGradient()},v.prototype.createRadialGradient=function(){return this.createLinearGradient()};var E=function(k,T,z,le,X,W,de,me,Be){for(var Qe=Z.call(this,z,le,X,W),ut=0;ut<Qe.length;ut++){var mt=Qe[ut];ut===0&&(Be?H.call(this,mt.x1+k,mt.y1+T):M.call(this,mt.x1+k,mt.y1+T)),G.call(this,k,T,mt.x2,mt.y2,mt.x3,mt.y3,mt.x4,mt.y4)}me?V.call(this):U.call(this,de)},U=function(k){switch(k){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},V=function(){this.pdf.clip(),this.pdf.discardPath()},H=function(k,T){this.pdf.internal.out(a(k)+" "+r(T)+" m")},I=function(k){var T;switch(k.align){case"right":case"end":T="right";break;case"center":T="center";break;default:T="left"}var z=this.pdf.getTextDimensions(k.text),le=K.call(this,k.y),X=q.call(this,le)-z.h,W=this.ctx.transform.applyToPoint(new A(k.x,le)),de=this.ctx.transform.decompose(),me=new h;me=(me=(me=me.multiply(de.translate)).multiply(de.skew)).multiply(de.scale);for(var Be,Qe,ut,mt=this.ctx.transform.applyToRectangle(new u(k.x,le,z.w,z.h)),Ve=me.applyToRectangle(new u(k.x,X,z.w,z.h)),je=j.call(this,Ve),Ft=[],Rt=0;Rt<je.length;Rt+=1)Ft.indexOf(je[Rt])===-1&&Ft.push(je[Rt]);if(P(Ft),this.autoPaging)for(var at=Ft[0],Xe=Ft[Ft.length-1],pt=at;pt<Xe+1;pt++){this.pdf.setPage(pt);var xe=pt===1?this.posY+this.margin[0]:this.margin[0],et=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Oe=this.pdf.internal.pageSize.height-this.margin[2],Bt=Oe-this.margin[0],xt=this.pdf.internal.pageSize.width-this.margin[1],dt=xt-this.margin[3],Ut=pt===1?0:et+(pt-2)*Bt;if(this.ctx.clip_path.length!==0){var wt=this.path;Be=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=L(Be,this.posX+this.margin[3],-1*Ut+xe),ee.call(this,"fill",!0),this.path=wt}var bt=L([JSON.parse(JSON.stringify(Ve))],this.posX+this.margin[3],-Ut+xe+this.ctx.prevPageLastElemOffset)[0];k.scale>=.01&&(Qe=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Qe*k.scale),ut=this.lineWidth,this.lineWidth=ut*k.scale);var Ht=this.autoPaging!=="text";if(Ht||bt.y+bt.h<=Oe){if(Ht||bt.y>=xe&&bt.x<=xt){var _t=Ht?k.text:this.pdf.splitTextToSize(k.text,k.maxWidth||xt-bt.x)[0],Gt=L([JSON.parse(JSON.stringify(mt))],this.posX+this.margin[3],-Ut+xe+this.ctx.prevPageLastElemOffset)[0],$t=Ht&&(pt>at||pt<Xe)&&Q.call(this);$t&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],dt,Bt,null).clip().discardPath()),this.pdf.text(_t,Gt.x,Gt.y,{angle:k.angle,align:T,renderingMode:k.renderingMode}),$t&&this.pdf.restoreGraphicsState()}}else bt.y<Oe&&(this.ctx.prevPageLastElemOffset+=Oe-bt.y);k.scale>=.01&&(this.pdf.setFontSize(Qe),this.lineWidth=ut)}else k.scale>=.01&&(Qe=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Qe*k.scale),ut=this.lineWidth,this.lineWidth=ut*k.scale),this.pdf.text(k.text,W.x+this.posX,W.y+this.posY,{angle:k.angle,align:T,renderingMode:k.renderingMode,maxWidth:k.maxWidth}),k.scale>=.01&&(this.pdf.setFontSize(Qe),this.lineWidth=ut)},M=function(k,T,z,le){z=z||0,le=le||0,this.pdf.internal.out(a(k+z)+" "+r(T+le)+" l")},re=function(k,T,z){return this.pdf.lines(k,T,z,null,null)},G=function(k,T,z,le,X,W,de,me){this.pdf.internal.out([s(o(z+k)),s(l(le+T)),s(o(X+k)),s(l(W+T)),s(o(de+k)),s(l(me+T)),"c"].join(" "))},Z=function(k,T,z,le){for(var X=2*Math.PI,W=Math.PI/2;T>z;)T-=X;var de=Math.abs(z-T);de<X&&le&&(de=X-de);for(var me=[],Be=le?-1:1,Qe=T;de>1e-5;){var ut=Qe+Be*Math.min(de,W);me.push(fe.call(this,k,Qe,ut)),de-=Math.abs(ut-Qe),Qe=ut}return me},fe=function(k,T,z){var le=(z-T)/2,X=k*Math.cos(le),W=k*Math.sin(le),de=X,me=-W,Be=de*de+me*me,Qe=Be+de*X+me*W,ut=4/3*(Math.sqrt(2*Be*Qe)-Qe)/(de*W-me*X),mt=de-ut*me,Ve=me+ut*de,je=mt,Ft=-Ve,Rt=le+T,at=Math.cos(Rt),Xe=Math.sin(Rt);return{x1:k*Math.cos(T),y1:k*Math.sin(T),x2:mt*at-Ve*Xe,y2:mt*Xe+Ve*at,x3:je*at-Ft*Xe,y3:je*Xe+Ft*at,x4:k*Math.cos(z),y4:k*Math.sin(z)}},Ae=function(k){return 180*k/Math.PI},Ce=function(k,T,z,le,X,W){var de=k+.5*(z-k),me=T+.5*(le-T),Be=X+.5*(z-X),Qe=W+.5*(le-W),ut=Math.min(k,X,de,Be),mt=Math.max(k,X,de,Be),Ve=Math.min(T,W,me,Qe),je=Math.max(T,W,me,Qe);return new u(ut,Ve,mt-ut,je-Ve)},te=function(k,T,z,le,X,W,de,me){var Be,Qe,ut,mt,Ve,je,Ft,Rt,at,Xe,pt,xe,et,Oe,Bt=z-k,xt=le-T,dt=X-z,Ut=W-le,wt=de-X,bt=me-W;for(Qe=0;Qe<41;Qe++)at=(Ft=(ut=k+(Be=Qe/40)*Bt)+Be*((Ve=z+Be*dt)-ut))+Be*(Ve+Be*(X+Be*wt-Ve)-Ft),Xe=(Rt=(mt=T+Be*xt)+Be*((je=le+Be*Ut)-mt))+Be*(je+Be*(W+Be*bt-je)-Rt),Qe==0?(pt=at,xe=Xe,et=at,Oe=Xe):(pt=Math.min(pt,at),xe=Math.min(xe,Xe),et=Math.max(et,at),Oe=Math.max(Oe,Xe));return new u(Math.round(pt),Math.round(xe),Math.round(et-pt),Math.round(Oe-xe))},he=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var k,T,z=(k=this.ctx.lineDash,T=this.ctx.lineDashOffset,JSON.stringify({lineDash:k,lineDashOffset:T}));this.prevLineDash!==z&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=z)}}})(is.API),function(t){var s=function(A){var u,h,p,m,v,b,x,C,Q,j;for(h=[],p=0,m=(A+=u="\0\0\0\0".slice(A.length%4||4)).length;m>p;p+=4)(v=(A.charCodeAt(p)<<24)+(A.charCodeAt(p+1)<<16)+(A.charCodeAt(p+2)<<8)+A.charCodeAt(p+3))!==0?(b=(v=((v=((v=((v=(v-(j=v%85))/85)-(Q=v%85))/85)-(C=v%85))/85)-(x=v%85))/85)%85,h.push(b+33,x+33,C+33,Q+33,j+33)):h.push(122);return function(B,L){for(var P=L;P>0;P--)B.pop()}(h,u.length),String.fromCharCode.apply(String,h)+"~>"},a=function(A){var u,h,p,m,v,b=String,x="length",C=255,Q="charCodeAt",j="slice",B="replace";for(A[j](-2),A=A[j](0,-2)[B](/\s/g,"")[B]("z","!!!!!"),p=[],m=0,v=(A+=u="uuuuu"[j](A[x]%5||5))[x];v>m;m+=5)h=52200625*(A[Q](m)-33)+614125*(A[Q](m+1)-33)+7225*(A[Q](m+2)-33)+85*(A[Q](m+3)-33)+(A[Q](m+4)-33),p.push(C&h>>24,C&h>>16,C&h>>8,C&h);return function(L,P){for(var F=P;F>0;F--)L.pop()}(p,u[x]),b.fromCharCode.apply(b,p)},r=function(A){return A.split("").map(function(u){return("0"+u.charCodeAt().toString(16)).slice(-2)}).join("")+">"},o=function(A){var u=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((A=A.replace(/\s/g,"")).indexOf(">")!==-1&&(A=A.substr(0,A.indexOf(">"))),A.length%2&&(A+="0"),u.test(A)===!1)return"";for(var h="",p=0;p<A.length;p+=2)h+=String.fromCharCode("0x"+(A[p]+A[p+1]));return h},l=function(A){for(var u=new Uint8Array(A.length),h=A.length;h--;)u[h]=A.charCodeAt(h);return(u=eg(u)).reduce(function(p,m){return p+String.fromCharCode(m)},"")};t.processDataByFilters=function(A,u){var h=0,p=A||"",m=[];for(typeof(u=u||[])=="string"&&(u=[u]),h=0;h<u.length;h+=1)switch(u[h]){case"ASCII85Decode":case"/ASCII85Decode":p=a(p),m.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":p=s(p),m.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":p=o(p),m.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":p=r(p),m.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":p=l(p),m.push("/FlateDecode");break;default:throw new Error('The filter: "'+u[h]+'" is not implemented')}return{data:p,reverseChain:m.reverse().join(" ")}}}(is.API),function(t){t.loadFile=function(s,a,r){return function(o,l,A){l=l!==!1,A=typeof A=="function"?A:function(){};var u=void 0;try{u=function(h,p,m){var v=new XMLHttpRequest,b=0,x=function(C){var Q=C.length,j=[],B=String.fromCharCode;for(b=0;b<Q;b+=1)j.push(B(255&C.charCodeAt(b)));return j.join("")};if(v.open("GET",h,!p),v.overrideMimeType("text/plain; charset=x-user-defined"),p===!1&&(v.onload=function(){v.status===200?m(x(this.responseText)):m(void 0)}),v.send(null),p&&v.status===200)return x(v.responseText)}(o,l,A)}catch{}return u}(s,a,r)},t.loadImageFile=t.loadFile}(is.API),function(t){function s(){return(Es.html2canvas?Promise.resolve(Es.html2canvas):li(()=>Promise.resolve().then(()=>Au),void 0)).catch(function(u){return Promise.reject(new Error("Could not load html2canvas: "+u))}).then(function(u){return u.default?u.default:u})}function a(){return(Es.DOMPurify?Promise.resolve(Es.DOMPurify):li(()=>import("./purify.es-B6FQ9oRL.js"),[])).catch(function(u){return Promise.reject(new Error("Could not load dompurify: "+u))}).then(function(u){return u.default?u.default:u})}var r=function(u){var h=Ca(u);return h==="undefined"?"undefined":h==="string"||u instanceof String?"string":h==="number"||u instanceof Number?"number":h==="function"||u instanceof Function?"function":u&&u.constructor===Array?"array":u&&u.nodeType===1?"element":h==="object"?"object":"unknown"},o=function(u,h){var p=document.createElement(u);for(var m in h.className&&(p.className=h.className),h.innerHTML&&h.dompurify&&(p.innerHTML=h.dompurify.sanitize(h.innerHTML)),h.style)p.style[m]=h.style[m];return p},l=function u(h,p){for(var m=h.nodeType===3?document.createTextNode(h.nodeValue):h.cloneNode(!1),v=h.firstChild;v;v=v.nextSibling)p!==!0&&v.nodeType===1&&v.nodeName==="SCRIPT"||m.appendChild(u(v,p));return h.nodeType===1&&(h.nodeName==="CANVAS"?(m.width=h.width,m.height=h.height,m.getContext("2d").drawImage(h,0,0)):h.nodeName!=="TEXTAREA"&&h.nodeName!=="SELECT"||(m.value=h.value),m.addEventListener("load",function(){m.scrollTop=h.scrollTop,m.scrollLeft=h.scrollLeft},!0)),m},A=function u(h){var p=Object.assign(u.convert(Promise.resolve()),JSON.parse(JSON.stringify(u.template))),m=u.convert(Promise.resolve(),p);return(m=m.setProgress(1,u,1,[u])).set(h)};(A.prototype=Object.create(Promise.prototype)).constructor=A,A.convert=function(u,h){return u.__proto__=h||A.prototype,u},A.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},A.prototype.from=function(u,h){return this.then(function(){switch(h=h||function(p){switch(r(p)){case"string":return"string";case"element":return p.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(u),h){case"string":return this.then(a).then(function(p){return this.set({src:o("div",{innerHTML:u,dompurify:p})})});case"element":return this.set({src:u});case"canvas":return this.set({canvas:u});case"img":return this.set({img:u});default:return this.error("Unknown source type.")}})},A.prototype.to=function(u){switch(u){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},A.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var u={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},h=l(this.prop.src,this.opt.html2canvas.javascriptEnabled);h.tagName==="BODY"&&(u.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=o("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=o("div",{className:"html2pdf__container",style:u}),this.prop.container.appendChild(h),this.prop.container.firstChild.appendChild(o("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},A.prototype.toCanvas=function(){var u=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(u).then(s).then(function(h){var p=Object.assign({},this.opt.html2canvas);return delete p.onrendered,h(this.prop.container,p)}).then(function(h){(this.opt.html2canvas.onrendered||function(){})(h),this.prop.canvas=h,document.body.removeChild(this.prop.overlay)})},A.prototype.toContext2d=function(){var u=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(u).then(s).then(function(h){var p=this.opt.jsPDF,m=this.opt.fontFaces,v=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,b=Object.assign({async:!0,allowTaint:!0,scale:v,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete b.onrendered,p.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,p.context2d.posX=this.opt.x,p.context2d.posY=this.opt.y,p.context2d.margin=this.opt.margin,p.context2d.fontFaces=m,m)for(var x=0;x<m.length;++x){var C=m[x],Q=C.src.find(function(j){return j.format==="truetype"});Q&&p.addFont(Q.url,C.ref.name,C.ref.style)}return b.windowHeight=b.windowHeight||0,b.windowHeight=b.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):b.windowHeight,p.context2d.save(!0),h(this.prop.container,b)}).then(function(h){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(h),this.prop.canvas=h,document.body.removeChild(this.prop.overlay)})},A.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var u=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=u})},A.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},A.prototype.output=function(u,h,p){return(p=p||"pdf").toLowerCase()==="img"||p.toLowerCase()==="image"?this.outputImg(u,h):this.outputPdf(u,h)},A.prototype.outputPdf=function(u,h){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(u,h)})},A.prototype.outputImg=function(u){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(u){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+u+'" is not supported.'}})},A.prototype.save=function(u){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(u?{filename:u}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},A.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},A.prototype.set=function(u){if(r(u)!=="object")return this;var h=Object.keys(u||{}).map(function(p){if(p in A.template.prop)return function(){this.prop[p]=u[p]};switch(p){case"margin":return this.setMargin.bind(this,u.margin);case"jsPDF":return function(){return this.opt.jsPDF=u.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,u.pageSize);default:return function(){this.opt[p]=u[p]}}},this);return this.then(function(){return this.thenList(h)})},A.prototype.get=function(u,h){return this.then(function(){var p=u in A.template.prop?this.prop[u]:this.opt[u];return h?h(p):p})},A.prototype.setMargin=function(u){return this.then(function(){switch(r(u)){case"number":u=[u,u,u,u];case"array":if(u.length===2&&(u=[u[0],u[1],u[0],u[1]]),u.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=u}).then(this.setPageSize)},A.prototype.setPageSize=function(u){function h(p,m){return Math.floor(p*m/72*96)}return this.then(function(){(u=u||is.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(u.inner={width:u.width-this.opt.margin[1]-this.opt.margin[3],height:u.height-this.opt.margin[0]-this.opt.margin[2]},u.inner.px={width:h(u.inner.width,u.k),height:h(u.inner.height,u.k)},u.inner.ratio=u.inner.height/u.inner.width),this.prop.pageSize=u})},A.prototype.setProgress=function(u,h,p,m){return u!=null&&(this.progress.val=u),h!=null&&(this.progress.state=h),p!=null&&(this.progress.n=p),m!=null&&(this.progress.stack=m),this.progress.ratio=this.progress.val/this.progress.state,this},A.prototype.updateProgress=function(u,h,p,m){return this.setProgress(u?this.progress.val+u:null,h||null,p?this.progress.n+p:null,m?this.progress.stack.concat(m):null)},A.prototype.then=function(u,h){var p=this;return this.thenCore(u,h,function(m,v){return p.updateProgress(null,null,1,[m]),Promise.prototype.then.call(this,function(b){return p.updateProgress(null,m),b}).then(m,v).then(function(b){return p.updateProgress(1),b})})},A.prototype.thenCore=function(u,h,p){p=p||Promise.prototype.then;var m=this;u&&(u=u.bind(m)),h&&(h=h.bind(m));var v=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?m:A.convert(Object.assign({},m),Promise.prototype),b=p.call(v,u,h);return A.convert(b,m.__proto__)},A.prototype.thenExternal=function(u,h){return Promise.prototype.then.call(this,u,h)},A.prototype.thenList=function(u){var h=this;return u.forEach(function(p){h=h.thenCore(p)}),h},A.prototype.catch=function(u){u&&(u=u.bind(this));var h=Promise.prototype.catch.call(this,u);return A.convert(h,this)},A.prototype.catchExternal=function(u){return Promise.prototype.catch.call(this,u)},A.prototype.error=function(u){return this.then(function(){throw new Error(u)})},A.prototype.using=A.prototype.set,A.prototype.saveAs=A.prototype.save,A.prototype.export=A.prototype.output,A.prototype.run=A.prototype.then,is.getPageSize=function(u,h,p){if(Ca(u)==="object"){var m=u;u=m.orientation,h=m.unit||h,p=m.format||p}h=h||"mm",p=p||"a4",u=(""+(u||"P")).toLowerCase();var v,b=(""+p).toLowerCase(),x={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(h){case"pt":v=1;break;case"mm":v=72/25.4;break;case"cm":v=72/2.54;break;case"in":v=72;break;case"px":v=.75;break;case"pc":case"em":v=12;break;case"ex":v=6;break;default:throw"Invalid unit: "+h}var C,Q=0,j=0;if(x.hasOwnProperty(b))Q=x[b][1]/v,j=x[b][0]/v;else try{Q=p[1],j=p[0]}catch{throw new Error("Invalid format: "+p)}if(u==="p"||u==="portrait")u="p",j>Q&&(C=j,j=Q,Q=C);else{if(u!=="l"&&u!=="landscape")throw"Invalid orientation: "+u;u="l",Q>j&&(C=j,j=Q,Q=C)}return{width:j,height:Q,unit:h,k:v,orientation:u}},t.html=function(u,h){(h=h||{}).callback=h.callback||function(){},h.html2canvas=h.html2canvas||{},h.html2canvas.canvas=h.html2canvas.canvas||this.canvas,h.jsPDF=h.jsPDF||this,h.fontFaces=h.fontFaces?h.fontFaces.map(vm):null;var p=new A(h);return h.worker?p:p.from(u).doCallback()}}(is.API),is.API.addJS=function(t){return mv=t,this.internal.events.subscribe("postPutResources",function(){Ch=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Ch+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),fv=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+mv+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){Ch!==void 0&&fv!==void 0&&this.internal.out("/Names <</JavaScript "+Ch+" 0 R>>")}),this},function(t){var s;t.events.push(["postPutResources",function(){var a=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var o=a.outline.render().split(/\r\n/),l=0;l<o.length;l++){var A=o[l],u=r.exec(A);if(u!=null){var h=u[1];a.internal.newObjectDeferredBegin(h,!1)}a.internal.write(A)}if(this.outline.createNamedDestinations){var p=this.internal.pages.length,m=[];for(l=0;l<p;l++){var v=a.internal.newObject();m.push(v);var b=a.internal.getPageInfo(l+1);a.internal.write("<< /D["+b.objId+" 0 R /XYZ null null null]>> endobj")}var x=a.internal.newObject();for(a.internal.write("<< /Names [ "),l=0;l<m.length;l++)a.internal.write("(page_"+(l+1)+")"+m[l]+" 0 R");a.internal.write(" ] >>","endobj"),s=a.internal.newObject(),a.internal.write("<< /Dests "+x+" 0 R"),a.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){var a=this;a.outline.root.children.length>0&&(a.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&a.internal.write("/Names "+s+" 0 R"))}]),t.events.push(["initialized",function(){var a=this;a.outline={createNamedDestinations:!1,root:{children:[]}},a.outline.add=function(r,o,l){var A={title:o,options:l,children:[]};return r==null&&(r=this.root),r.children.push(A),A},a.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=a,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},a.outline.genIds_r=function(r){r.id=a.internal.newObjectDeferred();for(var o=0;o<r.children.length;o++)this.genIds_r(r.children[o])},a.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},a.outline.renderItems=function(r){for(var o=this.ctx.pdf.internal.getVerticalCoordinateString,l=0;l<r.children.length;l++){var A=r.children[l];this.objStart(A),this.line("/Title "+this.makeString(A.title)),this.line("/Parent "+this.makeRef(r)),l>0&&this.line("/Prev "+this.makeRef(r.children[l-1])),l<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[l+1])),A.children.length>0&&(this.line("/First "+this.makeRef(A.children[0])),this.line("/Last "+this.makeRef(A.children[A.children.length-1])));var u=this.count=this.count_r({count:0},A);if(u>0&&this.line("/Count "+u),A.options&&A.options.pageNumber){var h=a.internal.getPageInfo(A.options.pageNumber);this.line("/Dest ["+h.objId+" 0 R /XYZ 0 "+o(0)+" 0]")}this.objEnd()}for(var p=0;p<r.children.length;p++)this.renderItems(r.children[p])},a.outline.line=function(r){this.ctx.val+=r+`\r
`},a.outline.makeRef=function(r){return r.id+" 0 R"},a.outline.makeString=function(r){return"("+a.internal.pdfEscape(r)+")"},a.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},a.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},a.outline.count_r=function(r,o){for(var l=0;l<o.children.length;l++)r.count++,this.count_r(r,o.children[l]);return r.count}}])}(is.API),function(t){var s=[192,193,194,195,196,197,198,199];t.processJPEG=function(a,r,o,l,A,u){var h,p=this.decode.DCT_DECODE,m=null;if(typeof a=="string"||this.__addimage__.isArrayBuffer(a)||this.__addimage__.isArrayBufferView(a)){switch(a=A||a,a=this.__addimage__.isArrayBuffer(a)?new Uint8Array(a):a,h=function(v){for(var b,x=256*v.charCodeAt(4)+v.charCodeAt(5),C=v.length,Q={width:0,height:0,numcomponents:1},j=4;j<C;j+=2){if(j+=x,s.indexOf(v.charCodeAt(j+1))!==-1){b=256*v.charCodeAt(j+5)+v.charCodeAt(j+6),Q={width:256*v.charCodeAt(j+7)+v.charCodeAt(j+8),height:b,numcomponents:v.charCodeAt(j+9)};break}x=256*v.charCodeAt(j+2)+v.charCodeAt(j+3)}return Q}(a=this.__addimage__.isArrayBufferView(a)?this.__addimage__.arrayBufferToBinaryString(a):a),h.numcomponents){case 1:u=this.color_spaces.DEVICE_GRAY;break;case 4:u=this.color_spaces.DEVICE_CMYK;break;case 3:u=this.color_spaces.DEVICE_RGB}m={data:a,width:h.width,height:h.height,colorSpace:u,bitsPerComponent:8,filter:p,index:r,alias:o}}return m}}(is.API),is.API.processPNG=function(t,s,a,r){if(this.__addimage__.isArrayBuffer(t)&&(t=new Uint8Array(t)),this.__addimage__.isArrayBufferView(t)){var o,l=xN(t,{checkCrc:!0}),A=l.width,u=l.height,h=l.channels,p=l.palette,m=l.depth;o=p&&h===1?function(E){for(var U=E.width,V=E.height,H=E.data,I=E.palette,M=E.depth,re=!1,G=[],Z=[],fe=void 0,Ae=!1,Ce=0,te=0;te<I.length;te++){var he=vy(I[te],4),k=he[0],T=he[1],z=he[2],le=he[3];G.push(k,T,z),le!=null&&(le===0?(Ce++,Z.length<1&&Z.push(te)):le<255&&(Ae=!0))}if(Ae||Ce>1){re=!0,Z=void 0;var X=U*V;fe=new Uint8Array(X);for(var W=new DataView(H.buffer),de=0;de<X;de++){var me=wm(W,de,M),Be=vy(I[me],4)[3];fe[de]=Be}}else Ce===0&&(Z=void 0);return{colorSpace:"Indexed",colorsPerPixel:1,sMaskBitsPerComponent:re?8:void 0,colorBytes:H,alphaBytes:fe,needSMask:re,palette:G,mask:Z}}(l):h===2||h===4?function(E){for(var U=E.data,V=E.width,H=E.height,I=E.channels,M=E.depth,re=I===2?"DeviceGray":"DeviceRGB",G=I-1,Z=V*H,fe=G,Ae=Z*fe,Ce=1*Z,te=Math.ceil(Ae*M/8),he=Math.ceil(Ce*M/8),k=new Uint8Array(te),T=new Uint8Array(he),z=new DataView(U.buffer),le=new DataView(k.buffer),X=new DataView(T.buffer),W=!1,de=0;de<Z;de++){for(var me=de*I,Be=0;Be<fe;Be++)Bv(le,wm(z,me+Be,M),de*fe+Be,M);var Qe=wm(z,me+fe,M);Qe<(1<<M)-1&&(W=!0),Bv(X,Qe,1*de,M)}return{colorSpace:re,colorsPerPixel:G,sMaskBitsPerComponent:W?M:void 0,colorBytes:k,alphaBytes:T,needSMask:W}}(l):function(E){var U=E.data,V=E.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:V,colorsPerPixel:V==="DeviceGray"?1:3,colorBytes:U instanceof Uint16Array?function(H){for(var I=H.length,M=new Uint8Array(2*I),re=new DataView(M.buffer,M.byteOffset,M.byteLength),G=0;G<I;G++)re.setUint16(2*G,H[G],!1);return M}(U):U,needSMask:!1}}(l);var v,b,x,C=o,Q=C.colorSpace,j=C.colorsPerPixel,B=C.sMaskBitsPerComponent,L=C.colorBytes,P=C.alphaBytes,F=C.needSMask,ee=C.palette,K=C.mask,q=null;return r!==is.API.image_compression.NONE&&typeof eg=="function"?(q=function(E){var U;switch(E){case is.API.image_compression.FAST:U=11;break;case is.API.image_compression.MEDIUM:U=13;break;case is.API.image_compression.SLOW:U=14;break;default:U=12}return U}(r),v=this.decode.FLATE_DECODE,b="/Predictor ".concat(q," /Colors ").concat(j," /BitsPerComponent ").concat(m," /Columns ").concat(A),t=vv(L,Math.ceil(A*j*m/8),j,m,r),F&&(x=vv(P,Math.ceil(A*B/8),1,B,r))):(v=void 0,b=void 0,t=L,F&&(x=P)),(this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t))&&(t=this.__addimage__.arrayBufferToBinaryString(t)),(x&&this.__addimage__.isArrayBuffer(x)||this.__addimage__.isArrayBufferView(x))&&(x=this.__addimage__.arrayBufferToBinaryString(x)),{alias:a,data:t,index:s,filter:v,decodeParameters:b,transparency:K,palette:ee,sMask:x,predictor:q,width:A,height:u,bitsPerComponent:m,sMaskBitsPerComponent:B,colorSpace:Q}}},function(t){t.processGIF89A=function(s,a,r,o){var l=new HN(s),A=l.width,u=l.height,h=[];l.decodeAndBlitFrameRGBA(0,h);var p={data:h,width:A,height:u},m=new jm(100).encode(p,100);return t.processJPEG.call(this,m,a,r,o)},t.processGIF87A=t.processGIF89A}(is.API),mo.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var s=0;s<t;s++){var a=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),l=this.datav.getUint8(this.pos++,!0);this.palette[s]={red:o,green:r,blue:a,quad:l}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},mo.prototype.parseBGR=function(){this.pos=this.offset;try{var t="bit"+this.bitPP,s=this.width*this.height*4;this.data=new Uint8Array(s),this[t]()}catch(a){Oa.log("bit decode error:"+a)}},mo.prototype.bit1=function(){var t,s=Math.ceil(this.width/8),a=s%4;for(t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,o=0;o<s;o++)for(var l=this.datav.getUint8(this.pos++,!0),A=r*this.width*4+8*o*4,u=0;u<8&&8*o+u<this.width;u++){var h=this.palette[l>>7-u&1];this.data[A+4*u]=h.blue,this.data[A+4*u+1]=h.green,this.data[A+4*u+2]=h.red,this.data[A+4*u+3]=255}a!==0&&(this.pos+=4-a)}},mo.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),s=t%4,a=this.height-1;a>=0;a--){for(var r=this.bottom_up?a:this.height-1-a,o=0;o<t;o++){var l=this.datav.getUint8(this.pos++,!0),A=r*this.width*4+2*o*4,u=l>>4,h=15&l,p=this.palette[u];if(this.data[A]=p.blue,this.data[A+1]=p.green,this.data[A+2]=p.red,this.data[A+3]=255,2*o+1>=this.width)break;p=this.palette[h],this.data[A+4]=p.blue,this.data[A+4+1]=p.green,this.data[A+4+2]=p.red,this.data[A+4+3]=255}s!==0&&(this.pos+=4-s)}},mo.prototype.bit8=function(){for(var t=this.width%4,s=this.height-1;s>=0;s--){for(var a=this.bottom_up?s:this.height-1-s,r=0;r<this.width;r++){var o=this.datav.getUint8(this.pos++,!0),l=a*this.width*4+4*r;if(o<this.palette.length){var A=this.palette[o];this.data[l]=A.red,this.data[l+1]=A.green,this.data[l+2]=A.blue,this.data[l+3]=255}else this.data[l]=255,this.data[l+1]=255,this.data[l+2]=255,this.data[l+3]=255}t!==0&&(this.pos+=4-t)}},mo.prototype.bit15=function(){for(var t=this.width%3,s=parseInt("11111",2),a=this.height-1;a>=0;a--){for(var r=this.bottom_up?a:this.height-1-a,o=0;o<this.width;o++){var l=this.datav.getUint16(this.pos,!0);this.pos+=2;var A=(l&s)/s*255|0,u=(l>>5&s)/s*255|0,h=(l>>10&s)/s*255|0,p=l>>15?255:0,m=r*this.width*4+4*o;this.data[m]=h,this.data[m+1]=u,this.data[m+2]=A,this.data[m+3]=p}this.pos+=t}},mo.prototype.bit16=function(){for(var t=this.width%3,s=parseInt("11111",2),a=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var o=this.bottom_up?r:this.height-1-r,l=0;l<this.width;l++){var A=this.datav.getUint16(this.pos,!0);this.pos+=2;var u=(A&s)/s*255|0,h=(A>>5&a)/a*255|0,p=(A>>11)/s*255|0,m=o*this.width*4+4*l;this.data[m]=p,this.data[m+1]=h,this.data[m+2]=u,this.data[m+3]=255}this.pos+=t}},mo.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var s=this.bottom_up?t:this.height-1-t,a=0;a<this.width;a++){var r=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),l=this.datav.getUint8(this.pos++,!0),A=s*this.width*4+4*a;this.data[A]=l,this.data[A+1]=o,this.data[A+2]=r,this.data[A+3]=255}this.pos+=this.width%4}},mo.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var s=this.bottom_up?t:this.height-1-t,a=0;a<this.width;a++){var r=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),l=this.datav.getUint8(this.pos++,!0),A=this.datav.getUint8(this.pos++,!0),u=s*this.width*4+4*a;this.data[u]=l,this.data[u+1]=o,this.data[u+2]=r,this.data[u+3]=A}},mo.prototype.getData=function(){return this.data},function(t){t.processBMP=function(s,a,r,o){var l=new mo(s,!1),A=l.width,u=l.height,h={data:l.getData(),width:A,height:u},p=new jm(100).encode(h,100);return t.processJPEG.call(this,p,a,r,o)}}(is.API),Cv.prototype.getData=function(){return this.data},function(t){t.processWEBP=function(s,a,r,o){var l=new Cv(s),A=l.width,u=l.height,h={data:l.getData(),width:A,height:u},p=new jm(100).encode(h,100);return t.processJPEG.call(this,p,a,r,o)}}(is.API),is.API.processRGBA=function(t,s,a){for(var r=t.data,o=r.length,l=new Uint8Array(o/4*3),A=new Uint8Array(o/4),u=0,h=0,p=0;p<o;p+=4){var m=r[p],v=r[p+1],b=r[p+2],x=r[p+3];l[u++]=m,l[u++]=v,l[u++]=b,A[h++]=x}var C=this.__addimage__.arrayBufferToBinaryString(l);return{alpha:this.__addimage__.arrayBufferToBinaryString(A),data:C,index:s,alias:a,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},is.API.setLanguage=function(t){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]!==void 0&&(this.internal.languageSettings.languageCode=t,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},NA=is.API,Sh=NA.getCharWidthsArray=function(t,s){var a,r,o=(s=s||{}).font||this.internal.getFont(),l=s.fontSize||this.internal.getFontSize(),A=s.charSpace||this.internal.getCharSpace(),u=s.widths?s.widths:o.metadata.Unicode.widths,h=u.fof?u.fof:1,p=s.kerning?s.kerning:o.metadata.Unicode.kerning,m=p.fof?p.fof:1,v=s.doKerning!==!1,b=0,x=t.length,C=0,Q=u[0]||h,j=[];for(a=0;a<x;a++)r=t.charCodeAt(a),typeof o.metadata.widthOfString=="function"?j.push((o.metadata.widthOfGlyph(o.metadata.characterToGlyph(r))+A*(1e3/l)||0)/1e3):(b=v&&Ca(p[r])==="object"&&!isNaN(parseInt(p[r][C],10))?p[r][C]/m:0,j.push((u[r]||Q)/h+b)),C=r;return j},gv=NA.getStringUnitWidth=function(t,s){var a=(s=s||{}).fontSize||this.internal.getFontSize(),r=s.font||this.internal.getFont(),o=s.charSpace||this.internal.getCharSpace();return NA.processArabic&&(t=NA.processArabic(t)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(t,a,o)/a:Sh.apply(this,arguments).reduce(function(l,A){return l+A},0)},xv=function(t,s,a,r){for(var o=[],l=0,A=t.length,u=0;l!==A&&u+s[l]<a;)u+=s[l],l++;o.push(t.slice(0,l));var h=l;for(u=0;l!==A;)u+s[l]>r&&(o.push(t.slice(h,l)),u=0,h=l),u+=s[l],l++;return h!==l&&o.push(t.slice(h,l)),o},yv=function(t,s,a){a||(a={});var r,o,l,A,u,h,p,m=[],v=[m],b=a.textIndent||0,x=0,C=0,Q=t.split(" "),j=Sh.apply(this,[" ",a])[0];if(h=a.lineIndent===-1?Q[0].length+2:a.lineIndent||0){var B=Array(h).join(" "),L=[];Q.map(function(F){(F=F.split(/\s*\n/)).length>1?L=L.concat(F.map(function(ee,K){return(K&&ee.length?`
`:"")+ee})):L.push(F[0])}),Q=L,h=gv.apply(this,[B,a])}for(l=0,A=Q.length;l<A;l++){var P=0;if(r=Q[l],h&&r[0]==`
`&&(r=r.substr(1),P=1),b+x+(C=(o=Sh.apply(this,[r,a])).reduce(function(F,ee){return F+ee},0))>s||P){if(C>s){for(u=xv.apply(this,[r,o,s-(b+x),s]),m.push(u.shift()),m=[u.pop()];u.length;)v.push([u.shift()]);C=o.slice(r.length-(m[0]?m[0].length:0)).reduce(function(F,ee){return F+ee},0)}else m=[r];v.push(m),b=C+h,x=j}else m.push(r),b+=x+C,x=j}return p=h?function(F,ee){return(ee?B:"")+F.join(" ")}:function(F){return F.join(" ")},v.map(p)},NA.splitTextToSize=function(t,s,a){var r,o=(a=a||{}).fontSize||this.internal.getFontSize(),l=(function(m){if(m.widths&&m.kerning)return{widths:m.widths,kerning:m.kerning};var v=this.internal.getFont(m.fontName,m.fontStyle),b="Unicode";return v.metadata[b]?{widths:v.metadata[b].widths||{0:1},kerning:v.metadata[b].kerning||{}}:{font:v.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,a);r=Array.isArray(t)?t:String(t).split(/\r?\n/);var A=1*this.internal.scaleFactor*s/o;l.textIndent=a.textIndent?1*a.textIndent*this.internal.scaleFactor/o:0,l.lineIndent=a.lineIndent;var u,h,p=[];for(u=0,h=r.length;u<h;u++)p=p.concat(yv.apply(this,[r[u],A,l]));return p},function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var s="0123456789abcdef",a="klmnopqrstuvwxyz",r={},o={},l=0;l<16;l++)r[a[l]]=s[l],o[s[l]]=a[l];var A=function(b){return"0x"+parseInt(b,10).toString(16)},u=t.__fontmetrics__.compress=function(b){var x,C,Q,j,B=["{"];for(var L in b){if(x=b[L],isNaN(parseInt(L,10))?C="'"+L+"'":(L=parseInt(L,10),C=(C=A(L).slice(2)).slice(0,-1)+o[C.slice(-1)]),typeof x=="number")x<0?(Q=A(x).slice(3),j="-"):(Q=A(x).slice(2),j=""),Q=j+Q.slice(0,-1)+o[Q.slice(-1)];else{if(Ca(x)!=="object")throw new Error("Don't know what to do with value type "+Ca(x)+".");Q=u(x)}B.push(C+Q)}return B.push("}"),B.join("")},h=t.__fontmetrics__.uncompress=function(b){if(typeof b!="string")throw new Error("Invalid argument passed to uncompress.");for(var x,C,Q,j,B={},L=1,P=B,F=[],ee="",K="",q=b.length-1,E=1;E<q;E+=1)(j=b[E])=="'"?x?(Q=x.join(""),x=void 0):x=[]:x?x.push(j):j=="{"?(F.push([P,Q]),P={},Q=void 0):j=="}"?((C=F.pop())[0][C[1]]=P,Q=void 0,P=C[0]):j=="-"?L=-1:Q===void 0?r.hasOwnProperty(j)?(ee+=r[j],Q=parseInt(ee,16)*L,L=1,ee=""):ee+=j:r.hasOwnProperty(j)?(K+=r[j],P[Q]=parseInt(K,16)*L,L=1,Q=void 0,K=""):K+=j;return B},p={codePages:["WinAnsiEncoding"],WinAnsiEncoding:h("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},m={Unicode:{Courier:p,"Courier-Bold":p,"Courier-BoldOblique":p,"Courier-Oblique":p,Helvetica:p,"Helvetica-Bold":p,"Helvetica-BoldOblique":p,"Helvetica-Oblique":p,"Times-Roman":p,"Times-Bold":p,"Times-BoldItalic":p,"Times-Italic":p}},v={Unicode:{"Courier-Oblique":h("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":h("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":h("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:h("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":h("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":h("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:h("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:h("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":h("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:h("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":h("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":h("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":h("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":h("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(b){var x=b.font,C=v.Unicode[x.postScriptName];C&&(x.metadata.Unicode={},x.metadata.Unicode.widths=C.widths,x.metadata.Unicode.kerning=C.kerning);var Q=m.Unicode[x.postScriptName];Q&&(x.metadata.Unicode.encoding=Q,x.encoding=Q.codePages[0])}])}(is.API),function(t){var s=function(a){for(var r=a.length,o=new Uint8Array(r),l=0;l<r;l++)o[l]=a.charCodeAt(l);return o};t.API.events.push(["addFont",function(a){var r=void 0,o=a.font,l=a.instance;if(!o.isStandardFont){if(l===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+o.postScriptName+"').");if(typeof(r=l.existsFileInVFS(o.postScriptName)===!1?l.loadFile(o.postScriptName):l.getFileFromVFS(o.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+o.postScriptName+"').");(function(A,u){u=/^\x00\x01\x00\x00/.test(u)?s(u):s(tp(u)),A.metadata=t.API.TTFFont.open(u),A.metadata.Unicode=A.metadata.Unicode||{encoding:{},kerning:{},widths:[]},A.metadata.glyIdsUsed=[0]})(o,r)}}])}(is),is.API.addSvgAsImage=function(t,s,a,r,o,l,A,u){if(isNaN(s)||isNaN(a))throw Oa.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(r)||isNaN(o))throw Oa.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var h=document.createElement("canvas");h.width=r,h.height=o;var p=h.getContext("2d");p.fillStyle="#fff",p.fillRect(0,0,h.width,h.height);var m={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},v=this;return(Es.canvg?Promise.resolve(Es.canvg):li(()=>import("./index.es-bxR747Qx.js"),[])).catch(function(b){return Promise.reject(new Error("Could not load canvg: "+b))}).then(function(b){return b.default?b.default:b}).then(function(b){return b.fromString(p,t,m)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(b){return b.render(m)}).then(function(){v.addImage(h.toDataURL("image/jpeg",1),s,a,r,o,A,u)})},is.API.putTotalPages=function(t){var s,a=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(s=new RegExp(t,"g"),a=this.internal.getNumberOfPages()):(s=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),a=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var o=0;o<this.internal.pages[r].length;o++)this.internal.pages[r][o]=this.internal.pages[r][o].replace(s,a);return this},is.API.viewerPreferences=function(t,s){var a;t=t||{},s=s||!1;var r,o,l,A={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},u=Object.keys(A),h=[],p=0,m=0,v=0;function b(C,Q){var j,B=!1;for(j=0;j<C.length;j+=1)C[j]===Q&&(B=!0);return B}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(A)),this.internal.viewerpreferences.isSubscribed=!1),a=this.internal.viewerpreferences.configuration,t==="reset"||s===!0){var x=u.length;for(v=0;v<x;v+=1)a[u[v]].value=a[u[v]].defaultValue,a[u[v]].explicitSet=!1}if(Ca(t)==="object"){for(o in t)if(l=t[o],b(u,o)&&l!==void 0){if(a[o].type==="boolean"&&typeof l=="boolean")a[o].value=l;else if(a[o].type==="name"&&b(a[o].valueSet,l))a[o].value=l;else if(a[o].type==="integer"&&Number.isInteger(l))a[o].value=l;else if(a[o].type==="array"){for(p=0;p<l.length;p+=1)if(r=!0,l[p].length===1&&typeof l[p][0]=="number")h.push(String(l[p]-1));else if(l[p].length>1){for(m=0;m<l[p].length;m+=1)typeof l[p][m]!="number"&&(r=!1);r===!0&&h.push([l[p][0]-1,l[p][1]-1].join(" "))}a[o].value="["+h.join(" ")+"]"}else a[o].value=a[o].defaultValue;a[o].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var C,Q=[];for(C in a)a[C].explicitSet===!0&&(a[C].type==="name"?Q.push("/"+C+" /"+a[C].value):Q.push("/"+C+" "+a[C].value));Q.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+Q.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=a,this},function(t){var s=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',o=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),l=unescape(encodeURIComponent(r)),A=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),u=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),h=unescape(encodeURIComponent("</x:xmpmeta>")),p=l.length+A.length+u.length+o.length+h.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+p+" >>"),this.internal.write("stream"),this.internal.write(o+l+A+u+h),this.internal.write("endstream"),this.internal.write("endobj")},a=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};t.addMetadata=function(r,o){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceuri:o||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",a),this.internal.events.subscribe("postPutResources",s)),this}}(is.API),function(t){var s=t.API,a=s.pdfEscape16=function(l,A){for(var u,h=A.metadata.Unicode.widths,p=["","0","00","000","0000"],m=[""],v=0,b=l.length;v<b;++v){if(u=A.metadata.characterToGlyph(l.charCodeAt(v)),A.metadata.glyIdsUsed.push(u),A.metadata.toUnicode[u]=l.charCodeAt(v),h.indexOf(u)==-1&&(h.push(u),h.push([parseInt(A.metadata.widthOfGlyph(u),10)])),u=="0")return m.join("");u=u.toString(16),m.push(p[4-u.length],u)}return m.join("")},r=function(l){var A,u,h,p,m,v,b;for(m=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,h=[],v=0,b=(u=Object.keys(l).sort(function(x,C){return x-C})).length;v<b;v++)A=u[v],h.length>=100&&(m+=`
`+h.length+` beginbfchar
`+h.join(`
`)+`
endbfchar`,h=[]),l[A]!==void 0&&l[A]!==null&&typeof l[A].toString=="function"&&(p=("0000"+l[A].toString(16)).slice(-4),A=("0000"+(+A).toString(16)).slice(-4),h.push("<"+A+"><"+p+">"));return h.length&&(m+=`
`+h.length+` beginbfchar
`+h.join(`
`)+`
endbfchar
`),m+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};s.events.push(["putFont",function(l){(function(A){var u=A.font,h=A.out,p=A.newObject,m=A.putStream;if(u.metadata instanceof t.API.TTFFont&&u.encoding==="Identity-H"){for(var v=u.metadata.Unicode.widths,b=u.metadata.subset.encode(u.metadata.glyIdsUsed,1),x="",C=0;C<b.length;C++)x+=String.fromCharCode(b[C]);var Q=p();m({data:x,addLength1:!0,objectId:Q}),h("endobj");var j=p();m({data:r(u.metadata.toUnicode),addLength1:!0,objectId:j}),h("endobj");var B=p();h("<<"),h("/Type /FontDescriptor"),h("/FontName /"+QA(u.fontName)),h("/FontFile2 "+Q+" 0 R"),h("/FontBBox "+t.API.PDFObject.convert(u.metadata.bbox)),h("/Flags "+u.metadata.flags),h("/StemV "+u.metadata.stemV),h("/ItalicAngle "+u.metadata.italicAngle),h("/Ascent "+u.metadata.ascender),h("/Descent "+u.metadata.decender),h("/CapHeight "+u.metadata.capHeight),h(">>"),h("endobj");var L=p();h("<<"),h("/Type /Font"),h("/BaseFont /"+QA(u.fontName)),h("/FontDescriptor "+B+" 0 R"),h("/W "+t.API.PDFObject.convert(v)),h("/CIDToGIDMap /Identity"),h("/DW 1000"),h("/Subtype /CIDFontType2"),h("/CIDSystemInfo"),h("<<"),h("/Supplement 0"),h("/Registry (Adobe)"),h("/Ordering ("+u.encoding+")"),h(">>"),h(">>"),h("endobj"),u.objectNumber=p(),h("<<"),h("/Type /Font"),h("/Subtype /Type0"),h("/ToUnicode "+j+" 0 R"),h("/BaseFont /"+QA(u.fontName)),h("/Encoding /"+u.encoding),h("/DescendantFonts ["+L+" 0 R]"),h(">>"),h("endobj"),u.isAlreadyPutted=!0}})(l)}]),s.events.push(["putFont",function(l){(function(A){var u=A.font,h=A.out,p=A.newObject,m=A.putStream;if(u.metadata instanceof t.API.TTFFont&&u.encoding==="WinAnsiEncoding"){for(var v=u.metadata.rawData,b="",x=0;x<v.length;x++)b+=String.fromCharCode(v[x]);var C=p();m({data:b,addLength1:!0,objectId:C}),h("endobj");var Q=p();m({data:r(u.metadata.toUnicode),addLength1:!0,objectId:Q}),h("endobj");var j=p();h("<<"),h("/Descent "+u.metadata.decender),h("/CapHeight "+u.metadata.capHeight),h("/StemV "+u.metadata.stemV),h("/Type /FontDescriptor"),h("/FontFile2 "+C+" 0 R"),h("/Flags 96"),h("/FontBBox "+t.API.PDFObject.convert(u.metadata.bbox)),h("/FontName /"+QA(u.fontName)),h("/ItalicAngle "+u.metadata.italicAngle),h("/Ascent "+u.metadata.ascender),h(">>"),h("endobj"),u.objectNumber=p();for(var B=0;B<u.metadata.hmtx.widths.length;B++)u.metadata.hmtx.widths[B]=parseInt(u.metadata.hmtx.widths[B]*(1e3/u.metadata.head.unitsPerEm));h("<</Subtype/TrueType/Type/Font/ToUnicode "+Q+" 0 R/BaseFont/"+QA(u.fontName)+"/FontDescriptor "+j+" 0 R/Encoding/"+u.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(u.metadata.hmtx.widths)+">>"),h("endobj"),u.isAlreadyPutted=!0}})(l)}]);var o=function(l){var A,u=l.text||"",h=l.x,p=l.y,m=l.options||{},v=l.mutex||{},b=v.pdfEscape,x=v.activeFontKey,C=v.fonts,Q=x,j="",B=0,L="",P=C[Q].encoding;if(C[Q].encoding!=="Identity-H")return{text:u,x:h,y:p,options:m,mutex:v};for(L=u,Q=x,Array.isArray(u)&&(L=u[0]),B=0;B<L.length;B+=1)C[Q].metadata.hasOwnProperty("cmap")&&(A=C[Q].metadata.cmap.unicode.codeMap[L[B].charCodeAt(0)]),A||L[B].charCodeAt(0)<256&&C[Q].metadata.hasOwnProperty("Unicode")?j+=L[B]:j+="";var F="";return parseInt(Q.slice(1))<14||P==="WinAnsiEncoding"?F=b(j,Q).split("").map(function(ee){return ee.charCodeAt(0).toString(16)}).join(""):P==="Identity-H"&&(F=a(j,C[Q])),v.isHex=!0,{text:F,x:h,y:p,options:m,mutex:v}};s.events.push(["postProcessText",function(l){var A=l.text||"",u=[],h={text:A,x:l.x,y:l.y,options:l.options,mutex:l.mutex};if(Array.isArray(A)){var p=0;for(p=0;p<A.length;p+=1)Array.isArray(A[p])&&A[p].length===3?u.push([o(Object.assign({},h,{text:A[p][0]})).text,A[p][1],A[p][2]]):u.push(o(Object.assign({},h,{text:A[p]})).text);l.text=u}else l.text=o(Object.assign({},h,{text:A})).text}])}(is),function(t){var s=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(a){return s.call(this),this.internal.vFS[a]!==void 0},t.addFileToVFS=function(a,r){return s.call(this),this.internal.vFS[a]=r,this},t.getFileFromVFS=function(a){return s.call(this),this.internal.vFS[a]!==void 0?this.internal.vFS[a]:null}}(is.API),function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(r){var o,l,A,u,h,p,m,v=s,b=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],x=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],C={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},Q={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},j=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],B=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),L=!1,P=0;this.__bidiEngine__={};var F=function(H){var I=H.charCodeAt(),M=I>>8,re=Q[M];return re!==void 0?v[256*re+(255&I)]:M===252||M===253?"AL":B.test(M)?"L":M===8?"R":"N"},ee=function(H){for(var I,M=0;M<H.length;M++){if((I=F(H.charAt(M)))==="L")return!1;if(I==="R")return!0}return!1},K=function(H,I,M,re){var G,Z,fe,Ae,Ce=I[re];switch(Ce){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":L=!1;break;case"N":case"AN":break;case"EN":L&&(Ce="AN");break;case"AL":L=!0,Ce="R";break;case"WS":case"BN":Ce="N";break;case"CS":re<1||re+1>=I.length||(G=M[re-1])!=="EN"&&G!=="AN"||(Z=I[re+1])!=="EN"&&Z!=="AN"?Ce="N":L&&(Z="AN"),Ce=Z===G?Z:"N";break;case"ES":Ce=(G=re>0?M[re-1]:"B")==="EN"&&re+1<I.length&&I[re+1]==="EN"?"EN":"N";break;case"ET":if(re>0&&M[re-1]==="EN"){Ce="EN";break}if(L){Ce="N";break}for(fe=re+1,Ae=I.length;fe<Ae&&I[fe]==="ET";)fe++;Ce=fe<Ae&&I[fe]==="EN"?"EN":"N";break;case"NSM":if(A&&!u){for(Ae=I.length,fe=re+1;fe<Ae&&I[fe]==="NSM";)fe++;if(fe<Ae){var te=H[re],he=te>=1425&&te<=2303||te===64286;if(G=I[fe],he&&(G==="R"||G==="AL")){Ce="R";break}}}Ce=re<1||(G=I[re-1])==="B"?"N":M[re-1];break;case"B":L=!1,o=!0,Ce=P;break;case"S":l=!0,Ce="N"}return Ce},q=function(H,I,M){var re=H.split("");return M&&E(re,M,{hiLevel:P}),re.reverse(),I&&I.reverse(),re.join("")},E=function(H,I,M){var re,G,Z,fe,Ae,Ce=-1,te=H.length,he=0,k=[],T=P?x:b,z=[];for(L=!1,o=!1,l=!1,G=0;G<te;G++)z[G]=F(H[G]);for(Z=0;Z<te;Z++){if(Ae=he,k[Z]=K(H,z,k,Z),re=240&(he=T[Ae][C[k[Z]]]),he&=15,I[Z]=fe=T[he][5],re>0)if(re===16){for(G=Ce;G<Z;G++)I[G]=1;Ce=-1}else Ce=-1;if(T[he][6])Ce===-1&&(Ce=Z);else if(Ce>-1){for(G=Ce;G<Z;G++)I[G]=fe;Ce=-1}z[Z]==="B"&&(I[Z]=0),M.hiLevel|=fe}l&&function(le,X,W){for(var de=0;de<W;de++)if(le[de]==="S"){X[de]=P;for(var me=de-1;me>=0&&le[me]==="WS";me--)X[me]=P}}(z,I,te)},U=function(H,I,M,re,G){if(!(G.hiLevel<H)){if(H===1&&P===1&&!o)return I.reverse(),void(M&&M.reverse());for(var Z,fe,Ae,Ce,te=I.length,he=0;he<te;){if(re[he]>=H){for(Ae=he+1;Ae<te&&re[Ae]>=H;)Ae++;for(Ce=he,fe=Ae-1;Ce<fe;Ce++,fe--)Z=I[Ce],I[Ce]=I[fe],I[fe]=Z,M&&(Z=M[Ce],M[Ce]=M[fe],M[fe]=Z);he=Ae}he++}}},V=function(H,I,M){var re=H.split(""),G={hiLevel:P};return M||(M=[]),E(re,M,G),function(Z,fe,Ae){if(Ae.hiLevel!==0&&m)for(var Ce,te=0;te<Z.length;te++)fe[te]===1&&(Ce=j.indexOf(Z[te]))>=0&&(Z[te]=j[Ce+1])}(re,M,G),U(2,re,I,M,G),U(1,re,I,M,G),re.join("")};return this.__bidiEngine__.doBidiReorder=function(H,I,M){if(function(G,Z){if(Z)for(var fe=0;fe<G.length;fe++)Z[fe]=fe;u===void 0&&(u=ee(G)),p===void 0&&(p=ee(G))}(H,I),A||!h||p)if(A&&h&&u^p)P=u?1:0,H=q(H,I,M);else if(!A&&h&&p)P=u?1:0,H=V(H,I,M),H=q(H,I);else if(!A||u||h||p){if(A&&!h&&u^p)H=q(H,I),u?(P=0,H=V(H,I,M)):(P=1,H=V(H,I,M),H=q(H,I));else if(A&&u&&!h&&p)P=1,H=V(H,I,M),H=q(H,I);else if(!A&&!h&&u^p){var re=m;u?(P=1,H=V(H,I,M),P=0,m=!1,H=V(H,I,M),m=re):(P=0,H=V(H,I,M),H=q(H,I),P=1,m=!1,H=V(H,I,M),m=re,H=q(H,I))}}else P=0,H=V(H,I,M);else P=u?1:0,H=V(H,I,M);return H},this.__bidiEngine__.setOptions=function(H){H&&(A=H.isInputVisual,h=H.isOutputVisual,u=H.isInputRtl,p=H.isOutputRtl,m=H.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var s=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],a=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(r){var o=r.text;r.x,r.y;var l=r.options||{};r.mutex,l.lang;var A=[];if(l.isInputVisual=typeof l.isInputVisual!="boolean"||l.isInputVisual,a.setOptions(l),Object.prototype.toString.call(o)==="[object Array]"){var u=0;for(A=[],u=0;u<o.length;u+=1)Object.prototype.toString.call(o[u])==="[object Array]"?A.push([a.doBidiReorder(o[u][0]),o[u][1],o[u][2]]):A.push([a.doBidiReorder(o[u])]);r.text=A}else r.text=a.doBidiReorder(o);a.setOptions({isInputVisual:!0})}])}(is),is.API.TTFFont=function(){function t(s){var a;if(this.rawData=s,a=this.contents=new Ac(s),this.contents.pos=4,a.readString(4)==="ttcf")throw new Error("TTCF not supported.");a.pos=0,this.parse(),this.subset=new eC(this),this.registerTTF()}return t.open=function(s){return new t(s)},t.prototype.parse=function(){return this.directory=new PN(this.contents),this.head=new MN(this),this.name=new VN(this),this.cmap=new V1(this),this.toUnicode={},this.hhea=new zN(this),this.maxp=new $N(this),this.hmtx=new WN(this),this.post=new KN(this),this.os2=new qN(this),this.loca=new ZN(this),this.glyf=new YN(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var s,a,r,o,l;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var A,u,h,p;for(p=[],A=0,u=(h=this.bbox).length;A<u;A++)s=h[A],p.push(Math.round(s*this.scaleFactor));return p}).call(this),this.stemV=0,this.post.exists?(r=255&(o=this.post.italic_angle),32768&(a=o>>16)&&(a=-(1+(65535^a))),this.italicAngle=+(a+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(l=this.familyClass)===1||l===2||l===3||l===4||l===5||l===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(s){var a;return((a=this.cmap.unicode)!=null?a.codeMap[s]:void 0)||0},t.prototype.widthOfGlyph=function(s){var a;return a=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(s).advance*a},t.prototype.widthOfString=function(s,a,r){var o,l,A,u;for(A=0,l=0,u=(s=""+s).length;0<=u?l<u:l>u;l=0<=u?++l:--l)o=s.charCodeAt(l),A+=this.widthOfGlyph(this.characterToGlyph(o))+r*(1e3/a)||0;return A*(a/1e3)},t.prototype.lineHeight=function(s,a){var r;return a==null&&(a=!1),r=a?this.lineGap:0,(this.ascender+r-this.decender)/1e3*s},t}();var wo,Ac=function(){function t(s){this.data=s??[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(s){return this.data[this.pos++]=s},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(s){return this.writeByte(s>>>24&255),this.writeByte(s>>16&255),this.writeByte(s>>8&255),this.writeByte(255&s)},t.prototype.readInt32=function(){var s;return(s=this.readUInt32())>=2147483648?s-4294967296:s},t.prototype.writeInt32=function(s){return s<0&&(s+=4294967296),this.writeUInt32(s)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(s){return this.writeByte(s>>8&255),this.writeByte(255&s)},t.prototype.readInt16=function(){var s;return(s=this.readUInt16())>=32768?s-65536:s},t.prototype.writeInt16=function(s){return s<0&&(s+=65536),this.writeUInt16(s)},t.prototype.readString=function(s){var a,r;for(r=[],a=0;0<=s?a<s:a>s;a=0<=s?++a:--a)r[a]=String.fromCharCode(this.readByte());return r.join("")},t.prototype.writeString=function(s){var a,r,o;for(o=[],a=0,r=s.length;0<=r?a<r:a>r;a=0<=r?++a:--a)o.push(this.writeByte(s.charCodeAt(a)));return o},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(s){return this.writeInt16(s)},t.prototype.readLongLong=function(){var s,a,r,o,l,A,u,h;return s=this.readByte(),a=this.readByte(),r=this.readByte(),o=this.readByte(),l=this.readByte(),A=this.readByte(),u=this.readByte(),h=this.readByte(),128&s?-1*(72057594037927940*(255^s)+281474976710656*(255^a)+1099511627776*(255^r)+4294967296*(255^o)+16777216*(255^l)+65536*(255^A)+256*(255^u)+(255^h)+1):72057594037927940*s+281474976710656*a+1099511627776*r+4294967296*o+16777216*l+65536*A+256*u+h},t.prototype.writeLongLong=function(s){var a,r;return a=Math.floor(s/4294967296),r=4294967295&s,this.writeByte(a>>24&255),this.writeByte(a>>16&255),this.writeByte(a>>8&255),this.writeByte(255&a),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(s){return this.writeInt32(s)},t.prototype.read=function(s){var a,r;for(a=[],r=0;0<=s?r<s:r>s;r=0<=s?++r:--r)a.push(this.readByte());return a},t.prototype.write=function(s){var a,r,o,l;for(l=[],r=0,o=s.length;r<o;r++)a=s[r],l.push(this.writeByte(a));return l},t}(),PN=function(){var t;function s(a){var r,o,l;for(this.scalarType=a.readInt(),this.tableCount=a.readShort(),this.searchRange=a.readShort(),this.entrySelector=a.readShort(),this.rangeShift=a.readShort(),this.tables={},o=0,l=this.tableCount;0<=l?o<l:o>l;o=0<=l?++o:--o)r={tag:a.readString(4),checksum:a.readInt(),offset:a.readInt(),length:a.readInt()},this.tables[r.tag]=r}return s.prototype.encode=function(a){var r,o,l,A,u,h,p,m,v,b,x,C,Q;for(Q in x=Object.keys(a).length,h=Math.log(2),v=16*Math.floor(Math.log(x)/h),A=Math.floor(v/h),m=16*x-v,(o=new Ac).writeInt(this.scalarType),o.writeShort(x),o.writeShort(v),o.writeShort(A),o.writeShort(m),l=16*x,p=o.pos+l,u=null,C=[],a)for(b=a[Q],o.writeString(Q),o.writeInt(t(b)),o.writeInt(p),o.writeInt(b.length),C=C.concat(b),Q==="head"&&(u=p),p+=b.length;p%4;)C.push(0),p++;return o.write(C),r=2981146554-t(o.data),o.pos=u+8,o.writeUInt32(r),o.data},t=function(a){var r,o,l,A;for(a=$1.call(a);a.length%4;)a.push(0);for(l=new Ac(a),o=0,r=0,A=a.length;r<A;r=r+=4)o+=l.readUInt32();return 4294967295&o},s}(),ON={}.hasOwnProperty,qo=function(t,s){for(var a in s)ON.call(s,a)&&(t[a]=s[a]);function r(){this.constructor=t}return r.prototype=s.prototype,t.prototype=new r,t.__super__=s.prototype,t};wo=function(){function t(s){var a;this.file=s,a=this.file.directory.tables[this.tag],this.exists=!!a,a&&(this.offset=a.offset,this.length=a.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t}();var MN=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return qo(t,wo),t.prototype.tag="head",t.prototype.parse=function(s){return s.pos=this.offset,this.version=s.readInt(),this.revision=s.readInt(),this.checkSumAdjustment=s.readInt(),this.magicNumber=s.readInt(),this.flags=s.readShort(),this.unitsPerEm=s.readShort(),this.created=s.readLongLong(),this.modified=s.readLongLong(),this.xMin=s.readShort(),this.yMin=s.readShort(),this.xMax=s.readShort(),this.yMax=s.readShort(),this.macStyle=s.readShort(),this.lowestRecPPEM=s.readShort(),this.fontDirectionHint=s.readShort(),this.indexToLocFormat=s.readShort(),this.glyphDataFormat=s.readShort()},t.prototype.encode=function(s){var a;return(a=new Ac).writeInt(this.version),a.writeInt(this.revision),a.writeInt(this.checkSumAdjustment),a.writeInt(this.magicNumber),a.writeShort(this.flags),a.writeShort(this.unitsPerEm),a.writeLongLong(this.created),a.writeLongLong(this.modified),a.writeShort(this.xMin),a.writeShort(this.yMin),a.writeShort(this.xMax),a.writeShort(this.yMax),a.writeShort(this.macStyle),a.writeShort(this.lowestRecPPEM),a.writeShort(this.fontDirectionHint),a.writeShort(s),a.writeShort(this.glyphDataFormat),a.data},t}(),Sv=function(){function t(s,a){var r,o,l,A,u,h,p,m,v,b,x,C,Q,j,B,L,P;switch(this.platformID=s.readUInt16(),this.encodingID=s.readShort(),this.offset=a+s.readInt(),v=s.pos,s.pos=this.offset,this.format=s.readUInt16(),this.length=s.readUInt16(),this.language=s.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(h=0;h<256;++h)this.codeMap[h]=s.readByte();break;case 4:for(x=s.readUInt16(),b=x/2,s.pos+=6,l=function(){var F,ee;for(ee=[],h=F=0;0<=b?F<b:F>b;h=0<=b?++F:--F)ee.push(s.readUInt16());return ee}(),s.pos+=2,Q=function(){var F,ee;for(ee=[],h=F=0;0<=b?F<b:F>b;h=0<=b?++F:--F)ee.push(s.readUInt16());return ee}(),p=function(){var F,ee;for(ee=[],h=F=0;0<=b?F<b:F>b;h=0<=b?++F:--F)ee.push(s.readUInt16());return ee}(),m=function(){var F,ee;for(ee=[],h=F=0;0<=b?F<b:F>b;h=0<=b?++F:--F)ee.push(s.readUInt16());return ee}(),o=(this.length-s.pos+this.offset)/2,u=function(){var F,ee;for(ee=[],h=F=0;0<=o?F<o:F>o;h=0<=o?++F:--F)ee.push(s.readUInt16());return ee}(),h=B=0,P=l.length;B<P;h=++B)for(j=l[h],r=L=C=Q[h];C<=j?L<=j:L>=j;r=C<=j?++L:--L)m[h]===0?A=r+p[h]:(A=u[m[h]/2+(r-C)-(b-h)]||0)!==0&&(A+=p[h]),this.codeMap[r]=65535&A}s.pos=v}return t.encode=function(s,a){var r,o,l,A,u,h,p,m,v,b,x,C,Q,j,B,L,P,F,ee,K,q,E,U,V,H,I,M,re,G,Z,fe,Ae,Ce,te,he,k,T,z,le,X,W,de,me,Be,Qe,ut;switch(re=new Ac,A=Object.keys(s).sort(function(mt,Ve){return mt-Ve}),a){case"macroman":for(Q=0,j=function(){var mt=[];for(C=0;C<256;++C)mt.push(0);return mt}(),L={0:0},l={},G=0,Ce=A.length;G<Ce;G++)L[me=s[o=A[G]]]==null&&(L[me]=++Q),l[o]={old:s[o],new:L[s[o]]},j[o]=L[s[o]];return re.writeUInt16(1),re.writeUInt16(0),re.writeUInt32(12),re.writeUInt16(0),re.writeUInt16(262),re.writeUInt16(0),re.write(j),{charMap:l,subtable:re.data,maxGlyphID:Q+1};case"unicode":for(I=[],v=[],P=0,L={},r={},B=p=null,Z=0,te=A.length;Z<te;Z++)L[ee=s[o=A[Z]]]==null&&(L[ee]=++P),r[o]={old:ee,new:L[ee]},u=L[ee]-o,B!=null&&u===p||(B&&v.push(B),I.push(o),p=u),B=o;for(B&&v.push(B),v.push(65535),I.push(65535),V=2*(U=I.length),E=2*Math.pow(Math.log(U)/Math.LN2,2),b=Math.log(E/2)/Math.LN2,q=2*U-E,h=[],K=[],x=[],C=fe=0,he=I.length;fe<he;C=++fe){if(H=I[C],m=v[C],H===65535){h.push(0),K.push(0);break}if(H-(M=r[H].new)>=32768)for(h.push(0),K.push(2*(x.length+U-C)),o=Ae=H;H<=m?Ae<=m:Ae>=m;o=H<=m?++Ae:--Ae)x.push(r[o].new);else h.push(M-H),K.push(0)}for(re.writeUInt16(3),re.writeUInt16(1),re.writeUInt32(12),re.writeUInt16(4),re.writeUInt16(16+8*U+2*x.length),re.writeUInt16(0),re.writeUInt16(V),re.writeUInt16(E),re.writeUInt16(b),re.writeUInt16(q),W=0,k=v.length;W<k;W++)o=v[W],re.writeUInt16(o);for(re.writeUInt16(0),de=0,T=I.length;de<T;de++)o=I[de],re.writeUInt16(o);for(Be=0,z=h.length;Be<z;Be++)u=h[Be],re.writeUInt16(u);for(Qe=0,le=K.length;Qe<le;Qe++)F=K[Qe],re.writeUInt16(F);for(ut=0,X=x.length;ut<X;ut++)Q=x[ut],re.writeUInt16(Q);return{charMap:r,subtable:re.data,maxGlyphID:P+1}}},t}(),V1=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return qo(t,wo),t.prototype.tag="cmap",t.prototype.parse=function(s){var a,r,o;for(s.pos=this.offset,this.version=s.readUInt16(),o=s.readUInt16(),this.tables=[],this.unicode=null,r=0;0<=o?r<o:r>o;r=0<=o?++r:--r)a=new Sv(s,this.offset),this.tables.push(a),a.isUnicode&&this.unicode==null&&(this.unicode=a);return!0},t.encode=function(s,a){var r,o;return a==null&&(a="macroman"),r=Sv.encode(s,a),(o=new Ac).writeUInt16(0),o.writeUInt16(1),r.table=o.data.concat(r.subtable),r},t}(),zN=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return qo(t,wo),t.prototype.tag="hhea",t.prototype.parse=function(s){return s.pos=this.offset,this.version=s.readInt(),this.ascender=s.readShort(),this.decender=s.readShort(),this.lineGap=s.readShort(),this.advanceWidthMax=s.readShort(),this.minLeftSideBearing=s.readShort(),this.minRightSideBearing=s.readShort(),this.xMaxExtent=s.readShort(),this.caretSlopeRise=s.readShort(),this.caretSlopeRun=s.readShort(),this.caretOffset=s.readShort(),s.pos+=8,this.metricDataFormat=s.readShort(),this.numberOfMetrics=s.readUInt16()},t}(),qN=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return qo(t,wo),t.prototype.tag="OS/2",t.prototype.parse=function(s){if(s.pos=this.offset,this.version=s.readUInt16(),this.averageCharWidth=s.readShort(),this.weightClass=s.readUInt16(),this.widthClass=s.readUInt16(),this.type=s.readShort(),this.ySubscriptXSize=s.readShort(),this.ySubscriptYSize=s.readShort(),this.ySubscriptXOffset=s.readShort(),this.ySubscriptYOffset=s.readShort(),this.ySuperscriptXSize=s.readShort(),this.ySuperscriptYSize=s.readShort(),this.ySuperscriptXOffset=s.readShort(),this.ySuperscriptYOffset=s.readShort(),this.yStrikeoutSize=s.readShort(),this.yStrikeoutPosition=s.readShort(),this.familyClass=s.readShort(),this.panose=function(){var a,r;for(r=[],a=0;a<10;++a)r.push(s.readByte());return r}(),this.charRange=function(){var a,r;for(r=[],a=0;a<4;++a)r.push(s.readInt());return r}(),this.vendorID=s.readString(4),this.selection=s.readShort(),this.firstCharIndex=s.readShort(),this.lastCharIndex=s.readShort(),this.version>0&&(this.ascent=s.readShort(),this.descent=s.readShort(),this.lineGap=s.readShort(),this.winAscent=s.readShort(),this.winDescent=s.readShort(),this.codePageRange=function(){var a,r;for(r=[],a=0;a<2;a=++a)r.push(s.readInt());return r}(),this.version>1))return this.xHeight=s.readShort(),this.capHeight=s.readShort(),this.defaultChar=s.readShort(),this.breakChar=s.readShort(),this.maxContext=s.readShort()},t}(),KN=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return qo(t,wo),t.prototype.tag="post",t.prototype.parse=function(s){var a,r,o;switch(s.pos=this.offset,this.format=s.readInt(),this.italicAngle=s.readInt(),this.underlinePosition=s.readShort(),this.underlineThickness=s.readShort(),this.isFixedPitch=s.readInt(),this.minMemType42=s.readInt(),this.maxMemType42=s.readInt(),this.minMemType1=s.readInt(),this.maxMemType1=s.readInt(),this.format){case 65536:case 196608:break;case 131072:var l;for(r=s.readUInt16(),this.glyphNameIndex=[],l=0;0<=r?l<r:l>r;l=0<=r?++l:--l)this.glyphNameIndex.push(s.readUInt16());for(this.names=[],o=[];s.pos<this.offset+this.length;)a=s.readByte(),o.push(this.names.push(s.readString(a)));return o;case 151552:return r=s.readUInt16(),this.offsets=s.read(r);case 262144:return this.map=(function(){var A,u,h;for(h=[],l=A=0,u=this.file.maxp.numGlyphs;0<=u?A<u:A>u;l=0<=u?++A:--A)h.push(s.readUInt32());return h}).call(this)}},t}(),GN=function(t,s){this.raw=t,this.length=t.length,this.platformID=s.platformID,this.encodingID=s.encodingID,this.languageID=s.languageID},VN=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return qo(t,wo),t.prototype.tag="name",t.prototype.parse=function(s){var a,r,o,l,A,u,h,p,m,v,b;for(s.pos=this.offset,s.readShort(),a=s.readShort(),u=s.readShort(),r=[],l=0;0<=a?l<a:l>a;l=0<=a?++l:--l)r.push({platformID:s.readShort(),encodingID:s.readShort(),languageID:s.readShort(),nameID:s.readShort(),length:s.readShort(),offset:this.offset+u+s.readShort()});for(h={},l=m=0,v=r.length;m<v;l=++m)o=r[l],s.pos=o.offset,p=s.readString(o.length),A=new GN(p,o),h[b=o.nameID]==null&&(h[b]=[]),h[o.nameID].push(A);this.strings=h,this.copyright=h[0],this.fontFamily=h[1],this.fontSubfamily=h[2],this.uniqueSubfamily=h[3],this.fontName=h[4],this.version=h[5];try{this.postscriptName=h[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=h[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=h[7],this.manufacturer=h[8],this.designer=h[9],this.description=h[10],this.vendorUrl=h[11],this.designerUrl=h[12],this.license=h[13],this.licenseUrl=h[14],this.preferredFamily=h[15],this.preferredSubfamily=h[17],this.compatibleFull=h[18],this.sampleText=h[19]},t}(),$N=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return qo(t,wo),t.prototype.tag="maxp",t.prototype.parse=function(s){return s.pos=this.offset,this.version=s.readInt(),this.numGlyphs=s.readUInt16(),this.maxPoints=s.readUInt16(),this.maxContours=s.readUInt16(),this.maxCompositePoints=s.readUInt16(),this.maxComponentContours=s.readUInt16(),this.maxZones=s.readUInt16(),this.maxTwilightPoints=s.readUInt16(),this.maxStorage=s.readUInt16(),this.maxFunctionDefs=s.readUInt16(),this.maxInstructionDefs=s.readUInt16(),this.maxStackElements=s.readUInt16(),this.maxSizeOfInstructions=s.readUInt16(),this.maxComponentElements=s.readUInt16(),this.maxComponentDepth=s.readUInt16()},t}(),WN=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return qo(t,wo),t.prototype.tag="hmtx",t.prototype.parse=function(s){var a,r,o,l,A,u,h;for(s.pos=this.offset,this.metrics=[],a=0,u=this.file.hhea.numberOfMetrics;0<=u?a<u:a>u;a=0<=u?++a:--a)this.metrics.push({advance:s.readUInt16(),lsb:s.readInt16()});for(o=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var p,m;for(m=[],a=p=0;0<=o?p<o:p>o;a=0<=o?++p:--p)m.push(s.readInt16());return m}(),this.widths=(function(){var p,m,v,b;for(b=[],p=0,m=(v=this.metrics).length;p<m;p++)l=v[p],b.push(l.advance);return b}).call(this),r=this.widths[this.widths.length-1],h=[],a=A=0;0<=o?A<o:A>o;a=0<=o?++A:--A)h.push(this.widths.push(r));return h},t.prototype.forGlyph=function(s){return s in this.metrics?this.metrics[s]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[s-this.metrics.length]}},t}(),$1=[].slice,YN=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return qo(t,wo),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(s){var a,r,o,l,A,u,h,p,m,v;return s in this.cache?this.cache[s]:(l=this.file.loca,a=this.file.contents,r=l.indexOf(s),(o=l.lengthOf(s))===0?this.cache[s]=null:(a.pos=this.offset+r,A=(u=new Ac(a.read(o))).readShort(),p=u.readShort(),v=u.readShort(),h=u.readShort(),m=u.readShort(),this.cache[s]=A===-1?new JN(u,p,v,h,m):new XN(u,A,p,v,h,m),this.cache[s]))},t.prototype.encode=function(s,a,r){var o,l,A,u,h;for(A=[],l=[],u=0,h=a.length;u<h;u++)o=s[a[u]],l.push(A.length),o&&(A=A.concat(o.encode(r)));return l.push(A.length),{table:A,offsets:l}},t}(),XN=function(){function t(s,a,r,o,l,A){this.raw=s,this.numberOfContours=a,this.xMin=r,this.yMin=o,this.xMax=l,this.yMax=A,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t}(),JN=function(){function t(s,a,r,o,l){var A,u;for(this.raw=s,this.xMin=a,this.yMin=r,this.xMax=o,this.yMax=l,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],A=this.raw;u=A.readShort(),this.glyphOffsets.push(A.pos),this.glyphIDs.push(A.readUInt16()),32&u;)A.pos+=1&u?4:2,128&u?A.pos+=8:64&u?A.pos+=4:8&u&&(A.pos+=2)}return t.prototype.encode=function(){var s,a,r;for(a=new Ac($1.call(this.raw.data)),s=0,r=this.glyphIDs.length;s<r;++s)a.pos=this.glyphOffsets[s];return a.data},t}(),ZN=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return qo(t,wo),t.prototype.tag="loca",t.prototype.parse=function(s){var a,r;return s.pos=this.offset,a=this.file.head.indexToLocFormat,this.offsets=a===0?(function(){var o,l;for(l=[],r=0,o=this.length;r<o;r+=2)l.push(2*s.readUInt16());return l}).call(this):(function(){var o,l;for(l=[],r=0,o=this.length;r<o;r+=4)l.push(s.readUInt32());return l}).call(this)},t.prototype.indexOf=function(s){return this.offsets[s]},t.prototype.lengthOf=function(s){return this.offsets[s+1]-this.offsets[s]},t.prototype.encode=function(s,a){for(var r=new Uint32Array(this.offsets.length),o=0,l=0,A=0;A<r.length;++A)if(r[A]=o,l<a.length&&a[l]==A){++l,r[A]=o;var u=this.offsets[A],h=this.offsets[A+1]-u;h>0&&(o+=h)}for(var p=new Array(4*r.length),m=0;m<r.length;++m)p[4*m+3]=255&r[m],p[4*m+2]=(65280&r[m])>>8,p[4*m+1]=(16711680&r[m])>>16,p[4*m]=(4278190080&r[m])>>24;return p},t}(),eC=function(){function t(s){this.font=s,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var s,a,r,o,l;for(a in o=this.font.cmap.tables[0].codeMap,s={},l=this.subset)r=l[a],s[a]=o[r];return s},t.prototype.glyphsFor=function(s){var a,r,o,l,A,u,h;for(o={},A=0,u=s.length;A<u;A++)o[l=s[A]]=this.font.glyf.glyphFor(l);for(l in a=[],o)(r=o[l])!=null&&r.compound&&a.push.apply(a,r.glyphIDs);if(a.length>0)for(l in h=this.glyphsFor(a))r=h[l],o[l]=r;return o},t.prototype.encode=function(s,a){var r,o,l,A,u,h,p,m,v,b,x,C,Q,j,B;for(o in r=V1.encode(this.generateCmap(),"unicode"),A=this.glyphsFor(s),x={0:0},B=r.charMap)x[(h=B[o]).old]=h.new;for(C in b=r.maxGlyphID,A)C in x||(x[C]=b++);return m=function(L){var P,F;for(P in F={},L)F[L[P]]=P;return F}(x),v=Object.keys(m).sort(function(L,P){return L-P}),Q=function(){var L,P,F;for(F=[],L=0,P=v.length;L<P;L++)u=v[L],F.push(m[u]);return F}(),l=this.font.glyf.encode(A,Q,x),p=this.font.loca.encode(l.offsets,Q),j={cmap:this.font.cmap.raw(),glyf:l.table,loca:p,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(a)},this.font.os2.exists&&(j["OS/2"]=this.font.os2.raw()),this.font.directory.encode(j)},t}();is.API.PDFObject=function(){var t;function s(){}return t=function(a,r){return(Array(r+1).join("0")+a).slice(-r)},s.convert=function(a){var r,o,l,A;if(Array.isArray(a))return"["+function(){var u,h,p;for(p=[],u=0,h=a.length;u<h;u++)r=a[u],p.push(s.convert(r));return p}().join(" ")+"]";if(typeof a=="string")return"/"+a;if(a?.isString)return"("+a+")";if(a instanceof Date)return"(D:"+t(a.getUTCFullYear(),4)+t(a.getUTCMonth(),2)+t(a.getUTCDate(),2)+t(a.getUTCHours(),2)+t(a.getUTCMinutes(),2)+t(a.getUTCSeconds(),2)+"Z)";if({}.toString.call(a)==="[object Object]"){for(o in l=["<<"],a)A=a[o],l.push("/"+o+" "+s.convert(A));return l.push(">>"),l.join(`
`)}return""+a},s}();const Gg=Object.freeze(Object.defineProperty({__proto__:null,AcroFormAppearance:As,AcroFormButton:Wn,AcroFormCheckBox:Yd,AcroFormChoiceField:Dc,AcroFormComboBox:Hc,AcroFormEditBox:$d,AcroFormListBox:Ic,AcroFormPasswordField:Xd,AcroFormPushButton:Wd,AcroFormRadioButton:Pc,AcroFormTextField:oc,GState:iu,ShadingPattern:sc,TilingPattern:Tc,default:is,jsPDF:is},Symbol.toStringTag,{value:"Module"}));/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var lg=function(t,s){return lg=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,r){a.__proto__=r}||function(a,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(a[o]=r[o])},lg(t,s)};function jo(t,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");lg(t,s);function a(){this.constructor=t}t.prototype=s===null?Object.create(s):(a.prototype=s.prototype,new a)}var cg=function(){return cg=Object.assign||function(s){for(var a,r=1,o=arguments.length;r<o;r++){a=arguments[r];for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(s[l]=a[l])}return s},cg.apply(this,arguments)};function $r(t,s,a,r){function o(l){return l instanceof a?l:new a(function(A){A(l)})}return new(a||(a=Promise))(function(l,A){function u(m){try{p(r.next(m))}catch(v){A(v)}}function h(m){try{p(r.throw(m))}catch(v){A(v)}}function p(m){m.done?l(m.value):o(m.value).then(u,h)}p((r=r.apply(t,[])).next())})}function Er(t,s){var a={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},r,o,l,A;return A={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(A[Symbol.iterator]=function(){return this}),A;function u(p){return function(m){return h([p,m])}}function h(p){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,o&&(l=p[0]&2?o.return:p[0]?o.throw||((l=o.return)&&l.call(o),0):o.next)&&!(l=l.call(o,p[1])).done)return l;switch(o=0,l&&(p=[p[0]&2,l.value]),p[0]){case 0:case 1:l=p;break;case 4:return a.label++,{value:p[1],done:!1};case 5:a.label++,o=p[1],p=[0];continue;case 7:p=a.ops.pop(),a.trys.pop();continue;default:if(l=a.trys,!(l=l.length>0&&l[l.length-1])&&(p[0]===6||p[0]===2)){a=0;continue}if(p[0]===3&&(!l||p[1]>l[0]&&p[1]<l[3])){a.label=p[1];break}if(p[0]===6&&a.label<l[1]){a.label=l[1],l=p;break}if(l&&a.label<l[2]){a.label=l[2],a.ops.push(p);break}l[2]&&a.ops.pop(),a.trys.pop();continue}p=s.call(t,a)}catch(m){p=[6,m],o=0}finally{r=l=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}}function kh(t,s,a){if(arguments.length===2)for(var r=0,o=s.length,l;r<o;r++)(l||!(r in s))&&(l||(l=Array.prototype.slice.call(s,0,r)),l[r]=s[r]);return t.concat(l||s)}var bl=function(){function t(s,a,r,o){this.left=s,this.top=a,this.width=r,this.height=o}return t.prototype.add=function(s,a,r,o){return new t(this.left+s,this.top+a,this.width+r,this.height+o)},t.fromClientRect=function(s,a){return new t(a.left+s.windowBounds.left,a.top+s.windowBounds.top,a.width,a.height)},t.fromDOMRectList=function(s,a){var r=Array.from(a).find(function(o){return o.width!==0});return r?new t(r.left+s.windowBounds.left,r.top+s.windowBounds.top,r.width,r.height):t.EMPTY},t.EMPTY=new t(0,0,0,0),t}(),kp=function(t,s){return bl.fromClientRect(t,s.getBoundingClientRect())},tC=function(t){var s=t.body,a=t.documentElement;if(!s||!a)throw new Error("Unable to get document size");var r=Math.max(Math.max(s.scrollWidth,a.scrollWidth),Math.max(s.offsetWidth,a.offsetWidth),Math.max(s.clientWidth,a.clientWidth)),o=Math.max(Math.max(s.scrollHeight,a.scrollHeight),Math.max(s.offsetHeight,a.offsetHeight),Math.max(s.clientHeight,a.clientHeight));return new bl(0,0,r,o)},Fp=function(t){for(var s=[],a=0,r=t.length;a<r;){var o=t.charCodeAt(a++);if(o>=55296&&o<=56319&&a<r){var l=t.charCodeAt(a++);(l&64512)===56320?s.push(((o&1023)<<10)+(l&1023)+65536):(s.push(o),a--)}else s.push(o)}return s},Ln=function(){for(var t=[],s=0;s<arguments.length;s++)t[s]=arguments[s];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var a=t.length;if(!a)return"";for(var r=[],o=-1,l="";++o<a;){var A=t[o];A<=65535?r.push(A):(A-=65536,r.push((A>>10)+55296,A%1024+56320)),(o+1===a||r.length>16384)&&(l+=String.fromCharCode.apply(String,r),r.length=0)}return l},kv="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",sC=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Fh=0;Fh<kv.length;Fh++)sC[kv.charCodeAt(Fh)]=Fh;var Fv="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Hd=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Uh=0;Uh<Fv.length;Uh++)Hd[Fv.charCodeAt(Uh)]=Uh;var aC=function(t){var s=t.length*.75,a=t.length,r,o=0,l,A,u,h;t[t.length-1]==="="&&(s--,t[t.length-2]==="="&&s--);var p=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(s):new Array(s),m=Array.isArray(p)?p:new Uint8Array(p);for(r=0;r<a;r+=4)l=Hd[t.charCodeAt(r)],A=Hd[t.charCodeAt(r+1)],u=Hd[t.charCodeAt(r+2)],h=Hd[t.charCodeAt(r+3)],m[o++]=l<<2|A>>4,m[o++]=(A&15)<<4|u>>2,m[o++]=(u&3)<<6|h&63;return p},nC=function(t){for(var s=t.length,a=[],r=0;r<s;r+=2)a.push(t[r+1]<<8|t[r]);return a},rC=function(t){for(var s=t.length,a=[],r=0;r<s;r+=4)a.push(t[r+3]<<24|t[r+2]<<16|t[r+1]<<8|t[r]);return a},Oc=5,Vg=11,_m=2,iC=Vg-Oc,W1=65536>>Oc,oC=1<<Oc,Bm=oC-1,lC=1024>>Oc,cC=W1+lC,AC=cC,dC=32,uC=AC+dC,hC=65536>>Vg,pC=1<<iC,fC=pC-1,Uv=function(t,s,a){return t.slice?t.slice(s,a):new Uint16Array(Array.prototype.slice.call(t,s,a))},mC=function(t,s,a){return t.slice?t.slice(s,a):new Uint32Array(Array.prototype.slice.call(t,s,a))},gC=function(t,s){var a=aC(t),r=Array.isArray(a)?rC(a):new Uint32Array(a),o=Array.isArray(a)?nC(a):new Uint16Array(a),l=24,A=Uv(o,l/2,r[4]/2),u=r[5]===2?Uv(o,(l+r[4])/2):mC(r,Math.ceil((l+r[4])/4));return new xC(r[0],r[1],r[2],r[3],A,u)},xC=function(){function t(s,a,r,o,l,A){this.initialValue=s,this.errorValue=a,this.highStart=r,this.highValueIndex=o,this.index=l,this.data=A}return t.prototype.get=function(s){var a;if(s>=0){if(s<55296||s>56319&&s<=65535)return a=this.index[s>>Oc],a=(a<<_m)+(s&Bm),this.data[a];if(s<=65535)return a=this.index[W1+(s-55296>>Oc)],a=(a<<_m)+(s&Bm),this.data[a];if(s<this.highStart)return a=uC-hC+(s>>Vg),a=this.index[a],a+=s>>Oc&fC,a=this.index[a],a=(a<<_m)+(s&Bm),this.data[a];if(s<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t}(),Ev="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",yC=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Eh=0;Eh<Ev.length;Eh++)yC[Ev.charCodeAt(Eh)]=Eh;var vC="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",Lv=50,bC=1,Y1=2,X1=3,wC=4,jC=5,Qv=7,J1=8,Tv=9,nc=10,Ag=11,Rv=12,dg=13,_C=14,Pd=15,ug=16,Lh=17,Td=18,BC=19,Dv=20,hg=21,Rd=22,Nm=23,CA=24,_i=25,Od=26,Md=27,SA=28,NC=29,Qc=30,CC=31,Qh=32,Th=33,pg=34,fg=35,mg=36,ou=37,gg=38,sp=39,ap=40,Cm=41,Z1=42,SC=43,kC=[9001,65288],ew="!",aa="",Rh="",xg=gC(vC),fl=[Qc,mg],yg=[bC,Y1,X1,jC],tw=[nc,J1],Iv=[Md,Od],FC=yg.concat(tw),Hv=[gg,sp,ap,pg,fg],UC=[Pd,dg],EC=function(t,s){s===void 0&&(s="strict");var a=[],r=[],o=[];return t.forEach(function(l,A){var u=xg.get(l);if(u>Lv?(o.push(!0),u-=Lv):o.push(!1),["normal","auto","loose"].indexOf(s)!==-1&&[8208,8211,12316,12448].indexOf(l)!==-1)return r.push(A),a.push(ug);if(u===wC||u===Ag){if(A===0)return r.push(A),a.push(Qc);var h=a[A-1];return FC.indexOf(h)===-1?(r.push(r[A-1]),a.push(h)):(r.push(A),a.push(Qc))}if(r.push(A),u===CC)return a.push(s==="strict"?hg:ou);if(u===Z1||u===NC)return a.push(Qc);if(u===SC)return l>=131072&&l<=196605||l>=196608&&l<=262141?a.push(ou):a.push(Qc);a.push(u)}),[r,a,o]},Sm=function(t,s,a,r){var o=r[a];if(Array.isArray(t)?t.indexOf(o)!==-1:t===o)for(var l=a;l<=r.length;){l++;var A=r[l];if(A===s)return!0;if(A!==nc)break}if(o===nc)for(var l=a;l>0;){l--;var u=r[l];if(Array.isArray(t)?t.indexOf(u)!==-1:t===u)for(var h=a;h<=r.length;){h++;var A=r[h];if(A===s)return!0;if(A!==nc)break}if(u!==nc)break}return!1},Pv=function(t,s){for(var a=t;a>=0;){var r=s[a];if(r===nc)a--;else return r}return 0},LC=function(t,s,a,r,o){if(a[r]===0)return aa;var l=r-1;if(Array.isArray(o)&&o[l]===!0)return aa;var A=l-1,u=l+1,h=s[l],p=A>=0?s[A]:0,m=s[u];if(h===Y1&&m===X1)return aa;if(yg.indexOf(h)!==-1)return ew;if(yg.indexOf(m)!==-1||tw.indexOf(m)!==-1)return aa;if(Pv(l,s)===J1)return Rh;if(xg.get(t[l])===Ag||(h===Qh||h===Th)&&xg.get(t[u])===Ag||h===Qv||m===Qv||h===Tv||[nc,dg,Pd].indexOf(h)===-1&&m===Tv||[Lh,Td,BC,CA,SA].indexOf(m)!==-1||Pv(l,s)===Rd||Sm(Nm,Rd,l,s)||Sm([Lh,Td],hg,l,s)||Sm(Rv,Rv,l,s))return aa;if(h===nc)return Rh;if(h===Nm||m===Nm)return aa;if(m===ug||h===ug)return Rh;if([dg,Pd,hg].indexOf(m)!==-1||h===_C||p===mg&&UC.indexOf(h)!==-1||h===SA&&m===mg||m===Dv||fl.indexOf(m)!==-1&&h===_i||fl.indexOf(h)!==-1&&m===_i||h===Md&&[ou,Qh,Th].indexOf(m)!==-1||[ou,Qh,Th].indexOf(h)!==-1&&m===Od||fl.indexOf(h)!==-1&&Iv.indexOf(m)!==-1||Iv.indexOf(h)!==-1&&fl.indexOf(m)!==-1||[Md,Od].indexOf(h)!==-1&&(m===_i||[Rd,Pd].indexOf(m)!==-1&&s[u+1]===_i)||[Rd,Pd].indexOf(h)!==-1&&m===_i||h===_i&&[_i,SA,CA].indexOf(m)!==-1)return aa;if([_i,SA,CA,Lh,Td].indexOf(m)!==-1)for(var v=l;v>=0;){var b=s[v];if(b===_i)return aa;if([SA,CA].indexOf(b)!==-1)v--;else break}if([Md,Od].indexOf(m)!==-1)for(var v=[Lh,Td].indexOf(h)!==-1?A:l;v>=0;){var b=s[v];if(b===_i)return aa;if([SA,CA].indexOf(b)!==-1)v--;else break}if(gg===h&&[gg,sp,pg,fg].indexOf(m)!==-1||[sp,pg].indexOf(h)!==-1&&[sp,ap].indexOf(m)!==-1||[ap,fg].indexOf(h)!==-1&&m===ap||Hv.indexOf(h)!==-1&&[Dv,Od].indexOf(m)!==-1||Hv.indexOf(m)!==-1&&h===Md||fl.indexOf(h)!==-1&&fl.indexOf(m)!==-1||h===CA&&fl.indexOf(m)!==-1||fl.concat(_i).indexOf(h)!==-1&&m===Rd&&kC.indexOf(t[u])===-1||fl.concat(_i).indexOf(m)!==-1&&h===Td)return aa;if(h===Cm&&m===Cm){for(var x=a[l],C=1;x>0&&(x--,s[x]===Cm);)C++;if(C%2!==0)return aa}return h===Qh&&m===Th?aa:Rh},QC=function(t,s){s||(s={lineBreak:"normal",wordBreak:"normal"});var a=EC(t,s.lineBreak),r=a[0],o=a[1],l=a[2];(s.wordBreak==="break-all"||s.wordBreak==="break-word")&&(o=o.map(function(u){return[_i,Qc,Z1].indexOf(u)!==-1?ou:u}));var A=s.wordBreak==="keep-all"?l.map(function(u,h){return u&&t[h]>=19968&&t[h]<=40959}):void 0;return[r,o,A]},TC=function(){function t(s,a,r,o){this.codePoints=s,this.required=a===ew,this.start=r,this.end=o}return t.prototype.slice=function(){return Ln.apply(void 0,this.codePoints.slice(this.start,this.end))},t}(),RC=function(t,s){var a=Fp(t),r=QC(a,s),o=r[0],l=r[1],A=r[2],u=a.length,h=0,p=0;return{next:function(){if(p>=u)return{done:!0,value:null};for(var m=aa;p<u&&(m=LC(a,l,o,++p,A))===aa;);if(m!==aa||p===u){var v=new TC(a,m,h,p);return h=p,{value:v,done:!1}}return{done:!0,value:null}}}},DC=1,IC=2,gu=4,Ov=8,Ap=10,Mv=47,Jd=92,HC=9,PC=32,Dh=34,Dd=61,OC=35,MC=36,zC=37,Ih=39,Hh=40,Id=41,qC=95,oi=45,KC=33,GC=60,VC=62,$C=64,WC=91,YC=93,XC=61,JC=123,Ph=63,ZC=125,zv=124,e4=126,t4=128,qv=65533,km=42,Rc=43,s4=44,a4=58,n4=59,lu=46,r4=0,i4=8,o4=11,l4=14,c4=31,A4=127,Do=-1,sw=48,aw=97,nw=101,d4=102,u4=117,h4=122,rw=65,iw=69,ow=70,p4=85,f4=90,Lr=function(t){return t>=sw&&t<=57},m4=function(t){return t>=55296&&t<=57343},kA=function(t){return Lr(t)||t>=rw&&t<=ow||t>=aw&&t<=d4},g4=function(t){return t>=aw&&t<=h4},x4=function(t){return t>=rw&&t<=f4},y4=function(t){return g4(t)||x4(t)},v4=function(t){return t>=t4},Oh=function(t){return t===Ap||t===HC||t===PC},dp=function(t){return y4(t)||v4(t)||t===qC},Kv=function(t){return dp(t)||Lr(t)||t===oi},b4=function(t){return t>=r4&&t<=i4||t===o4||t>=l4&&t<=c4||t===A4},tc=function(t,s){return t!==Jd?!1:s!==Ap},Mh=function(t,s,a){return t===oi?dp(s)||tc(s,a):dp(t)?!0:!!(t===Jd&&tc(t,s))},Fm=function(t,s,a){return t===Rc||t===oi?Lr(s)?!0:s===lu&&Lr(a):Lr(t===lu?s:t)},w4=function(t){var s=0,a=1;(t[s]===Rc||t[s]===oi)&&(t[s]===oi&&(a=-1),s++);for(var r=[];Lr(t[s]);)r.push(t[s++]);var o=r.length?parseInt(Ln.apply(void 0,r),10):0;t[s]===lu&&s++;for(var l=[];Lr(t[s]);)l.push(t[s++]);var A=l.length,u=A?parseInt(Ln.apply(void 0,l),10):0;(t[s]===iw||t[s]===nw)&&s++;var h=1;(t[s]===Rc||t[s]===oi)&&(t[s]===oi&&(h=-1),s++);for(var p=[];Lr(t[s]);)p.push(t[s++]);var m=p.length?parseInt(Ln.apply(void 0,p),10):0;return a*(o+u*Math.pow(10,-A))*Math.pow(10,h*m)},j4={type:2},_4={type:3},B4={type:4},N4={type:13},C4={type:8},S4={type:21},k4={type:9},F4={type:10},U4={type:11},E4={type:12},L4={type:14},zh={type:23},Q4={type:1},T4={type:25},R4={type:24},D4={type:26},I4={type:27},H4={type:28},P4={type:29},O4={type:31},vg={type:32},lw=function(){function t(){this._value=[]}return t.prototype.write=function(s){this._value=this._value.concat(Fp(s))},t.prototype.read=function(){for(var s=[],a=this.consumeToken();a!==vg;)s.push(a),a=this.consumeToken();return s},t.prototype.consumeToken=function(){var s=this.consumeCodePoint();switch(s){case Dh:return this.consumeStringToken(Dh);case OC:var a=this.peekCodePoint(0),r=this.peekCodePoint(1),o=this.peekCodePoint(2);if(Kv(a)||tc(r,o)){var l=Mh(a,r,o)?IC:DC,A=this.consumeName();return{type:5,value:A,flags:l}}break;case MC:if(this.peekCodePoint(0)===Dd)return this.consumeCodePoint(),N4;break;case Ih:return this.consumeStringToken(Ih);case Hh:return j4;case Id:return _4;case km:if(this.peekCodePoint(0)===Dd)return this.consumeCodePoint(),L4;break;case Rc:if(Fm(s,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(s),this.consumeNumericToken();break;case s4:return B4;case oi:var u=s,h=this.peekCodePoint(0),p=this.peekCodePoint(1);if(Fm(u,h,p))return this.reconsumeCodePoint(s),this.consumeNumericToken();if(Mh(u,h,p))return this.reconsumeCodePoint(s),this.consumeIdentLikeToken();if(h===oi&&p===VC)return this.consumeCodePoint(),this.consumeCodePoint(),R4;break;case lu:if(Fm(s,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(s),this.consumeNumericToken();break;case Mv:if(this.peekCodePoint(0)===km)for(this.consumeCodePoint();;){var m=this.consumeCodePoint();if(m===km&&(m=this.consumeCodePoint(),m===Mv))return this.consumeToken();if(m===Do)return this.consumeToken()}break;case a4:return D4;case n4:return I4;case GC:if(this.peekCodePoint(0)===KC&&this.peekCodePoint(1)===oi&&this.peekCodePoint(2)===oi)return this.consumeCodePoint(),this.consumeCodePoint(),T4;break;case $C:var v=this.peekCodePoint(0),b=this.peekCodePoint(1),x=this.peekCodePoint(2);if(Mh(v,b,x)){var A=this.consumeName();return{type:7,value:A}}break;case WC:return H4;case Jd:if(tc(s,this.peekCodePoint(0)))return this.reconsumeCodePoint(s),this.consumeIdentLikeToken();break;case YC:return P4;case XC:if(this.peekCodePoint(0)===Dd)return this.consumeCodePoint(),C4;break;case JC:return U4;case ZC:return E4;case u4:case p4:var C=this.peekCodePoint(0),Q=this.peekCodePoint(1);return C===Rc&&(kA(Q)||Q===Ph)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(s),this.consumeIdentLikeToken();case zv:if(this.peekCodePoint(0)===Dd)return this.consumeCodePoint(),k4;if(this.peekCodePoint(0)===zv)return this.consumeCodePoint(),S4;break;case e4:if(this.peekCodePoint(0)===Dd)return this.consumeCodePoint(),F4;break;case Do:return vg}return Oh(s)?(this.consumeWhiteSpace(),O4):Lr(s)?(this.reconsumeCodePoint(s),this.consumeNumericToken()):dp(s)?(this.reconsumeCodePoint(s),this.consumeIdentLikeToken()):{type:6,value:Ln(s)}},t.prototype.consumeCodePoint=function(){var s=this._value.shift();return typeof s>"u"?-1:s},t.prototype.reconsumeCodePoint=function(s){this._value.unshift(s)},t.prototype.peekCodePoint=function(s){return s>=this._value.length?-1:this._value[s]},t.prototype.consumeUnicodeRangeToken=function(){for(var s=[],a=this.consumeCodePoint();kA(a)&&s.length<6;)s.push(a),a=this.consumeCodePoint();for(var r=!1;a===Ph&&s.length<6;)s.push(a),a=this.consumeCodePoint(),r=!0;if(r){var o=parseInt(Ln.apply(void 0,s.map(function(h){return h===Ph?sw:h})),16),l=parseInt(Ln.apply(void 0,s.map(function(h){return h===Ph?ow:h})),16);return{type:30,start:o,end:l}}var A=parseInt(Ln.apply(void 0,s),16);if(this.peekCodePoint(0)===oi&&kA(this.peekCodePoint(1))){this.consumeCodePoint(),a=this.consumeCodePoint();for(var u=[];kA(a)&&u.length<6;)u.push(a),a=this.consumeCodePoint();var l=parseInt(Ln.apply(void 0,u),16);return{type:30,start:A,end:l}}else return{type:30,start:A,end:A}},t.prototype.consumeIdentLikeToken=function(){var s=this.consumeName();return s.toLowerCase()==="url"&&this.peekCodePoint(0)===Hh?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===Hh?(this.consumeCodePoint(),{type:19,value:s}):{type:20,value:s}},t.prototype.consumeUrlToken=function(){var s=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===Do)return{type:22,value:""};var a=this.peekCodePoint(0);if(a===Ih||a===Dh){var r=this.consumeStringToken(this.consumeCodePoint());return r.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===Do||this.peekCodePoint(0)===Id)?(this.consumeCodePoint(),{type:22,value:r.value}):(this.consumeBadUrlRemnants(),zh)}for(;;){var o=this.consumeCodePoint();if(o===Do||o===Id)return{type:22,value:Ln.apply(void 0,s)};if(Oh(o))return this.consumeWhiteSpace(),this.peekCodePoint(0)===Do||this.peekCodePoint(0)===Id?(this.consumeCodePoint(),{type:22,value:Ln.apply(void 0,s)}):(this.consumeBadUrlRemnants(),zh);if(o===Dh||o===Ih||o===Hh||b4(o))return this.consumeBadUrlRemnants(),zh;if(o===Jd)if(tc(o,this.peekCodePoint(0)))s.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),zh;else s.push(o)}},t.prototype.consumeWhiteSpace=function(){for(;Oh(this.peekCodePoint(0));)this.consumeCodePoint()},t.prototype.consumeBadUrlRemnants=function(){for(;;){var s=this.consumeCodePoint();if(s===Id||s===Do)return;tc(s,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},t.prototype.consumeStringSlice=function(s){for(var a=5e4,r="";s>0;){var o=Math.min(a,s);r+=Ln.apply(void 0,this._value.splice(0,o)),s-=o}return this._value.shift(),r},t.prototype.consumeStringToken=function(s){var a="",r=0;do{var o=this._value[r];if(o===Do||o===void 0||o===s)return a+=this.consumeStringSlice(r),{type:0,value:a};if(o===Ap)return this._value.splice(0,r),Q4;if(o===Jd){var l=this._value[r+1];l!==Do&&l!==void 0&&(l===Ap?(a+=this.consumeStringSlice(r),r=-1,this._value.shift()):tc(o,l)&&(a+=this.consumeStringSlice(r),a+=Ln(this.consumeEscapedCodePoint()),r=-1))}r++}while(!0)},t.prototype.consumeNumber=function(){var s=[],a=gu,r=this.peekCodePoint(0);for((r===Rc||r===oi)&&s.push(this.consumeCodePoint());Lr(this.peekCodePoint(0));)s.push(this.consumeCodePoint());r=this.peekCodePoint(0);var o=this.peekCodePoint(1);if(r===lu&&Lr(o))for(s.push(this.consumeCodePoint(),this.consumeCodePoint()),a=Ov;Lr(this.peekCodePoint(0));)s.push(this.consumeCodePoint());r=this.peekCodePoint(0),o=this.peekCodePoint(1);var l=this.peekCodePoint(2);if((r===iw||r===nw)&&((o===Rc||o===oi)&&Lr(l)||Lr(o)))for(s.push(this.consumeCodePoint(),this.consumeCodePoint()),a=Ov;Lr(this.peekCodePoint(0));)s.push(this.consumeCodePoint());return[w4(s),a]},t.prototype.consumeNumericToken=function(){var s=this.consumeNumber(),a=s[0],r=s[1],o=this.peekCodePoint(0),l=this.peekCodePoint(1),A=this.peekCodePoint(2);if(Mh(o,l,A)){var u=this.consumeName();return{type:15,number:a,flags:r,unit:u}}return o===zC?(this.consumeCodePoint(),{type:16,number:a,flags:r}):{type:17,number:a,flags:r}},t.prototype.consumeEscapedCodePoint=function(){var s=this.consumeCodePoint();if(kA(s)){for(var a=Ln(s);kA(this.peekCodePoint(0))&&a.length<6;)a+=Ln(this.consumeCodePoint());Oh(this.peekCodePoint(0))&&this.consumeCodePoint();var r=parseInt(a,16);return r===0||m4(r)||r>1114111?qv:r}return s===Do?qv:s},t.prototype.consumeName=function(){for(var s="";;){var a=this.consumeCodePoint();if(Kv(a))s+=Ln(a);else if(tc(a,this.peekCodePoint(0)))s+=Ln(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(a),s}},t}(),cw=function(){function t(s){this._tokens=s}return t.create=function(s){var a=new lw;return a.write(s),new t(a.read())},t.parseValue=function(s){return t.create(s).parseComponentValue()},t.parseValues=function(s){return t.create(s).parseComponentValues()},t.prototype.parseComponentValue=function(){for(var s=this.consumeToken();s.type===31;)s=this.consumeToken();if(s.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(s);var a=this.consumeComponentValue();do s=this.consumeToken();while(s.type===31);if(s.type===32)return a;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},t.prototype.parseComponentValues=function(){for(var s=[];;){var a=this.consumeComponentValue();if(a.type===32)return s;s.push(a),s.push()}},t.prototype.consumeComponentValue=function(){var s=this.consumeToken();switch(s.type){case 11:case 28:case 2:return this.consumeSimpleBlock(s.type);case 19:return this.consumeFunction(s)}return s},t.prototype.consumeSimpleBlock=function(s){for(var a={type:s,values:[]},r=this.consumeToken();;){if(r.type===32||z4(r,s))return a;this.reconsumeToken(r),a.values.push(this.consumeComponentValue()),r=this.consumeToken()}},t.prototype.consumeFunction=function(s){for(var a={name:s.value,values:[],type:18};;){var r=this.consumeToken();if(r.type===32||r.type===3)return a;this.reconsumeToken(r),a.values.push(this.consumeComponentValue())}},t.prototype.consumeToken=function(){var s=this._tokens.shift();return typeof s>"u"?vg:s},t.prototype.reconsumeToken=function(s){this._tokens.unshift(s)},t}(),xu=function(t){return t.type===15},qA=function(t){return t.type===17},La=function(t){return t.type===20},M4=function(t){return t.type===0},bg=function(t,s){return La(t)&&t.value===s},Aw=function(t){return t.type!==31},HA=function(t){return t.type!==31&&t.type!==4},Ko=function(t){var s=[],a=[];return t.forEach(function(r){if(r.type===4){if(a.length===0)throw new Error("Error parsing function args, zero tokens for arg");s.push(a),a=[];return}r.type!==31&&a.push(r)}),a.length&&s.push(a),s},z4=function(t,s){return s===11&&t.type===12||s===28&&t.type===29?!0:s===2&&t.type===3},dc=function(t){return t.type===17||t.type===15},Mn=function(t){return t.type===16||dc(t)},dw=function(t){return t.length>1?[t[0],t[1]]:[t[0]]},br={type:17,number:0,flags:gu},$g={type:16,number:50,flags:gu},rc={type:16,number:100,flags:gu},zd=function(t,s,a){var r=t[0],o=t[1];return[Ga(r,s),Ga(typeof o<"u"?o:r,a)]},Ga=function(t,s){if(t.type===16)return t.number/100*s;if(xu(t))switch(t.unit){case"rem":case"em":return 16*t.number;case"px":default:return t.number}return t.number},uw="deg",hw="grad",pw="rad",fw="turn",Up={name:"angle",parse:function(t,s){if(s.type===15)switch(s.unit){case uw:return Math.PI*s.number/180;case hw:return Math.PI/200*s.number;case pw:return s.number;case fw:return Math.PI*2*s.number}throw new Error("Unsupported angle type")}},mw=function(t){return t.type===15&&(t.unit===uw||t.unit===hw||t.unit===pw||t.unit===fw)},gw=function(t){var s=t.filter(La).map(function(a){return a.value}).join(" ");switch(s){case"to bottom right":case"to right bottom":case"left top":case"top left":return[br,br];case"to top":case"bottom":return $i(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[br,rc];case"to right":case"left":return $i(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[rc,rc];case"to bottom":case"top":return $i(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[rc,br];case"to left":case"right":return $i(270)}return 0},$i=function(t){return Math.PI*t/180},lc={name:"color",parse:function(t,s){if(s.type===18){var a=q4[s.name];if(typeof a>"u")throw new Error('Attempting to parse an unsupported color function "'+s.name+'"');return a(t,s.values)}if(s.type===5){if(s.value.length===3){var r=s.value.substring(0,1),o=s.value.substring(1,2),l=s.value.substring(2,3);return ic(parseInt(r+r,16),parseInt(o+o,16),parseInt(l+l,16),1)}if(s.value.length===4){var r=s.value.substring(0,1),o=s.value.substring(1,2),l=s.value.substring(2,3),A=s.value.substring(3,4);return ic(parseInt(r+r,16),parseInt(o+o,16),parseInt(l+l,16),parseInt(A+A,16)/255)}if(s.value.length===6){var r=s.value.substring(0,2),o=s.value.substring(2,4),l=s.value.substring(4,6);return ic(parseInt(r,16),parseInt(o,16),parseInt(l,16),1)}if(s.value.length===8){var r=s.value.substring(0,2),o=s.value.substring(2,4),l=s.value.substring(4,6),A=s.value.substring(6,8);return ic(parseInt(r,16),parseInt(o,16),parseInt(l,16),parseInt(A,16)/255)}}if(s.type===20){var u=yl[s.value.toUpperCase()];if(typeof u<"u")return u}return yl.TRANSPARENT}},cc=function(t){return(255&t)===0},cr=function(t){var s=255&t,a=255&t>>8,r=255&t>>16,o=255&t>>24;return s<255?"rgba("+o+","+r+","+a+","+s/255+")":"rgb("+o+","+r+","+a+")"},ic=function(t,s,a,r){return(t<<24|s<<16|a<<8|Math.round(r*255)<<0)>>>0},Gv=function(t,s){if(t.type===17)return t.number;if(t.type===16){var a=s===3?1:255;return s===3?t.number/100*a:Math.round(t.number/100*a)}return 0},Vv=function(t,s){var a=s.filter(HA);if(a.length===3){var r=a.map(Gv),o=r[0],l=r[1],A=r[2];return ic(o,l,A,1)}if(a.length===4){var u=a.map(Gv),o=u[0],l=u[1],A=u[2],h=u[3];return ic(o,l,A,h)}return 0};function Um(t,s,a){return a<0&&(a+=1),a>=1&&(a-=1),a<1/6?(s-t)*a*6+t:a<1/2?s:a<2/3?(s-t)*6*(2/3-a)+t:t}var $v=function(t,s){var a=s.filter(HA),r=a[0],o=a[1],l=a[2],A=a[3],u=(r.type===17?$i(r.number):Up.parse(t,r))/(Math.PI*2),h=Mn(o)?o.number/100:0,p=Mn(l)?l.number/100:0,m=typeof A<"u"&&Mn(A)?Ga(A,1):1;if(h===0)return ic(p*255,p*255,p*255,1);var v=p<=.5?p*(h+1):p+h-p*h,b=p*2-v,x=Um(b,v,u+1/3),C=Um(b,v,u),Q=Um(b,v,u-1/3);return ic(x*255,C*255,Q*255,m)},q4={hsl:$v,hsla:$v,rgb:Vv,rgba:Vv},Zd=function(t,s){return lc.parse(t,cw.create(s).parseComponentValue())},yl={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},K4={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(t,s){return s.map(function(a){if(La(a))switch(a.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},G4={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Ep=function(t,s){var a=lc.parse(t,s[0]),r=s[1];return r&&Mn(r)?{color:a,stop:r}:{color:a,stop:null}},Wv=function(t,s){var a=t[0],r=t[t.length-1];a.stop===null&&(a.stop=br),r.stop===null&&(r.stop=rc);for(var o=[],l=0,A=0;A<t.length;A++){var u=t[A].stop;if(u!==null){var h=Ga(u,s);h>l?o.push(h):o.push(l),l=h}else o.push(null)}for(var p=null,A=0;A<o.length;A++){var m=o[A];if(m===null)p===null&&(p=A);else if(p!==null){for(var v=A-p,b=o[p-1],x=(m-b)/(v+1),C=1;C<=v;C++)o[p+C-1]=x*C;p=null}}return t.map(function(Q,j){var B=Q.color;return{color:B,stop:Math.max(Math.min(1,o[j]/s),0)}})},V4=function(t,s,a){var r=s/2,o=a/2,l=Ga(t[0],s)-r,A=o-Ga(t[1],a);return(Math.atan2(A,l)+Math.PI*2)%(Math.PI*2)},$4=function(t,s,a){var r=typeof t=="number"?t:V4(t,s,a),o=Math.abs(s*Math.sin(r))+Math.abs(a*Math.cos(r)),l=s/2,A=a/2,u=o/2,h=Math.sin(r-Math.PI/2)*u,p=Math.cos(r-Math.PI/2)*u;return[o,l-p,l+p,A-h,A+h]},go=function(t,s){return Math.sqrt(t*t+s*s)},Yv=function(t,s,a,r,o){var l=[[0,0],[0,s],[t,0],[t,s]];return l.reduce(function(A,u){var h=u[0],p=u[1],m=go(a-h,r-p);return(o?m<A.optimumDistance:m>A.optimumDistance)?{optimumCorner:u,optimumDistance:m}:A},{optimumDistance:o?1/0:-1/0,optimumCorner:null}).optimumCorner},W4=function(t,s,a,r,o){var l=0,A=0;switch(t.size){case 0:t.shape===0?l=A=Math.min(Math.abs(s),Math.abs(s-r),Math.abs(a),Math.abs(a-o)):t.shape===1&&(l=Math.min(Math.abs(s),Math.abs(s-r)),A=Math.min(Math.abs(a),Math.abs(a-o)));break;case 2:if(t.shape===0)l=A=Math.min(go(s,a),go(s,a-o),go(s-r,a),go(s-r,a-o));else if(t.shape===1){var u=Math.min(Math.abs(a),Math.abs(a-o))/Math.min(Math.abs(s),Math.abs(s-r)),h=Yv(r,o,s,a,!0),p=h[0],m=h[1];l=go(p-s,(m-a)/u),A=u*l}break;case 1:t.shape===0?l=A=Math.max(Math.abs(s),Math.abs(s-r),Math.abs(a),Math.abs(a-o)):t.shape===1&&(l=Math.max(Math.abs(s),Math.abs(s-r)),A=Math.max(Math.abs(a),Math.abs(a-o)));break;case 3:if(t.shape===0)l=A=Math.max(go(s,a),go(s,a-o),go(s-r,a),go(s-r,a-o));else if(t.shape===1){var u=Math.max(Math.abs(a),Math.abs(a-o))/Math.max(Math.abs(s),Math.abs(s-r)),v=Yv(r,o,s,a,!1),p=v[0],m=v[1];l=go(p-s,(m-a)/u),A=u*l}break}return Array.isArray(t.size)&&(l=Ga(t.size[0],r),A=t.size.length===2?Ga(t.size[1],o):l),[l,A]},Y4=function(t,s){var a=$i(180),r=[];return Ko(s).forEach(function(o,l){if(l===0){var A=o[0];if(A.type===20&&A.value==="to"){a=gw(o);return}else if(mw(A)){a=Up.parse(t,A);return}}var u=Ep(t,o);r.push(u)}),{angle:a,stops:r,type:1}},qh=function(t,s){var a=$i(180),r=[];return Ko(s).forEach(function(o,l){if(l===0){var A=o[0];if(A.type===20&&["top","left","right","bottom"].indexOf(A.value)!==-1){a=gw(o);return}else if(mw(A)){a=(Up.parse(t,A)+$i(270))%$i(360);return}}var u=Ep(t,o);r.push(u)}),{angle:a,stops:r,type:1}},X4=function(t,s){var a=$i(180),r=[],o=1,l=0,A=3,u=[];return Ko(s).forEach(function(h,p){var m=h[0];if(p===0){if(La(m)&&m.value==="linear"){o=1;return}else if(La(m)&&m.value==="radial"){o=2;return}}if(m.type===18){if(m.name==="from"){var v=lc.parse(t,m.values[0]);r.push({stop:br,color:v})}else if(m.name==="to"){var v=lc.parse(t,m.values[0]);r.push({stop:rc,color:v})}else if(m.name==="color-stop"){var b=m.values.filter(HA);if(b.length===2){var v=lc.parse(t,b[1]),x=b[0];qA(x)&&r.push({stop:{type:16,number:x.number*100,flags:x.flags},color:v})}}}}),o===1?{angle:(a+$i(180))%$i(360),stops:r,type:o}:{size:A,shape:l,stops:r,position:u,type:o}},xw="closest-side",yw="farthest-side",vw="closest-corner",bw="farthest-corner",ww="circle",jw="ellipse",_w="cover",Bw="contain",J4=function(t,s){var a=0,r=3,o=[],l=[];return Ko(s).forEach(function(A,u){var h=!0;if(u===0){var p=!1;h=A.reduce(function(v,b){if(p)if(La(b))switch(b.value){case"center":return l.push($g),v;case"top":case"left":return l.push(br),v;case"right":case"bottom":return l.push(rc),v}else(Mn(b)||dc(b))&&l.push(b);else if(La(b))switch(b.value){case ww:return a=0,!1;case jw:return a=1,!1;case"at":return p=!0,!1;case xw:return r=0,!1;case _w:case yw:return r=1,!1;case Bw:case vw:return r=2,!1;case bw:return r=3,!1}else if(dc(b)||Mn(b))return Array.isArray(r)||(r=[]),r.push(b),!1;return v},h)}if(h){var m=Ep(t,A);o.push(m)}}),{size:r,shape:a,stops:o,position:l,type:2}},Kh=function(t,s){var a=0,r=3,o=[],l=[];return Ko(s).forEach(function(A,u){var h=!0;if(u===0?h=A.reduce(function(m,v){if(La(v))switch(v.value){case"center":return l.push($g),!1;case"top":case"left":return l.push(br),!1;case"right":case"bottom":return l.push(rc),!1}else if(Mn(v)||dc(v))return l.push(v),!1;return m},h):u===1&&(h=A.reduce(function(m,v){if(La(v))switch(v.value){case ww:return a=0,!1;case jw:return a=1,!1;case Bw:case xw:return r=0,!1;case yw:return r=1,!1;case vw:return r=2,!1;case _w:case bw:return r=3,!1}else if(dc(v)||Mn(v))return Array.isArray(r)||(r=[]),r.push(v),!1;return m},h)),h){var p=Ep(t,A);o.push(p)}}),{size:r,shape:a,stops:o,position:l,type:2}},Z4=function(t){return t.type===1},eS=function(t){return t.type===2},Wg={name:"image",parse:function(t,s){if(s.type===22){var a={url:s.value,type:0};return t.cache.addImage(s.value),a}if(s.type===18){var r=Nw[s.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported image function "'+s.name+'"');return r(t,s.values)}throw new Error("Unsupported image type "+s.type)}};function tS(t){return!(t.type===20&&t.value==="none")&&(t.type!==18||!!Nw[t.name])}var Nw={"linear-gradient":Y4,"-moz-linear-gradient":qh,"-ms-linear-gradient":qh,"-o-linear-gradient":qh,"-webkit-linear-gradient":qh,"radial-gradient":J4,"-moz-radial-gradient":Kh,"-ms-radial-gradient":Kh,"-o-radial-gradient":Kh,"-webkit-radial-gradient":Kh,"-webkit-gradient":X4},sS={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(t,s){if(s.length===0)return[];var a=s[0];return a.type===20&&a.value==="none"?[]:s.filter(function(r){return HA(r)&&tS(r)}).map(function(r){return Wg.parse(t,r)})}},aS={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(t,s){return s.map(function(a){if(La(a))switch(a.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},nS={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(t,s){return Ko(s).map(function(a){return a.filter(Mn)}).map(dw)}},rS={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(t,s){return Ko(s).map(function(a){return a.filter(La).map(function(r){return r.value}).join(" ")}).map(iS)}},iS=function(t){switch(t){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},IA;(function(t){t.AUTO="auto",t.CONTAIN="contain",t.COVER="cover"})(IA||(IA={}));var oS={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(t,s){return Ko(s).map(function(a){return a.filter(lS)})}},lS=function(t){return La(t)||Mn(t)},Lp=function(t){return{name:"border-"+t+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},cS=Lp("top"),AS=Lp("right"),dS=Lp("bottom"),uS=Lp("left"),Qp=function(t){return{name:"border-radius-"+t,initialValue:"0 0",prefix:!1,type:1,parse:function(s,a){return dw(a.filter(Mn))}}},hS=Qp("top-left"),pS=Qp("top-right"),fS=Qp("bottom-right"),mS=Qp("bottom-left"),Tp=function(t){return{name:"border-"+t+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(s,a){switch(a){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},gS=Tp("top"),xS=Tp("right"),yS=Tp("bottom"),vS=Tp("left"),Rp=function(t){return{name:"border-"+t+"-width",initialValue:"0",type:0,prefix:!1,parse:function(s,a){return xu(a)?a.number:0}}},bS=Rp("top"),wS=Rp("right"),jS=Rp("bottom"),_S=Rp("left"),BS={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},NS={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(t,s){switch(s){case"rtl":return 1;case"ltr":default:return 0}}},CS={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(t,s){return s.filter(La).reduce(function(a,r){return a|SS(r.value)},0)}},SS=function(t){switch(t){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},kS={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(t,s){switch(s){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},FS={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(t,s){return s.type===20&&s.value==="normal"?0:s.type===17||s.type===15?s.number:0}},up;(function(t){t.NORMAL="normal",t.STRICT="strict"})(up||(up={}));var US={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(t,s){switch(s){case"strict":return up.STRICT;case"normal":default:return up.NORMAL}}},ES={name:"line-height",initialValue:"normal",prefix:!1,type:4},Xv=function(t,s){return La(t)&&t.value==="normal"?1.2*s:t.type===17?s*t.number:Mn(t)?Ga(t,s):s},LS={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(t,s){return s.type===20&&s.value==="none"?null:Wg.parse(t,s)}},QS={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(t,s){switch(s){case"inside":return 0;case"outside":default:return 1}}},wg={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(t,s){switch(s){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},Dp=function(t){return{name:"margin-"+t,initialValue:"0",prefix:!1,type:4}},TS=Dp("top"),RS=Dp("right"),DS=Dp("bottom"),IS=Dp("left"),HS={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(t,s){return s.filter(La).map(function(a){switch(a.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},PS={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(t,s){switch(s){case"break-word":return"break-word";case"normal":default:return"normal"}}},Ip=function(t){return{name:"padding-"+t,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},OS=Ip("top"),MS=Ip("right"),zS=Ip("bottom"),qS=Ip("left"),KS={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(t,s){switch(s){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},GS={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(t,s){switch(s){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},VS={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,s){return s.length===1&&bg(s[0],"none")?[]:Ko(s).map(function(a){for(var r={color:yl.TRANSPARENT,offsetX:br,offsetY:br,blur:br},o=0,l=0;l<a.length;l++){var A=a[l];dc(A)?(o===0?r.offsetX=A:o===1?r.offsetY=A:r.blur=A,o++):r.color=lc.parse(t,A)}return r})}},$S={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(t,s){switch(s){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},WS={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(t,s){if(s.type===20&&s.value==="none")return null;if(s.type===18){var a=JS[s.name];if(typeof a>"u")throw new Error('Attempting to parse an unsupported transform function "'+s.name+'"');return a(s.values)}return null}},YS=function(t){var s=t.filter(function(a){return a.type===17}).map(function(a){return a.number});return s.length===6?s:null},XS=function(t){var s=t.filter(function(h){return h.type===17}).map(function(h){return h.number}),a=s[0],r=s[1];s[2],s[3];var o=s[4],l=s[5];s[6],s[7],s[8],s[9],s[10],s[11];var A=s[12],u=s[13];return s[14],s[15],s.length===16?[a,r,o,l,A,u]:null},JS={matrix:YS,matrix3d:XS},Jv={type:16,number:50,flags:gu},ZS=[Jv,Jv],e3={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(t,s){var a=s.filter(Mn);return a.length!==2?ZS:[a[0],a[1]]}},t3={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(t,s){switch(s){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},eu;(function(t){t.NORMAL="normal",t.BREAK_ALL="break-all",t.KEEP_ALL="keep-all"})(eu||(eu={}));var s3={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(t,s){switch(s){case"break-all":return eu.BREAK_ALL;case"keep-all":return eu.KEEP_ALL;case"normal":default:return eu.NORMAL}}},a3={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(t,s){if(s.type===20)return{auto:!0,order:0};if(qA(s))return{auto:!1,order:s.number};throw new Error("Invalid z-index number parsed")}},Cw={name:"time",parse:function(t,s){if(s.type===15)switch(s.unit.toLowerCase()){case"s":return 1e3*s.number;case"ms":return s.number}throw new Error("Unsupported time type")}},n3={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(t,s){return qA(s)?s.number:1}},r3={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},i3={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(t,s){return s.filter(La).map(function(a){switch(a.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(a){return a!==0})}},o3={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(t,s){var a=[],r=[];return s.forEach(function(o){switch(o.type){case 20:case 0:a.push(o.value);break;case 17:a.push(o.number.toString());break;case 4:r.push(a.join(" ")),a.length=0;break}}),a.length&&r.push(a.join(" ")),r.map(function(o){return o.indexOf(" ")===-1?o:"'"+o+"'"})}},l3={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},c3={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(t,s){if(qA(s))return s.number;if(La(s))switch(s.value){case"bold":return 700;case"normal":default:return 400}return 400}},A3={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(t,s){return s.filter(La).map(function(a){return a.value})}},d3={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(t,s){switch(s){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},Yn=function(t,s){return(t&s)!==0},u3={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(t,s){if(s.length===0)return[];var a=s[0];return a.type===20&&a.value==="none"?[]:s}},h3={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(t,s){if(s.length===0)return null;var a=s[0];if(a.type===20&&a.value==="none")return null;for(var r=[],o=s.filter(Aw),l=0;l<o.length;l++){var A=o[l],u=o[l+1];if(A.type===20){var h=u&&qA(u)?u.number:1;r.push({counter:A.value,increment:h})}}return r}},p3={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(t,s){if(s.length===0)return[];for(var a=[],r=s.filter(Aw),o=0;o<r.length;o++){var l=r[o],A=r[o+1];if(La(l)&&l.value!=="none"){var u=A&&qA(A)?A.number:0;a.push({counter:l.value,reset:u})}}return a}},f3={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(t,s){return s.filter(xu).map(function(a){return Cw.parse(t,a)})}},m3={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(t,s){if(s.length===0)return null;var a=s[0];if(a.type===20&&a.value==="none")return null;var r=[],o=s.filter(M4);if(o.length%2!==0)return null;for(var l=0;l<o.length;l+=2){var A=o[l].value,u=o[l+1].value;r.push({open:A,close:u})}return r}},Zv=function(t,s,a){if(!t)return"";var r=t[Math.min(s,t.length-1)];return r?a?r.open:r.close:""},g3={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,s){return s.length===1&&bg(s[0],"none")?[]:Ko(s).map(function(a){for(var r={color:255,offsetX:br,offsetY:br,blur:br,spread:br,inset:!1},o=0,l=0;l<a.length;l++){var A=a[l];bg(A,"inset")?r.inset=!0:dc(A)?(o===0?r.offsetX=A:o===1?r.offsetY=A:o===2?r.blur=A:r.spread=A,o++):r.color=lc.parse(t,A)}return r})}},x3={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(t,s){var a=[0,1,2],r=[];return s.filter(La).forEach(function(o){switch(o.value){case"stroke":r.push(1);break;case"fill":r.push(0);break;case"markers":r.push(2);break}}),a.forEach(function(o){r.indexOf(o)===-1&&r.push(o)}),r}},y3={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},v3={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(t,s){return xu(s)?s.number:0}},b3=function(){function t(s,a){var r,o;this.animationDuration=ts(s,f3,a.animationDuration),this.backgroundClip=ts(s,K4,a.backgroundClip),this.backgroundColor=ts(s,G4,a.backgroundColor),this.backgroundImage=ts(s,sS,a.backgroundImage),this.backgroundOrigin=ts(s,aS,a.backgroundOrigin),this.backgroundPosition=ts(s,nS,a.backgroundPosition),this.backgroundRepeat=ts(s,rS,a.backgroundRepeat),this.backgroundSize=ts(s,oS,a.backgroundSize),this.borderTopColor=ts(s,cS,a.borderTopColor),this.borderRightColor=ts(s,AS,a.borderRightColor),this.borderBottomColor=ts(s,dS,a.borderBottomColor),this.borderLeftColor=ts(s,uS,a.borderLeftColor),this.borderTopLeftRadius=ts(s,hS,a.borderTopLeftRadius),this.borderTopRightRadius=ts(s,pS,a.borderTopRightRadius),this.borderBottomRightRadius=ts(s,fS,a.borderBottomRightRadius),this.borderBottomLeftRadius=ts(s,mS,a.borderBottomLeftRadius),this.borderTopStyle=ts(s,gS,a.borderTopStyle),this.borderRightStyle=ts(s,xS,a.borderRightStyle),this.borderBottomStyle=ts(s,yS,a.borderBottomStyle),this.borderLeftStyle=ts(s,vS,a.borderLeftStyle),this.borderTopWidth=ts(s,bS,a.borderTopWidth),this.borderRightWidth=ts(s,wS,a.borderRightWidth),this.borderBottomWidth=ts(s,jS,a.borderBottomWidth),this.borderLeftWidth=ts(s,_S,a.borderLeftWidth),this.boxShadow=ts(s,g3,a.boxShadow),this.color=ts(s,BS,a.color),this.direction=ts(s,NS,a.direction),this.display=ts(s,CS,a.display),this.float=ts(s,kS,a.cssFloat),this.fontFamily=ts(s,o3,a.fontFamily),this.fontSize=ts(s,l3,a.fontSize),this.fontStyle=ts(s,d3,a.fontStyle),this.fontVariant=ts(s,A3,a.fontVariant),this.fontWeight=ts(s,c3,a.fontWeight),this.letterSpacing=ts(s,FS,a.letterSpacing),this.lineBreak=ts(s,US,a.lineBreak),this.lineHeight=ts(s,ES,a.lineHeight),this.listStyleImage=ts(s,LS,a.listStyleImage),this.listStylePosition=ts(s,QS,a.listStylePosition),this.listStyleType=ts(s,wg,a.listStyleType),this.marginTop=ts(s,TS,a.marginTop),this.marginRight=ts(s,RS,a.marginRight),this.marginBottom=ts(s,DS,a.marginBottom),this.marginLeft=ts(s,IS,a.marginLeft),this.opacity=ts(s,n3,a.opacity);var l=ts(s,HS,a.overflow);this.overflowX=l[0],this.overflowY=l[l.length>1?1:0],this.overflowWrap=ts(s,PS,a.overflowWrap),this.paddingTop=ts(s,OS,a.paddingTop),this.paddingRight=ts(s,MS,a.paddingRight),this.paddingBottom=ts(s,zS,a.paddingBottom),this.paddingLeft=ts(s,qS,a.paddingLeft),this.paintOrder=ts(s,x3,a.paintOrder),this.position=ts(s,GS,a.position),this.textAlign=ts(s,KS,a.textAlign),this.textDecorationColor=ts(s,r3,(r=a.textDecorationColor)!==null&&r!==void 0?r:a.color),this.textDecorationLine=ts(s,i3,(o=a.textDecorationLine)!==null&&o!==void 0?o:a.textDecoration),this.textShadow=ts(s,VS,a.textShadow),this.textTransform=ts(s,$S,a.textTransform),this.transform=ts(s,WS,a.transform),this.transformOrigin=ts(s,e3,a.transformOrigin),this.visibility=ts(s,t3,a.visibility),this.webkitTextStrokeColor=ts(s,y3,a.webkitTextStrokeColor),this.webkitTextStrokeWidth=ts(s,v3,a.webkitTextStrokeWidth),this.wordBreak=ts(s,s3,a.wordBreak),this.zIndex=ts(s,a3,a.zIndex)}return t.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},t.prototype.isTransparent=function(){return cc(this.backgroundColor)},t.prototype.isTransformed=function(){return this.transform!==null},t.prototype.isPositioned=function(){return this.position!==0},t.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},t.prototype.isFloating=function(){return this.float!==0},t.prototype.isInlineLevel=function(){return Yn(this.display,4)||Yn(this.display,33554432)||Yn(this.display,268435456)||Yn(this.display,536870912)||Yn(this.display,67108864)||Yn(this.display,134217728)},t}(),w3=function(){function t(s,a){this.content=ts(s,u3,a.content),this.quotes=ts(s,m3,a.quotes)}return t}(),eb=function(){function t(s,a){this.counterIncrement=ts(s,h3,a.counterIncrement),this.counterReset=ts(s,p3,a.counterReset)}return t}(),ts=function(t,s,a){var r=new lw,o=a!==null&&typeof a<"u"?a.toString():s.initialValue;r.write(o);var l=new cw(r.read());switch(s.type){case 2:var A=l.parseComponentValue();return s.parse(t,La(A)?A.value:s.initialValue);case 0:return s.parse(t,l.parseComponentValue());case 1:return s.parse(t,l.parseComponentValues());case 4:return l.parseComponentValue();case 3:switch(s.format){case"angle":return Up.parse(t,l.parseComponentValue());case"color":return lc.parse(t,l.parseComponentValue());case"image":return Wg.parse(t,l.parseComponentValue());case"length":var u=l.parseComponentValue();return dc(u)?u:br;case"length-percentage":var h=l.parseComponentValue();return Mn(h)?h:br;case"time":return Cw.parse(t,l.parseComponentValue())}break}},j3="data-html2canvas-debug",_3=function(t){var s=t.getAttribute(j3);switch(s){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},jg=function(t,s){var a=_3(t);return a===1||s===a},Go=function(){function t(s,a){if(this.context=s,this.textNodes=[],this.elements=[],this.flags=0,jg(a,3))debugger;this.styles=new b3(s,window.getComputedStyle(a,null)),Ng(a)&&(this.styles.animationDuration.some(function(r){return r>0})&&(a.style.animationDuration="0s"),this.styles.transform!==null&&(a.style.transform="none")),this.bounds=kp(this.context,a),jg(a,4)&&(this.flags|=16)}return t}(),B3="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",tb="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",qd=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Gh=0;Gh<tb.length;Gh++)qd[tb.charCodeAt(Gh)]=Gh;var N3=function(t){var s=t.length*.75,a=t.length,r,o=0,l,A,u,h;t[t.length-1]==="="&&(s--,t[t.length-2]==="="&&s--);var p=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(s):new Array(s),m=Array.isArray(p)?p:new Uint8Array(p);for(r=0;r<a;r+=4)l=qd[t.charCodeAt(r)],A=qd[t.charCodeAt(r+1)],u=qd[t.charCodeAt(r+2)],h=qd[t.charCodeAt(r+3)],m[o++]=l<<2|A>>4,m[o++]=(A&15)<<4|u>>2,m[o++]=(u&3)<<6|h&63;return p},C3=function(t){for(var s=t.length,a=[],r=0;r<s;r+=2)a.push(t[r+1]<<8|t[r]);return a},S3=function(t){for(var s=t.length,a=[],r=0;r<s;r+=4)a.push(t[r+3]<<24|t[r+2]<<16|t[r+1]<<8|t[r]);return a},Mc=5,Yg=11,Em=2,k3=Yg-Mc,Sw=65536>>Mc,F3=1<<Mc,Lm=F3-1,U3=1024>>Mc,E3=Sw+U3,L3=E3,Q3=32,T3=L3+Q3,R3=65536>>Yg,D3=1<<k3,I3=D3-1,sb=function(t,s,a){return t.slice?t.slice(s,a):new Uint16Array(Array.prototype.slice.call(t,s,a))},H3=function(t,s,a){return t.slice?t.slice(s,a):new Uint32Array(Array.prototype.slice.call(t,s,a))},P3=function(t,s){var a=N3(t),r=Array.isArray(a)?S3(a):new Uint32Array(a),o=Array.isArray(a)?C3(a):new Uint16Array(a),l=24,A=sb(o,l/2,r[4]/2),u=r[5]===2?sb(o,(l+r[4])/2):H3(r,Math.ceil((l+r[4])/4));return new O3(r[0],r[1],r[2],r[3],A,u)},O3=function(){function t(s,a,r,o,l,A){this.initialValue=s,this.errorValue=a,this.highStart=r,this.highValueIndex=o,this.index=l,this.data=A}return t.prototype.get=function(s){var a;if(s>=0){if(s<55296||s>56319&&s<=65535)return a=this.index[s>>Mc],a=(a<<Em)+(s&Lm),this.data[a];if(s<=65535)return a=this.index[Sw+(s-55296>>Mc)],a=(a<<Em)+(s&Lm),this.data[a];if(s<this.highStart)return a=T3-R3+(s>>Yg),a=this.index[a],a+=s>>Mc&I3,a=this.index[a],a=(a<<Em)+(s&Lm),this.data[a];if(s<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t}(),ab="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",M3=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Vh=0;Vh<ab.length;Vh++)M3[ab.charCodeAt(Vh)]=Vh;var z3=1,Qm=2,Tm=3,nb=4,rb=5,q3=7,ib=8,Rm=9,Dm=10,ob=11,lb=12,cb=13,Ab=14,Im=15,K3=function(t){for(var s=[],a=0,r=t.length;a<r;){var o=t.charCodeAt(a++);if(o>=55296&&o<=56319&&a<r){var l=t.charCodeAt(a++);(l&64512)===56320?s.push(((o&1023)<<10)+(l&1023)+65536):(s.push(o),a--)}else s.push(o)}return s},G3=function(){for(var t=[],s=0;s<arguments.length;s++)t[s]=arguments[s];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var a=t.length;if(!a)return"";for(var r=[],o=-1,l="";++o<a;){var A=t[o];A<=65535?r.push(A):(A-=65536,r.push((A>>10)+55296,A%1024+56320)),(o+1===a||r.length>16384)&&(l+=String.fromCharCode.apply(String,r),r.length=0)}return l},V3=P3(B3),Gi="",Hm="",$3=function(t){return V3.get(t)},W3=function(t,s,a){var r=a-2,o=s[r],l=s[a-1],A=s[a];if(l===Qm&&A===Tm)return Gi;if(l===Qm||l===Tm||l===nb||A===Qm||A===Tm||A===nb)return Hm;if(l===ib&&[ib,Rm,ob,lb].indexOf(A)!==-1||(l===ob||l===Rm)&&(A===Rm||A===Dm)||(l===lb||l===Dm)&&A===Dm||A===cb||A===rb||A===q3||l===z3)return Gi;if(l===cb&&A===Ab){for(;o===rb;)o=s[--r];if(o===Ab)return Gi}if(l===Im&&A===Im){for(var u=0;o===Im;)u++,o=s[--r];if(u%2===0)return Gi}return Hm},Y3=function(t){var s=K3(t),a=s.length,r=0,o=0,l=s.map($3);return{next:function(){if(r>=a)return{done:!0,value:null};for(var A=Gi;r<a&&(A=W3(s,l,++r))===Gi;);if(A!==Gi||r===a){var u=G3.apply(null,s.slice(o,r));return o=r,{value:u,done:!1}}return{done:!0,value:null}}}},X3=function(t){for(var s=Y3(t),a=[],r;!(r=s.next()).done;)r.value&&a.push(r.value.slice());return a},J3=function(t){var s=123;if(t.createRange){var a=t.createRange();if(a.getBoundingClientRect){var r=t.createElement("boundtest");r.style.height=s+"px",r.style.display="block",t.body.appendChild(r),a.selectNode(r);var o=a.getBoundingClientRect(),l=Math.round(o.height);if(t.body.removeChild(r),l===s)return!0}}return!1},Z3=function(t){var s=t.createElement("boundtest");s.style.width="50px",s.style.display="block",s.style.fontSize="12px",s.style.letterSpacing="0px",s.style.wordSpacing="0px",t.body.appendChild(s);var a=t.createRange();s.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var r=s.firstChild,o=Fp(r.data).map(function(h){return Ln(h)}),l=0,A={},u=o.every(function(h,p){a.setStart(r,l),a.setEnd(r,l+h.length);var m=a.getBoundingClientRect();l+=h.length;var v=m.x>A.x||m.y>A.y;return A=m,p===0?!0:v});return t.body.removeChild(s),u},ek=function(){return typeof new Image().crossOrigin<"u"},tk=function(){return typeof new XMLHttpRequest().responseType=="string"},sk=function(t){var s=new Image,a=t.createElement("canvas"),r=a.getContext("2d");if(!r)return!1;s.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{r.drawImage(s,0,0),a.toDataURL()}catch{return!1}return!0},db=function(t){return t[0]===0&&t[1]===255&&t[2]===0&&t[3]===255},ak=function(t){var s=t.createElement("canvas"),a=100;s.width=a,s.height=a;var r=s.getContext("2d");if(!r)return Promise.reject(!1);r.fillStyle="rgb(0, 255, 0)",r.fillRect(0,0,a,a);var o=new Image,l=s.toDataURL();o.src=l;var A=_g(a,a,0,0,o);return r.fillStyle="red",r.fillRect(0,0,a,a),ub(A).then(function(u){r.drawImage(u,0,0);var h=r.getImageData(0,0,a,a).data;r.fillStyle="red",r.fillRect(0,0,a,a);var p=t.createElement("div");return p.style.backgroundImage="url("+l+")",p.style.height=a+"px",db(h)?ub(_g(a,a,0,0,p)):Promise.reject(!1)}).then(function(u){return r.drawImage(u,0,0),db(r.getImageData(0,0,a,a).data)}).catch(function(){return!1})},_g=function(t,s,a,r,o){var l="http://www.w3.org/2000/svg",A=document.createElementNS(l,"svg"),u=document.createElementNS(l,"foreignObject");return A.setAttributeNS(null,"width",t.toString()),A.setAttributeNS(null,"height",s.toString()),u.setAttributeNS(null,"width","100%"),u.setAttributeNS(null,"height","100%"),u.setAttributeNS(null,"x",a.toString()),u.setAttributeNS(null,"y",r.toString()),u.setAttributeNS(null,"externalResourcesRequired","true"),A.appendChild(u),u.appendChild(o),A},ub=function(t){return new Promise(function(s,a){var r=new Image;r.onload=function(){return s(r)},r.onerror=a,r.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(t))})},vr={get SUPPORT_RANGE_BOUNDS(){var t=J3(document);return Object.defineProperty(vr,"SUPPORT_RANGE_BOUNDS",{value:t}),t},get SUPPORT_WORD_BREAKING(){var t=vr.SUPPORT_RANGE_BOUNDS&&Z3(document);return Object.defineProperty(vr,"SUPPORT_WORD_BREAKING",{value:t}),t},get SUPPORT_SVG_DRAWING(){var t=sk(document);return Object.defineProperty(vr,"SUPPORT_SVG_DRAWING",{value:t}),t},get SUPPORT_FOREIGNOBJECT_DRAWING(){var t=typeof Array.from=="function"&&typeof window.fetch=="function"?ak(document):Promise.resolve(!1);return Object.defineProperty(vr,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:t}),t},get SUPPORT_CORS_IMAGES(){var t=ek();return Object.defineProperty(vr,"SUPPORT_CORS_IMAGES",{value:t}),t},get SUPPORT_RESPONSE_TYPE(){var t=tk();return Object.defineProperty(vr,"SUPPORT_RESPONSE_TYPE",{value:t}),t},get SUPPORT_CORS_XHR(){var t="withCredentials"in new XMLHttpRequest;return Object.defineProperty(vr,"SUPPORT_CORS_XHR",{value:t}),t},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var t=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(vr,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:t}),t}},tu=function(){function t(s,a){this.text=s,this.bounds=a}return t}(),nk=function(t,s,a,r){var o=ok(s,a),l=[],A=0;return o.forEach(function(u){if(a.textDecorationLine.length||u.trim().length>0)if(vr.SUPPORT_RANGE_BOUNDS){var h=hb(r,A,u.length).getClientRects();if(h.length>1){var p=Xg(u),m=0;p.forEach(function(b){l.push(new tu(b,bl.fromDOMRectList(t,hb(r,m+A,b.length).getClientRects()))),m+=b.length})}else l.push(new tu(u,bl.fromDOMRectList(t,h)))}else{var v=r.splitText(u.length);l.push(new tu(u,rk(t,r))),r=v}else vr.SUPPORT_RANGE_BOUNDS||(r=r.splitText(u.length));A+=u.length}),l},rk=function(t,s){var a=s.ownerDocument;if(a){var r=a.createElement("html2canvaswrapper");r.appendChild(s.cloneNode(!0));var o=s.parentNode;if(o){o.replaceChild(r,s);var l=kp(t,r);return r.firstChild&&o.replaceChild(r.firstChild,r),l}}return bl.EMPTY},hb=function(t,s,a){var r=t.ownerDocument;if(!r)throw new Error("Node has no owner document");var o=r.createRange();return o.setStart(t,s),o.setEnd(t,s+a),o},Xg=function(t){if(vr.SUPPORT_NATIVE_TEXT_SEGMENTATION){var s=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(s.segment(t)).map(function(a){return a.segment})}return X3(t)},ik=function(t,s){if(vr.SUPPORT_NATIVE_TEXT_SEGMENTATION){var a=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(a.segment(t)).map(function(r){return r.segment})}return ck(t,s)},ok=function(t,s){return s.letterSpacing!==0?Xg(t):ik(t,s)},lk=[32,160,4961,65792,65793,4153,4241],ck=function(t,s){for(var a=RC(t,{lineBreak:s.lineBreak,wordBreak:s.overflowWrap==="break-word"?"break-word":s.wordBreak}),r=[],o,l=function(){if(o.value){var A=o.value.slice(),u=Fp(A),h="";u.forEach(function(p){lk.indexOf(p)===-1?h+=Ln(p):(h.length&&r.push(h),r.push(Ln(p)),h="")}),h.length&&r.push(h)}};!(o=a.next()).done;)l();return r},Ak=function(){function t(s,a,r){this.text=dk(a.data,r.textTransform),this.textBounds=nk(s,this.text,r,a)}return t}(),dk=function(t,s){switch(s){case 1:return t.toLowerCase();case 3:return t.replace(uk,hk);case 2:return t.toUpperCase();default:return t}},uk=/(^|\s|:|-|\(|\))([a-z])/g,hk=function(t,s,a){return t.length>0?s+a.toUpperCase():t},kw=function(t){jo(s,t);function s(a,r){var o=t.call(this,a,r)||this;return o.src=r.currentSrc||r.src,o.intrinsicWidth=r.naturalWidth,o.intrinsicHeight=r.naturalHeight,o.context.cache.addImage(o.src),o}return s}(Go),Fw=function(t){jo(s,t);function s(a,r){var o=t.call(this,a,r)||this;return o.canvas=r,o.intrinsicWidth=r.width,o.intrinsicHeight=r.height,o}return s}(Go),Uw=function(t){jo(s,t);function s(a,r){var o=t.call(this,a,r)||this,l=new XMLSerializer,A=kp(a,r);return r.setAttribute("width",A.width+"px"),r.setAttribute("height",A.height+"px"),o.svg="data:image/svg+xml,"+encodeURIComponent(l.serializeToString(r)),o.intrinsicWidth=r.width.baseVal.value,o.intrinsicHeight=r.height.baseVal.value,o.context.cache.addImage(o.svg),o}return s}(Go),Ew=function(t){jo(s,t);function s(a,r){var o=t.call(this,a,r)||this;return o.value=r.value,o}return s}(Go),Bg=function(t){jo(s,t);function s(a,r){var o=t.call(this,a,r)||this;return o.start=r.start,o.reversed=typeof r.reversed=="boolean"&&r.reversed===!0,o}return s}(Go),pk=[{type:15,flags:0,unit:"px",number:3}],fk=[{type:16,flags:0,number:50}],mk=function(t){return t.width>t.height?new bl(t.left+(t.width-t.height)/2,t.top,t.height,t.height):t.width<t.height?new bl(t.left,t.top+(t.height-t.width)/2,t.width,t.width):t},gk=function(t){var s=t.type===xk?new Array(t.value.length+1).join(""):t.value;return s.length===0?t.placeholder||"":s},hp="checkbox",pp="radio",xk="password",pb=707406591,Jg=function(t){jo(s,t);function s(a,r){var o=t.call(this,a,r)||this;switch(o.type=r.type.toLowerCase(),o.checked=r.checked,o.value=gk(r),(o.type===hp||o.type===pp)&&(o.styles.backgroundColor=3739148031,o.styles.borderTopColor=o.styles.borderRightColor=o.styles.borderBottomColor=o.styles.borderLeftColor=2779096575,o.styles.borderTopWidth=o.styles.borderRightWidth=o.styles.borderBottomWidth=o.styles.borderLeftWidth=1,o.styles.borderTopStyle=o.styles.borderRightStyle=o.styles.borderBottomStyle=o.styles.borderLeftStyle=1,o.styles.backgroundClip=[0],o.styles.backgroundOrigin=[0],o.bounds=mk(o.bounds)),o.type){case hp:o.styles.borderTopRightRadius=o.styles.borderTopLeftRadius=o.styles.borderBottomRightRadius=o.styles.borderBottomLeftRadius=pk;break;case pp:o.styles.borderTopRightRadius=o.styles.borderTopLeftRadius=o.styles.borderBottomRightRadius=o.styles.borderBottomLeftRadius=fk;break}return o}return s}(Go),Lw=function(t){jo(s,t);function s(a,r){var o=t.call(this,a,r)||this,l=r.options[r.selectedIndex||0];return o.value=l&&l.text||"",o}return s}(Go),Qw=function(t){jo(s,t);function s(a,r){var o=t.call(this,a,r)||this;return o.value=r.value,o}return s}(Go),Tw=function(t){jo(s,t);function s(a,r){var o=t.call(this,a,r)||this;o.src=r.src,o.width=parseInt(r.width,10)||0,o.height=parseInt(r.height,10)||0,o.backgroundColor=o.styles.backgroundColor;try{if(r.contentWindow&&r.contentWindow.document&&r.contentWindow.document.documentElement){o.tree=Dw(a,r.contentWindow.document.documentElement);var l=r.contentWindow.document.documentElement?Zd(a,getComputedStyle(r.contentWindow.document.documentElement).backgroundColor):yl.TRANSPARENT,A=r.contentWindow.document.body?Zd(a,getComputedStyle(r.contentWindow.document.body).backgroundColor):yl.TRANSPARENT;o.backgroundColor=cc(l)?cc(A)?o.styles.backgroundColor:A:l}}catch{}return o}return s}(Go),yk=["OL","UL","MENU"],np=function(t,s,a,r){for(var o=s.firstChild,l=void 0;o;o=l)if(l=o.nextSibling,Iw(o)&&o.data.trim().length>0)a.textNodes.push(new Ak(t,o,a.styles));else if(DA(o))if(Mw(o)&&o.assignedNodes)o.assignedNodes().forEach(function(u){return np(t,u,a,r)});else{var A=Rw(t,o);A.styles.isVisible()&&(vk(o,A,r)?A.flags|=4:bk(A.styles)&&(A.flags|=2),yk.indexOf(o.tagName)!==-1&&(A.flags|=8),a.elements.push(A),o.slot,o.shadowRoot?np(t,o.shadowRoot,A,r):!fp(o)&&!Hw(o)&&!mp(o)&&np(t,o,A,r))}},Rw=function(t,s){return Cg(s)?new kw(t,s):Pw(s)?new Fw(t,s):Hw(s)?new Uw(t,s):wk(s)?new Ew(t,s):jk(s)?new Bg(t,s):_k(s)?new Jg(t,s):mp(s)?new Lw(t,s):fp(s)?new Qw(t,s):Ow(s)?new Tw(t,s):new Go(t,s)},Dw=function(t,s){var a=Rw(t,s);return a.flags|=4,np(t,s,a,a),a},vk=function(t,s,a){return s.styles.isPositionedWithZIndex()||s.styles.opacity<1||s.styles.isTransformed()||Zg(t)&&a.styles.isTransparent()},bk=function(t){return t.isPositioned()||t.isFloating()},Iw=function(t){return t.nodeType===Node.TEXT_NODE},DA=function(t){return t.nodeType===Node.ELEMENT_NODE},Ng=function(t){return DA(t)&&typeof t.style<"u"&&!rp(t)},rp=function(t){return typeof t.className=="object"},wk=function(t){return t.tagName==="LI"},jk=function(t){return t.tagName==="OL"},_k=function(t){return t.tagName==="INPUT"},Bk=function(t){return t.tagName==="HTML"},Hw=function(t){return t.tagName==="svg"},Zg=function(t){return t.tagName==="BODY"},Pw=function(t){return t.tagName==="CANVAS"},fb=function(t){return t.tagName==="VIDEO"},Cg=function(t){return t.tagName==="IMG"},Ow=function(t){return t.tagName==="IFRAME"},mb=function(t){return t.tagName==="STYLE"},Nk=function(t){return t.tagName==="SCRIPT"},fp=function(t){return t.tagName==="TEXTAREA"},mp=function(t){return t.tagName==="SELECT"},Mw=function(t){return t.tagName==="SLOT"},gb=function(t){return t.tagName.indexOf("-")>0},Ck=function(){function t(){this.counters={}}return t.prototype.getCounterValue=function(s){var a=this.counters[s];return a&&a.length?a[a.length-1]:1},t.prototype.getCounterValues=function(s){var a=this.counters[s];return a||[]},t.prototype.pop=function(s){var a=this;s.forEach(function(r){return a.counters[r].pop()})},t.prototype.parse=function(s){var a=this,r=s.counterIncrement,o=s.counterReset,l=!0;r!==null&&r.forEach(function(u){var h=a.counters[u.counter];h&&u.increment!==0&&(l=!1,h.length||h.push(1),h[Math.max(0,h.length-1)]+=u.increment)});var A=[];return l&&o.forEach(function(u){var h=a.counters[u.counter];A.push(u.counter),h||(h=a.counters[u.counter]=[]),h.push(u.reset)}),A},t}(),xb={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},yb={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},Sk={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},kk={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},FA=function(t,s,a,r,o,l){return t<s||t>a?cu(t,o,l.length>0):r.integers.reduce(function(A,u,h){for(;t>=u;)t-=u,A+=r.values[h];return A},"")+l},zw=function(t,s,a,r){var o="";do a||t--,o=r(t)+o,t/=s;while(t*s>=s);return o},En=function(t,s,a,r,o){var l=a-s+1;return(t<0?"-":"")+(zw(Math.abs(t),l,r,function(A){return Ln(Math.floor(A%l)+s)})+o)},Ec=function(t,s,a){a===void 0&&(a=". ");var r=s.length;return zw(Math.abs(t),r,!1,function(o){return s[Math.floor(o%r)]})+a},TA=1,Zl=2,ec=4,Kd=8,ml=function(t,s,a,r,o,l){if(t<-9999||t>9999)return cu(t,4,o.length>0);var A=Math.abs(t),u=o;if(A===0)return s[0]+u;for(var h=0;A>0&&h<=4;h++){var p=A%10;p===0&&Yn(l,TA)&&u!==""?u=s[p]+u:p>1||p===1&&h===0||p===1&&h===1&&Yn(l,Zl)||p===1&&h===1&&Yn(l,ec)&&t>100||p===1&&h>1&&Yn(l,Kd)?u=s[p]+(h>0?a[h-1]:"")+u:p===1&&h>0&&(u=a[h-1]+u),A=Math.floor(A/10)}return(t<0?r:"")+u},vb="",bb="",wb="",Pm="",cu=function(t,s,a){var r=a?". ":"",o=a?"":"",l=a?", ":"",A=a?" ":"";switch(s){case 0:return""+A;case 1:return""+A;case 2:return""+A;case 5:var u=En(t,48,57,!0,r);return u.length<4?"0"+u:u;case 4:return Ec(t,"",o);case 6:return FA(t,1,3999,xb,3,r).toLowerCase();case 7:return FA(t,1,3999,xb,3,r);case 8:return En(t,945,969,!1,r);case 9:return En(t,97,122,!1,r);case 10:return En(t,65,90,!1,r);case 11:return En(t,1632,1641,!0,r);case 12:case 49:return FA(t,1,9999,yb,3,r);case 35:return FA(t,1,9999,yb,3,r).toLowerCase();case 13:return En(t,2534,2543,!0,r);case 14:case 30:return En(t,6112,6121,!0,r);case 15:return Ec(t,"",o);case 16:return Ec(t,"",o);case 17:case 48:return ml(t,"",vb,"",o,Zl|ec|Kd);case 47:return ml(t,"",bb,"",o,TA|Zl|ec|Kd);case 42:return ml(t,"",vb,"",o,Zl|ec|Kd);case 41:return ml(t,"",bb,"",o,TA|Zl|ec|Kd);case 26:return ml(t,"","",wb,o,0);case 25:return ml(t,"","",wb,o,TA|Zl|ec);case 31:return ml(t,"","",Pm,l,TA|Zl|ec);case 33:return ml(t,"","",Pm,l,0);case 32:return ml(t,"","",Pm,l,TA|Zl|ec);case 18:return En(t,2406,2415,!0,r);case 20:return FA(t,1,19999,kk,3,r);case 21:return En(t,2790,2799,!0,r);case 22:return En(t,2662,2671,!0,r);case 22:return FA(t,1,10999,Sk,3,r);case 23:return Ec(t,"");case 24:return Ec(t,"");case 27:return En(t,3302,3311,!0,r);case 28:return Ec(t,"",o);case 29:return Ec(t,"",o);case 34:return En(t,3792,3801,!0,r);case 37:return En(t,6160,6169,!0,r);case 38:return En(t,4160,4169,!0,r);case 39:return En(t,2918,2927,!0,r);case 40:return En(t,1776,1785,!0,r);case 43:return En(t,3046,3055,!0,r);case 44:return En(t,3174,3183,!0,r);case 45:return En(t,3664,3673,!0,r);case 46:return En(t,3872,3881,!0,r);case 3:default:return En(t,48,57,!0,r)}},qw="data-html2canvas-ignore",jb=function(){function t(s,a,r){if(this.context=s,this.options=r,this.scrolledElements=[],this.referenceElement=a,this.counters=new Ck,this.quoteDepth=0,!a.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(a.ownerDocument.documentElement,!1)}return t.prototype.toIFrame=function(s,a){var r=this,o=Fk(s,a);if(!o.contentWindow)return Promise.reject("Unable to find iframe window");var l=s.defaultView.pageXOffset,A=s.defaultView.pageYOffset,u=o.contentWindow,h=u.document,p=Lk(o).then(function(){return $r(r,void 0,void 0,function(){var m,v;return Er(this,function(b){switch(b.label){case 0:return this.scrolledElements.forEach(Dk),u&&(u.scrollTo(a.left,a.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(u.scrollY!==a.top||u.scrollX!==a.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(u.scrollX-a.left,u.scrollY-a.top,0,0))),m=this.options.onclone,v=this.clonedReferenceElement,typeof v>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:h.fonts&&h.fonts.ready?[4,h.fonts.ready]:[3,2];case 1:b.sent(),b.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,Ek(h)]:[3,4];case 3:b.sent(),b.label=4;case 4:return typeof m=="function"?[2,Promise.resolve().then(function(){return m(h,v)}).then(function(){return o})]:[2,o]}})})});return h.open(),h.write(Tk(document.doctype)+"<html></html>"),Rk(this.referenceElement.ownerDocument,l,A),h.replaceChild(h.adoptNode(this.documentElement),h.documentElement),h.close(),p},t.prototype.createElementClone=function(s){if(jg(s,2))debugger;if(Pw(s))return this.createCanvasClone(s);if(fb(s))return this.createVideoClone(s);if(mb(s))return this.createStyleClone(s);var a=s.cloneNode(!1);return Cg(a)&&(Cg(s)&&s.currentSrc&&s.currentSrc!==s.src&&(a.src=s.currentSrc,a.srcset=""),a.loading==="lazy"&&(a.loading="eager")),gb(a)?this.createCustomElementClone(a):a},t.prototype.createCustomElementClone=function(s){var a=document.createElement("html2canvascustomelement");return Om(s.style,a),a},t.prototype.createStyleClone=function(s){try{var a=s.sheet;if(a&&a.cssRules){var r=[].slice.call(a.cssRules,0).reduce(function(l,A){return A&&typeof A.cssText=="string"?l+A.cssText:l},""),o=s.cloneNode(!1);return o.textContent=r,o}}catch(l){if(this.context.logger.error("Unable to access cssRules property",l),l.name!=="SecurityError")throw l}return s.cloneNode(!1)},t.prototype.createCanvasClone=function(s){var a;if(this.options.inlineImages&&s.ownerDocument){var r=s.ownerDocument.createElement("img");try{return r.src=s.toDataURL(),r}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",s)}}var o=s.cloneNode(!1);try{o.width=s.width,o.height=s.height;var l=s.getContext("2d"),A=o.getContext("2d");if(A)if(!this.options.allowTaint&&l)A.putImageData(l.getImageData(0,0,s.width,s.height),0,0);else{var u=(a=s.getContext("webgl2"))!==null&&a!==void 0?a:s.getContext("webgl");if(u){var h=u.getContextAttributes();h?.preserveDrawingBuffer===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",s)}A.drawImage(s,0,0)}return o}catch{this.context.logger.info("Unable to clone canvas as it is tainted",s)}return o},t.prototype.createVideoClone=function(s){var a=s.ownerDocument.createElement("canvas");a.width=s.offsetWidth,a.height=s.offsetHeight;var r=a.getContext("2d");try{return r&&(r.drawImage(s,0,0,a.width,a.height),this.options.allowTaint||r.getImageData(0,0,a.width,a.height)),a}catch{this.context.logger.info("Unable to clone video as it is tainted",s)}var o=s.ownerDocument.createElement("canvas");return o.width=s.offsetWidth,o.height=s.offsetHeight,o},t.prototype.appendChildNode=function(s,a,r){(!DA(a)||!Nk(a)&&!a.hasAttribute(qw)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(a)))&&(!this.options.copyStyles||!DA(a)||!mb(a))&&s.appendChild(this.cloneNode(a,r))},t.prototype.cloneChildNodes=function(s,a,r){for(var o=this,l=s.shadowRoot?s.shadowRoot.firstChild:s.firstChild;l;l=l.nextSibling)if(DA(l)&&Mw(l)&&typeof l.assignedNodes=="function"){var A=l.assignedNodes();A.length&&A.forEach(function(u){return o.appendChildNode(a,u,r)})}else this.appendChildNode(a,l,r)},t.prototype.cloneNode=function(s,a){if(Iw(s))return document.createTextNode(s.data);if(!s.ownerDocument)return s.cloneNode(!1);var r=s.ownerDocument.defaultView;if(r&&DA(s)&&(Ng(s)||rp(s))){var o=this.createElementClone(s);o.style.transitionProperty="none";var l=r.getComputedStyle(s),A=r.getComputedStyle(s,":before"),u=r.getComputedStyle(s,":after");this.referenceElement===s&&Ng(o)&&(this.clonedReferenceElement=o),Zg(o)&&Pk(o);var h=this.counters.parse(new eb(this.context,l)),p=this.resolvePseudoContent(s,o,A,su.BEFORE);gb(s)&&(a=!0),fb(s)||this.cloneChildNodes(s,o,a),p&&o.insertBefore(p,o.firstChild);var m=this.resolvePseudoContent(s,o,u,su.AFTER);return m&&o.appendChild(m),this.counters.pop(h),(l&&(this.options.copyStyles||rp(s))&&!Ow(s)||a)&&Om(l,o),(s.scrollTop!==0||s.scrollLeft!==0)&&this.scrolledElements.push([o,s.scrollLeft,s.scrollTop]),(fp(s)||mp(s))&&(fp(o)||mp(o))&&(o.value=s.value),o}return s.cloneNode(!1)},t.prototype.resolvePseudoContent=function(s,a,r,o){var l=this;if(r){var A=r.content,u=a.ownerDocument;if(!(!u||!A||A==="none"||A==="-moz-alt-content"||r.display==="none")){this.counters.parse(new eb(this.context,r));var h=new w3(this.context,r),p=u.createElement("html2canvaspseudoelement");Om(r,p),h.content.forEach(function(v){if(v.type===0)p.appendChild(u.createTextNode(v.value));else if(v.type===22){var b=u.createElement("img");b.src=v.value,b.style.opacity="1",p.appendChild(b)}else if(v.type===18){if(v.name==="attr"){var x=v.values.filter(La);x.length&&p.appendChild(u.createTextNode(s.getAttribute(x[0].value)||""))}else if(v.name==="counter"){var C=v.values.filter(HA),Q=C[0],j=C[1];if(Q&&La(Q)){var B=l.counters.getCounterValue(Q.value),L=j&&La(j)?wg.parse(l.context,j.value):3;p.appendChild(u.createTextNode(cu(B,L,!1)))}}else if(v.name==="counters"){var P=v.values.filter(HA),Q=P[0],F=P[1],j=P[2];if(Q&&La(Q)){var ee=l.counters.getCounterValues(Q.value),K=j&&La(j)?wg.parse(l.context,j.value):3,q=F&&F.type===0?F.value:"",E=ee.map(function(H){return cu(H,K,!1)}).join(q);p.appendChild(u.createTextNode(E))}}}else if(v.type===20)switch(v.value){case"open-quote":p.appendChild(u.createTextNode(Zv(h.quotes,l.quoteDepth++,!0)));break;case"close-quote":p.appendChild(u.createTextNode(Zv(h.quotes,--l.quoteDepth,!1)));break;default:p.appendChild(u.createTextNode(v.value))}}),p.className=Sg+" "+kg;var m=o===su.BEFORE?" "+Sg:" "+kg;return rp(a)?a.className.baseValue+=m:a.className+=m,p}}},t.destroy=function(s){return s.parentNode?(s.parentNode.removeChild(s),!0):!1},t}(),su;(function(t){t[t.BEFORE=0]="BEFORE",t[t.AFTER=1]="AFTER"})(su||(su={}));var Fk=function(t,s){var a=t.createElement("iframe");return a.className="html2canvas-container",a.style.visibility="hidden",a.style.position="fixed",a.style.left="-10000px",a.style.top="0px",a.style.border="0",a.width=s.width.toString(),a.height=s.height.toString(),a.scrolling="no",a.setAttribute(qw,"true"),t.body.appendChild(a),a},Uk=function(t){return new Promise(function(s){if(t.complete){s();return}if(!t.src){s();return}t.onload=s,t.onerror=s})},Ek=function(t){return Promise.all([].slice.call(t.images,0).map(Uk))},Lk=function(t){return new Promise(function(s,a){var r=t.contentWindow;if(!r)return a("No window assigned for iframe");var o=r.document;r.onload=t.onload=function(){r.onload=t.onload=null;var l=setInterval(function(){o.body.childNodes.length>0&&o.readyState==="complete"&&(clearInterval(l),s(t))},50)}})},Qk=["all","d","content"],Om=function(t,s){for(var a=t.length-1;a>=0;a--){var r=t.item(a);Qk.indexOf(r)===-1&&s.style.setProperty(r,t.getPropertyValue(r))}return s},Tk=function(t){var s="";return t&&(s+="<!DOCTYPE ",t.name&&(s+=t.name),t.internalSubset&&(s+=t.internalSubset),t.publicId&&(s+='"'+t.publicId+'"'),t.systemId&&(s+='"'+t.systemId+'"'),s+=">"),s},Rk=function(t,s,a){t&&t.defaultView&&(s!==t.defaultView.pageXOffset||a!==t.defaultView.pageYOffset)&&t.defaultView.scrollTo(s,a)},Dk=function(t){var s=t[0],a=t[1],r=t[2];s.scrollLeft=a,s.scrollTop=r},Ik=":before",Hk=":after",Sg="___html2canvas___pseudoelement_before",kg="___html2canvas___pseudoelement_after",_b=`{
    content: "" !important;
    display: none !important;
}`,Pk=function(t){Ok(t,"."+Sg+Ik+_b+`
         .`+kg+Hk+_b)},Ok=function(t,s){var a=t.ownerDocument;if(a){var r=a.createElement("style");r.textContent=s,t.appendChild(r)}},Kw=function(){function t(){}return t.getOrigin=function(s){var a=t._link;return a?(a.href=s,a.href=a.href,a.protocol+a.hostname+a.port):"about:blank"},t.isSameOrigin=function(s){return t.getOrigin(s)===t._origin},t.setContext=function(s){t._link=s.document.createElement("a"),t._origin=t.getOrigin(s.location.href)},t._origin="about:blank",t}(),Mk=function(){function t(s,a){this.context=s,this._options=a,this._cache={}}return t.prototype.addImage=function(s){var a=Promise.resolve();return this.has(s)||(zm(s)||Gk(s))&&(this._cache[s]=this.loadImage(s)).catch(function(){}),a},t.prototype.match=function(s){return this._cache[s]},t.prototype.loadImage=function(s){return $r(this,void 0,void 0,function(){var a,r,o,l,A=this;return Er(this,function(u){switch(u.label){case 0:return a=Kw.isSameOrigin(s),r=!Mm(s)&&this._options.useCORS===!0&&vr.SUPPORT_CORS_IMAGES&&!a,o=!Mm(s)&&!a&&!zm(s)&&typeof this._options.proxy=="string"&&vr.SUPPORT_CORS_XHR&&!r,!a&&this._options.allowTaint===!1&&!Mm(s)&&!zm(s)&&!o&&!r?[2]:(l=s,o?[4,this.proxy(l)]:[3,2]);case 1:l=u.sent(),u.label=2;case 2:return this.context.logger.debug("Added image "+s.substring(0,256)),[4,new Promise(function(h,p){var m=new Image;m.onload=function(){return h(m)},m.onerror=p,(Vk(l)||r)&&(m.crossOrigin="anonymous"),m.src=l,m.complete===!0&&setTimeout(function(){return h(m)},500),A._options.imageTimeout>0&&setTimeout(function(){return p("Timed out ("+A._options.imageTimeout+"ms) loading image")},A._options.imageTimeout)})];case 3:return[2,u.sent()]}})})},t.prototype.has=function(s){return typeof this._cache[s]<"u"},t.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},t.prototype.proxy=function(s){var a=this,r=this._options.proxy;if(!r)throw new Error("No proxy defined");var o=s.substring(0,256);return new Promise(function(l,A){var u=vr.SUPPORT_RESPONSE_TYPE?"blob":"text",h=new XMLHttpRequest;h.onload=function(){if(h.status===200)if(u==="text")l(h.response);else{var v=new FileReader;v.addEventListener("load",function(){return l(v.result)},!1),v.addEventListener("error",function(b){return A(b)},!1),v.readAsDataURL(h.response)}else A("Failed to proxy resource "+o+" with status code "+h.status)},h.onerror=A;var p=r.indexOf("?")>-1?"&":"?";if(h.open("GET",""+r+p+"url="+encodeURIComponent(s)+"&responseType="+u),u!=="text"&&h instanceof XMLHttpRequest&&(h.responseType=u),a._options.imageTimeout){var m=a._options.imageTimeout;h.timeout=m,h.ontimeout=function(){return A("Timed out ("+m+"ms) proxying "+o)}}h.send()})},t}(),zk=/^data:image\/svg\+xml/i,qk=/^data:image\/.*;base64,/i,Kk=/^data:image\/.*/i,Gk=function(t){return vr.SUPPORT_SVG_DRAWING||!$k(t)},Mm=function(t){return Kk.test(t)},Vk=function(t){return qk.test(t)},zm=function(t){return t.substr(0,4)==="blob"},$k=function(t){return t.substr(-3).toLowerCase()==="svg"||zk.test(t)},Yt=function(){function t(s,a){this.type=0,this.x=s,this.y=a}return t.prototype.add=function(s,a){return new t(this.x+s,this.y+a)},t}(),UA=function(t,s,a){return new Yt(t.x+(s.x-t.x)*a,t.y+(s.y-t.y)*a)},$h=function(){function t(s,a,r,o){this.type=1,this.start=s,this.startControl=a,this.endControl=r,this.end=o}return t.prototype.subdivide=function(s,a){var r=UA(this.start,this.startControl,s),o=UA(this.startControl,this.endControl,s),l=UA(this.endControl,this.end,s),A=UA(r,o,s),u=UA(o,l,s),h=UA(A,u,s);return a?new t(this.start,r,A,h):new t(h,u,l,this.end)},t.prototype.add=function(s,a){return new t(this.start.add(s,a),this.startControl.add(s,a),this.endControl.add(s,a),this.end.add(s,a))},t.prototype.reverse=function(){return new t(this.end,this.endControl,this.startControl,this.start)},t}(),Vi=function(t){return t.type===1},Wk=function(){function t(s){var a=s.styles,r=s.bounds,o=zd(a.borderTopLeftRadius,r.width,r.height),l=o[0],A=o[1],u=zd(a.borderTopRightRadius,r.width,r.height),h=u[0],p=u[1],m=zd(a.borderBottomRightRadius,r.width,r.height),v=m[0],b=m[1],x=zd(a.borderBottomLeftRadius,r.width,r.height),C=x[0],Q=x[1],j=[];j.push((l+h)/r.width),j.push((C+v)/r.width),j.push((A+Q)/r.height),j.push((p+b)/r.height);var B=Math.max.apply(Math,j);B>1&&(l/=B,A/=B,h/=B,p/=B,v/=B,b/=B,C/=B,Q/=B);var L=r.width-h,P=r.height-b,F=r.width-v,ee=r.height-Q,K=a.borderTopWidth,q=a.borderRightWidth,E=a.borderBottomWidth,U=a.borderLeftWidth,V=Ga(a.paddingTop,s.bounds.width),H=Ga(a.paddingRight,s.bounds.width),I=Ga(a.paddingBottom,s.bounds.width),M=Ga(a.paddingLeft,s.bounds.width);this.topLeftBorderDoubleOuterBox=l>0||A>0?cn(r.left+U/3,r.top+K/3,l-U/3,A-K/3,ba.TOP_LEFT):new Yt(r.left+U/3,r.top+K/3),this.topRightBorderDoubleOuterBox=l>0||A>0?cn(r.left+L,r.top+K/3,h-q/3,p-K/3,ba.TOP_RIGHT):new Yt(r.left+r.width-q/3,r.top+K/3),this.bottomRightBorderDoubleOuterBox=v>0||b>0?cn(r.left+F,r.top+P,v-q/3,b-E/3,ba.BOTTOM_RIGHT):new Yt(r.left+r.width-q/3,r.top+r.height-E/3),this.bottomLeftBorderDoubleOuterBox=C>0||Q>0?cn(r.left+U/3,r.top+ee,C-U/3,Q-E/3,ba.BOTTOM_LEFT):new Yt(r.left+U/3,r.top+r.height-E/3),this.topLeftBorderDoubleInnerBox=l>0||A>0?cn(r.left+U*2/3,r.top+K*2/3,l-U*2/3,A-K*2/3,ba.TOP_LEFT):new Yt(r.left+U*2/3,r.top+K*2/3),this.topRightBorderDoubleInnerBox=l>0||A>0?cn(r.left+L,r.top+K*2/3,h-q*2/3,p-K*2/3,ba.TOP_RIGHT):new Yt(r.left+r.width-q*2/3,r.top+K*2/3),this.bottomRightBorderDoubleInnerBox=v>0||b>0?cn(r.left+F,r.top+P,v-q*2/3,b-E*2/3,ba.BOTTOM_RIGHT):new Yt(r.left+r.width-q*2/3,r.top+r.height-E*2/3),this.bottomLeftBorderDoubleInnerBox=C>0||Q>0?cn(r.left+U*2/3,r.top+ee,C-U*2/3,Q-E*2/3,ba.BOTTOM_LEFT):new Yt(r.left+U*2/3,r.top+r.height-E*2/3),this.topLeftBorderStroke=l>0||A>0?cn(r.left+U/2,r.top+K/2,l-U/2,A-K/2,ba.TOP_LEFT):new Yt(r.left+U/2,r.top+K/2),this.topRightBorderStroke=l>0||A>0?cn(r.left+L,r.top+K/2,h-q/2,p-K/2,ba.TOP_RIGHT):new Yt(r.left+r.width-q/2,r.top+K/2),this.bottomRightBorderStroke=v>0||b>0?cn(r.left+F,r.top+P,v-q/2,b-E/2,ba.BOTTOM_RIGHT):new Yt(r.left+r.width-q/2,r.top+r.height-E/2),this.bottomLeftBorderStroke=C>0||Q>0?cn(r.left+U/2,r.top+ee,C-U/2,Q-E/2,ba.BOTTOM_LEFT):new Yt(r.left+U/2,r.top+r.height-E/2),this.topLeftBorderBox=l>0||A>0?cn(r.left,r.top,l,A,ba.TOP_LEFT):new Yt(r.left,r.top),this.topRightBorderBox=h>0||p>0?cn(r.left+L,r.top,h,p,ba.TOP_RIGHT):new Yt(r.left+r.width,r.top),this.bottomRightBorderBox=v>0||b>0?cn(r.left+F,r.top+P,v,b,ba.BOTTOM_RIGHT):new Yt(r.left+r.width,r.top+r.height),this.bottomLeftBorderBox=C>0||Q>0?cn(r.left,r.top+ee,C,Q,ba.BOTTOM_LEFT):new Yt(r.left,r.top+r.height),this.topLeftPaddingBox=l>0||A>0?cn(r.left+U,r.top+K,Math.max(0,l-U),Math.max(0,A-K),ba.TOP_LEFT):new Yt(r.left+U,r.top+K),this.topRightPaddingBox=h>0||p>0?cn(r.left+Math.min(L,r.width-q),r.top+K,L>r.width+q?0:Math.max(0,h-q),Math.max(0,p-K),ba.TOP_RIGHT):new Yt(r.left+r.width-q,r.top+K),this.bottomRightPaddingBox=v>0||b>0?cn(r.left+Math.min(F,r.width-U),r.top+Math.min(P,r.height-E),Math.max(0,v-q),Math.max(0,b-E),ba.BOTTOM_RIGHT):new Yt(r.left+r.width-q,r.top+r.height-E),this.bottomLeftPaddingBox=C>0||Q>0?cn(r.left+U,r.top+Math.min(ee,r.height-E),Math.max(0,C-U),Math.max(0,Q-E),ba.BOTTOM_LEFT):new Yt(r.left+U,r.top+r.height-E),this.topLeftContentBox=l>0||A>0?cn(r.left+U+M,r.top+K+V,Math.max(0,l-(U+M)),Math.max(0,A-(K+V)),ba.TOP_LEFT):new Yt(r.left+U+M,r.top+K+V),this.topRightContentBox=h>0||p>0?cn(r.left+Math.min(L,r.width+U+M),r.top+K+V,L>r.width+U+M?0:h-U+M,p-(K+V),ba.TOP_RIGHT):new Yt(r.left+r.width-(q+H),r.top+K+V),this.bottomRightContentBox=v>0||b>0?cn(r.left+Math.min(F,r.width-(U+M)),r.top+Math.min(P,r.height+K+V),Math.max(0,v-(q+H)),b-(E+I),ba.BOTTOM_RIGHT):new Yt(r.left+r.width-(q+H),r.top+r.height-(E+I)),this.bottomLeftContentBox=C>0||Q>0?cn(r.left+U+M,r.top+ee,Math.max(0,C-(U+M)),Q-(E+I),ba.BOTTOM_LEFT):new Yt(r.left+U+M,r.top+r.height-(E+I))}return t}(),ba;(function(t){t[t.TOP_LEFT=0]="TOP_LEFT",t[t.TOP_RIGHT=1]="TOP_RIGHT",t[t.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",t[t.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(ba||(ba={}));var cn=function(t,s,a,r,o){var l=4*((Math.sqrt(2)-1)/3),A=a*l,u=r*l,h=t+a,p=s+r;switch(o){case ba.TOP_LEFT:return new $h(new Yt(t,p),new Yt(t,p-u),new Yt(h-A,s),new Yt(h,s));case ba.TOP_RIGHT:return new $h(new Yt(t,s),new Yt(t+A,s),new Yt(h,p-u),new Yt(h,p));case ba.BOTTOM_RIGHT:return new $h(new Yt(h,s),new Yt(h,s+u),new Yt(t+A,p),new Yt(t,p));case ba.BOTTOM_LEFT:default:return new $h(new Yt(h,p),new Yt(h-A,p),new Yt(t,s+u),new Yt(t,s))}},gp=function(t){return[t.topLeftBorderBox,t.topRightBorderBox,t.bottomRightBorderBox,t.bottomLeftBorderBox]},Yk=function(t){return[t.topLeftContentBox,t.topRightContentBox,t.bottomRightContentBox,t.bottomLeftContentBox]},xp=function(t){return[t.topLeftPaddingBox,t.topRightPaddingBox,t.bottomRightPaddingBox,t.bottomLeftPaddingBox]},Xk=function(){function t(s,a,r){this.offsetX=s,this.offsetY=a,this.matrix=r,this.type=0,this.target=6}return t}(),Wh=function(){function t(s,a){this.path=s,this.target=a,this.type=1}return t}(),Jk=function(){function t(s){this.opacity=s,this.type=2,this.target=6}return t}(),Zk=function(t){return t.type===0},Gw=function(t){return t.type===1},eF=function(t){return t.type===2},Bb=function(t,s){return t.length===s.length?t.some(function(a,r){return a===s[r]}):!1},tF=function(t,s,a,r,o){return t.map(function(l,A){switch(A){case 0:return l.add(s,a);case 1:return l.add(s+r,a);case 2:return l.add(s+r,a+o);case 3:return l.add(s,a+o)}return l})},Vw=function(){function t(s){this.element=s,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return t}(),$w=function(){function t(s,a){if(this.container=s,this.parent=a,this.effects=[],this.curves=new Wk(this.container),this.container.styles.opacity<1&&this.effects.push(new Jk(this.container.styles.opacity)),this.container.styles.transform!==null){var r=this.container.bounds.left+this.container.styles.transformOrigin[0].number,o=this.container.bounds.top+this.container.styles.transformOrigin[1].number,l=this.container.styles.transform;this.effects.push(new Xk(r,o,l))}if(this.container.styles.overflowX!==0){var A=gp(this.curves),u=xp(this.curves);Bb(A,u)?this.effects.push(new Wh(A,6)):(this.effects.push(new Wh(A,2)),this.effects.push(new Wh(u,4)))}}return t.prototype.getEffects=function(s){for(var a=[2,3].indexOf(this.container.styles.position)===-1,r=this.parent,o=this.effects.slice(0);r;){var l=r.effects.filter(function(h){return!Gw(h)});if(a||r.container.styles.position!==0||!r.parent){if(o.unshift.apply(o,l),a=[2,3].indexOf(r.container.styles.position)===-1,r.container.styles.overflowX!==0){var A=gp(r.curves),u=xp(r.curves);Bb(A,u)||o.unshift(new Wh(u,6))}}else o.unshift.apply(o,l);r=r.parent}return o.filter(function(h){return Yn(h.target,s)})},t}(),Fg=function(t,s,a,r){t.container.elements.forEach(function(o){var l=Yn(o.flags,4),A=Yn(o.flags,2),u=new $w(o,t);Yn(o.styles.display,2048)&&r.push(u);var h=Yn(o.flags,8)?[]:r;if(l||A){var p=l||o.styles.isPositioned()?a:s,m=new Vw(u);if(o.styles.isPositioned()||o.styles.opacity<1||o.styles.isTransformed()){var v=o.styles.zIndex.order;if(v<0){var b=0;p.negativeZIndex.some(function(C,Q){return v>C.element.container.styles.zIndex.order?(b=Q,!1):b>0}),p.negativeZIndex.splice(b,0,m)}else if(v>0){var x=0;p.positiveZIndex.some(function(C,Q){return v>=C.element.container.styles.zIndex.order?(x=Q+1,!1):x>0}),p.positiveZIndex.splice(x,0,m)}else p.zeroOrAutoZIndexOrTransformedOrOpacity.push(m)}else o.styles.isFloating()?p.nonPositionedFloats.push(m):p.nonPositionedInlineLevel.push(m);Fg(u,m,l?m:a,h)}else o.styles.isInlineLevel()?s.inlineLevel.push(u):s.nonInlineLevel.push(u),Fg(u,s,a,h);Yn(o.flags,8)&&Ww(o,h)})},Ww=function(t,s){for(var a=t instanceof Bg?t.start:1,r=t instanceof Bg?t.reversed:!1,o=0;o<s.length;o++){var l=s[o];l.container instanceof Ew&&typeof l.container.value=="number"&&l.container.value!==0&&(a=l.container.value),l.listValue=cu(a,l.container.styles.listStyleType,!0),a+=r?-1:1}},sF=function(t){var s=new $w(t,null),a=new Vw(s),r=[];return Fg(s,a,a,r),Ww(s.container,r),a},Nb=function(t,s){switch(s){case 0:return Wi(t.topLeftBorderBox,t.topLeftPaddingBox,t.topRightBorderBox,t.topRightPaddingBox);case 1:return Wi(t.topRightBorderBox,t.topRightPaddingBox,t.bottomRightBorderBox,t.bottomRightPaddingBox);case 2:return Wi(t.bottomRightBorderBox,t.bottomRightPaddingBox,t.bottomLeftBorderBox,t.bottomLeftPaddingBox);case 3:default:return Wi(t.bottomLeftBorderBox,t.bottomLeftPaddingBox,t.topLeftBorderBox,t.topLeftPaddingBox)}},aF=function(t,s){switch(s){case 0:return Wi(t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox,t.topRightBorderBox,t.topRightBorderDoubleOuterBox);case 1:return Wi(t.topRightBorderBox,t.topRightBorderDoubleOuterBox,t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox);case 2:return Wi(t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox,t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox);case 3:default:return Wi(t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox,t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox)}},nF=function(t,s){switch(s){case 0:return Wi(t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox,t.topRightBorderDoubleInnerBox,t.topRightPaddingBox);case 1:return Wi(t.topRightBorderDoubleInnerBox,t.topRightPaddingBox,t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox);case 2:return Wi(t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox,t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox);case 3:default:return Wi(t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox,t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox)}},rF=function(t,s){switch(s){case 0:return Yh(t.topLeftBorderStroke,t.topRightBorderStroke);case 1:return Yh(t.topRightBorderStroke,t.bottomRightBorderStroke);case 2:return Yh(t.bottomRightBorderStroke,t.bottomLeftBorderStroke);case 3:default:return Yh(t.bottomLeftBorderStroke,t.topLeftBorderStroke)}},Yh=function(t,s){var a=[];return Vi(t)?a.push(t.subdivide(.5,!1)):a.push(t),Vi(s)?a.push(s.subdivide(.5,!0)):a.push(s),a},Wi=function(t,s,a,r){var o=[];return Vi(t)?o.push(t.subdivide(.5,!1)):o.push(t),Vi(a)?o.push(a.subdivide(.5,!0)):o.push(a),Vi(r)?o.push(r.subdivide(.5,!0).reverse()):o.push(r),Vi(s)?o.push(s.subdivide(.5,!1).reverse()):o.push(s),o},Yw=function(t){var s=t.bounds,a=t.styles;return s.add(a.borderLeftWidth,a.borderTopWidth,-(a.borderRightWidth+a.borderLeftWidth),-(a.borderTopWidth+a.borderBottomWidth))},yp=function(t){var s=t.styles,a=t.bounds,r=Ga(s.paddingLeft,a.width),o=Ga(s.paddingRight,a.width),l=Ga(s.paddingTop,a.width),A=Ga(s.paddingBottom,a.width);return a.add(r+s.borderLeftWidth,l+s.borderTopWidth,-(s.borderRightWidth+s.borderLeftWidth+r+o),-(s.borderTopWidth+s.borderBottomWidth+l+A))},iF=function(t,s){return t===0?s.bounds:t===2?yp(s):Yw(s)},oF=function(t,s){return t===0?s.bounds:t===2?yp(s):Yw(s)},qm=function(t,s,a){var r=iF(RA(t.styles.backgroundOrigin,s),t),o=oF(RA(t.styles.backgroundClip,s),t),l=lF(RA(t.styles.backgroundSize,s),a,r),A=l[0],u=l[1],h=zd(RA(t.styles.backgroundPosition,s),r.width-A,r.height-u),p=cF(RA(t.styles.backgroundRepeat,s),h,l,r,o),m=Math.round(r.left+h[0]),v=Math.round(r.top+h[1]);return[p,m,v,A,u]},EA=function(t){return La(t)&&t.value===IA.AUTO},Xh=function(t){return typeof t=="number"},lF=function(t,s,a){var r=s[0],o=s[1],l=s[2],A=t[0],u=t[1];if(!A)return[0,0];if(Mn(A)&&u&&Mn(u))return[Ga(A,a.width),Ga(u,a.height)];var h=Xh(l);if(La(A)&&(A.value===IA.CONTAIN||A.value===IA.COVER)){if(Xh(l)){var p=a.width/a.height;return p<l!=(A.value===IA.COVER)?[a.width,a.width/l]:[a.height*l,a.height]}return[a.width,a.height]}var m=Xh(r),v=Xh(o),b=m||v;if(EA(A)&&(!u||EA(u))){if(m&&v)return[r,o];if(!h&&!b)return[a.width,a.height];if(b&&h){var x=m?r:o*l,C=v?o:r/l;return[x,C]}var Q=m?r:a.width,j=v?o:a.height;return[Q,j]}if(h){var B=0,L=0;return Mn(A)?B=Ga(A,a.width):Mn(u)&&(L=Ga(u,a.height)),EA(A)?B=L*l:(!u||EA(u))&&(L=B/l),[B,L]}var P=null,F=null;if(Mn(A)?P=Ga(A,a.width):u&&Mn(u)&&(F=Ga(u,a.height)),P!==null&&(!u||EA(u))&&(F=m&&v?P/r*o:a.height),F!==null&&EA(A)&&(P=m&&v?F/o*r:a.width),P!==null&&F!==null)return[P,F];throw new Error("Unable to calculate background-size for element")},RA=function(t,s){var a=t[s];return typeof a>"u"?t[0]:a},cF=function(t,s,a,r,o){var l=s[0],A=s[1],u=a[0],h=a[1];switch(t){case 2:return[new Yt(Math.round(r.left),Math.round(r.top+A)),new Yt(Math.round(r.left+r.width),Math.round(r.top+A)),new Yt(Math.round(r.left+r.width),Math.round(h+r.top+A)),new Yt(Math.round(r.left),Math.round(h+r.top+A))];case 3:return[new Yt(Math.round(r.left+l),Math.round(r.top)),new Yt(Math.round(r.left+l+u),Math.round(r.top)),new Yt(Math.round(r.left+l+u),Math.round(r.height+r.top)),new Yt(Math.round(r.left+l),Math.round(r.height+r.top))];case 1:return[new Yt(Math.round(r.left+l),Math.round(r.top+A)),new Yt(Math.round(r.left+l+u),Math.round(r.top+A)),new Yt(Math.round(r.left+l+u),Math.round(r.top+A+h)),new Yt(Math.round(r.left+l),Math.round(r.top+A+h))];default:return[new Yt(Math.round(o.left),Math.round(o.top)),new Yt(Math.round(o.left+o.width),Math.round(o.top)),new Yt(Math.round(o.left+o.width),Math.round(o.height+o.top)),new Yt(Math.round(o.left),Math.round(o.height+o.top))]}},AF="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",Cb="Hidden Text",dF=function(){function t(s){this._data={},this._document=s}return t.prototype.parseMetrics=function(s,a){var r=this._document.createElement("div"),o=this._document.createElement("img"),l=this._document.createElement("span"),A=this._document.body;r.style.visibility="hidden",r.style.fontFamily=s,r.style.fontSize=a,r.style.margin="0",r.style.padding="0",r.style.whiteSpace="nowrap",A.appendChild(r),o.src=AF,o.width=1,o.height=1,o.style.margin="0",o.style.padding="0",o.style.verticalAlign="baseline",l.style.fontFamily=s,l.style.fontSize=a,l.style.margin="0",l.style.padding="0",l.appendChild(this._document.createTextNode(Cb)),r.appendChild(l),r.appendChild(o);var u=o.offsetTop-l.offsetTop+2;r.removeChild(l),r.appendChild(this._document.createTextNode(Cb)),r.style.lineHeight="normal",o.style.verticalAlign="super";var h=o.offsetTop-r.offsetTop+2;return A.removeChild(r),{baseline:u,middle:h}},t.prototype.getMetrics=function(s,a){var r=s+" "+a;return typeof this._data[r]>"u"&&(this._data[r]=this.parseMetrics(s,a)),this._data[r]},t}(),Xw=function(){function t(s,a){this.context=s,this.options=a}return t}(),uF=1e4,hF=function(t){jo(s,t);function s(a,r){var o=t.call(this,a,r)||this;return o._activeEffects=[],o.canvas=r.canvas?r.canvas:document.createElement("canvas"),o.ctx=o.canvas.getContext("2d"),r.canvas||(o.canvas.width=Math.floor(r.width*r.scale),o.canvas.height=Math.floor(r.height*r.scale),o.canvas.style.width=r.width+"px",o.canvas.style.height=r.height+"px"),o.fontMetrics=new dF(document),o.ctx.scale(o.options.scale,o.options.scale),o.ctx.translate(-r.x,-r.y),o.ctx.textBaseline="bottom",o._activeEffects=[],o.context.logger.debug("Canvas renderer initialized ("+r.width+"x"+r.height+") with scale "+r.scale),o}return s.prototype.applyEffects=function(a){for(var r=this;this._activeEffects.length;)this.popEffect();a.forEach(function(o){return r.applyEffect(o)})},s.prototype.applyEffect=function(a){this.ctx.save(),eF(a)&&(this.ctx.globalAlpha=a.opacity),Zk(a)&&(this.ctx.translate(a.offsetX,a.offsetY),this.ctx.transform(a.matrix[0],a.matrix[1],a.matrix[2],a.matrix[3],a.matrix[4],a.matrix[5]),this.ctx.translate(-a.offsetX,-a.offsetY)),Gw(a)&&(this.path(a.path),this.ctx.clip()),this._activeEffects.push(a)},s.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},s.prototype.renderStack=function(a){return $r(this,void 0,void 0,function(){var r;return Er(this,function(o){switch(o.label){case 0:return r=a.element.container.styles,r.isVisible()?[4,this.renderStackContent(a)]:[3,2];case 1:o.sent(),o.label=2;case 2:return[2]}})})},s.prototype.renderNode=function(a){return $r(this,void 0,void 0,function(){return Er(this,function(r){switch(r.label){case 0:if(Yn(a.container.flags,16))debugger;return a.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(a)]:[3,3];case 1:return r.sent(),[4,this.renderNodeContent(a)];case 2:r.sent(),r.label=3;case 3:return[2]}})})},s.prototype.renderTextWithLetterSpacing=function(a,r,o){var l=this;if(r===0)this.ctx.fillText(a.text,a.bounds.left,a.bounds.top+o);else{var A=Xg(a.text);A.reduce(function(u,h){return l.ctx.fillText(h,u,a.bounds.top+o),u+l.ctx.measureText(h).width},a.bounds.left)}},s.prototype.createFontStyle=function(a){var r=a.fontVariant.filter(function(A){return A==="normal"||A==="small-caps"}).join(""),o=xF(a.fontFamily).join(", "),l=xu(a.fontSize)?""+a.fontSize.number+a.fontSize.unit:a.fontSize.number+"px";return[[a.fontStyle,r,a.fontWeight,l,o].join(" "),o,l]},s.prototype.renderTextNode=function(a,r){return $r(this,void 0,void 0,function(){var o,l,A,u,h,p,m,v,b=this;return Er(this,function(x){return o=this.createFontStyle(r),l=o[0],A=o[1],u=o[2],this.ctx.font=l,this.ctx.direction=r.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",h=this.fontMetrics.getMetrics(A,u),p=h.baseline,m=h.middle,v=r.paintOrder,a.textBounds.forEach(function(C){v.forEach(function(Q){switch(Q){case 0:b.ctx.fillStyle=cr(r.color),b.renderTextWithLetterSpacing(C,r.letterSpacing,p);var j=r.textShadow;j.length&&C.text.trim().length&&(j.slice(0).reverse().forEach(function(B){b.ctx.shadowColor=cr(B.color),b.ctx.shadowOffsetX=B.offsetX.number*b.options.scale,b.ctx.shadowOffsetY=B.offsetY.number*b.options.scale,b.ctx.shadowBlur=B.blur.number,b.renderTextWithLetterSpacing(C,r.letterSpacing,p)}),b.ctx.shadowColor="",b.ctx.shadowOffsetX=0,b.ctx.shadowOffsetY=0,b.ctx.shadowBlur=0),r.textDecorationLine.length&&(b.ctx.fillStyle=cr(r.textDecorationColor||r.color),r.textDecorationLine.forEach(function(B){switch(B){case 1:b.ctx.fillRect(C.bounds.left,Math.round(C.bounds.top+p),C.bounds.width,1);break;case 2:b.ctx.fillRect(C.bounds.left,Math.round(C.bounds.top),C.bounds.width,1);break;case 3:b.ctx.fillRect(C.bounds.left,Math.ceil(C.bounds.top+m),C.bounds.width,1);break}}));break;case 1:r.webkitTextStrokeWidth&&C.text.trim().length&&(b.ctx.strokeStyle=cr(r.webkitTextStrokeColor),b.ctx.lineWidth=r.webkitTextStrokeWidth,b.ctx.lineJoin=window.chrome?"miter":"round",b.ctx.strokeText(C.text,C.bounds.left,C.bounds.top+p)),b.ctx.strokeStyle="",b.ctx.lineWidth=0,b.ctx.lineJoin="miter";break}})}),[2]})})},s.prototype.renderReplacedElement=function(a,r,o){if(o&&a.intrinsicWidth>0&&a.intrinsicHeight>0){var l=yp(a),A=xp(r);this.path(A),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(o,0,0,a.intrinsicWidth,a.intrinsicHeight,l.left,l.top,l.width,l.height),this.ctx.restore()}},s.prototype.renderNodeContent=function(a){return $r(this,void 0,void 0,function(){var r,o,l,A,u,h,L,L,p,m,v,b,F,x,C,ee,Q,j,B,L,P,F,ee;return Er(this,function(K){switch(K.label){case 0:this.applyEffects(a.getEffects(4)),r=a.container,o=a.curves,l=r.styles,A=0,u=r.textNodes,K.label=1;case 1:return A<u.length?(h=u[A],[4,this.renderTextNode(h,l)]):[3,4];case 2:K.sent(),K.label=3;case 3:return A++,[3,1];case 4:if(!(r instanceof kw))return[3,8];K.label=5;case 5:return K.trys.push([5,7,,8]),[4,this.context.cache.match(r.src)];case 6:return L=K.sent(),this.renderReplacedElement(r,o,L),[3,8];case 7:return K.sent(),this.context.logger.error("Error loading image "+r.src),[3,8];case 8:if(r instanceof Fw&&this.renderReplacedElement(r,o,r.canvas),!(r instanceof Uw))return[3,12];K.label=9;case 9:return K.trys.push([9,11,,12]),[4,this.context.cache.match(r.svg)];case 10:return L=K.sent(),this.renderReplacedElement(r,o,L),[3,12];case 11:return K.sent(),this.context.logger.error("Error loading svg "+r.svg.substring(0,255)),[3,12];case 12:return r instanceof Tw&&r.tree?(p=new s(this.context,{scale:this.options.scale,backgroundColor:r.backgroundColor,x:0,y:0,width:r.width,height:r.height}),[4,p.render(r.tree)]):[3,14];case 13:m=K.sent(),r.width&&r.height&&this.ctx.drawImage(m,0,0,r.width,r.height,r.bounds.left,r.bounds.top,r.bounds.width,r.bounds.height),K.label=14;case 14:if(r instanceof Jg&&(v=Math.min(r.bounds.width,r.bounds.height),r.type===hp?r.checked&&(this.ctx.save(),this.path([new Yt(r.bounds.left+v*.39363,r.bounds.top+v*.79),new Yt(r.bounds.left+v*.16,r.bounds.top+v*.5549),new Yt(r.bounds.left+v*.27347,r.bounds.top+v*.44071),new Yt(r.bounds.left+v*.39694,r.bounds.top+v*.5649),new Yt(r.bounds.left+v*.72983,r.bounds.top+v*.23),new Yt(r.bounds.left+v*.84,r.bounds.top+v*.34085),new Yt(r.bounds.left+v*.39363,r.bounds.top+v*.79)]),this.ctx.fillStyle=cr(pb),this.ctx.fill(),this.ctx.restore()):r.type===pp&&r.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(r.bounds.left+v/2,r.bounds.top+v/2,v/4,0,Math.PI*2,!0),this.ctx.fillStyle=cr(pb),this.ctx.fill(),this.ctx.restore())),pF(r)&&r.value.length){switch(b=this.createFontStyle(l),F=b[0],x=b[1],C=this.fontMetrics.getMetrics(F,x).baseline,this.ctx.font=F,this.ctx.fillStyle=cr(l.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=mF(r.styles.textAlign),ee=yp(r),Q=0,r.styles.textAlign){case 1:Q+=ee.width/2;break;case 2:Q+=ee.width;break}j=ee.add(Q,0,0,-ee.height/2+1),this.ctx.save(),this.path([new Yt(ee.left,ee.top),new Yt(ee.left+ee.width,ee.top),new Yt(ee.left+ee.width,ee.top+ee.height),new Yt(ee.left,ee.top+ee.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new tu(r.value,j),l.letterSpacing,C),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!Yn(r.styles.display,2048))return[3,20];if(r.styles.listStyleImage===null)return[3,19];if(B=r.styles.listStyleImage,B.type!==0)return[3,18];L=void 0,P=B.url,K.label=15;case 15:return K.trys.push([15,17,,18]),[4,this.context.cache.match(P)];case 16:return L=K.sent(),this.ctx.drawImage(L,r.bounds.left-(L.width+10),r.bounds.top),[3,18];case 17:return K.sent(),this.context.logger.error("Error loading list-style-image "+P),[3,18];case 18:return[3,20];case 19:a.listValue&&r.styles.listStyleType!==-1&&(F=this.createFontStyle(l)[0],this.ctx.font=F,this.ctx.fillStyle=cr(l.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",ee=new bl(r.bounds.left,r.bounds.top+Ga(r.styles.paddingTop,r.bounds.width),r.bounds.width,Xv(l.lineHeight,l.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new tu(a.listValue,ee),l.letterSpacing,Xv(l.lineHeight,l.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),K.label=20;case 20:return[2]}})})},s.prototype.renderStackContent=function(a){return $r(this,void 0,void 0,function(){var r,o,B,l,A,B,u,h,B,p,m,B,v,b,B,x,C,B,Q,j,B;return Er(this,function(L){switch(L.label){case 0:if(Yn(a.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(a.element)];case 1:L.sent(),r=0,o=a.negativeZIndex,L.label=2;case 2:return r<o.length?(B=o[r],[4,this.renderStack(B)]):[3,5];case 3:L.sent(),L.label=4;case 4:return r++,[3,2];case 5:return[4,this.renderNodeContent(a.element)];case 6:L.sent(),l=0,A=a.nonInlineLevel,L.label=7;case 7:return l<A.length?(B=A[l],[4,this.renderNode(B)]):[3,10];case 8:L.sent(),L.label=9;case 9:return l++,[3,7];case 10:u=0,h=a.nonPositionedFloats,L.label=11;case 11:return u<h.length?(B=h[u],[4,this.renderStack(B)]):[3,14];case 12:L.sent(),L.label=13;case 13:return u++,[3,11];case 14:p=0,m=a.nonPositionedInlineLevel,L.label=15;case 15:return p<m.length?(B=m[p],[4,this.renderStack(B)]):[3,18];case 16:L.sent(),L.label=17;case 17:return p++,[3,15];case 18:v=0,b=a.inlineLevel,L.label=19;case 19:return v<b.length?(B=b[v],[4,this.renderNode(B)]):[3,22];case 20:L.sent(),L.label=21;case 21:return v++,[3,19];case 22:x=0,C=a.zeroOrAutoZIndexOrTransformedOrOpacity,L.label=23;case 23:return x<C.length?(B=C[x],[4,this.renderStack(B)]):[3,26];case 24:L.sent(),L.label=25;case 25:return x++,[3,23];case 26:Q=0,j=a.positiveZIndex,L.label=27;case 27:return Q<j.length?(B=j[Q],[4,this.renderStack(B)]):[3,30];case 28:L.sent(),L.label=29;case 29:return Q++,[3,27];case 30:return[2]}})})},s.prototype.mask=function(a){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(a.slice(0).reverse()),this.ctx.closePath()},s.prototype.path=function(a){this.ctx.beginPath(),this.formatPath(a),this.ctx.closePath()},s.prototype.formatPath=function(a){var r=this;a.forEach(function(o,l){var A=Vi(o)?o.start:o;l===0?r.ctx.moveTo(A.x,A.y):r.ctx.lineTo(A.x,A.y),Vi(o)&&r.ctx.bezierCurveTo(o.startControl.x,o.startControl.y,o.endControl.x,o.endControl.y,o.end.x,o.end.y)})},s.prototype.renderRepeat=function(a,r,o,l){this.path(a),this.ctx.fillStyle=r,this.ctx.translate(o,l),this.ctx.fill(),this.ctx.translate(-o,-l)},s.prototype.resizeImage=function(a,r,o){var l;if(a.width===r&&a.height===o)return a;var A=(l=this.canvas.ownerDocument)!==null&&l!==void 0?l:document,u=A.createElement("canvas");u.width=Math.max(1,r),u.height=Math.max(1,o);var h=u.getContext("2d");return h.drawImage(a,0,0,a.width,a.height,0,0,r,o),u},s.prototype.renderBackgroundImage=function(a){return $r(this,void 0,void 0,function(){var r,o,l,A,u,h;return Er(this,function(p){switch(p.label){case 0:r=a.styles.backgroundImage.length-1,o=function(m){var v,b,x,V,Z,fe,M,re,E,C,V,Z,fe,M,re,Q,j,B,L,P,F,ee,K,q,E,U,V,H,I,M,re,G,Z,fe,Ae,Ce,te,he,k,T,z,le;return Er(this,function(X){switch(X.label){case 0:if(m.type!==0)return[3,5];v=void 0,b=m.url,X.label=1;case 1:return X.trys.push([1,3,,4]),[4,l.context.cache.match(b)];case 2:return v=X.sent(),[3,4];case 3:return X.sent(),l.context.logger.error("Error loading background-image "+b),[3,4];case 4:return v&&(x=qm(a,r,[v.width,v.height,v.width/v.height]),V=x[0],Z=x[1],fe=x[2],M=x[3],re=x[4],E=l.ctx.createPattern(l.resizeImage(v,M,re),"repeat"),l.renderRepeat(V,E,Z,fe)),[3,6];case 5:Z4(m)?(C=qm(a,r,[null,null,null]),V=C[0],Z=C[1],fe=C[2],M=C[3],re=C[4],Q=$4(m.angle,M,re),j=Q[0],B=Q[1],L=Q[2],P=Q[3],F=Q[4],ee=document.createElement("canvas"),ee.width=M,ee.height=re,K=ee.getContext("2d"),q=K.createLinearGradient(B,P,L,F),Wv(m.stops,j).forEach(function(W){return q.addColorStop(W.stop,cr(W.color))}),K.fillStyle=q,K.fillRect(0,0,M,re),M>0&&re>0&&(E=l.ctx.createPattern(ee,"repeat"),l.renderRepeat(V,E,Z,fe))):eS(m)&&(U=qm(a,r,[null,null,null]),V=U[0],H=U[1],I=U[2],M=U[3],re=U[4],G=m.position.length===0?[$g]:m.position,Z=Ga(G[0],M),fe=Ga(G[G.length-1],re),Ae=W4(m,Z,fe,M,re),Ce=Ae[0],te=Ae[1],Ce>0&&te>0&&(he=l.ctx.createRadialGradient(H+Z,I+fe,0,H+Z,I+fe,Ce),Wv(m.stops,Ce*2).forEach(function(W){return he.addColorStop(W.stop,cr(W.color))}),l.path(V),l.ctx.fillStyle=he,Ce!==te?(k=a.bounds.left+.5*a.bounds.width,T=a.bounds.top+.5*a.bounds.height,z=te/Ce,le=1/z,l.ctx.save(),l.ctx.translate(k,T),l.ctx.transform(1,0,0,z,0,0),l.ctx.translate(-k,-T),l.ctx.fillRect(H,le*(I-T)+T,M,re*le),l.ctx.restore()):l.ctx.fill())),X.label=6;case 6:return r--,[2]}})},l=this,A=0,u=a.styles.backgroundImage.slice(0).reverse(),p.label=1;case 1:return A<u.length?(h=u[A],[5,o(h)]):[3,4];case 2:p.sent(),p.label=3;case 3:return A++,[3,1];case 4:return[2]}})})},s.prototype.renderSolidBorder=function(a,r,o){return $r(this,void 0,void 0,function(){return Er(this,function(l){return this.path(Nb(o,r)),this.ctx.fillStyle=cr(a),this.ctx.fill(),[2]})})},s.prototype.renderDoubleBorder=function(a,r,o,l){return $r(this,void 0,void 0,function(){var A,u;return Er(this,function(h){switch(h.label){case 0:return r<3?[4,this.renderSolidBorder(a,o,l)]:[3,2];case 1:return h.sent(),[2];case 2:return A=aF(l,o),this.path(A),this.ctx.fillStyle=cr(a),this.ctx.fill(),u=nF(l,o),this.path(u),this.ctx.fill(),[2]}})})},s.prototype.renderNodeBackgroundAndBorders=function(a){return $r(this,void 0,void 0,function(){var r,o,l,A,u,h,p,m,v=this;return Er(this,function(b){switch(b.label){case 0:return this.applyEffects(a.getEffects(2)),r=a.container.styles,o=!cc(r.backgroundColor)||r.backgroundImage.length,l=[{style:r.borderTopStyle,color:r.borderTopColor,width:r.borderTopWidth},{style:r.borderRightStyle,color:r.borderRightColor,width:r.borderRightWidth},{style:r.borderBottomStyle,color:r.borderBottomColor,width:r.borderBottomWidth},{style:r.borderLeftStyle,color:r.borderLeftColor,width:r.borderLeftWidth}],A=fF(RA(r.backgroundClip,0),a.curves),o||r.boxShadow.length?(this.ctx.save(),this.path(A),this.ctx.clip(),cc(r.backgroundColor)||(this.ctx.fillStyle=cr(r.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(a.container)]):[3,2];case 1:b.sent(),this.ctx.restore(),r.boxShadow.slice(0).reverse().forEach(function(x){v.ctx.save();var C=gp(a.curves),Q=x.inset?0:uF,j=tF(C,-Q+(x.inset?1:-1)*x.spread.number,(x.inset?1:-1)*x.spread.number,x.spread.number*(x.inset?-2:2),x.spread.number*(x.inset?-2:2));x.inset?(v.path(C),v.ctx.clip(),v.mask(j)):(v.mask(C),v.ctx.clip(),v.path(j)),v.ctx.shadowOffsetX=x.offsetX.number+Q,v.ctx.shadowOffsetY=x.offsetY.number,v.ctx.shadowColor=cr(x.color),v.ctx.shadowBlur=x.blur.number,v.ctx.fillStyle=x.inset?cr(x.color):"rgba(0,0,0,1)",v.ctx.fill(),v.ctx.restore()}),b.label=2;case 2:u=0,h=0,p=l,b.label=3;case 3:return h<p.length?(m=p[h],m.style!==0&&!cc(m.color)&&m.width>0?m.style!==2?[3,5]:[4,this.renderDashedDottedBorder(m.color,m.width,u,a.curves,2)]:[3,11]):[3,13];case 4:return b.sent(),[3,11];case 5:return m.style!==3?[3,7]:[4,this.renderDashedDottedBorder(m.color,m.width,u,a.curves,3)];case 6:return b.sent(),[3,11];case 7:return m.style!==4?[3,9]:[4,this.renderDoubleBorder(m.color,m.width,u,a.curves)];case 8:return b.sent(),[3,11];case 9:return[4,this.renderSolidBorder(m.color,u,a.curves)];case 10:b.sent(),b.label=11;case 11:u++,b.label=12;case 12:return h++,[3,3];case 13:return[2]}})})},s.prototype.renderDashedDottedBorder=function(a,r,o,l,A){return $r(this,void 0,void 0,function(){var u,h,p,m,v,b,x,C,Q,j,B,L,P,F,ee,K,ee,K;return Er(this,function(q){return this.ctx.save(),u=rF(l,o),h=Nb(l,o),A===2&&(this.path(h),this.ctx.clip()),Vi(h[0])?(p=h[0].start.x,m=h[0].start.y):(p=h[0].x,m=h[0].y),Vi(h[1])?(v=h[1].end.x,b=h[1].end.y):(v=h[1].x,b=h[1].y),o===0||o===2?x=Math.abs(p-v):x=Math.abs(m-b),this.ctx.beginPath(),A===3?this.formatPath(u):this.formatPath(h.slice(0,2)),C=r<3?r*3:r*2,Q=r<3?r*2:r,A===3&&(C=r,Q=r),j=!0,x<=C*2?j=!1:x<=C*2+Q?(B=x/(2*C+Q),C*=B,Q*=B):(L=Math.floor((x+Q)/(C+Q)),P=(x-L*C)/(L-1),F=(x-(L+1)*C)/L,Q=F<=0||Math.abs(Q-P)<Math.abs(Q-F)?P:F),j&&(A===3?this.ctx.setLineDash([0,C+Q]):this.ctx.setLineDash([C,Q])),A===3?(this.ctx.lineCap="round",this.ctx.lineWidth=r):this.ctx.lineWidth=r*2+1.1,this.ctx.strokeStyle=cr(a),this.ctx.stroke(),this.ctx.setLineDash([]),A===2&&(Vi(h[0])&&(ee=h[3],K=h[0],this.ctx.beginPath(),this.formatPath([new Yt(ee.end.x,ee.end.y),new Yt(K.start.x,K.start.y)]),this.ctx.stroke()),Vi(h[1])&&(ee=h[1],K=h[2],this.ctx.beginPath(),this.formatPath([new Yt(ee.end.x,ee.end.y),new Yt(K.start.x,K.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},s.prototype.render=function(a){return $r(this,void 0,void 0,function(){var r;return Er(this,function(o){switch(o.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=cr(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),r=sF(a),[4,this.renderStack(r)];case 1:return o.sent(),this.applyEffects([]),[2,this.canvas]}})})},s}(Xw),pF=function(t){return t instanceof Qw||t instanceof Lw?!0:t instanceof Jg&&t.type!==pp&&t.type!==hp},fF=function(t,s){switch(t){case 0:return gp(s);case 2:return Yk(s);case 1:default:return xp(s)}},mF=function(t){switch(t){case 1:return"center";case 2:return"right";case 0:default:return"left"}},gF=["-apple-system","system-ui"],xF=function(t){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?t.filter(function(s){return gF.indexOf(s)===-1}):t},yF=function(t){jo(s,t);function s(a,r){var o=t.call(this,a,r)||this;return o.canvas=r.canvas?r.canvas:document.createElement("canvas"),o.ctx=o.canvas.getContext("2d"),o.options=r,o.canvas.width=Math.floor(r.width*r.scale),o.canvas.height=Math.floor(r.height*r.scale),o.canvas.style.width=r.width+"px",o.canvas.style.height=r.height+"px",o.ctx.scale(o.options.scale,o.options.scale),o.ctx.translate(-r.x,-r.y),o.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+r.width+"x"+r.height+" at "+r.x+","+r.y+") with scale "+r.scale),o}return s.prototype.render=function(a){return $r(this,void 0,void 0,function(){var r,o;return Er(this,function(l){switch(l.label){case 0:return r=_g(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,a),[4,vF(r)];case 1:return o=l.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=cr(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(o,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},s}(Xw),vF=function(t){return new Promise(function(s,a){var r=new Image;r.onload=function(){s(r)},r.onerror=a,r.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(t))})},bF=function(){function t(s){var a=s.id,r=s.enabled;this.id=a,this.enabled=r,this.start=Date.now()}return t.prototype.debug=function(){for(var s=[],a=0;a<arguments.length;a++)s[a]=arguments[a];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,kh([this.id,this.getTime()+"ms"],s)):this.info.apply(this,s))},t.prototype.getTime=function(){return Date.now()-this.start},t.prototype.info=function(){for(var s=[],a=0;a<arguments.length;a++)s[a]=arguments[a];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,kh([this.id,this.getTime()+"ms"],s))},t.prototype.warn=function(){for(var s=[],a=0;a<arguments.length;a++)s[a]=arguments[a];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,kh([this.id,this.getTime()+"ms"],s)):this.info.apply(this,s))},t.prototype.error=function(){for(var s=[],a=0;a<arguments.length;a++)s[a]=arguments[a];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,kh([this.id,this.getTime()+"ms"],s)):this.info.apply(this,s))},t.instances={},t}(),wF=function(){function t(s,a){var r;this.windowBounds=a,this.instanceName="#"+t.instanceCount++,this.logger=new bF({id:this.instanceName,enabled:s.logging}),this.cache=(r=s.cache)!==null&&r!==void 0?r:new Mk(this,s)}return t.instanceCount=1,t}(),Kc=function(t,s){return s===void 0&&(s={}),jF(t,s)};typeof window<"u"&&Kw.setContext(window);var jF=function(t,s){return $r(void 0,void 0,void 0,function(){var a,r,o,l,A,u,h,p,m,v,b,x,C,Q,j,B,L,P,F,ee,q,K,q,E,U,V,H,I,M,re,G,Z,fe,Ae,Ce,te,he,k,T,z;return Er(this,function(le){switch(le.label){case 0:if(!t||typeof t!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(a=t.ownerDocument,!a)throw new Error("Element is not attached to a Document");if(r=a.defaultView,!r)throw new Error("Document is not attached to a Window");return o={allowTaint:(E=s.allowTaint)!==null&&E!==void 0?E:!1,imageTimeout:(U=s.imageTimeout)!==null&&U!==void 0?U:15e3,proxy:s.proxy,useCORS:(V=s.useCORS)!==null&&V!==void 0?V:!1},l=cg({logging:(H=s.logging)!==null&&H!==void 0?H:!0,cache:s.cache},o),A={windowWidth:(I=s.windowWidth)!==null&&I!==void 0?I:r.innerWidth,windowHeight:(M=s.windowHeight)!==null&&M!==void 0?M:r.innerHeight,scrollX:(re=s.scrollX)!==null&&re!==void 0?re:r.pageXOffset,scrollY:(G=s.scrollY)!==null&&G!==void 0?G:r.pageYOffset},u=new bl(A.scrollX,A.scrollY,A.windowWidth,A.windowHeight),h=new wF(l,u),p=(Z=s.foreignObjectRendering)!==null&&Z!==void 0?Z:!1,m={allowTaint:(fe=s.allowTaint)!==null&&fe!==void 0?fe:!1,onclone:s.onclone,ignoreElements:s.ignoreElements,inlineImages:p,copyStyles:p},h.logger.debug("Starting document clone with size "+u.width+"x"+u.height+" scrolled to "+-u.left+","+-u.top),v=new jb(h,t,m),b=v.clonedReferenceElement,b?[4,v.toIFrame(a,u)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return x=le.sent(),C=Zg(b)||Bk(b)?tC(b.ownerDocument):kp(h,b),Q=C.width,j=C.height,B=C.left,L=C.top,P=_F(h,b,s.backgroundColor),F={canvas:s.canvas,backgroundColor:P,scale:(Ce=(Ae=s.scale)!==null&&Ae!==void 0?Ae:r.devicePixelRatio)!==null&&Ce!==void 0?Ce:1,x:((te=s.x)!==null&&te!==void 0?te:0)+B,y:((he=s.y)!==null&&he!==void 0?he:0)+L,width:(k=s.width)!==null&&k!==void 0?k:Math.ceil(Q),height:(T=s.height)!==null&&T!==void 0?T:Math.ceil(j)},p?(h.logger.debug("Document cloned, using foreign object rendering"),q=new yF(h,F),[4,q.render(b)]):[3,3];case 2:return ee=le.sent(),[3,5];case 3:return h.logger.debug("Document cloned, element located at "+B+","+L+" with size "+Q+"x"+j+" using computed rendering"),h.logger.debug("Starting DOM parsing"),K=Dw(h,b),P===K.styles.backgroundColor&&(K.styles.backgroundColor=yl.TRANSPARENT),h.logger.debug("Starting renderer for element at "+F.x+","+F.y+" with size "+F.width+"x"+F.height),q=new hF(h,F),[4,q.render(K)];case 4:ee=le.sent(),le.label=5;case 5:return(!((z=s.removeContainer)!==null&&z!==void 0)||z)&&(jb.destroy(x)||h.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),h.logger.debug("Finished rendering"),[2,ee]}})})},_F=function(t,s,a){var r=s.ownerDocument,o=r.documentElement?Zd(t,getComputedStyle(r.documentElement).backgroundColor):yl.TRANSPARENT,l=r.body?Zd(t,getComputedStyle(r.body).backgroundColor):yl.TRANSPARENT,A=typeof a=="string"?Zd(t,a):a===null?yl.TRANSPARENT:4294967295;return s===r.documentElement?cc(o)?cc(l)?A:l:o:A};const Au=Object.freeze(Object.defineProperty({__proto__:null,default:Kc},Symbol.toStringTag,{value:"Module"})),Jw=({options:t,value:s,onChange:a,placeholder:r})=>{const[o,l]=N.useState(!1),[A,u]=N.useState(""),[h,p]=N.useState(t),m=N.useRef(null);N.useEffect(()=>{if(A){const b=t.filter(x=>x.toLowerCase().includes(A.toLowerCase()));p(b)}else p(t)},[A,t]),N.useEffect(()=>{const b=x=>{m.current&&!m.current.contains(x.target)&&l(!1)};return document.addEventListener("mousedown",b),()=>{document.removeEventListener("mousedown",b)}},[]);const v=b=>{a(b),l(!1),u("")};return e.jsxs("div",{className:"searchable-dropdown",ref:m,children:[e.jsxs("div",{className:"dropdown-input-container",children:[e.jsx("input",{type:"text",className:"dropdown-input",value:s||A,onChange:b=>{u(b.target.value),o||l(!0),b.target.value||a("")},onClick:()=>l(!0),placeholder:r||"Search..."}),e.jsx("div",{className:"dropdown-arrow",onClick:()=>l(!o),children:""})]}),o&&e.jsx("ul",{className:"dropdown-options",children:h.length>0?h.map((b,x)=>e.jsx("li",{onClick:()=>v(b),className:s===b?"selected":"",children:b},x)):e.jsx("li",{className:"no-options",children:"No matches found"})})]})},BF=["Mumbai","Delhi","Bangalore","Hyderabad","Chennai","Kolkata","Pune","Ahmedabad","Jaipur","Surat","Lucknow","Kanpur","Nagpur","Indore","Thane","Bhopal","Visakhapatnam","Pimpri-Chinchwad","Patna","Vadodara","Ghaziabad","Ludhiana","Agra","Nashik","Faridabad","Meerut","Rajkot","Kalyan-Dombivli","Vasai-Virar","Varanasi","Srinagar","Aurangabad","Dhanbad","Amritsar","Navi Mumbai","Allahabad","Ranchi","Howrah","Coimbatore","Jabalpur","Gwalior","Vijayawada","Jodhpur","Madurai","Raipur","Kota","Guwahati","Chandigarh","Solapur","Hubli-Dharwad","Mysore","Tiruchirappalli","Bareilly","Aligarh","Tiruppur","Gurgaon","Moradabad","Jalandhar","Bhubaneswar","Salem","Warangal","Mira-Bhayandar","Jalgaon","Guntur","Thiruvananthapuram","Bhiwandi","Saharanpur","Gorakhpur","Bikaner","Amravati","Noida","Jamshedpur","Bhilai","Cuttack","Firozabad","Kochi","Nellore","Bhavnagar","Dehradun","Durgapur","Asansol","Rourkela","Nanded","Kolhapur","Ajmer","Akola","Gulbarga","Jamnagar","Ujjain","Loni","Siliguri","Jhansi","Ulhasnagar","Jammu","Sangli-Miraj & Kupwad","Mangalore","Erode","Belgaum","Kurnool","Ambattur","Rajahmundry","Tirunelveli","Malegaon","Gaya","Tirupati","Udaipur","Kakinada","Davanagere","Kozhikode","Maheshtala","Rajpur Sonarpur","Bokaro","South Dumdum","Bellary","Patiala","Gopalpur","Agartala","Bhagalpur","Muzaffarnagar","Bhatpara","Panihati","Latur","Dhule","Rohtak","Sagar","Korba","Bhilwara","Berhampur","Muzaffarpur","Ahmednagar","Mathura","Kollam","Avadi","Kadapa","Anantapur","Kamarhati","Bilaspur","Shahjahanpur","Satara","Bijapur","Rampur","Shivamogga","Chandrapur","Junagadh","Thrissur","Alwar","Bardhaman","Kulti","Karawal Nagar","Sikar","Hardwar","Hisar","Katihar","Barasat","Purnia","Satna","Mau","Sonipat","Farrukhabad","Darbhanga","Karimnagar","Dindigul","Gandhinagar","Hospet","Eluru","Deoghar","Chapra","Brahmapur","Alappuzha","Pali","Aizawl","Imphal","Kohima","Shillong","Gangtok","Itanagar","Panaji","Silvassa","Daman","Kavaratti","Port Blair","Aluva","Angamaly","Changanassery","Chengannur","Cherthala","Edappal","Irinjalakuda","Kalpetta","Kanjirappally","Karunagappally","Kasaragod","Kayamkulam","Koduvally","Kothamangalam","Kottakkal","Kottarakkara","Kottayam","Kunnamkulam","Kuthuparamba","Mananthavady","Manjeri","Mattanur","Mavelikkara","Muvattupuzha","Nedumangad","Neyyattinkara","Nilambur","Ottapalam","Palakkad","Paravur","Pathanamthitta","Payyannur","Perinthalmanna","Ponnani","Punalur","Taliparamba","Thalassery","Thiruvalla","Thodupuzha","Tirur","Tirurangadi","Vadakara","Varkala","Attingal","Kilimanoor","Kattakkada","Chavara","Anchal","Chathannoor","Adoor","Ranni","Pandalam","Kozhencherry","Konni","Haripad","Ambalappuzha","Pala","Ettumanoor","Vaikom","Kattappana","Kumily","Nedumkandam","Munnar","Perumbavoor","Tripunithura","Thrikkakara","Kalamassery","North Paravur","Koothattukulam","Vypin","Chalakudy","Chavakkad","Kodungallur","Wadakkanchery","Guruvayur","Shoranur","Pattambi","Mannarkkad","Chittur-Thathamangalam","Alathur","Malappuram","Kondotty","Tanur","Parappanangadi","Areekode","Valanchery","Koyilandy","Ramanattukara","Feroke","Payyoli","Sulthan Bathery","Kannur","Iritty","Kanhangad","Nileshwar","Pathanapuram"];function vp(t){switch(String(t||"").toLowerCase()){case"approved":case"accepted":case"active":case"success":return"accepted";case"rejected":case"declined":case"error":case"suspended":return"rejected";case"pending":case"awaiting":case"in_review":case"processing":default:return"pending"}}function du(t){if(!t)return"Pending";const s=String(t).toLowerCase();return{pending:"Pending",awaiting:"Awaiting",in_review:"In Review",processing:"Processing",approved:"Approved",accepted:"Accepted",rejected:"Rejected",declined:"Declined",suspended:"Suspended",finalized:"Finalized",shortlisted:"Shortlisted",completed:"Completed",active:"Active",inactive:"Inactive",success:"Success",error:"Error"}[s]||s.charAt(0).toUpperCase()+s.slice(1)}const NF=({project:t})=>{const[s,a]=N.useState({weeks:[],planned:[],actual:[]});return N.useEffect(()=>{t&&t.progressData?a({weeks:t.progressData.labels||[],planned:t.progressData.datasets?.[0]?.data||[],actual:t.progressData.datasets?.[1]?.data||[]}):a({weeks:[],planned:[],actual:[]})},[t]),s.weeks.length?e.jsxs("div",{className:"progress-chart-container",children:[e.jsxs("div",{className:"chart-legend",children:[e.jsxs("div",{className:"legend-item",children:[e.jsx("div",{className:"legend-color",style:{backgroundColor:"#2563eb"}}),e.jsx("span",{children:"Planned Progress"})]}),e.jsxs("div",{className:"legend-item",children:[e.jsx("div",{className:"legend-color",style:{backgroundColor:"#10b981"}}),e.jsx("span",{children:"Actual Progress"})]})]}),e.jsx("div",{className:"simple-chart",children:s.weeks.map((r,o)=>e.jsxs("div",{className:"chart-column",children:[e.jsxs("div",{className:"chart-bars",children:[e.jsx("div",{className:"chart-bar planned",style:{height:`${s.planned[o]}%`},title:`Planned: ${s.planned[o]}%`}),e.jsx("div",{className:"chart-bar actual",style:{height:`${s.actual[o]}%`},title:`Actual: ${s.actual[o]}%`})]}),e.jsx("div",{className:"chart-label",children:r})]},o))})]}):e.jsx("div",{className:"empty-state",children:"No progress data available"})},CF=({project:t})=>{const[s,a]=N.useState(null);if(N.useEffect(()=>{t&&t.budgetData?a(t.budgetData):a(null)},[t]),!s)return e.jsx("div",{className:"empty-state",children:"No budget data available"});const r=Math.round(s.spent/s.totalBudget*100);return e.jsxs("div",{className:"budget-tracker",children:[e.jsxs("div",{className:"budget-summary",children:[e.jsxs("div",{className:"budget-total",children:[e.jsx("h3",{children:"Total Budget"}),e.jsxs("p",{className:"budget-amount",children:["$",s.totalBudget.toLocaleString()]})]}),e.jsxs("div",{className:"budget-progress",children:[e.jsx("div",{className:"progress-bar-container",children:e.jsx("div",{className:"progress-bar",style:{width:`${r}%`}})}),e.jsxs("div",{className:"budget-stats",children:[e.jsxs("div",{className:"stat",children:[e.jsx("span",{className:"label",children:"Spent"}),e.jsxs("span",{className:"value",children:["$",s.spent.toLocaleString()," (",r,"%)"]})]}),e.jsxs("div",{className:"stat",children:[e.jsx("span",{className:"label",children:"Remaining"}),e.jsxs("span",{className:"value",children:["$",s.remaining.toLocaleString()]})]})]})]})]}),e.jsxs("div",{className:"budget-categories",children:[e.jsx("h3",{children:"Budget Breakdown"}),s.categories.map((o,l)=>{const A=Math.round(o.spent/o.allocated*100);return e.jsxs("div",{className:"category",children:[e.jsxs("div",{className:"category-header",children:[e.jsx("span",{className:"category-name",children:o.name}),e.jsxs("span",{className:"category-figures",children:[e.jsxs("span",{className:"spent",children:["$",o.spent.toLocaleString()]}),e.jsxs("span",{className:"allocated",children:["/$",o.allocated.toLocaleString()]})]})]}),e.jsx("div",{className:"category-progress-container",children:e.jsx("div",{className:"category-progress",style:{width:`${A}%`}})})]},l)})]})]})};var Zw={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Sb=Ar.createContext&&Ar.createContext(Zw),SF=["attr","size","title"];function kF(t,s){if(t==null)return{};var a=FF(t,s),r,o;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(o=0;o<l.length;o++)r=l[o],!(s.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function FF(t,s){if(t==null)return{};var a={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(s.indexOf(r)>=0)continue;a[r]=t[r]}return a}function bp(){return bp=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},bp.apply(this,arguments)}function kb(t,s){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);s&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),a.push.apply(a,r)}return a}function wp(t){for(var s=1;s<arguments.length;s++){var a=arguments[s]!=null?arguments[s]:{};s%2?kb(Object(a),!0).forEach(function(r){UF(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):kb(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function UF(t,s,a){return s=EF(s),s in t?Object.defineProperty(t,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[s]=a,t}function EF(t){var s=LF(t,"string");return typeof s=="symbol"?s:s+""}function LF(t,s){if(typeof t!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,s);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(t)}function e2(t){return t&&t.map((s,a)=>Ar.createElement(s.tag,wp({key:a},s.attr),e2(s.child)))}function QF(t){return s=>Ar.createElement(TF,bp({attr:wp({},t.attr)},s),e2(t.child))}function TF(t){var s=a=>{var{attr:r,size:o,title:l}=t,A=kF(t,SF),u=o||a.size||"1em",h;return a.className&&(h=a.className),t.className&&(h=(h?h+" ":"")+t.className),Ar.createElement("svg",bp({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},a.attr,r,A,{className:h,style:wp(wp({color:t.color||a.color},a.style),t.style),height:u,width:u,xmlns:"http://www.w3.org/2000/svg"}),l&&Ar.createElement("title",null,l),t.children)};return Sb!==void 0?Ar.createElement(Sb.Consumer,null,a=>s(a)):s(Zw)}function RF(t){return QF({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 512c35.32 0 63.97-28.65 63.97-64H160.03c0 35.35 28.65 64 63.97 64zm215.39-149.71c-19.32-20.76-55.47-51.99-55.47-154.29 0-77.7-54.48-139.9-127.94-155.16V32c0-17.67-14.32-32-31.98-32s-31.98 14.33-31.98 32v20.84C118.56 68.1 64.08 130.3 64.08 208c0 102.3-36.15 133.53-55.47 154.29-6 6.45-8.66 14.16-8.61 21.71.11 16.4 12.98 32 32.1 32h383.8c19.12 0 32-15.6 32.1-32 .05-7.55-2.61-15.27-8.61-21.71z"},child:[]}]})(t)}const DF=({isOpen:t,onClose:s,userId:a})=>{const[r,o]=N.useState("notifications"),[l,A]=N.useState([]),[u,h]=N.useState([]),[p,m]=N.useState([]),[v,b]=N.useState(null),[x,C]=N.useState(!1),[Q,j]=N.useState(0);console.log("MessageCenter render - isOpen:",t,"userId:",a),N.useEffect(()=>{t&&a&&(console.log("MessageCenter opened, loading data..."),B(),L())},[t,a]);const B=async()=>{C(!0);try{const q=await(await fetch("/buildhub/backend/api/homeowner/get_notifications.php",{credentials:"include"})).json();q.success&&(A(q.notifications||[]),j(q.unread_count||0))}catch(K){console.error("Error loading notifications:",K)}finally{C(!1)}},L=async()=>{try{const q=await(await fetch("/buildhub/backend/api/homeowner/get_messages.php",{credentials:"include"})).json();q.success&&(h(q.messages||[]),m(q.threads||[]))}catch(K){console.error("Error loading messages:",K)}},P=async K=>{try{await fetch("/buildhub/backend/api/homeowner/mark_notifications_read.php",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({notification_ids:K})}),B()}catch(q){console.error("Error marking as read:",q)}},F=K=>{switch(K){case"estimate_received":return"";case"layout_approved":return"";case"construction_started":return"";case"message_sent":return"";case"message_received":return"";case"payment_required":return"";case"project_completed":return"";default:return""}},ee=K=>{const q=new Date(K),U=Math.floor((new Date-q)/1e3);return U<60?"Just now":U<3600?`${Math.floor(U/60)}m ago`:U<86400?`${Math.floor(U/3600)}h ago`:U<604800?`${Math.floor(U/86400)}d ago`:q.toLocaleDateString()};return t?e.jsx("div",{className:"message-center-overlay",onClick:s,children:e.jsxs("div",{className:"message-center",onClick:K=>K.stopPropagation(),children:[e.jsxs("div",{className:"message-center-header",children:[e.jsxs("h2",{children:[r==="notifications"?" Notifications":" Messages",Q>0&&e.jsx("span",{className:"unread-badge",children:Q})]}),e.jsx("button",{className:"close-btn",onClick:s,children:""})]}),e.jsxs("div",{className:"message-center-tabs",children:[e.jsxs("button",{className:`tab-btn ${r==="notifications"?"active":""}`,onClick:()=>o("notifications"),children:[" Notifications",Q>0&&e.jsx("span",{className:"tab-badge",children:Q})]}),e.jsxs("button",{className:`tab-btn ${r==="messages"?"active":""}`,onClick:()=>o("messages"),children:[" Messages",p.reduce((K,q)=>K+(q.unread_count||0),0)>0&&e.jsx("span",{className:"tab-badge",children:p.reduce((K,q)=>K+(q.unread_count||0),0)})]})]}),e.jsx("div",{className:"message-center-content",children:x?e.jsxs("div",{className:"loading-state",children:[e.jsx("div",{className:"spinner"}),e.jsx("p",{children:"Loading..."})]}):r==="notifications"?e.jsx("div",{className:"notifications-list",children:l.length===0?e.jsxs("div",{className:"empty-state",children:[e.jsx("div",{className:"empty-icon",children:""}),e.jsx("h3",{children:"No Notifications"}),e.jsx("p",{children:"You're all caught up! New notifications will appear here."})]}):l.map(K=>e.jsxs("div",{className:`notification-item ${K.is_read?"":"unread"}`,onClick:()=>{K.is_read||P([K.id])},children:[e.jsx("div",{className:"notification-icon",children:F(K.type)}),e.jsxs("div",{className:"notification-content",children:[e.jsx("h4",{children:K.title}),e.jsx("p",{children:K.message}),e.jsx("span",{className:"notification-time",children:ee(K.created_at)})]}),!K.is_read&&e.jsx("div",{className:"unread-indicator"})]},K.id))}):e.jsx("div",{className:"messages-section",children:v?e.jsxs("div",{className:"thread-view",children:[e.jsxs("div",{className:"thread-header",children:[e.jsx("button",{className:"back-btn",onClick:()=>b(null),children:" Back"}),e.jsxs("h3",{children:[v.first_name," ",v.last_name]}),e.jsx("span",{className:"thread-role-badge",children:v.role})]}),e.jsx("div",{className:"thread-messages",children:u.filter(K=>K.from_user_id===v.other_user_id&&K.to_user_id===a||K.from_user_id===a&&K.to_user_id===v.other_user_id).map(K=>e.jsx("div",{className:`message-item ${K.from_user_id===a?"sent":"received"}`,children:e.jsxs("div",{className:"message-content",children:[e.jsx("h5",{children:K.subject}),e.jsx("p",{children:K.message}),e.jsx("span",{className:"message-time",children:ee(K.created_at)})]})},K.id))})]}):e.jsx("div",{className:"threads-list",children:p.length===0?e.jsxs("div",{className:"empty-state",children:[e.jsx("div",{className:"empty-icon",children:""}),e.jsx("h3",{children:"No Messages"}),e.jsx("p",{children:"Your conversations with contractors and architects will appear here."})]}):p.map(K=>e.jsxs("div",{className:`thread-item ${K.unread_count>0?"unread":""}`,onClick:()=>b(K),children:[e.jsxs("div",{className:"thread-avatar",children:[K.first_name?.charAt(0),K.last_name?.charAt(0)]}),e.jsxs("div",{className:"thread-content",children:[e.jsxs("h4",{children:[K.first_name," ",K.last_name]}),e.jsx("p",{className:"thread-role",children:K.role}),e.jsx("span",{className:"thread-time",children:ee(K.last_message_time)})]}),K.unread_count>0&&e.jsx("div",{className:"thread-unread-count",children:K.unread_count})]},K.other_user_id))})})}),r==="notifications"&&l.some(K=>!K.is_read)&&e.jsx("div",{className:"message-center-footer",children:e.jsx("button",{className:"mark-all-read-btn",onClick:()=>{const K=l.filter(q=>!q.is_read).map(q=>q.id);P(K)},children:"Mark All as Read"})})]})}):null},IF=({userId:t})=>{const[s,a]=N.useState([]),[r,o]=N.useState(0),[l,A]=N.useState(!1),[u,h]=N.useState(!1);return N.useEffect(()=>{const p=async()=>{if(!t){a([]),o(0);return}try{const b=await(await fetch("/buildhub/backend/api/homeowner/get_notifications.php",{credentials:"include"})).json();b.success?(a(b.notifications||[]),o(b.unread_count||0)):(console.error("Failed to fetch notifications:",b.message),a([]),o(0))}catch(v){console.error("Error fetching notifications:",v),a([]),o(0)}};p();const m=setInterval(()=>{p()},3e4);return()=>clearInterval(m)},[t]),N.useEffect(()=>{Notification.permission!=="granted"&&Notification.permission!=="denied"&&Notification.requestPermission()},[]),e.jsxs("div",{className:"notification-system",children:[e.jsxs("div",{className:"notification-bell",onClick:()=>h(!0),children:[e.jsx("span",{className:"bell-icon",children:e.jsx(RF,{})}),r>0&&e.jsx("span",{className:"notification-badge",children:r})]}),e.jsx(DF,{isOpen:u,onClose:()=>h(!1),userId:t})]})},ex=({data:t,raw:s,title:a="Requirements",expandable:r=!0})=>{const[o,l]=N.useState(!1);let A=null;if(t&&typeof t=="object")A=t;else if(typeof s=="string"){const p=s.trim().replace(/^<[^>]+>/,"").replace(/<\/[^>]+>$/,"").trim();try{A=JSON.parse(p)}catch{A=null}}const u=A?[{key:"plot_shape",label:"Plot Shape"},{key:"topography",label:"Topography"},{key:"development_laws",label:"Development Laws"},{key:"family_needs",label:"Family Needs"},{key:"rooms",label:"Rooms"},{key:"aesthetic",label:"Aesthetic"},{key:"notes",label:"Notes"}].filter(({key:p})=>A[p]!==void 0&&A[p]!==null&&String(A[p]).trim()!==""):[],h=()=>{r&&l(!o)};return e.jsxs("div",{className:"json-card",children:[e.jsxs("div",{className:`json-card__header ${r?"json-card__header--clickable":""}`,onClick:h,style:{cursor:r?"pointer":"default"},children:[e.jsx("div",{className:"json-card__icon","aria-hidden":!0,children:""}),e.jsx("h4",{className:"json-card__title",children:a}),r&&e.jsx("div",{className:"json-card__expand-icon",children:o?"":""})]}),r?o&&(A?e.jsx("div",{className:"json-card__body",children:u.length?e.jsx("dl",{className:"json-grid",children:u.map(({key:p,label:m})=>e.jsxs("div",{className:"json-row",children:[e.jsx("dt",{className:"json-label",children:m}),e.jsx("dd",{className:"json-value",children:String(A[p])})]},p))}):e.jsx("div",{className:"json-empty",children:"No details provided"})}):e.jsx("pre",{className:"json-raw",children:(s||"").trim()})):A?e.jsx("div",{className:"json-card__body",children:u.length?e.jsx("dl",{className:"json-grid",children:u.map(({key:p,label:m})=>e.jsxs("div",{className:"json-row",children:[e.jsx("dt",{className:"json-label",children:m}),e.jsx("dd",{className:"json-value",children:String(A[p])})]},p))}):e.jsx("div",{className:"json-empty",children:"No details provided"})}):e.jsx("pre",{className:"json-raw",children:(s||"").trim()})]})},Ho=({technicalDetails:t,startExpanded:s=!1})=>{const[a,r]=N.useState("floor-plans"),[o,l]=N.useState(!s),[A,u]=N.useState(!1);if(!t||Object.keys(t).length===0)return e.jsx("div",{className:"technical-details-display",children:e.jsx("div",{className:"no-technical-details",children:e.jsx("p",{children:"No technical details provided for this design."})})});const h=[{id:"floor-plans",title:" Floor Plans & Layout",icon:""},{id:"site-orientation",title:" Site & Orientation",icon:""},{id:"structural",title:" Structural Elements",icon:""},{id:"elevations",title:" Key Elevations & Sections",icon:""},{id:"construction",title:" Construction Notes",icon:""}],p=()=>{const B=t.floor_plans||{};return e.jsxs("div",{className:"technical-section-content",children:[B.layout_description&&e.jsxs("div",{className:"detail-item",children:[e.jsx("h4",{children:"Floor Plan Layout"}),e.jsx("p",{children:B.layout_description})]}),(B.living_room_dimensions||B.master_bedroom_dimensions||B.kitchen_dimensions||B.other_room_dimensions)&&e.jsxs("div",{className:"detail-item",children:[e.jsx("h4",{children:"Room Dimensions"}),e.jsxs("div",{className:"dimensions-list",children:[B.living_room_dimensions&&e.jsxs("div",{className:"dimension-item",children:[e.jsx("strong",{children:"Living Room:"})," ",B.living_room_dimensions]}),B.master_bedroom_dimensions&&e.jsxs("div",{className:"dimension-item",children:[e.jsx("strong",{children:"Master Bedroom:"})," ",B.master_bedroom_dimensions]}),B.kitchen_dimensions&&e.jsxs("div",{className:"dimension-item",children:[e.jsx("strong",{children:"Kitchen:"})," ",B.kitchen_dimensions]}),B.other_room_dimensions&&e.jsxs("div",{className:"dimension-item",children:[e.jsx("strong",{children:"Other Rooms:"}),e.jsx("div",{className:"other-rooms",children:B.other_room_dimensions})]})]})]}),B.door_window_positions&&e.jsxs("div",{className:"detail-item",children:[e.jsx("h4",{children:"Door & Window Positions"}),e.jsx("p",{children:B.door_window_positions})]}),B.circulation_paths&&e.jsxs("div",{className:"detail-item",children:[e.jsx("h4",{children:"Main Circulation Paths"}),e.jsx("p",{children:B.circulation_paths})]})]})},m=()=>{const B=t.site_orientation||{};return e.jsxs("div",{className:"technical-section-content",children:[B.plot_boundaries&&e.jsxs("div",{className:"detail-item",children:[e.jsx("h4",{children:"Plot Boundaries"}),e.jsx("p",{children:B.plot_boundaries})]}),B.orientation&&e.jsxs("div",{className:"detail-item",children:[e.jsx("h4",{children:"Orientation (North Direction)"}),e.jsx("p",{children:B.orientation})]}),B.access_points&&e.jsxs("div",{className:"detail-item",children:[e.jsx("h4",{children:"Access Points"}),e.jsx("p",{children:B.access_points})]})]})},v=()=>{const B=t.structural||{};return e.jsxs("div",{className:"technical-section-content",children:[B.load_bearing_walls&&e.jsxs("div",{className:"detail-item",children:[e.jsx("h4",{children:"Load-bearing Walls"}),e.jsx("p",{children:B.load_bearing_walls})]}),B.column_positions&&e.jsxs("div",{className:"detail-item",children:[e.jsx("h4",{children:"Column Positions"}),e.jsx("p",{children:B.column_positions})]}),B.foundation_outline&&e.jsxs("div",{className:"detail-item",children:[e.jsx("h4",{children:"Foundation Outline"}),e.jsx("p",{children:B.foundation_outline})]}),B.roof_outline&&e.jsxs("div",{className:"detail-item",children:[e.jsx("h4",{children:"Roof Outline"}),e.jsx("p",{children:B.roof_outline})]})]})},b=()=>{const B=t.elevations||{};return e.jsxs("div",{className:"technical-section-content",children:[B.front_elevation&&e.jsxs("div",{className:"detail-item",children:[e.jsx("h4",{children:"Front Elevation"}),e.jsx("p",{children:B.front_elevation})]}),B.cross_sections&&e.jsxs("div",{className:"detail-item",children:[e.jsx("h4",{children:"Cross Sections"}),e.jsx("p",{children:B.cross_sections})]}),B.height_details&&e.jsxs("div",{className:"detail-item",children:[e.jsx("h4",{children:"Height Details"}),e.jsx("p",{children:B.height_details})]})]})},x=()=>{const B=t.construction||{};return e.jsxs("div",{className:"technical-section-content",children:[B.wall_thickness&&e.jsxs("div",{className:"detail-item",children:[e.jsx("h4",{children:"Wall Thickness"}),e.jsx("p",{children:B.wall_thickness})]}),B.ceiling_heights&&e.jsxs("div",{className:"detail-item",children:[e.jsx("h4",{children:"Ceiling Heights"}),e.jsx("p",{children:B.ceiling_heights})]}),B.building_codes&&e.jsxs("div",{className:"detail-item",children:[e.jsx("h4",{children:"Building Codes"}),e.jsx("p",{children:B.building_codes})]}),B.critical_instructions&&e.jsxs("div",{className:"detail-item",children:[e.jsx("h4",{children:"Critical Instructions"}),e.jsx("p",{children:B.critical_instructions})]})]})},C=()=>{switch(a){case"floor-plans":return p();case"site-orientation":return m();case"structural":return v();case"elevations":return b();case"construction":return x();default:return p()}},Q=B=>{const L=t[B];return L?Object.values(L).some(P=>P&&P.trim()!==""):!1},j=async()=>{u(!0);try{const B=new Date().toLocaleDateString("en-IN",{year:"numeric",month:"long",day:"numeric"}),L=re=>re?typeof re=="object"?JSON.stringify(re,null,2):String(re):"",P=`
        <div style="font-family: 'Times New Roman', serif; color: #1a1a1a; margin: 0; padding: 20px; line-height: 1.6; background: white;">
          <div style="text-align: center; margin-bottom: 30px; border-bottom: 3px solid #2c3e50; padding-bottom: 20px;">
            <div style="font-size: 28px; font-weight: bold; color: #2c3e50; margin-bottom: 8px;">Technical Details Report</div>
            <div style="font-size: 14px; color: #6c757d;">Generated: ${B}</div>
          </div>
          
          ${Object.entries(t).map(([re,G])=>!G||typeof G=="object"&&Object.keys(G).length===0?"":`
              <div style="margin-bottom: 24px; page-break-inside: avoid;">
                <h3 style="color: #2c3e50; border-bottom: 2px solid #2c3e50; padding-bottom: 8px; margin-bottom: 16px;">${re.replace(/_/g," ").replace(/\b\w/g,fe=>fe.toUpperCase())}</h3>
                ${typeof G=="object"?Object.entries(G).map(([fe,Ae])=>`
                    <div style="margin: 12px 0; padding: 12px; background: #f8f9fa; border-left: 4px solid #2c3e50;">
                      <strong style="display: block; margin-bottom: 6px; color: #2c3e50;">${fe.replace(/_/g," ").replace(/\b\w/g,Ce=>Ce.toUpperCase())}:</strong>
                      <div style="color: #495057; white-space: pre-wrap;">${L(Ae)}</div>
                    </div>
                  `).join(""):`
                  <div style="padding: 12px; background: #f8f9fa; border-left: 4px solid #2c3e50;">
                    <div style="color: #495057; white-space: pre-wrap;">${L(G)}</div>
                  </div>
                `}
              </div>
            `).filter(Boolean).join("")}
        </div>`,F=document.createElement("div");F.style.position="absolute",F.style.left="-9999px",F.style.width="210mm",F.style.padding="20mm",F.style.backgroundColor="white",F.innerHTML=P,document.body.appendChild(F);const ee=await Kc(F,{scale:2,useCORS:!0,allowTaint:!0,backgroundColor:"#ffffff"});document.body.removeChild(F);const K=new is("p","mm","a4"),q=ee.toDataURL("image/png"),E=210,U=295,V=ee.height*E/ee.width;let H=V,I=0;for(K.addImage(q,"PNG",0,I,E,V),H-=U;H>=0;)I=H-V,K.addPage(),K.addImage(q,"PNG",0,I,E,V),H-=U;const M=`Technical_Details_${Date.now().toString().slice(-6)}.pdf`;K.save(M)}catch(B){console.error("Error generating PDF:",B),alert("Error generating PDF")}finally{u(!1)}};return e.jsxs("div",{className:"technical-details-display",children:[e.jsx("div",{className:"technical-header",style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",padding:"20px",borderRadius:"12px",marginBottom:"20px",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)"},children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{children:[e.jsx("h3",{style:{margin:"0 0 8px 0",fontSize:"20px",fontWeight:"600"},children:"Technical Design Details"}),e.jsx("p",{style:{margin:0,fontSize:"14px",opacity:.9},children:"Comprehensive architectural specifications and construction details"})]}),e.jsxs("div",{style:{display:"flex",gap:"8px"},children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>l(B=>!B),style:{background:"rgba(255,255,255,0.2)",border:"1px solid rgba(255,255,255,0.3)",color:"white"},children:o?" View details":" Hide details"}),e.jsx("button",{type:"button",className:"btn btn-primary",onClick:j,disabled:A,style:{background:"#10b981",border:"1px solid #10b981",color:"white"},children:A?" Generating...":" Download PDF"})]})]})}),!o&&e.jsx("div",{className:"technical-layout",children:h.some(L=>Q(L.id))?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"technical-sidebar",children:e.jsx("div",{className:"section-nav",children:h.map(L=>Q(L.id)?e.jsxs("button",{className:`section-nav-item ${a===L.id?"active":""}`,onClick:()=>r(L.id),children:[e.jsx("span",{className:"section-icon",children:L.icon}),e.jsx("span",{className:"section-title",children:L.title})]},L.id):null)})}),e.jsx("div",{className:"technical-content",children:C()})]}):e.jsx("div",{className:"technical-grid",children:Object.entries(t).map(([L,P])=>e.jsxs("div",{style:{padding:"16px",background:"linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%)",borderRadius:"10px",border:"1px solid #e5e7eb",boxShadow:"0 2px 6px rgba(0, 0, 0, 0.05)",transition:"all 0.2s ease",height:"100%",display:"flex",flexDirection:"column"},onMouseEnter:F=>{F.currentTarget.style.transform="translateY(-2px)",F.currentTarget.style.boxShadow="0 6px 12px rgba(0, 0, 0, 0.08)"},onMouseLeave:F=>{F.currentTarget.style.transform="translateY(0)",F.currentTarget.style.boxShadow="0 2px 6px rgba(0, 0, 0, 0.05)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:"10px",paddingBottom:"8px",borderBottom:"2px solid #667eea"},children:[e.jsx("span",{style:{fontSize:"20px",marginRight:"8px"},children:L.includes("floor")?"":L.includes("site")?"":L.includes("structural")?"":L.includes("elevation")?"":L.includes("construction")?"":L.includes("room")?"":L.includes("cost")||L.includes("price")?"":L.includes("material")?"":L.includes("labor")?"":""}),e.jsx("h4",{style:{margin:0,color:"#374151",fontSize:"14px",fontWeight:"600",lineHeight:"1.3"},children:L.replace(/_/g," ").replace(/\b\w/g,F=>F.toUpperCase())})]}),e.jsx("div",{style:{color:"#6b7280",whiteSpace:"pre-wrap",lineHeight:"1.5",fontSize:"13px",flex:1},children:typeof P=="object"&&P!==null?Object.entries(P).map(([F,ee])=>e.jsxs("div",{style:{margin:"6px 0",padding:"6px",background:"white",borderRadius:"4px",borderLeft:"2px solid #667eea",fontSize:"12px"},children:[e.jsxs("strong",{style:{color:"#495057",fontSize:"12px"},children:[F.replace(/_/g," ").replace(/\b\w/g,K=>K.toUpperCase()),":"," "]}),e.jsx("span",{style:{color:"#6b7280",fontSize:"12px"},children:typeof ee=="object"?JSON.stringify(ee,null,2):String(ee)})]},F)):e.jsx("div",{style:{fontSize:"13px",lineHeight:"1.4",wordBreak:"break-word"},children:String(P)})})]},L))})})]})},HF=({user:t,onLogout:s,className:a="",showRole:r=!0,size:o="medium",position:l="bottom-right"})=>{const A=Wr(),[u,h]=N.useState(!1),p=N.useRef(null);N.useEffect(()=>{const j=B=>{p.current&&!p.current.contains(B.target)&&h(!1)};return u&&document.addEventListener("mousedown",j),()=>{document.removeEventListener("mousedown",j)}},[u]);const m=()=>{h(!u)},v=()=>{h(!1)},b=()=>{h(!1),A("/homeowner/profile")},x=()=>{h(!1),s&&s()},C=()=>{if(t?.first_name&&t?.last_name)return`${t.first_name.charAt(0)}${t.last_name.charAt(0)}`.toUpperCase();if(t?.name){const j=t.name.split(" ");return`${j[0]?.[0]||""}${j[1]?.[0]||""}`.toUpperCase()}return t?.email?t.email.charAt(0).toUpperCase():"H"},Q=()=>{if(!r)return null;const j=t?.role||"Homeowner";return j.charAt(0).toUpperCase()+j.slice(1)};return e.jsxs("div",{ref:p,className:`profile-button-container ${a}`,children:[e.jsxs("button",{className:`profile-button ${o}`,onClick:m,"aria-haspopup":"menu","aria-expanded":u,children:[e.jsx("div",{className:"profile-avatar",children:t?.avatar_url?e.jsx("img",{src:t.avatar_url,alt:"Profile",style:{width:"100%",height:"100%",borderRadius:"50%",objectFit:"cover"}}):C()}),e.jsx("div",{className:"profile-info",children:r&&e.jsx("div",{className:"profile-role",children:Q()})}),e.jsx("div",{className:`profile-arrow ${u?"open":""}`,children:""})]}),e.jsx(PF,{isOpen:u,onClose:v,user:t,position:l,onProfileSetup:b,onLogout:x})]})},PF=({isOpen:t,onClose:s,user:a,position:r,onProfileSetup:o,onLogout:l})=>{const A=N.useRef(null);return N.useEffect(()=>{const u=h=>{A.current&&!A.current.contains(h.target)&&s()};return t&&document.addEventListener("mousedown",u),()=>{document.removeEventListener("mousedown",u)}},[t,s]),t?e.jsx("div",{ref:A,className:`profile-popup ${r}`,children:e.jsxs("div",{className:"profile-popup-content",children:[e.jsxs("div",{className:"profile-popup-header",children:[e.jsx("div",{className:"profile-popup-avatar",children:a?.avatar_url?e.jsx("img",{src:a.avatar_url,alt:"Profile",style:{width:"100%",height:"100%",borderRadius:"50%",objectFit:"cover"}}):a?.first_name?.charAt(0)+a?.last_name?.charAt(0)}),e.jsxs("div",{className:"profile-popup-info",children:[e.jsxs("div",{className:"profile-popup-name",children:[a?.first_name," ",a?.last_name]}),e.jsx("div",{className:"profile-popup-role",children:a?.role?.charAt(0).toUpperCase()+a?.role?.slice(1)})]})]}),e.jsx("div",{className:"profile-popup-divider"}),e.jsxs("div",{className:"profile-popup-menu",children:[e.jsxs("button",{className:"profile-popup-item",onClick:o,children:[e.jsx("span",{className:"profile-popup-icon",children:""}),e.jsx("span",{children:"Profile Settings"})]}),e.jsxs("button",{className:"profile-popup-item logout",onClick:l,children:[e.jsx("span",{className:"profile-popup-icon",children:""}),e.jsx("span",{children:"Logout"})]})]})]})}):null},OF=({activeTab:t,isVisible:s=!0})=>{const a=Ni(),[r,o]=N.useState([]),[l,A]=N.useState(null),[u,h]=N.useState(!1),[p,m]=N.useState(!1),[v,b]=N.useState("all"),x=async()=>{m(!0);try{const ee=await(await fetch("/buildhub/backend/api/homeowner/get_progress_reports.php",{credentials:"include"})).json();ee.success?o(ee.data.reports||[]):a.error("Failed to load progress reports: "+ee.message)}catch(F){console.error("Error loading progress reports:",F),a.error("Error loading progress reports")}finally{m(!1)}},C=async F=>{try{const K=await(await fetch(`/buildhub/backend/api/homeowner/view_progress_report.php?report_id=${F}`,{credentials:"include"})).json();K.success?(A(K.data),h(!0)):a.error("Failed to load report details: "+K.message)}catch(ee){console.error("Error loading report details:",ee),a.error("Error loading report details")}},Q=async(F,ee="")=>{try{const q=await(await fetch("/buildhub/backend/api/homeowner/view_progress_report.php",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({report_id:F,notes:ee})})).json();q.success?(a.success("Report acknowledged successfully"),x(),h(!1)):a.error("Failed to acknowledge report: "+q.message)}catch(K){console.error("Error acknowledging report:",K),a.error("Error acknowledging report")}};if(N.useEffect(()=>{t==="progress"&&s&&x()},[t,s]),!s)return null;const j=F=>new Date(F).toLocaleDateString("en-IN",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),B=F=>{const ee={sent:{color:"#007bff",bg:"#e3f2fd",text:" Sent"},viewed:{color:"#28a745",bg:"#e8f5e9",text:" Viewed"},acknowledged:{color:"#6f42c1",bg:"#f3e5f5",text:" Acknowledged"}},K=ee[F]||ee.sent;return e.jsx("span",{style:{background:K.bg,color:K.color,padding:"4px 12px",borderRadius:"20px",fontSize:"12px",fontWeight:"600",border:`1px solid ${K.color}20`},children:K.text})},L=F=>({daily:"",weekly:"",monthly:""})[F]||"",P=r.filter(F=>v==="all"?!0:F.report_type===v);return e.jsxs("div",{className:"section-card",style:{marginTop:"1rem"},children:[e.jsx("div",{className:"section-header",children:e.jsxs("div",{className:"header-content",children:[e.jsxs("div",{children:[e.jsx("h2",{children:" Construction Progress Reports"}),e.jsx("p",{children:"View detailed progress reports submitted by your contractor with comprehensive project updates"})]}),e.jsx("button",{className:"btn btn-primary",onClick:x,disabled:p,children:p?" Loading...":" Refresh Reports"})]})}),e.jsx("div",{className:"progress-filters",style:{display:"flex",gap:"10px",marginBottom:"20px",borderBottom:"1px solid #e9ecef",paddingBottom:"15px"},children:["all","daily","weekly","monthly"].map(F=>e.jsx("button",{className:`filter-btn ${v===F?"active":""}`,onClick:()=>b(F),style:{padding:"8px 16px",border:"2px solid #007bff",background:v===F?"#007bff":"transparent",color:v===F?"white":"#007bff",borderRadius:"6px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease",textTransform:"capitalize"},children:F==="all"?" All Reports":`${L(F)} ${F} Reports`},F))}),e.jsx("div",{className:"section-content",children:p?e.jsxs("div",{style:{textAlign:"center",padding:"40px"},children:[e.jsx("div",{style:{fontSize:"48px",marginBottom:"16px"},children:""}),e.jsx("h3",{children:"Loading Progress Reports..."}),e.jsx("p",{children:"Fetching your latest construction progress updates"})]}):P.length===0?e.jsxs("div",{style:{textAlign:"center",padding:"40px"},children:[e.jsx("div",{style:{fontSize:"48px",marginBottom:"16px"},children:""}),e.jsx("h3",{children:"No Progress Reports Yet"}),e.jsx("p",{children:"Your contractor will submit progress reports here as work progresses on your project."})]}):e.jsx("div",{className:"reports-grid",style:{display:"grid",gap:"20px",gridTemplateColumns:"repeat(auto-fill, minmax(400px, 1fr))"},children:P.map(F=>e.jsxs("div",{className:"report-card",style:{background:"white",border:"1px solid #e9ecef",borderRadius:"12px",padding:"20px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)",transition:"all 0.3s ease",cursor:"pointer",position:"relative"},onClick:()=>C(F.id),onMouseOver:ee=>{ee.currentTarget.style.transform="translateY(-2px)",ee.currentTarget.style.boxShadow="0 4px 16px rgba(0,0,0,0.15)"},onMouseOut:ee=>{ee.currentTarget.style.transform="translateY(0)",ee.currentTarget.style.boxShadow="0 2px 8px rgba(0,0,0,0.1)"},children:[e.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,height:"4px",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",borderRadius:"12px 12px 0 0"}}),e.jsxs("div",{className:"report-header",style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"15px",marginTop:"10px"},children:[e.jsxs("div",{children:[e.jsxs("h3",{style:{margin:"0 0 8px 0",color:"#2c3e50",display:"flex",alignItems:"center",gap:"8px"},children:[L(F.report_type)," ",F.report_type.charAt(0).toUpperCase()+F.report_type.slice(1)," Report"]}),e.jsx("p",{style:{margin:"0",color:"#6c757d",fontSize:"14px",fontWeight:"500"},children:F.project_name})]}),B(F.status)]}),e.jsx("div",{className:"report-meta",style:{marginBottom:"15px"},children:e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"10px",fontSize:"13px",color:"#6c757d"},children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Contractor:"})," ",F.contractor_name]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Submitted:"})," ",j(F.created_at)]}),F.period_start&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Period Start:"})," ",new Date(F.period_start).toLocaleDateString("en-IN")]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Period End:"})," ",new Date(F.period_end).toLocaleDateString("en-IN")]})]})]})}),F.summary&&e.jsxs("div",{className:"report-summary",style:{background:"#f8f9fa",padding:"15px",borderRadius:"8px",marginBottom:"15px"},children:[e.jsx("h4",{style:{margin:"0 0 10px 0",color:"#2c3e50",fontSize:"14px"},children:" Summary"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"8px",fontSize:"12px"},children:[F.summary.total_days>0&&e.jsxs("div",{children:[e.jsx("strong",{children:"Working Days:"})," ",F.summary.total_days]}),F.summary.total_workers>0&&e.jsxs("div",{children:[e.jsx("strong",{children:"Workers:"})," ",F.summary.total_workers]}),F.summary.total_hours>0&&e.jsxs("div",{children:[e.jsx("strong",{children:"Hours:"})," ",F.summary.total_hours,"h"]}),F.summary.progress_percentage>0&&e.jsxs("div",{children:[e.jsx("strong",{children:"Progress:"})," ",F.summary.progress_percentage,"%"]}),F.summary.photos_count>0&&e.jsxs("div",{children:[e.jsx("strong",{children:"Photos:"})," ",F.summary.photos_count]})]})]}),e.jsxs("div",{className:"report-actions",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("div",{style:{fontSize:"12px",color:"#6c757d"},children:F.has_photos&&" Contains Photos"}),e.jsx("div",{style:{color:"#007bff",fontSize:"14px",fontWeight:"600",display:"flex",alignItems:"center",gap:"4px"},children:" View Details"})]})]},F.id))})}),u&&l&&e.jsx("div",{className:"modal-overlay",style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.8)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"20px"},children:e.jsxs("div",{className:"modal-content",style:{background:"white",borderRadius:"16px",maxWidth:"1000px",width:"100%",maxHeight:"90vh",overflow:"auto",boxShadow:"0 20px 60px rgba(0,0,0,0.3)"},children:[e.jsxs("div",{className:"modal-header",style:{padding:"24px",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",borderRadius:"16px 16px 0 0",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{children:[e.jsxs("h2",{style:{margin:"0 0 8px 0"},children:[L(l.report_type)," ",l.report_type.charAt(0).toUpperCase()+l.report_type.slice(1)," Progress Report"]}),e.jsxs("p",{style:{margin:"0",opacity:"0.9"},children:["Submitted by ",l.contractor.name," on ",j(l.created_at)]})]}),e.jsx("button",{onClick:()=>h(!1),style:{background:"rgba(255,255,255,0.2)",border:"none",color:"white",fontSize:"24px",width:"40px",height:"40px",borderRadius:"50%",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:""})]}),e.jsxs("div",{className:"modal-body",style:{padding:"24px"},children:[l.report_data&&e.jsxs("div",{children:[l.report_data.summary&&e.jsxs("div",{className:"report-section",style:{marginBottom:"30px"},children:[e.jsx("h3",{style:{color:"#2c3e50",borderBottom:"2px solid #e9ecef",paddingBottom:"10px"},children:" Executive Summary"}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"15px",marginTop:"15px"},children:Object.entries(l.report_data.summary).map(([F,ee])=>e.jsxs("div",{style:{textAlign:"center",padding:"15px",background:"#f8f9fa",borderRadius:"8px",border:"1px solid #dee2e6"},children:[e.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#667eea"},children:ee}),e.jsx("div",{style:{fontSize:"0.9rem",color:"#6c757d",textTransform:"capitalize"},children:F.replace(/_/g," ")})]},F))})]}),l.report_data.daily_updates&&l.report_data.daily_updates.length>0&&e.jsxs("div",{className:"report-section",style:{marginBottom:"30px"},children:[e.jsx("h3",{style:{color:"#2c3e50",borderBottom:"2px solid #e9ecef",paddingBottom:"10px"},children:" Work Progress Details"}),l.report_data.daily_updates.map((F,ee)=>e.jsxs("div",{style:{marginTop:"15px",padding:"15px",background:"#f8f9fa",borderRadius:"8px",borderLeft:"4px solid #667eea"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"10px"},children:[e.jsx("h4",{style:{margin:"0",color:"#2c3e50"},children:j(F.update_date)}),e.jsx("span",{style:{background:"#667eea",color:"white",padding:"4px 12px",borderRadius:"20px",fontSize:"12px"},children:F.construction_stage})]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Work Done:"})," ",F.work_done_today]}),e.jsxs("div",{style:{display:"flex",gap:"20px",fontSize:"14px",color:"#6c757d"},children:[e.jsxs("span",{children:["Progress: +",F.incremental_completion_percentage,"%"]}),e.jsxs("span",{children:["Hours: ",F.working_hours,"h"]}),e.jsxs("span",{children:["Weather: ",F.weather_condition]})]})]},ee))]}),l.report_data.photos&&l.report_data.photos.length>0&&e.jsxs("div",{className:"report-section",style:{marginBottom:"30px"},children:[e.jsx("h3",{style:{color:"#2c3e50",borderBottom:"2px solid #e9ecef",paddingBottom:"10px"},children:" Progress Photos"}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"15px",marginTop:"15px"},children:l.report_data.photos.slice(0,6).map((F,ee)=>e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("img",{src:F.url,alt:`Progress ${ee+1}`,style:{width:"100%",height:"150px",objectFit:"cover",borderRadius:"8px",border:"1px solid #dee2e6"}}),e.jsxs("div",{style:{marginTop:"8px",fontSize:"12px",color:"#6c757d"},children:[e.jsx("div",{children:j(F.date)}),e.jsx("div",{children:F.location})]})]},ee))})]})]}),l.status!=="acknowledged"&&e.jsxs("div",{className:"acknowledgment-section",style:{marginTop:"30px",padding:"20px",background:"#e3f2fd",borderRadius:"8px",border:"1px solid #bbdefb"},children:[e.jsx("h4",{style:{margin:"0 0 15px 0",color:"#1976d2"},children:" Acknowledge This Report"}),e.jsx("p",{style:{margin:"0 0 15px 0",fontSize:"14px",color:"#424242"},children:"Acknowledge that you have reviewed this progress report. You can optionally add feedback or comments."}),e.jsxs("div",{style:{display:"flex",gap:"10px",alignItems:"center"},children:[e.jsx("button",{onClick:()=>Q(l.id),style:{background:"#28a745",color:"white",border:"none",padding:"10px 20px",borderRadius:"6px",fontWeight:"600",cursor:"pointer"},children:" Acknowledge Report"}),e.jsx("span",{style:{fontSize:"12px",color:"#6c757d"},children:"This will notify your contractor that you've reviewed the report"})]})]}),l.status==="acknowledged"&&e.jsx("div",{style:{marginTop:"20px",padding:"15px",background:"#d4edda",borderRadius:"8px",border:"1px solid #c3e6cb",textAlign:"center"},children:e.jsxs("span",{style:{color:"#155724",fontWeight:"600"},children:[" Report Acknowledged on ",j(l.acknowledged_at)]})})]})]})})]})},t2=({isOpen:t,onClose:s,onConfirm:a,title:r="Confirm Action",message:o="Are you sure you want to proceed?",confirmText:l="Confirm",cancelText:A="Cancel",type:u="danger"})=>{if(!t)return null;const h=v=>{v.target===v.currentTarget&&s()},p=()=>{switch(u){case"danger":return"";case"warning":return"";case"info":return"";default:return""}},m=()=>{switch(u){case"danger":return"btn-danger";case"warning":return"btn-warning";case"info":return"btn-info";default:return"btn-primary"}};return e.jsx("div",{className:"confirm-modal-overlay",onClick:h,children:e.jsxs("div",{className:"confirm-modal",children:[e.jsxs("div",{className:"confirm-modal-header",children:[e.jsx("div",{className:"confirm-modal-icon",children:p()}),e.jsx("h3",{className:"confirm-modal-title",children:r})]}),e.jsx("div",{className:"confirm-modal-body",children:e.jsx("p",{className:"confirm-modal-message",children:o})}),e.jsxs("div",{className:"confirm-modal-footer",children:[e.jsx("button",{className:"btn btn-secondary",onClick:s,children:A}),e.jsx("button",{className:`btn ${m()}`,onClick:()=>{a(),s()},children:l})]})]})})},MF=()=>{const t=Wr(),s=Ni(),[a,r]=N.useState("dashboard"),[o,l]=N.useState("all"),[A,u]=N.useState([]),[h,p]=N.useState({}),[m,v]=N.useState({}),[b,x]=N.useState({}),[C,Q]=N.useState(null),[j,B]=N.useState([]),[L,P]=N.useState(!1),[F,ee]=N.useState(0),[K,q]=N.useState(!1),[E,U]=N.useState([]),[V,H]=N.useState([]),[I,M]=N.useState([]),[re,G]=N.useState(!1),[Z,fe]=N.useState(""),[Ae,Ce]=N.useState(""),[te,he]=N.useState(!1),[k,T]=N.useState(!1),[z,le]=N.useState(null),[X,W]=N.useState({plot_size:"",building_size:"",budget_range:"",plot_shape:"",num_floors:"",topography:"",development_laws:"",family_needs:[],rooms:[],aesthetic:"",style_preferences:{},location:"",timeline:"",requirements:"",selected_layout_id:null,layout_type:"custom",custom_budget:""}),[de,me]=N.useState(null),[Be,Qe]=N.useState(!1),[ut,mt]=N.useState({}),[Ve,je]=N.useState(!1),[Ft,Rt]=N.useState(!1),[at,Xe]=N.useState(!1),[pt,xe]=N.useState(""),[et,Oe]=N.useState(null),[Bt,xt]=N.useState({}),[dt,Ut]=N.useState([]),[wt,bt]=N.useState({}),[Ht,_t]=N.useState({}),[Gt,$t]=N.useState(!1),[J,tt]=N.useState(null),[Qt,Et]=N.useState(!1),[Jt,os]=N.useState(""),[_e,St]=N.useState(null),[$e,kt]=N.useState({}),[Ze,oe]=N.useState({isOpen:!1,title:"",message:"",onConfirm:null,type:"danger"}),we=(R,Fe,Ge,it="danger")=>{oe({isOpen:!0,title:R,message:Fe,onConfirm:Ge,type:it})};N.useEffect(()=>{console.log("Modal state changed to:",Gt),console.log("Selected estimate changed to:",J)},[Gt,J]),N.useEffect(()=>{if(!localStorage.getItem("buildhub_dashboard_tour_completed")){const Fe=setTimeout(()=>{q(!0),ee(0)},2e3);return()=>clearTimeout(Fe)}},[]),N.useEffect(()=>{try{const R=JSON.parse(localStorage.getItem("bh_paid_layouts")||"[]");if(Array.isArray(R)&&R.length){const Fe={};R.forEach(Ge=>{Fe[Ge]=!0}),xt(Ge=>({...Ge,...Fe}))}}catch{}},[]),N.useEffect(()=>{let R=!0;const Fe=async()=>{try{const it=JSON.parse(sessionStorage.getItem("user")||"{}");if(!it?.id){console.log("No user ID found for fetching estimates");return}console.log("Fetching estimates for homeowner:",it.id);const Kt=await(await fetch(`/buildhub/backend/api/homeowner/get_estimates.php?homeowner_id=${it.id}`,{credentials:"include"})).json().catch(()=>({}));if(console.log("Estimates API response:",Kt),R&&Kt?.success){console.log("Setting estimates:",Array.isArray(Kt.estimates)?Kt.estimates:[]),Ut(Array.isArray(Kt.estimates)?Kt.estimates:[]);const Tt={};Array.isArray(Kt.estimates)&&Kt.estimates.forEach(It=>{(It.status==="approved_with_message"||It.homeowner_feedback)&&(Tt[It.id]=!0)}),kt(Tt)}else console.log("Estimates fetch failed:",Kt.message)}catch(it){console.error("Error fetching estimates:",it)}};Fe();const Ge=setInterval(Fe,6e4);return()=>{R=!1,clearInterval(Ge)}},[]);const Ee=async R=>{try{if(!(Number(R.is_paid||0)>0)){let Bs=0;for(;(!window.Razorpay||window._razorpayLoading)&&Bs<20;)await new Promise(Pr=>setTimeout(Pr,100)),Bs++;if(!window.Razorpay){s.error("Payment system not loaded. Please refresh the page and try again.");return}const ls=JSON.parse(sessionStorage.getItem("user")||"{}"),Nr=await(await fetch("/buildhub/backend/api/homeowner/initiate_estimate_payment.php",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({homeowner_id:ls.id,estimate_id:R.id})})).json();if(!Nr?.success){s.error(Nr?.message||"Failed to start payment");return}const Ya={key:Nr.razorpay_key_id,amount:Nr.amount,currency:Nr.currency||"INR",name:"BuildHub",description:`Unlock Contractor Estimate #${R.id}`,order_id:Nr.razorpay_order_id,handler:async function(Pr){try{const Kn=await(await fetch("/buildhub/backend/api/homeowner/verify_estimate_payment.php",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({razorpay_payment_id:Pr.razorpay_payment_id,razorpay_order_id:Pr.razorpay_order_id,razorpay_signature:Pr.razorpay_signature,payment_id:Nr.payment_id})})).json();if(Kn?.success){try{const No=JSON.parse(sessionStorage.getItem("user")||"{}"),Li=await(await fetch(`/buildhub/backend/api/homeowner/get_estimates.php?homeowner_id=${No.id}`,{credentials:"include"})).json().catch(()=>({}));Li?.success&&Ut(Array.isArray(Li.estimates)?Li.estimates:[])}catch{}s.success("Payment successful. Estimate unlocked. Click again to download.")}else s.error(Kn?.message||"Payment verification failed")}catch{s.error("Verification error")}},prefill:{name:ls?.first_name||"Homeowner",email:ls?.email||""}};try{new window.Razorpay(Ya).open()}catch(Pr){console.error("Razorpay error:",Pr),s.error("Failed to open payment gateway. Please try again.")}return}const Ge=(()=>{try{return R.structured?JSON.parse(R.structured):null}catch{return null}})(),it=Bs=>Bs==null||Bs===""||isNaN(Number(Bs))?"0":`${Number(Bs).toLocaleString("en-IN")}`,Ct=R.contractor_name||"Contractor Name",Kt=new Date().toLocaleDateString("en-IN",{year:"numeric",month:"long",day:"numeric"}),Tt=`
        <div style="font-family: 'Times New Roman', serif; color: #1a1a1a; margin: 0; padding: 0; line-height: 1.4; background: white;">
      <!-- Company Header -->
          <div style="text-align: center; margin-bottom: 30px; border-bottom: 3px solid #2c3e50; padding-bottom: 20px;">
            <div style="width: 120px; height: 120px; margin: 0 auto 15px; border: 2px solid #2c3e50; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 48px; font-weight: bold; color: #2c3e50; background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);"></div>
            <div style="font-size: 28px; font-weight: bold; color: #2c3e50; margin: 10px 0 5px 0; text-transform: uppercase; letter-spacing: 2px;">${Ct} Construction</div>
            <div style="font-size: 14px; color: #6c757d; font-style: italic; margin-bottom: 10px;">Professional Construction Services</div>
            <div style="font-size: 12px; color: #495057; line-height: 1.3;">
           Email: ${R.contractor_email||"contact@company.com"} | 
           Phone: ${R.contractor_phone||"+91-XXXXX-XXXXX"} | 
           License: ${R.contractor_license||"LIC-XXXXX"}
        </div>
      </div>

      <!-- Document Title -->
          <div style="text-align: center; margin: 30px 0; font-size: 24px; font-weight: bold; color: #2c3e50; text-transform: uppercase; letter-spacing: 1px;">Cost Estimate Report</div>

      <!-- Estimate Information -->
          <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 30px; padding: 15px; background: #f8f9fa; border-left: 4px solid #2c3e50;">
            <div>
              <h3 style="margin: 0 0 10px 0; font-size: 16px; color: #2c3e50; border-bottom: 1px solid #dee2e6; padding-bottom: 5px;">Project Details</h3>
              <p style="margin: 5px 0; font-size: 14px;"><strong>Project Name:</strong> ${Ge?.project_name||"Construction Project"}</p>
              <p style="margin: 5px 0; font-size: 14px;"><strong>Location:</strong> ${Ge?.project_address||"Project Location"}</p>
              <p style="margin: 5px 0; font-size: 14px;"><strong>Client:</strong> ${R.client_name||"Client Name"}</p>
              <p style="margin: 5px 0; font-size: 14px;"><strong>Plot Size:</strong> ${Ge?.plot_size||""}</p>
              <p style="margin: 5px 0; font-size: 14px;"><strong>Built-up Area:</strong> ${Ge?.built_up_area||""}</p>
              <p style="margin: 5px 0; font-size: 14px;"><strong>Floors:</strong> ${Ge?.floors||""}</p>
        </div>
            <div>
              <h3 style="margin: 0 0 10px 0; font-size: 16px; color: #2c3e50; border-bottom: 1px solid #dee2e6; padding-bottom: 5px;">Estimate Information</h3>
              <p style="margin: 5px 0; font-size: 14px;"><strong>Estimate Date:</strong> ${Kt}</p>
              <p style="margin: 5px 0; font-size: 14px;"><strong>Estimate Valid Until:</strong> ${new Date(Date.now()+720*60*60*1e3).toLocaleDateString("en-IN")}</p>
              <p style="margin: 5px 0; font-size: 14px;"><strong>Project Duration:</strong> ${R.timeline||"90 days"}</p>
              <p style="margin: 5px 0; font-size: 14px;"><strong>Estimate #:</strong> EST-${R.id}</p>
        </div>
      </div>

      <!-- Cost Breakdown -->
          <div style="margin: 30px 0;">
            <h2 style="font-size: 20px; color: #2c3e50; border-bottom: 2px solid #2c3e50; padding-bottom: 10px; margin-bottom: 20px;">Detailed Cost Breakdown</h2>
            <table style="width: 100%; border-collapse: collapse; margin-bottom: 20px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
          <thead>
            <tr>
                  <th style="background: #2c3e50; color: white; padding: 12px; text-align: left; font-weight: bold; font-size: 14px;">Item Description</th>
                  <th style="background: #2c3e50; color: white; padding: 12px; text-align: left; font-weight: bold; font-size: 14px;">Quantity</th>
                  <th style="background: #2c3e50; color: white; padding: 12px; text-align: left; font-weight: bold; font-size: 14px;">Unit Rate ()</th>
                  <th style="background: #2c3e50; color: white; padding: 12px; text-align: left; font-weight: bold; font-size: 14px;">Amount ()</th>
            </tr>
          </thead>
          <tbody>
                ${Ge&&Ge.materials?Object.entries(Ge.materials).filter(([Bs,ls])=>ls&&typeof ls=="object"&&(ls.name||ls.amount)).map(([Bs,ls],pn)=>`
                  <tr style="background: ${pn%2===0?"#f8f9fa":"white"};">
                    <td style="padding: 10px 12px; border-bottom: 1px solid #dee2e6; font-size: 14px;">${ls.name||Bs}</td>
                    <td style="padding: 10px 12px; border-bottom: 1px solid #dee2e6; font-size: 14px;">${ls.qty||""}</td>
                    <td style="padding: 10px 12px; border-bottom: 1px solid #dee2e6; font-size: 14px;">${ls.rate||""}</td>
                    <td style="padding: 10px 12px; border-bottom: 1px solid #dee2e6; font-size: 14px;">${it(ls.amount)}</td>
              </tr>
            `).join(""):""}
                ${Ge&&Ge.labor?Object.entries(Ge.labor).filter(([Bs,ls])=>ls&&typeof ls=="object"&&(ls.name||ls.amount)).map(([Bs,ls],pn)=>`
                  <tr style="background: ${pn%2===0?"#f8f9fa":"white"};">
                    <td style="padding: 10px 12px; border-bottom: 1px solid #dee2e6; font-size: 14px;">${ls.name||Bs}</td>
                    <td style="padding: 10px 12px; border-bottom: 1px solid #dee2e6; font-size: 14px;">${ls.qty||""}</td>
                    <td style="padding: 10px 12px; border-bottom: 1px solid #dee2e6; font-size: 14px;">${ls.rate||""}</td>
                    <td style="padding: 10px 12px; border-bottom: 1px solid #dee2e6; font-size: 14px;">${it(ls.amount)}</td>
              </tr>
            `).join(""):""}
                ${Ge&&Ge.utilities?Object.entries(Ge.utilities).filter(([Bs,ls])=>ls&&typeof ls=="object"&&(ls.name||ls.amount)).map(([Bs,ls],pn)=>`
                  <tr style="background: ${pn%2===0?"#f8f9fa":"white"};">
                    <td style="padding: 10px 12px; border-bottom: 1px solid #dee2e6; font-size: 14px;">${ls.name||Bs}</td>
                    <td style="padding: 10px 12px; border-bottom: 1px solid #dee2e6; font-size: 14px;">${ls.qty||""}</td>
                    <td style="padding: 10px 12px; border-bottom: 1px solid #dee2e6; font-size: 14px;">${ls.rate||""}</td>
                    <td style="padding: 10px 12px; border-bottom: 1px solid #dee2e6; font-size: 14px;">${it(ls.amount)}</td>
              </tr>
            `).join(""):""}
                ${Ge&&Ge.misc?Object.entries(Ge.misc).filter(([Bs,ls])=>ls&&typeof ls=="object"&&(ls.name||ls.amount)).map(([Bs,ls],pn)=>`
                  <tr style="background: ${pn%2===0?"#f8f9fa":"white"};">
                    <td style="padding: 10px 12px; border-bottom: 1px solid #dee2e6; font-size: 14px;">${ls.name||Bs}</td>
                    <td style="padding: 10px 12px; border-bottom: 1px solid #dee2e6; font-size: 14px;">${ls.qty||""}</td>
                    <td style="padding: 10px 12px; border-bottom: 1px solid #dee2e6; font-size: 14px;">${ls.rate||""}</td>
                    <td style="padding: 10px 12px; border-bottom: 1px solid #dee2e6; font-size: 14px;">${it(ls.amount)}</td>
              </tr>
            `).join(""):""}
          </tbody>
        </table>
      </div>

      <!-- Total Section -->
          <div style="margin: 30px 0; padding: 20px; background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%); color: white; border-radius: 8px;">
            <h2 style="margin: 0 0 15px 0; font-size: 18px; text-align: center;">Cost Summary</h2>
            <div style="display: flex; justify-content: space-between; margin: 8px 0; font-size: 16px;">
          <span>Materials Cost:</span>
          <span>${it(Ge?.totals?.materials||0)}</span>
        </div>
            <div style="display: flex; justify-content: space-between; margin: 8px 0; font-size: 16px;">
          <span>Labor Cost:</span>
          <span>${it(Ge?.totals?.labor||0)}</span>
        </div>
            <div style="display: flex; justify-content: space-between; margin: 8px 0; font-size: 16px;">
          <span>Utilities:</span>
          <span>${it(Ge?.totals?.utilities||0)}</span>
        </div>
            <div style="display: flex; justify-content: space-between; margin: 8px 0; font-size: 16px;">
          <span>Miscellaneous:</span>
          <span>${it(Ge?.totals?.misc||0)}</span>
        </div>
            <div style="display: flex; justify-content: space-between; margin: 8px 0; font-size: 16px;">
          <span>Transportation:</span>
          <span>${it(Ge?.totals?.transport||0)}</span>
        </div>
            <div style="display: flex; justify-content: space-between; margin: 8px 0; font-size: 16px;">
          <span>Contingency (5%):</span>
          <span>${it(Ge?.totals?.contingency||0)}</span>
        </div>
            <div style="display: flex; justify-content: space-between; margin: 8px 0; font-size: 18px; font-weight: bold; border-top: 2px solid white; padding-top: 10px; margin-top: 15px;">
          <span>GRAND TOTAL:</span>
          <span>${it(Ge?.totals?.grand||R.total_cost)}</span>
        </div>
      </div>

      <!-- Terms and Conditions -->
          <div style="margin: 30px 0; padding: 20px; background: #f8f9fa; border-left: 4px solid #28a745;">
            <h3 style="margin: 0 0 15px 0; color: #28a745; font-size: 16px;">Terms & Conditions</h3>
            <p style="margin: 8px 0; font-size: 14px; line-height: 1.5;"><strong>Payment Terms:</strong> 30% advance, 40% on completion of foundation, 30% on completion</p>
            <p style="margin: 8px 0; font-size: 14px; line-height: 1.5;"><strong>Validity:</strong> This estimate is valid for 30 days from the date of issue</p>
            <p style="margin: 8px 0; font-size: 14px; line-height: 1.5;"><strong>Materials:</strong> All materials will be of standard quality as per specifications</p>
            <p style="margin: 8px 0; font-size: 14px; line-height: 1.5;"><strong>Timeline:</strong> Project completion within ${R.timeline||"90"} days from commencement</p>
            <p style="margin: 8px 0; font-size: 14px; line-height: 1.5;"><strong>Warranty:</strong> 1 year warranty on workmanship, 5 years on structural elements</p>
            <p style="margin: 8px 0; font-size: 14px; line-height: 1.5;"><strong>Notes:</strong> ${R.notes?R.notes.replace(/\n/g,"<br/>"):"All work to be done as per approved drawings and specifications"}</p>
      </div>

      <!-- Signature Section -->
          <div style="margin-top: 50px; display: grid; grid-template-columns: 1fr 1fr; gap: 40px;">
            <div style="text-align: center; padding: 20px; border: 2px solid #2c3e50; border-radius: 8px; background: #f8f9fa;">
              <div style="border-bottom: 2px solid #2c3e50; margin: 40px 0 10px 0; height: 2px;"></div>
              <div style="font-size: 14px; font-weight: bold; color: #2c3e50; margin-top: 10px;">Client Signature</div>
          <p style="margin-top: 10px; font-size: 12px; color: #6c757d;">Date: _______________</p>
        </div>
            <div style="text-align: center; padding: 20px; border: 2px solid #2c3e50; border-radius: 8px; background: #f8f9fa;">
              <div style="width: 100px; height: 100px; border: 3px solid #dc3545; border-radius: 50%; margin: 0 auto 15px; display: flex; align-items: center; justify-content: center; font-size: 12px; font-weight: bold; color: #dc3545; background: white; text-align: center; line-height: 1.2;">
            <div>OFFICIAL<br/>SEAL</div>
          </div>
              <div style="border-bottom: 2px solid #2c3e50; margin: 40px 0 10px 0; height: 2px;"></div>
              <div style="font-size: 14px; font-weight: bold; color: #2c3e50; margin-top: 10px;">${Ct}</div>
          <p style="margin-top: 5px; font-size: 12px; color: #6c757d;">Authorized Contractor</p>
          <p style="margin-top: 5px; font-size: 12px; color: #6c757d;">Date: ${Kt}</p>
        </div>
      </div>

      <!-- Footer -->
          <div style="margin-top: 40px; text-align: center; font-size: 12px; color: #6c757d; border-top: 1px solid #dee2e6; padding-top: 15px;">
        <p>This is a computer-generated estimate. For any clarifications, please contact us.</p>
        <p> ${new Date().getFullYear()} ${Ct} Construction. All rights reserved.</p>
      </div>
        </div>`,It=document.createElement("div");It.style.position="absolute",It.style.left="-9999px",It.style.top="-9999px",It.style.width="210mm",It.style.padding="20mm",It.style.backgroundColor="white",It.style.fontFamily="Times New Roman, serif",It.style.fontSize="12px",It.style.lineHeight="1.4",It.style.color="#1a1a1a",It.innerHTML=Tt,document.body.appendChild(It),console.log("Converting HTML to canvas...");const Rs=await Kc(It,{scale:2,useCORS:!0,allowTaint:!0,backgroundColor:"#ffffff"});console.log("Canvas created:",Rs.width,"x",Rs.height),document.body.removeChild(It),console.log("Creating PDF...");const na=new is("p","mm","a4"),ra=Rs.toDataURL("image/png"),Ds=210,Ra=295,Wa=Rs.height*Ds/Rs.width;let Da=Wa;console.log("Image dimensions:",Ds,"x",Wa);let en=0;for(na.addImage(ra,"PNG",0,en,Ds,Wa),Da-=Ra;Da>=0;)en=Da-Wa,na.addPage(),na.addImage(ra,"PNG",0,en,Ds,Wa),Da-=Ra;const ur=`Estimate_${Ct.replace(/\s+/g,"_")}_${Date.now().toString().slice(-6)}.pdf`;console.log("Saving PDF as:",ur);try{const Bs=na.output("blob"),ls=URL.createObjectURL(Bs),pn=document.createElement("a");pn.href=ls,pn.download=ur,pn.style.display="none",document.body.appendChild(pn),pn.click(),document.body.removeChild(pn),URL.revokeObjectURL(ls),console.log("PDF downloaded via blob method")}catch(Bs){console.log("Blob method failed, trying direct save:",Bs),na.save(ur)}console.log("PDF save method called")}catch(Fe){console.error("Error generating PDF report:",Fe),s.error("Error generating PDF report")}},Re=async R=>{try{const Ge=(()=>{try{return R.structured?JSON.parse(R.structured):null}catch{return null}})()?.technical_details||{};if(!Ge||Object.keys(Ge).length===0){s.warning("No technical details available for this estimate");return}const it=R.contractor_name||"Contractor",Ct=new Date().toLocaleDateString("en-IN",{year:"numeric",month:"long",day:"numeric"}),Kt=Bs=>Bs?typeof Bs=="object"?JSON.stringify(Bs,null,2):String(Bs):"",Tt=`
        <div style="font-family: 'Times New Roman', serif; color: #1a1a1a; margin: 0; padding: 20px; line-height: 1.4; background: white;">
          <div style="text-align: center; margin-bottom: 30px; border-bottom: 3px solid #2c3e50; padding-bottom: 20px;">
            <div style="font-size: 28px; font-weight: bold; color: #2c3e50;">Technical Details Report</div>
            <div style="font-size: 14px; color: #6c757d; margin-top: 8px;">Contractor: ${it}</div>
            <div style="font-size: 12px; color: #9ca3af;">Date: ${Ct}</div>
          </div>
          
          ${Ge.room_dimensions?`
          <div style="margin-bottom: 24px;">
            <h3 style="color: #2c3e50; border-bottom: 2px solid #2c3e50; padding-bottom: 8px;">Room Dimensions</h3>
            <div style="margin-top: 12px;">
              ${Object.entries(Ge.room_dimensions).map(([Bs,ls])=>`
                <div style="padding: 8px 12px; margin: 4px 0; background: #f8f9fa; border-left: 3px solid #2c3e50;">
                  <strong>${Bs}:</strong> ${Kt(ls)}
                </div>
              `).join("")}
            </div>
          </div>
          `:""}

          ${Ge.floor_plans?`
          <div style="margin-bottom: 24px;">
            <h3 style="color: #2c3e50; border-bottom: 2px solid #2c3e50; padding-bottom: 8px;">Floor Plans</h3>
            <div style="margin-top: 12px;">
              ${Object.entries(Ge.floor_plans).map(([Bs,ls])=>`
                <div style="padding: 8px 12px; margin: 4px 0; background: #f8f9fa; border-left: 3px solid #2c3e50;">
                  <strong>${Bs.replace(/_/g," ")}:</strong> ${Kt(ls)}
                </div>
              `).join("")}
            </div>
          </div>
          `:""}

          ${Ge.structural_elements?`
          <div style="margin-bottom: 24px;">
            <h3 style="color: #2c3e50; border-bottom: 2px solid #2c3e50; padding-bottom: 8px;">Structural Elements</h3>
            <div style="margin-top: 12px;">
              ${Object.entries(Ge.structural_elements).map(([Bs,ls])=>`
                <div style="padding: 8px 12px; margin: 4px 0; background: #f8f9fa; border-left: 3px solid #2c3e50;">
                  <strong>${Bs.replace(/_/g," ")}:</strong> ${Kt(ls)}
                </div>
              `).join("")}
            </div>
          </div>
          `:""}

          ${Ge.material_specifications?`
          <div style="margin-bottom: 24px;">
            <h3 style="color: #2c3e50; border-bottom: 2px solid #2c3e50; padding-bottom: 8px;">Material Specifications</h3>
            <div style="margin-top: 12px;">
              ${Object.entries(Ge.material_specifications).map(([Bs,ls])=>`
                <div style="padding: 8px 12px; margin: 4px 0; background: #f8f9fa; border-left: 3px solid #2c3e50;">
                  <strong>${Bs.replace(/_/g," ")}:</strong> ${Kt(ls)}
                </div>
              `).join("")}
            </div>
          </div>
          `:""}
        </div>`,It=document.createElement("div");It.style.position="absolute",It.style.left="-9999px",It.style.top="-9999px",It.style.width="210mm",It.style.padding="20mm",It.style.backgroundColor="white",It.innerHTML=Tt,document.body.appendChild(It);const Rs=await Kc(It,{scale:2,useCORS:!0,allowTaint:!0,backgroundColor:"#ffffff"});document.body.removeChild(It);const na=new is("p","mm","a4"),ra=Rs.toDataURL("image/png"),Ds=210,Ra=295,Wa=Rs.height*Ds/Rs.width;let Da=Wa,en=0;for(na.addImage(ra,"PNG",0,en,Ds,Wa),Da-=Ra;Da>=0;)en=Da-Wa,na.addPage(),na.addImage(ra,"PNG",0,en,Ds,Wa),Da-=Ra;const ur=`Technical_Details_${it.replace(/\s+/g,"_")}_${Date.now().toString().slice(-6)}.pdf`;na.save(ur),s.success("Technical details PDF downloaded successfully")}catch(Fe){console.error("Error generating technical details PDF:",Fe),s.error("Error generating PDF")}},We=async(R,Fe,Ge="")=>{try{const it=JSON.parse(sessionStorage.getItem("user")||"{}"),Kt=await(await fetch("/buildhub/backend/api/homeowner/respond_to_estimate.php",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({homeowner_id:it.id,estimate_id:R.id,action:Fe,message:Ge})})).json();if(Kt?.success){try{const Rs=await(await fetch(`/buildhub/backend/api/homeowner/get_estimates.php?homeowner_id=${it.id}`,{credentials:"include"})).json().catch(()=>({}));Rs?.success&&Ut(Array.isArray(Rs.estimates)?Rs.estimates:[])}catch{}const Tt=Fe==="accept"?"Accepted. Contractor will be notified.":Fe==="changes"?"Change request sent.":"Estimate rejected.";try{s.success(Tt)}catch{}}else try{s.error(Kt?.message||"Failed to update")}catch{}}catch{}},Lt=async R=>{try{const Fe=JSON.parse(sessionStorage.getItem("user")||"{}");if(!Fe?.id){s.error("Not logged in");return}if(!R?.id){s.error("Invalid estimate");return}const it=await(await fetch("/buildhub/backend/api/homeowner/start_construction.php",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({homeowner_id:Fe.id,estimate_id:R.id})})).json().catch(()=>({}));if(it?.success){s.success("Construction started successfully! Contractor can now submit progress updates.");try{const Kt=await(await fetch(`/buildhub/backend/api/homeowner/get_estimates.php?homeowner_id=${Fe.id}`,{credentials:"include"})).json().catch(()=>({}));Kt?.success&&Ut(Array.isArray(Kt.estimates)?Kt.estimates:[])}catch{}}else s.error(it?.message||"Failed to start construction")}catch(Fe){console.error("Error starting construction:",Fe),s.error("Error starting construction")}},Vt=async R=>{R&&we("Remove Estimate","Are you sure you want to remove this estimate? This action cannot be undone.",async()=>{try{const Ge=await(await fetch("/buildhub/backend/api/homeowner/delete_estimate.php",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({estimate_id:R})})).json();Ge.success?(Ut(it=>it.filter(Ct=>Ct.id!==R)),s.success("Estimate removed successfully")):s.error(Ge.message||"Failed to remove estimate")}catch(Fe){console.error("Error removing estimate:",Fe),s.error("Error removing estimate. Please try again.")}})},Ot=async R=>{try{console.log("=== SEND MESSAGE DEBUG ==="),console.log("Estimate object:",R);const Fe=JSON.parse(sessionStorage.getItem("user")||"{}");if(console.log("User:",Fe),!Fe?.id){console.log("No user ID found");try{s.error("Not logged in")}catch{}return}if(!R?.id||!R?.contractor_id){console.log("Invalid estimate data:",{id:R?.id,contractor_id:R?.contractor_id});try{s.error("Invalid estimate data")}catch{}return}console.log("Sending direct message for estimate:",R.id),console.log("Contractor ID:",R.contractor_id),console.log("Homeowner ID:",Fe.id);const Ge={homeowner_id:Fe.id,estimate_id:R.id,contractor_id:R.contractor_id,project_title:R.project_title||`Estimate #${R.id}`,message:"I am satisfied with this estimate and ready to start the construction project. Please let me know the next steps and when we can begin work."};console.log("Request data:",Ge);const it=await fetch("/buildhub/backend/api/homeowner/send_estimate_message.php",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(Ge)});console.log("Response status:",it.status);const Ct=await it.json();if(console.log("Response data:",Ct),Ct?.success){console.log("Message sent successfully!");try{s.success("Message sent to contractor successfully!")}catch{}kt(Kt=>({...Kt,[R.id]:!0}));try{const Tt=await(await fetch(`/buildhub/backend/api/homeowner/get_estimates.php?homeowner_id=${Fe.id}`,{credentials:"include"})).json().catch(()=>({}));Tt?.success&&Ut(Array.isArray(Tt.estimates)?Tt.estimates:[])}catch{}}else{console.log("Failed to send message:",Ct);try{s.error(Ct?.message||"Failed to send message")}catch{}}}catch(Fe){console.error("Error sending message:",Fe);try{s.error("Error sending message: "+Fe.message)}catch{}}},ss=Array.isArray(j)?j.length:0,xs=Array.isArray(A)?A.length:0;Array.isArray(V)&&V.length,Array.isArray(E)&&E.length;const Hs=Array.isArray(I)?I.length:0;N.useEffect(()=>{let R=!0;const Fe=async()=>{try{const Ct=await(await fetch("/buildhub/backend/api/homeowner/get_my_requests.php")).json().catch(()=>({}));if(R&&Ct?.success){const Kt=Array.isArray(Ct.requests)?Ct.requests:[];B(Kt.filter(Tt=>Tt.status!=="deleted"))}}catch{}try{const Ct=await(await fetch("/buildhub/backend/api/homeowner/get_contractor_requests.php")).json().catch(()=>({}));if(R&&Ct?.success){const Kt=Array.isArray(Ct.requests)?Ct.requests:[];U(Kt.filter(Tt=>Tt.status!=="deleted"))}}catch{}try{const Ct=await(await fetch("/buildhub/backend/api/homeowner/get_received_designs.php",{credentials:"include"})).json().catch(()=>({}));R&&Ct?.success&&u(Array.isArray(Ct.designs)?Ct.designs:[])}catch{}try{const Ct=await(await fetch("/buildhub/backend/api/homeowner/get_my_projects.php")).json().catch(()=>({}));R&&Ct?.success&&H(Array.isArray(Ct.projects)?Ct.projects:[])}catch{}try{const Ct=await(await fetch("/buildhub/backend/api/homeowner/get_layout_library.php",{credentials:"include"})).json().catch(()=>({}));R&&Ct?.success&&M(Array.isArray(Ct.layouts)?Ct.layouts:[])}catch{}};Fe();const Ge=setInterval(Fe,6e4);return()=>{R=!1,clearInterval(Ge)}},[]);const Ms=R=>{const Fe=Number(R?.sqft||R?.area||0);if(Fe>0)return Fe;const Ge=R?.technical_details||R?.technicalDetails||{},it=Number(Ge?.sqft||Ge?.area_sqft||Ge?.total_sqft||Ge?.totalSqft||0);if(it>0)return it;const Ct=R?.meta||{},Kt=Number(Ct?.sqft||Ct?.area_sqft||0);return Kt>0?Kt:0},la=R=>{if(R?.view_price&&R.view_price>0)return parseFloat(R.view_price);const Fe=Ms(R),Ge=8e3,it=Fe>0?Fe*10:0;return Ge+it},Zs=async R=>{xe(""),Xe(!0),Oe(R.id);try{const Ge=await(await fetch("/buildhub/backend/api/homeowner/initiate_layout_payment.php",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({design_id:R.id,amount_override:la(R)})})).json();if(!Ge?.success){xe(Ge?.message||"Failed to initiate payment");return}const it={key:Ge.razorpay_key_id,amount:Ge.amount,currency:Ge.currency||"INR",name:"BuildHub",description:`View layout: ${Ge.design_title||R.title||R.design_title||"Layout"}`,order_id:Ge.razorpay_order_id,handler:async function(Kt){try{const It=await(await fetch("/buildhub/backend/api/homeowner/verify_layout_payment.php",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({razorpay_payment_id:Kt.razorpay_payment_id,razorpay_order_id:Kt.razorpay_order_id,razorpay_signature:Kt.razorpay_signature,payment_id:Ge.payment_id,design_id:R.id})})).json();if(It?.success){const na=await(await fetch("/buildhub/backend/api/homeowner/get_received_designs.php",{credentials:"include"})).json().catch(()=>({}));na?.success&&u(Array.isArray(na.designs)?na.designs:[]),xt(ra=>{const Ds={...ra,[R.id]:!0};try{const Ra=JSON.parse(localStorage.getItem("bh_paid_layouts")||"[]"),Wa=new Set(Array.isArray(Ra)?Ra:[]);Wa.add(R.id),localStorage.setItem("bh_paid_layouts",JSON.stringify(Array.from(Wa)))}catch{}return Ds}),xe("")}else xe(It?.message||"Payment verification failed")}catch{xe("Payment verification failed")}},prefill:{name:`${C?.first_name||""} ${C?.last_name||""}`.trim()||void 0,email:C?.email},theme:{color:"#2563eb"}};new window.Razorpay(it).open()}catch{xe("Network error during payment")}finally{Xe(!1),Oe(null)}},Sa=R=>!!(R?.payment_status==="completed"||R?.unlocked===!0||Bt?.[R?.id]),da=async R=>{xe(""),Xe(!0),Oe(R.id);try{let Fe=0;for(;(!window.Razorpay||window._razorpayLoading)&&Fe<20;)await new Promise(Kt=>setTimeout(Kt,100)),Fe++;if(!window.Razorpay){xe("Payment system not loaded. Please refresh the page and try again.");return}const it=await(await fetch("/buildhub/backend/api/homeowner/initiate_technical_details_payment.php",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({house_plan_id:R.house_plan_id})})).json();if(!it?.success){xe(it?.message||"Failed to initiate payment");return}const Ct={key:it.razorpay_key_id,amount:it.amount,currency:it.currency||"INR",name:"BuildHub",description:it.description||`Unlock Technical Details: ${R.design_title}`,order_id:it.razorpay_order_id,handler:async function(Kt){try{const It=await(await fetch("/buildhub/backend/api/homeowner/verify_technical_details_payment.php",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({razorpay_payment_id:Kt.razorpay_payment_id,razorpay_order_id:Kt.razorpay_order_id,razorpay_signature:Kt.razorpay_signature,payment_id:it.payment_id})})).json();It?.success?(await ke(),xe(""),s?.success("Technical details unlocked successfully!")):xe(It?.message||"Payment verification failed")}catch(Tt){console.error("Payment verification error:",Tt),xe("Payment verification failed")}},prefill:{name:`${C?.first_name||""} ${C?.last_name||""}`.trim()||void 0,email:C?.email},theme:{color:"#2563eb"}};try{new window.Razorpay(Ct).open()}catch(Kt){console.error("Razorpay error:",Kt),xe("Failed to open payment gateway. Please try again.")}}catch(Fe){console.error("Payment initiation error:",Fe),xe("Network error during payment")}finally{Xe(!1),Oe(null)}},[xa,ha]=N.useState([]),[ya,Ws]=N.useState(!1),[Dn,Ma]=N.useState(""),[ie,Se]=N.useState(""),[ot,qt]=N.useState(""),[Zt,ys]=N.useState(""),vs=N.useRef("");N.useEffect(()=>{vs.current=ot},[ot]),N.useEffect(()=>{const R=setTimeout(()=>{const Fe=vs.current;typeof Fe=="string"&&Fe.trim().length>0&&Cs({status:"approved",search:ie,specialization:Fe,min_experience:Zt})},350);return()=>clearTimeout(R)},[ot,ie,Zt]);const[as,ps]=N.useState(!1),[fs,pa]=N.useState(null),[Ps,ca]=N.useState([]),[In,Yr]=N.useState(!1),[Ai,qs]=N.useState(!1),[Xn,Ci]=N.useState(null),[ea,Jn]=N.useState([]),[ja,wr]=N.useState(""),[Ks,Qr]=N.useState(!1),[Zn,Xr]=N.useState({subject:"",category:"general",message:""}),[Tr,er]=N.useState(!1),[di,jr]=N.useState([]),[bs,ae]=N.useState(null),[ge,De]=N.useState([]),[st,gt]=N.useState(!1),[rt,Dt]=N.useState(!1),[Pt,Wt]=N.useState({title:"",layoutType:"",bedrooms:"",bathrooms:"",area:"",priceRange:"",description:"",previewImage:null,layoutFile:null}),[ms,Mt]=N.useState([]),[fa,dn]=N.useState([]),[zn,ka]=N.useState({open:!1,src:"",title:""}),[yn,jn]=N.useState(!1),[Rr,Vo]=N.useState([]),[Jr,Xi]=N.useState(!1),[Dr,Ir]=N.useState(""),[Qa,Za]=N.useState([]),[_r,Zr]=N.useState(""),[Br,Si]=N.useState(!1),[Hn,ui]=N.useState(null),[Ts,dr]=N.useState(null),_o=N.useRef(null);N.useEffect(()=>{const R=Ge=>{_o.current&&!_o.current.contains(Ge.target)&&je(!1)},Fe=Ge=>{Ge.key==="Escape"&&je(!1)};return document.addEventListener("mousedown",R),document.addEventListener("keydown",Fe),()=>{document.removeEventListener("mousedown",R),document.removeEventListener("keydown",Fe)}},[]),N.useEffect(()=>{const R=JSON.parse(sessionStorage.getItem("user")||"{}");console.log("User data loaded:",R),Q(R)},[]),N.useEffect(()=>{console.log("Profile menu open state changed:",Ve)},[Ve]),N.useEffect(()=>{C?.id&&console.log("Loading notifications for user:",C.id)},[C?.id]),N.useEffect(()=>{li(async()=>{const{preventCache:R,verifyServerSession:Fe}=await import("./session-DODIVVdM.js");return{preventCache:R,verifyServerSession:Fe}},[]).then(({preventCache:R,verifyServerSession:Fe})=>{R(),(async()=>{const Ge=JSON.parse(sessionStorage.getItem("user")||"{}"),it=await Fe();if(!Ge.id||Ge.role!=="homeowner"||!it){sessionStorage.removeItem("user"),localStorage.removeItem("bh_user"),t("/login",{replace:!0});return}})()})},[]);const Ji=async()=>{try{const Fe=await(await fetch("/buildhub/backend/api/support/get_issues.php",{credentials:"include"})).json();Fe.success&&jr(Fe.issues||[])}catch{}},ei=async R=>{try{const Ge=await(await fetch(`/buildhub/backend/api/support/get_issues.php?issue_id=${R}`,{credentials:"include"})).json();Ge.success&&(ae(Ge.issue),De(Ge.replies||[]))}catch{}},hi=async()=>{if(!(!Zn.subject.trim()||!Zn.message.trim())){er(!0);try{const Fe=await(await fetch("/buildhub/backend/api/support/create_issue.php",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(Zn)})).json();Fe.success?(Xr({subject:"",category:"general",message:""}),Ce("Issue reported to admin"),await Ji(),Fe.issue_id?await ei(Fe.issue_id):ae(null)):fe(Fe.message||"Failed to submit issue")}catch{fe("Network error submitting issue")}finally{er(!1)}}},Bo=async()=>{try{await fetch("/buildhub/backend/api/logout.php",{method:"POST",credentials:"include"})}catch{}localStorage.removeItem("bh_user"),sessionStorage.removeItem("user"),t("/login",{replace:!0})},Zi=async()=>{G(!0);try{const Fe=await(await fetch("/buildhub/backend/api/homeowner/get_my_requests.php")).json();if(Fe.success){const Ge=Array.isArray(Fe.requests)?Fe.requests:[];B(Ge.filter(it=>it.status!=="deleted"))}}catch(R){console.error("Error fetching requests:",R)}finally{G(!1)}},pi=async()=>{try{const Fe=await(await fetch("/buildhub/backend/api/homeowner/get_my_projects.php")).json();Fe.success&&H(Fe.projects||[])}catch(R){console.error("Error fetching projects:",R)}},wl=async()=>{try{G(!0);const Fe=await(await fetch("/buildhub/backend/api/homeowner/get_contractor_requests.php")).json();if(Fe.success){const Ge=Array.isArray(Fe.requests)?Fe.requests:[];U(Ge.filter(it=>it.status!=="deleted"))}}catch(R){console.error("Error fetching contractor requests:",R)}finally{G(!1)}},_=async R=>{if(R)try{const Ge=await(await fetch("/buildhub/backend/api/homeowner/delete_request.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({layout_request_id:R})})).json();Ge.success?(B(it=>it.filter(Ct=>Ct.id!==R)),U(it=>it.filter(Ct=>Ct.id!==R)),Ce("Request removed")):fe(Ge.message||"Failed to remove request")}catch{fe("Error removing request")}},$=async()=>{try{const Fe=await(await fetch("/buildhub/backend/api/homeowner/get_layout_library.php")).json();Fe.success&&M(Fe.layouts||[])}catch(R){console.error("Error fetching layout library:",R)}},ve=async R=>{R.preventDefault(),Dt(!1),Wt({title:"",layoutType:"",bedrooms:"",bathrooms:"",area:"",priceRange:"",description:"",previewImage:null,layoutFile:null}),Ce("Layout added to library (placeholder)")},ke=async()=>{try{const Fe=await(await fetch("/buildhub/backend/api/homeowner/get_received_designs.php",{credentials:"include"})).json();if(Fe.success){const Ge=Fe.designs||[];u(Ge);const it=Ge.find(Ct=>Ct.status==="finalized");it?$a(it):(Mt(hn()),dn(tr()))}}catch(R){console.error("Error fetching designs:",R)}},Ie=R=>/\.(png|jpe?g|gif|webp|bmp|svg|heic)$/i.test(R||""),ct=R=>/\.(pdf)$/i.test(R||""),jt=async R=>{if(!R)return;if(typeof R=="string"&&R.startsWith("hp_")){fe("House plans cannot be deleted from this section. Please use the House Plans tab to manage them.");return}try{const it=await(await fetch("/buildhub/backend/api/homeowner/delete_design.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({design_id:R})})).json();it.success?(u(Ct=>Ct.filter(Kt=>Kt.id!==R)),Ce("Design deleted successfully")):fe(it.message||"Failed to delete design")}catch{fe("Error deleting design")}},Xt=async(R,Fe)=>{try{const it=await(await fetch("/buildhub/backend/api/homeowner/update_design_selection.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({design_id:R,action:Fe})})).json();it.success?(Ce(Fe==="finalize"?"Design finalized":Fe==="shortlist"?"Added to shortlist":"Removed from shortlist"),await ke()):fe(it.message||"Failed to update selection")}catch{fe("Error updating selection")}},ds=async R=>{try{const Ge=await(await fetch(`/buildhub/backend/api/comments/get_comments.php?design_id=${R}`)).json();Ge.success&&p(it=>({...it,[R]:Ge.comments}))}catch{}},_s=async R=>{const Fe=(m[R]||"").trim(),Ge=Number(b[R]||0);if(Fe)try{const Ct=await(await fetch("/buildhub/backend/api/comments/post_comment.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({design_id:R,message:Fe})})).json(),Kt=A.find(Tt=>Tt.id===R);if(Kt?.architect_id)try{await fetch("/buildhub/backend/api/reviews/post_review.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({architect_id:Kt.architect_id,design_id:R,rating:Ge>0?Ge:5,comment:Fe})})}catch{}Ct.success?(v(It=>({...It,[R]:""})),x(It=>({...It,[R]:0})),ds(R),Ce("Comment & review posted"),A.find(It=>It.id===R)?.status==="finalized"&&$a(A.find(It=>It.id===R))):fe(Ct.message||"Failed to post comment")}catch{fe("Error posting comment")}},Cs=async(R={})=>{Ws(!0),Ma("");try{const Fe=new URLSearchParams({...R.search?{search:R.search}:{},...R.specialization?{specialization:R.specialization}:{},...R.min_experience?{min_experience:R.min_experience}:{},...R.layout_request_id?{layout_request_id:R.layout_request_id}:{}}).toString(),it=await(await fetch(`/buildhub/backend/api/homeowner/get_architects.php${Fe?`?${Fe}`:""}`,{credentials:"include"})).json();if(it.success){const Ct=it.architects||[];ha(Ct)}else Ma(it.message||"Failed to load architects")}catch{Ma("Error loading architects")}finally{Ws(!1)}},Gs=async(R={})=>{Xi(!0),Ir("");try{const Fe=new URLSearchParams({...R.search?{search:R.search}:{},...R.specialization?{specialization:R.specialization}:{},...R.min_experience?{min_experience:R.min_experience}:{}}).toString(),it=await(await fetch(`/buildhub/backend/api/homeowner/get_contractors.php${Fe?`?${Fe}`:""}`,{credentials:"include"})).json();it.success?Vo(it.contractors||[]):Ir(it.message||"Failed to load contractors")}catch{Ir("Error loading contractors")}finally{Xi(!1)}},Ta=R=>{Ci(R),Jn(null),wr(""),Rt(!0),Cs({status:"approved",search:ie,specialization:ot,min_experience:Zt,layout_request_id:R?.id})},Va=R=>{le(R),Za([]),Zr(""),jn(!0),Gs()},va=R=>{ui(R||null);const Fe=R?.selected_layout_id;le(Fe?{id:Fe,title:"Selected Layout"}:null),Za([]),jn(!0),Gs(),(async()=>{if(Fe){if(Array.isArray(I)&&I.length>0){const it=I.find(Ct=>Number(Ct.id)===Number(Fe));if(it){le(it);return}}try{const Ct=await(await fetch("/buildhub/backend/api/homeowner/get_layout_library.php",{credentials:"include"})).json();if(Ct?.success&&Array.isArray(Ct.layouts)){const Kt=Ct.layouts.find(Tt=>Number(Tt.id)===Number(Fe));Kt&&le(Kt)}}catch{}}})()},un=async()=>{const R=z?.id||Hn?.selected_layout_id;if(!Qa||Qa.length===0){fe("Please select at least one contractor");return}if(!R&&!!!Hn){fe("Please select a layout to send");return}Si(!0);const Ge=[],it=[];try{for(const Ct of Qa)try{const Tt=await(await fetch("/buildhub/backend/api/homeowner/send_to_contractor.php",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({layout_id:R||null,contractor_id:Ct.id,homeowner_id:C?.id,contractor_message:_r||"",forwarded_design:Hn?{id:Hn.id,title:Hn.design_title,description:Hn.description,files:Array.isArray(Hn.files)?Hn.files:[],technical_details:Hn.technical_details||null,created_at:Hn.created_at}:null,plot_size:z?.plot_size||X.plot_size||null,building_size:z?.building_size||X.building_size||null})})).json();Tt.success?Ge.push(Tt.contractor_name||Ct.first_name):it.push(`${Ct.first_name}: ${Tt.message||"Failed"}`)}catch{it.push(`${Ct.first_name}: Network error`)}Ge.length>0&&(Ce(`Layout sent to ${Ge.length} contractor(s): ${Ge.join(", ")}`),jn(!1),Za([]),Zr(""),le(null),ui(null),Zi(),setTimeout(()=>Ce(""),5e3)),it.length>0&&fe(it.join("; ")),Ge.length===0&&it.length>0&&fe("Failed to send to any contractors: "+it.join("; "))}catch{fe("Network error. Please try again.")}finally{Si(!1)}},$a=R=>{const Fe=hn(),Ge=tr(),it=(R?.description||"").trim();if(it.startsWith("{")||it.startsWith("["))try{const ra=JSON.parse(it),Ds=qn(ra);if(Ds&&Array.isArray(Ds.rooms)&&Array.isArray(Ds.walls)){Mt(Ds.rooms.length?Ds.rooms:Fe),dn(Ds.walls.length?Ds.walls:Ge);return}}catch{}if(R?.layout_json)try{const ra=JSON.parse(R.layout_json),Ds=qn(ra);if(Ds&&Array.isArray(Ds.rooms)&&Array.isArray(Ds.walls)){Mt(Ds.rooms.length?Ds.rooms:Fe),dn(Ds.walls.length?Ds.walls:Ge);return}}catch{}const Ct=Array.isArray(R?.files)?R.files:[];if(!Ct.length){Mt(Fe),dn(Ge);return}const Kt=Ct.map(ra=>(ra.original||ra.stored||"").toLowerCase()),Tt=ra=>Kt.some(Ds=>Ds.includes(ra)),It=[];Tt("living")&&It.push({name:"Living Room",position:[-1.4,0,1],size:[2.8,2],color:"#eef6ff"}),Tt("kitchen")&&It.push({name:"Kitchen",position:[1.5,0,1],size:[2.4,2],color:"#fff6e9"}),(Tt("bed")||Tt("master"))&&It.push({name:"Bedroom",position:[-1.6,0,-1],size:[2.6,1.8],color:"#f3e8ff"}),(Tt("bath")||Tt("toilet")||Tt("wc"))&&It.push({name:"Bath",position:[1.2,0,-1],size:[2,1.2],color:"#fdecec"}),(Tt("hall")||Tt("corridor")||Tt("foyer"))&&It.push({name:"Hallway",position:[1.2,0,-2.1],size:[2,.6],color:"#ecfdf5"});const Rs=It.length?It:Fe,na=[{position:[0,.175,2.25],rotation:[0,0,0],length:6.2},{position:[0,.175,-2.25],rotation:[0,0,0],length:6.2},{position:[-3.1,.175,0],rotation:[0,Math.PI/2,0],length:4.5},{position:[3.1,.175,0],rotation:[0,Math.PI/2,0],length:4.5},{position:[.15,.175,0],rotation:[0,Math.PI/2,0],length:4.2},{position:[-.25,.175,-2],rotation:[0,0,0],length:4},{position:[2.2,.175,-1.6],rotation:[0,Math.PI/2,0],length:1.8}];Mt(Rs),dn(na)},hn=()=>[],tr=()=>[],qn=R=>{if(R&&Array.isArray(R.rooms)){const it=Number(R.scale||1),Ct=R.rooms.map((Tt,It)=>({name:Tt.name||`Room ${It+1}`,position:[Number(Tt.x||0)*it,0,Number(Tt.z||0)*it],size:[Number(Tt.width||2)*it,Number(Tt.depth||2)*it],color:Tt.color||void 0})),Kt=Array.isArray(R.walls)?R.walls.map(Tt=>({position:[Number(Tt.x||0)*it,.175,Number(Tt.z||0)*it],rotation:[0,jl(Number(Tt.rotation||0)),0],length:Number(Tt.length||2)*it,thickness:Number(Tt.thickness||.06)*(it>0?it:1),height:Number(Tt.height||.35)*(it>0?it:1)})):[];return{rooms:Ct,walls:Kt}}const Fe=(R?.rooms||"").toString().toLowerCase();return Fe.includes("3")||Fe.includes("3bhk")||Fe.includes("3-bhk"),(R?.aesthetic||"").toString().toLowerCase().includes("modern"),{rooms:hn(),walls:tr()}},jl=R=>R*Math.PI/180,ki=async()=>{if(!Xn){Ma("No request selected");return}const R=Array.isArray(ea)?ea:ea?[ea]:[];if(R.length===0){Ma("Please select at least one architect");return}try{if(Ws(!0),!Xn?.id){Ma("Please select a request first"),Ws(!1);return}const Ge=await(await fetch("/buildhub/backend/api/homeowner/assign_architect.php",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({layout_request_id:Xn.id,architect_ids:R,message:ja})})).json();Ge.success?(Ce("Request sent to selected architect(s)"),Rt(!1),Ci(null),Jn(null)):Ma(Ge.message||"Failed to send request")}catch{Ma("Error sending request")}finally{Ws(!1)}},Hr=async R=>{if(R.preventDefault(),!X.plot_size||!X.budget_range||!X.requirements){fe("Please fill all required fields");return}if(X.budget_range==="Custom"&&!X.custom_budget){fe("Please enter a custom budget amount");return}try{G(!0);const Fe={...X,budget_range:X.budget_range==="Custom"?X.custom_budget:X.budget_range},it=await(await fetch("/buildhub/backend/api/homeowner/submit_request.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Fe)})).json();if(it.success){const Ct=Array.isArray(ea)?ea:ea?[ea]:[];if(Ct.length>0)try{await fetch("/buildhub/backend/api/homeowner/assign_architect.php",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({layout_request_id:it.request_id,architect_ids:Ct,message:ja||"Custom design request from dashboard"})})}catch{}Ce(`Your layout request has been submitted successfully! ${Ct.length>0?"It has been assigned to the selected architect(s).":"You can assign it to architects from the Requests tab."}`),he(!1),Jn(null),wr(""),W({plot_size:"",plot_shape:"",topography:"",development_laws:"",family_needs:[],rooms:[],budget_range:"",aesthetic:"",requirements:"",location:"",timeline:"",selected_layout_id:null,layout_type:"custom",custom_budget:""}),Zi()}else fe("Failed to submit request: "+it.message)}catch{fe("Error submitting request")}finally{G(!1)}},fi=R=>{le(R),W({...X,selected_layout_id:R.id,layout_type:"library"}),T(!1),t(`/homeowner/request?selected_layout_id=${R.id}&layout_type=library`)},Fi=()=>e.jsxs("div",{children:[e.jsx("div",{className:"hero-card",children:e.jsxs("div",{className:"hero-content",children:[e.jsxs("div",{children:[e.jsxs("h1",{children:["Welcome back, ",C?.first_name||"Homeowner"," ",e.jsx("span",{role:"img","aria-label":"wave"})]}),e.jsx("p",{children:"Plan and track your home project. Request designs, review proposals, and manage progress."})]}),e.jsx("div",{className:"hero-actions",children:e.jsx("button",{className:"btn btn-primary",onClick:()=>{q(!0),ee(0)},style:{padding:"12px 24px",backgroundColor:"#007bff",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"16px",fontWeight:"600",boxShadow:"0 2px 4px rgba(0,0,0,0.1)",transition:"all 0.2s ease"},children:" Take a Tour Guide"})})]})}),e.jsxs("div",{className:"stats-grid",children:[e.jsx("div",{className:"stat-card w-blue",children:e.jsxs("div",{className:"stat-content",children:[e.jsx("div",{className:"stat-icon requests",children:""}),e.jsxs("div",{className:"stat-info",children:[e.jsx("h3",{children:j.length}),e.jsx("p",{children:"Layout Requests"})]})]})}),e.jsx("div",{className:"stat-card w-green",children:e.jsxs("div",{className:"stat-content",children:[e.jsx("div",{className:"stat-icon projects",children:""}),e.jsxs("div",{className:"stat-info",children:[e.jsx("h3",{children:V.length}),e.jsx("p",{children:"Active Projects"})]})]})}),e.jsx("div",{className:"stat-card w-purple",children:e.jsxs("div",{className:"stat-content",children:[e.jsx("div",{className:"stat-icon library",children:""}),e.jsxs("div",{className:"stat-info",children:[e.jsx("h3",{children:I.length}),e.jsx("p",{children:"Available Layouts"})]})]})}),e.jsx("div",{className:"stat-card w-orange",children:e.jsxs("div",{className:"stat-content",children:[e.jsx("div",{className:"stat-icon completed",children:""}),e.jsxs("div",{className:"stat-info",children:[e.jsx("h3",{children:j.filter(R=>R.status==="approved").length}),e.jsx("p",{children:"Approved Requests"})]})]})})]}),e.jsxs("div",{className:"section-card",children:[e.jsxs("div",{className:"section-header",children:[e.jsx("h2",{children:"Quick Actions"}),e.jsx("p",{children:"Get started with your construction project"})]}),e.jsx("div",{className:"section-content",children:e.jsxs("div",{className:"quick-actions float-grid stagger-children",children:[e.jsxs("button",{className:"float-rect w-blue",onClick:()=>t("/homeowner/request"),children:[e.jsx("div",{className:"fr-icon",children:""}),e.jsx("div",{className:"fr-title",children:"Request Custom Design"}),e.jsx("div",{className:"fr-sub",children:"Get professional architectural designs for your plot"}),e.jsx("div",{className:"fr-help",style:{position:"absolute",top:"8px",right:"8px",background:"rgba(255,255,255,0.2)",borderRadius:"50%",width:"24px",height:"24px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"12px",cursor:"pointer"},title:"New to custom design requests? Click for a guided tour!"})]}),e.jsxs("button",{className:"float-rect w-purple",onClick:()=>{T(!0),$()},children:[e.jsx("div",{className:"fr-icon",children:""}),e.jsx("div",{className:"fr-title",children:"Browse Layout Library"}),e.jsx("div",{className:"fr-sub",children:"Choose from pre-designed layouts and customize them"})]}),e.jsxs("button",{className:"float-rect w-orange",onClick:()=>{r("requests"),Zi()},children:[e.jsx("div",{className:"fr-icon",children:""}),e.jsx("div",{className:"fr-title",children:"View My Requests"}),e.jsx("div",{className:"fr-sub",children:"Track the status of your layout requests"})]}),e.jsxs("button",{className:"float-rect w-green",onClick:()=>{r("projects"),pi()},children:[e.jsx("div",{className:"fr-icon",children:""}),e.jsx("div",{className:"fr-title",children:"Manage Projects"}),e.jsx("div",{className:"fr-sub",children:"Monitor your ongoing construction projects"})]})]})})]}),e.jsxs("div",{className:"section-card",children:[e.jsxs("div",{className:"section-header",children:[e.jsx("h2",{children:"Project Progress"}),e.jsx("p",{children:"Track the progress of your active projects"})]}),e.jsx("div",{className:"section-content",children:e.jsxs("div",{className:"widgets-grid",children:[e.jsxs("div",{className:"widget-container",children:[e.jsxs("div",{className:"widget-header",children:[e.jsx("h3",{className:"widget-title",children:"Progress Overview"}),e.jsx("div",{className:"widget-actions",children:e.jsx("button",{className:"icon-btn",title:"Refresh",onClick:pi,children:""})})]}),e.jsx(NF,{projects:V})]}),e.jsxs("div",{className:"widget-container",children:[e.jsxs("div",{className:"widget-header",children:[e.jsx("h3",{className:"widget-title",children:"Budget Tracker"}),e.jsx("div",{className:"widget-actions",children:e.jsx("button",{className:"icon-btn",title:"View Details",children:""})})]}),e.jsx(CF,{projects:V})]})]})})]}),e.jsxs("div",{className:"section-header",children:[e.jsx("h2",{children:"Recent Activity"}),e.jsx("p",{children:"Latest updates on your requests and projects"})]}),e.jsx("div",{className:"section-content",children:e.jsxs("div",{className:"item-list",children:[j.slice(0,5).map(R=>{const Fe=Number(R?.accepted_count)>0||R?.status==="approved"||R?.status==="accepted"?"accepted":R?.status,Ge=Fe==="accepted"?"":Fe==="rejected"?"":"";return e.jsxs("div",{className:"list-item",children:[e.jsx("div",{className:"item-icon",children:Ge}),e.jsxs("div",{className:"item-content",children:[e.jsxs("h4",{className:"item-title",children:["Layout Request - ",R.plot_size]}),e.jsxs("p",{className:"item-subtitle",children:["Budget: ",R.budget_range]}),e.jsxs("p",{className:"item-meta",children:["Submitted: ",new Date(R.created_at).toLocaleDateString()]})]}),e.jsx("div",{className:"item-actions",children:e.jsx("span",{className:`status-badge ${vp(Fe)}`,children:du(Fe)})})]},R.id)}),j.length===0&&e.jsxs("div",{className:"empty-state",children:[e.jsx("div",{className:"empty-icon",children:""}),e.jsx("h3",{children:"No Requests Yet"}),e.jsx("p",{children:"Start by submitting your first layout request!"}),e.jsxs("div",{className:"empty-actions",children:[e.jsx("button",{className:"btn btn-primary",onClick:()=>he(!0),children:"Request Custom Design"}),e.jsx("button",{className:"btn btn-secondary",onClick:()=>{T(!0),$()},children:"Browse Library"})]})]})]})})]}),Ui=()=>e.jsxs("div",{children:[e.jsx("div",{className:"main-header",children:e.jsxs("div",{className:"header-content",children:[e.jsxs("div",{children:[e.jsx("h1",{children:"My Layout Requests"}),e.jsx("p",{children:"Track your architectural design requests and their progress"})]}),e.jsx("div",{className:"header-actions",children:e.jsx("button",{className:"btn btn-secondary",onClick:()=>{T(!0),$()},children:" Browse Library"})})]})}),e.jsxs("div",{className:"tab-navigation",style:{marginBottom:"20px",borderBottom:"1px solid #e5e7eb"},children:[e.jsx("button",{className:`tab-button ${o==="all"?"active":""}`,onClick:()=>l("all"),style:{padding:"12px 24px",border:"none",background:"transparent",borderBottom:o==="all"?"2px solid #3b82f6":"2px solid transparent",color:o==="all"?"#3b82f6":"#6b7280",cursor:"pointer",fontWeight:o==="all"?"600":"400"},children:"All Requests"}),e.jsx("button",{className:`tab-button ${o==="contractors"?"active":""}`,onClick:()=>{l("contractors"),wl()},style:{padding:"12px 24px",border:"none",background:"transparent",borderBottom:o==="contractors"?"2px solid #3b82f6":"2px solid transparent",color:o==="contractors"?"#3b82f6":"#6b7280",cursor:"pointer",fontWeight:o==="contractors"?"600":"400"},children:"Sent to Contractors"})]}),e.jsxs("div",{className:"section-card",children:[e.jsxs("div",{className:"section-header",children:[e.jsx("h2",{children:o==="all"?"Request History":"Contractor Requests"}),e.jsx("p",{children:o==="all"?"All your submitted layout requests":"Requests sent to contractors for proposals"})]}),e.jsx("div",{className:"section-content",children:re?e.jsx("div",{className:"loading",children:"Loading requests..."}):(o==="all"?j:E).length===0?e.jsxs("div",{className:"empty-state",children:[e.jsx("div",{className:"empty-icon",children:o==="all"?"":""}),e.jsx("h3",{children:o==="all"?"No Requests Yet":"No Contractor Requests"}),e.jsx("p",{children:o==="all"?"Submit your first layout request to get started!":"Send requests to contractors to get started!"}),e.jsxs("div",{className:"empty-actions",children:[e.jsx("button",{className:"btn btn-primary",onClick:()=>t("/homeowner/request"),children:"Request Custom Design"}),e.jsx("button",{className:"btn btn-secondary",onClick:()=>{T(!0),$()},children:"Browse Library"})]})]}):e.jsx("div",{className:"item-list",children:(o==="all"?j:E).map(R=>e.jsx(zF,{request:R,onAssignArchitect:()=>Ta(R),onRemove:()=>_(R.id),showContractorInfo:o==="contractors"},R.id))})})]})]}),Ei=()=>e.jsxs("div",{children:[e.jsx("div",{className:"main-header",children:e.jsxs("div",{className:"header-content",children:[e.jsxs("div",{children:[e.jsx("h1",{children:"Received Designs"}),e.jsx("p",{children:"Review designs, shortlist your favorites, and finalize one"})]}),e.jsx("button",{className:"btn btn-secondary",onClick:ke,children:" Refresh"})]})}),e.jsxs("div",{className:"section-card",children:[e.jsxs("div",{className:"section-header",children:[e.jsx("h2",{children:"All Designs & House Plans"}),e.jsx("p",{children:"Designs sent by architects and house plans with technical specifications"})]}),e.jsx("div",{className:"section-content",children:A.length===0?e.jsxs("div",{className:"empty-state",children:[e.jsx("div",{className:"empty-icon",children:""}),e.jsx("h3",{children:"No Designs Yet"}),e.jsx("p",{children:"Assigned architects will send designs here for your review."})]}):e.jsx("div",{className:"item-list",children:A.map(R=>e.jsxs("div",{className:"list-item",children:[e.jsx("div",{className:"item-icon",children:R.source_type==="house_plan"?"":R.status==="finalized"?"":R.status==="shortlisted"?"":""}),e.jsxs("div",{className:"item-content",style:{flex:1},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:10},children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"item-title",style:{margin:0},children:[R.design_title,R.source_type==="house_plan"&&e.jsx("span",{style:{marginLeft:"8px",padding:"2px 6px",background:"#e3f2fd",color:"#1976d2",borderRadius:"4px",fontSize:"12px",fontWeight:"normal"},children:"House Plan"})]}),e.jsxs("p",{className:"item-subtitle",style:{margin:"2px 0 0 0"},children:["By ",R.architect?.name||"Architect","  ",new Date(R.created_at).toLocaleString(),R.source_type==="house_plan"&&R.plot_dimensions&&e.jsxs("span",{style:{marginLeft:"8px",color:"#666"},children:[" Plot: ",R.plot_dimensions,"  Area: ",R.total_area," sq ft"]})]}),e.jsx("button",{className:"btn btn-secondary",style:{marginTop:6},onClick:()=>mt(Fe=>({...Fe,[R.id]:!Fe[R.id]})),children:ut[R.id]?"Hide Details":"View Details"}),ut[R.id]&&e.jsxs("div",{className:"details-panel",children:[e.jsxs("div",{className:"details-grid",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Sent By:"})," ",R.architect?.name||"Architect"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Architect Email:"})," ",R.architect?.email||"-"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Design ID:"})," ",R.id]}),R.layout_request_id?e.jsxs("div",{children:[e.jsx("strong",{children:"Request ID:"})," ",R.layout_request_id]}):e.jsxs("div",{children:[e.jsx("strong",{children:"Request:"})," Direct upload"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Status:"})," ",e.jsx("span",{className:`status-chip ${R.status}`,children:R.status})]}),R.source_type==="house_plan"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("strong",{children:"House Plan Status:"})," ",e.jsx("span",{className:`status-chip ${R.house_plan_status}`,children:R.house_plan_status})]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Plot Dimensions:"})," ",R.plot_dimensions]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Total Area:"})," ",R.total_area," sq ft"]})]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Uploaded:"})," ",new Date(R.created_at).toLocaleString()]})]}),R.description&&e.jsxs("div",{className:"description-section",children:[e.jsx("strong",{children:"Description:"}),e.jsx("div",{className:"description-content",children:R.source_type==="house_plan"?e.jsx("p",{children:R.description}):e.jsx(ex,{raw:R.description,title:"Requirements"})})]}),R.technical_details&&e.jsxs("div",{className:"technical-details-section",style:{marginTop:16},children:[e.jsxs("h3",{style:{margin:"0 0 12px 0",fontSize:"16px",fontWeight:600,color:"#374151"},children:[R.source_type==="house_plan"?"House Plan Technical Specifications":"Technical Details",R.source_type==="house_plan"&&!R.is_technical_details_unlocked&&e.jsxs("span",{style:{marginLeft:"8px",padding:"2px 6px",background:"#fef3c7",color:"#92400e",borderRadius:"4px",fontSize:"12px",fontWeight:"normal"},children:[" Locked - Pay ",parseFloat(R.unlock_price||8e3).toLocaleString("en-IN")," to unlock"]}),R.source_type==="house_plan"&&R.is_technical_details_unlocked&&e.jsx("span",{style:{marginLeft:"8px",padding:"2px 6px",background:"#d1fae5",color:"#065f46",borderRadius:"4px",fontSize:"12px",fontWeight:"normal"},children:" Unlocked"})]}),R.source_type==="house_plan"&&!R.is_technical_details_unlocked?e.jsxs("div",{style:{padding:"16px",background:"#fffbeb",border:"1px solid #fbbf24",borderRadius:"8px",textAlign:"center"},children:[e.jsxs("div",{style:{fontSize:"14px",color:"#92400e",marginBottom:"8px"},children:["Technical details are locked. Pay ",parseFloat(R.unlock_price||8e3).toLocaleString("en-IN")," to unlock complete specifications."]}),e.jsx("button",{className:"btn btn-primary",onClick:()=>da(R),disabled:at&&et===R.id,style:{fontSize:"14px",padding:"8px 16px"},children:at&&et===R.id?"Processing...":`Pay ${parseFloat(R.unlock_price||8e3).toLocaleString("en-IN")} to Unlock`})]}):e.jsx(Ho,{technicalDetails:R.technical_details,startExpanded:!0})]}),R.source_type==="house_plan"&&R.plan_data&&e.jsxs("div",{className:"plan-data-section",style:{marginTop:16},children:[e.jsx("h3",{style:{margin:"0 0 12px 0",fontSize:"16px",fontWeight:600,color:"#374151"},children:"Plan Information"}),e.jsxs("div",{className:"plan-info-grid",style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"12px"},children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Plot Size:"})," ",R.plot_dimensions]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Total Area:"})," ",R.total_area," sq ft"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Floors:"})," ",R.plan_data.floors?.total_floors||1]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Rooms:"})," ",R.plan_data.rooms?.length||0]}),R.plan_data.scale_ratio&&e.jsxs("div",{children:[e.jsx("strong",{children:"Scale Ratio:"})," ",R.plan_data.scale_ratio]})]})]})]})]}),e.jsx("button",{className:"btn btn-danger",onClick:()=>jt(R.id),children:" Delete"})]}),e.jsxs("p",{className:"item-meta",style:{marginTop:6},children:["Status: ",e.jsx("span",{className:`status-badge ${R.status}`,children:R.status})]}),R.source_type==="house_plan"&&!R.is_technical_details_unlocked||R.source_type!=="house_plan"&&!Sa(R)?e.jsxs("div",{style:{margin:"12px 0",padding:"12px",border:"1px solid #f59e0b",background:"#fffbeb",borderRadius:8},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:12},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:600,color:"#92400e"},children:R.source_type==="house_plan"?"Payment required to unlock technical details":"Payment required to view files"}),e.jsx("div",{style:{color:"#92400e",fontSize:14},children:R.source_type==="house_plan"?`Unlock Price: ${parseFloat(R.unlock_price||8e3).toLocaleString("en-IN")}`:R?.view_price&&R.view_price>0?`Architect-set price: ${parseFloat(R.view_price).toLocaleString("en-IN")}`:`Price based on sqft: ${la(R).toLocaleString("en-IN")}`})]}),e.jsx("button",{className:"btn btn-primary",onClick:()=>R.source_type==="house_plan"?da(R):Zs(R),disabled:at&&et===R.id,children:at&&et===R.id?"Processing":R.source_type==="house_plan"?`Pay ${parseFloat(R.unlock_price||8e3).toLocaleString("en-IN")} to Unlock`:"Pay to View"})]}),pt&&e.jsx("div",{style:{marginTop:8,color:"#991b1b",background:"#fef2f2",border:"1px solid #fecaca",borderRadius:6,padding:"8px 10px"},children:pt})]}):null,(R.source_type==="house_plan"&&R.is_technical_details_unlocked||R.source_type!=="house_plan"&&Sa(R))&&e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(180px, 1fr))",gap:"10px",marginTop:"10px"},children:(()=>{const Fe=Array.isArray(R.files)?R.files:[];if(R.source_type==="house_plan"){const Ge=Fe.filter(It=>It.type==="layout_image"),it=Fe.filter(It=>It.type==="elevation_images"),Ct=Fe.filter(It=>It.type==="section_drawings"),Kt=Fe.filter(It=>It.type==="renders_3d");return[...Ge,...it,...Ct,...Kt].map((It,Rs)=>{const na=It.path||`/buildhub/backend/uploads/house_plans/${It.stored||It.original}`,ra=(It.ext||"").toLowerCase(),Ds=["jpg","jpeg","png","gif","webp","svg","heic"].includes(ra);let Ra="";switch(It.type){case"layout_image":Ra="Layout";break;case"elevation_images":Ra="Elevation";break;case"section_drawings":Ra="Section";break;case"renders_3d":Ra="3D Render";break;default:Ra="File"}return e.jsxs("div",{className:"file-card",style:{cursor:"default"},children:[Ds?e.jsx("img",{src:na,alt:It.original,style:{width:"100%",height:120,objectFit:"cover",borderRadius:6},onClick:()=>ka({open:!0,src:na,title:It.original||It.stored})}):e.jsx("div",{className:"file-thumb",style:{height:120,display:"flex",alignItems:"center",justifyContent:"center",background:"#f5f5f7",borderRadius:6},children:e.jsx("span",{style:{fontSize:"2rem"},children:""})}),e.jsxs("div",{className:"file-name",style:{fontSize:"0.85rem",marginTop:6,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},title:It.original||It.stored,children:[Ra,": ",It.original||It.stored]}),e.jsxs("div",{style:{display:"flex",gap:8,marginTop:6},children:[Ds?e.jsx("button",{type:"button",className:"btn btn-secondary",style:{padding:"6px 10px"},onClick:()=>ka({open:!0,src:na,title:It.original||It.stored}),children:"View"}):e.jsx("a",{href:na,target:"_blank",rel:"noreferrer",className:"btn btn-secondary",style:{padding:"6px 10px"},children:"Open"}),e.jsx("a",{href:na,download:!0,className:"btn",style:{padding:"6px 10px"},children:"Download"})]})]},Rs)})}else{const Ge=Fe.find(Tt=>Tt.tag==="preview")||Fe.find(Tt=>/preview|thumb|cover/i.test(Tt.original||"")),it=Fe.find(Tt=>Tt.tag==="layout")||Fe.find(Tt=>/layout|plan|floor|design/i.test(Tt.original||"")),Ct=Fe.filter(Tt=>Tt!==Ge&&Tt!==it);return[Ge,it,...Ct].filter(Boolean).map((Tt,It)=>{const Rs=Tt.path||`/buildhub/backend/uploads/designs/${Tt.stored||Tt.original}`,na=(Tt.ext||"").toLowerCase(),ra=["jpg","jpeg","png","gif","webp","svg","heic"].includes(na),Ds=Tt.tag==="preview"?"Preview":Tt.tag==="layout"?"Layout":void 0;return e.jsxs("div",{className:"file-card",style:{cursor:"default"},children:[ra?e.jsx("img",{src:Rs,alt:Tt.original,style:{width:"100%",height:120,objectFit:"cover",borderRadius:6},onClick:()=>ka({open:!0,src:Rs,title:Tt.original||Tt.stored})}):e.jsx("div",{className:"file-thumb",style:{height:120,display:"flex",alignItems:"center",justifyContent:"center",background:"#f5f5f7",borderRadius:6},children:e.jsx("span",{style:{fontSize:"2rem"},children:""})}),e.jsxs("div",{className:"file-name",style:{fontSize:"0.85rem",marginTop:6,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},title:Tt.original||Tt.stored,children:[Ds?`${Ds}: `:"",Tt.original||Tt.stored]}),e.jsxs("div",{style:{display:"flex",gap:8,marginTop:6},children:[ra?e.jsx("button",{type:"button",className:"btn btn-secondary",style:{padding:"6px 10px"},onClick:()=>ka({open:!0,src:Rs,title:Tt.original||Tt.stored}),children:"View"}):e.jsx("a",{href:Rs,target:"_blank",rel:"noreferrer",className:"btn btn-secondary",style:{padding:"6px 10px"},children:"Open"}),e.jsx("a",{href:Rs,download:!0,className:"btn",style:{padding:"6px 10px"},children:"Download"})]})]},It)})}})()}),e.jsxs("div",{className:"comment-section",children:[e.jsx("button",{className:"btn btn-secondary",onClick:()=>ds(R.id),children:"Load comments"}),e.jsxs("div",{className:"comment-list",children:[(h[R.id]||[]).map(Fe=>e.jsxs("div",{className:"comment-item",children:[e.jsx("div",{className:"comment-author",children:Fe.author}),e.jsx("div",{className:"comment-message",children:Fe.message}),e.jsx("div",{className:"comment-date",children:new Date(Fe.created_at).toLocaleString()})]},Fe.id)),e.jsxs("div",{className:"comment-compose",children:[e.jsx("div",{className:"star-input",children:[1,2,3,4,5].map(Fe=>e.jsx("span",{role:"button",onClick:()=>x(Ge=>({...Ge,[R.id]:Fe})),style:{color:(b[R.id]||0)>=Fe?"#f5a623":"#ddd"},title:`${Fe} star${Fe>1?"s":""}`,children:""},Fe))}),e.jsx("input",{type:"text",value:m[R.id]||"",onChange:Fe=>v(Ge=>({...Ge,[R.id]:Fe.target.value})),placeholder:"Write a comment... (will also be posted as a review)"}),e.jsx("button",{onClick:()=>_s(R.id),children:"Post"})]})]})]})]}),e.jsxs("div",{className:"item-actions",style:{display:"flex",flexDirection:"column",gap:6},children:[R.source_type!=="house_plan"&&e.jsx("button",{className:"btn",onClick:()=>va(R),children:"Send to Contractor"}),R.source_type==="house_plan"?e.jsx("div",{style:{padding:"8px",background:"#f0f9ff",border:"1px solid #0ea5e9",borderRadius:"4px",fontSize:"12px",color:"#0369a1"},children:"House Plan - Review in House Plans tab for approval/rejection"}):e.jsxs(e.Fragment,{children:[R.status!=="shortlisted"&&R.status!=="finalized"&&e.jsx("button",{className:"btn",onClick:()=>Xt(R.id,"shortlist"),children:" Shortlist"}),R.status==="shortlisted"&&e.jsx("button",{className:"btn",onClick:()=>Xt(R.id,"remove-shortlist"),children:"Remove shortlist"}),R.status!=="finalized"&&e.jsx("button",{className:"btn btn-primary",onClick:()=>Xt(R.id,"finalize"),children:" Finalize"})]})]})]},R.id))})})]})]}),_n=()=>e.jsxs("div",{children:[e.jsx("div",{className:"main-header",children:e.jsx("div",{className:"header-content",children:e.jsxs("div",{children:[e.jsx("h1",{children:"Layout Library"}),e.jsx("p",{children:"Browse and select from our collection of pre-designed layouts"})]})})}),e.jsxs("div",{className:"section-card",children:[e.jsxs("div",{className:"section-header",children:[e.jsx("h2",{children:"Available Layouts"}),e.jsx("p",{children:"Choose from professionally designed layouts and customize them for your needs"})]}),e.jsx("div",{className:"section-content",children:re?e.jsx("div",{className:"loading",children:"Loading layouts..."}):I.length===0?e.jsxs("div",{className:"empty-state",children:[e.jsx("div",{className:"empty-icon",children:""}),e.jsx("h3",{children:"No Layouts Available"}),e.jsx("p",{children:"Check back later for new layout designs!"})]}):e.jsx("div",{className:"layout-grid",children:I.map(R=>e.jsx(Fb,{layout:R,onSelect:()=>fi(R),onPreview:()=>me(R),isImageUrl:Ie,isPdfUrl:ct,onSendToContractor:Va,onViewDetails:dr},R.id))})})]})]});return e.jsxs("div",{className:"dashboard-container",children:[e.jsx("button",{className:"mobile-menu-btn",onClick:()=>Qe(!Be),children:""}),e.jsxs("div",{className:`dashboard-sidebar soft-sidebar expanded ${Be?"open":""}`,children:[e.jsx("div",{className:"sidebar-header sb-brand",children:e.jsxs("a",{href:"#",className:"sidebar-logo",children:[e.jsx("div",{className:"logo-icon",children:""}),e.jsx("span",{className:"logo-text sb-title",children:"BUILDHUB"})]})}),e.jsxs("nav",{className:"sidebar-nav sb-nav",children:[e.jsx("a",{href:"#",className:`nav-item sb-item ${a==="dashboard"?"active":""}`,"data-title":"Dashboard",onClick:R=>{R.preventDefault(),r("dashboard"),pi(),ke()},children:e.jsx("span",{className:"nav-label sb-label",children:"Dashboard"})}),e.jsxs("a",{href:"#",className:`nav-item sb-item ${a==="library"?"active":""}`,"data-title":"Layout Library",onClick:R=>{R.preventDefault(),r("library"),$()},children:[e.jsx("span",{className:"nav-label sb-label",children:"Layout Library"}),Hs>0&&e.jsx("span",{className:"nav-badge pulse",style:{marginLeft:"auto"},children:Hs})]}),e.jsxs("a",{href:"#",className:`nav-item sb-item ${a==="requests"?"active":""}`,"data-title":"My Requests",onClick:R=>{R.preventDefault(),r("requests"),Zi()},children:[e.jsx("span",{className:"nav-label sb-label",children:"My Requests"}),ss>0&&e.jsx("span",{className:"nav-badge pulse",style:{marginLeft:"auto"},children:ss})]}),e.jsxs("a",{href:"#",className:`nav-item sb-item ${a==="designs"?"active":""}`,"data-title":"Received Designs",onClick:R=>{R.preventDefault(),r("designs"),ke()},children:[e.jsx("span",{className:"nav-label sb-label",children:"Received Designs"}),xs>0&&e.jsx("span",{className:"nav-badge pulse",style:{marginLeft:"auto"},children:xs})]}),e.jsx("a",{href:"#",className:`nav-item sb-item ${a==="house-plans"?"active":""}`,"data-title":"House Plans",onClick:R=>{R.preventDefault(),r("house-plans")},children:e.jsx("span",{className:"nav-label sb-label",children:"House Plans"})}),e.jsxs("a",{href:"#",className:`nav-item sb-item ${a==="estimates"?"active":""}`,"data-title":"Estimations",onClick:R=>{R.preventDefault(),r("estimates")},children:[e.jsx("span",{className:"nav-label sb-label",children:"Estimations"}),dt.length>0&&e.jsx("span",{className:"nav-badge pulse",style:{marginLeft:"auto"},children:dt.length})]}),e.jsx("a",{href:"#",className:`nav-item sb-item ${a==="progress"?"active":""}`,"data-title":"Construction Progress",onClick:R=>{R.preventDefault(),r("progress")},children:e.jsx("span",{className:"nav-label sb-label",children:"Construction Progress"})}),e.jsx("a",{href:"#",className:`nav-item sb-item ${a==="photos"?"active":""}`,"data-title":"Construction Photos",onClick:R=>{R.preventDefault(),r("photos")},children:e.jsx("span",{className:"nav-label sb-label",children:"Construction Photos"})})]})]}),e.jsxs("div",{className:"dashboard-main soft-main shifted",children:[e.jsxs("div",{className:"top-glassbar",children:[e.jsx("div",{className:"left",children:e.jsxs("div",{className:"search",children:[e.jsx("span",{className:"icon",children:""}),e.jsx("input",{type:"text",placeholder:"Search tasks, requests, designs...","aria-label":"Search"})]})}),e.jsxs("div",{className:"right",children:[e.jsx(IF,{userId:C?.id||null}),e.jsx("button",{className:"icon-btn",title:"Help",onClick:()=>{Qr(!0),Ji()},children:""}),e.jsx(HF,{user:C,position:"bottom-right",onLogout:Bo})]})]}),e.jsxs("div",{style:{position:"fixed",top:20,right:20,zIndex:1e3,display:"flex",flexDirection:"column",gap:10},children:[Z&&e.jsxs("div",{className:"alert alert-error",style:{minWidth:280},children:[Z,e.jsx("button",{onClick:()=>fe(""),className:"alert-close",children:""})]}),Ae&&e.jsxs("div",{className:"alert alert-success",style:{minWidth:280},children:[Ae,e.jsx("button",{onClick:()=>Ce(""),className:"alert-close",children:""})]})]}),a==="dashboard"&&Fi(),a==="library"&&_n(),a==="requests"&&Ui(),a==="designs"&&Ei(),a==="house-plans"&&e.jsx(uB,{}),a==="estimates"&&e.jsxs("div",{className:"section-card",style:{marginTop:"1rem"},children:[e.jsxs("div",{className:"section-header",children:[e.jsx("h2",{children:"Contractor Estimates"}),e.jsx("p",{children:"Submitted cost estimates for your layouts/designs"})]}),e.jsxs("div",{className:"section-content",children:[(console.log("Rendering estimates tab. Count:",dt.length),console.log("Estimates data:",dt),null),dt.length===0?e.jsxs("div",{className:"empty-state",children:[e.jsx("div",{className:"empty-icon",children:""}),e.jsx("h3",{children:"No Estimates Yet"}),e.jsx("p",{children:"When contractors submit estimates, they will appear here."})]}):e.jsx("div",{className:"item-list",children:dt.map(R=>e.jsxs("div",{className:"list-item",children:[e.jsx("div",{className:"item-icon",children:""}),e.jsxs("div",{className:"item-content",style:{flex:1},children:[e.jsxs("h4",{className:"item-title",style:{margin:0},children:["Estimate #",R.id]}),e.jsxs("p",{className:"item-subtitle",style:{margin:"2px 0 0 0"},children:["Total: ",R.total_cost??"","  ",new Date(R.created_at).toLocaleString()]}),R.timeline&&e.jsxs("p",{className:"item-meta",children:["Timeline: ",R.timeline]}),R.notes&&e.jsxs("p",{className:"item-meta",children:["Notes: ",R.notes]}),e.jsxs("p",{className:"item-meta",children:["Contractor: ",R.contractor_name||"Unknown",R.contractor_email?`  ${R.contractor_email}`:""]}),e.jsxs("p",{className:"item-meta",style:{fontSize:"12px",color:"#666"},children:["Status: ",R.status||"unknown"]}),R.acknowledged_at&&e.jsxs("div",{style:{marginTop:"12px",padding:"12px",background:"linear-gradient(135deg, #eff6ff 0%, #dbeafe 100%)",borderRadius:"8px",border:"1px solid #3b82f6"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:"6px"},children:[e.jsx("span",{style:{fontSize:"16px",marginRight:"8px"},children:""}),e.jsx("strong",{style:{color:"#1e40af",fontSize:"13px"},children:"Acknowledged by Contractor"})]}),e.jsxs("div",{style:{color:"#1e3a8a",fontSize:"12px",paddingLeft:"24px"},children:["Acknowledged: ",new Date(R.acknowledged_at).toLocaleString(),R.due_date&&e.jsxs("span",{children:["  Due: ",new Date(R.due_date).toLocaleDateString()]})]})]}),Number(R.is_paid||0)===0&&e.jsx("span",{className:"status-badge pending",children:"Locked  Pay 100 to view"})]}),e.jsxs("div",{className:"item-actions",style:{display:"flex",gap:6,alignItems:"center",flexWrap:"wrap"},children:[e.jsx("button",{className:"btn btn-primary",onClick:()=>Ee(R),children:Number(R.is_paid||0)===0?"Pay 100 to Unlock":"Download Report"}),Number(R.is_paid||0)===1&&e.jsx(e.Fragment,{children:e.jsx("button",{className:"btn btn-secondary",onClick:()=>Re(R),style:{background:"#10b981",color:"white",border:"1px solid #10b981"},children:" Download Tech Details"})}),Number(R.is_paid||0)===1&&e.jsxs(e.Fragment,{children:[R.status==="submitted"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"btn btn-secondary",onClick:()=>We(R,"accept"),children:"Accept"}),e.jsx("button",{className:"btn btn-secondary",onClick:()=>We(R,"reject"),children:"Reject"})]}),R.status==="accepted"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"btn btn-secondary",onClick:()=>bt(Fe=>({...Fe,[R.id]:!Fe[R.id]})),children:wt[R.id]?"Close Changes":"Request Changes"}),e.jsx("button",{className:$e[R.id]?"btn btn-success":"btn btn-primary",onClick:()=>{console.log("Send message button clicked for estimate:",R.id),Ot(R)},style:$e[R.id]?{backgroundColor:"#10b981",borderColor:"#10b981",color:"white"}:{},children:$e[R.id]?" Message Sent":" Send Message"}),e.jsx("button",{type:"button",className:"btn btn-success",onClick:Fe=>{Fe.preventDefault(),Fe.stopPropagation(),console.log("Button clicked!",R),Lt(R)},style:{cursor:"pointer"},children:" Start Construction"})]}),(R.status==="construction_started"||R.status==="changes_requested")&&e.jsxs(e.Fragment,{children:[e.jsx("button",{className:$e[R.id]?"btn btn-success":"btn btn-primary",onClick:()=>{console.log("Send message button clicked for estimate:",R.id),Ot(R)},style:$e[R.id]?{backgroundColor:"#10b981",borderColor:"#10b981",color:"white"}:{},children:$e[R.id]?" Message Sent":" Send Message"}),R.status==="changes_requested"&&e.jsx("button",{className:"btn btn-secondary",onClick:()=>bt(Fe=>({...Fe,[R.id]:!Fe[R.id]})),children:wt[R.id]?"Close Changes":"Request Changes"})]}),R.status==="rejected"&&e.jsx("span",{className:"status-badge rejected",children:"Rejected"})]}),e.jsx("button",{className:"btn btn-danger",onClick:()=>Vt(R.id),style:{background:"#ef4444",color:"white",border:"1px solid #ef4444",fontSize:"12px",padding:"6px 12px"},title:"Remove estimate",children:" Remove"})]}),wt[R.id]&&e.jsxs("div",{className:"card",style:{marginTop:8},children:[e.jsx("div",{style:{fontWeight:600,marginBottom:6},children:"Request Changes"}),e.jsx("textarea",{placeholder:"Describe the changes you want the contractor to make",rows:3,value:Ht[R.id]||"",onChange:Fe=>_t(Ge=>({...Ge,[R.id]:Fe.target.value})),style:{width:"100%",border:"1px solid #e5e7eb",borderRadius:6,padding:8}}),e.jsxs("div",{style:{display:"flex",gap:8,marginTop:8},children:[e.jsx("button",{className:"btn btn-primary",onClick:()=>{const Fe=(Ht[R.id]||"").trim();if(!Fe){try{s.warning("Please describe the changes.")}catch{}return}We(R,"changes",Fe),bt(Ge=>({...Ge,[R.id]:!1})),_t(Ge=>({...Ge,[R.id]:""}))},children:"Send"}),e.jsx("button",{className:"btn btn-secondary",onClick:()=>bt(Fe=>({...Fe,[R.id]:!1})),children:"Cancel"})]})]})]},R.id))})]})]}),e.jsx(OF,{activeTab:a,isVisible:a==="progress"}),a==="photos"&&e.jsxs("div",{className:"section-card",style:{marginTop:"1rem"},children:[e.jsxs("div",{className:"section-header",children:[e.jsx("h2",{children:" Construction Progress Photos"}),e.jsx("p",{children:"View geo-located photos sent by your contractor with location details and timestamps"})]}),e.jsx("div",{className:"section-content",children:e.jsx(dB,{homeownerId:C?.id,projectId:null})})]}),a==="scene3d"&&e.jsxs("div",{className:"section-card",children:[e.jsxs("div",{className:"section-header",children:[e.jsx("h2",{children:"Finalized Layout  3D View"}),e.jsx("p",{children:"View your finalized floor plan in 3D. Click rooms to highlight."})]}),e.jsx("div",{className:"section-content",children:e.jsx("div",{className:"home-3d-panel",role:"region","aria-label":"3D home layout",children:e.jsx(Home3DLayout,{rooms:ms,walls:fa,onSelectRoom:R=>Ce(`${R} selected`)})})})]}),Ks&&e.jsx("div",{className:"support-modal-overlay",onClick:()=>Qr(!1),children:e.jsxs("div",{className:"support-modal-content",onClick:R=>R.stopPropagation(),children:[e.jsxs("div",{className:"support-modal-header",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"support-modal-title",children:" Help & Support"}),e.jsx("p",{className:"support-modal-subtitle",children:"Report issues and get help from our admin team"})]}),e.jsxs("div",{className:"support-modal-actions",children:[e.jsx("button",{className:"support-btn support-btn-secondary",onClick:()=>{ae(null),gt(!0),Ji()},children:" My Reports"}),e.jsx("button",{className:"support-btn support-btn-secondary",onClick:()=>Qr(!1),children:" Close"})]})]}),e.jsxs("div",{className:`support-modal-body ${bs?"has-thread":""}`,children:[e.jsxs("div",{className:`support-form-panel ${bs?"has-thread":""}`,children:[e.jsxs("div",{className:`support-form-container ${bs?"compact":""}`,children:[e.jsx("h4",{className:"support-form-title",children:" Report New Issue"}),e.jsxs("form",{className:"support-form",onSubmit:R=>{R.preventDefault(),hi()},children:[e.jsxs("div",{className:"support-form-group",children:[e.jsx("label",{className:"support-form-label",children:"Subject *"}),e.jsx("input",{type:"text",className:"support-form-input",value:Zn.subject,onChange:R=>Xr({...Zn,subject:R.target.value}),placeholder:"Brief description of your issue",required:!0})]}),e.jsxs("div",{className:"support-form-group",children:[e.jsx("label",{className:"support-form-label",children:"Category"}),e.jsxs("select",{className:"support-form-select",value:Zn.category,onChange:R=>Xr({...Zn,category:R.target.value}),children:[e.jsx("option",{value:"general",children:"General Support"}),e.jsx("option",{value:"bug",children:"Bug Report"}),e.jsx("option",{value:"billing",children:"Billing Issue"}),e.jsx("option",{value:"account",children:"Account Problem"}),e.jsx("option",{value:"feature",children:"Feature Request"})]})]}),e.jsxs("div",{className:"support-form-group",children:[e.jsx("label",{className:"support-form-label",children:"Message *"}),e.jsx("textarea",{className:"support-form-textarea",rows:bs?6:8,value:Zn.message,onChange:R=>Xr({...Zn,message:R.target.value}),placeholder:"Describe your issue in detail. Include steps to reproduce if it's a bug.",required:!0})]}),e.jsxs("div",{className:"support-form-actions",children:[e.jsx("button",{type:"submit",className:"support-btn support-btn-primary",disabled:Tr,children:Tr?" Sending...":" Send to Admin"}),e.jsx("button",{type:"button",className:"support-btn support-btn-secondary",onClick:()=>{Ji(),ae(null),gt(!0)},children:" View Reports"})]})]})]}),st&&e.jsxs("div",{className:"support-reports-section",children:[e.jsx("div",{className:`support-reports-header ${bs?"compact":""}`,children:e.jsxs("h4",{className:"support-reports-title",children:[" My Reports (",di.length,")"]})}),e.jsx("div",{className:`support-reports-list ${bs?"compact":""}`,children:di.length===0?e.jsxs("div",{className:"support-empty-state",children:[e.jsx("div",{className:"support-empty-icon",children:""}),e.jsx("h3",{className:"support-empty-title",children:"No Reports Yet"}),e.jsx("p",{className:"support-empty-text",children:"Submit your first issue using the form above and it will appear here."})]}):di.map(R=>e.jsxs("div",{className:`support-report-item ${bs?.id===R.id?"selected":""}`,onClick:()=>ei(R.id),children:[e.jsxs("div",{className:"support-report-header",children:[e.jsx("div",{className:"support-report-icon",children:R.status==="replied"?"":R.status==="closed"?"":""}),e.jsxs("div",{className:"support-report-content",children:[e.jsx("h4",{className:"support-report-title",children:R.subject}),e.jsxs("p",{className:"support-report-meta",children:["#",R.id,"  ",R.category,"  ",new Date(R.created_at).toLocaleDateString()," at ",new Date(R.created_at).toLocaleTimeString()]})]})]}),e.jsx("div",{className:"support-report-status",children:e.jsx("span",{className:`support-status-badge ${R.status}`,children:R.status})})]},R.id))})]})]}),bs&&e.jsxs("div",{className:"support-thread-panel",children:[e.jsxs("div",{className:"support-thread-header",children:[e.jsx("h4",{className:"support-thread-title",children:bs.subject}),e.jsxs("div",{className:"support-thread-meta",children:["Category: ",bs.category,"  Status: ",bs.status,"  Opened: ",new Date(bs.created_at).toLocaleDateString()," at ",new Date(bs.created_at).toLocaleTimeString()]})]}),e.jsxs("div",{className:"support-thread-messages",children:[e.jsxs("div",{className:"support-message user",children:[e.jsx("div",{className:"support-message-header",children:"You"}),e.jsx("div",{className:"support-message-body",children:bs.message}),e.jsxs("div",{className:"support-message-time",children:[new Date(bs.created_at).toLocaleDateString()," at ",new Date(bs.created_at).toLocaleTimeString()]})]}),ge.map(R=>e.jsxs("div",{className:`support-message ${R.sender==="admin"?"admin":"user"}`,children:[e.jsx("div",{className:"support-message-header",children:R.sender==="admin"?"Admin Support":"You"}),e.jsx("div",{className:"support-message-body",children:R.message}),e.jsxs("div",{className:"support-message-time",children:[new Date(R.created_at).toLocaleDateString()," at ",new Date(R.created_at).toLocaleTimeString()]})]},R.id)),ge.length===0&&bs.status==="open"&&e.jsxs("div",{className:"support-empty-state",children:[e.jsx("div",{className:"support-empty-icon",children:""}),e.jsx("h3",{className:"support-empty-title",children:"Waiting for Response"}),e.jsx("p",{className:"support-empty-text",children:"Our admin team will respond to your issue soon. You'll see their reply here."})]})]})]})]})]})}),te&&e.jsx("div",{className:"form-modal",children:e.jsxs("div",{className:"form-content",children:[e.jsxs("div",{className:"form-header",children:[e.jsx("h3",{children:X.layout_type==="library"?"Customize Selected Layout":"Submit Layout Request"}),e.jsx("p",{children:X.layout_type==="library"?"Provide your requirements to customize the selected layout":"Get professional architectural designs for your construction project"})]}),X.layout_type==="library"&&z&&e.jsxs("div",{className:"selected-layout-display",children:[e.jsxs("h4",{children:["Selected Layout: ",z.title]}),e.jsxs("div",{className:"layout-preview",children:[e.jsx("img",{src:z.image_url||"/images/default-layout.jpg",alt:z.title,className:"layout-image"}),e.jsxs("div",{className:"layout-details",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Type:"})," ",z.layout_type]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Bedrooms:"})," ",z.bedrooms]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Bathrooms:"})," ",z.bathrooms]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Area:"})," ",z.area," sq ft"]})]})]}),z.technical_details&&e.jsxs("div",{style:{marginTop:"12px",padding:"12px",background:"#f8f9fa",borderRadius:"6px",border:"1px solid #e9ecef"},children:[e.jsx("h5",{style:{margin:"0 0 8px 0",fontSize:"0.9rem",color:"#495057"},children:"Technical Specifications"}),e.jsx(Ho,{technicalDetails:z.technical_details,compact:!0})]})]}),e.jsxs("form",{onSubmit:Hr,children:[e.jsxs("div",{className:"form-section",children:[e.jsx("h4",{className:"section-title",children:"Basic Information"}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Plot Size (sq ft) *"}),e.jsx("input",{type:"number",value:X.plot_size,onChange:R=>W({...X,plot_size:R.target.value}),placeholder:"e.g., 1200",required:!0,min:"100",className:"form-control"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Building Size (sq ft)"}),e.jsx("input",{type:"number",value:X.building_size,onChange:R=>W({...X,building_size:R.target.value}),placeholder:"e.g., 800",min:"100",className:"form-control"})]})]}),e.jsx("div",{className:"form-row",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Budget Range () *"}),e.jsxs("select",{value:X.budget_range,onChange:R=>W({...X,budget_range:R.target.value}),required:!0,className:"form-control",children:[e.jsx("option",{value:"",children:"Select budget range"}),e.jsx("option",{value:"5-10 Lakhs",children:"5-10 Lakhs"}),e.jsx("option",{value:"10-20 Lakhs",children:"10-20 Lakhs"}),e.jsx("option",{value:"20-30 Lakhs",children:"20-30 Lakhs"}),e.jsx("option",{value:"30-50 Lakhs",children:"30-50 Lakhs"}),e.jsx("option",{value:"50-75 Lakhs",children:"50-75 Lakhs"}),e.jsx("option",{value:"75 Lakhs - 1 Crore",children:"75 Lakhs - 1 Crore"}),e.jsx("option",{value:"1-2 Crores",children:"1-2 Crores"}),e.jsx("option",{value:"2-5 Crores",children:"2-5 Crores"}),e.jsx("option",{value:"5+ Crores",children:"5+ Crores"}),e.jsx("option",{value:"Custom",children:"Custom Amount"})]}),X.budget_range==="Custom"&&e.jsx("input",{type:"number",placeholder:"Enter custom budget amount in rupees",value:X.custom_budget||"",onChange:R=>W({...X,custom_budget:R.target.value}),min:"0",step:"10000",className:"form-control",style:{marginTop:"8px"}})]})})]}),e.jsxs("div",{className:"form-section",children:[e.jsx("h4",{className:"section-title",children:"Site Details"}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Plot Shape"}),e.jsxs("select",{value:X.plot_shape,onChange:R=>W({...X,plot_shape:R.target.value}),className:"form-control",children:[e.jsx("option",{value:"",children:"Select plot shape"}),e.jsx("option",{value:"Rectangular",children:"Rectangular"}),e.jsx("option",{value:"Square",children:"Square"}),e.jsx("option",{value:"L-shaped",children:"L-shaped"}),e.jsx("option",{value:"U-shaped",children:"U-shaped"}),e.jsx("option",{value:"Triangular",children:"Triangular"}),e.jsx("option",{value:"Irregular",children:"Irregular"}),e.jsx("option",{value:"Corner Plot",children:"Corner Plot"}),e.jsx("option",{value:"Trapezoidal",children:"Trapezoidal"}),e.jsx("option",{value:"Other",children:"Other"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Number of Floors *"}),e.jsxs("select",{value:X.num_floors,onChange:R=>W({...X,num_floors:R.target.value}),required:!0,className:"form-control",children:[e.jsx("option",{value:"",children:"Select number of floors"}),e.jsx("option",{value:"1",children:"1 Floor (Ground Floor Only)"}),e.jsx("option",{value:"2",children:"2 Floors (G+1)"}),e.jsx("option",{value:"3",children:"3 Floors (G+2)"}),e.jsx("option",{value:"4",children:"4 Floors (G+3)"}),e.jsx("option",{value:"5",children:"5 Floors (G+4)"}),e.jsx("option",{value:"6+",children:"6+ Floors"})]})]})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Topography"}),e.jsxs("select",{value:X.topography,onChange:R=>W({...X,topography:R.target.value}),className:"form-control",children:[e.jsx("option",{value:"",children:"Select topography"}),e.jsx("option",{value:"Flat",children:"Flat"}),e.jsx("option",{value:"Slightly Sloped",children:"Slightly Sloped"}),e.jsx("option",{value:"Moderately Sloped",children:"Moderately Sloped"}),e.jsx("option",{value:"Steeply Sloped",children:"Steeply Sloped"}),e.jsx("option",{value:"Rocky",children:"Rocky"}),e.jsx("option",{value:"Sandy",children:"Sandy"}),e.jsx("option",{value:"Clayey",children:"Clayey"}),e.jsx("option",{value:"Mixed Terrain",children:"Mixed Terrain"}),e.jsx("option",{value:"Other",children:"Other"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Local Development Laws / Restrictions"}),e.jsx("input",{type:"text",value:X.development_laws,onChange:R=>W({...X,development_laws:R.target.value}),placeholder:"e.g., Setbacks, FSI/FAR, height limits",className:"form-control"})]})]})]}),e.jsxs("div",{className:"form-section",children:[e.jsx("h4",{className:"section-title",children:"Family & Design Preferences"}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Family Needs"}),e.jsxs("select",{multiple:!0,value:Array.isArray(X.family_needs)?X.family_needs:[],onChange:R=>{const Fe=Array.from(R.target.selectedOptions,Ge=>Ge.value);W({...X,family_needs:Fe})},className:"form-control multi-select",style:{height:"120px"},children:[e.jsx("option",{value:"Elder-friendly",children:"Elder-friendly"}),e.jsx("option",{value:"Work-from-home",children:"Work-from-home"}),e.jsx("option",{value:"Kids play area",children:"Kids play area"}),e.jsx("option",{value:"Pet-friendly",children:"Pet-friendly"}),e.jsx("option",{value:"Wheelchair accessible",children:"Wheelchair accessible"}),e.jsx("option",{value:"Home office",children:"Home office"}),e.jsx("option",{value:"Guest accommodation",children:"Guest accommodation"}),e.jsx("option",{value:"Storage space",children:"Storage space"}),e.jsx("option",{value:"Garden/Outdoor space",children:"Garden/Outdoor space"}),e.jsx("option",{value:"Security features",children:"Security features"}),e.jsx("option",{value:"Energy efficient",children:"Energy efficient"}),e.jsx("option",{value:"Low maintenance",children:"Low maintenance"})]}),e.jsx("small",{className:"form-text text-muted",children:"Hold Ctrl/Cmd to select multiple options"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Rooms"}),e.jsxs("select",{multiple:!0,value:Array.isArray(X.rooms)?X.rooms:[],onChange:R=>{const Fe=Array.from(R.target.selectedOptions,Ge=>Ge.value);W({...X,rooms:Fe})},className:"form-control multi-select",style:{height:"120px"},children:[e.jsx("option",{value:"1 Bedroom",children:"1 Bedroom"}),e.jsx("option",{value:"2 Bedrooms",children:"2 Bedrooms"}),e.jsx("option",{value:"3 Bedrooms",children:"3 Bedrooms"}),e.jsx("option",{value:"4 Bedrooms",children:"4 Bedrooms"}),e.jsx("option",{value:"5+ Bedrooms",children:"5+ Bedrooms"}),e.jsx("option",{value:"1 Bathroom",children:"1 Bathroom"}),e.jsx("option",{value:"2 Bathrooms",children:"2 Bathrooms"}),e.jsx("option",{value:"3 Bathrooms",children:"3 Bathrooms"}),e.jsx("option",{value:"4+ Bathrooms",children:"4+ Bathrooms"}),e.jsx("option",{value:"Living Room",children:"Living Room"}),e.jsx("option",{value:"Dining Room",children:"Dining Room"}),e.jsx("option",{value:"Kitchen",children:"Kitchen"}),e.jsx("option",{value:"Study Room",children:"Study Room"}),e.jsx("option",{value:"Puja Room",children:"Puja Room"}),e.jsx("option",{value:"Guest Room",children:"Guest Room"}),e.jsx("option",{value:"Store Room",children:"Store Room"}),e.jsx("option",{value:"Balcony",children:"Balcony"}),e.jsx("option",{value:"Terrace",children:"Terrace"}),e.jsx("option",{value:"Garage",children:"Garage"}),e.jsx("option",{value:"Utility Area",children:"Utility Area"})]}),e.jsx("small",{className:"form-text text-muted",children:"Hold Ctrl/Cmd to select multiple options"})]})]}),e.jsx("div",{className:"form-row",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"House Aesthetic / Style"}),e.jsxs("select",{value:X.aesthetic,onChange:R=>W({...X,aesthetic:R.target.value}),className:"form-control",children:[e.jsx("option",{value:"",children:"Select house style"}),e.jsx("option",{value:"Modern",children:"Modern"}),e.jsx("option",{value:"Contemporary",children:"Contemporary"}),e.jsx("option",{value:"Traditional",children:"Traditional"}),e.jsx("option",{value:"Minimalist",children:"Minimalist"}),e.jsx("option",{value:"Luxury",children:"Luxury"}),e.jsx("option",{value:"Mediterranean",children:"Mediterranean"}),e.jsx("option",{value:"Colonial",children:"Colonial"}),e.jsx("option",{value:"Victorian",children:"Victorian"}),e.jsx("option",{value:"Art Deco",children:"Art Deco"}),e.jsx("option",{value:"Scandinavian",children:"Scandinavian"}),e.jsx("option",{value:"Industrial",children:"Industrial"}),e.jsx("option",{value:"Rustic",children:"Rustic"}),e.jsx("option",{value:"Farmhouse",children:"Farmhouse"}),e.jsx("option",{value:"Craftsman",children:"Craftsman"}),e.jsx("option",{value:"Tudor",children:"Tudor"}),e.jsx("option",{value:"Ranch",children:"Ranch"}),e.jsx("option",{value:"Cape Cod",children:"Cape Cod"}),e.jsx("option",{value:"Other",children:"Other"})]})]})}),e.jsx("div",{className:"form-row",children:e.jsxs("div",{className:"form-group",style:{width:"100%"},children:[e.jsx("label",{children:" Style Preferences (AI Matching)"}),e.jsx("p",{style:{fontSize:"0.9rem",color:"#666",margin:"4px 0 12px 0"},children:"Select your preferred styles to get AI-recommended architects"}),e.jsx("div",{className:"style-preferences-grid",children:[{key:"modern",label:"Modern",icon:""},{key:"contemporary",label:"Contemporary",icon:""},{key:"minimalist",label:"Minimalist",icon:""},{key:"traditional",label:"Traditional",icon:""},{key:"luxury",label:"Luxury",icon:""},{key:"sustainable",label:"Sustainable",icon:""},{key:"eco_friendly",label:"Eco-friendly",icon:""},{key:"natural",label:"Natural",icon:""},{key:"aesthetic",label:"Aesthetic",icon:""},{key:"functional",label:"Functional",icon:""},{key:"elegant",label:"Elegant",icon:""},{key:"innovative",label:"Innovative",icon:""}].map(R=>e.jsxs("button",{type:"button",className:`style-preference-option ${X.style_preferences[R.key]?"selected":""}`,onClick:()=>{const Fe={...X.style_preferences};Fe[R.key]?delete Fe[R.key]:Fe[R.key]=1,W({...X,style_preferences:Fe})},children:[e.jsx("span",{className:"style-icon",children:R.icon}),e.jsx("span",{className:"style-label",children:R.label})]},R.key))})]})})]}),e.jsxs("div",{className:"form-section location-timeline-section",children:[e.jsx("h4",{className:"section-title",children:"Location & Timeline"}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Location"}),e.jsxs("div",{className:"location-input-wrapper",children:[e.jsx(Jw,{options:BF,value:X.location,onChange:R=>W({...X,location:R}),placeholder:"Search for a city...",detectLocation:!0}),e.jsxs("div",{className:"location-detect-info",children:[e.jsx("i",{className:"fas fa-info-circle"}),e.jsx("span",{children:"Click the location icon to detect your current city"})]})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Timeline"}),e.jsxs("select",{value:X.timeline,onChange:R=>W({...X,timeline:R.target.value}),className:"form-control timeline-select",children:[e.jsx("option",{value:"",children:"Select timeline"}),e.jsx("option",{value:"0-6 months",children:"0-6 months"}),e.jsx("option",{value:"6-12 months",children:"6-12 months"}),e.jsx("option",{value:"12-18 months",children:"12-18 months"}),e.jsx("option",{value:"18-24 months",children:"18-24 months"})]})]})]})]}),e.jsxs("div",{className:"form-section",children:[e.jsx("h4",{className:"section-title",children:X.layout_type==="library"?"Customization Requirements":"Additional Notes"}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:X.layout_type==="library"?"Describe your modifications *":"Any other preferences or constraints"}),e.jsx("textarea",{value:X.requirements,onChange:R=>W({...X,requirements:R.target.value}),placeholder:X.layout_type==="library"?"Describe any modifications you'd like to make to the selected layout: room changes, additional features, material preferences, etc.":"Any other preferences or constraints",rows:"4",required:X.layout_type==="library",className:"form-control"})]})]}),e.jsxs("div",{className:"form-card architect-selection-card",children:[e.jsx(Ym,{selectedArchitectIds:Array.isArray(ea)?ea:ea?[ea]:[],onSelectionChange:R=>{Jn(R),qs(R.length>0)},layoutRequestId:null,showAIRecommendations:Object.keys(X.style_preferences||{}).length>0,stylePreferences:X.style_preferences||{}}),Ai?e.jsxs("div",{className:"form-group",style:{marginTop:8},children:[e.jsx("label",{children:"Message to architect (optional)"}),e.jsx("textarea",{value:ja,onChange:R=>wr(R.target.value),placeholder:"Add any notes for the architect",rows:"2"})]}):e.jsx("div",{className:"muted",style:{marginTop:8},children:"Select an approved architect above to proceed."})]}),e.jsxs("div",{className:"form-actions",children:[e.jsx("button",{type:"button",onClick:()=>{he(!1),le(null),W({plot_size:"",budget_range:"",requirements:"",location:"",timeline:"",selected_layout_id:null,layout_type:"custom"})},className:"btn btn-secondary",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:re||!Ai&&Array.isArray(ea)&&ea.length>0&&!ja,className:"btn btn-primary",children:re?"Submitting...":X.layout_type==="library"?"Submit Customization Request":"Submit Request"})]})]})]})}),Ft&&e.jsx("div",{className:"form-modal",children:e.jsxs("div",{className:"form-content architect-modal",style:{maxWidth:"min(1200px, 95vw)",maxHeight:"90vh",height:"90vh",overflowY:"auto",scrollbarWidth:"thin",scrollbarColor:"rgb(203, 213, 224) rgb(247, 250, 252)",padding:"20px",position:"relative",scrollBehavior:"smooth",display:"flex",flexDirection:"column",alignItems:"center"},children:[e.jsx("div",{className:"modal-close-container",style:{position:"absolute",top:"16px",right:"16px",zIndex:10},children:e.jsx("button",{className:"modal-close",onClick:()=>Rt(!1),style:{background:"rgba(0,0,0,0.1)",border:"none",borderRadius:"50%",width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",fontSize:"18px",color:"#666"},children:""})}),e.jsx("div",{style:{width:"100%",maxWidth:"1000px",marginBottom:"24px",marginTop:"10px"},children:!Xn||!Xn.id?e.jsxs("div",{className:"form-group request-selector",style:{width:"100%",background:"#f8fafc",padding:"20px",borderRadius:"12px",border:"1px solid #e5e7eb"},children:[e.jsx("label",{style:{fontSize:"18px",fontWeight:"700",color:"#1f2937",marginBottom:"12px",display:"block"},children:" Select Your Request"}),e.jsx("p",{style:{fontSize:"14px",color:"#6b7280",marginBottom:"16px"},children:"Choose which project you want to assign an architect to"}),e.jsxs("select",{value:Xn?.id||"",onChange:R=>{const Fe=j.find(Ge=>String(Ge.id)===R.target.value);Ci(Fe||null)},className:"form-control",style:{width:"100%",padding:"14px 18px",border:"2px solid #d1d5db",borderRadius:"10px",fontSize:"16px",background:"white"},children:[e.jsx("option",{value:"",children:"-- Select request --"}),j.map(R=>e.jsxs("option",{value:R.id,children:["#",R.id,"  ",R.layout_type==="library"?R.selected_layout_title||"Library":"Custom","  ",R.plot_size," sq ft"]},R.id))]})]}):e.jsx("div",{className:"info-row",style:{width:"100%",background:"linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%)",padding:"20px",borderRadius:"12px",border:"2px solid #bae6fd",textAlign:"center"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"12px"},children:[e.jsx("span",{style:{fontSize:"20px"},children:""}),e.jsxs("span",{className:"status-chip success",style:{fontSize:"16px",fontWeight:"700",color:"#0369a1"},children:["Working on Request #",Xn.id]})]})})}),e.jsx("div",{className:"form-card architect-selection-card",style:{width:"100%",maxWidth:"1000px",background:"white",borderRadius:"16px",boxShadow:"0 4px 20px rgba(0,0,0,0.1)",border:"1px solid #e5e7eb"},children:e.jsx(Ym,{selectedArchitectIds:Array.isArray(ea)?ea:ea?[ea]:[],onSelectionChange:R=>{Jn(R),qs(R.length>0)},layoutRequestId:Xn?.id,showAIRecommendations:Object.keys(X.style_preferences||{}).length>0,stylePreferences:X.style_preferences||{}})}),e.jsxs("div",{className:"form-group message-section",style:{width:"100%",maxWidth:"600px",marginTop:"24px"},children:[e.jsx("label",{children:"Message to architect (optional)"}),e.jsx("textarea",{value:ja,onChange:R=>wr(R.target.value),placeholder:"Add any specific requirements or notes for the architect...",rows:"3"}),e.jsxs("div",{className:"form-actions",style:{display:"flex",gap:"12px",justifyContent:"center",marginTop:"20px"},children:[e.jsx("button",{className:"btn btn-secondary",onClick:()=>Rt(!1),children:"Cancel"}),e.jsx("button",{className:"btn btn-primary",disabled:ya||!ea,onClick:ki,children:ya?"Sending...":"Send Request"})]})]})]})}),e.jsx(AB,{open:as,onClose:()=>ps(!1),architect:fs,reviews:Ps,loading:In}),yn&&e.jsx("div",{className:"form-modal",children:e.jsxs("div",{className:"form-content contractor-modal",children:[e.jsxs("div",{className:"form-header",children:[e.jsxs("h3",{children:["Select Contractor",Qa.length>0?` (${Qa.length})`:""]}),e.jsx("p",{children:"Select one or more contractors to send your layout"}),e.jsx("button",{className:"modal-close",onClick:()=>jn(!1),children:""})]}),z&&e.jsxs("div",{className:"selected-layout-display",children:[e.jsxs("h4",{children:["Selected Layout: ",z.title]}),e.jsxs("div",{className:"layout-preview",children:[e.jsx("img",{src:z.image_url||"/images/default-layout.jpg",alt:z.title,className:"layout-image"}),e.jsxs("div",{className:"layout-details",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Type:"})," ",z.layout_type]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Bedrooms:"})," ",z.bedrooms]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Bathrooms:"})," ",z.bathrooms]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Area:"})," ",z.area," sq ft"]})]})]}),z.technical_details&&e.jsxs("div",{style:{marginTop:"12px",padding:"12px",background:"#f8f9fa",borderRadius:"6px",border:"1px solid #e9ecef"},children:[e.jsx("h5",{style:{margin:"0 0 8px 0",fontSize:"0.9rem",color:"#495057"},children:"Technical Specifications"}),e.jsx(Ho,{technicalDetails:z.technical_details,compact:!0})]})]}),e.jsxs("div",{className:"filters-row",children:[e.jsx("input",{type:"text",placeholder:"Search contractor name/email",value:ie,onChange:R=>Se(R.target.value)}),e.jsxs("button",{onClick:()=>Gs({search:ie}),children:[e.jsx("i",{className:"fas fa-search"})," Search"]})]}),Dr&&e.jsx("div",{className:"alert alert-error",children:Dr}),Qa.length>0&&e.jsxs("div",{className:"alert alert-info",style:{marginBottom:"12px",padding:"8px 12px",fontSize:"0.9rem"},children:[" ",Qa.length," contractor",Qa.length>1?"s":""," selected"]}),e.jsx("div",{className:"contractors-list",children:Jr?e.jsx("div",{className:"loading",children:"Loading contractors..."}):Rr.length===0?e.jsxs("div",{className:"empty-state",children:[e.jsx("div",{className:"empty-icon",children:""}),e.jsx("h3",{children:"No contractors found"}),e.jsx("p",{children:"Adjust your filters and try again"})]}):e.jsx("div",{className:"item-list",children:Rr.map(R=>{const Fe=Qa.some(Ge=>Ge.id===R.id);return e.jsxs("label",{className:`list-item ${Fe?"selected":""}`,children:[e.jsx("div",{className:"item-icon",children:""}),e.jsxs("div",{className:"item-content",children:[e.jsxs("h4",{className:"item-title",children:[R.first_name," ",R.last_name]}),e.jsx("p",{className:"item-subtitle",children:"Verified Contractor"}),e.jsxs("div",{className:"detail-grid",children:[e.jsxs("span",{children:[e.jsx("strong",{children:"Email:"})," ",R.email||"N/A"]}),e.jsxs("span",{children:[e.jsx("strong",{children:"License:"})," ",R.license?"Verified":"Not provided"]}),e.jsxs("span",{children:[e.jsx("strong",{children:"Portfolio:"})," ",R.portfolio?"Available":"Not provided"]}),e.jsxs("span",{children:[e.jsx("strong",{children:"Member since:"})," ",R.created_at?new Date(R.created_at).getFullYear():"N/A"]})]}),e.jsxs("div",{className:"rating-row",children:[e.jsx("span",{title:R.avg_rating?`${R.avg_rating} / 5`:"No ratings yet",children:[1,2,3,4,5].map(Ge=>e.jsx("span",{style:{color:(R.avg_rating||0)>=Ge?"#f5a623":"#ddd"},children:""},Ge))}),e.jsxs("span",{style:{marginLeft:8,color:"#666",fontSize:"0.9rem"},children:["(",R.review_count||0,")"]})]})]}),e.jsx("div",{className:"item-actions",children:e.jsx("input",{type:"checkbox",checked:Fe,onChange:Ge=>{Ge.target.checked?Za([...Qa,R]):Za(Qa.filter(it=>it.id!==R.id))}})})]},R.id)})})}),e.jsxs("div",{className:"form-group",style:{marginTop:12},children:[e.jsx("label",{children:"Message to contractor (optional)"}),e.jsx("textarea",{value:_r,onChange:R=>Zr(R.target.value),placeholder:"Add any notes or instructions for the contractor",rows:"3"})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{className:"btn btn-secondary",onClick:()=>jn(!1),children:"Cancel"}),e.jsx("button",{className:"btn btn-primary",disabled:Jr||!Qa||Qa.length===0||Br,onClick:un,children:Br?`Sending to ${Qa.length} contractor(s)...`:`Send to ${Qa.length>0?`${Qa.length} Contractor${Qa.length>1?"s":""}`:"Contractor"}`})]})]})}),k&&e.jsx("div",{className:"form-modal",children:e.jsxs("div",{className:"form-content library-modal",children:[e.jsxs("div",{className:"form-header",children:[e.jsx("h3",{children:"Layout Library"}),e.jsx("p",{children:"Choose from our collection of professionally designed layouts"}),e.jsx("button",{className:"modal-close",onClick:()=>T(!1),children:""}),e.jsx("button",{className:"btn btn-primary",onClick:()=>Dt(!0),style:{marginTop:10},children:"Add Layout"})]}),e.jsx("div",{className:"library-content",children:re?e.jsx("div",{className:"loading",children:"Loading layouts..."}):I.length===0?e.jsxs("div",{className:"empty-state",children:[e.jsx("div",{className:"empty-icon",children:""}),e.jsx("h3",{children:"No Layouts Available"}),e.jsx("p",{children:"Check back later for new layout designs!"})]}):e.jsx("div",{className:"layout-grid",children:I.map(R=>e.jsx(Fb,{layout:R,onSelect:()=>fi(R),onPreview:()=>me(R),isImageUrl:Ie,isPdfUrl:ct,isModal:!0,onSendToContractor:Va,onViewDetails:dr},R.id))})})]})}),rt&&e.jsx("div",{className:"form-modal",children:e.jsxs("div",{className:"form-content",style:{maxWidth:920,maxHeight:"90vh",height:"90vh",overflowY:"auto",scrollbarWidth:"thin",scrollbarColor:"rgb(203, 213, 224) rgb(247, 250, 252)",paddingRight:12,marginRight:8,position:"relative",scrollBehavior:"smooth"},children:[e.jsx("div",{className:"fade-top"}),e.jsxs("div",{className:"form-header",children:[e.jsx("h3",{children:"Add Layout"}),e.jsx("p",{children:"Publish a new layout to the library"}),e.jsx("div",{className:"step-indicator",style:{marginTop:10,display:"flex",gap:10},children:e.jsx("span",{className:"step active",children:"Basic Info & Files"})}),e.jsx("button",{className:"modal-close",onClick:()=>Dt(!1),children:""})]}),e.jsxs("form",{onSubmit:ve,children:[e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Title"}),e.jsx("input",{placeholder:"e.g., Modern 3BHK House",required:!0,type:"text",value:Pt.title,onChange:R=>Wt({...Pt,title:R.target.value})})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Layout Type"}),e.jsxs("select",{required:!0,value:Pt.layoutType,onChange:R=>Wt({...Pt,layoutType:R.target.value}),children:[e.jsx("option",{value:"",children:"Select Type"}),e.jsx("option",{value:"Residential",children:"Residential"}),e.jsx("option",{value:"Commercial",children:"Commercial"}),e.jsx("option",{value:"Mixed Use",children:"Mixed Use"})]})]})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Bedrooms"}),e.jsx("input",{min:"1",required:!0,type:"number",value:Pt.bedrooms,onChange:R=>Wt({...Pt,bedrooms:R.target.value})})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Bathrooms"}),e.jsx("input",{min:"1",required:!0,type:"number",value:Pt.bathrooms,onChange:R=>Wt({...Pt,bathrooms:R.target.value})})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{children:["Area (sq ft)",e.jsx("div",{className:"info-popup-container",style:{position:"relative",display:"inline-block"},children:e.jsx("span",{style:{marginLeft:8,cursor:"pointer",color:"rgb(107, 114, 128)"},children:""})})]}),e.jsx("input",{min:"100",required:!0,type:"number",value:Pt.area,onChange:R=>Wt({...Pt,area:R.target.value})})]})]}),e.jsx("div",{className:"form-row",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Price Range"}),e.jsx("input",{placeholder:"e.g., 20-30 Lakhs",type:"text",value:Pt.priceRange,onChange:R=>Wt({...Pt,priceRange:R.target.value})})]})}),e.jsxs("div",{className:"form-section",style:{marginTop:20,padding:16,border:"1px solid rgb(229, 231, 235)",borderRadius:8,background:"rgb(249, 250, 251)"},children:[e.jsx("h4",{style:{margin:"0px 0px 16px",color:"rgb(55, 65, 81)"},children:"Files & Media"}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Preview Image *"}),e.jsx("input",{accept:"image/*",required:!0,type:"file",onChange:R=>Wt({...Pt,previewImage:R.target.files[0]})}),e.jsx("p",{className:"form-help",style:{margin:"4px 0px 0px",fontSize:"0.8rem",color:"rgb(107, 114, 128)"},children:"Upload a preview image (JPG, PNG, GIF, WebP)"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Layout Design File *"}),e.jsx("input",{accept:".pdf,.jpg,.jpeg,.png,.gif,.webp,.svg,.dwg,.dxf,.ifc,.rvt,.skp,.3dm,.obj,.stl",required:!0,type:"file",onChange:R=>Wt({...Pt,layoutFile:R.target.files[0]})}),e.jsx("p",{className:"form-help",style:{margin:"4px 0px 0px",fontSize:"0.8rem",color:"rgb(107, 114, 128)"},children:"Upload layout file (PDF, Images, CAD files, 3D models)"})]})]}),e.jsxs("div",{className:"form-row",children:[e.jsx("div",{className:"form-group"}),e.jsx("div",{className:"form-group"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Description"}),e.jsx("textarea",{rows:"6",placeholder:"Describe the layout features and design highlights...",style:{minHeight:120},value:Pt.description,onChange:R=>Wt({...Pt,description:R.target.value})})]}),e.jsxs("div",{className:"form-actions",style:{marginTop:30,paddingBottom:30,borderTop:"1px solid rgb(229, 231, 235)",paddingTop:20},children:[e.jsx("button",{type:"submit",className:"btn btn-primary",children:"Add Layout"}),e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>Dt(!1),children:"Cancel"})]})]}),e.jsx("div",{className:"fade-bottom"})]})}),de&&e.jsx("div",{className:"form-modal",onClick:()=>me(null),children:e.jsxs("div",{className:"form-content",onClick:R=>R.stopPropagation(),style:{maxWidth:"min(1200px, 96vw)"},children:[e.jsxs("div",{className:"form-header",children:[e.jsx("h3",{children:de.title}),e.jsx("p",{children:"Preview Image and Layout"}),(de.architect_name||de.architect_email)&&e.jsxs("div",{style:{marginTop:6,color:"#6b7280"},children:[de.architect_name&&e.jsxs("div",{children:[e.jsx("strong",{children:"Architect:"})," ",de.architect_name]}),de.architect_email&&e.jsxs("div",{children:[e.jsx("strong",{children:"Email:"})," ",de.architect_email]})]})]}),e.jsxs("div",{className:"form-row",style:{gap:"16px"},children:[e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{children:"Preview Image"}),Ie(de.image_url)?e.jsx("img",{src:de.image_url,alt:"Preview",style:{width:"100%",maxHeight:"70vh",objectFit:"contain",borderRadius:8}}):e.jsx("div",{style:{padding:12,background:"#fafafa",border:"1px dashed #ddd",borderRadius:8},children:"No image"})]}),e.jsxs("div",{className:"form-group",style:{flex:1},children:[e.jsx("label",{children:"Layout"}),Ie(de.design_file_url)?e.jsx("img",{src:de.design_file_url,alt:"Layout",style:{width:"100%",maxHeight:"70vh",objectFit:"contain",borderRadius:8}}):ct(de.design_file_url)?e.jsx("iframe",{title:"Layout PDF",src:de.design_file_url,style:{width:"100%",height:"70vh",border:"1px solid #eee",borderRadius:8}}):de.design_file_url?e.jsx("a",{className:"btn btn-link",href:de.design_file_url,target:"_blank",rel:"noreferrer",children:"Open/Download Layout"}):e.jsx("div",{style:{padding:12,background:"#fafafa",border:"1px dashed #ddd",borderRadius:8},children:"No layout file"})]})]}),de.technical_details&&e.jsxs("div",{style:{marginTop:"16px",padding:"12px",background:"#f8f9fa",borderRadius:"6px",border:"1px solid #e9ecef"},children:[e.jsx("h5",{style:{margin:"0 0 8px 0",fontSize:"0.9rem",color:"#495057"},children:"Technical Specifications"}),e.jsx(Ho,{technicalDetails:de.technical_details,compact:!0})]}),e.jsx("div",{className:"form-actions",children:e.jsx("button",{type:"button",className:"btn btn-primary",onClick:()=>me(null),children:"Close"})})]})}),Ts&&e.jsx("div",{className:"form-modal",onClick:()=>dr(null),children:e.jsxs("div",{className:"form-content",onClick:R=>R.stopPropagation(),style:{maxWidth:"min(1000px, 95vw)",maxHeight:"90vh"},children:[e.jsxs("div",{className:"form-header",children:[e.jsxs("h3",{children:["Layout Details - ",Ts.title]}),e.jsx("p",{children:"Complete layout information and specifications"}),(Ts.architect_name||Ts.architect_email)&&e.jsxs("div",{style:{marginTop:6,color:"#6b7280"},children:[Ts.architect_name&&e.jsxs("div",{children:[e.jsx("strong",{children:"Architect:"})," ",Ts.architect_name]}),Ts.architect_email&&e.jsxs("div",{children:[e.jsx("strong",{children:"Email:"})," ",Ts.architect_email]})]})]}),e.jsxs("div",{style:{overflowY:"auto",maxHeight:"70vh",paddingRight:"8px"},children:[e.jsxs("div",{style:{marginBottom:"24px",padding:"16px",background:"#f8f9fa",borderRadius:"8px",border:"1px solid #e9ecef"},children:[e.jsx("h4",{style:{margin:"0 0 12px 0",color:"#495057"},children:"Basic Information"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"12px"},children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Title:"})," ",Ts.title||"N/A"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Type:"})," ",Ts.layout_type||"N/A"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Bedrooms:"})," ",Ts.bedrooms||"N/A"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Bathrooms:"})," ",Ts.bathrooms||"N/A"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Area:"})," ",Ts.area?`${Ts.area} sq ft`:"N/A"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Price Range:"})," ",Ts.price_range||"N/A"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Status:"})," ",Ts.status||"N/A"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Created:"})," ",Ts.created_at?new Date(Ts.created_at).toLocaleDateString():"N/A"]})]}),Ts.description&&e.jsxs("div",{style:{marginTop:"12px"},children:[e.jsx("strong",{children:"Description:"}),e.jsx("p",{style:{margin:"4px 0 0 0",color:"#6c757d"},children:Ts.description})]})]}),Ts.technical_details&&e.jsxs("div",{style:{marginBottom:"24px"},children:[e.jsx("h4",{style:{margin:"0 0 12px 0",color:"#495057"},children:"Technical Specifications"}),e.jsx(Ho,{technicalDetails:Ts.technical_details,compact:!1})]}),e.jsxs("div",{style:{padding:"16px",background:"#f8f9fa",borderRadius:"8px",border:"1px solid #e9ecef"},children:[e.jsx("h4",{style:{margin:"0 0 12px 0",color:"#495057"},children:"Files & Media"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"16px"},children:[Ts.image_url&&e.jsxs("div",{children:[e.jsx("strong",{children:"Preview Image:"}),e.jsx("div",{style:{marginTop:"8px"},children:e.jsx("img",{src:Ts.image_url,alt:"Preview",style:{maxWidth:"100%",maxHeight:"200px",borderRadius:"6px",objectFit:"cover"}})})]}),Ts.design_file_url&&e.jsxs("div",{children:[e.jsx("strong",{children:"Layout File:"}),e.jsx("div",{style:{marginTop:"8px",padding:"8px",background:"#fff",borderRadius:"6px",border:"1px solid #dee2e6"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("span",{style:{fontSize:"1.5rem"},children:Ts.design_file_url.toLowerCase().endsWith(".pdf")?"":Ts.design_file_url.toLowerCase().match(/\.(jpg|jpeg|png|gif|webp)$/)?"":Ts.design_file_url.toLowerCase().match(/\.(dwg|dxf)$/)?"":Ts.design_file_url.toLowerCase().match(/\.(skp|3dm|obj|stl)$/)?"":""}),e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:"500"},children:Ts.design_file_url.split("/").pop()}),e.jsx("a",{href:Ts.design_file_url,target:"_blank",rel:"noreferrer",style:{fontSize:"0.8rem",color:"#3b82f6"},children:"View File"})]})]})})]})]})]})]}),e.jsx("div",{className:"form-actions",children:e.jsx("button",{type:"button",className:"btn btn-primary",onClick:()=>dr(null),children:"Close"})})]})})]}),e.jsx(qF,{viewer:zn,setViewer:ka})]})},zF=({request:t,onAssignArchitect:s,onRemove:a,showContractorInfo:r=!1})=>{const[o,l]=Ar.useState(!1),A=h=>{if(!h)return{};try{return typeof h=="string"?JSON.parse(h):h}catch{return{}}};if(t.type==="direct_send"||t.id?.toString().startsWith("send_"))return e.jsxs("div",{className:"list-item",style:{background:"white",borderRadius:"12px",border:"1px solid #e5e7eb",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.1)",padding:"20px",marginBottom:"16px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"12px"},children:[e.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"12px",background:"linear-gradient(135deg, #f59e0b 0%, #d97706 100%)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"20px",color:"white"},children:""}),e.jsxs("div",{style:{flex:1},children:[e.jsx("h4",{style:{margin:0,fontSize:"18px",fontWeight:"600",color:"#1f2937"},children:"Sent to Contractor"}),e.jsxs("p",{style:{margin:"4px 0 0 0",fontSize:"14px",color:"#6b7280"},children:[t.contractor_name||"Contractor","  ",t.layout_title||"Layout"]}),e.jsxs("div",{style:{margin:"4px 0 0 0",fontSize:"12px",color:"#9ca3af"},children:[e.jsxs("div",{children:[" Sent: ",new Date(t.created_at).toLocaleString()]}),t.acknowledged_at&&e.jsxs("div",{style:{color:"#10b981",marginTop:"2px"},children:[" Acknowledged: ",new Date(t.acknowledged_at).toLocaleString()]}),t.due_date&&e.jsxs("div",{style:{color:"#f59e0b",marginTop:"2px"},children:[" Due: ",new Date(t.due_date).toLocaleDateString()]})]})]}),e.jsx("span",{className:`status-badge ${t.acknowledged_at?"accepted":"pending"}`,style:{marginLeft:"auto"},children:t.acknowledged_at?"Acknowledged":"Sent"})]}),t.message&&e.jsxs("div",{style:{marginTop:"12px",padding:"12px",background:"#f9fafb",borderRadius:"8px",border:"1px solid #e5e7eb"},children:[e.jsx("strong",{style:{fontSize:"13px",color:"#374151"},children:"Message:"}),e.jsx("p",{style:{margin:"4px 0 0 0",fontSize:"14px",color:"#6b7280",whiteSpace:"pre-wrap"},children:t.message})]})]});const u=()=>{const h=A(t.requirements),p=h.forwarded_design;if(!p)return null;const m=Array.isArray(p.files)?p.files:[],v=p.technical_details||{},b=C=>{if(!C)return"-";if(typeof C=="string"){try{const Q=JSON.parse(C);if(typeof Q=="object"&&Q!==null)return Object.entries(Q).map(([j,B])=>` ${j.replace(/_/g," ")}: ${String(B)}`).join(`
`)}catch{}return C.replace(/\\n/g,`
`).replace(/\n\s*\n/g,`
`).trim()}return typeof C=="object"&&C!==null?Object.entries(C).map(([Q,j])=>` ${Q.replace(/_/g," ")}: ${String(j)}`).join(`
`):String(C)},x=C=>!C||typeof C!="object"?null:e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(280px, 1fr))",gap:12},children:Object.entries(C).map(([Q,j])=>e.jsxs("div",{style:{padding:"12px",background:"#fff",border:"1px solid #e5e7eb",borderRadius:8,boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[e.jsx("div",{style:{fontSize:13,fontWeight:600,color:"#374151",marginBottom:8,textTransform:"capitalize"},children:Q.replaceAll("_"," ").replace(/\b\w/g,B=>B.toUpperCase())}),e.jsx("div",{style:{fontSize:14,lineHeight:1.5,color:"#6b7280",whiteSpace:"pre-wrap"},children:b(j)})]},Q))});return e.jsxs("div",{className:"forwarded-design",style:{marginTop:10},children:[e.jsxs("div",{className:"details-grid",style:{marginBottom:8},children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Design Title:"})," ",p.title||"-"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Uploaded:"})," ",p.created_at?new Date(p.created_at).toLocaleString():"-"]})]}),p.description&&e.jsxs("div",{className:"description-section",style:{marginBottom:8},children:[e.jsx("strong",{children:"Description:"}),e.jsx("div",{className:"description-content",children:p.description})]}),h.contractor_message&&e.jsxs("div",{className:"description-section",style:{marginBottom:8},children:[e.jsx("strong",{children:"Message to contractor:"}),e.jsx("div",{className:"description-content",children:h.contractor_message})]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(200px, 1fr))",gap:"12px"},children:m.map((C,Q)=>{const j=C.path||`/buildhub/backend/uploads/designs/${C.stored||C.original}`,B=(C.ext||"").toLowerCase(),L=["jpg","jpeg","png","gif","webp","svg","heic"].includes(B);return e.jsxs("div",{className:"file-card-interactive",style:{position:"relative",cursor:"pointer",borderRadius:8,overflow:"hidden",boxShadow:"0 2px 8px rgba(0,0,0,0.1)",transition:"transform 0.2s ease",":hover":{transform:"scale(1.02)"}},children:[L?e.jsxs("div",{style:{position:"relative",width:"100%",height:140},children:[e.jsx("img",{src:j,alt:C.original,style:{width:"100%",height:"100%",objectFit:"cover"},onClick:P=>{P.stopPropagation();const F=P.currentTarget.nextSibling;F.style.display=F.style.display==="flex"?"none":"flex"}}),e.jsxs("div",{className:"image-overlay",style:{position:"absolute",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.7)",display:"none",alignItems:"center",justifyContent:"center",gap:10,zIndex:10},children:[e.jsx("a",{href:j,target:"_blank",rel:"noreferrer",className:"btn btn-light",style:{padding:"8px 16px",fontSize:"14px"},onClick:P=>P.stopPropagation(),children:" View"}),e.jsx("a",{href:j,download:!0,className:"btn btn-light",style:{padding:"8px 16px",fontSize:"14px"},onClick:P=>P.stopPropagation(),children:" Download"})]})]}):e.jsxs("div",{style:{height:140,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",background:"#f8fafc",border:"2px dashed #cbd5e1"},children:[e.jsx("span",{style:{fontSize:"2.5rem",marginBottom:8},children:""}),e.jsxs("div",{style:{display:"flex",gap:8},children:[e.jsx("a",{href:j,target:"_blank",rel:"noreferrer",className:"btn btn-secondary btn-sm",children:"View"}),e.jsx("a",{href:j,download:!0,className:"btn btn-primary btn-sm",children:"Download"})]})]}),e.jsxs("div",{style:{padding:"8px",background:"#fff",borderTop:"1px solid #e5e7eb"},children:[e.jsx("div",{style:{fontSize:"13px",fontWeight:500,color:"#374151",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},title:C.original||C.stored,children:C.original||C.stored}),e.jsxs("div",{style:{fontSize:"11px",color:"#9ca3af",marginTop:2},children:[B.toUpperCase(),"  Click to ",L?"view":"download"]})]})]},Q)})}),v&&Object.keys(v).length>0&&e.jsxs("div",{style:{marginTop:16},children:[e.jsx("h4",{style:{margin:"10px 0"},children:"Technical Details"}),v.floor_plans&&e.jsxs("div",{style:{marginBottom:12},children:[e.jsx("div",{style:{fontWeight:600,marginBottom:6},children:"Floor Plans"}),x(v.floor_plans)]}),v.site_orientation&&e.jsxs("div",{style:{marginBottom:12},children:[e.jsx("div",{style:{fontWeight:600,marginBottom:6},children:"Site Orientation"}),x(v.site_orientation)]}),v.structural&&e.jsxs("div",{style:{marginBottom:12},children:[e.jsx("div",{style:{fontWeight:600,marginBottom:6},children:"Structural"}),x(v.structural)]}),v.elevations&&e.jsxs("div",{style:{marginBottom:12},children:[e.jsx("div",{style:{fontWeight:600,marginBottom:6},children:"Elevations"}),x(v.elevations)]}),v.construction&&e.jsxs("div",{style:{marginBottom:12},children:[e.jsx("div",{style:{fontWeight:600,marginBottom:6},children:"Construction"}),x(v.construction)]})]})]})};return e.jsxs("div",{className:"list-item",style:{background:"white",borderRadius:"12px",border:"1px solid #e5e7eb",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.1)",padding:"20px",marginBottom:"16px",transition:"all 0.2s ease",position:"relative",overflow:"hidden"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"flex-start",justifyContent:"space-between",marginBottom:"16px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[e.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"12px",background:t.layout_type==="library"?"linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%)":"linear-gradient(135deg, #10b981 0%, #059669 100%)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"20px",color:"white",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.15)"},children:t.layout_type==="library"?"":Number(t?.accepted_count)>0||t?.status==="approved"||t?.status==="accepted"?"":t.status==="rejected"?"":""}),e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"4px"},children:[e.jsxs("span",{style:{background:"#eef2ff",color:"#3730a3",padding:"2px 8px",borderRadius:"6px",fontSize:"12px",fontWeight:"600"},children:["#",t.id]}),e.jsx("h4",{style:{margin:0,fontSize:"18px",fontWeight:"600",color:"#1f2937",lineHeight:"1.3"},children:t.layout_type==="library"?`Library Layout: ${t.selected_layout_title||"Selected Layout"}`:`Custom Layout Request - ${t.plot_size} sq ft`})]}),e.jsxs("p",{style:{margin:0,fontSize:"14px",color:"#6b7280",lineHeight:"1.4"},children:["Budget: ",t.budget_range,t.layout_type==="library"&&t.selected_layout_type&&e.jsx("span",{style:{background:"#f0fdf4",color:"#166534",padding:"2px 6px",borderRadius:"4px",marginLeft:"8px",fontSize:"12px",fontWeight:"500"},children:t.selected_layout_type})]})]})]}),e.jsx("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:(()=>{const h=Number(t?.accepted_count)>0||t?.status==="approved"||t?.status==="accepted"?"accepted":t?.status;return e.jsx("span",{style:{background:h==="accepted"?"#d1fae5":h==="rejected"?"#fee2e2":h==="pending"?"#fef3c7":"#f3f4f6",color:h==="accepted"?"#065f46":h==="rejected"?"#991b1b":h==="pending"?"#92400e":"#6b7280",padding:"6px 12px",borderRadius:"20px",fontSize:"12px",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.5px"},children:h==="deleted"?"Deleted":du(h)})})()})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"16px",marginBottom:"16px"},children:[e.jsxs("div",{style:{background:"#f8fafc",padding:"12px",borderRadius:"8px",border:"1px solid #e2e8f0"},children:[e.jsx("div",{style:{fontSize:"12px",color:"#6b7280",marginBottom:"4px",fontWeight:"500"},children:"Submitted"}),e.jsx("div",{style:{fontSize:"14px",color:"#1f2937",fontWeight:"600"},children:new Date(t.created_at).toLocaleDateString()})]}),t.location&&e.jsxs("div",{style:{background:"#f8fafc",padding:"12px",borderRadius:"8px",border:"1px solid #e2e8f0"},children:[e.jsx("div",{style:{fontSize:"12px",color:"#6b7280",marginBottom:"4px",fontWeight:"500"},children:"Location"}),e.jsx("div",{style:{fontSize:"14px",color:"#1f2937",fontWeight:"600"},children:t.location})]}),e.jsxs("div",{style:{background:"#f8fafc",padding:"12px",borderRadius:"8px",border:"1px solid #e2e8f0"},children:[e.jsx("div",{style:{fontSize:"12px",color:"#6b7280",marginBottom:"4px",fontWeight:"500"},children:"Designs"}),e.jsx("div",{style:{fontSize:"14px",color:"#1f2937",fontWeight:"600"},children:t.design_count||0})]}),e.jsxs("div",{style:{background:"#f8fafc",padding:"12px",borderRadius:"8px",border:"1px solid #e2e8f0"},children:[e.jsx("div",{style:{fontSize:"12px",color:"#6b7280",marginBottom:"4px",fontWeight:"500"},children:"Proposals"}),e.jsx("div",{style:{fontSize:"14px",color:"#1f2937",fontWeight:"600"},children:t.proposal_count||0})]})]}),e.jsxs("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap",marginBottom:"16px"},children:[e.jsxs("span",{style:{background:"#e0f2fe",color:"#0369a1",padding:"4px 10px",borderRadius:"12px",fontSize:"12px",fontWeight:"500"},children:["Sent: ",t.sent_count||0]}),e.jsxs("span",{style:{background:"#d1fae5",color:"#065f46",padding:"4px 10px",borderRadius:"12px",fontSize:"12px",fontWeight:"500"},children:["Accepted: ",t.accepted_count||0]}),e.jsxs("span",{style:{background:"#fee2e2",color:"#991b1b",padding:"4px 10px",borderRadius:"12px",fontSize:"12px",fontWeight:"500"},children:["Rejected: ",t.rejected_count||0]})]}),r&&e.jsxs("div",{style:{background:"linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%)",padding:"16px",borderRadius:"8px",border:"1px solid #e2e8f0",marginBottom:"16px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:[e.jsx("span",{style:{fontWeight:"600",color:"#374151",fontSize:"14px"},children:"Contractor Assignments"}),e.jsxs("span",{style:{background:"#dbeafe",color:"#1e40af",padding:"4px 10px",borderRadius:"12px",fontSize:"12px",fontWeight:"500"},children:[t.assignment_count||0," assigned"]})]}),t.assigned_contractors&&t.assigned_contractors.length>0?e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"13px",color:"#6b7280",marginBottom:"8px",fontWeight:"500"},children:"Assigned Contractors:"}),e.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"6px"},children:t.assigned_contractors.map((h,p)=>e.jsx("span",{style:{background:"#ecfdf5",color:"#065f46",padding:"4px 8px",borderRadius:"8px",fontSize:"12px",fontWeight:"500"},children:h},p))}),t.assignment_statuses&&t.assignment_statuses.length>0&&e.jsxs("div",{style:{marginTop:"8px",fontSize:"12px",color:"#6b7280"},children:["Status: ",t.assignment_statuses.join(", ")]})]}):e.jsx("div",{style:{fontSize:"14px",color:"#6b7280",fontStyle:"italic"},children:"No contractors assigned yet"}),e.jsxs("div",{style:{marginTop:"12px",fontSize:"12px",color:"#6b7280",fontWeight:"500"},children:["Proposals received: ",t.proposal_count||0]})]}),o&&e.jsx("div",{style:{background:"linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%)",padding:"20px",borderRadius:"12px",border:"1px solid #e2e8f0",marginBottom:"16px"},children:e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"16px"},children:[e.jsxs("div",{style:{background:"white",padding:"12px",borderRadius:"8px",border:"1px solid #e5e7eb"},children:[e.jsx("div",{style:{fontSize:"12px",color:"#6b7280",marginBottom:"4px",fontWeight:"500"},children:"Request Type"}),e.jsx("div",{style:{fontSize:"14px",fontWeight:"600",color:"#1f2937"},children:t.layout_type==="library"?"Library Layout":"Custom Request"})]}),e.jsxs("div",{style:{background:"white",padding:"12px",borderRadius:"8px",border:"1px solid #e5e7eb"},children:[e.jsx("div",{style:{fontSize:"12px",color:"#6b7280",marginBottom:"4px",fontWeight:"500"},children:"Plot Size"}),e.jsx("div",{style:{fontSize:"14px",fontWeight:"600",color:"#1f2937"},children:t.plot_size||"-"})]}),e.jsxs("div",{style:{background:"white",padding:"12px",borderRadius:"8px",border:"1px solid #e5e7eb"},children:[e.jsx("div",{style:{fontSize:"12px",color:"#6b7280",marginBottom:"4px",fontWeight:"500"},children:"Budget Range"}),e.jsx("div",{style:{fontSize:"14px",fontWeight:"600",color:"#1f2937"},children:t.budget_range||"-"})]}),e.jsxs("div",{style:{background:"white",padding:"12px",borderRadius:"8px",border:"1px solid #e5e7eb"},children:[e.jsx("div",{style:{fontSize:"12px",color:"#6b7280",marginBottom:"4px",fontWeight:"500"},children:"Location"}),e.jsx("div",{style:{fontSize:"14px",fontWeight:"600",color:"#1f2937"},children:t.location||"-"})]}),e.jsxs("div",{style:{background:"white",padding:"12px",borderRadius:"8px",border:"1px solid #e5e7eb"},children:[e.jsx("div",{style:{fontSize:"12px",color:"#6b7280",marginBottom:"4px",fontWeight:"500"},children:"Timeline"}),e.jsx("div",{style:{fontSize:"14px",fontWeight:"600",color:"#1f2937"},children:t.timeline||"-"})]}),t.layout_type==="library"&&e.jsxs("div",{style:{background:"white",padding:"12px",borderRadius:"8px",border:"1px solid #e5e7eb",gridColumn:"1 / -1"},children:[e.jsx("div",{style:{fontSize:"12px",color:"#6b7280",marginBottom:"4px",fontWeight:"500"},children:"Selected Layout"}),e.jsx("div",{style:{fontSize:"14px",fontWeight:"600",color:"#1f2937"},children:t.selected_layout_title||"Selected Layout"})]}),t.layout_type==="library"&&(t.selected_layout_architect_name||t.selected_layout_architect_email)&&e.jsxs("div",{style:{background:"white",padding:"12px",borderRadius:"8px",border:"1px solid #e5e7eb",gridColumn:"1 / -1",display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"12px"},children:[t.selected_layout_architect_name&&e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"12px",color:"#6b7280",marginBottom:"4px",fontWeight:"500"},children:"Architect"}),e.jsx("div",{style:{fontSize:"14px",fontWeight:"600",color:"#1f2937"},children:t.selected_layout_architect_name})]}),t.selected_layout_architect_email&&e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"12px",color:"#6b7280",marginBottom:"4px",fontWeight:"500"},children:"Email"}),e.jsx("div",{style:{fontSize:"14px",fontWeight:"600",color:"#1f2937"},children:t.selected_layout_architect_email})]})]}),t.requirements&&e.jsx("div",{style:{gridColumn:"1 / -1"},children:e.jsx(ex,{raw:t.requirements,title:"Requirements"})}),r&&e.jsxs("div",{style:{gridColumn:"1 / -1"},children:[e.jsx("div",{style:{fontSize:"12px",color:"#6b7280",marginBottom:"6px",fontWeight:"500"},children:"Forwarded to Contractor"}),u()]})]})}),e.jsxs("div",{style:{display:"flex",gap:"12px",flexWrap:"wrap",alignItems:"center",justifyContent:"flex-end",paddingTop:"16px",borderTop:"1px solid #e5e7eb"},children:[e.jsx("button",{style:{background:"#f3f4f6",color:"#374151",border:"1px solid #d1d5db",padding:"8px 16px",borderRadius:"8px",fontSize:"14px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease"},onClick:()=>l(h=>!h),onMouseEnter:h=>{h.target.style.background="#e5e7eb",h.target.style.borderColor="#9ca3af"},onMouseLeave:h=>{h.target.style.background="#f3f4f6",h.target.style.borderColor="#d1d5db"},children:o?"Hide Details":"View Details"}),e.jsx("button",{style:{background:"linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%)",color:"white",border:"none",padding:"8px 16px",borderRadius:"8px",fontSize:"14px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease",boxShadow:"0 2px 4px rgba(59, 130, 246, 0.3)"},onClick:s,title:"Send this request to a selected architect",onMouseEnter:h=>{h.target.style.transform="translateY(-1px)",h.target.style.boxShadow="0 4px 8px rgba(59, 130, 246, 0.4)"},onMouseLeave:h=>{h.target.style.transform="translateY(0)",h.target.style.boxShadow="0 2px 4px rgba(59, 130, 246, 0.3)"},children:"Send to Architect"}),e.jsx("button",{style:{background:"linear-gradient(135deg, #ef4444 0%, #dc2626 100%)",color:"white",border:"none",padding:"8px 16px",borderRadius:"8px",fontSize:"14px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease",boxShadow:"0 2px 4px rgba(239, 68, 68, 0.3)"},onClick:a,title:"Remove request",onMouseEnter:h=>{h.target.style.transform="translateY(-1px)",h.target.style.boxShadow="0 4px 8px rgba(239, 68, 68, 0.4)"},onMouseLeave:h=>{h.target.style.transform="translateY(0)",h.target.style.boxShadow="0 2px 4px rgba(239, 68, 68, 0.3)"},children:"Remove"})]})]})},Fb=({layout:t,onSelect:s,onPreview:a,isImageUrl:r,isPdfUrl:o,isModal:l=!1,onSendToContractor:A,onViewDetails:u})=>e.jsxs("div",{className:`layout-card ${l?"modal-card":""}`,children:[e.jsxs("div",{className:"layout-image-container",children:[e.jsx("button",{type:"button",className:"layout-image-button",onClick:h=>{h.stopPropagation(),a()},style:{cursor:"zoom-in"},children:e.jsx("img",{src:t.image_url||"/images/default-layout.jpg",alt:t.title,className:"layout-card-image"})}),e.jsx("div",{className:"layout-overlay",children:e.jsxs("div",{style:{display:"flex",gap:8,flexWrap:"wrap"},children:[t.design_file_url&&(r(t.design_file_url)||o(t.design_file_url))&&e.jsx("button",{type:"button",className:"btn",onClick:h=>{h.stopPropagation(),a()},children:"View Layout"}),e.jsx("button",{type:"button",className:"btn",onClick:h=>{h.stopPropagation(),s()},children:"Customize"})]})})]}),e.jsxs("div",{className:"layout-card-content",children:[e.jsx("h4",{className:"layout-title",children:t.title}),e.jsx("p",{className:"layout-type",children:t.layout_type}),e.jsxs("div",{className:"layout-specs",children:[e.jsxs("span",{className:"spec",children:[" ",t.bedrooms," BR"]}),e.jsxs("span",{className:"spec",children:[" ",t.bathrooms," BA"]}),e.jsxs("span",{className:"spec",children:[" ",t.area," sq ft"]})]}),t.architect_name&&e.jsxs("p",{className:"layout-author",style:{margin:"6px 0",color:"#555"},children:["By ",t.architect_name]}),t.architect_email&&e.jsxs("p",{className:"layout-author",style:{margin:"0 0 6px 0",color:"#6b7280"},children:["Email: ",t.architect_email]}),t.description&&e.jsx("p",{className:"layout-description",children:t.description}),t.technical_details&&e.jsxs("div",{className:"technical-details-preview",style:{marginTop:"12px",padding:"12px",background:"#f8f9fa",borderRadius:"6px",border:"1px solid #e9ecef"},children:[e.jsx("h5",{style:{margin:"0 0 8px 0",fontSize:"0.9rem",color:"#495057"},children:"Technical Specifications"}),e.jsx(Ho,{technicalDetails:t.technical_details,compact:!0})]}),e.jsx("div",{className:"layout-price",children:t.price_range&&e.jsxs("span",{className:"price-range",children:["",t.price_range]})})]})]}),qF=({viewer:t,setViewer:s})=>{if(!t.open)return null;const a=/\.(jpg|jpeg|png|gif|webp|svg|heic)$/i.test(t.src),r=/\.(pdf)$/i.test(t.src);return e.jsx("div",{className:"viewer-overlay",style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.9)",zIndex:9999,display:"flex",alignItems:"center",justifyContent:"center",padding:"20px"},onClick:()=>s({open:!1,src:"",title:""}),children:e.jsxs("div",{className:"viewer-content",style:{position:"relative",maxWidth:"90vw",maxHeight:"90vh",backgroundColor:"white",borderRadius:"8px",overflow:"hidden",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)"},onClick:o=>o.stopPropagation(),children:[e.jsxs("div",{className:"viewer-header",style:{padding:"16px 20px",borderBottom:"1px solid #e5e7eb",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"#f9fafb"},children:[e.jsx("h3",{style:{margin:0,fontSize:"18px",fontWeight:"600",color:"#374151"},children:t.title}),e.jsx("button",{onClick:()=>s({open:!1,src:"",title:""}),style:{background:"none",border:"none",fontSize:"24px",cursor:"pointer",color:"#6b7280",padding:"4px",borderRadius:"4px",display:"flex",alignItems:"center",justifyContent:"center"},title:"Close viewer",children:""})]}),e.jsx("div",{className:"viewer-body",style:{padding:"20px",display:"flex",alignItems:"center",justifyContent:"center",minHeight:"400px",maxHeight:"70vh",overflow:"auto"},children:a?e.jsx("img",{src:t.src,alt:t.title,style:{maxWidth:"100%",maxHeight:"100%",objectFit:"contain",borderRadius:"4px"}}):r?e.jsx("iframe",{src:t.src,style:{width:"100%",height:"600px",border:"none",borderRadius:"4px"},title:t.title}):e.jsxs("div",{style:{textAlign:"center",color:"#6b7280"},children:[e.jsx("div",{style:{fontSize:"48px",marginBottom:"16px"},children:""}),e.jsx("p",{style:{margin:0,fontSize:"16px"},children:"Preview not available"}),e.jsx("a",{href:t.src,target:"_blank",rel:"noopener noreferrer",style:{display:"inline-block",marginTop:"12px",padding:"8px 16px",backgroundColor:"#3b82f6",color:"white",textDecoration:"none",borderRadius:"6px",fontSize:"14px"},children:"Open File"})]})}),e.jsxs("div",{className:"viewer-footer",style:{padding:"12px 20px",borderTop:"1px solid #e5e7eb",backgroundColor:"#f9fafb",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("a",{href:t.src,download:!0,style:{padding:"8px 16px",backgroundColor:"#10b981",color:"white",textDecoration:"none",borderRadius:"6px",fontSize:"14px",fontWeight:"500"},children:"Download"}),e.jsx("a",{href:t.src,target:"_blank",rel:"noopener noreferrer",style:{padding:"8px 16px",backgroundColor:"#6b7280",color:"white",textDecoration:"none",borderRadius:"6px",fontSize:"14px",fontWeight:"500"},children:"Open in New Tab"})]})]})})};function KF(t){if(typeof document>"u")return;let s=document.head||document.getElementsByTagName("head")[0],a=document.createElement("style");a.type="text/css",s.firstChild?s.insertBefore(a,s.firstChild):s.appendChild(a),a.styleSheet?a.styleSheet.cssText=t:a.appendChild(document.createTextNode(t))}KF(`:root{--toastify-color-light: #fff;--toastify-color-dark: #121212;--toastify-color-info: #3498db;--toastify-color-success: #07bc0c;--toastify-color-warning: #f1c40f;--toastify-color-error: hsl(6, 78%, 57%);--toastify-color-transparent: rgba(255, 255, 255, .7);--toastify-icon-color-info: var(--toastify-color-info);--toastify-icon-color-success: var(--toastify-color-success);--toastify-icon-color-warning: var(--toastify-color-warning);--toastify-icon-color-error: var(--toastify-color-error);--toastify-container-width: fit-content;--toastify-toast-width: 320px;--toastify-toast-offset: 16px;--toastify-toast-top: max(var(--toastify-toast-offset), env(safe-area-inset-top));--toastify-toast-right: max(var(--toastify-toast-offset), env(safe-area-inset-right));--toastify-toast-left: max(var(--toastify-toast-offset), env(safe-area-inset-left));--toastify-toast-bottom: max(var(--toastify-toast-offset), env(safe-area-inset-bottom));--toastify-toast-background: #fff;--toastify-toast-padding: 14px;--toastify-toast-min-height: 64px;--toastify-toast-max-height: 800px;--toastify-toast-bd-radius: 6px;--toastify-toast-shadow: 0px 4px 12px rgba(0, 0, 0, .1);--toastify-font-family: sans-serif;--toastify-z-index: 9999;--toastify-text-color-light: #757575;--toastify-text-color-dark: #fff;--toastify-text-color-info: #fff;--toastify-text-color-success: #fff;--toastify-text-color-warning: #fff;--toastify-text-color-error: #fff;--toastify-spinner-color: #616161;--toastify-spinner-color-empty-area: #e0e0e0;--toastify-color-progress-light: linear-gradient(to right, #4cd964, #5ac8fa, #007aff, #34aadc, #5856d6, #ff2d55);--toastify-color-progress-dark: #bb86fc;--toastify-color-progress-info: var(--toastify-color-info);--toastify-color-progress-success: var(--toastify-color-success);--toastify-color-progress-warning: var(--toastify-color-warning);--toastify-color-progress-error: var(--toastify-color-error);--toastify-color-progress-bgo: .2}.Toastify__toast-container{z-index:var(--toastify-z-index);-webkit-transform:translate3d(0,0,var(--toastify-z-index));position:fixed;width:var(--toastify-container-width);box-sizing:border-box;color:#fff;display:flex;flex-direction:column}.Toastify__toast-container--top-left{top:var(--toastify-toast-top);left:var(--toastify-toast-left)}.Toastify__toast-container--top-center{top:var(--toastify-toast-top);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--top-right{top:var(--toastify-toast-top);right:var(--toastify-toast-right);align-items:end}.Toastify__toast-container--bottom-left{bottom:var(--toastify-toast-bottom);left:var(--toastify-toast-left)}.Toastify__toast-container--bottom-center{bottom:var(--toastify-toast-bottom);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--bottom-right{bottom:var(--toastify-toast-bottom);right:var(--toastify-toast-right);align-items:end}.Toastify__toast{--y: 0;position:relative;touch-action:none;width:var(--toastify-toast-width);min-height:var(--toastify-toast-min-height);box-sizing:border-box;margin-bottom:1rem;padding:var(--toastify-toast-padding);border-radius:var(--toastify-toast-bd-radius);box-shadow:var(--toastify-toast-shadow);max-height:var(--toastify-toast-max-height);font-family:var(--toastify-font-family);z-index:0;display:flex;flex:1 auto;align-items:center;word-break:break-word}@media only screen and (max-width: 480px){.Toastify__toast-container{width:100vw;left:env(safe-area-inset-left);margin:0}.Toastify__toast-container--top-left,.Toastify__toast-container--top-center,.Toastify__toast-container--top-right{top:env(safe-area-inset-top);transform:translate(0)}.Toastify__toast-container--bottom-left,.Toastify__toast-container--bottom-center,.Toastify__toast-container--bottom-right{bottom:env(safe-area-inset-bottom);transform:translate(0)}.Toastify__toast-container--rtl{right:env(safe-area-inset-right);left:initial}.Toastify__toast{--toastify-toast-width: 100%;margin-bottom:0;border-radius:0}}.Toastify__toast-container[data-stacked=true]{width:var(--toastify-toast-width)}.Toastify__toast--stacked{position:absolute;width:100%;transform:translate3d(0,var(--y),0) scale(var(--s));transition:transform .3s}.Toastify__toast--stacked[data-collapsed] .Toastify__toast-body,.Toastify__toast--stacked[data-collapsed] .Toastify__close-button{transition:opacity .1s}.Toastify__toast--stacked[data-collapsed=false]{overflow:visible}.Toastify__toast--stacked[data-collapsed=true]:not(:last-child)>*{opacity:0}.Toastify__toast--stacked:after{content:"";position:absolute;left:0;right:0;height:calc(var(--g) * 1px);bottom:100%}.Toastify__toast--stacked[data-pos=top]{top:0}.Toastify__toast--stacked[data-pos=bot]{bottom:0}.Toastify__toast--stacked[data-pos=bot].Toastify__toast--stacked:before{transform-origin:top}.Toastify__toast--stacked[data-pos=top].Toastify__toast--stacked:before{transform-origin:bottom}.Toastify__toast--stacked:before{content:"";position:absolute;left:0;right:0;bottom:0;height:100%;transform:scaleY(3);z-index:-1}.Toastify__toast--rtl{direction:rtl}.Toastify__toast--close-on-click{cursor:pointer}.Toastify__toast-icon{margin-inline-end:10px;width:22px;flex-shrink:0;display:flex}.Toastify--animate{animation-fill-mode:both;animation-duration:.5s}.Toastify--animate-icon{animation-fill-mode:both;animation-duration:.3s}.Toastify__toast-theme--dark{background:var(--toastify-color-dark);color:var(--toastify-text-color-dark)}.Toastify__toast-theme--light,.Toastify__toast-theme--colored.Toastify__toast--default{background:var(--toastify-color-light);color:var(--toastify-text-color-light)}.Toastify__toast-theme--colored.Toastify__toast--info{color:var(--toastify-text-color-info);background:var(--toastify-color-info)}.Toastify__toast-theme--colored.Toastify__toast--success{color:var(--toastify-text-color-success);background:var(--toastify-color-success)}.Toastify__toast-theme--colored.Toastify__toast--warning{color:var(--toastify-text-color-warning);background:var(--toastify-color-warning)}.Toastify__toast-theme--colored.Toastify__toast--error{color:var(--toastify-text-color-error);background:var(--toastify-color-error)}.Toastify__progress-bar-theme--light{background:var(--toastify-color-progress-light)}.Toastify__progress-bar-theme--dark{background:var(--toastify-color-progress-dark)}.Toastify__progress-bar--info{background:var(--toastify-color-progress-info)}.Toastify__progress-bar--success{background:var(--toastify-color-progress-success)}.Toastify__progress-bar--warning{background:var(--toastify-color-progress-warning)}.Toastify__progress-bar--error{background:var(--toastify-color-progress-error)}.Toastify__progress-bar-theme--colored.Toastify__progress-bar--info,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--success,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--warning,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--error{background:var(--toastify-color-transparent)}.Toastify__close-button{color:#fff;position:absolute;top:6px;right:6px;background:transparent;outline:none;border:none;padding:0;cursor:pointer;opacity:.7;transition:.3s ease;z-index:1}.Toastify__toast--rtl .Toastify__close-button{left:6px;right:unset}.Toastify__close-button--light{color:#000;opacity:.3}.Toastify__close-button>svg{fill:currentColor;height:16px;width:14px}.Toastify__close-button:hover,.Toastify__close-button:focus{opacity:1}@keyframes Toastify__trackProgress{0%{transform:scaleX(1)}to{transform:scaleX(0)}}.Toastify__progress-bar{position:absolute;bottom:0;left:0;width:100%;height:100%;z-index:1;opacity:.7;transform-origin:left}.Toastify__progress-bar--animated{animation:Toastify__trackProgress linear 1 forwards}.Toastify__progress-bar--controlled{transition:transform .2s}.Toastify__progress-bar--rtl{right:0;left:initial;transform-origin:right;border-bottom-left-radius:initial}.Toastify__progress-bar--wrp{position:absolute;overflow:hidden;bottom:0;left:0;width:100%;height:5px;border-bottom-left-radius:var(--toastify-toast-bd-radius);border-bottom-right-radius:var(--toastify-toast-bd-radius)}.Toastify__progress-bar--wrp[data-hidden=true]{opacity:0}.Toastify__progress-bar--bg{opacity:var(--toastify-color-progress-bgo);width:100%;height:100%}.Toastify__spinner{width:20px;height:20px;box-sizing:border-box;border:2px solid;border-radius:100%;border-color:var(--toastify-spinner-color-empty-area);border-right-color:var(--toastify-spinner-color);animation:Toastify__spin .65s linear infinite}@keyframes Toastify__bounceInRight{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(3000px,0,0)}60%{opacity:1;transform:translate3d(-25px,0,0)}75%{transform:translate3d(10px,0,0)}90%{transform:translate3d(-5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutRight{20%{opacity:1;transform:translate3d(-20px,var(--y),0)}to{opacity:0;transform:translate3d(2000px,var(--y),0)}}@keyframes Toastify__bounceInLeft{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(-3000px,0,0)}60%{opacity:1;transform:translate3d(25px,0,0)}75%{transform:translate3d(-10px,0,0)}90%{transform:translate3d(5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutLeft{20%{opacity:1;transform:translate3d(20px,var(--y),0)}to{opacity:0;transform:translate3d(-2000px,var(--y),0)}}@keyframes Toastify__bounceInUp{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,3000px,0)}60%{opacity:1;transform:translate3d(0,-20px,0)}75%{transform:translate3d(0,10px,0)}90%{transform:translate3d(0,-5px,0)}to{transform:translateZ(0)}}@keyframes Toastify__bounceOutUp{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,-2000px,0)}}@keyframes Toastify__bounceInDown{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,-3000px,0)}60%{opacity:1;transform:translate3d(0,25px,0)}75%{transform:translate3d(0,-10px,0)}90%{transform:translate3d(0,5px,0)}to{transform:none}}@keyframes Toastify__bounceOutDown{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,2000px,0)}}.Toastify__bounce-enter--top-left,.Toastify__bounce-enter--bottom-left{animation-name:Toastify__bounceInLeft}.Toastify__bounce-enter--top-right,.Toastify__bounce-enter--bottom-right{animation-name:Toastify__bounceInRight}.Toastify__bounce-enter--top-center{animation-name:Toastify__bounceInDown}.Toastify__bounce-enter--bottom-center{animation-name:Toastify__bounceInUp}.Toastify__bounce-exit--top-left,.Toastify__bounce-exit--bottom-left{animation-name:Toastify__bounceOutLeft}.Toastify__bounce-exit--top-right,.Toastify__bounce-exit--bottom-right{animation-name:Toastify__bounceOutRight}.Toastify__bounce-exit--top-center{animation-name:Toastify__bounceOutUp}.Toastify__bounce-exit--bottom-center{animation-name:Toastify__bounceOutDown}@keyframes Toastify__zoomIn{0%{opacity:0;transform:scale3d(.3,.3,.3)}50%{opacity:1}}@keyframes Toastify__zoomOut{0%{opacity:1}50%{opacity:0;transform:translate3d(0,var(--y),0) scale3d(.3,.3,.3)}to{opacity:0}}.Toastify__zoom-enter{animation-name:Toastify__zoomIn}.Toastify__zoom-exit{animation-name:Toastify__zoomOut}@keyframes Toastify__flipIn{0%{transform:perspective(400px) rotateX(90deg);animation-timing-function:ease-in;opacity:0}40%{transform:perspective(400px) rotateX(-20deg);animation-timing-function:ease-in}60%{transform:perspective(400px) rotateX(10deg);opacity:1}80%{transform:perspective(400px) rotateX(-5deg)}to{transform:perspective(400px)}}@keyframes Toastify__flipOut{0%{transform:translate3d(0,var(--y),0) perspective(400px)}30%{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(-20deg);opacity:1}to{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(90deg);opacity:0}}.Toastify__flip-enter{animation-name:Toastify__flipIn}.Toastify__flip-exit{animation-name:Toastify__flipOut}@keyframes Toastify__slideInRight{0%{transform:translate3d(110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInLeft{0%{transform:translate3d(-110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInUp{0%{transform:translate3d(0,110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInDown{0%{transform:translate3d(0,-110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideOutRight{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(110%,var(--y),0)}}@keyframes Toastify__slideOutLeft{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(-110%,var(--y),0)}}@keyframes Toastify__slideOutDown{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,500px,0)}}@keyframes Toastify__slideOutUp{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,-500px,0)}}.Toastify__slide-enter--top-left,.Toastify__slide-enter--bottom-left{animation-name:Toastify__slideInLeft}.Toastify__slide-enter--top-right,.Toastify__slide-enter--bottom-right{animation-name:Toastify__slideInRight}.Toastify__slide-enter--top-center{animation-name:Toastify__slideInDown}.Toastify__slide-enter--bottom-center{animation-name:Toastify__slideInUp}.Toastify__slide-exit--top-left,.Toastify__slide-exit--bottom-left{animation-name:Toastify__slideOutLeft;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-right,.Toastify__slide-exit--bottom-right{animation-name:Toastify__slideOutRight;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-center{animation-name:Toastify__slideOutUp;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--bottom-center{animation-name:Toastify__slideOutDown;animation-timing-function:ease-in;animation-duration:.3s}@keyframes Toastify__spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}
`);var tx=t=>typeof t=="number"&&!isNaN(t),uu=t=>typeof t=="string",s2=t=>typeof t=="function",GF=t=>uu(t)||tx(t),VF=t=>N.isValidElement(t)||uu(t)||s2(t)||tx(t),$F=1,a2=()=>`${$F++}`,Oo=new Map,Ug=[],Ub=new Set,n2=()=>Oo.size>0,WF=(t,{containerId:s})=>{var a;return(a=Oo.get(s||1))==null?void 0:a.toasts.get(t)};function YF(t,s){var a;if(s)return!!((a=Oo.get(s))!=null&&a.isToastActive(t));let r=!1;return Oo.forEach(o=>{o.isToastActive(t)&&(r=!0)}),r}function XF(t){if(!n2()){Ug=Ug.filter(s=>t!=null&&s.options.toastId!==t);return}if(t==null||GF(t))Oo.forEach(s=>{s.removeToast(t)});else if(t&&("containerId"in t||"id"in t)){let s=Oo.get(t.containerId);s?s.removeToast(t.id):Oo.forEach(a=>{a.removeToast(t.id)})}}var JF=(t={})=>{Oo.forEach(s=>{s.props.limit&&(!t.containerId||s.id===t.containerId)&&s.clearQueue()})};function ZF(t,s){VF(t)&&(n2()||Ug.push({content:t,options:s}),Oo.forEach(a=>{a.buildToast(t,s)}))}function r2(t,s){Oo.forEach(a=>{(s==null||!(s!=null&&s.containerId)||s?.containerId===a.id)&&a.toggle(t,s?.id)})}function e6(t){return Ub.add(t),()=>{Ub.delete(t)}}function t6(t){return t&&(uu(t.toastId)||tx(t.toastId))?t.toastId:a2()}function yu(t,s){return ZF(t,s),s.toastId}function Hp(t,s){return{...s,type:s&&s.type||t,toastId:t6(s)}}function Pp(t){return(s,a)=>yu(s,Hp(t,a))}function wa(t,s){return yu(t,Hp("default",s))}wa.loading=(t,s)=>yu(t,Hp("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...s}));function s6(t,{pending:s,error:a,success:r},o){let l;s&&(l=uu(s)?wa.loading(s,o):wa.loading(s.render,{...o,...s}));let A={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},u=(p,m,v)=>{if(m==null){wa.dismiss(l);return}let b={type:p,...A,...o,data:v},x=uu(m)?{render:m}:m;return l?wa.update(l,{...b,...x}):wa(x.render,{...b,...x}),v},h=s2(t)?t():t;return h.then(p=>u("success",r,p)).catch(p=>u("error",a,p)),h}wa.promise=s6;wa.success=Pp("success");wa.info=Pp("info");wa.error=Pp("error");wa.warning=Pp("warning");wa.warn=wa.warning;wa.dark=(t,s)=>yu(t,Hp("default",{theme:"dark",...s}));function a6(t){XF(t)}wa.dismiss=a6;wa.clearWaitingQueue=JF;wa.isActive=YF;wa.update=(t,s={})=>{let a=WF(t,s);if(a){let{props:r,content:o}=a,l={delay:100,...r,...s,toastId:s.toastId||t,updateId:a2()};l.toastId!==t&&(l.staleId=t);let A=l.render||o;delete l.render,yu(A,l)}};wa.done=t=>{wa.update(t,{progress:1})};wa.onChange=e6;wa.play=t=>r2(!0,t);wa.pause=t=>r2(!1,t);const n6=()=>{const t=Wr(),[s,a]=N.useState(null),[r,o]=N.useState(!0),[l,A]=N.useState(""),[u,h]=N.useState(""),[p,m]=N.useState("view"),[v,b]=N.useState({first_name:"",last_name:"",email:"",phone:"",location:"",avatar_url:""}),[x,C]=N.useState(null),[Q,j]=N.useState(""),[B,L]=N.useState(0),[P,F]=N.useState(!1),[ee,K]=N.useState(""),[q,E]=N.useState(!1),[U,V]=N.useState({x:50,y:50,size:200}),[H,I]=N.useState(!1),[M,re]=N.useState({x:0,y:0}),G=Ar.useRef(null),Z=Ar.useRef(null),fe=Ar.useRef(!1),Ae=()=>{if(!("geolocation"in navigator)){wa.error("Geolocation not supported");return}navigator.geolocation.getCurrentPosition(async de=>{try{const{latitude:me,longitude:Be}=de.coords,mt=(await(await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${me}&lon=${Be}`)).json())?.display_name||`${me.toFixed(4)}, ${Be.toFixed(4)}`;b(Ve=>({...Ve,location:mt}))}catch{b(me=>({...me,location:`${de.coords.latitude.toFixed(4)}, ${de.coords.longitude.toFixed(4)}`}))}},()=>{wa.error("Unable to get location")})};N.useEffect(()=>{fe.current=!0;const de=async()=>{try{o(!0),A("");const me=JSON.parse(sessionStorage.getItem("user")||"{}");if(console.log("Session user:",me),!me.id){A("User not found. Please log in again."),setTimeout(()=>t("/login"),2e3);return}console.log("Fetching profile for user_id:",me.id);const Be=await fetch(`/buildhub/backend/api/homeowner/get_profile.php?user_id=${me.id}`,{method:"GET",headers:{"Content-Type":"application/json"},credentials:"include"});if(!Be.ok)throw new Error("Failed to fetch user data");const Qe=await Be.json();if(!Qe.success)throw new Error(Qe.message||"Failed to fetch user data");a(Qe.data),b({first_name:Qe.data.first_name||"",last_name:Qe.data.last_name||"",email:Qe.data.email||"",phone:Qe.data.phone||"",location:Qe.data.location||"",avatar_url:Qe.data.avatar_url||""}),Qe.data.avatar_url&&j(Qe.data.avatar_url)}catch(me){fe.current&&(console.error("Error fetching user data:",me),wa.error("Unable to load profile data."),A("Failed to load profile data. Please try again later."))}finally{fe.current&&o(!1)}};return fe.current&&de(),()=>{fe.current=!1}},[t]);const Ce=de=>{const{name:me,value:Be}=de.target;b(Qe=>({...Qe,[me]:Be}))},te=de=>{const me=de.target.files[0];if(!me)return;if(!["image/jpeg","image/png","image/gif","image/webp"].includes(me.type)){A("Please select a valid image file (JPEG, PNG, GIF, WEBP)");return}if(me.size>5*1024*1024){A("Image size should be less than 5MB");return}const Qe=new FileReader;Qe.onloadend=()=>{K(Qe.result||""),E(!0),V({x:50,y:50,size:200})},Qe.readAsDataURL(me),A("")},he=de=>{I(!0);const me=Z.current?.getBoundingClientRect();me&&(re({x:de.clientX-me.left-U.x,y:de.clientY-me.top-U.y}),de.preventDefault())},k=de=>{if(!H)return;const me=Z.current?.getBoundingClientRect();if(!me)return;const Be=Math.max(0,Math.min(de.clientX-me.left-M.x,me.width-U.size)),Qe=Math.max(0,Math.min(de.clientY-me.top-M.y,me.height-U.size));V(ut=>({...ut,x:Be,y:Qe}))},T=()=>I(!1),z=async()=>{try{const de=G.current,me=Z.current;if(!de||!me)return;const Be=me.getBoundingClientRect(),Qe=de.getBoundingClientRect(),ut=de.naturalWidth/Qe.width,mt=de.naturalHeight/Qe.height,Ve=Qe.left-Be.left,je=Qe.top-Be.top,Ft=Math.max(0,(U.x-Ve)*ut),Rt=Math.max(0,(U.y-je)*mt),at=U.size*Math.max(ut,mt),Xe=document.createElement("canvas"),pt=256;Xe.width=pt,Xe.height=pt;const xe=Xe.getContext("2d");xe.imageSmoothingQuality="high",xe.drawImage(de,Ft,Rt,at,at,0,0,pt,pt);const et=Xe.toDataURL("image/png");j(et),Xe.toBlob(Oe=>{if(!Oe)return;const Bt=new File([Oe],"avatar.png",{type:"image/png"});C(Bt)},"image/png",.92),E(!1),wa.success("Image cropped")}catch{wa.error("Failed to crop image")}},le=()=>{E(!1),K("")},X=async de=>{de.preventDefault();try{o(!0),A(""),h("");let me=v.avatar_url;if(x){F(!0);const mt=new FormData;mt.append("avatar",x),mt.append("user_id",s.id);const Ve=await fetch("/buildhub/backend/api/upload_avatar.php",{method:"POST",body:mt,credentials:"include"});if(!Ve.ok)throw new Error("Failed to upload profile picture");const je=await Ve.json();if(!je.success)throw new Error(je.message||"Failed to upload profile picture");me=je.avatar_url,F(!1),L(100),setTimeout(()=>L(0),1e3)}const Be=await fetch("/buildhub/backend/api/homeowner/update_profile.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:s.id,first_name:v.first_name,last_name:v.last_name,phone:v.phone,location:v.location,avatar_url:me}),credentials:"include"});if(!Be.ok){const mt=await Be.json().catch(()=>({}));throw new Error(mt.message||"Failed to update profile")}const Qe=await Be.json();if(!Qe.success)throw new Error(Qe.message||"Failed to update profile");const ut=JSON.parse(sessionStorage.getItem("user")||"{}");sessionStorage.setItem("user",JSON.stringify({...ut,...Qe.data,avatar_url:me})),h("Profile updated successfully!"),wa.success("Profile updated successfully!"),a(Qe.data),b({first_name:Qe.data.first_name||"",last_name:Qe.data.last_name||"",email:Qe.data.email||"",phone:Qe.data.phone||"",location:Qe.data.location||"",avatar_url:me||Qe.data.avatar_url||""}),m("view"),t("/homeowner-dashboard",{replace:!0})}catch(me){console.error("Error updating profile:",me);const Be=me.message||"Failed to update profile. Please try again later.";A(Be),wa.error(Be)}finally{o(!1),F(!1)}},W=()=>{m("view")};return r&&!s?e.jsx("div",{className:"profile-container",children:e.jsx("div",{className:"profile-card",children:e.jsx("div",{className:"loading-spinner",children:"Loading..."})})}):e.jsxs("div",{children:[e.jsx("div",{style:{padding:"10px 12px"},children:e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>t(-1),title:"Back",children:" Back"})}),e.jsxs("div",{className:"profile-container",children:[e.jsxs("div",{className:"profile-header",style:{background:"#eef2ff",border:"1px solid #e0e7ff",borderRadius:12,padding:"16px 18px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{children:[e.jsx("h1",{style:{margin:0,color:"#1e40af"},children:"My Profile"}),e.jsx("p",{style:{margin:"6px 0 0 0",color:"#475569"},children:"Manage your account and personal information"})]}),p==="view"?e.jsx("button",{className:"btn btn-primary",onClick:()=>m("edit"),style:{background:"#2563eb",borderColor:"#2563eb"},children:"Edit"}):e.jsx("button",{className:"btn btn-secondary",onClick:()=>m("view"),children:"Back"})]}),e.jsxs("div",{className:"profile-card",style:{border:"1px solid #e5e7eb",borderRadius:12},children:[l&&e.jsx("div",{className:"alert alert-error",children:l}),u&&e.jsx("div",{className:"alert alert-success",children:u}),p==="view"?e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"220px 1fr",gap:18},children:[e.jsx("div",{className:"profile-avatar-section",children:e.jsx("div",{className:"avatar-container",style:{width:180,height:180},children:e.jsx("img",{src:v.avatar_url||"/images/logo.png",alt:"Profile Avatar",className:"profile-avatar",style:{width:"100%",height:"100%",objectFit:"cover",borderRadius:"50%",border:"2px solid #e0e7ff"}})})}),e.jsx("div",{children:e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:12},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:12,color:"#64748b"},children:"First name"}),e.jsx("div",{style:{fontWeight:600,color:"#0f172a"},children:v.first_name||"-"})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:12,color:"#64748b"},children:"Last name"}),e.jsx("div",{style:{fontWeight:600,color:"#0f172a"},children:v.last_name||"-"})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:12,color:"#64748b"},children:"Email"}),e.jsx("div",{style:{fontWeight:600,color:"#0f172a"},children:v.email||"-"})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:12,color:"#64748b"},children:"Phone"}),e.jsx("div",{style:{fontWeight:600,color:"#0f172a"},children:v.phone||"-"})]}),e.jsxs("div",{style:{gridColumn:"1 / -1"},children:[e.jsx("div",{style:{fontSize:12,color:"#64748b"},children:"Location"}),e.jsx("div",{style:{fontWeight:600,color:"#0f172a"},children:v.location||"-"})]})]})})]}):e.jsxs("form",{onSubmit:X,children:[e.jsxs("div",{className:"profile-avatar-section",children:[e.jsxs("div",{className:"avatar-container",children:[e.jsx("img",{src:Q||v.avatar_url||"/images/logo.png",alt:"Profile Avatar",className:"profile-avatar",style:{width:"100%",height:"100%",objectFit:"cover",borderRadius:"50%"}}),e.jsx("div",{className:"avatar-overlay",children:e.jsx("label",{htmlFor:"avatar-upload",className:"avatar-upload-label",children:"Change Photo"})})]}),e.jsx("input",{type:"file",id:"avatar-upload",className:"avatar-upload",onChange:te,accept:"image/jpeg,image/png,image/gif,image/webp"}),P&&e.jsx("div",{className:"upload-progress",children:e.jsx("div",{className:"progress-bar",style:{width:`${B}%`}})})]}),e.jsxs("div",{className:"form-grid",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"first_name",children:"First Name"}),e.jsx("input",{type:"text",id:"first_name",name:"first_name",value:v.first_name,onChange:Ce,required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"last_name",children:"Last Name"}),e.jsx("input",{type:"text",id:"last_name",name:"last_name",value:v.last_name,onChange:Ce,required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"email",children:"Email"}),e.jsx("input",{type:"email",id:"email",name:"email",value:v.email,onChange:Ce,required:!0,disabled:!0}),e.jsx("small",{children:"Email cannot be changed"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"phone",children:"Phone Number"}),e.jsx("input",{type:"tel",id:"phone",name:"phone",value:v.phone,onChange:Ce,placeholder:"Enter your phone number"})]}),e.jsxs("div",{className:"form-group full-width",children:[e.jsx("label",{htmlFor:"location",children:"Location"}),e.jsxs("div",{className:"location-input-group",children:[e.jsx("input",{type:"text",id:"location",name:"location",value:v.location,onChange:Ce,placeholder:"Enter your city, state, or address"}),e.jsx("button",{type:"button",className:"btn btn-secondary location-detect-btn",onClick:Ae,title:"Detect my location",children:" Detect"})]})]})]}),e.jsxs("div",{className:"form-actions",children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:W,children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn btn-primary",disabled:r||P,children:r?"Saving...":"Save Changes"})]})]})]})]}),q&&e.jsx("div",{className:"form-modal",onMouseMove:k,onMouseUp:T,onMouseLeave:T,children:e.jsxs("div",{className:"form-content",style:{maxWidth:"min(820px, 96vw)"},children:[e.jsxs("div",{className:"form-header",children:[e.jsx("h3",{children:"Crop Profile Photo"}),e.jsx("p",{children:"Adjust the square to fit your avatar"})]}),e.jsxs("div",{ref:Z,style:{position:"relative",width:"100%",maxHeight:"70vh",border:"1px solid #e5e7eb",background:"#000",overflow:"hidden",borderRadius:8},children:[e.jsx("img",{ref:G,src:ee,alt:"Crop source",style:{display:"block",width:"100%",height:"auto",userSelect:"none"}}),e.jsx("div",{role:"button","aria-label":"Crop box",onMouseDown:he,style:{position:"absolute",left:U.x,top:U.y,width:U.size,height:U.size,border:"2px solid #3b82f6",boxShadow:"0 0 0 9999px rgba(0,0,0,0.35)",cursor:"move",borderRadius:6}})]}),e.jsxs("div",{className:"form-actions",children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:le,children:"Cancel"}),e.jsx("button",{type:"button",className:"btn btn-primary",onClick:z,children:"Crop & Use"})]})]})})]})},r6=({user:t,onLogout:s,onProfileClick:a,className:r="",showRole:o=!0,size:l="medium",position:A="bottom-right"})=>{const[u,h]=N.useState(!1),p=N.useRef(null);N.useEffect(()=>{const j=B=>{p.current&&!p.current.contains(B.target)&&h(!1)};return u&&document.addEventListener("mousedown",j),()=>{document.removeEventListener("mousedown",j)}},[u]);const m=()=>{h(!u)},v=()=>{h(!1)},b=()=>{h(!1),a&&a()},x=()=>{h(!1),s&&s()},C=()=>{if(t?.first_name&&t?.last_name)return`${t.first_name.charAt(0)}${t.last_name.charAt(0)}`.toUpperCase();if(t?.name){const j=t.name.split(" ");return`${j[0]?.[0]||""}${j[1]?.[0]||""}`.toUpperCase()}return t?.email?t.email.charAt(0).toUpperCase():"C"},Q=()=>{if(!o)return null;const j=t?.role||"Contractor";return j.charAt(0).toUpperCase()+j.slice(1)};return e.jsxs("div",{ref:p,className:`profile-button-container ${r}`,children:[e.jsxs("button",{className:`profile-button ${l}`,onClick:m,"aria-haspopup":"menu","aria-expanded":u,children:[e.jsx("div",{className:"profile-avatar",children:t?.avatar_url?e.jsx("img",{src:t.avatar_url,alt:"Profile",style:{width:"100%",height:"100%",borderRadius:"50%",objectFit:"cover"}}):C()}),e.jsx("div",{className:"profile-info",children:o&&e.jsx("div",{className:"profile-role",children:Q()})}),e.jsx("div",{className:`profile-arrow ${u?"open":""}`,children:""})]}),e.jsx(i6,{isOpen:u,onClose:v,user:t,position:A,onProfileSetup:b,onLogout:x})]})},i6=({isOpen:t,onClose:s,user:a,position:r,onProfileSetup:o,onLogout:l})=>{const A=N.useRef(null);return N.useEffect(()=>{const u=h=>{A.current&&!A.current.contains(h.target)&&s()};return t&&document.addEventListener("mousedown",u),()=>{document.removeEventListener("mousedown",u)}},[t,s]),t?e.jsx("div",{ref:A,className:`profile-popup ${r}`,children:e.jsxs("div",{className:"profile-popup-content",children:[e.jsxs("div",{className:"profile-popup-header",children:[e.jsx("div",{className:"profile-popup-avatar",children:a?.avatar_url?e.jsx("img",{src:a.avatar_url,alt:"Profile",style:{width:"100%",height:"100%",borderRadius:"50%",objectFit:"cover"}}):a?.first_name?.charAt(0)+a?.last_name?.charAt(0)}),e.jsxs("div",{className:"profile-popup-info",children:[e.jsxs("div",{className:"profile-popup-name",children:[a?.first_name," ",a?.last_name]}),e.jsx("div",{className:"profile-popup-role",children:a?.role?.charAt(0).toUpperCase()+a?.role?.slice(1)})]})]}),e.jsx("div",{className:"profile-popup-divider"}),e.jsxs("div",{className:"profile-popup-menu",children:[e.jsxs("button",{className:"profile-popup-item",onClick:o,children:[e.jsx("span",{className:"profile-popup-icon",children:""}),e.jsx("span",{children:"Profile Settings"})]}),e.jsxs("button",{className:"profile-popup-item logout",onClick:l,children:[e.jsx("span",{className:"profile-popup-icon",children:""}),e.jsx("span",{children:"Logout"})]})]})]})}):null},i2=({size:t="medium",className:s=""})=>{const a={small:"seal-small",medium:"seal-medium",large:"seal-large"};return e.jsx("div",{className:`buildhub-seal ${a[t]} ${s}`,children:e.jsx("div",{className:"seal-container",children:e.jsx("div",{className:"seal-border",children:e.jsxs("div",{className:"seal-inner",children:[e.jsx("div",{className:"seal-text",children:"BUILDHUB ESTIMATION"}),e.jsx("div",{className:"seal-icon",children:e.jsxs("div",{className:"building-icon",children:[e.jsx("div",{className:"building-pediment"}),e.jsx("div",{className:"building-frieze"}),e.jsxs("div",{className:"building-columns",children:[e.jsx("div",{className:"column"}),e.jsx("div",{className:"column"}),e.jsx("div",{className:"column"}),e.jsx("div",{className:"column"}),e.jsx("div",{className:"column"})]}),e.jsx("div",{className:"building-base"})]})})]})})})})},o6=({projectId:t,contractorId:s,onPhotosCaptured:a,onClose:r})=>{const o=Ni(),l=N.useRef(null),A=N.useRef(null),u=N.useRef(null),[h,p]=N.useState(!1),[m,v]=N.useState([]),[b,x]=N.useState(null),[C,Q]=N.useState(!1),[j,B]=N.useState(null),[L,P]=N.useState("environment"),[F,ee]=N.useState(!1),[K,q]=N.useState({});N.useEffect(()=>(E(),U(),()=>{j&&j.getTracks().forEach(k=>k.stop())}),[L]);const E=async()=>{try{j&&j.getTracks().forEach(T=>T.stop());const k=await navigator.mediaDevices.getUserMedia({video:{facingMode:L,width:{ideal:1920},height:{ideal:1080}},audio:!1});B(k),l.current&&(l.current.srcObject=k)}catch(k){console.error("Camera initialization error:",k),o.error("Unable to access camera. Please check permissions.")}},U=()=>{if(!navigator.geolocation){o.error("Geolocation is not supported by this browser");return}Q(!0),o.info(" Forcing high-accuracy GPS satellites (this may take 30-60 seconds)...");let k=null,T=0;const z=5,le=100,X=()=>{T++,navigator.geolocation.getCurrentPosition(async W=>{const{latitude:de,longitude:me,accuracy:Be,altitude:Qe,heading:ut,speed:mt}=W.coords;console.log(`GPS Attempt ${T}:`,{latitude:de,longitude:me,accuracy:Be,altitude:Qe,heading:ut,speed:mt,timestamp:W.timestamp});const Ve=Be<=le,je=de>=8&&de<=13&&me>=74&&me<=78;if(Ve&&je)try{const Ft=await H(de,me),Rt={latitude:de,longitude:me,accuracy:Be,altitude:Qe,heading:ut,speed:mt,placeName:Ft,timestamp:new Date().toISOString(),captureTime:new Date(W.timestamp).toISOString(),attempts:T};x(Rt),Q(!1),o.success(` High-accuracy GPS location captured: ${Ft} (${Math.round(Be)}m accuracy)`)}catch(Ft){console.error("Error getting place name:",Ft);const Rt={latitude:de,longitude:me,accuracy:Be,altitude:Qe,heading:ut,speed:mt,placeName:`${de.toFixed(6)}, ${me.toFixed(6)}`,timestamp:new Date().toISOString(),captureTime:new Date(W.timestamp).toISOString(),attempts:T};x(Rt),Q(!1),o.success(` GPS coordinates captured: ${de.toFixed(6)}, ${me.toFixed(6)} (${Math.round(Be)}m)`)}else(!k||Be<k.accuracy)&&(k={latitude:de,longitude:me,accuracy:Be,altitude:Qe,heading:ut,speed:mt,timestamp:W.timestamp,attempts:T},Be>le&&o.warning(` GPS accuracy: ${Math.round(Be)}m (trying to improve...)`),je||o.warning(" Location seems outside Kerala region (trying to improve...)"),T<z?setTimeout(()=>{o.info(` GPS attempt ${T+1}/${z} - seeking better accuracy...`),X()},3e3):k?V(k):(Q(!1),o.error(" Could not get accurate GPS location after multiple attempts")))},W=>{if(console.error(`GPS Attempt ${T} failed:`,W),T<z)setTimeout(()=>{o.warning(` GPS attempt ${T} failed, trying again (${T+1}/${z})...`),X()},2e3);else{Q(!1);let de=" GPS location failed after multiple attempts. ";switch(W.code){case W.PERMISSION_DENIED:de+="Please allow location access and ensure GPS is enabled on your device.";break;case W.POSITION_UNAVAILABLE:de+="GPS satellites not available. Try moving to an open area with clear sky view.";break;case W.TIMEOUT:de+="GPS timeout. Try moving to an area with better satellite reception.";break;default:de+="Please check your GPS settings and try again.";break}o.error(de)}},{enableHighAccuracy:!0,timeout:3e4,maximumAge:0})};X()},V=async k=>{try{const T=await H(k.latitude,k.longitude),z={latitude:k.latitude,longitude:k.longitude,accuracy:k.accuracy,altitude:k.altitude,heading:k.heading,speed:k.speed,placeName:T,timestamp:new Date().toISOString(),captureTime:new Date(k.timestamp).toISOString(),attempts:k.attempts};x(z),Q(!1),k.accuracy<=100?o.success(` Best GPS location: ${T} (${Math.round(k.accuracy)}m)`):o.warning(` Using best available GPS: ${T} (${Math.round(k.accuracy)}m accuracy - may not be precise)`)}catch(T){console.error("Error processing final location:",T);const z={latitude:k.latitude,longitude:k.longitude,accuracy:k.accuracy,altitude:k.altitude,heading:k.heading,speed:k.speed,placeName:`${k.latitude.toFixed(6)}, ${k.longitude.toFixed(6)}`,timestamp:new Date().toISOString(),captureTime:new Date(k.timestamp).toISOString(),attempts:k.attempts};x(z),Q(!1),o.warning(` GPS coordinates: ${k.latitude.toFixed(6)}, ${k.longitude.toFixed(6)} (${Math.round(k.accuracy)}m)`)}},H=async(k,T)=>{try{const le=((W,de)=>W>=8.2&&W<=12.8&&de>=74.8&&de<=77.4)(k,T);let X=null;try{const W=`https://nominatim.openstreetmap.org/reverse?format=json&lat=${k}&lon=${T}&zoom=16&addressdetails=1&accept-language=en&countrycodes=in`,de=await fetch(W,{headers:{"User-Agent":"BuildHub-GeoPhoto/1.0 (Kerala Location Service)"}});if(de.ok){const me=await de.json();if(me&&me.address){const Be=me.address;if(le){const Qe=I(Be,k,T);Qe&&(X=Qe)}X||(X=M(Be))}}}catch(W){console.log("Nominatim geocoding failed:",W)}if(!X||X.includes("Edathal")||X.length<10)try{const W=`https://nominatim.openstreetmap.org/reverse?format=json&lat=${k}&lon=${T}&zoom=14&addressdetails=1&accept-language=en&countrycodes=in&extratags=1`,de=await fetch(W,{headers:{"User-Agent":"BuildHub-GeoPhoto-Alt/1.0"}});if(de.ok){const me=await de.json();if(me&&me.address){const Be=le?I(me.address,k,T):M(me.address);Be&&Be!==X&&(X=Be)}}}catch(W){console.log("Alternative geocoding failed:",W)}if(le){const W=re(k,T);W&&X?X.toLowerCase().includes(W.district.toLowerCase())||(X=`${X}, ${W.district} District, Kerala`):W&&(X=`${W.area}, ${W.district} District, Kerala`)}if(X)return X=G(X),X.length>80&&(X=X.substring(0,77)+"..."),X;if(le){const W=re(k,T);if(W)return`${W.area}, ${W.district} District, Kerala`}return`${k.toFixed(6)}, ${T.toFixed(6)}`}catch(z){return console.error("All geocoding services failed:",z),`${k.toFixed(6)}, ${T.toFixed(6)}`}},I=(k,T,z)=>{const le=[];k.road&&le.push(k.road);const X=k.village||k.town||k.city||k.municipality||k.suburb||k.neighbourhood;X&&le.push(X),(k.county||k.state_district)&&le.push(k.county||k.state_district);let W=k.state_district||k.county;if(!W||!W.toLowerCase().includes("district")){const de=re(T,z);de&&(W=de.district+" District")}return W&&le.push(W),k.state&&k.state.toLowerCase().includes("kerala")&&le.push("Kerala"),le.length>0?le.join(", "):null},M=k=>{const T=[];return k.house_number&&k.road?T.push(`${k.house_number} ${k.road}`):k.road&&T.push(k.road),(k.neighbourhood||k.suburb||k.residential)&&T.push(k.neighbourhood||k.suburb||k.residential),(k.city||k.town||k.village||k.municipality)&&T.push(k.city||k.town||k.village||k.municipality),k.state&&T.push(k.state),T.length>0?T.join(", "):null},re=(k,T)=>{const z=[{district:"Kottayam",bounds:{minLat:9.3,maxLat:10,minLng:76.2,maxLng:76.9},areas:["Kottayam Town","Changanassery","Pala","Ettumanoor","Vaikom","Ponkunnam","Thodupuzha"]},{district:"Ernakulam",bounds:{minLat:9.8,maxLat:10.3,minLng:76,maxLng:76.8},areas:["Kochi","Ernakulam","Aluva","Perumbavoor","Muvattupuzha"]},{district:"Thiruvananthapuram",bounds:{minLat:8.2,maxLat:8.9,minLng:76.8,maxLng:77.4},areas:["Thiruvananthapuram","Neyyattinkara","Attingal","Varkala"]},{district:"Kollam",bounds:{minLat:8.7,maxLat:9.2,minLng:76.4,maxLng:77},areas:["Kollam","Karunagappally","Punalur","Paravur"]},{district:"Pathanamthitta",bounds:{minLat:9.1,maxLat:9.7,minLng:76.6,maxLng:77.2},areas:["Pathanamthitta","Adoor","Thiruvalla","Mallappally"]},{district:"Alappuzha",bounds:{minLat:9.4,maxLat:9.9,minLng:76.2,maxLng:76.7},areas:["Alappuzha","Cherthala","Kayamkulam","Mavelikkara"]},{district:"Idukki",bounds:{minLat:9.2,maxLat:10.3,minLng:76.7,maxLng:77.5},areas:["Thodupuzha","Munnar","Devikulam","Udumbanchola"]},{district:"Thrissur",bounds:{minLat:10.2,maxLat:10.8,minLng:75.9,maxLng:76.8},areas:["Thrissur","Chalakudy","Kodungallur","Irinjalakuda"]},{district:"Palakkad",bounds:{minLat:10.4,maxLat:11.2,minLng:76.2,maxLng:77},areas:["Palakkad","Ottappalam","Chittur","Mannarkkad"]},{district:"Malappuram",bounds:{minLat:10.9,maxLat:11.5,minLng:75.8,maxLng:76.4},areas:["Malappuram","Manjeri","Perinthalmanna","Tirur"]},{district:"Kozhikode",bounds:{minLat:11,maxLat:11.6,minLng:75.5,maxLng:76.2},areas:["Kozhikode","Vadakara","Koyilandy","Feroke"]},{district:"Wayanad",bounds:{minLat:11.6,maxLat:12,minLng:75.8,maxLng:76.5},areas:["Kalpetta","Mananthavady","Sulthan Bathery"]},{district:"Kannur",bounds:{minLat:11.8,maxLat:12.4,minLng:75,maxLng:75.8},areas:["Kannur","Thalassery","Payyanur","Iritty"]},{district:"Kasaragod",bounds:{minLat:12,maxLat:12.8,minLng:74.8,maxLng:75.4},areas:["Kasaragod","Kanhangad","Nileshwar","Uppala"]}],le={lat:9.6,lng:76.7};if(Math.sqrt(Math.pow(k-le.lat,2)+Math.pow(T-le.lng,2))<.1)return{district:"Kottayam",area:"Ponkunnam"};for(const W of z){const de=W.bounds;if(k>=de.minLat&&k<=de.maxLat&&T>=de.minLng&&T<=de.maxLng){let me=W.areas[0];return W.district==="Kottayam"&&(T>76.6?me="Ponkunnam":k<9.5?me="Changanassery":k>9.7?me="Vaikom":me="Kottayam Town"),{district:W.district,area:me}}}return null},G=k=>k.replace(/,\s*,/g,",").replace(/^,\s*/,"").replace(/,\s*$/,"").replace(/\s+/g," ").trim(),Z=()=>{if(!l.current||!A.current||!b){if(!b){o.error("Please wait for location to be captured first");return}o.error("Camera not ready");return}if(!b.latitude||!b.longitude){o.error("GPS coordinates not available. Please wait for location to be captured.");return}console.log("Capturing photo with location:",{latitude:b.latitude,longitude:b.longitude,placeName:b.placeName,accuracy:b.accuracy});const k=l.current,T=A.current,z=T.getContext("2d");T.width=k.videoWidth,T.height=k.videoHeight,z.drawImage(k,0,0,T.width,T.height),fe(z,T.width,T.height),T.toBlob(le=>{if(le){const X=Date.now(),W={...b,capturedAt:new Date().toISOString(),deviceInfo:{userAgent:navigator.userAgent,platform:navigator.platform,language:navigator.language}},de={id:X,blob:le,url:URL.createObjectURL(le),location:W,timestamp:new Date().toISOString(),filename:`geo_photo_${X}_${b.latitude.toFixed(6)}_${b.longitude.toFixed(6)}.jpg`};v(Be=>[...Be,de]),o.success(` Photo captured with GPS location: ${b.latitude.toFixed(6)}, ${b.longitude.toFixed(6)}`);const me=document.createElement("div");me.className="capture-flash",k.parentElement.appendChild(me),setTimeout(()=>{me.parentElement&&me.parentElement.removeChild(me)},300)}},"image/jpeg",.95)},fe=(k,T,z)=>{k.fillStyle="rgba(0, 0, 0, 0.85)",k.fillRect(0,z-160,T,160),k.fillStyle="rgba(255, 255, 255, 0.4)",k.fillRect(0,z-160,T,3),k.fillStyle="white",k.textAlign="left";const X=15;let W=z-160+20;k.font="bold 16px Arial",k.fillText(` ${b.placeName}`,X,W),W+=25,k.font="bold 18px Arial",k.fillStyle="#00FF00",k.fillText(` LAT: ${b.latitude.toFixed(6)}`,X,W),W+=22,k.fillStyle="#00FFFF",k.fillText(` LNG: ${b.longitude.toFixed(6)}`,X,W),W+=25,k.font="13px Arial",k.fillStyle="#FFFF00";const de=` GPS Accuracy: ${Math.round(b.accuracy)}m`;k.fillText(de,X,W),W+=18,k.fillStyle="white";const me=new Date(b.timestamp).toLocaleString("en-IN",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"});k.fillText(` ${me}`,X,W),b.altitude!==null&&b.altitude!==void 0&&(k.fillStyle="#87CEEB",k.fillText(` Alt: ${Math.round(b.altitude)}m`,T-150,z-160+45));const Be=200,Qe=50,ut=T-Be-10,mt=z-160+10;k.fillStyle="rgba(255, 255, 255, 0.2)",k.fillRect(ut,mt,Be,Qe),k.font="bold 12px Arial",k.fillStyle="#FFFFFF",k.textAlign="center",k.fillText("GPS COORDINATES",ut+Be/2,mt+15),k.font="bold 11px Courier New",k.fillStyle="#00FF00",k.fillText(`${b.latitude.toFixed(6)}`,ut+Be/2,mt+30),k.fillStyle="#00FFFF",k.fillText(`${b.longitude.toFixed(6)}`,ut+Be/2,mt+43),k.font="11px Arial",k.fillStyle="rgba(255, 255, 255, 0.8)",k.textAlign="right",k.fillText("BuildHub Geo Photo",T-X,z-8),k.textAlign="left"},Ae=k=>{Array.from(k.target.files).forEach(z=>{if(z.type.startsWith("image/")){const X={id:Date.now()+Math.random(),blob:z,url:URL.createObjectURL(z),location:b||{placeName:"Location not available"},timestamp:new Date().toISOString(),filename:z.name,isUploaded:!0};v(W=>[...W,X])}}),k.target.value=""},Ce=k=>{v(T=>{const z=T.filter(X=>X.id!==k),le=T.find(X=>X.id===k);return le&&URL.revokeObjectURL(le.url),z})},te=()=>{P(k=>k==="user"?"environment":"user")},he=async()=>{if(m.length===0){o.error("No photos to upload");return}if(!t||!s){o.error("Project or contractor information missing");return}ee(!0);const k=[];try{for(let le=0;le<m.length;le++){const X=m[le];q(de=>({...de,[X.id]:0}));const W=new FormData;W.append("photo",X.blob,X.filename),W.append("project_id",t),W.append("contractor_id",s),W.append("location_data",JSON.stringify(X.location)),W.append("timestamp",X.timestamp);try{const me=await(await fetch("/buildhub/backend/api/contractor/upload_geo_photo.php",{method:"POST",credentials:"include",body:W})).json();me.success?(k.push({success:!0,photoId:X.id,data:me.data}),q(Be=>({...Be,[X.id]:100}))):(k.push({success:!1,photoId:X.id,error:me.message}),q(Be=>({...Be,[X.id]:-1})))}catch(de){console.error("Upload error for photo:",X.id,de),k.push({success:!1,photoId:X.id,error:"Network error"}),q(me=>({...me,[X.id]:-1}))}}const T=k.filter(le=>le.success).length,z=k.filter(le=>!le.success).length;T>0&&(o.success(`${T} photo(s) uploaded successfully and sent to homeowner`),a&&a(k.filter(le=>le.success)),v([])),z>0&&o.error(`${z} photo(s) failed to upload`)}catch(T){console.error("Upload process error:",T),o.error("Failed to upload photos")}finally{ee(!1),q({})}};return e.jsxs("div",{className:"geo-photo-capture",children:[e.jsxs("div",{className:"capture-header",children:[e.jsx("h3",{children:" Geo-Located Photo Capture"}),e.jsx("button",{className:"close-btn",onClick:r,children:""})]}),e.jsx("div",{className:"location-status",children:C?e.jsxs("div",{className:"location-loading",children:[e.jsx("div",{className:"spinner"}),e.jsx("span",{children:" Getting high-accuracy GPS location (may take 30-60 seconds)..."})]}):b?e.jsxs("div",{className:`location-info ${b.accuracy<=100?"success":b.accuracy<=1e3?"warning":"error"}`,children:[e.jsxs("div",{className:"location-details",children:[e.jsxs("div",{className:"place-name",children:[" ",b.placeName]}),e.jsxs("div",{className:"coordinates",children:[e.jsx("strong",{children:"Lat:"})," ",b.latitude.toFixed(6)," | ",e.jsx("strong",{children:"Lng:"})," ",b.longitude.toFixed(6),""]}),e.jsxs("div",{className:"location-metadata",children:[e.jsxs("span",{className:`accuracy ${b.accuracy<=100?"good":b.accuracy<=1e3?"fair":"poor"}`,children:[" ",Math.round(b.accuracy),"m accuracy",b.accuracy>1e3&&" ( POOR - May be inaccurate)",b.accuracy<=100&&" ( GOOD)",b.accuracy>100&&b.accuracy<=1e3&&" ( FAIR)"]}),b.altitude&&e.jsxs("span",{className:"altitude",children:[" ",Math.round(b.altitude),"m altitude"]}),b.attempts&&e.jsxs("span",{className:"attempts",children:[" GPS attempts: ",b.attempts]})]}),e.jsxs("div",{className:"capture-time",children:[" Captured: ",new Date(b.timestamp).toLocaleString("en-IN")]}),b.accuracy>1e3&&e.jsxs("div",{className:"accuracy-warning",children:[" ",e.jsx("strong",{children:"Warning:"})," GPS accuracy is poor (",Math.round(b.accuracy/1e3),"km). This location may be incorrect. Try moving to an open area and refresh."]})]}),e.jsx("button",{className:"refresh-location-btn",onClick:U,children:" Get Better GPS"})]}):e.jsxs("div",{className:"location-info error",children:[e.jsx("span",{children:" GPS location not available"}),e.jsx("button",{className:"retry-location-btn",onClick:U,children:" Get GPS Location"})]})}),e.jsxs("div",{className:"camera-section",children:[e.jsxs("div",{className:"camera-container",children:[e.jsx("video",{ref:l,autoPlay:!0,playsInline:!0,muted:!0,className:"camera-video"}),e.jsx("canvas",{ref:A,style:{display:"none"}}),e.jsxs("div",{className:"camera-controls",children:[e.jsx("button",{className:"camera-switch-btn",onClick:te,title:"Switch Camera",children:""}),e.jsx("button",{className:"capture-btn",onClick:Z,disabled:!b||C,title:"Capture Photo",children:""}),e.jsx("button",{className:"upload-file-btn",onClick:()=>u.current?.click(),title:"Upload from Gallery",children:""})]})]}),e.jsx("input",{ref:u,type:"file",accept:"image/*",multiple:!0,onChange:Ae,style:{display:"none"}})]}),m.length>0&&e.jsxs("div",{className:"captured-photos",children:[e.jsxs("div",{className:"photos-header",children:[e.jsxs("h4",{children:[" Captured Photos (",m.length,")"]}),e.jsx("button",{className:"upload-all-btn",onClick:he,disabled:F,children:F?" Uploading...":" Send to Homeowner"})]}),e.jsx("div",{className:"photos-grid",children:m.map(k=>e.jsxs("div",{className:"photo-item",children:[e.jsxs("div",{className:"photo-preview",children:[e.jsx("img",{src:k.url,alt:"Captured with GPS overlay"}),e.jsx("button",{className:"remove-photo-btn",onClick:()=>Ce(k.id),disabled:F,children:""})]}),e.jsxs("div",{className:"photo-info",children:[e.jsxs("div",{className:"photo-location",children:[" ",k.location.placeName||"Location unavailable"]}),e.jsxs("div",{className:"photo-coordinates",children:[" LAT: ",k.location.latitude?.toFixed(6)," | LNG: ",k.location.longitude?.toFixed(6),""]}),e.jsxs("div",{className:"photo-accuracy",children:[" ",Math.round(k.location.accuracy||0),"m accuracy"]}),e.jsxs("div",{className:"photo-timestamp",children:[" ",new Date(k.timestamp).toLocaleString()]}),K[k.id]!==void 0&&e.jsx("div",{className:"upload-progress",children:K[k.id]===-1?e.jsx("span",{className:"upload-error",children:" Failed"}):K[k.id]===100?e.jsx("span",{className:"upload-success",children:" Uploaded"}):e.jsx("div",{className:"progress-bar",children:e.jsx("div",{className:"progress-fill",style:{width:`${K[k.id]}%`}})})})]})]},k.id))})]}),e.jsxs("div",{className:"capture-instructions",children:[e.jsx("h4",{children:" GPS Location Troubleshooting Guide"}),b&&b.accuracy>1e3&&e.jsxs("div",{style:{marginBottom:"20px",padding:"15px",background:"#fff3cd",borderRadius:"8px",border:"1px solid #ffc107"},children:[e.jsx("h5",{style:{margin:"0 0 10px 0",color:"#856404"},children:" Poor GPS Accuracy Detected"}),e.jsxs("p",{style:{margin:"0",color:"#856404"},children:["Your current GPS accuracy is ",Math.round(b.accuracy/1e3),"km, which means the location could be",Math.round(b.accuracy/1e3),"km away from your actual position. Follow the steps below to improve accuracy."]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"15px",marginBottom:"20px"},children:[e.jsxs("div",{style:{padding:"15px",background:"#e7f3ff",borderRadius:"8px",border:"1px solid #b8daff"},children:[e.jsx("h5",{style:{margin:"0 0 10px 0",color:"#004085"},children:" For Best GPS Accuracy:"}),e.jsxs("ul",{style:{margin:"0",paddingLeft:"20px",color:"#004085"},children:[e.jsx("li",{children:"Go outside to an open area"}),e.jsx("li",{children:"Ensure clear view of the sky"}),e.jsx("li",{children:"Stay away from tall buildings"}),e.jsx("li",{children:"Wait 30-60 seconds for GPS satellites"}),e.jsx("li",{children:"Keep your device still during capture"})]})]}),e.jsxs("div",{style:{padding:"15px",background:"#f8d7da",borderRadius:"8px",border:"1px solid #f5c6cb"},children:[e.jsx("h5",{style:{margin:"0 0 10px 0",color:"#721c24"},children:" Avoid These Locations:"}),e.jsxs("ul",{style:{margin:"0",paddingLeft:"20px",color:"#721c24"},children:[e.jsx("li",{children:"Inside buildings or rooms"}),e.jsx("li",{children:"Under bridges or overhangs"}),e.jsx("li",{children:"Near tall buildings or trees"}),e.jsx("li",{children:"In basements or underground"}),e.jsx("li",{children:"During heavy rain or storms"})]})]})]}),e.jsx("h5",{children:" Device Settings Check:"}),e.jsxs("ul",{children:[e.jsxs("li",{children:[" ",e.jsx("strong",{children:"Enable GPS:"})," Ensure GPS/Location Services are ON in device settings"]}),e.jsxs("li",{children:[" ",e.jsx("strong",{children:"High Accuracy Mode:"}),' Set location mode to "High Accuracy" or "GPS + Networks"']}),e.jsxs("li",{children:[" ",e.jsx("strong",{children:"Browser Permissions:"})," Allow location access for this website"]}),e.jsxs("li",{children:[" ",e.jsx("strong",{children:"Network:"})," Good mobile/WiFi signal helps initial GPS lock"]})]}),e.jsx("h5",{children:" Accuracy Guidelines:"}),e.jsxs("ul",{children:[e.jsxs("li",{children:[" ",e.jsx("strong",{children:"Excellent (5-20m):"})," Perfect for construction photos"]}),e.jsxs("li",{children:[" ",e.jsx("strong",{children:"Good (20-100m):"})," Acceptable for most purposes"]}),e.jsxs("li",{children:[" ",e.jsx("strong",{children:"Fair (100-1000m):"})," May be inaccurate, try to improve"]}),e.jsxs("li",{children:[" ",e.jsx("strong",{children:"Poor (1km+):"})," Likely wrong location, must improve"]})]}),e.jsxs("div",{style:{marginTop:"15px",padding:"12px",background:"#d1ecf1",borderRadius:"6px",fontSize:"0.85rem"},children:[e.jsx("strong",{children:" For Ponkunnam, Kottayam Users:"}),e.jsx("p",{style:{margin:"8px 0 0 0"},children:`If you're in Ponkunnam area and seeing locations like "Edathala, Aluva" (50km away), your device is using cell tower location instead of GPS. Move to an open area and wait for true GPS satellites to lock onto your actual location.`})]})]})]})},l6=({contractorId:t,projectId:s,homeownerId:a,userRole:r="contractor"})=>{const[o,l]=N.useState([]),[A,u]=N.useState(!0),[h,p]=N.useState(null),[m,v]=N.useState(!1),[b,x]=N.useState(null);N.useEffect(()=>{C()},[t,s,a,r]);const C=async()=>{try{u(!0);let F;r==="homeowner"?(F=`http://localhost/buildhub/backend/api/homeowner/get_progress_updates.php?homeowner_id=${a}`,s&&(F+=`&project_id=${s}`)):(F=`http://localhost/buildhub/backend/api/contractor/get_progress_updates.php?contractor_id=${t}`,s&&(F+=`&project_id=${s}`));const K=await(await fetch(F,{credentials:"include"})).json();K.success?l(K.data.progress_updates||[]):console.error("Failed to load progress updates:",K.message)}catch(F){console.error("Error loading progress updates:",F)}finally{u(!1)}},Q=F=>{x(F),v(!0)},j=()=>{v(!1),x(null)},B=F=>({Foundation:"",Structure:"",Brickwork:"",Roofing:"",Electrical:"",Plumbing:"",Finishing:"",Other:""})[F]||"",L=F=>{switch(F){case"Completed":return"#28a745";case"In Progress":return"#ffc107";case"Not Started":return"#6c757d";default:return"#6c757d"}},P=F=>new Date(F).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return A?e.jsxs("div",{className:"progress-timeline-loading",children:[e.jsx("div",{className:"loading-spinner"}),e.jsx("p",{children:"Loading progress updates..."})]}):o.length===0?e.jsx("div",{className:"progress-timeline-empty",children:e.jsxs("div",{className:"empty-state",children:[e.jsx("h3",{children:"No Progress Updates Yet"}),e.jsx("p",{children:r==="contractor"?"Start submitting progress updates to keep homeowners informed.":"Your contractor hasn't submitted any progress updates yet."})]})}):e.jsxs("div",{className:"progress-timeline",children:[e.jsxs("div",{className:"timeline-header",children:[e.jsx("h3",{children:"Construction Progress Timeline"}),e.jsxs("p",{children:[o.length," update",o.length!==1?"s":""]})]}),e.jsx("div",{className:"timeline-container",children:o.map((F,ee)=>e.jsxs("div",{className:"timeline-item",children:[e.jsxs("div",{className:"timeline-marker",children:[e.jsx("div",{className:"timeline-dot",style:{backgroundColor:L(F.stage_status)},children:B(F.stage_name)}),ee<o.length-1&&e.jsx("div",{className:"timeline-line"})]}),e.jsx("div",{className:"timeline-content",children:e.jsxs("div",{className:"update-card",children:[e.jsxs("div",{className:"update-header",children:[e.jsxs("div",{className:"update-title",children:[e.jsx("h4",{children:F.stage_name}),e.jsx("span",{className:`status-badge ${F.status_class}`,style:{backgroundColor:L(F.stage_status)},children:F.stage_status})]}),e.jsxs("div",{className:"update-meta",children:[e.jsx("span",{className:"update-date",children:P(F.created_at)}),r==="homeowner"&&e.jsxs("span",{className:"contractor-name",children:["by ",F.contractor_first_name," ",F.contractor_last_name]})]})]}),e.jsx("div",{className:"update-progress",children:e.jsxs("div",{className:"progress-bar-container",children:[e.jsx("div",{className:"progress-bar",children:e.jsx("div",{className:"progress-fill",style:{width:`${F.completion_percentage}%`,backgroundColor:L(F.stage_status)}})}),e.jsxs("span",{className:"progress-text",children:[F.completion_percentage,"%"]})]})}),F.remarks&&e.jsxs("div",{className:"update-remarks",children:[e.jsx("h5",{children:"Work Description:"}),e.jsx("p",{children:F.remarks})]}),F.delay_reason&&e.jsxs("div",{className:"update-delay",children:[e.jsx("h5",{children:" Delay Reported:"}),e.jsxs("p",{children:[e.jsx("strong",{children:"Reason:"})," ",F.delay_reason]}),F.delay_description&&e.jsxs("p",{children:[e.jsx("strong",{children:"Details:"})," ",F.delay_description]})]}),F.photos&&F.photos.length>0&&e.jsxs("div",{className:"update-photos",children:[e.jsxs("h5",{children:["Progress Photos (",F.photos.length,")"]}),e.jsx("div",{className:"photo-gallery",children:F.photo_urls.map((K,q)=>e.jsx("div",{className:"photo-thumbnail-container",children:e.jsx("img",{src:K,alt:`Progress photo ${q+1}`,className:"photo-thumbnail",onClick:()=>Q(K),loading:"lazy"})},q))})]}),!F.location_verified&&F.latitude&&e.jsx("div",{className:"location-warning",children:" Location verification pending"})]})})]},F.id))}),m&&b&&e.jsx("div",{className:"photo-modal-overlay",onClick:j,children:e.jsxs("div",{className:"photo-modal",children:[e.jsx("button",{className:"photo-modal-close",onClick:j,children:""}),e.jsx("img",{src:b,alt:"Progress photo",className:"photo-modal-image"})]})})]})},o2=({projectId:t,stageName:s,contractorId:a,completionPercentage:r=0,workDescription:o="",onPaymentRequested:l,showStageSelector:A=!1})=>{const u=Ni(),[h,p]=N.useState(null),[m,v]=N.useState(!1),[b,x]=N.useState(!0),[C,Q]=N.useState(!1),[j,B]=N.useState(s||""),[L,P]=N.useState([]),[F,ee]=N.useState({requested_amount:"",work_description:"",contractor_notes:"",completion_percentage:r}),[K,q]=N.useState({});N.useEffect(()=>{A&&t&&E()},[A,t]),N.useEffect(()=>{t&&(j||s)&&U()},[t,j,s]),N.useEffect(()=>{ee(M=>({...M,work_description:o,completion_percentage:r}))},[o,r]);const E=async()=>{try{const re=await(await fetch(`/buildhub/backend/api/contractor/get_available_stages.php?project_id=${t}`,{credentials:"include"})).json();re.success?P(re.data.stages||[]):(console.warn("Failed to load available stages:",re.message),P([{stage_name:"Foundation",typical_percentage:20},{stage_name:"Structure",typical_percentage:25},{stage_name:"Brickwork",typical_percentage:15},{stage_name:"Roofing",typical_percentage:15},{stage_name:"Electrical",typical_percentage:8},{stage_name:"Plumbing",typical_percentage:7},{stage_name:"Finishing",typical_percentage:10}]))}catch(M){console.error("Error loading available stages:",M),P([{stage_name:"Foundation",typical_percentage:20},{stage_name:"Structure",typical_percentage:25},{stage_name:"Brickwork",typical_percentage:15},{stage_name:"Roofing",typical_percentage:15},{stage_name:"Electrical",typical_percentage:8},{stage_name:"Plumbing",typical_percentage:7},{stage_name:"Finishing",typical_percentage:10}])}},U=async()=>{const M=j||s;if(M)try{x(!0);const G=await(await fetch(`/buildhub/backend/api/contractor/get_stage_payment_info.php?project_id=${t}&stage_name=${encodeURIComponent(M)}`,{credentials:"include"})).json();G.success?(p(G.data),G.data.can_request&&G.data.suggested_amount>0&&ee(Z=>({...Z,requested_amount:G.data.suggested_amount.toString()}))):u.error("Failed to load payment information: "+G.message)}catch(re){console.error("Error loading payment info:",re),u.error("Error loading payment information")}finally{x(!1)}},V=M=>{const{name:re,value:G}=M.target;ee(Z=>({...Z,[re]:G})),K[re]&&q(Z=>({...Z,[re]:null}))},H=()=>{const M={};return(!F.requested_amount||parseFloat(F.requested_amount)<=0)&&(M.requested_amount="Please enter a valid amount"),parseFloat(F.requested_amount)>h?.project_info?.remaining_amount&&(M.requested_amount="Amount exceeds remaining project budget"),(!F.work_description||F.work_description.trim().length<20)&&(M.work_description="Work description must be at least 20 characters"),(F.completion_percentage<0||F.completion_percentage>100)&&(M.completion_percentage="Completion percentage must be between 0-100"),q(M),Object.keys(M).length===0},I=async M=>{if(M.preventDefault(),!!H()){v(!0);try{const G=await(await fetch("/buildhub/backend/api/contractor/submit_stage_payment_request.php",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({project_id:t,stage_name:s,requested_amount:parseFloat(F.requested_amount),work_description:F.work_description,completion_percentage:parseFloat(F.completion_percentage),contractor_notes:F.contractor_notes})})).json();G.success?(u.success("Payment request submitted successfully!"),ee({requested_amount:"",work_description:"",contractor_notes:"",completion_percentage:0}),Q(!1),await U(),l&&l(G.data)):u.error("Failed to submit payment request: "+G.message)}catch(re){console.error("Error submitting payment request:",re),u.error("Error submitting payment request")}finally{v(!1)}}};return b?e.jsx("div",{className:"stage-payment-loading",children:e.jsx("div",{className:"loading-spinner",children:" Loading payment information..."})}):h?e.jsxs("div",{className:"stage-payment-request",children:[A&&e.jsxs("div",{className:"stage-selector-section",children:[e.jsx("h6",{children:" Select Construction Stage"}),e.jsxs("div",{className:"stage-selector-container",children:[e.jsxs("select",{value:j,onChange:M=>B(M.target.value),className:"stage-select",children:[e.jsx("option",{value:"",children:"Choose a construction stage..."}),L.map(M=>e.jsxs("option",{value:M.stage_name,disabled:M.has_existing_request&&M.existing_status!=="rejected",children:[M.stage_name," (",M.typical_percentage,"%)",M.has_existing_request&&` - ${M.existing_status.toUpperCase()}`]},M.id))]}),j&&e.jsx("div",{className:"selected-stage-info",children:(()=>{const M=L.find(re=>re.stage_name===j);return M?e.jsxs("div",{className:"stage-details",children:[e.jsxs("span",{children:[e.jsx("strong",{children:"Stage:"})," ",M.stage_name]}),e.jsxs("span",{children:[e.jsx("strong",{children:"Typical %:"})," ",M.typical_percentage,"%"]}),M.description&&e.jsxs("span",{children:[e.jsx("strong",{children:"Description:"})," ",M.description]}),M.has_existing_request&&e.jsxs("span",{className:`existing-status ${M.existing_status}`,children:[e.jsx("strong",{children:"Status:"})," ",M.existing_status.toUpperCase(),M.existing_status==="rejected"&&" (Can request again)"]})]}):null})()})]})]}),(j||!A&&s)&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"payment-summary",children:[e.jsx("h6",{children:" Project Payment Summary"}),e.jsxs("div",{className:"summary-grid",children:[e.jsxs("div",{className:"summary-item",children:[e.jsx("span",{className:"label",children:"Total Project Cost:"}),e.jsxs("span",{className:"value",children:["",h.project_info.total_cost.toLocaleString()]})]}),e.jsxs("div",{className:"summary-item",children:[e.jsx("span",{className:"label",children:"Amount Paid:"}),e.jsxs("span",{className:"value paid",children:["",h.project_info.total_paid.toLocaleString()]})]}),e.jsxs("div",{className:"summary-item",children:[e.jsx("span",{className:"label",children:"Pending Approval:"}),e.jsxs("span",{className:"value pending",children:["",h.project_info.total_pending.toLocaleString()]})]}),e.jsxs("div",{className:"summary-item",children:[e.jsx("span",{className:"label",children:"Remaining Budget:"}),e.jsxs("span",{className:"value remaining",children:["",h.project_info.remaining_amount.toLocaleString()]})]})]}),e.jsxs("div",{className:"payment-progress-bar",children:[e.jsxs("div",{className:"progress-segments",children:[e.jsx("div",{className:"progress-segment paid",style:{width:`${h.payment_summary.paid_percentage}%`},title:`Paid: ${h.payment_summary.paid_percentage.toFixed(1)}%`}),e.jsx("div",{className:"progress-segment pending",style:{width:`${h.payment_summary.pending_percentage}%`},title:`Pending: ${h.payment_summary.pending_percentage.toFixed(1)}%`}),e.jsx("div",{className:"progress-segment remaining",style:{width:`${h.payment_summary.remaining_percentage}%`},title:`Remaining: ${h.payment_summary.remaining_percentage.toFixed(1)}%`})]}),e.jsxs("div",{className:"progress-labels",children:[e.jsxs("span",{className:"paid-label",children:["Paid (",h.payment_summary.paid_percentage.toFixed(1),"%)"]}),e.jsxs("span",{className:"pending-label",children:["Pending (",h.payment_summary.pending_percentage.toFixed(1),"%)"]}),e.jsxs("span",{className:"remaining-label",children:["Remaining (",h.payment_summary.remaining_percentage.toFixed(1),"%)"]})]})]})]}),h.stage_info&&e.jsxs("div",{className:"stage-info",children:[e.jsxs("h6",{children:[" ",s," Stage Payment"]}),e.jsxs("div",{className:"stage-details",children:[e.jsx("div",{className:"stage-description",children:h.stage_info.description}),e.jsxs("div",{className:"stage-typical",children:["Typical percentage for this stage: ",e.jsxs("strong",{children:[h.stage_info.typical_percentage,"%"]}),"(",h.suggested_amount.toLocaleString(),")"]})]})]}),h.existing_requests.length>0&&e.jsxs("div",{className:"existing-requests",children:[e.jsxs("h6",{children:[" Previous Requests for ",s]}),e.jsx("div",{className:"requests-list",children:h.existing_requests.map(M=>e.jsxs("div",{className:`request-item ${M.status}`,children:[e.jsxs("div",{className:"request-header",children:[e.jsxs("span",{className:"request-amount",children:["",parseFloat(M.requested_amount).toLocaleString()]}),e.jsx("span",{className:`request-status ${M.status}`,children:M.status.charAt(0).toUpperCase()+M.status.slice(1)})]}),e.jsxs("div",{className:"request-details",children:[e.jsxs("div",{className:"request-date",children:["Requested: ",new Date(M.request_date).toLocaleDateString()]}),e.jsxs("div",{className:"request-percentage",children:[M.completion_percentage,"% complete, ",M.percentage_of_total.toFixed(1),"% of total cost"]})]}),M.rejection_reason&&e.jsxs("div",{className:"rejection-reason",children:[e.jsx("strong",{children:"Rejection reason:"})," ",M.rejection_reason]})]},M.id))})]}),h.can_request?e.jsx("div",{className:"payment-request-form",children:C?e.jsxs("form",{onSubmit:I,className:"payment-form",children:[e.jsxs("h6",{children:[" Request Payment for ",s," Stage"]}),e.jsxs("div",{className:`form-group ${K.requested_amount?"error":""}`,children:[e.jsx("label",{htmlFor:"requested_amount",children:"Requested Amount () *"}),e.jsx("input",{type:"number",id:"requested_amount",name:"requested_amount",value:F.requested_amount,onChange:V,min:"1",step:"0.01",placeholder:"Enter amount",required:!0}),h.suggested_amount>0&&e.jsxs("div",{className:"field-info",children:["Suggested: ",h.suggested_amount.toLocaleString(),"(",h.suggested_percentage,"% of total cost)"]}),K.requested_amount&&e.jsx("div",{className:"field-error",children:K.requested_amount})]}),e.jsxs("div",{className:`form-group ${K.completion_percentage?"error":""}`,children:[e.jsx("label",{htmlFor:"completion_percentage",children:"Stage Completion Percentage *"}),e.jsx("input",{type:"number",id:"completion_percentage",name:"completion_percentage",value:F.completion_percentage,onChange:V,min:"0",max:"100",step:"0.1",required:!0}),e.jsxs("div",{className:"field-info",children:["Percentage of ",s," stage completed"]}),K.completion_percentage&&e.jsx("div",{className:"field-error",children:K.completion_percentage})]}),e.jsxs("div",{className:`form-group ${K.work_description?"error":""}`,children:[e.jsx("label",{htmlFor:"work_description",children:"Work Description *"}),e.jsx("textarea",{id:"work_description",name:"work_description",value:F.work_description,onChange:V,placeholder:"Describe the work completed for this stage...",rows:"4",required:!0}),e.jsxs("div",{className:"field-info",children:[F.work_description.length,"/1000 characters (minimum 20 required)"]}),K.work_description&&e.jsx("div",{className:"field-error",children:K.work_description})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"contractor_notes",children:"Additional Notes"}),e.jsx("textarea",{id:"contractor_notes",name:"contractor_notes",value:F.contractor_notes,onChange:V,placeholder:"Any additional notes for the homeowner...",rows:"2"}),e.jsx("div",{className:"field-info",children:"Optional notes about the payment request"})]}),e.jsxs("div",{className:"form-actions",children:[e.jsx("button",{type:"button",onClick:()=>Q(!1),className:"cancel-btn",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:m,className:"submit-btn",children:m?"Submitting...":"Submit Payment Request"})]})]}):e.jsxs("div",{className:"request-prompt",children:[e.jsxs("button",{type:"button",onClick:()=>Q(!0),className:"request-payment-btn",children:[" Request Payment for ",s," Stage"]}),e.jsxs("div",{className:"request-info",children:["Complete the ",s," stage work and request payment from the homeowner"]})]})}):e.jsx("div",{className:"cannot-request",children:e.jsxs("div",{className:"info-message",children:[" Cannot request payment for ",j||s," stage.",h.existing_requests.some(M=>M.status==="pending")?"There is already a pending request for this stage.":"Please complete the stage work first."]})})]}),A&&!j&&e.jsx("div",{className:"no-stage-selected",children:e.jsx("div",{className:"info-message",children:" Please select a construction stage to request payment"})})]}):e.jsx("div",{className:"stage-payment-error",children:e.jsx("div",{className:"error-message",children:"Unable to load payment information"})})},c6=({contractorId:t,onUpdateSubmitted:s})=>{const a=Ni(),r=N.useRef(null),[o,l]=N.useState([]),[A,u]=N.useState(""),[h,p]=N.useState("daily"),[m,v]=N.useState(!1),[b,x]=N.useState(!0),[C,Q]=N.useState({latitude:null,longitude:null}),[j,B]=N.useState(!1),[L,P]=N.useState({}),[F,ee]=N.useState({}),[K,q]=N.useState(!1),[E,U]=N.useState({update_date:new Date().toISOString().split("T")[0],construction_stage:"",work_done_today:"",incremental_completion_percentage:"",working_hours:"8",materials_used:"",weather_condition:"",site_issues:"",labour_data:[]}),[V,H]=N.useState({week_start_date:"",week_end_date:"",stages_worked:[],delays_and_reasons:"",weekly_remarks:""}),[I,M]=N.useState({report_month:new Date().getMonth()+1,report_year:new Date().getFullYear(),planned_progress_percentage:"",milestones_achieved:[],delay_explanation:"",contractor_remarks:""}),[re,G]=N.useState([]),[Z,fe]=N.useState({errors:[],warnings:[]}),[Ae,Ce]=N.useState([]),[te,he]=N.useState(!1),[k,T]=N.useState(!1),[z,le]=N.useState([]),[X,W]=N.useState(null),[de,me]=N.useState(!1),[Be,Qe]=N.useState([]),ut=["Foundation","Structure","Brickwork","Roofing","Electrical","Plumbing","Finishing","Other"],mt=["Sunny","Cloudy","Rainy","Stormy","Foggy","Hot","Cold","Windy"],Ve=["excellent","good","average","poor","needs_improvement"],je={selectedProject:{required:!0,message:"Please select a project"},update_date:{required:!0,validate:oe=>{const we=new Date(oe),Ee=new Date,Re=7,We=1,Lt=Ee-we,Vt=Math.ceil(Lt/(1e3*60*60*24));return Vt>Re?`Date cannot be more than ${Re} days in the past`:Vt<-We?`Date cannot be more than ${We} day in the future`:null}},construction_stage:{required:!0,message:"Please select a construction stage"},work_done_today:{required:!0,minLength:10,maxLength:1e3,validate:oe=>oe.length<10?"Work description must be at least 10 characters":oe.length>1e3?"Work description cannot exceed 1000 characters":/[a-zA-Z]/.test(oe)?null:"Work description must contain letters"},incremental_completion_percentage:{required:!0,validate:oe=>{const we=parseFloat(oe);return isNaN(we)?"Completion percentage must be a valid number":we<0?"Completion percentage cannot be negative":we>100?"Completion percentage cannot exceed 100%":we>20?"Daily incremental progress should typically not exceed 20%":null}},working_hours:{required:!0,validate:oe=>{const we=parseFloat(oe);return isNaN(we)?"Working hours must be a valid number":we<0?"Working hours cannot be negative":we>16?"Working hours cannot exceed 16 hours per day":we<4&&we>0?"Working hours should be at least 4 hours if work was done":null}},weather_condition:{required:!0,message:"Please select weather condition"},materials_used:{validate:oe=>oe&&oe.length>500?"Materials description cannot exceed 500 characters":null},site_issues:{validate:oe=>oe&&oe.length>1e3?"Site issues description cannot exceed 1000 characters":null},labour_worker_type:{required:!0,message:"Please select worker type"},labour_worker_count:{required:!0,validate:oe=>{const we=parseInt(oe);return isNaN(we)?"Worker count must be a valid number":we<0?"Worker count cannot be negative":we>100?"Worker count seems too high (max 100)":null}},labour_hours_worked:{required:!0,validate:oe=>{const we=parseFloat(oe);return isNaN(we)?"Hours worked must be a valid number":we<0?"Hours worked cannot be negative":we>12?"Regular hours cannot exceed 12 hours":null}},labour_overtime_hours:{validate:oe=>{const we=parseFloat(oe);return isNaN(we)?"Overtime hours must be a valid number":we<0?"Overtime hours cannot be negative":we>8?"Overtime hours cannot exceed 8 hours":null}},labour_absent_count:{validate:oe=>{const we=parseInt(oe);return isNaN(we)?"Absent count must be a valid number":we<0?"Absent count cannot be negative":we>50?"Absent count seems too high":null}},labour_productivity_rating:{validate:oe=>{const we=parseInt(oe);return isNaN(we)?"Productivity rating must be a valid number":we<1||we>5?"Productivity rating must be between 1 and 5":null}},labour_remarks:{validate:oe=>oe&&oe.length>500?"Remarks cannot exceed 500 characters":null},week_start_date:{required:!0,validate:(oe,we)=>{const Ee=new Date(oe),Re=new Date(we.week_end_date);return Re&&Ee>=Re?"Start date must be before end date":Ee.getDay()!==1?"Week should typically start on Monday":null}},week_end_date:{required:!0,validate:(oe,we)=>{const Ee=new Date(we.week_start_date),Re=new Date(oe);return Ee&&Re<=Ee?"End date must be after start date":(Re-Ee)/(1e3*60*60*24)>7?"Week duration cannot exceed 7 days":null}},stages_worked:{required:!0,validate:oe=>!Array.isArray(oe)||oe.length===0?"Please select at least one construction stage":null},weekly_remarks:{required:!0,minLength:20,validate:oe=>oe.length<20?"Weekly remarks must be at least 20 characters":oe.length>2e3?"Weekly remarks cannot exceed 2000 characters":null},delays_and_reasons:{validate:oe=>oe&&oe.length>1e3?"Delays description cannot exceed 1000 characters":null},report_month:{required:!0,validate:oe=>{const we=parseInt(oe);return isNaN(we)||we<1||we>12?"Please select a valid month":null}},report_year:{required:!0,validate:oe=>{const we=parseInt(oe),Ee=new Date().getFullYear();return isNaN(we)?"Year must be a valid number":we<2020?"Year cannot be before 2020":we>Ee+1?`Year cannot be after ${Ee+1}`:null}},planned_progress_percentage:{required:!0,validate:oe=>{const we=parseFloat(oe);return isNaN(we)?"Planned progress must be a valid number":we<0?"Planned progress cannot be negative":we>100?"Planned progress cannot exceed 100%":null}},contractor_remarks:{required:!0,minLength:50,validate:oe=>oe.length<50?"Contractor remarks must be at least 50 characters":oe.length>3e3?"Contractor remarks cannot exceed 3000 characters":null},delay_explanation:{validate:oe=>oe&&oe.length>2e3?"Delay explanation cannot exceed 2000 characters":null}},Ft=(oe,we,Ee={})=>{const Re=je[oe];return Re?Re.required&&(!we||typeof we=="string"&&we.trim()==="")?Re.message||`${oe} is required`:Re.validate?Re.validate(we,Ee):null:null},Rt=oe=>{const we={};if(oe==="daily"){const Ee=Ft("selectedProject",A);Ee&&(we.selectedProject=Ee),Object.keys(E).forEach(Re=>{const We=Ft(Re,E[Re],E);We&&(we[Re]=We)}),E.labour_data.forEach((Re,We)=>{Object.keys(Re).forEach(Lt=>{const Vt=Ft(`labour_${Lt}`,Re[Lt]);Vt&&(we.labour_data||(we.labour_data={}),we.labour_data[We]||(we.labour_data[We]={}),we.labour_data[We][Lt]=Vt)}),Re.worker_count>0&&Re.hours_worked===0&&(we.labour_data||(we.labour_data={}),we.labour_data[We]||(we.labour_data[We]={}),we.labour_data[We].hours_worked="Hours worked required when worker count > 0")}),E.incremental_completion_percentage>=10&&re.length===0&&(we.progress_photos="Photos are mandatory for completion claims of 10% or more")}else if(oe==="weekly"){const Ee=Ft("selectedProject",A);Ee&&(we.selectedProject=Ee),Object.keys(V).forEach(Re=>{const We=Ft(Re,V[Re],V);We&&(we[Re]=We)})}else if(oe==="monthly"){const Ee=Ft("selectedProject",A);Ee&&(we.selectedProject=Ee),Object.keys(I).forEach(Re=>{const We=Ft(Re,I[Re],I);We&&(we[Re]=We)})}return we},at=(oe,we,Ee={})=>{const Re=Ft(oe,we,Ee);return P(We=>({...We,[oe]:Re})),ee(We=>({...We,[oe]:!0})),Re},Xe=oe=>{ee(we=>({...we,[oe]:!0}))},pt=oe=>F[oe]?L[oe]?"error":"success":"",xe=oe=>!F[oe]||!L[oe]?null:e.jsxs("div",{className:"field-error",children:[e.jsx("span",{className:"error-icon",children:""}),e.jsx("span",{className:"error-message",children:L[oe]})]}),et=["January","February","March","April","May","June","July","August","September","October","November","December"];N.useEffect(()=>{Bt()},[t]),N.useEffect(()=>{xt()},[]),N.useEffect(()=>{Qe([])},[]),N.useEffect(()=>{if(h==="weekly"&&!V.week_start_date){const oe=new Date,we=new Date(oe.setDate(oe.getDate()-oe.getDay()+1)),Ee=new Date(we);Ee.setDate(we.getDate()+6),H(Re=>({...Re,week_start_date:we.toISOString().split("T")[0],week_end_date:Ee.toISOString().split("T")[0]}))}},[h]),N.useEffect(()=>{E.construction_stage?(Oe(E.construction_stage),E.labour_data.length>0&&(U(oe=>({...oe,labour_data:[]})),a.info(`Cleared labour entries due to construction stage change. Please add workers for ${E.construction_stage} phase.`))):(W(null),Qe([]))},[E.construction_stage]);const Oe=async oe=>{try{me(!0);const Ee=await(await fetch(`/buildhub/backend/api/contractor/get_phase_workers.php?phase=${encodeURIComponent(oe)}`,{credentials:"include"})).json();if(Ee.success){W(Ee.data);const Re=Object.values(Ee.data.available_workers).map(We=>We.requirement.type_name);Re.includes("Other")||Re.push("Other"),console.log(`Phase ${oe} worker types:`,Re),Qe(Re),a.success(`Loaded ${Re.length} worker types for ${oe} phase`)}else console.warn("Failed to load phase workers:",Ee.message),W(null),Qe(["Mason","Helper","Other"]),a.error(`Failed to load phase workers: ${Ee.message}`)}catch(we){console.error("Error loading phase workers:",we),W(null),Qe(["Mason","Helper","Other"]),a.error("Error loading phase workers")}finally{me(!1)}},Bt=async()=>{try{x(!0);const we=await(await fetch(`http://localhost/buildhub/backend/api/contractor/get_assigned_projects.php?contractor_id=${t}`,{credentials:"include"})).json();we.success?l(we.data.projects||[]):a.error("Failed to load projects: "+we.message)}catch(oe){console.error("Error loading projects:",oe),a.error("Error loading projects")}finally{x(!1)}},xt=()=>{navigator.geolocation&&(B(!0),navigator.geolocation.getCurrentPosition(oe=>{Q({latitude:oe.coords.latitude,longitude:oe.coords.longitude}),B(!1)},oe=>{console.warn("Geolocation error:",oe),B(!1)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:3e5}))},dt=oe=>{const{name:we,value:Ee}=oe.target;U(Re=>({...Re,[we]:Ee})),at(we,Ee,{...E,[we]:Ee})},Ut=oe=>{const{name:we,value:Ee}=oe.target;H(Re=>({...Re,[we]:Ee})),at(we,Ee,{...V,[we]:Ee})},wt=oe=>{const{name:we,value:Ee}=oe.target;M(Re=>({...Re,[we]:Ee})),at(we,Ee,{...I,[we]:Ee})},bt=(oe,we,Ee)=>{const Re=[...E.labour_data];Re[oe]||(Re[oe]={worker_type:"",worker_count:0,hours_worked:8,overtime_hours:0,absent_count:0,productivity_rating:5,safety_compliance:"good",remarks:""}),Re[oe][we]=Ee,U(Vt=>({...Vt,labour_data:Re}));const We=`labour_${we}`,Lt=Ft(We,Ee);P(Vt=>({...Vt,[`labour_data_${oe}_${we}`]:Lt})),ee(Vt=>({...Vt,[`labour_data_${oe}_${we}`]:!0}))},Ht=()=>{U(oe=>({...oe,labour_data:[...oe.labour_data,{worker_type:"Helper",worker_count:1,hours_worked:8,overtime_hours:0,absent_count:0,productivity_rating:5,safety_compliance:"good",remarks:""}]}))},_t=oe=>{U(we=>({...we,labour_data:we.labour_data.filter((Ee,Re)=>Re!==oe)}))},Gt=oe=>{const we=V.stages_worked.includes(oe)?V.stages_worked.filter(Ee=>Ee!==oe):[...V.stages_worked,oe];H(Ee=>({...Ee,stages_worked:we})),at("stages_worked",we)},$t=oe=>{const we=I.milestones_achieved.includes(oe)?I.milestones_achieved.filter(Ee=>Ee!==oe):[...I.milestones_achieved,oe];M(Ee=>({...Ee,milestones_achieved:we}))},J=oe=>{const we=Array.from(oe.target.files),Ee=10,Re=5*1024*1024,We=["image/jpeg","image/jpg","image/png","image/webp","image/gif"],Lt=[];we.length>Ee&&Lt.push(`Maximum ${Ee} photos allowed`);const Vt=[];if(we.forEach((ss,xs)=>{if(!We.includes(ss.type.toLowerCase())){Lt.push(`${ss.name}: Invalid file type. Only JPG, PNG, WebP, and GIF allowed`);return}if(ss.size>Re){Lt.push(`${ss.name}: File too large. Maximum 5MB allowed`);return}if(ss.name.length>100){Lt.push(`${ss.name}: Filename too long (max 100 characters)`);return}if(Vt.findIndex(Ms=>Ms.name===ss.name)!==-1){Lt.push(`${ss.name}: Duplicate filename`);return}Vt.push(ss)}),Lt.length>0){a.error(`Photo validation errors:
${Lt.slice(0,3).join(`
`)}${Lt.length>3?`
...and more`:""}`),P(ss=>({...ss,progress_photos:Lt[0]})),ee(ss=>({...ss,progress_photos:!0}));return}P(ss=>{const xs={...ss};return delete xs.progress_photos,xs}),G(Vt),(parseFloat(E.incremental_completion_percentage)||0)>=10&&Vt.length===0&&P(ss=>({...ss,progress_photos:"Photos are mandatory for completion claims of 10% or more"}))},tt=oe=>{G(we=>we.filter((Ee,Re)=>Re!==oe))},Qt=oe=>{const we=oe.map(Ee=>({id:Ee.data.id,filename:Ee.data.filename,url:`/buildhub/backend/uploads/geo_photos/${Ee.data.filename}`,location:Ee.data.location,timestamp:Ee.data.upload_timestamp}));le(Ee=>[...Ee,...we]),a.success(`${oe.length} geo-located photo(s) captured and sent to homeowner`)},Et=oe=>{le(we=>we.filter((Ee,Re)=>Re!==oe))},Jt=()=>{const oe=Rt("daily");P(oe);const we={};Object.keys(E).forEach(Re=>{we[Re]=!0}),we.selectedProject=!0,E.labour_data.forEach((Re,We)=>{Object.keys(Re).forEach(Lt=>{we[`labour_data_${We}_${Lt}`]=!0})}),ee(we);const Ee=Object.keys(oe).length>0;if(Ee){const Re=[];oe.selectedProject&&Re.push(oe.selectedProject),oe.update_date&&Re.push(`Date: ${oe.update_date}`),oe.construction_stage&&Re.push(oe.construction_stage),oe.work_done_today&&Re.push(`Work Description: ${oe.work_done_today}`),oe.incremental_completion_percentage&&Re.push(`Completion %: ${oe.incremental_completion_percentage}`),oe.working_hours&&Re.push(`Working Hours: ${oe.working_hours}`),oe.weather_condition&&Re.push(oe.weather_condition),oe.progress_photos&&Re.push(oe.progress_photos),oe.labour_data&&Re.push("Please fix labour tracking errors"),a.error(`Please fix the following errors:
${Re.slice(0,3).join(`
`)}${Re.length>3?`
...and more`:""}`)}return!Ee},os=()=>{const oe=Rt("weekly");P(oe);const we={};Object.keys(V).forEach(Re=>{we[Re]=!0}),we.selectedProject=!0,ee(we);const Ee=Object.keys(oe).length>0;if(Ee){const Re=Object.values(oe).slice(0,3);a.error(`Please fix the following errors:
${Re.join(`
`)}`)}return!Ee},_e=()=>{const oe=Rt("monthly");P(oe);const we={};Object.keys(I).forEach(Re=>{we[Re]=!0}),we.selectedProject=!0,ee(we);const Ee=Object.keys(oe).length>0;if(Ee){const Re=Object.values(oe).slice(0,3);a.error(`Please fix the following errors:
${Re.join(`
`)}`)}return!Ee},St=async oe=>{if(oe.preventDefault(),!!Jt()){v(!0);try{const we=new FormData;we.append("project_id",A),we.append("contractor_id",t),we.append("update_date",E.update_date),we.append("construction_stage",E.construction_stage),we.append("work_done_today",E.work_done_today),we.append("incremental_completion_percentage",E.incremental_completion_percentage),we.append("working_hours",E.working_hours),we.append("materials_used",E.materials_used),we.append("weather_condition",E.weather_condition),we.append("site_issues",E.site_issues),we.append("labour_data",JSON.stringify(E.labour_data)),C.latitude&&C.longitude&&(we.append("latitude",C.latitude),we.append("longitude",C.longitude)),re.forEach((We,Lt)=>{we.append("progress_photos[]",We)});const Re=await(await fetch("http://localhost/buildhub/backend/api/contractor/submit_daily_progress.php",{method:"POST",credentials:"include",body:we})).json();Re.success?(a.success("Daily progress update submitted successfully!"),U({update_date:new Date().toISOString().split("T")[0],construction_stage:"",work_done_today:"",incremental_completion_percentage:"",working_hours:"8",materials_used:"",weather_condition:"",site_issues:"",labour_data:[]}),G([]),r.current&&(r.current.value=""),s&&s(Re.data)):a.error("Failed to submit update: "+Re.message)}catch(we){console.error("Error submitting daily update:",we),a.error("Error submitting daily update")}finally{v(!1)}}},$e=async oe=>{if(oe.preventDefault(),!!os()){v(!0);try{const Ee=await(await fetch("http://localhost/buildhub/backend/api/contractor/submit_weekly_summary.php",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({project_id:A,contractor_id:t,...V})})).json();Ee.success?(a.success("Weekly summary submitted successfully!"),H({week_start_date:"",week_end_date:"",stages_worked:[],delays_and_reasons:"",weekly_remarks:""}),s&&s(Ee.data)):a.error("Failed to submit summary: "+Ee.message)}catch(we){console.error("Error submitting weekly summary:",we),a.error("Error submitting weekly summary")}finally{v(!1)}}},kt=async oe=>{if(oe.preventDefault(),!!_e()){v(!0);try{const Ee=await(await fetch("http://localhost/buildhub/backend/api/contractor/submit_monthly_report.php",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({project_id:A,contractor_id:t,...I})})).json();Ee.success?(a.success("Monthly report submitted successfully!"),M({report_month:new Date().getMonth()+1,report_year:new Date().getFullYear(),planned_progress_percentage:"",milestones_achieved:[],delay_explanation:"",contractor_remarks:""}),s&&s(Ee.data)):a.error("Failed to submit report: "+Ee.message)}catch(we){console.error("Error submitting monthly report:",we),a.error("Error submitting monthly report")}finally{v(!1)}}},Ze=()=>o.find(we=>we.project_id==A)||null;return e.jsxs("div",{className:"enhanced-progress-update",children:[e.jsxs("div",{className:"progress-update-header",children:[e.jsx("h3",{children:"Construction Progress Monitoring System"}),e.jsx("p",{children:"Comprehensive progress tracking with daily updates, weekly summaries, and monthly reports"})]}),e.jsxs("div",{className:"form-group project-selection",children:[e.jsx("label",{htmlFor:"project",children:"Select Project *"}),b?e.jsx("div",{className:"loading-spinner",children:"Loading projects..."}):e.jsxs("div",{className:"project-selection-container",children:[e.jsxs("select",{id:"project",value:A,onChange:oe=>{u(oe.target.value),at("selectedProject",oe.target.value)},onBlur:()=>Xe("selectedProject"),required:!0,className:`project-select ${pt("selectedProject")}`,children:[e.jsx("option",{value:"",children:"Choose a project..."}),o.map(oe=>e.jsx("option",{value:oe.project_id,children:oe.project_display_name},oe.project_id))]}),xe("selectedProject"),o.length>0&&e.jsxs("div",{className:"available-projects-summary",children:[e.jsxs("h5",{children:["Available Projects (",o.length,")"]}),e.jsx("div",{className:"projects-list",children:o.map(oe=>e.jsxs("div",{className:`project-item ${A==oe.project_id?"selected":""}`,onClick:()=>u(oe.project_id.toString()),children:[e.jsxs("div",{className:"project-header",children:[e.jsxs("div",{className:"project-title",children:[e.jsx("strong",{children:oe.project_summary.homeowner_name}),e.jsx("span",{className:"project-status",children:oe.project_summary.status_display})]}),e.jsx("div",{className:"project-progress",children:oe.project_summary.progress_summary})]}),e.jsxs("div",{className:"project-details-grid",children:[e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"label",children:"Plot:"}),e.jsx("span",{className:"value",children:oe.project_summary.plot_details})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"label",children:"Location:"}),e.jsx("span",{className:"value",children:oe.project_summary.location})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"label",children:"Budget:"}),e.jsx("span",{className:"value",children:oe.project_summary.total_cost_formatted})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"label",children:"Timeline:"}),e.jsx("span",{className:"value",children:oe.project_summary.timeline})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"label",children:"Last Update:"}),e.jsx("span",{className:"value",children:oe.project_summary.last_activity})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"label",children:"Updates:"}),e.jsxs("span",{className:"value",children:[oe.daily_updates_count,"D, ",oe.weekly_summaries_count,"W, ",oe.monthly_reports_count,"M"]})]})]}),e.jsxs("div",{className:"project-progress-bar",children:[e.jsx("div",{className:"progress-bar",children:e.jsx("div",{className:"progress-fill",style:{width:`${oe.latest_progress}%`}})}),e.jsxs("span",{className:"progress-text",children:[oe.latest_progress,"%"]})]}),oe.requirements&&e.jsxs("div",{className:"project-requirements",children:[e.jsx("strong",{children:"Requirements:"})," ",oe.requirements.substring(0,100),oe.requirements.length>100&&"..."]})]},oe.project_id))})]})]})]}),A&&e.jsx("div",{className:"selected-project-info-card",children:(()=>{const oe=Ze();return oe?e.jsxs("div",{className:"selected-project-details",children:[e.jsxs("div",{className:"project-info-header",children:[e.jsx("h4",{children:"Selected Project Details"}),e.jsx("div",{className:"project-status-badge",children:oe.project_summary.status_display})]}),e.jsxs("div",{className:"project-participants",children:[e.jsxs("div",{className:"participant",children:[e.jsx("strong",{children:"Homeowner:"})," ",oe.project_summary.homeowner_name,e.jsx("br",{}),e.jsxs("small",{children:[" ",oe.homeowner_email," |  ",oe.homeowner_phone]})]}),e.jsxs("div",{className:"participant",children:[e.jsx("strong",{children:"Contractor:"})," ",oe.project_summary.contractor_name,e.jsx("br",{}),e.jsxs("small",{children:[" ",oe.contractor_email]})]})]}),e.jsxs("div",{className:"project-info-grid",children:[e.jsxs("div",{className:"info-card",children:[e.jsx("strong",{children:"Plot Details"}),e.jsx("div",{children:oe.project_summary.plot_details}),e.jsxs("small",{children:["Style: ",oe.preferred_style||"Not specified"]})]}),e.jsxs("div",{className:"info-card",children:[e.jsx("strong",{children:"Location"}),e.jsx("div",{children:oe.project_summary.location}),oe.project_address&&e.jsxs("small",{children:[" GPS: ",oe.project_address]})]}),e.jsxs("div",{className:"info-card",children:[e.jsx("strong",{children:"Budget & Cost"}),e.jsxs("div",{children:["Budget: ",oe.budget_range]}),e.jsxs("div",{children:["Estimate: ",oe.project_summary.total_cost_formatted]})]}),e.jsxs("div",{className:"info-card",children:[e.jsx("strong",{children:"Timeline"}),e.jsxs("div",{children:["Requested: ",oe.requested_timeline||"Not specified"]}),e.jsxs("div",{children:["Estimate: ",oe.project_summary.timeline]})]}),e.jsxs("div",{className:"info-card",children:[e.jsx("strong",{children:"Progress Status"}),e.jsx("div",{children:oe.project_summary.progress_summary}),e.jsxs("div",{children:["Completed Stages: ",oe.completed_stages]})]}),e.jsxs("div",{className:"info-card",children:[e.jsx("strong",{children:"Update History"}),e.jsxs("div",{children:["Daily: ",oe.daily_updates_count," updates"]}),e.jsxs("div",{children:["Weekly: ",oe.weekly_summaries_count," summaries"]}),e.jsxs("div",{children:["Monthly: ",oe.monthly_reports_count," reports"]}),e.jsxs("small",{children:["Last: ",oe.project_summary.last_activity]})]})]}),e.jsxs("div",{className:"project-overall-progress",children:[e.jsxs("div",{className:"progress-header",children:[e.jsx("strong",{children:"Overall Progress"}),e.jsxs("span",{children:[oe.latest_progress,"%"]})]}),e.jsx("div",{className:"progress-bar-large",children:e.jsx("div",{className:"progress-fill-large",style:{width:`${oe.latest_progress}%`}})})]}),oe.requirements&&e.jsxs("div",{className:"project-requirements-full",children:[e.jsx("strong",{children:"Project Requirements:"}),e.jsx("p",{children:oe.requirements})]}),e.jsx("div",{className:"project-dates",children:e.jsxs("small",{children:[e.jsx("strong",{children:"Request Date:"})," ",oe.request_date_formatted," |",e.jsx("strong",{children:" Estimate Date:"})," ",oe.estimate_date_formatted," |",e.jsx("strong",{children:" Acknowledged:"})," ",oe.acknowledged_date_formatted]})})]}):null})()}),e.jsxs("div",{className:"section-navigation",children:[e.jsx("button",{className:`section-btn ${h==="daily"?"active":""}`,onClick:()=>p("daily"),children:"Daily Progress Update"}),e.jsx("button",{className:`section-btn ${h==="weekly"?"active":""}`,onClick:()=>p("weekly"),children:"Weekly Progress Summary"}),e.jsx("button",{className:`section-btn ${h==="monthly"?"active":""}`,onClick:()=>p("monthly"),children:"Monthly Progress Report"})]}),h==="daily"&&e.jsxs("form",{onSubmit:St,className:"progress-section daily-section",children:[e.jsx("h4",{children:" Daily Progress Update"}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:`form-group ${pt("update_date")}`,children:[e.jsx("label",{htmlFor:"update_date",children:"Date *"}),e.jsx("input",{type:"date",id:"update_date",name:"update_date",value:E.update_date,onChange:dt,onBlur:()=>Xe("update_date"),required:!0,className:pt("update_date")}),xe("update_date")]}),e.jsxs("div",{className:`form-group ${pt("construction_stage")}`,children:[e.jsx("label",{htmlFor:"construction_stage",children:"Construction Stage *"}),e.jsxs("select",{id:"construction_stage",name:"construction_stage",value:E.construction_stage,onChange:dt,onBlur:()=>Xe("construction_stage"),required:!0,className:pt("construction_stage"),children:[e.jsx("option",{value:"",children:"Select stage..."}),ut.map(oe=>e.jsx("option",{value:oe,children:oe},oe))]}),xe("construction_stage")]})]}),e.jsxs("div",{className:`form-group ${pt("work_done_today")}`,children:[e.jsx("label",{htmlFor:"work_done_today",children:"Work Done Today *"}),e.jsx("textarea",{id:"work_done_today",name:"work_done_today",value:E.work_done_today,onChange:dt,onBlur:()=>Xe("work_done_today"),placeholder:"Describe the work completed today in detail... (minimum 10 characters)",rows:"4",required:!0,className:pt("work_done_today"),maxLength:"1000"}),e.jsxs("div",{className:"field-info",children:[E.work_done_today.length,"/1000 characters",E.work_done_today.length<10&&E.work_done_today.length>0&&e.jsx("span",{className:"char-warning",children:" (minimum 10 required)"})]}),xe("work_done_today")]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:`form-group ${pt("incremental_completion_percentage")}`,children:[e.jsx("label",{htmlFor:"incremental_completion_percentage",children:"Incremental Completion % *"}),e.jsxs("div",{className:"percentage-input",children:[e.jsx("input",{type:"number",id:"incremental_completion_percentage",name:"incremental_completion_percentage",value:E.incremental_completion_percentage,onChange:dt,onBlur:()=>Xe("incremental_completion_percentage"),min:"0",max:"100",step:"0.1",required:!0,className:pt("incremental_completion_percentage"),placeholder:"0.0"}),e.jsx("span",{className:"percentage-symbol",children:"%"})]}),e.jsx("div",{className:"field-info",children:"Daily progress should typically be 0.5% - 5%"}),xe("incremental_completion_percentage")]}),e.jsxs("div",{className:`form-group ${pt("working_hours")}`,children:[e.jsx("label",{htmlFor:"working_hours",children:"Working Hours *"}),e.jsx("input",{type:"number",id:"working_hours",name:"working_hours",value:E.working_hours,onChange:dt,onBlur:()=>Xe("working_hours"),min:"0",max:"16",step:"0.5",className:pt("working_hours"),placeholder:"8.0"}),e.jsx("div",{className:"field-info",children:"Standard: 8 hours, Maximum: 16 hours"}),xe("working_hours")]})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:`form-group ${pt("weather_condition")}`,children:[e.jsx("label",{htmlFor:"weather_condition",children:"Weather Condition *"}),e.jsxs("select",{id:"weather_condition",name:"weather_condition",value:E.weather_condition,onChange:dt,onBlur:()=>Xe("weather_condition"),required:!0,className:pt("weather_condition"),children:[e.jsx("option",{value:"",children:"Select weather..."}),mt.map(oe=>e.jsx("option",{value:oe,children:oe},oe))]}),xe("weather_condition")]}),e.jsxs("div",{className:`form-group ${pt("materials_used")}`,children:[e.jsx("label",{htmlFor:"materials_used",children:"Materials Used"}),e.jsx("input",{type:"text",id:"materials_used",name:"materials_used",value:E.materials_used,onChange:dt,onBlur:()=>Xe("materials_used"),placeholder:"e.g., Cement bags, Steel bars, Bricks...",className:pt("materials_used"),maxLength:"500"}),e.jsxs("div",{className:"field-info",children:[E.materials_used.length,"/500 characters"]}),xe("materials_used")]})]}),e.jsxs("div",{className:`form-group ${pt("site_issues")}`,children:[e.jsx("label",{htmlFor:"site_issues",children:"Site Issues (if any)"}),e.jsx("textarea",{id:"site_issues",name:"site_issues",value:E.site_issues,onChange:dt,onBlur:()=>Xe("site_issues"),placeholder:"Describe any issues encountered at the site...",rows:"3",className:pt("site_issues"),maxLength:"1000"}),e.jsxs("div",{className:"field-info",children:[E.site_issues.length,"/1000 characters"]}),xe("site_issues")]}),e.jsxs("div",{className:"labour-tracking-section",children:[e.jsxs("div",{className:"section-header",children:[e.jsx("h5",{children:" Labour Tracking & Management"}),e.jsx("button",{type:"button",onClick:Ht,className:"add-labour-btn",children:"+ Add Worker Type"})]}),E.labour_data.length===0&&e.jsx("div",{className:"no-labour-message",children:e.jsx("p",{children:'No labour entries added yet. Click "Add Worker Type" to start tracking workers.'})}),E.labour_data.map((oe,we)=>e.jsxs("div",{className:"labour-entry",children:[e.jsxs("div",{className:"labour-entry-header",children:[e.jsxs("h6",{children:["Worker Entry #",we+1]}),e.jsx("button",{type:"button",onClick:()=>_t(we),className:"remove-labour-btn",title:"Remove entry",children:""})]}),e.jsxs("div",{className:"labour-row primary-info",children:[e.jsxs("div",{className:`form-group worker-type-group ${L[`labour_data_${we}_worker_type`]?"error":""}`,children:[e.jsx("label",{children:"Worker Type *"}),e.jsxs("select",{value:oe.worker_type,onChange:Ee=>bt(we,"worker_type",Ee.target.value),onBlur:()=>ee(Ee=>({...Ee,[`labour_data_${we}_worker_type`]:!0})),required:!0,disabled:de||!E.construction_stage,children:[e.jsx("option",{value:"",children:E.construction_stage?de?"Loading workers...":"Select Type":"Select construction stage first"}),Be.map(Ee=>e.jsx("option",{value:Ee,children:Ee},Ee))]}),!E.construction_stage&&e.jsx("div",{className:"field-info",children:" Please select a construction stage first to see relevant worker types"}),de&&E.construction_stage&&e.jsx("div",{className:"field-info",children:" Loading phase-specific workers..."}),X&&!de&&E.construction_stage&&e.jsxs("div",{className:"field-info",children:[" Showing ",Be.length," worker types for ",E.construction_stage," phase"]}),F[`labour_data_${we}_worker_type`]&&L[`labour_data_${we}_worker_type`]&&e.jsx("div",{className:"field-error",children:e.jsx("span",{className:"error-message",children:L[`labour_data_${we}_worker_type`]})})]}),e.jsxs("div",{className:`form-group worker-count-group ${L[`labour_data_${we}_worker_count`]?"error":""}`,children:[e.jsx("label",{children:"Worker Count *"}),e.jsx("input",{type:"number",value:oe.worker_count,onChange:Ee=>bt(we,"worker_count",parseInt(Ee.target.value)||0),onBlur:()=>ee(Ee=>({...Ee,[`labour_data_${we}_worker_count`]:!0})),min:"0",max:"100",placeholder:"0",required:!0}),e.jsx("div",{className:"field-info",children:"Maximum: 100 workers"}),F[`labour_data_${we}_worker_count`]&&L[`labour_data_${we}_worker_count`]&&e.jsx("div",{className:"field-error",children:e.jsx("span",{className:"error-message",children:L[`labour_data_${we}_worker_count`]})})]}),e.jsxs("div",{className:`form-group hours-worked-group ${L[`labour_data_${we}_hours_worked`]?"error":""}`,children:[e.jsx("label",{children:"Regular Hours *"}),e.jsx("input",{type:"number",value:oe.hours_worked,onChange:Ee=>bt(we,"hours_worked",parseFloat(Ee.target.value)||0),onBlur:()=>ee(Ee=>({...Ee,[`labour_data_${we}_hours_worked`]:!0})),min:"0",max:"12",step:"0.5",placeholder:"8.0",required:!0}),e.jsx("div",{className:"field-info",children:"Standard: 8 hours, Max: 12 hours"}),F[`labour_data_${we}_hours_worked`]&&L[`labour_data_${we}_hours_worked`]&&e.jsx("div",{className:"field-error",children:e.jsx("span",{className:"error-message",children:L[`labour_data_${we}_hours_worked`]})})]}),e.jsxs("div",{className:`form-group overtime-group ${L[`labour_data_${we}_overtime_hours`]?"error":""}`,children:[e.jsx("label",{children:"Overtime Hours"}),e.jsx("input",{type:"number",value:oe.overtime_hours,onChange:Ee=>bt(we,"overtime_hours",parseFloat(Ee.target.value)||0),onBlur:()=>ee(Ee=>({...Ee,[`labour_data_${we}_overtime_hours`]:!0})),min:"0",max:"8",step:"0.5",placeholder:"0.0"}),e.jsx("div",{className:"field-info",children:"Maximum: 8 hours (1.5x rate)"}),F[`labour_data_${we}_overtime_hours`]&&L[`labour_data_${we}_overtime_hours`]&&e.jsx("div",{className:"field-error",children:e.jsx("span",{className:"error-message",children:L[`labour_data_${we}_overtime_hours`]})})]}),e.jsxs("div",{className:`form-group absent-group ${L[`labour_data_${we}_absent_count`]?"error":""}`,children:[e.jsx("label",{children:"Absent Count"}),e.jsx("input",{type:"number",value:oe.absent_count,onChange:Ee=>bt(we,"absent_count",parseInt(Ee.target.value)||0),onBlur:()=>ee(Ee=>({...Ee,[`labour_data_${we}_absent_count`]:!0})),min:"0",max:"50",placeholder:"0"}),e.jsx("div",{className:"field-info",children:"Workers who didn't show up"}),F[`labour_data_${we}_absent_count`]&&L[`labour_data_${we}_absent_count`]&&e.jsx("div",{className:"field-error",children:e.jsx("span",{className:"error-message",children:L[`labour_data_${we}_absent_count`]})})]})]}),e.jsxs("div",{className:"labour-row secondary-info",children:[e.jsxs("div",{className:`form-group productivity-group ${L[`labour_data_${we}_productivity_rating`]?"error":""}`,children:[e.jsx("label",{children:"Productivity Rating"}),e.jsxs("select",{value:oe.productivity_rating,onChange:Ee=>bt(we,"productivity_rating",parseInt(Ee.target.value)),onBlur:()=>ee(Ee=>({...Ee,[`labour_data_${we}_productivity_rating`]:!0})),children:[e.jsx("option",{value:1,children:"1 - Poor "}),e.jsx("option",{value:2,children:"2 - Below Average "}),e.jsx("option",{value:3,children:"3 - Average "}),e.jsx("option",{value:4,children:"4 - Good "}),e.jsx("option",{value:5,children:"5 - Excellent "})]}),e.jsx("div",{className:"field-info",children:"Rate work quality and efficiency"}),F[`labour_data_${we}_productivity_rating`]&&L[`labour_data_${we}_productivity_rating`]&&e.jsx("div",{className:"field-error",children:e.jsx("span",{className:"error-message",children:L[`labour_data_${we}_productivity_rating`]})})]}),e.jsxs("div",{className:"form-group safety-group",children:[e.jsx("label",{children:"Safety Compliance"}),e.jsx("select",{value:oe.safety_compliance,onChange:Ee=>bt(we,"safety_compliance",Ee.target.value),onBlur:()=>ee(Ee=>({...Ee,[`labour_data_${we}_safety_compliance`]:!0})),children:Ve.map(Ee=>e.jsx("option",{value:Ee,children:Ee.replace("_"," ").replace(/\b\w/g,Re=>Re.toUpperCase())},Ee))}),e.jsx("div",{className:"field-info",children:"Safety protocol adherence"})]})]}),e.jsx("div",{className:"labour-row remarks-section",children:e.jsxs("div",{className:`form-group remarks-group ${L[`labour_data_${we}_remarks`]?"error":""}`,children:[e.jsx("label",{children:"Remarks & Notes"}),e.jsx("textarea",{value:oe.remarks,onChange:Ee=>bt(we,"remarks",Ee.target.value),onBlur:()=>ee(Ee=>({...Ee,[`labour_data_${we}_remarks`]:!0})),placeholder:"Any specific notes about this worker type, performance, issues, or achievements...",rows:"2",maxLength:"500"}),e.jsxs("div",{className:"field-info",children:[oe.remarks.length,"/500 characters"]}),F[`labour_data_${we}_remarks`]&&L[`labour_data_${we}_remarks`]&&e.jsx("div",{className:"field-error",children:e.jsx("span",{className:"error-message",children:L[`labour_data_${we}_remarks`]})})]})}),e.jsxs("div",{className:"labour-summary",children:[e.jsxs("div",{className:"summary-item",children:[e.jsx("span",{className:"label",children:"Total Workers:"}),e.jsx("span",{className:"value",children:oe.worker_count||0})]}),e.jsxs("div",{className:"summary-item",children:[e.jsx("span",{className:"label",children:"Total Hours:"}),e.jsxs("span",{className:"value",children:[((parseFloat(oe.hours_worked)||0)+(parseFloat(oe.overtime_hours)||0))*(parseInt(oe.worker_count)||0)," hrs"]})]}),e.jsxs("div",{className:"summary-item",children:[e.jsx("span",{className:"label",children:"Efficiency:"}),e.jsxs("span",{className:"value",children:[oe.productivity_rating,"/5 "]})]}),e.jsxs("div",{className:"summary-item",children:[e.jsx("span",{className:"label",children:"Safety:"}),e.jsx("span",{className:"value",children:oe.safety_compliance.replace("_"," ").replace(/\b\w/g,Ee=>Ee.toUpperCase())})]})]})]},we)),E.labour_data.length>0&&e.jsxs("div",{className:"labour-total-summary",children:[e.jsx("h6",{children:" Daily Labour Summary"}),e.jsxs("div",{className:"total-summary-grid",children:[e.jsxs("div",{className:"total-item",children:[e.jsx("span",{className:"label",children:"Total Workers:"}),e.jsx("span",{className:"value",children:E.labour_data.reduce((oe,we)=>oe+(parseInt(we.worker_count)||0),0)})]}),e.jsxs("div",{className:"total-item",children:[e.jsx("span",{className:"label",children:"Total Regular Hours:"}),e.jsxs("span",{className:"value",children:[E.labour_data.reduce((oe,we)=>oe+(parseFloat(we.hours_worked)||0)*(parseInt(we.worker_count)||0),0)," hrs"]})]}),e.jsxs("div",{className:"total-item",children:[e.jsx("span",{className:"label",children:"Total Overtime Hours:"}),e.jsxs("span",{className:"value",children:[E.labour_data.reduce((oe,we)=>oe+(parseFloat(we.overtime_hours)||0)*(parseInt(we.worker_count)||0),0)," hrs"]})]}),e.jsxs("div",{className:"total-item",children:[e.jsx("span",{className:"label",children:"Average Productivity:"}),e.jsxs("span",{className:"value",children:[E.labour_data.length>0?(E.labour_data.reduce((oe,we)=>oe+(parseInt(we.productivity_rating)||0),0)/E.labour_data.length).toFixed(1):0,"/5 "]})]}),e.jsxs("div",{className:"total-item",children:[e.jsx("span",{className:"label",children:"Total Absent:"}),e.jsx("span",{className:"value",children:E.labour_data.reduce((oe,we)=>oe+(parseInt(we.absent_count)||0),0)})]}),e.jsxs("div",{className:"total-item",children:[e.jsx("span",{className:"label",children:"Worker Types:"}),e.jsxs("span",{className:"value",children:[E.labour_data.length," types"]})]})]})]})]}),E.construction_stage&&A&&e.jsxs("div",{className:"stage-payment-section",children:[e.jsxs("div",{className:"section-header",children:[e.jsx("h5",{children:" Stage Payment Request"}),e.jsxs("p",{children:["Request payment for completed ",E.construction_stage," stage work"]})]}),e.jsx(o2,{projectId:A,stageName:E.construction_stage,contractorId:t,completionPercentage:E.incremental_completion_percentage,workDescription:E.work_done_today,onPaymentRequested:oe=>{a.success(`Payment request submitted: ${oe.requested_amount} for ${oe.stage_name} stage`)}})]}),e.jsxs("div",{className:"photo-upload-section",children:[e.jsxs("div",{className:"photo-section-header",children:[e.jsx("h5",{children:" Progress Photos"}),e.jsxs("div",{className:"photo-upload-options",children:[e.jsx("button",{type:"button",className:"geo-photo-btn",onClick:()=>T(!0),children:" Capture Geo Photos"}),e.jsx("button",{type:"button",className:"regular-upload-btn",onClick:()=>r.current?.click(),children:" Upload Files"})]})]}),e.jsxs("div",{className:`form-group ${pt("progress_photos")}`,children:[e.jsx("input",{type:"file",id:"progress_photos",ref:r,onChange:J,accept:"image/jpeg,image/jpg,image/png,image/webp,image/gif",multiple:!0,className:"file-input-hidden",style:{display:"none"}}),e.jsxs("div",{className:"photo-requirements",children:[e.jsxs("div",{className:"requirements-grid",children:[e.jsxs("div",{className:"requirement-item",children:[e.jsx("span",{className:"icon",children:""}),e.jsx("span",{children:"Up to 10 photos"})]}),e.jsxs("div",{className:"requirement-item",children:[e.jsx("span",{className:"icon",children:""}),e.jsx("span",{children:"Max 5MB each"})]}),e.jsxs("div",{className:"requirement-item",children:[e.jsx("span",{className:"icon",children:""}),e.jsx("span",{children:"Clear, well-lit images"})]}),e.jsxs("div",{className:"requirement-item",children:[e.jsx("span",{className:"icon",children:""}),e.jsx("span",{children:"Geo-location recommended"})]})]}),E.incremental_completion_percentage>=10&&e.jsxs("div",{className:"mandatory-notice",children:[e.jsx("span",{className:"icon",children:""}),e.jsx("strong",{children:"Photos are mandatory for completion claims of 10% or more"})]})]}),xe("progress_photos")]}),(re.length>0||z.length>0)&&e.jsxs("div",{className:"photo-preview",children:[e.jsxs("h5",{children:["Progress Photos (",re.length+z.length,"/10)",z.length>0&&e.jsxs("span",{className:"geo-badge",children:[" ",z.length," geo-located"]})]}),e.jsxs("div",{className:"photo-grid",children:[re.map((oe,we)=>e.jsxs("div",{className:"photo-item",children:[e.jsx("img",{src:URL.createObjectURL(oe),alt:`Preview ${we+1}`,className:"photo-thumbnail"}),e.jsx("button",{type:"button",onClick:()=>tt(we),className:"remove-photo-btn",title:"Remove photo",children:""}),e.jsxs("div",{className:"photo-info",children:[e.jsx("div",{className:"photo-name",children:oe.name}),e.jsx("div",{className:"photo-type",children:" Uploaded"})]})]},`regular-${we}`)),z.map((oe,we)=>e.jsxs("div",{className:"photo-item geo-photo",children:[e.jsx("img",{src:oe.url,alt:`Geo Photo ${we+1}`,className:"photo-thumbnail"}),e.jsx("button",{type:"button",onClick:()=>Et(we),className:"remove-photo-btn",title:"Remove geo photo",children:""}),e.jsxs("div",{className:"photo-info",children:[e.jsx("div",{className:"photo-name",children:oe.filename}),e.jsxs("div",{className:"photo-location",children:[" ",oe.location?.placeName||"Located"]})]}),e.jsx("div",{className:"geo-indicator",children:""})]},`geo-${we}`))]})]})]}),e.jsx("div",{className:"location-status",children:j?e.jsx("div",{className:"location-info",children:" Getting your location..."}):C.latitude?e.jsx("div",{className:"location-info success",children:" Location captured for verification"}):e.jsx("div",{className:"location-info warning",children:" Location not available (optional)"})}),e.jsx("div",{className:"form-actions",children:e.jsx("button",{type:"submit",disabled:m||b,className:"submit-btn daily-btn",children:m?"Submitting...":"Submit Daily Update"})})]}),h==="weekly"&&e.jsxs("form",{onSubmit:$e,className:"progress-section weekly-section",children:[e.jsx("h4",{children:" Weekly Progress Summary"}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:`form-group ${pt("week_start_date")}`,children:[e.jsx("label",{htmlFor:"week_start_date",children:"Week Start Date *"}),e.jsx("input",{type:"date",id:"week_start_date",name:"week_start_date",value:V.week_start_date,onChange:Ut,onBlur:()=>Xe("week_start_date"),required:!0,className:pt("week_start_date")}),e.jsx("div",{className:"field-info",children:"Should typically start on Monday"}),xe("week_start_date")]}),e.jsxs("div",{className:`form-group ${pt("week_end_date")}`,children:[e.jsx("label",{htmlFor:"week_end_date",children:"Week End Date *"}),e.jsx("input",{type:"date",id:"week_end_date",name:"week_end_date",value:V.week_end_date,onChange:Ut,onBlur:()=>Xe("week_end_date"),required:!0,className:pt("week_end_date")}),e.jsx("div",{className:"field-info",children:"Should be within 7 days of start date"}),xe("week_end_date")]})]}),e.jsxs("div",{className:`form-group ${pt("stages_worked")}`,children:[e.jsx("label",{children:"Stages Worked This Week *"}),e.jsx("div",{className:"checkbox-grid",children:ut.map(oe=>e.jsxs("label",{className:"checkbox-item",children:[e.jsx("input",{type:"checkbox",checked:V.stages_worked.includes(oe),onChange:()=>Gt(oe)}),e.jsx("span",{children:oe})]},oe))}),e.jsxs("div",{className:"field-info",children:["Selected: ",V.stages_worked.length," stage",V.stages_worked.length!==1?"s":"",V.stages_worked.length===0&&e.jsx("span",{className:"char-warning",children:" (at least 1 required)"})]}),xe("stages_worked")]}),e.jsxs("div",{className:`form-group ${pt("delays_and_reasons")}`,children:[e.jsx("label",{htmlFor:"delays_and_reasons",children:"Delays & Reasons"}),e.jsx("textarea",{id:"delays_and_reasons",name:"delays_and_reasons",value:V.delays_and_reasons,onChange:Ut,onBlur:()=>Xe("delays_and_reasons"),placeholder:"Describe any delays encountered this week and their reasons...",rows:"4",className:pt("delays_and_reasons"),maxLength:"1000"}),e.jsxs("div",{className:"field-info",children:[V.delays_and_reasons.length,"/1000 characters"]}),xe("delays_and_reasons")]}),e.jsxs("div",{className:`form-group ${pt("weekly_remarks")}`,children:[e.jsx("label",{htmlFor:"weekly_remarks",children:"Weekly Remarks *"}),e.jsx("textarea",{id:"weekly_remarks",name:"weekly_remarks",value:V.weekly_remarks,onChange:Ut,onBlur:()=>Xe("weekly_remarks"),placeholder:"Provide a comprehensive summary of the week's progress, achievements, and observations... (minimum 20 characters)",rows:"5",required:!0,className:pt("weekly_remarks"),maxLength:"2000"}),e.jsxs("div",{className:"field-info",children:[V.weekly_remarks.length,"/2000 characters",V.weekly_remarks.length<20&&V.weekly_remarks.length>0&&e.jsx("span",{className:"char-warning",children:" (minimum 20 required)"})]}),xe("weekly_remarks")]}),e.jsx("div",{className:"form-actions",children:e.jsx("button",{type:"submit",disabled:m||b,className:"submit-btn weekly-btn",children:m?"Submitting...":"Submit Weekly Summary"})})]}),h==="monthly"&&e.jsxs("form",{onSubmit:kt,className:"progress-section monthly-section",children:[e.jsx("h4",{children:" Monthly Progress Report"}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:`form-group ${pt("report_month")}`,children:[e.jsx("label",{htmlFor:"report_month",children:"Report Month *"}),e.jsx("select",{id:"report_month",name:"report_month",value:I.report_month,onChange:wt,onBlur:()=>Xe("report_month"),required:!0,className:pt("report_month"),children:et.map((oe,we)=>e.jsx("option",{value:we+1,children:oe},we+1))}),xe("report_month")]}),e.jsxs("div",{className:`form-group ${pt("report_year")}`,children:[e.jsx("label",{htmlFor:"report_year",children:"Report Year *"}),e.jsx("input",{type:"number",id:"report_year",name:"report_year",value:I.report_year,onChange:wt,onBlur:()=>Xe("report_year"),min:"2020",max:"2050",required:!0,className:pt("report_year"),placeholder:"2024"}),e.jsxs("div",{className:"field-info",children:["Range: 2020 - ",new Date().getFullYear()+1]}),xe("report_year")]})]}),e.jsxs("div",{className:`form-group ${pt("planned_progress_percentage")}`,children:[e.jsx("label",{htmlFor:"planned_progress_percentage",children:"Planned Progress % *"}),e.jsxs("div",{className:"percentage-input",children:[e.jsx("input",{type:"number",id:"planned_progress_percentage",name:"planned_progress_percentage",value:I.planned_progress_percentage,onChange:wt,onBlur:()=>Xe("planned_progress_percentage"),min:"0",max:"100",step:"0.1",required:!0,className:pt("planned_progress_percentage"),placeholder:"0.0"}),e.jsx("span",{className:"percentage-symbol",children:"%"})]}),e.jsx("div",{className:"field-info",children:"Expected progress percentage for this month"}),xe("planned_progress_percentage")]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Milestones Achieved This Month"}),e.jsx("div",{className:"checkbox-grid",children:["Foundation Excavation Complete","Foundation Concrete Pour","Ground Floor Structure","First Floor Structure","Roofing Complete","Electrical Rough-in","Plumbing Rough-in","Final Finishing"].map(oe=>e.jsxs("label",{className:"checkbox-item",children:[e.jsx("input",{type:"checkbox",checked:I.milestones_achieved.includes(oe),onChange:()=>$t(oe)}),e.jsx("span",{children:oe})]},oe))}),e.jsxs("div",{className:"field-info",children:["Selected: ",I.milestones_achieved.length," milestone",I.milestones_achieved.length!==1?"s":""]})]}),e.jsxs("div",{className:`form-group ${pt("delay_explanation")}`,children:[e.jsx("label",{htmlFor:"delay_explanation",children:"Delay Explanation"}),e.jsx("textarea",{id:"delay_explanation",name:"delay_explanation",value:I.delay_explanation,onChange:wt,onBlur:()=>Xe("delay_explanation"),placeholder:"Explain any delays that occurred this month and their impact on the project timeline...",rows:"4",className:pt("delay_explanation"),maxLength:"2000"}),e.jsxs("div",{className:"field-info",children:[I.delay_explanation.length,"/2000 characters"]}),xe("delay_explanation")]}),e.jsxs("div",{className:`form-group ${pt("contractor_remarks")}`,children:[e.jsx("label",{htmlFor:"contractor_remarks",children:"Contractor Remarks *"}),e.jsx("textarea",{id:"contractor_remarks",name:"contractor_remarks",value:I.contractor_remarks,onChange:wt,onBlur:()=>Xe("contractor_remarks"),placeholder:"Provide detailed remarks about the month's progress, challenges faced, quality of work, and plans for next month... (minimum 50 characters)",rows:"6",required:!0,className:pt("contractor_remarks"),maxLength:"3000"}),e.jsxs("div",{className:"field-info",children:[I.contractor_remarks.length,"/3000 characters",I.contractor_remarks.length<50&&I.contractor_remarks.length>0&&e.jsx("span",{className:"char-warning",children:" (minimum 50 required)"})]}),xe("contractor_remarks")]}),e.jsx("div",{className:"form-actions",children:e.jsx("button",{type:"submit",disabled:m||b,className:"submit-btn monthly-btn",children:m?"Submitting...":"Submit Monthly Report"})})]}),k&&e.jsx("div",{className:"modal-overlay",children:e.jsx("div",{className:"modal-container",children:e.jsx(o6,{projectId:A,contractorId:t,onPhotosCaptured:Qt,onClose:()=>T(!1)})})})]})},A6=({contractorId:t,onClose:s})=>{const a=Ni(),[r,o]=N.useState("daily"),[l,A]=N.useState(""),[u,h]=N.useState({startDate:new Date().toISOString().split("T")[0],endDate:new Date().toISOString().split("T")[0]}),[p,m]=N.useState([]),[v,b]=N.useState(null),[x,C]=N.useState(!1),[Q,j]=N.useState(!1);N.useEffect(()=>{B(),L()},[r]);const B=async()=>{try{const U=await(await fetch(`http://localhost/buildhub/backend/api/contractor/get_assigned_projects.php?contractor_id=${t}`,{credentials:"include"})).json();U.success&&m(U.data.projects||[])}catch(E){console.error("Error loading projects:",E)}},L=()=>{const E=new Date;let U,V;switch(r){case"daily":U=V=E.toISOString().split("T")[0];break;case"weekly":const H=new Date(E.setDate(E.getDate()-E.getDay()+1)),I=new Date(H);I.setDate(H.getDate()+6),U=H.toISOString().split("T")[0],V=I.toISOString().split("T")[0];break;case"monthly":const M=new Date(E.getFullYear(),E.getMonth(),1),re=new Date(E.getFullYear(),E.getMonth()+1,0);U=M.toISOString().split("T")[0],V=re.toISOString().split("T")[0];break}h({startDate:U,endDate:V})},P=async()=>{if(!l){a.error("Please select a project");return}C(!0);try{const U=await(await fetch("/buildhub/backend/api/contractor/generate_progress_report.php",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({contractor_id:t,project_id:l,report_type:r,start_date:u.startDate,end_date:u.endDate})})).json();U.success?(b(U.data),a.success("Report generated successfully!")):a.error("Failed to generate report: "+U.message)}catch(E){console.error("Error generating report:",E),a.error("Error generating report")}finally{C(!1)}},F=async()=>{if(v){j(!0);try{const E=document.getElementById("report-content"),U=await Kc(E,{scale:2,useCORS:!0,allowTaint:!0,backgroundColor:"#ffffff"}),V=new is("p","mm","a4"),H=U.toDataURL("image/png"),I=210,M=295,re=U.height*I/U.width;let G=re,Z=0;for(V.addImage(H,"PNG",0,Z,I,re),G-=M;G>=0;)Z=G-re,V.addPage(),V.addImage(H,"PNG",0,Z,I,re),G-=M;const fe=`${r}_report_${v.project.name}_${u.startDate}_to_${u.endDate}.pdf`;V.save(fe),a.success("Report downloaded successfully!")}catch(E){console.error("Error generating PDF:",E),a.error("Error generating PDF")}finally{j(!1)}}},ee=async()=>{if(v)try{const U=await(await fetch("/buildhub/backend/api/contractor/send_report_to_homeowner.php",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({contractor_id:t,project_id:l,report_type:r,report_data:v,date_range:u})})).json();U.success?a.success("Report sent to homeowner successfully!"):a.error("Failed to send report: "+U.message)}catch(E){console.error("Error sending report:",E),a.error("Error sending report")}},K=E=>`${Number(E||0).toLocaleString("en-IN")}`,q=E=>new Date(E).toLocaleDateString("en-IN",{year:"numeric",month:"long",day:"numeric"});return e.jsxs("div",{className:"report-generator",children:[e.jsxs("div",{className:"report-header",children:[e.jsx("h3",{children:" Progress Report Generator"}),e.jsx("button",{className:"close-btn",onClick:s,children:""})]}),e.jsxs("div",{className:"report-config",children:[e.jsxs("div",{className:"config-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Report Type"}),e.jsxs("select",{value:r,onChange:E=>o(E.target.value),children:[e.jsx("option",{value:"daily",children:"Daily Report"}),e.jsx("option",{value:"weekly",children:"Weekly Summary"}),e.jsx("option",{value:"monthly",children:"Monthly Report"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Project"}),e.jsxs("select",{value:l,onChange:E=>A(E.target.value),children:[e.jsx("option",{value:"",children:"Select Project..."}),p.map(E=>e.jsx("option",{value:E.project_id,children:E.project_display_name},E.project_id))]})]})]}),e.jsxs("div",{className:"config-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Start Date"}),e.jsx("input",{type:"date",value:u.startDate,onChange:E=>h(U=>({...U,startDate:E.target.value}))})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"End Date"}),e.jsx("input",{type:"date",value:u.endDate,onChange:E=>h(U=>({...U,endDate:E.target.value}))})]})]}),e.jsx("div",{className:"config-actions",children:e.jsx("button",{className:"generate-btn",onClick:P,disabled:x,children:x?" Generating...":" Generate Report"})})]}),v&&e.jsxs("div",{className:"report-container",children:[e.jsxs("div",{className:"report-actions",children:[e.jsx("button",{className:"download-btn",onClick:F,disabled:Q,children:Q?" Creating PDF...":" Download PDF"}),e.jsx("button",{className:"send-btn",onClick:ee,children:" Send to Homeowner"})]}),e.jsxs("div",{id:"report-content",className:"report-content",children:[e.jsxs("div",{className:"report-title-section",children:[e.jsxs("div",{className:"company-header",children:[e.jsx("div",{className:"company-logo",children:""}),e.jsxs("div",{className:"company-info",children:[e.jsx("h1",{children:"BuildHub Construction Report"}),e.jsx("p",{children:"Professional Construction Progress Tracking"})]})]}),e.jsxs("div",{className:"report-meta",children:[e.jsxs("h2",{children:[r.charAt(0).toUpperCase()+r.slice(1)," Progress Report"]}),e.jsxs("div",{className:"meta-grid",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Project:"})," ",v.project.name]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Contractor:"})," ",v.contractor.name]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Period:"})," ",q(u.startDate)," to ",q(u.endDate)]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Generated:"})," ",new Date().toLocaleString("en-IN")]})]})]})]}),e.jsxs("div",{className:"report-section",children:[e.jsx("h3",{children:" Executive Summary"}),e.jsxs("div",{className:"summary-grid",children:[e.jsxs("div",{className:"summary-card",children:[e.jsx("div",{className:"summary-value",children:v.summary.total_days}),e.jsx("div",{className:"summary-label",children:"Working Days"})]}),e.jsxs("div",{className:"summary-card",children:[e.jsx("div",{className:"summary-value",children:v.summary.total_workers}),e.jsx("div",{className:"summary-label",children:"Total Workers"})]}),e.jsxs("div",{className:"summary-card",children:[e.jsxs("div",{className:"summary-value",children:[v.summary.total_hours,"h"]}),e.jsx("div",{className:"summary-label",children:"Total Hours"})]}),e.jsxs("div",{className:"summary-card",children:[e.jsxs("div",{className:"summary-value",children:[v.summary.progress_percentage,"%"]}),e.jsx("div",{className:"summary-label",children:"Progress Made"})]}),e.jsxs("div",{className:"summary-card",children:[e.jsx("div",{className:"summary-value",children:K(v.summary.total_wages)}),e.jsx("div",{className:"summary-label",children:"Total Wages"})]}),e.jsxs("div",{className:"summary-card",children:[e.jsx("div",{className:"summary-value",children:v.summary.photos_count}),e.jsx("div",{className:"summary-label",children:"Photos Taken"})]})]})]}),e.jsxs("div",{className:"report-section",children:[e.jsx("h3",{children:" Work Progress Details"}),v.daily_updates.map((E,U)=>e.jsxs("div",{className:"progress-item",children:[e.jsxs("div",{className:"progress-header",children:[e.jsx("h4",{children:q(E.update_date)}),e.jsx("span",{className:"progress-badge",children:E.construction_stage})]}),e.jsxs("div",{className:"progress-details",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Work Done:"})," ",E.work_done_today]}),e.jsxs("div",{className:"progress-meta",children:[e.jsxs("span",{children:["Progress: +",E.incremental_completion_percentage,"%"]}),e.jsxs("span",{children:["Hours: ",E.working_hours,"h"]}),e.jsxs("span",{children:["Weather: ",E.weather_condition]})]}),E.materials_used&&e.jsxs("p",{children:[e.jsx("strong",{children:"Materials Used:"})," ",E.materials_used]}),E.site_issues&&e.jsxs("p",{children:[e.jsx("strong",{children:"Issues:"})," ",E.site_issues]})]})]},U))]}),e.jsxs("div",{className:"report-section",children:[e.jsx("h3",{children:" Labour Analysis"}),e.jsx("div",{className:"labour-summary",children:e.jsxs("table",{className:"labour-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Worker Type"}),e.jsx("th",{children:"Total Workers"}),e.jsx("th",{children:"Total Hours"}),e.jsx("th",{children:"Overtime Hours"}),e.jsx("th",{children:"Total Wages"}),e.jsx("th",{children:"Avg Productivity"})]})}),e.jsx("tbody",{children:Object.entries(v.labour_analysis).map(([E,U])=>e.jsxs("tr",{children:[e.jsx("td",{children:E}),e.jsx("td",{children:U.total_workers}),e.jsxs("td",{children:[U.total_hours,"h"]}),e.jsxs("td",{children:[U.overtime_hours,"h"]}),e.jsx("td",{children:K(U.total_wages)}),e.jsxs("td",{children:[U.avg_productivity,"/5"]})]},E))})]})})]}),e.jsxs("div",{className:"report-section",children:[e.jsx("h3",{children:" Materials & Costs Summary"}),e.jsxs("div",{className:"materials-grid",children:[e.jsxs("div",{className:"cost-breakdown",children:[e.jsx("h4",{children:"Cost Breakdown"}),e.jsxs("div",{className:"cost-item",children:[e.jsx("span",{children:"Labour Costs:"}),e.jsx("span",{children:K(v.costs.labour_cost)})]}),e.jsxs("div",{className:"cost-item",children:[e.jsx("span",{children:"Material Costs:"}),e.jsx("span",{children:K(v.costs.material_cost)})]}),e.jsxs("div",{className:"cost-item",children:[e.jsx("span",{children:"Equipment Costs:"}),e.jsx("span",{children:K(v.costs.equipment_cost)})]}),e.jsxs("div",{className:"cost-item total",children:[e.jsx("span",{children:"Total Period Cost:"}),e.jsx("span",{children:K(v.costs.total_cost)})]})]}),e.jsxs("div",{className:"materials-used",children:[e.jsx("h4",{children:"Materials Used"}),v.materials.map((E,U)=>e.jsxs("div",{className:"material-item",children:[e.jsx("span",{children:E.name}),e.jsxs("span",{children:[E.quantity," ",E.unit]})]},U))]})]})]}),e.jsxs("div",{className:"report-section",children:[e.jsx("h3",{children:" Photos & Documentation"}),e.jsxs("div",{className:"photos-summary",children:[e.jsxs("p",{children:["Total Photos Captured: ",e.jsx("strong",{children:v.summary.photos_count})]}),e.jsxs("p",{children:["Geo-Located Photos: ",e.jsx("strong",{children:v.summary.geo_photos_count})]}),e.jsx("div",{className:"photo-grid",children:v.photos.slice(0,6).map((E,U)=>e.jsxs("div",{className:"photo-item",children:[e.jsx("img",{src:E.url,alt:`Progress ${U+1}`}),e.jsxs("div",{className:"photo-info",children:[e.jsx("small",{children:q(E.date)}),e.jsx("small",{children:E.location})]})]},U))})]})]}),e.jsxs("div",{className:"report-section",children:[e.jsx("h3",{children:" Quality & Safety Metrics"}),e.jsxs("div",{className:"metrics-grid",children:[e.jsxs("div",{className:"metric-card",children:[e.jsx("h4",{children:"Safety Compliance"}),e.jsxs("div",{className:"metric-value",children:[v.quality.safety_score,"/5"]}),e.jsx("div",{className:"metric-status",children:v.quality.safety_score>=4?" Excellent":v.quality.safety_score>=3?" Good":" Needs Improvement"})]}),e.jsxs("div",{className:"metric-card",children:[e.jsx("h4",{children:"Work Quality"}),e.jsxs("div",{className:"metric-value",children:[v.quality.quality_score,"/5"]}),e.jsx("div",{className:"metric-status",children:v.quality.quality_score>=4?" High Quality":v.quality.quality_score>=3?" Acceptable":" Below Standard"})]}),e.jsxs("div",{className:"metric-card",children:[e.jsx("h4",{children:"Schedule Adherence"}),e.jsxs("div",{className:"metric-value",children:[v.quality.schedule_adherence,"%"]}),e.jsx("div",{className:"metric-status",children:v.quality.schedule_adherence>=90?" On Track":v.quality.schedule_adherence>=70?" Minor Delays":" Behind Schedule"})]})]})]}),e.jsxs("div",{className:"report-section",children:[e.jsx("h3",{children:" Recommendations & Next Steps"}),e.jsx("div",{className:"recommendations",children:v.recommendations.map((E,U)=>e.jsxs("div",{className:"recommendation-item",children:[e.jsx("div",{className:"rec-priority",children:E.priority}),e.jsxs("div",{className:"rec-content",children:[e.jsx("h5",{children:E.title}),e.jsx("p",{children:E.description})]})]},U))})]}),e.jsxs("div",{className:"report-footer",children:[e.jsxs("div",{className:"signatures",children:[e.jsxs("div",{className:"signature-block",children:[e.jsx("div",{className:"signature-line"}),e.jsx("p",{children:"Contractor Signature"}),e.jsx("p",{children:v.contractor.name}),e.jsxs("p",{children:["Date: ",q(new Date().toISOString().split("T")[0])]})]}),e.jsxs("div",{className:"signature-block",children:[e.jsx("div",{className:"signature-line"}),e.jsx("p",{children:"Homeowner Acknowledgment"}),e.jsx("p",{children:"Date: _______________"})]})]}),e.jsxs("div",{className:"report-disclaimer",children:[e.jsx("p",{children:"This report is generated automatically from BuildHub construction tracking system."}),e.jsx("p",{children:"All data is recorded in real-time and verified through GPS-enabled photo documentation."})]})]})]})]})]})},d6=({contractorId:t,onPaymentRequested:s})=>{const a=Ni(),[r,o]=N.useState([]),[l,A]=N.useState(""),[u,h]=N.useState([]),[p,m]=N.useState(!1),[v,b]=N.useState(!0),[x,C]=N.useState("request");N.useEffect(()=>{Q()},[t]),N.useEffect(()=>{l&&j()},[l]);const Q=async()=>{try{b(!0);const E=await(await fetch(`/buildhub/backend/api/contractor/get_assigned_projects.php?contractor_id=${t}`,{credentials:"include"})).json();E.success?o(E.data.projects||[]):a.error("Failed to load projects: "+E.message)}catch(q){console.error("Error loading projects:",q),a.error("Error loading projects")}finally{b(!1)}},j=async()=>{try{m(!0);const E=await(await fetch(`/buildhub/backend/api/contractor/get_payment_history.php?project_id=${l}&contractor_id=${t}`,{credentials:"include"})).json();E.success?h(E.data.payment_requests||[]):(console.warn("Failed to load payment history:",E.message),h([]))}catch(q){console.error("Error loading payment history:",q),h([])}finally{m(!1)}},B=q=>{a.success(`Payment request submitted: ${q.requested_amount} for ${q.stage_name} stage`),j(),s&&s(q)},L=q=>{switch(q){case"pending":return"status-pending";case"approved":return"status-approved";case"rejected":return"status-rejected";case"paid":return"status-paid";default:return"status-unknown"}},P=q=>{switch(q){case"pending":return"";case"approved":return"";case"rejected":return"";case"paid":return"";default:return""}},F=q=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0,maximumFractionDigits:0}).format(q),ee=q=>new Date(q).toLocaleDateString("en-IN",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),K=()=>r.find(E=>E.project_id==l)||null;return v?e.jsx("div",{className:"payment-manager",children:e.jsxs("div",{className:"loading-spinner",children:[e.jsx("div",{className:"spinner"}),e.jsx("p",{children:"Loading projects..."})]})}):e.jsxs("div",{className:"payment-manager",children:[e.jsxs("div",{className:"project-selection-section",children:[e.jsx("h3",{children:"Select Project"}),e.jsxs("div",{className:"project-selection-container",children:[e.jsxs("select",{value:l,onChange:q=>A(q.target.value),className:"project-select",children:[e.jsx("option",{value:"",children:"Choose a project..."}),r.map(q=>e.jsx("option",{value:q.project_id,children:q.project_display_name},q.project_id))]}),l&&e.jsx("div",{className:"selected-project-info",children:(()=>{const q=K();return q?e.jsxs("div",{className:"project-summary",children:[e.jsxs("div",{className:"project-header",children:[e.jsx("h4",{children:q.project_summary.homeowner_name}),e.jsx("span",{className:"project-status",children:q.project_summary.status_display})]}),e.jsxs("div",{className:"project-details",children:[e.jsxs("span",{children:[e.jsx("strong",{children:"Budget:"})," ",q.project_summary.total_cost_formatted]}),e.jsxs("span",{children:[e.jsx("strong",{children:"Progress:"})," ",q.latest_progress,"%"]}),e.jsxs("span",{children:[e.jsx("strong",{children:"Location:"})," ",q.project_summary.location]})]})]}):null})()})]})]}),l&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"payment-tabs",children:[e.jsx("button",{className:`tab-btn ${x==="request"?"active":""}`,onClick:()=>C("request"),children:" Request Payment"}),e.jsx("button",{className:`tab-btn ${x==="history"?"active":""}`,onClick:()=>C("history"),children:" Payment History"})]}),x==="request"?e.jsxs("div",{className:"payment-request-tab",children:[e.jsxs("div",{className:"tab-header",children:[e.jsx("h3",{children:"Request Stage Payment"}),e.jsx("p",{children:"Submit payment requests for completed construction stages"})]}),e.jsx(o2,{projectId:l,contractorId:t,onPaymentRequested:B,showStageSelector:!0})]}):e.jsxs("div",{className:"payment-history-tab",children:[e.jsxs("div",{className:"tab-header",children:[e.jsx("h3",{children:"Payment History"}),e.jsx("p",{children:"Track all payment requests and their status"})]}),p?e.jsxs("div",{className:"loading-spinner",children:[e.jsx("div",{className:"spinner"}),e.jsx("p",{children:"Loading payment history..."})]}):u.length===0?e.jsxs("div",{className:"no-payments",children:[e.jsx("div",{className:"no-payments-icon",children:""}),e.jsx("h4",{children:"No Payment Requests"}),e.jsx("p",{children:"You haven't submitted any payment requests for this project yet."}),e.jsx("p",{children:'Use the "Request Payment" tab to submit your first payment request.'})]}):e.jsx("div",{className:"payment-history-grid",children:u.map(q=>e.jsxs("div",{className:`payment-history-card ${L(q.status)}`,children:[e.jsxs("div",{className:"card-header",children:[e.jsxs("div",{className:"stage-info",children:[e.jsxs("h4",{children:[" ",q.stage_name," Stage"]}),e.jsxs("p",{children:["Progress: ",q.completion_percentage,"%"]})]}),e.jsxs("div",{className:`status-badge ${L(q.status)}`,children:[P(q.status)," ",q.status.toUpperCase()]})]}),e.jsxs("div",{className:"payment-details",children:[e.jsxs("div",{className:"amount-section",children:[e.jsxs("div",{className:"requested-amount",children:[e.jsx("span",{className:"label",children:"Requested:"}),e.jsx("span",{className:"amount",children:F(q.requested_amount)})]}),q.approved_amount&&q.approved_amount!==q.requested_amount&&e.jsxs("div",{className:"approved-amount",children:[e.jsx("span",{className:"label",children:"Approved:"}),e.jsx("span",{className:"amount",children:F(q.approved_amount)})]})]}),e.jsxs("div",{className:"work-description",children:[e.jsx("strong",{children:"Work Description:"}),e.jsx("p",{children:q.work_description})]}),q.contractor_notes&&e.jsxs("div",{className:"contractor-notes",children:[e.jsx("strong",{children:"Your Notes:"}),e.jsx("p",{children:q.contractor_notes})]}),q.homeowner_notes&&e.jsxs("div",{className:"homeowner-response",children:[e.jsx("strong",{children:"Homeowner Response:"}),e.jsx("p",{children:q.homeowner_notes})]})]}),e.jsxs("div",{className:"request-dates",children:[e.jsxs("div",{className:"date-item",children:[e.jsx("span",{className:"label",children:"Requested:"}),e.jsx("span",{className:"date",children:ee(q.request_date)})]}),q.response_date&&e.jsxs("div",{className:"date-item",children:[e.jsx("span",{className:"label",children:"Responded:"}),e.jsx("span",{className:"date",children:ee(q.response_date)})]})]})]},q.id))})]})]}),!l&&e.jsx("div",{className:"no-project-selected",children:e.jsxs("div",{className:"info-message",children:[e.jsx("div",{className:"info-icon",children:""}),e.jsx("h4",{children:"Select a Project"}),e.jsx("p",{children:"Please select a project from the dropdown above to manage payment requests."}),e.jsx("p",{children:"You can then request payments for construction stages and track their status."})]})})]})},u6=()=>{const t=Wr(),s=Ni(),[a,r]=N.useState("overview"),[o,l]=N.useState(null),[A,u]=N.useState([]),[h,p]=N.useState([]),[m,v]=N.useState({}),[b,x]=N.useState({}),[C,Q]=N.useState([]),[j,B]=N.useState([]),[L,P]=N.useState([]),[F,ee]=N.useState([]),[K,q]=N.useState(!1),[E,U]=N.useState(""),[V,H]=N.useState(""),[I]=N.useState(!1),[M,re]=N.useState({}),[G,Z]=N.useState(null),fe=N.useRef(null),[Ae,Ce]=N.useState(0),[te,he]=N.useState(0),[k,T]=N.useState(0),[z,le]=N.useState(0),[X,W]=N.useState(0),[de,me]=N.useState(""),[Be,Qe]=N.useState("submit"),[ut,mt]=N.useState(!1),[Ve,je]=N.useState({isOpen:!1,title:"",message:"",onConfirm:null,type:"danger"}),Ft=(_e,St,$e,kt="danger")=>{je({isOpen:!0,title:_e,message:St,onConfirm:$e,type:kt})},Rt=()=>{je({isOpen:!1,title:"",message:"",onConfirm:null,type:"danger"})},at=async _e=>{try{const St=new FormData(_e),$e=Ms=>St.get(Ms)||"",kt=new Date().toLocaleDateString("en-IN",{year:"numeric",month:"long",day:"numeric"}),Ze=o?.first_name&&o?.last_name?`${o.first_name} ${o.last_name}`:"Contractor Name",oe=document.createElement("div");oe.style.position="absolute",oe.style.left="-9999px",oe.style.top="-9999px",oe.style.width="210mm",oe.style.padding="20mm",oe.style.backgroundColor="white",oe.style.fontFamily="Times New Roman, serif",oe.style.fontSize="12px",oe.style.lineHeight="1.4",oe.style.color="#1a1a1a";const we=`
      <style>
        @page { 
          margin: 20mm; 
          size: A4;
        }
        body{
          font-family: 'Times New Roman', serif;
          color: #1a1a1a;
          margin: 0;
          padding: 0;
          line-height: 1.4;
          background: white;
        }
        .header {
          text-align: center;
          margin-bottom: 30px;
          border-bottom: 3px solid #2c3e50;
          padding-bottom: 20px;
        }
        .company-logo {
          width: 120px;
          height: 120px;
          margin: 0 auto 15px;
          border: 2px solid #2c3e50;
          border-radius: 50%;
          display: flex;
          align-items: center;
          justify-content: center;
          font-size: 48px;
          font-weight: bold;
          color: #2c3e50;
          background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
        }
        .company-name {
          font-size: 28px;
          font-weight: bold;
          color: #2c3e50;
          margin: 10px 0 5px 0;
          text-transform: uppercase;
          letter-spacing: 2px;
        }
        .company-tagline {
          font-size: 14px;
          color: #6c757d;
          font-style: italic;
          margin-bottom: 10px;
        }
        .company-details {
          font-size: 12px;
          color: #495057;
          line-height: 1.3;
        }
        .document-title {
          text-align: center;
          margin: 30px 0;
          font-size: 24px;
          font-weight: bold;
          color: #2c3e50;
          text-transform: uppercase;
          letter-spacing: 1px;
        }
        .estimate-info {
          display: grid;
          grid-template-columns: 1fr 1fr;
          gap: 20px;
          margin-bottom: 30px;
          padding: 15px;
          background: #f8f9fa;
          border-left: 4px solid #2c3e50;
        }
        .info-section h3 {
          margin: 0 0 10px 0;
          font-size: 16px;
          color: #2c3e50;
          border-bottom: 1px solid #dee2e6;
          padding-bottom: 5px;
        }
        .info-section p {
          margin: 5px 0;
          font-size: 14px;
        }
        .cost-breakdown {
          margin: 30px 0;
        }
        .cost-breakdown h2 {
          font-size: 20px;
          color: #2c3e50;
          border-bottom: 2px solid #2c3e50;
          padding-bottom: 10px;
          margin-bottom: 20px;
        }
        .cost-table {
          width: 100%;
          border-collapse: collapse;
          margin-bottom: 20px;
          box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .cost-table th {
          background: #2c3e50;
          color: white;
          padding: 12px;
          text-align: left;
          font-weight: bold;
          font-size: 14px;
        }
        .cost-table td {
          padding: 10px 12px;
          border-bottom: 1px solid #dee2e6;
          font-size: 14px;
        }
        .cost-table tr:nth-child(even) {
          background: #f8f9fa;
        }
        .cost-table tr:hover {
          background: #e9ecef;
        }
        .total-section {
          margin: 30px 0;
          padding: 20px;
          background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
          color: white;
          border-radius: 8px;
        }
        .total-section h2 {
          margin: 0 0 15px 0;
          font-size: 18px;
          text-align: center;
        }
        .total-row {
          display: flex;
          justify-content: space-between;
          margin: 8px 0;
          font-size: 16px;
        }
        .grand-total {
          border-top: 2px solid white;
          padding-top: 10px;
          margin-top: 15px;
          font-size: 18px;
          font-weight: bold;
        }
        .terms-section {
          margin: 30px 0;
          padding: 20px;
          background: #f8f9fa;
          border-left: 4px solid #28a745;
        }
        .terms-section h3 {
          margin: 0 0 15px 0;
          color: #28a745;
          font-size: 16px;
        }
        .terms-section p {
          margin: 8px 0;
          font-size: 14px;
          line-height: 1.5;
        }
        .signature-section {
          margin-top: 50px;
          display: grid;
          grid-template-columns: 1fr 1fr;
          gap: 40px;
        }
        .signature-box {
          text-align: center;
          padding: 20px;
          border: 2px solid #2c3e50;
          border-radius: 8px;
          background: #f8f9fa;
        }
        .signature-line {
          border-bottom: 2px solid #2c3e50;
          margin: 40px 0 10px 0;
          height: 2px;
        }
        .signature-label {
          font-size: 14px;
          font-weight: bold;
          color: #2c3e50;
          margin-top: 10px;
        }
        .contractor-seal {
          width: 100px;
          height: 100px;
          border: 3px solid #dc3545;
          border-radius: 50%;
          margin: 0 auto 15px;
          display: flex;
          align-items: center;
          justify-content: center;
          font-size: 12px;
          font-weight: bold;
          color: #dc3545;
          background: white;
          text-align: center;
          line-height: 1.2;
        }
        .footer {
          margin-top: 40px;
          text-align: center;
          font-size: 12px;
          color: #6c757d;
          border-top: 1px solid #dee2e6;
          padding-top: 15px;
        }
        @media print {
          body { margin: 0; }
          .header { page-break-inside: avoid; }
          .signature-section { page-break-inside: avoid; }
        }
      </style>
      </head><body>
        <!-- Company Header -->
        <div class="header">
          <div class="company-logo"></div>
          <div class="company-name">${Ze} Construction</div>
          <div class="company-tagline">Professional Construction Services</div>
          <div class="company-details">
             Email: ${o?.email||"contact@company.com"} | 
             Phone: ${o?.phone||"+91-XXXXX-XXXXX"} | 
             License: ${o?.license_number||"LIC-XXXXX"}
          </div>
        </div>

        <!-- Document Title -->
        <div class="document-title">Cost Estimate Report</div>

        <!-- Estimate Information -->
        <div class="estimate-info">
          <div class="info-section">
            <h3>Project Details</h3>
            <p><strong>Project Name:</strong> ${$e("project_name")||"Construction Project"}</p>
            <p><strong>Location:</strong> ${$e("location")||"Project Location"}</p>
            <p><strong>Client:</strong> ${$e("client_name")||"Client Name"}</p>
            <p><strong>Project Type:</strong> ${$e("project_type")||"Residential/Commercial"}</p>
        </div>
          <div class="info-section">
            <h3>Estimate Information</h3>
            <p><strong>Estimate Date:</strong> ${kt}</p>
            <p><strong>Estimate Valid Until:</strong> ${new Date(Date.now()+720*60*60*1e3).toLocaleDateString("en-IN")}</p>
            <p><strong>Project Duration:</strong> ${$e("timeline")||"90 days"}</p>
            <p><strong>Estimate #:</strong> EST-${Date.now().toString().slice(-6)}</p>
        </div>
        </div>

        <!-- Cost Breakdown -->
        <div class="cost-breakdown">
          <h2>Detailed Cost Breakdown</h2>
          <table class="cost-table">
            <thead>
              <tr>
                <th>Item Description</th>
                <th>Quantity</th>
                <th>Unit Rate ()</th>
                <th>Amount ()</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td><strong>MATERIALS</strong></td>
                <td></td>
                <td></td>
                <td></td>
              </tr>
              <tr>
                <td>Cement (OPC 43 Grade)</td>
                <td>${$e("structured[materials][cement][qty]")||"50"} bags</td>
                <td>${$e("structured[materials][cement][rate]")||"400"}</td>
                <td>${(parseFloat($e("structured[materials][cement][qty]")||"50")*parseFloat($e("structured[materials][cement][rate]")||"400")).toLocaleString("en-IN")}</td>
              </tr>
              <tr>
                <td>Sand (River Sand)</td>
                <td>${$e("structured[materials][sand][qty]")||"5"} m</td>
                <td>${$e("structured[materials][sand][rate]")||"2000"}</td>
                <td>${(parseFloat($e("structured[materials][sand][qty]")||"5")*parseFloat($e("structured[materials][sand][rate]")||"2000")).toLocaleString("en-IN")}</td>
              </tr>
              <tr>
                <td>Bricks (Red Clay)</td>
                <td>${$e("structured[materials][bricks][qty]")||"2000"} nos</td>
                <td>${$e("structured[materials][bricks][rate]")||"8"}</td>
                <td>${(parseFloat($e("structured[materials][bricks][qty]")||"2000")*parseFloat($e("structured[materials][bricks][rate]")||"8")).toLocaleString("en-IN")}</td>
              </tr>
              <tr>
                <td><strong>LABOR</strong></td>
                <td></td>
                <td></td>
                <td></td>
              </tr>
              <tr>
                <td>Masonry Work</td>
                <td>${$e("structured[labor][masonry][qty]")||"1"} unit</td>
                <td>${$e("structured[labor][masonry][rate]")||"15000"}</td>
                <td>${(parseFloat($e("structured[labor][masonry][qty]")||"1")*parseFloat($e("structured[labor][masonry][rate]")||"15000")).toLocaleString("en-IN")}</td>
              </tr>
              <tr>
                <td>Plumbing Work</td>
                <td>${$e("structured[labor][plumbing][qty]")||"1"} unit</td>
                <td>${$e("structured[labor][plumbing][rate]")||"12000"}</td>
                <td>${(parseFloat($e("structured[labor][plumbing][qty]")||"1")*parseFloat($e("structured[labor][plumbing][rate]")||"12000")).toLocaleString("en-IN")}</td>
              </tr>
              <tr>
                <td>Electrical Work</td>
                <td>${$e("structured[labor][electrical][qty]")||"1"} unit</td>
                <td>${$e("structured[labor][electrical][rate]")||"10000"}</td>
                <td>${(parseFloat($e("structured[labor][electrical][qty]")||"1")*parseFloat($e("structured[labor][electrical][rate]")||"10000")).toLocaleString("en-IN")}</td>
              </tr>
            </tbody>
          </table>
        </div>

        <!-- Total Section -->
        <div class="total-section">
          <h2>Cost Summary</h2>
          <div class="total-row">
            <span>Materials Cost:</span>
            <span>${$e("structured[totals][materials_total]")||"50000"}</span>
        </div>
          <div class="total-row">
            <span>Labor Cost:</span>
            <span>${$e("structured[totals][labor_total]")||"37000"}</span>
          </div>
          <div class="total-row">
            <span>Transportation:</span>
            <span>${$e("structured[totals][transport_total]")||"5000"}</span>
          </div>
          <div class="total-row">
            <span>Contingency (5%):</span>
            <span>${$e("structured[totals][contingency_total]")||"4600"}</span>
          </div>
          <div class="total-row grand-total">
            <span>GRAND TOTAL:</span>
            <span>${$e("structured[totals][grand_total]")||"96600"}</span>
          </div>
        </div>

        <!-- Terms and Conditions -->
        <div class="terms-section">
          <h3>Terms & Conditions</h3>
          <p><strong>Payment Terms:</strong> 30% advance, 40% on completion of foundation, 30% on completion</p>
          <p><strong>Validity:</strong> This estimate is valid for 30 days from the date of issue</p>
          <p><strong>Materials:</strong> All materials will be of standard quality as per specifications</p>
          <p><strong>Timeline:</strong> Project completion within ${$e("timeline")||"90"} days from commencement</p>
          <p><strong>Warranty:</strong> 1 year warranty on workmanship, 5 years on structural elements</p>
          <p><strong>Notes:</strong> ${$e("notes")||"All work to be done as per approved drawings and specifications"}</p>
        </div>

        <!-- Signature Section -->
        <div class="signature-section">
          <div class="signature-box">
            <div class="signature-line"></div>
            <div class="signature-label">Client Signature</div>
            <p style="margin-top: 10px; font-size: 12px; color: #6c757d;">Date: _______________</p>
          </div>
          <div class="signature-box">
            <div class="contractor-seal">
              <div>OFFICIAL<br/>SEAL</div>
            </div>
            <div class="signature-line"></div>
            <div class="signature-label">${Ze}</div>
            <p style="margin-top: 5px; font-size: 12px; color: #6c757d;">Authorized Contractor</p>
            <p style="margin-top: 5px; font-size: 12px; color: #6c757d;">Date: ${kt}</p>
          </div>
        </div>

        <!-- Footer -->
        <div class="footer">
          <p>This is a computer-generated estimate. For any clarifications, please contact us.</p>
          <p> ${new Date().getFullYear()} ${Ze} Construction. All rights reserved.</p>
        </div>
      </body></html>`;oe.innerHTML=we,document.body.appendChild(oe),console.log("Converting HTML to canvas...");const Ee=await Kc(oe,{scale:2,useCORS:!0,allowTaint:!0,backgroundColor:"#ffffff"});console.log("Canvas created:",Ee.width,"x",Ee.height),document.body.removeChild(oe),console.log("Creating PDF...");const Re=new is("p","mm","a4"),We=Ee.toDataURL("image/png"),Lt=210,Vt=295,Ot=Ee.height*Lt/Ee.width;let ss=Ot;console.log("Image dimensions:",Lt,"x",Ot);let xs=0;for(Re.addImage(We,"PNG",0,xs,Lt,Ot),ss-=Vt;ss>=0;)xs=ss-Ot,Re.addPage(),Re.addImage(We,"PNG",0,xs,Lt,Ot),ss-=Vt;const Hs=`Estimate_${Ze.replace(/\s+/g,"_")}_${Date.now().toString().slice(-6)}.pdf`;console.log("Saving PDF as:",Hs);try{const Ms=Re.output("blob"),la=URL.createObjectURL(Ms),Zs=document.createElement("a");Zs.href=la,Zs.download=Hs,Zs.style.display="none",document.body.appendChild(Zs),Zs.click(),document.body.removeChild(Zs),URL.revokeObjectURL(la),console.log("PDF downloaded via blob method")}catch(Ms){console.log("Blob method failed, trying direct save:",Ms),Re.save(Hs)}console.log("PDF save method called")}catch(St){console.error("Error generating PDF report:",St),s.error("Error generating PDF report")}};N.useEffect(()=>(window.__bhCalcSectionTotals=_e=>{try{Xe(_e)}catch{}},()=>{try{window.__bhCalcSectionTotals&&delete window.__bhCalcSectionTotals}catch{}}),[]);const Xe=_e=>{if(!_e)return;try{["materials","labor","utilities","misc"].forEach(we=>{_e.querySelectorAll(`input[name^="structured[${we}]"][name$="[qty]"]`).forEach(Re=>{const We=Re.name.replace(/\[qty\]$/,""),Lt=_e.querySelector(`input[name="${We}[rate]"]`),Vt=_e.querySelector(`input[name="${We}[amount]"]`),Ot=parseFloat((Re.value||"").toString().replace(/[,\s]/g,""))||0,ss=parseFloat((Lt&&Lt.value||"").toString().replace(/[,\s]/g,""))||0,xs=Ot*ss;Vt&&(Vt.value=xs?String(xs):"")})})}catch{}const St=we=>{const Ee=_e.querySelectorAll(`input[name^="${we}"][name$="[amount]"]`);let Re;Ee&&Ee.length>0?Re=Ee:Re=_e.querySelectorAll(`input[name^="${we}"]`);let We=0;return Re.forEach(Lt=>{const Ot=(Lt&&Lt.value||"").match(/[-+]?(?:\d+\.?\d*|\d*\.?\d+)/g);Ot&&Ot.forEach(ss=>{const xs=parseFloat(ss);Number.isNaN(xs)||(We+=xs)})}),We},$e=St("structured[materials]"),kt=St("structured[labor]"),Ze=St("structured[utilities]"),oe=St("structured[misc]");Ce($e),he(kt),T(Ze),le(oe),W($e+kt+Ze+oe)},pt=Array.isArray(A)?A.length:0;Array.isArray(C)&&C.length;const xe=Array.isArray(h)?h.length:0;N.useEffect(()=>{let _e=!0;const St=async()=>{try{const Ze=await(await fetch("/buildhub/backend/api/contractor/get_layout_requests.php")).json().catch(()=>({}));_e&&Ze?.success&&u(Array.isArray(Ze.requests)?Ze.requests:[])}catch{}try{const Ze=await(await fetch("/buildhub/backend/api/contractor/get_my_proposals.php")).json().catch(()=>({}));_e&&Ze?.success&&Q(Array.isArray(Ze.proposals)?Ze.proposals:[])}catch{}try{const kt=JSON.parse(sessionStorage.getItem("user")||"{}");if(kt?.id){const oe=await(await fetch(`/buildhub/backend/api/contractor/get_construction_estimates.php?contractor_id=${kt.id}`,{credentials:"include"})).json().catch(()=>({}));_e&&oe?.success&&P(Array.isArray(oe.estimates)?oe.estimates:[]);const Ee=await(await fetch(`/buildhub/backend/api/contractor/get_construction_details.php?contractor_id=${kt.id}`,{credentials:"include"})).json().catch(()=>({}));_e&&Ee?.success&&ee(Array.isArray(Ee.construction_projects)?Ee.construction_projects:[])}}catch{}try{const kt=JSON.parse(sessionStorage.getItem("user")||"{}");if(kt?.id){const oe=await(await fetch(`/buildhub/backend/api/contractor/get_inbox.php?contractor_id=${kt.id}`,{credentials:"include"})).json().catch(()=>({}));_e&&oe?.success&&p(Array.isArray(oe.items)?oe.items:[])}}catch{}try{const kt=JSON.parse(sessionStorage.getItem("user")||"{}");if(kt?.id){const oe=await(await fetch(`/buildhub/backend/api/contractor/get_inbox.php?contractor_id=${kt.id}`,{credentials:"include"})).json().catch(()=>({}));_e&&oe?.success&&p(Array.isArray(oe.items)?oe.items:[])}}catch{}try{const kt=JSON.parse(sessionStorage.getItem("user")||"{}");if(kt?.id){const oe=await(await fetch(`/buildhub/backend/api/contractor/get_inbox.php?contractor_id=${kt.id}`,{credentials:"include"})).json().catch(()=>({}));_e&&oe?.success&&p(Array.isArray(oe.items)?oe.items:[])}}catch{}try{const kt=JSON.parse(sessionStorage.getItem("user")||"{}");if(_e&&kt?.id){const oe=await(await fetch(`/buildhub/backend/api/contractor/get_my_estimates.php?contractor_id=${kt.id}`,{credentials:"include"})).json().catch(()=>({}));oe?.success&&B(Array.isArray(oe.estimates)?oe.estimates:[])}}catch{}};St();const $e=setInterval(St,6e4);return()=>{_e=!1,clearInterval($e)}},[]),N.useEffect(()=>{const _e=JSON.parse(sessionStorage.getItem("user")||"{}");l(_e),li(async()=>{const{preventCache:$e,verifyServerSession:kt}=await import("./session-DODIVVdM.js");return{preventCache:$e,verifyServerSession:kt}},[]).then(({preventCache:$e,verifyServerSession:kt})=>{$e(),(async()=>{const Ze=await kt();if(!_e.id||_e.role!=="contractor"||!Ze){sessionStorage.removeItem("user"),localStorage.removeItem("bh_user"),t("/login",{replace:!0});return}et(),Ut(),wt()})()});const St=()=>{wt()};return window.addEventListener("refreshEstimates",St),()=>{window.removeEventListener("refreshEstimates",St)}},[]);const et=async()=>{q(!0);try{const St=await(await fetch("/buildhub/backend/api/contractor/get_layout_requests.php")).json();St.success&&u(St.requests||[])}catch(_e){console.error("Error fetching layout requests:",_e)}finally{q(!1)}},Oe=_e=>{if(!_e)return{};try{return typeof _e=="string"?JSON.parse(_e):_e}catch{return{}}},Bt=_e=>{const St=Oe(_e.requirements),$e=St.forwarded_design;if(!$e)return null;const kt=Array.isArray($e.files)?$e.files:[],Ze=$e.technical_details||{},oe=Ee=>{if(!Ee)return"-";if(typeof Ee=="string"){try{const Re=JSON.parse(Ee);if(typeof Re=="object"&&Re!==null)return Object.entries(Re).map(([We,Lt])=>` ${We.replace(/_/g," ")}: ${String(Lt)}`).join(`
`)}catch{}return Ee.replace(/\\n/g,`
`).replace(/\n\s*\n/g,`
`).trim()}return typeof Ee=="object"&&Ee!==null?Object.entries(Ee).map(([Re,We])=>` ${Re.replace(/_/g," ")}: ${String(We)}`).join(`
`):String(Ee)},we=Ee=>!Ee||typeof Ee!="object"?null:e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(280px, 1fr))",gap:12},children:Object.entries(Ee).map(([Re,We])=>e.jsxs("div",{style:{padding:"12px",background:"#fff",border:"1px solid #e5e7eb",borderRadius:8,boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[e.jsx("div",{style:{fontSize:13,fontWeight:600,color:"#374151",marginBottom:8,textTransform:"capitalize"},children:Re.replaceAll("_"," ").replace(/\b\w/g,Lt=>Lt.toUpperCase())}),e.jsx("div",{style:{fontSize:14,lineHeight:1.5,color:"#6b7280",whiteSpace:"pre-wrap"},children:oe(We)})]},Re))});return e.jsxs("div",{className:"forwarded-design",style:{marginTop:10},children:[e.jsxs("div",{className:"details-grid",style:{marginBottom:8},children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Design Title:"})," ",$e.title||"-"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Uploaded:"})," ",$e.created_at?new Date($e.created_at).toLocaleString():"-"]})]}),$e.description&&e.jsxs("div",{className:"description-section",style:{marginBottom:8},children:[e.jsx("strong",{children:"Description:"}),e.jsx("div",{className:"description-content",children:$e.description})]}),St.contractor_message&&e.jsxs("div",{className:"description-section",style:{marginBottom:8},children:[e.jsx("strong",{children:"Message from homeowner:"}),e.jsx("div",{className:"description-content",children:St.contractor_message})]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(200px, 1fr))",gap:"12px"},children:kt.map((Ee,Re)=>{const We=Ee.path||`/buildhub/backend/uploads/designs/${Ee.stored||Ee.original}`,Lt=(Ee.ext||"").toLowerCase(),Vt=["jpg","jpeg","png","gif","webp","svg","heic"].includes(Lt);return e.jsxs("div",{className:"file-card-interactive",style:{position:"relative",cursor:"pointer",borderRadius:8,overflow:"hidden",boxShadow:"0 2px 8px rgba(0,0,0,0.1)",transition:"transform 0.2s ease",":hover":{transform:"scale(1.02)"}},children:[Vt?e.jsxs("div",{style:{position:"relative",width:"100%",height:140},children:[e.jsx("img",{src:We,alt:Ee.original,style:{width:"100%",height:"100%",objectFit:"cover"},onClick:Ot=>{Ot.stopPropagation();const ss=Ot.currentTarget.nextSibling;ss.style.display=ss.style.display==="flex"?"none":"flex"}}),e.jsxs("div",{className:"image-overlay",style:{position:"absolute",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.7)",display:"none",alignItems:"center",justifyContent:"center",gap:10,zIndex:10},children:[e.jsx("a",{href:We,target:"_blank",rel:"noreferrer",className:"btn btn-light",style:{padding:"8px 16px",fontSize:"14px"},onClick:Ot=>Ot.stopPropagation(),children:" View"}),e.jsx("a",{href:We,download:!0,className:"btn btn-light",style:{padding:"8px 16px",fontSize:"14px"},onClick:Ot=>Ot.stopPropagation(),children:" Download"})]})]}):e.jsxs("div",{style:{height:140,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",background:"#f8fafc",border:"2px dashed #cbd5e1"},children:[e.jsx("span",{style:{fontSize:"2.5rem",marginBottom:8},children:""}),e.jsxs("div",{style:{display:"flex",gap:8},children:[e.jsx("a",{href:We,target:"_blank",rel:"noreferrer",className:"btn btn-secondary btn-sm",children:"View"}),e.jsx("a",{href:We,download:!0,className:"btn btn-primary btn-sm",children:"Download"})]})]}),e.jsxs("div",{style:{padding:"8px",background:"#fff",borderTop:"1px solid #e5e7eb"},children:[e.jsx("div",{style:{fontSize:"13px",fontWeight:500,color:"#374151",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},title:Ee.original||Ee.stored,children:Ee.original||Ee.stored}),e.jsxs("div",{style:{fontSize:"11px",color:"#9ca3af",marginTop:2},children:[Lt.toUpperCase(),"  Click to ",Vt?"view":"download"]})]})]},Re)})}),Ze&&Object.keys(Ze).length>0&&e.jsxs("div",{style:{marginTop:16},children:[e.jsx("h4",{style:{margin:"10px 0"},children:"Technical Details"}),Ze.floor_plans&&e.jsxs("div",{style:{marginBottom:12},children:[e.jsx("div",{style:{fontWeight:600,marginBottom:6},children:"Floor Plans"}),we(Ze.floor_plans)]}),Ze.site_orientation&&e.jsxs("div",{style:{marginBottom:12},children:[e.jsx("div",{style:{fontWeight:600,marginBottom:6},children:"Site Orientation"}),we(Ze.site_orientation)]}),Ze.structural&&e.jsxs("div",{style:{marginBottom:12},children:[e.jsx("div",{style:{fontWeight:600,marginBottom:6},children:"Structural"}),we(Ze.structural)]}),Ze.elevations&&e.jsxs("div",{style:{marginBottom:12},children:[e.jsx("div",{style:{fontWeight:600,marginBottom:6},children:"Elevations"}),we(Ze.elevations)]}),Ze.construction&&e.jsxs("div",{style:{marginBottom:12},children:[e.jsx("div",{style:{fontWeight:600,marginBottom:6},children:"Construction"}),we(Ze.construction)]})]})]})},xt=_e=>{const St=Oe(_e.requirements),$e=St.forwarded_design||{},kt=$e.title||St.layout_description||"Project Request",Ze=($e.description||"").trim(),oe=Ze.length>120?Ze.slice(0,117)+"":Ze;return{title:kt,short:oe,hasDesc:!!Ze}},dt=_e=>{const $e=Oe(_e.requirements).forwarded_design,Ze=(Array.isArray($e?.files)?$e.files:[])[0];if(!Ze)return null;const oe=Ze.path||`/buildhub/backend/uploads/designs/${Ze.stored||Ze.original}`,we=(Ze.ext||"").toLowerCase(),Ee=["jpg","jpeg","png","gif","webp","svg","heic"].includes(we);return{href:oe,isImage:Ee,name:Ze.original||Ze.stored}},Ut=async()=>{try{const St=await(await fetch("/buildhub/backend/api/contractor/get_my_proposals.php")).json();St.success&&Q(St.proposals||[])}catch(_e){console.error("Error fetching proposals:",_e)}},wt=async()=>{try{const _e=JSON.parse(sessionStorage.getItem("user")||"{}");if(_e?.id){const $e=await(await fetch(`/buildhub/backend/api/contractor/get_my_estimates.php?contractor_id=${_e.id}`,{credentials:"include"})).json();$e.success&&(console.log("Fetched estimates:",$e.estimates),B(Array.isArray($e.estimates)?$e.estimates:[]))}}catch(_e){console.error("Error fetching estimates:",_e)}},bt=async()=>{try{await fetch("/buildhub/backend/api/logout.php",{method:"POST",credentials:"include"})}catch{}localStorage.removeItem("bh_user"),sessionStorage.removeItem("user"),t("/login",{replace:!0})},Ht=()=>e.jsxs("div",{children:[e.jsxs("div",{className:"main-header",children:[e.jsxs("h1",{children:["Welcome back, ",o?.first_name,"!"]}),e.jsx("p",{children:"Manage your cost estimates and project bids"})]}),e.jsxs("div",{className:"stats-grid",children:[e.jsx("div",{className:"stat-card w-blue",children:e.jsxs("div",{className:"stat-content",children:[e.jsx("div",{className:"stat-icon pending",children:""}),e.jsxs("div",{className:"stat-info",children:[e.jsx("h3",{children:A.length}),e.jsx("p",{children:"Pending Requests"})]})]})}),e.jsx("div",{className:"stat-card w-purple",children:e.jsxs("div",{className:"stat-content",children:[e.jsx("div",{className:"stat-icon estimates",children:""}),e.jsxs("div",{className:"stat-info",children:[e.jsx("h3",{children:j.length}),e.jsx("p",{children:"Estimates Sent"})]})]})}),e.jsx("div",{className:"stat-card w-green",children:e.jsxs("div",{className:"stat-content",children:[e.jsx("div",{className:"stat-icon projects",children:""}),e.jsxs("div",{className:"stat-info",children:[e.jsx("h3",{children:C.filter(_e=>_e.status==="accepted").length}),e.jsx("p",{children:"Projects Won"})]})]})}),e.jsx("div",{className:"stat-card w-orange",children:e.jsxs("div",{className:"stat-content",children:[e.jsx("div",{className:"stat-icon total",children:""}),e.jsxs("div",{className:"stat-info",children:[e.jsxs("h3",{children:["",C.reduce((_e,St)=>_e+(parseFloat(St.total_cost)||0),0).toLocaleString()]}),e.jsx("p",{children:"Total Bids"})]})]})})]}),e.jsxs("div",{className:"section-card",children:[e.jsxs("div",{className:"section-header",children:[e.jsx("h2",{children:"Recent Cost Requests"}),e.jsx("p",{children:"Latest layout approvals requiring cost estimates"})]}),e.jsx("div",{className:"section-content",children:K?e.jsx("div",{className:"loading",children:"Loading requests..."}):A.length===0?e.jsxs("div",{className:"empty-state",children:[e.jsx("div",{className:"empty-icon",children:""}),e.jsx("h3",{children:"No Requests Available"}),e.jsx("p",{children:"Check back later for new project opportunities!"})]}):e.jsx("div",{className:"item-list",children:A.slice(0,5).map(_e=>{const St=xt(_e),$e=dt(_e);return e.jsxs("div",{className:"list-item",children:[e.jsx("div",{className:"item-image",children:$e?.isImage?e.jsx("img",{src:$e.href,alt:$e.name,style:{width:48,height:48,objectFit:"cover",borderRadius:6}}):""}),e.jsxs("div",{className:"item-content",children:[e.jsx("h4",{className:"item-title",children:St.title}),St.hasDesc&&e.jsx("p",{className:"item-subtitle",children:St.short}),e.jsxs("p",{className:"item-meta",children:["By ",_e.homeowner_name,"  ",_e.plot_size,"  Budget: ",_e.budget_range]}),e.jsx("button",{className:"btn btn-secondary",style:{marginTop:6},onClick:()=>re(kt=>({...kt,[_e.id]:!kt[_e.id]})),children:M[_e.id]?"Hide Details":"View Details"}),M[_e.id]&&e.jsx("div",{className:"details-panel",children:Bt(_e)})]}),e.jsxs("div",{className:"item-actions",children:[e.jsx("span",{className:`status-badge ${vp(_e.status)}`,children:du(_e.status)}),e.jsx("button",{className:"btn btn-primary",onClick:()=>t(`/contractor/estimate?layout_request_id=${_e.id}`),children:"Submit Estimate"})]})]},_e.id)})})})]}),e.jsxs("div",{className:"section-card",children:[e.jsxs("div",{className:"section-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{children:[e.jsx("h2",{children:"Inbox"}),e.jsx("p",{children:"Layouts and designs sent directly to you"})]}),e.jsx("button",{className:"btn btn-secondary",onClick:async()=>{try{const _e=JSON.parse(sessionStorage.getItem("user")||"{}"),$e=await(await fetch(`/buildhub/backend/api/contractor/get_inbox.php?contractor_id=${_e.id}`,{credentials:"include"})).json().catch(()=>({}));$e?.success&&p(Array.isArray($e.items)?$e.items:[])}catch{}},children:"Refresh"})]}),e.jsx("div",{className:"section-content",children:Array.isArray(h)&&h.length?h.map(Qt):e.jsxs("div",{className:"empty-state",children:[e.jsx("div",{className:"empty-icon",children:""}),e.jsx("h3",{children:"No items yet"}),e.jsx("p",{children:"When a homeowner sends you a layout, it appears here"})]})})]})]}),_t=()=>e.jsxs("div",{children:[e.jsxs("div",{className:"main-header",children:[e.jsx("h1",{children:"My Estimates"}),e.jsx("p",{children:"Your submitted estimates with totals and timestamps"})]}),e.jsxs("div",{className:"section-card",children:[e.jsxs("div",{className:"section-header",children:[e.jsx("h2",{children:"Recent Estimates"}),e.jsx("p",{children:"Download or reference previous submissions"})]}),e.jsx("div",{className:"section-content",children:j.length===0?e.jsxs("div",{className:"empty-state",children:[e.jsx("div",{className:"empty-icon",children:""}),e.jsx("h3",{children:"No Estimates Yet"}),e.jsx("p",{children:"Submit an estimate from your Inbox to see it here."})]}):e.jsx("div",{className:"item-list",children:j.map(_e=>e.jsx(h6,{est:_e,user:o,showConfirmation:Ft,toast:s},_e.id))})})]})]}),Gt=()=>e.jsxs("div",{children:[e.jsxs("div",{className:"main-header",children:[e.jsx("h1",{children:" Inbox"}),e.jsx("p",{children:"Project requests and notifications from homeowners"})]}),e.jsxs("div",{className:"section-card",children:[e.jsxs("div",{className:"section-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{children:[e.jsx("h2",{children:"Recent Messages"}),e.jsx("p",{children:"New project requests, estimate approvals, and construction notifications"})]}),e.jsx("button",{className:"btn btn-secondary",onClick:async()=>{try{const _e=JSON.parse(sessionStorage.getItem("user")||"{}"),$e=await(await fetch(`/buildhub/backend/api/contractor/get_inbox.php?contractor_id=${_e.id}`,{credentials:"include"})).json().catch(()=>({}));$e?.success&&p(Array.isArray($e.items)?$e.items:[])}catch{}},children:" Refresh"})]}),e.jsx("div",{className:"section-content",children:Array.isArray(h)&&h.length?h.map(Qt):e.jsxs("div",{className:"empty-state",children:[e.jsx("div",{className:"empty-icon",children:""}),e.jsx("h3",{children:"No messages yet"}),e.jsx("p",{children:"When homeowners send you project requests or approve estimates, they will appear here"})]})})]})]}),$t=typeof window<"u"&&window.location&&window.location.port==="3000"?"http://localhost":"",J=_e=>!_e||/^https?:\/\//i.test(_e)?_e:`${$t}/${String(_e).replace(/^\/?/,"")}`,tt=_e=>{if(!_e)return"Unknown date";const St=new Date(_e),kt=Math.abs(new Date-St),Ze=Math.ceil(kt/(1e3*60*60*24));return Ze===1?"Today":Ze===2?"Yesterday":Ze<=7?`${Ze-1} days ago`:St.toLocaleDateString()},Qt=_e=>{const St=_e.payload||{},$e=St.forwarded_design||null,kt=$e&&Array.isArray($e.files)&&$e.files[0]?$e.files[0]:null,Ze=St.layout_image_url||kt&&(kt.url||kt.path||(typeof kt=="string"?kt:null)),oe=J(Ze),we=_e.technical_details||$e?.technical_details||St.technical_details||null,Ee=St.floor_details||null;if(_e.type==="construction_start")return e.jsx("div",{className:"card",style:{marginBottom:12,borderLeft:"4px solid #10b981"},children:e.jsxs("div",{className:"card-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{children:[e.jsxs("div",{className:"card-title",style:{color:"#10b981",fontWeight:"bold"},children:[" ",_e.title||"Construction Started"]}),e.jsxs("div",{className:"muted",style:{fontSize:"0.85rem"},children:["From: ",_e.homeowner_name||"Homeowner",_e.homeowner_email?`  ${_e.homeowner_email}`:""]}),e.jsx("div",{style:{marginTop:8,fontSize:"0.9rem",color:"#047857"},children:"The homeowner has approved your estimate and given permission to start construction work."})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsx("div",{className:"muted",style:{fontSize:"0.85rem"},children:tt(_e.created_at)}),e.jsx("span",{className:"status-badge success",children:"Construction Approved"})]})]})},_e.id);if(_e.type==="estimate_message"){const Re=St.estimate_details||{},We=St.homeowner_details||{},Lt=St.layout_details||{};return e.jsxs("div",{className:"card",style:{marginBottom:12,border:"1px solid #3b82f6",borderRadius:"12px",boxShadow:"0 2px 8px rgba(0,0,0,0.05)",background:"linear-gradient(to right, #ffffff 0%, #f8fafc 100%)"},children:[e.jsxs("div",{className:"card-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"16px",borderBottom:"1px solid #3b82f6",background:"linear-gradient(135deg, #eff6ff 0%, #dbeafe 100%)"},children:[e.jsxs("div",{children:[e.jsx("div",{className:"card-title",style:{color:"#1e40af",fontWeight:"bold",fontSize:"16px"},children:" Estimate Accepted - Ready to Start"}),e.jsxs("div",{className:"muted",style:{fontSize:"0.875rem",color:"#6b7280",marginTop:"4px"},children:["From: ",e.jsx("strong",{style:{color:"#1f2937"},children:_e.homeowner_name||"Homeowner"}),_e.homeowner_email?`  ${_e.homeowner_email}`:""]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsx("div",{className:"muted",style:{fontSize:"0.85rem"},children:tt(_e.created_at)}),e.jsx("span",{className:"status-badge success",children:"Estimate Approved"})]})]}),e.jsxs("div",{className:"card-body",style:{padding:"20px"},children:[e.jsxs("div",{style:{marginBottom:"20px",padding:"16px",background:"linear-gradient(135deg, #ecfdf5 0%, #d1fae5 100%)",borderRadius:"10px",border:"2px solid #10b981",boxShadow:"0 2px 4px rgba(0,0,0,0.05)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:"12px"},children:[e.jsx("span",{style:{fontSize:"24px",marginRight:"10px"},children:""}),e.jsx("h4",{style:{margin:0,fontSize:"15px",fontWeight:"700",color:"#065f46"},children:"Message from Homeowner"})]}),e.jsx("div",{style:{whiteSpace:"pre-wrap",fontSize:"14px",color:"#047857",lineHeight:"1.7",paddingLeft:"34px"},children:_e.message||"I am satisfied with this estimate and would like to proceed with the project."})]}),e.jsxs("details",{style:{marginBottom:"12px"},children:[e.jsx("summary",{style:{cursor:"pointer",padding:"12px",background:"linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%)",borderRadius:"8px",fontWeight:"600",fontSize:"14px",color:"#1e40af",border:"1px solid #bfdbfe"},children:" Estimate Details"}),e.jsx("div",{style:{padding:"16px",background:"#f8fafc",borderRadius:"6px",marginTop:"8px"},children:e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px",fontSize:"0.9rem"},children:[e.jsxs("div",{style:{padding:"8px",background:"white",borderRadius:"4px"},children:[e.jsx("strong",{style:{color:"#6b7280"},children:"Total Cost:"})," ",e.jsxs("span",{style:{color:"#10b981",fontWeight:"600"},children:["",Re.total_cost||"N/A"]})]}),e.jsxs("div",{style:{padding:"8px",background:"white",borderRadius:"4px"},children:[e.jsx("strong",{style:{color:"#6b7280"},children:"Timeline:"})," ",Re.timeline||"N/A"]}),Re.materials&&e.jsxs("div",{style:{gridColumn:"1 / -1",padding:"8px",background:"white",borderRadius:"4px"},children:[e.jsx("strong",{style:{color:"#6b7280"},children:"Materials:"})," ",Re.materials]}),Re.cost_breakdown&&e.jsxs("div",{style:{gridColumn:"1 / -1",padding:"8px",background:"white",borderRadius:"4px"},children:[e.jsx("strong",{style:{color:"#6b7280"},children:"Cost Breakdown:"})," ",Re.cost_breakdown]}),Re.notes&&e.jsxs("div",{style:{gridColumn:"1 / -1",padding:"8px",background:"white",borderRadius:"4px"},children:[e.jsx("strong",{style:{color:"#6b7280"},children:"Notes:"})," ",Re.notes]})]})})]}),e.jsxs("details",{style:{marginBottom:"12px"},children:[e.jsx("summary",{style:{cursor:"pointer",padding:"12px",background:"linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%)",borderRadius:"8px",fontWeight:"600",fontSize:"14px",color:"#1e40af",border:"1px solid #bfdbfe"},children:" Homeowner Contact Details"}),e.jsx("div",{style:{padding:"16px",background:"#f8fafc",borderRadius:"6px",marginTop:"8px"},children:e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px",fontSize:"0.9rem"},children:[e.jsxs("div",{style:{padding:"8px",background:"white",borderRadius:"4px"},children:[e.jsx("strong",{style:{color:"#6b7280"},children:"Name:"})," ",We.first_name," ",We.last_name]}),e.jsxs("div",{style:{padding:"8px",background:"white",borderRadius:"4px"},children:[e.jsx("strong",{style:{color:"#6b7280"},children:"Email:"})," ",We.email]}),e.jsxs("div",{style:{padding:"8px",background:"white",borderRadius:"4px"},children:[e.jsx("strong",{style:{color:"#6b7280"},children:"Phone:"})," ",We.phone||"Not provided"]}),e.jsxs("div",{style:{padding:"8px",background:"white",borderRadius:"4px"},children:[e.jsx("strong",{style:{color:"#6b7280"},children:"City:"})," ",We.city||"Not provided"]}),We.address&&e.jsxs("div",{style:{gridColumn:"1 / -1",padding:"8px",background:"white",borderRadius:"4px"},children:[e.jsx("strong",{style:{color:"#6b7280"},children:"Address:"})," ",We.address]}),We.zip_code&&e.jsxs("div",{style:{padding:"8px",background:"white",borderRadius:"4px"},children:[e.jsx("strong",{style:{color:"#6b7280"},children:"Zip Code:"})," ",We.zip_code]}),We.state&&e.jsxs("div",{style:{padding:"8px",background:"white",borderRadius:"4px"},children:[e.jsx("strong",{style:{color:"#6b7280"},children:"State:"})," ",We.state]})]})})]}),Lt&&Lt.id&&e.jsxs("details",{style:{marginBottom:"12px"},children:[e.jsx("summary",{style:{cursor:"pointer",padding:"12px",background:"linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%)",borderRadius:"8px",fontWeight:"600",fontSize:"14px",color:"#1e40af",border:"1px solid #bfdbfe"},children:" Layout Details"}),e.jsx("div",{style:{padding:"16px",background:"#f8fafc",borderRadius:"6px",marginTop:"8px"},children:e.jsxs("div",{style:{fontSize:"0.9rem"},children:[e.jsxs("div",{style:{padding:"8px",background:"white",borderRadius:"4px",marginBottom:"8px"},children:[e.jsx("strong",{style:{color:"#6b7280"},children:"Layout Title:"})," ",Lt.title]}),Lt.description&&e.jsxs("div",{style:{padding:"8px",background:"white",borderRadius:"4px",marginBottom:"8px"},children:[e.jsx("strong",{style:{color:"#6b7280"},children:"Description:"})," ",Lt.description]}),e.jsxs("div",{style:{padding:"8px",background:"white",borderRadius:"4px"},children:[e.jsx("strong",{style:{color:"#6b7280"},children:"Created:"})," ",new Date(Lt.created_at).toLocaleDateString()]})]})})]}),e.jsxs("div",{style:{display:"flex",gap:"8px",justifyContent:"flex-end"},children:[e.jsx("button",{className:"btn btn-primary",onClick:async()=>{try{const Vt=JSON.parse(sessionStorage.getItem("user")||"{}");await fetch("/buildhub/backend/api/contractor/acknowledge_inbox_item.php",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({id:_e.id,contractor_id:Vt.id,due_date:null})});const ss=await(await fetch(`/buildhub/backend/api/contractor/get_inbox.php?contractor_id=${Vt.id}`,{credentials:"include"})).json().catch(()=>({}));ss?.success&&p(Array.isArray(ss.items)?ss.items:[])}catch{}},children:" Acknowledge"}),e.jsx("button",{className:"btn btn-secondary",onClick:async()=>{Ft("Remove Item","Are you sure you want to remove this item from your inbox?",async()=>{try{const Vt=JSON.parse(sessionStorage.getItem("user")||"{}"),ss=await(await fetch("/buildhub/backend/api/contractor/delete_inbox_item.php",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({id:_e.id,contractor_id:Vt.id})})).json().catch(()=>({}));ss.success?(p(xs=>xs.filter(Hs=>Hs.id!==_e.id)),s.success("Item removed successfully!"),setTimeout(async()=>{try{const Hs=await(await fetch(`/buildhub/backend/api/contractor/get_inbox.php?contractor_id=${Vt.id}`,{credentials:"include"})).json().catch(()=>({}));Hs?.success&&p(Array.isArray(Hs.items)?Hs.items:[])}catch{}},500)):s.error(ss.message||"Failed to remove item. Please try again.")}catch(Vt){s.error("Error removing item. Please try again."),console.error("Remove error:",Vt)}})},style:{background:"#ef4444",color:"white",border:"1px solid #ef4444"},children:" Remove"})]})]})]},_e.id)}return e.jsxs("div",{className:"card",style:{marginBottom:12,border:"1px solid #e5e7eb",borderRadius:"12px",boxShadow:"0 2px 8px rgba(0,0,0,0.05)"},children:[e.jsxs("div",{className:"card-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"16px",borderBottom:"1px solid #e5e7eb",background:"linear-gradient(135deg, #ffffff 0%, #f8fafc 100%)"},children:[e.jsxs("div",{children:[e.jsx("div",{className:"card-title",style:{fontWeight:"600",fontSize:"16px",color:"#1f2937"},children:" New Layout Request"}),e.jsxs("div",{className:"muted",style:{fontSize:"0.875rem",color:"#6b7280",marginTop:"4px"},children:["From: ",e.jsx("strong",{style:{color:"#374151"},children:_e.homeowner_name||"Homeowner"}),_e.homeowner_email?`  ${_e.homeowner_email}`:""]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsx("div",{className:"muted",style:{fontSize:"0.85rem"},children:tt(_e.created_at)}),_e.acknowledged_at?e.jsx("span",{className:"status-badge accepted",title:`Due: ${_e.due_date||""}`,children:"Acknowledged"}):e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6},children:[!b[_e.id]&&e.jsx("button",{className:"btn btn-primary",onClick:()=>x(Re=>({...Re,[_e.id]:!0})),children:"Acknowledge"}),b[_e.id]&&e.jsxs(e.Fragment,{children:[e.jsx("input",{type:"date",value:m[_e.id]||"",onChange:Re=>v(We=>({...We,[_e.id]:Re.target.value})),style:{padding:"6px 8px",border:"1px solid #e5e7eb",borderRadius:6}}),e.jsx("button",{className:"btn btn-primary",onClick:async()=>{const Re=JSON.parse(sessionStorage.getItem("user")||"{}");try{const Lt=await(await fetch("/buildhub/backend/api/contractor/acknowledge_inbox_item.php",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({id:_e.id,contractor_id:Re.id,due_date:m[_e.id]||null})})).json();if(Lt.success){const Vt=Lt.acknowledged_at||new Date().toLocaleString(),Ot=m[_e.id]?new Date(m[_e.id]).toLocaleDateString():"not specified";s.success(` Acknowledgement sent successfully! Acknowledged at: ${Vt}, Due date: ${Ot}. The homeowner has been notified.`)}else s.error(`Failed to acknowledge: ${Lt.message||"Unknown error"}`)}catch(We){s.error("Network error. Please try again."),console.error(We)}try{const Lt=await(await fetch(`/buildhub/backend/api/contractor/get_inbox.php?contractor_id=${Re.id}`,{credentials:"include"})).json().catch(()=>({}));Lt?.success&&p(Array.isArray(Lt.items)?Lt.items:[])}catch{}x(We=>({...We,[_e.id]:!1}))},children:"Confirm"}),e.jsx("button",{className:"btn btn-secondary",onClick:()=>x(Re=>({...Re,[_e.id]:!1})),children:"Cancel"})]})]}),e.jsx("button",{className:"btn btn-secondary",onClick:async()=>{Ft("Remove Item","Are you sure you want to remove this item from your inbox?",async()=>{try{const Re=JSON.parse(sessionStorage.getItem("user")||"{}"),Lt=await(await fetch("/buildhub/backend/api/contractor/delete_inbox_item.php",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({id:_e.id,contractor_id:Re.id})})).json().catch(()=>({}));Lt.success?(p(Vt=>Vt.filter(Ot=>Ot.id!==_e.id)),s.success("Item removed successfully!"),setTimeout(async()=>{try{const Ot=await(await fetch(`/buildhub/backend/api/contractor/get_inbox.php?contractor_id=${Re.id}`,{credentials:"include"})).json().catch(()=>({}));Ot?.success&&p(Array.isArray(Ot.items)?Ot.items:[])}catch{}},500)):s.error(Lt.message||"Failed to remove item. Please try again.")}catch(Re){s.error("Error removing item. Please try again."),console.error("Remove error:",Re)}})},style:{background:"#ef4444",color:"white",border:"1px solid #ef4444",fontSize:"12px",padding:"6px 12px"},children:" Remove"})]})]}),e.jsxs("div",{className:"card-body",style:{display:"grid",gridTemplateColumns:"160px 1fr",gap:16,padding:"20px"},children:[e.jsx("div",{children:oe?e.jsx("img",{src:oe,alt:"Layout preview",style:{width:"160px",height:"120px",objectFit:"cover",borderRadius:8,border:"1px solid #eee"},onError:Re=>{Re.currentTarget.style.display="none"}}):e.jsx("div",{style:{width:"160px",height:"120px",display:"grid",placeItems:"center",border:"1px dashed #ddd",borderRadius:8},children:"No image"})}),e.jsxs("div",{style:{display:"grid",gap:6},children:[$e?.title&&e.jsxs("div",{children:[e.jsx("strong",{children:"Design:"})," ",$e.title]}),$e?.description&&e.jsxs("div",{children:[e.jsx("strong",{children:"Description:"})," ",$e.description]}),_e.message&&e.jsxs("div",{style:{background:"linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%)",borderLeft:"4px solid #3b82f6",padding:"16px",borderRadius:"8px",marginBottom:"8px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:"8px"},children:[e.jsx("span",{style:{fontSize:"20px",marginRight:"8px"},children:""}),e.jsx("strong",{style:{color:"#1e40af",fontSize:"15px"},children:"Message from Homeowner"})]}),e.jsx("div",{style:{color:"#1e3a8a",lineHeight:"1.6",whiteSpace:"pre-wrap",fontSize:"14px",paddingLeft:"28px"},children:_e.message})]}),(_e.plot_size||_e.building_size)&&e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8,padding:"10px",backgroundColor:"#f8f9fa",borderRadius:"6px",border:"1px solid #e0e0e0"},children:[_e.plot_size&&e.jsxs("div",{children:[e.jsx("strong",{children:" Plot Size:"})," ",_e.plot_size]}),_e.building_size&&e.jsxs("div",{children:[e.jsx("strong",{children:" Building Size:"})," ",_e.building_size]})]}),Ee&&e.jsxs("details",{style:{marginTop:"8px"},children:[e.jsx("summary",{style:{cursor:"pointer",padding:"10px",background:"#f8f9fa",borderRadius:"6px",fontWeight:"500",fontSize:"14px",border:"1px solid #dee2e6"},children:" Floor Details"}),e.jsx("div",{style:{marginTop:8,padding:"12px",background:"#f8f9fa",borderRadius:"6px"},children:e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8},children:[Ee.floors_count!==void 0&&e.jsxs("div",{children:[e.jsx("strong",{children:"Floors:"})," ",String(Ee.floors_count)]}),Ee.floor_height&&e.jsxs("div",{children:[e.jsx("strong",{children:"Floor height:"})," ",String(Ee.floor_height)]}),Ee.ground_floor_area&&e.jsxs("div",{children:[e.jsx("strong",{children:"Ground floor area:"})," ",String(Ee.ground_floor_area)]}),Ee.first_floor_area&&e.jsxs("div",{children:[e.jsx("strong",{children:"First floor area:"})," ",String(Ee.first_floor_area)]}),Ee.second_floor_area&&e.jsxs("div",{children:[e.jsx("strong",{children:"Second floor area:"})," ",String(Ee.second_floor_area)]}),Ee.flooring_materials&&e.jsxs("div",{style:{gridColumn:"1 / -1"},children:[e.jsx("strong",{children:"Flooring materials:"})," ",String(Ee.flooring_materials)]})]})})]}),we&&e.jsx("div",{style:{marginTop:16},children:e.jsx(Ho,{technicalDetails:we,startExpanded:!1})}),$e?.files&&Array.isArray($e.files)&&$e.files.length>0&&e.jsxs("details",{style:{marginTop:"8px"},children:[e.jsxs("summary",{style:{cursor:"pointer",padding:"10px",background:"#f8f9fa",borderRadius:"6px",fontWeight:"500",fontSize:"14px",border:"1px solid #dee2e6"},children:[" Files (",$e.files.length,")"]}),e.jsx("ul",{style:{margin:"8px 0 0 16px",listStyle:"none",padding:"8px"},children:$e.files.map((Re,We)=>{const Lt=J(Re.url||Re.path||(typeof Re=="string"?Re:"")),Vt=Re.name||(typeof Re=="string"?Re:`File ${We+1}`);return e.jsx("li",{style:{marginBottom:"6px"},children:e.jsxs("a",{href:Lt,target:"_blank",rel:"noreferrer",style:{color:"#3b82f6",textDecoration:"none",padding:"4px 8px",borderRadius:"4px",display:"inline-block",background:"#e0f2fe",transition:"background 0.2s"},onMouseEnter:Ot=>Ot.target.style.background="#bae6fd",onMouseLeave:Ot=>Ot.target.style.background="#e0f2fe",children:[" ",Vt]})},We)})})]}),e.jsxs("details",{style:{marginTop:"12px"},children:[e.jsx("summary",{style:{cursor:"pointer",padding:"12px",background:"linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%)",borderRadius:"6px",fontWeight:"600",fontSize:"14px",color:"#1e40af",border:"1px solid #cbd5e1"},children:" Submit Estimate"}),e.jsxs("form",{ref:fe,className:"estimate-form",onInput:Re=>{try{Xe(Re.currentTarget)}catch{}},onSubmit:async Re=>{Re.preventDefault();const We=JSON.parse(sessionStorage.getItem("user")||"{}"),Lt=Re.currentTarget,Vt=String(_e?.id||Lt.querySelector('input[name="send_id"]')?.value||""),Ot=String(o?.id||We?.id||Lt.querySelector('input[name="contractor_id"]')?.value||"");if(!Vt||!Ot){s.error("Missing identifiers. Please refresh and try again.");return}const ss={},xs=(la,Zs,Sa)=>{let da=la;for(let xa=0;xa<Zs.length-1;xa++){const ha=Zs[xa];(!(ha in da)||typeof da[ha]!="object")&&(da[ha]={}),da=da[ha]}da[Zs[Zs.length-1]]=Sa};Lt.querySelectorAll('[name^="structured[" ]').forEach(la=>{const Sa=la.getAttribute("name").match(/^structured\[(.+)\]$/);if(!Sa)return;const xa=Sa[1].split("][").map(ya=>ya.replace(/\]$/,"").replace(/^\[/,"")),ha=la.value;xs(ss,xa,ha)});const Ms={send_id:Number(Vt),contractor_id:Number(Ot),materials:Lt.querySelector('textarea[name="materials"]')?.value||"",cost_breakdown:Lt.querySelector('textarea[name="cost_breakdown"]')?.value||"",total_cost:Lt.querySelector('input[name="total_cost"]')?.value||"",timeline:Lt.querySelector('input[name="timeline"]')?.value||"",notes:Lt.querySelector('textarea[name="notes"]')?.value||"",structured:ss};try{const Zs=await(await fetch("/buildhub/backend/api/contractor/submit_estimate_for_send.php",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(Ms)})).json();Zs?.success?(s.success("Estimate submitted"),Lt.reset()):s.error(Zs?.message||"Failed to submit")}catch{s.error("Network error")}},children:[e.jsx("div",{style:{display:"flex",justifyContent:"center",marginBottom:"20px",padding:"20px 0"},children:e.jsx(i2,{size:"medium"})}),e.jsx("input",{type:"hidden",name:"send_id",defaultValue:String(_e?.id||"")}),e.jsx("input",{type:"hidden",name:"contractor_id",defaultValue:String(o?.id||JSON.parse(sessionStorage.getItem("user")||"{}").id||"")}),e.jsx("script",{dangerouslySetInnerHTML:{__html:`window.__bhCalcGrandTotal = window.__bhCalcGrandTotal || function(form){try{var m=form.querySelector('[name="structured[totals][materials]"]');var l=form.querySelector('[name="structured[totals][labor]"]');var u=form.querySelector('[name="structured[totals][utilities]"]');var s=form.querySelector('[name="structured[totals][misc]"]');var g=form.querySelector('[name="structured[totals][grand]"]');var tc=form.querySelector('[name="total_cost"]');function num(v){if(!v) return 0;return parseFloat(String(v).replace(/[,s]/g,''))||0;}var sum=num(m&&m.value)+num(l&&l.value)+num(u&&u.value)+num(s&&s.value);if(g){g.value=sum?String(sum):'';}if(tc){tc.value=sum?String(sum):tc.value;}}catch(e){}};`}}),e.jsx("script",{dangerouslySetInnerHTML:{__html:`window.__bhCalcSectionTotals = window.__bhCalcSectionTotals || function(form){try{function sumSection(prefix){var inputs=form.querySelectorAll('[name^="'+prefix+'"]');var total=0;inputs.forEach(function(inp){var v=(inp && inp.value)||'';var match=v.match(/[-+]?(?:\\d+\\.?\\d*|\\d*\\.?\\d+)/g);if(match){match.forEach(function(tok){var n=parseFloat(tok);if(!isNaN(n)) total+=n;});}});return total;}var m=sumSection('structured[materials]');var l=sumSection('structured[labor]');var u=sumSection('structured[utilities]');var s=sumSection('structured[misc]');var fm=form.querySelector('[name="structured[totals][materials]"]'); if(fm) fm.value = m?String(m):'';var fl=form.querySelector('[name="structured[totals][labor]"]'); if(fl) fl.value = l?String(l):'';var fu=form.querySelector('[name="structured[totals][utilities]"]'); if(fu) fu.value = u?String(u):'';var fs=form.querySelector('[name="structured[totals][misc]"]'); if(fs) fs.value = s?String(s):''; if(typeof window.__bhCalcGrandTotal==='function'){ window.__bhCalcGrandTotal(form); } }catch(e){}};`}}),e.jsx("div",{className:"section-title",children:"1. Basic Project Information"}),e.jsxs("div",{className:"grid-2",children:[e.jsx("input",{name:"structured[project_name]",placeholder:"Project Name",list:"bh_project_names"}),e.jsx("input",{name:"structured[project_address]",placeholder:"Project Address / Location"}),e.jsx("input",{name:"structured[plot_size]",placeholder:"Plot Size (sq.ft / sq.m)"}),e.jsx("input",{name:"structured[built_up_area]",placeholder:"Built-up Area (sq.ft / sq.m)"}),e.jsxs("select",{name:"structured[floors]",defaultValue:"",children:[e.jsx("option",{value:"",disabled:!0,children:"Number of Floors"}),e.jsx("option",{value:"1",children:"1"}),e.jsx("option",{value:"2",children:"2"}),e.jsx("option",{value:"3",children:"3"}),e.jsx("option",{value:"4",children:"4"})]}),e.jsx("input",{name:"structured[estimation_date]",type:"date",placeholder:"Estimation Date"}),e.jsx("input",{name:"structured[client_name]",placeholder:"Client / Homeowner Name"}),e.jsx("input",{name:"structured[client_contact]",placeholder:"Contact Info"})]}),e.jsx("div",{className:"section-title",style:{marginTop:8},children:"2. Material Costs"}),e.jsx("div",{className:"muted",style:{marginTop:4},children:'Tip: enter numeric amounts anywhere in the field (e.g., "OPC 53 - 60000"). The calculator sums the numbers it finds.'}),e.jsxs("div",{className:"grid-3",onInput:Re=>{try{Xe(Re.currentTarget.closest("form"))}catch{}},children:[e.jsxs("div",{className:"estimate-line grid-4",children:[e.jsx("input",{name:"structured[materials][cement][name]",placeholder:"Cement grade (OPC 43/53, PPC)",list:"bh_cement"}),e.jsx("input",{name:"structured[materials][cement][qty]",placeholder:"Qty (bags) e.g., 50"}),e.jsx("input",{name:"structured[materials][cement][rate]",placeholder:"Rate ( per bag) e.g., 380"}),e.jsx("input",{name:"structured[materials][cement][amount]",placeholder:"Amount (auto)",readOnly:!0})]}),e.jsxs("div",{className:"estimate-line grid-4",children:[e.jsx("input",{name:"structured[materials][sand][name]",placeholder:"Sand type (River/M-sand)",list:"bh_sand"}),e.jsx("input",{name:"structured[materials][sand][qty]",placeholder:"Qty (m) e.g., 6"}),e.jsx("input",{name:"structured[materials][sand][rate]",placeholder:"Rate ( per m) e.g., 2500"}),e.jsx("input",{name:"structured[materials][sand][amount]",placeholder:"Amount (auto)",readOnly:!0})]}),e.jsxs("div",{className:"estimate-line grid-4",children:[e.jsx("input",{name:"structured[materials][bricks][name]",placeholder:"Bricks/Blocks (Clay/AAC)",list:"bh_bricks"}),e.jsx("input",{name:"structured[materials][bricks][qty]",placeholder:"Qty (nos) e.g., 5000"}),e.jsx("input",{name:"structured[materials][bricks][rate]",placeholder:"Rate ( per 1000) e.g., 8500"}),e.jsx("input",{name:"structured[materials][bricks][amount]",placeholder:"Amount (auto)",readOnly:!0})]}),e.jsxs("div",{className:"estimate-line grid-4",children:[e.jsx("input",{name:"structured[materials][steel][name]",placeholder:"Steel/TMT (8/10/12mm)",list:"bh_steel"}),e.jsx("input",{name:"structured[materials][steel][qty]",placeholder:"Qty (kg) e.g., 1200"}),e.jsx("input",{name:"structured[materials][steel][rate]",placeholder:"Rate ( per kg) e.g., 68"}),e.jsx("input",{name:"structured[materials][steel][amount]",placeholder:"Amount (auto)",readOnly:!0})]}),e.jsxs("div",{className:"estimate-line grid-4",children:[e.jsx("input",{name:"structured[materials][aggregate][name]",placeholder:"Aggregate (10/20mm)",list:"bh_aggregate"}),e.jsx("input",{name:"structured[materials][aggregate][qty]",placeholder:"Qty (m) e.g., 8"}),e.jsx("input",{name:"structured[materials][aggregate][rate]",placeholder:"Rate ( per m) e.g., 1800"}),e.jsx("input",{name:"structured[materials][aggregate][amount]",placeholder:"Amount (auto)",readOnly:!0})]}),e.jsxs("div",{className:"estimate-line grid-4",children:[e.jsx("input",{name:"structured[materials][tiles][name]",placeholder:"Tiles/Flooring (Vitrified/Ceramic)",list:"bh_tiles"}),e.jsx("input",{name:"structured[materials][tiles][qty]",placeholder:"Qty (m) e.g., 120"}),e.jsx("input",{name:"structured[materials][tiles][rate]",placeholder:"Rate ( per m) e.g., 600"}),e.jsx("input",{name:"structured[materials][tiles][amount]",placeholder:"Amount (auto)",readOnly:!0})]}),e.jsxs("div",{className:"estimate-line grid-4",children:[e.jsx("input",{name:"structured[materials][paint][name]",placeholder:"Paint (Interior/Exterior)",list:"bh_paint"}),e.jsx("input",{name:"structured[materials][paint][qty]",placeholder:"Qty (L) e.g., 80"}),e.jsx("input",{name:"structured[materials][paint][rate]",placeholder:"Rate ( per L) e.g., 250"}),e.jsx("input",{name:"structured[materials][paint][amount]",placeholder:"Amount (auto)",readOnly:!0})]}),e.jsxs("div",{className:"estimate-line grid-4",children:[e.jsx("input",{name:"structured[materials][doors][name]",placeholder:"Doors (Teak/Flush)",list:"bh_doors"}),e.jsx("input",{name:"structured[materials][doors][qty]",placeholder:"Qty (nos) e.g., 10"}),e.jsx("input",{name:"structured[materials][doors][rate]",placeholder:"Rate ( per door) e.g., 7000"}),e.jsx("input",{name:"structured[materials][doors][amount]",placeholder:"Amount (auto)",readOnly:!0})]}),e.jsxs("div",{className:"estimate-line grid-4",children:[e.jsx("input",{name:"structured[materials][windows][name]",placeholder:"Windows (uPVC/Aluminium)",list:"bh_windows"}),e.jsx("input",{name:"structured[materials][windows][qty]",placeholder:"Qty (nos) e.g., 12"}),e.jsx("input",{name:"structured[materials][windows][rate]",placeholder:"Rate ( per window) e.g., 6000"}),e.jsx("input",{name:"structured[materials][windows][amount]",placeholder:"Amount (auto)",readOnly:!0})]}),e.jsxs("div",{className:"estimate-line grid-4",style:{gridColumn:"1 / -1"},children:[e.jsx("input",{name:"structured[materials][others][name]",placeholder:"Other material (e.g., Glass/Hardware)"}),e.jsx("input",{name:"structured[materials][others][qty]",placeholder:"Qty (units)"}),e.jsx("input",{name:"structured[materials][others][rate]",placeholder:"Rate ( per unit)"}),e.jsx("input",{name:"structured[materials][others][amount]",placeholder:"Amount (auto)",readOnly:!0})]})]}),e.jsx("div",{className:"section-title",style:{marginTop:8},children:"3. Labor Charges"}),e.jsxs("div",{className:"grid-3",onInput:Re=>{try{Xe(Re.currentTarget.closest("form"))}catch{}},children:[e.jsxs("div",{className:"estimate-line grid-4",children:[e.jsx("input",{name:"structured[labor][mason][name]",placeholder:"Masonry work",list:"bh_labor_mason"}),e.jsx("input",{name:"structured[labor][mason][qty]",placeholder:"Qty (m / days)"}),e.jsx("input",{name:"structured[labor][mason][rate]",placeholder:"Rate ( per unit)"}),e.jsx("input",{name:"structured[labor][mason][amount]",placeholder:"Amount (auto)",readOnly:!0})]}),e.jsxs("div",{className:"estimate-line grid-4",children:[e.jsx("input",{name:"structured[labor][plaster][name]",placeholder:"Plaster work",list:"bh_labor_plaster"}),e.jsx("input",{name:"structured[labor][plaster][qty]",placeholder:"Qty (m)"}),e.jsx("input",{name:"structured[labor][plaster][rate]",placeholder:"Rate ( per m)"}),e.jsx("input",{name:"structured[labor][plaster][amount]",placeholder:"Amount (auto)",readOnly:!0})]}),e.jsxs("div",{className:"estimate-line grid-4",children:[e.jsx("input",{name:"structured[labor][painting][name]",placeholder:"Painting",list:"bh_labor_painting"}),e.jsx("input",{name:"structured[labor][painting][qty]",placeholder:"Qty (m / rooms)"}),e.jsx("input",{name:"structured[labor][painting][rate]",placeholder:"Rate ( per unit)"}),e.jsx("input",{name:"structured[labor][painting][amount]",placeholder:"Amount (auto)",readOnly:!0})]}),e.jsxs("div",{className:"estimate-line grid-4",children:[e.jsx("input",{name:"structured[labor][electrical][name]",placeholder:"Electrical",list:"bh_labor_electrical"}),e.jsx("input",{name:"structured[labor][electrical][qty]",placeholder:"Qty (points / rooms)"}),e.jsx("input",{name:"structured[labor][electrical][rate]",placeholder:"Rate ( per point/room)"}),e.jsx("input",{name:"structured[labor][electrical][amount]",placeholder:"Amount (auto)",readOnly:!0})]}),e.jsxs("div",{className:"estimate-line grid-4",children:[e.jsx("input",{name:"structured[labor][plumbing][name]",placeholder:"Plumbing",list:"bh_labor_plumbing"}),e.jsx("input",{name:"structured[labor][plumbing][qty]",placeholder:"Qty (fittings / rooms)"}),e.jsx("input",{name:"structured[labor][plumbing][rate]",placeholder:"Rate ( per fitting)"}),e.jsx("input",{name:"structured[labor][plumbing][amount]",placeholder:"Amount (auto)",readOnly:!0})]}),e.jsxs("div",{className:"estimate-line grid-4",children:[e.jsx("input",{name:"structured[labor][flooring][name]",placeholder:"Flooring installation",list:"bh_labor_flooring"}),e.jsx("input",{name:"structured[labor][flooring][qty]",placeholder:"Qty (m)"}),e.jsx("input",{name:"structured[labor][flooring][rate]",placeholder:"Rate ( per m)"}),e.jsx("input",{name:"structured[labor][flooring][amount]",placeholder:"Amount (auto)",readOnly:!0})]}),e.jsxs("div",{className:"estimate-line grid-4",children:[e.jsx("input",{name:"structured[labor][roofing][name]",placeholder:"Roofing/Ceiling work",list:"bh_labor_roofing"}),e.jsx("input",{name:"structured[labor][roofing][qty]",placeholder:"Qty (m)"}),e.jsx("input",{name:"structured[labor][roofing][rate]",placeholder:"Rate ( per m)"}),e.jsx("input",{name:"structured[labor][roofing][amount]",placeholder:"Amount (auto)",readOnly:!0})]}),e.jsxs("div",{className:"estimate-line grid-4",style:{gridColumn:"1 / -1"},children:[e.jsx("input",{name:"structured[labor][others][name]",placeholder:"Other labor"}),e.jsx("input",{name:"structured[labor][others][qty]",placeholder:"Qty (units)"}),e.jsx("input",{name:"structured[labor][others][rate]",placeholder:"Rate ( per unit)"}),e.jsx("input",{name:"structured[labor][others][amount]",placeholder:"Amount (auto)",readOnly:!0})]})]}),e.jsx("div",{className:"section-title",style:{marginTop:8},children:"4. Utilities & Fixtures"}),e.jsxs("div",{className:"grid-3",onInput:Re=>{try{Xe(Re.currentTarget.closest("form"))}catch{}},children:[e.jsxs("div",{className:"estimate-line grid-4",children:[e.jsx("input",{name:"structured[utilities][sanitary][name]",placeholder:"Sanitary fittings",list:"bh_util_sanitary"}),e.jsx("input",{name:"structured[utilities][sanitary][qty]",placeholder:"Qty (sets)"}),e.jsx("input",{name:"structured[utilities][sanitary][rate]",placeholder:"Rate ( per set)"}),e.jsx("input",{name:"structured[utilities][sanitary][amount]",placeholder:"Amount (auto)",readOnly:!0})]}),e.jsxs("div",{className:"estimate-line grid-4",children:[e.jsx("input",{name:"structured[utilities][kitchen][name]",placeholder:"Kitchen cabinets / modular",list:"bh_util_kitchen"}),e.jsx("input",{name:"structured[utilities][kitchen][qty]",placeholder:"Qty (ft / set)"}),e.jsx("input",{name:"structured[utilities][kitchen][rate]",placeholder:"Rate ( per ft/set)"}),e.jsx("input",{name:"structured[utilities][kitchen][amount]",placeholder:"Amount (auto)",readOnly:!0})]}),e.jsxs("div",{className:"estimate-line grid-4",children:[e.jsx("input",{name:"structured[utilities][electrical_fixtures][name]",placeholder:"Electrical fixtures",list:"bh_util_electrical_fixtures"}),e.jsx("input",{name:"structured[utilities][electrical_fixtures][qty]",placeholder:"Qty (points)"}),e.jsx("input",{name:"structured[utilities][electrical_fixtures][rate]",placeholder:"Rate ( per point)"}),e.jsx("input",{name:"structured[utilities][electrical_fixtures][amount]",placeholder:"Amount (auto)",readOnly:!0})]}),e.jsxs("div",{className:"estimate-line grid-4",children:[e.jsx("input",{name:"structured[utilities][water_tank][name]",placeholder:"Water tank & pumps",list:"bh_util_watertank"}),e.jsx("input",{name:"structured[utilities][water_tank][qty]",placeholder:"Qty (units)"}),e.jsx("input",{name:"structured[utilities][water_tank][rate]",placeholder:"Rate ( per unit)"}),e.jsx("input",{name:"structured[utilities][water_tank][amount]",placeholder:"Amount (auto)",readOnly:!0})]}),e.jsxs("div",{className:"estimate-line grid-4",children:[e.jsx("input",{name:"structured[utilities][hvac][name]",placeholder:"AC / Heating",list:"bh_util_hvac"}),e.jsx("input",{name:"structured[utilities][hvac][qty]",placeholder:"Qty (tons / units)"}),e.jsx("input",{name:"structured[utilities][hvac][rate]",placeholder:"Rate ( per unit)"}),e.jsx("input",{name:"structured[utilities][hvac][amount]",placeholder:"Amount (auto)",readOnly:!0})]}),e.jsxs("div",{className:"estimate-line grid-4",children:[e.jsx("input",{name:"structured[utilities][gas_water][name]",placeholder:"Gas / Water lines",list:"bh_util_gaswater"}),e.jsx("input",{name:"structured[utilities][gas_water][qty]",placeholder:"Qty (m / points)"}),e.jsx("input",{name:"structured[utilities][gas_water][rate]",placeholder:"Rate ( per m/point)"}),e.jsx("input",{name:"structured[utilities][gas_water][amount]",placeholder:"Amount (auto)",readOnly:!0})]}),e.jsxs("div",{className:"estimate-line grid-4",style:{gridColumn:"1 / -1"},children:[e.jsx("input",{name:"structured[utilities][others1][name]",placeholder:"Other utility item (e.g., Geyser install)"}),e.jsx("div",{}),e.jsx("div",{}),e.jsx("input",{name:"structured[utilities][others1][amount]",placeholder:"Price ()"})]}),e.jsxs("div",{className:"estimate-line grid-4",style:{gridColumn:"1 / -1"},children:[e.jsx("input",{name:"structured[utilities][others2][name]",placeholder:"Other utility item"}),e.jsx("div",{}),e.jsx("div",{}),e.jsx("input",{name:"structured[utilities][others2][amount]",placeholder:"Price ()"})]}),e.jsxs("div",{className:"estimate-line grid-4",style:{gridColumn:"1 / -1"},children:[e.jsx("input",{name:"structured[utilities][others3][name]",placeholder:"Other utility item"}),e.jsx("div",{}),e.jsx("div",{}),e.jsx("input",{name:"structured[utilities][others3][amount]",placeholder:"Price ()"})]})]}),e.jsx("div",{className:"section-title",style:{marginTop:8},children:"5. Miscellaneous Costs"}),e.jsxs("div",{className:"grid-3",onInput:Re=>{try{Xe(Re.currentTarget.closest("form"))}catch{}},children:[e.jsxs("div",{className:"estimate-line grid-4",children:[e.jsx("input",{name:"structured[misc][transport][name]",placeholder:"Transport (local/long-haul)",list:"bh_misc_transport"}),e.jsx("input",{name:"structured[misc][transport][qty]",placeholder:"Qty (trips)"}),e.jsx("input",{name:"structured[misc][transport][rate]",placeholder:"Rate ( per trip)"}),e.jsx("input",{name:"structured[misc][transport][amount]",placeholder:"Amount (auto)",readOnly:!0})]}),e.jsxs("div",{className:"estimate-line grid-4",children:[e.jsx("input",{name:"structured[misc][contingency][name]",placeholder:"Contingency buffer",list:"bh_misc_contingency"}),e.jsx("input",{name:"structured[misc][contingency][qty]",placeholder:"Qty (%) e.g., 5"}),e.jsx("input",{name:"structured[misc][contingency][rate]",placeholder:"Base amount ()"}),e.jsx("input",{name:"structured[misc][contingency][amount]",placeholder:"Amount (auto)",readOnly:!0})]}),e.jsxs("div",{className:"estimate-line grid-4",children:[e.jsx("input",{name:"structured[misc][fees][name]",placeholder:"Permit/Municipal/Registration fees",list:"bh_misc_fees"}),e.jsx("div",{}),e.jsx("div",{}),e.jsx("input",{name:"structured[misc][fees][amount]",placeholder:"Price ()"})]}),e.jsxs("div",{className:"estimate-line grid-4",children:[e.jsx("input",{name:"structured[misc][cleaning][name]",placeholder:"Cleaning / Waste removal",list:"bh_misc_cleaning"}),e.jsx("input",{name:"structured[misc][cleaning][qty]",placeholder:"Qty (days / loads)"}),e.jsx("input",{name:"structured[misc][cleaning][rate]",placeholder:"Rate ( per unit)"}),e.jsx("input",{name:"structured[misc][cleaning][amount]",placeholder:"Amount (auto)",readOnly:!0})]}),e.jsxs("div",{className:"estimate-line grid-4",children:[e.jsx("input",{name:"structured[misc][safety][name]",placeholder:"Safety equipment / Scaffolding",list:"bh_misc_safety"}),e.jsx("input",{name:"structured[misc][safety][qty]",placeholder:"Qty (sets / days)"}),e.jsx("input",{name:"structured[misc][safety][rate]",placeholder:"Rate ( per unit)"}),e.jsx("input",{name:"structured[misc][safety][amount]",placeholder:"Amount (auto)",readOnly:!0})]}),e.jsxs("div",{className:"estimate-line grid-4",style:{gridColumn:"1 / -1"},children:[e.jsx("input",{name:"structured[misc][others1][name]",placeholder:"Other expense (e.g., Site security)"}),e.jsx("div",{}),e.jsx("div",{}),e.jsx("input",{name:"structured[misc][others1][amount]",placeholder:"Price ()"})]}),e.jsxs("div",{className:"estimate-line grid-4",style:{gridColumn:"1 / -1"},children:[e.jsx("input",{name:"structured[misc][others2][name]",placeholder:"Other expense"}),e.jsx("div",{}),e.jsx("div",{}),e.jsx("input",{name:"structured[misc][others2][amount]",placeholder:"Price ()"})]}),e.jsxs("div",{className:"estimate-line grid-4",style:{gridColumn:"1 / -1"},children:[e.jsx("input",{name:"structured[misc][others3][name]",placeholder:"Other expense"}),e.jsx("div",{}),e.jsx("div",{}),e.jsx("input",{name:"structured[misc][others3][amount]",placeholder:"Price ()"})]})]}),e.jsx("div",{className:"section-title",style:{marginTop:8},children:"6. Total Estimation"}),e.jsxs("div",{className:"totals",onInput:Re=>{try{Xe(Re.currentTarget.closest("form"))}catch{}},children:[e.jsx("input",{name:"structured[totals][materials]",placeholder:"Material Costs Total",value:Ae||"",readOnly:!0,style:{border:"1px solid #e5e7eb",borderRadius:6,padding:8}}),e.jsx("input",{name:"structured[totals][labor]",placeholder:"Labor Charges Total",value:te||"",readOnly:!0,style:{border:"1px solid #e5e7eb",borderRadius:6,padding:8}}),e.jsx("input",{name:"structured[totals][utilities]",placeholder:"Utilities & Fixtures Total",value:k||"",readOnly:!0,style:{border:"1px solid #e5e7eb",borderRadius:6,padding:8}}),e.jsx("input",{name:"structured[totals][misc]",placeholder:"Miscellaneous Total",value:z||"",readOnly:!0,style:{border:"1px solid #e5e7eb",borderRadius:6,padding:8}}),e.jsx("input",{className:"grand-total",name:"structured[totals][grand]",placeholder:"Grand Total (auto)",readOnly:!0,value:X||""})]}),e.jsx("div",{className:"section-title",style:{marginTop:8},children:"7. Notes for Homeowner"}),e.jsx("textarea",{name:"notes",placeholder:"Prices approximate; quantities based on layout; payment schedule; taxes; warranties",rows:3}),e.jsx("div",{style:{fontWeight:700,marginTop:8},children:"8. Optional Details"}),e.jsx("textarea",{name:"structured[brands]",placeholder:"Brands (cement, steel, tiles) / Grades / Units / Photos links",rows:2,style:{border:"1px solid #e5e7eb",borderRadius:6,padding:8}}),e.jsx("label",{style:{fontWeight:600},children:"Materials"}),e.jsx("textarea",{name:"materials",placeholder:"List key materials, grades, brands if any",rows:2,style:{border:"1px solid #e5e7eb",borderRadius:6,padding:8}}),e.jsx("label",{style:{fontWeight:600},children:"Cost breakdown"}),e.jsx("textarea",{name:"cost_breakdown",placeholder:"Itemized costs (e.g., excavation, RCC, masonry, finishes, labor)",rows:3,style:{border:"1px solid #e5e7eb",borderRadius:6,padding:8}}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8},children:[e.jsxs("div",{children:[e.jsx("label",{style:{fontWeight:600},children:"Total cost ()"}),e.jsx("input",{name:"total_cost",type:"number",step:"0.01",placeholder:"Auto-calculated",required:!0,readOnly:!0,style:{width:"100%",border:"1px solid #e5e7eb",borderRadius:6,padding:8,background:"#f9fafb"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{fontWeight:600},children:"Timeline"}),e.jsx("input",{name:"timeline",placeholder:"e.g., 810 weeks",required:!0,style:{width:"100%",border:"1px solid #e5e7eb",borderRadius:6,padding:8}})]})]}),e.jsx("label",{style:{fontWeight:600},children:"Notes"}),e.jsx("textarea",{name:"notes",placeholder:"Assumptions, exclusions, payment terms, validity",rows:2,style:{border:"1px solid #e5e7eb",borderRadius:6,padding:8}}),e.jsxs("div",{style:{padding:10,background:"#f8fafc",border:"1px dashed #cbd5e1",borderRadius:8},children:[e.jsx("div",{style:{fontWeight:600,marginBottom:6},children:"Preview"}),e.jsx("div",{style:{fontSize:14,color:"#374151"},children:'Fill the fields and your estimate will be visible to the homeowner under "Sent to Contractors".'})]}),e.jsxs("div",{children:[e.jsx("label",{style:{fontWeight:600},children:"Attachments (optional)"}),e.jsx("input",{name:"attachments",type:"file",multiple:!0})]}),e.jsxs("div",{className:"actions",children:[e.jsx("button",{className:"btn btn-secondary",type:"button",onClick:Re=>{const We=Re.currentTarget.closest("form");We&&We.reset(),Xe(We)},children:"Reset"}),e.jsx("button",{className:"btn btn-primary",type:"button",onClick:async Re=>{const We=Re.currentTarget.closest("form");await at(We)},children:"Download PDF Report"}),e.jsx("button",{className:"btn btn-primary",type:"submit",children:"Submit Estimate"})]}),e.jsxs("datalist",{id:"bh_project_names",children:[e.jsx("option",{value:"Residential Villa"}),e.jsx("option",{value:"Commercial Complex"}),e.jsx("option",{value:"Renovation Project"})]}),e.jsxs("datalist",{id:"bh_cement",children:[e.jsx("option",{value:"OPC 43 grade - 50 bags"}),e.jsx("option",{value:"OPC 53 grade - 60 bags"}),e.jsx("option",{value:"PPC - 55 bags"})]}),e.jsxs("datalist",{id:"bh_sand",children:[e.jsx("option",{value:"River sand - 5 m"}),e.jsx("option",{value:"M-sand - 6 m"})]}),e.jsxs("datalist",{id:"bh_bricks",children:[e.jsx("option",{value:"Clay bricks - 5000 nos"}),e.jsx("option",{value:"AAC blocks - 3000 nos"})]}),e.jsxs("datalist",{id:"bh_steel",children:[e.jsx("option",{value:"TMT 8/10/12mm - 1500 kg"}),e.jsx("option",{value:"TMT 16/20mm - 1000 kg"})]}),e.jsxs("datalist",{id:"bh_aggregate",children:[e.jsx("option",{value:"20mm aggregate - 8 m"}),e.jsx("option",{value:"10mm aggregate - 6 m"})]}),e.jsxs("datalist",{id:"bh_tiles",children:[e.jsx("option",{value:"Vitrified tiles - 120 m"}),e.jsx("option",{value:"Ceramic tiles - 90 m"})]}),e.jsxs("datalist",{id:"bh_paint",children:[e.jsx("option",{value:"Interior emulsion - 80 L"}),e.jsx("option",{value:"Exterior emulsion - 60 L"})]}),e.jsxs("datalist",{id:"bh_doors",children:[e.jsx("option",{value:"Teakwood doors - 10 nos"}),e.jsx("option",{value:"Flush doors - 8 nos"})]}),e.jsxs("datalist",{id:"bh_windows",children:[e.jsx("option",{value:"uPVC windows - 12 nos"}),e.jsx("option",{value:"Aluminium windows - 10 nos"})]}),e.jsxs("datalist",{id:"bh_labor_mason",children:[e.jsx("option",{value:"Masonry - /m"}),e.jsx("option",{value:"Block work - /m"})]}),e.jsxs("datalist",{id:"bh_labor_plaster",children:[e.jsx("option",{value:"Internal plaster - /m"}),e.jsx("option",{value:"External plaster - /m"})]}),e.jsxs("datalist",{id:"bh_labor_painting",children:[e.jsx("option",{value:"2-coat interior - /m"}),e.jsx("option",{value:"3-coat exterior - /m"})]}),e.jsxs("datalist",{id:"bh_labor_electrical",children:[e.jsx("option",{value:"Per point - /pt"}),e.jsx("option",{value:"Per room - /room"})]}),e.jsxs("datalist",{id:"bh_labor_plumbing",children:[e.jsx("option",{value:"Per fitting - /fit"}),e.jsx("option",{value:"Per bathroom - /bath"})]}),e.jsxs("datalist",{id:"bh_labor_flooring",children:[e.jsx("option",{value:"Flooring install - /m"}),e.jsx("option",{value:"Skirting - /m"})]}),e.jsxs("datalist",{id:"bh_labor_roofing",children:[e.jsx("option",{value:"Roof sheet install - /m"}),e.jsx("option",{value:"Ceiling grid - /m"})]}),e.jsxs("datalist",{id:"bh_util_sanitary",children:[e.jsx("option",{value:"WC, basin, shower set"}),e.jsx("option",{value:"Premium sanitary set"})]}),e.jsxs("datalist",{id:"bh_util_kitchen",children:[e.jsx("option",{value:"Modular kitchen - 12ft"}),e.jsx("option",{value:"Modular kitchen - 15ft"})]}),e.jsxs("datalist",{id:"bh_util_electrical_fixtures",children:[e.jsx("option",{value:"LED panels, fans, switches"}),e.jsx("option",{value:"Designer lights set"})]}),e.jsxs("datalist",{id:"bh_util_watertank",children:[e.jsx("option",{value:"Overhead tank 1000L + pump"}),e.jsx("option",{value:"Overhead tank 2000L + pump"})]}),e.jsxs("datalist",{id:"bh_util_hvac",children:[e.jsx("option",{value:"Split AC - 1.5T x 2"}),e.jsx("option",{value:"Inverter AC - 1T x 3"})]}),e.jsxs("datalist",{id:"bh_util_gaswater",children:[e.jsx("option",{value:"Gas line + kitchen water line"}),e.jsx("option",{value:"Full house water lines"})]}),e.jsxs("datalist",{id:"bh_misc_transport",children:[e.jsx("option",{value:"Material transport local"}),e.jsx("option",{value:"Material transport long-haul"})]}),e.jsxs("datalist",{id:"bh_misc_contingency",children:[e.jsx("option",{value:"5% buffer"}),e.jsx("option",{value:"10% buffer"})]}),e.jsxs("datalist",{id:"bh_misc_fees",children:[e.jsx("option",{value:"Permit & registration"}),e.jsx("option",{value:"Municipal fees"})]}),e.jsxs("datalist",{id:"bh_misc_cleaning",children:[e.jsx("option",{value:"Debris removal"}),e.jsx("option",{value:"Final cleaning"})]}),e.jsxs("datalist",{id:"bh_misc_safety",children:[e.jsx("option",{value:"PPE & scaffolding"}),e.jsx("option",{value:"Safety nets & signage"})]})]})]})]})]})]},_e.id)},Et=()=>e.jsxs("div",{children:[e.jsxs("div",{className:"main-header",children:[e.jsx("h1",{children:"Construction Projects"}),e.jsx("p",{children:"Approved estimates ready for construction with complete project details"})]}),e.jsxs("div",{className:"section-card",children:[e.jsxs("div",{className:"section-header",children:[e.jsx("h2",{children:"Active Construction Projects"}),e.jsx("p",{children:"Detailed project information including layouts, estimates, and technical specifications"}),e.jsxs("div",{className:"section-actions",style:{display:"flex",gap:"12px",marginTop:"12px"},children:[e.jsx("button",{className:"btn btn-primary",onClick:async()=>{q(!0);try{const _e=JSON.parse(sessionStorage.getItem("user")||"{}"),$e=await(await fetch(`/buildhub/backend/api/contractor/get_construction_details.php?contractor_id=${_e.id}`,{credentials:"include"})).json().catch(()=>({}));$e?.success&&ee(Array.isArray($e.projects)?$e.projects:[])}catch{}q(!1)},disabled:K,children:K?" Refreshing...":" Refresh Projects"}),e.jsx("button",{className:"btn btn-secondary",onClick:()=>r("proposals"),children:" View All Estimates"}),e.jsx("button",{className:"btn btn-secondary",onClick:()=>r("inbox"),children:" Check Inbox"})]})]}),e.jsx("div",{className:"section-content",children:K?e.jsx("div",{className:"loading",children:"Loading construction projects..."}):F.length===0?e.jsxs("div",{className:"empty-state",children:[e.jsx("div",{className:"empty-icon",children:""}),e.jsx("h3",{children:"No Construction Projects Yet"}),e.jsx("p",{children:"When homeowners approve your estimates and start construction, they will appear here with complete project details!"}),e.jsxs("div",{style:{marginTop:"24px",display:"flex",flexDirection:"column",gap:"12px",alignItems:"center"},children:[e.jsxs("div",{style:{display:"flex",gap:"12px",flexWrap:"wrap",justifyContent:"center"},children:[e.jsx("button",{className:"btn btn-primary",onClick:()=>r("projects"),style:{display:"flex",alignItems:"center",gap:"6px"},children:" Browse Available Projects"}),e.jsx("button",{className:"btn btn-secondary",onClick:()=>r("proposals"),style:{display:"flex",alignItems:"center",gap:"6px"},children:" View My Estimates"}),e.jsx("button",{className:"btn btn-secondary",onClick:()=>r("inbox"),style:{display:"flex",alignItems:"center",gap:"6px"},children:" Check Messages"})]}),e.jsxs("div",{style:{fontSize:"14px",color:"#6b7280",textAlign:"center",maxWidth:"400px"},children:[e.jsx("strong",{children:" Tip:"})," Submit detailed estimates for available projects to increase your chances of getting approved for construction work!"]})]})]}):e.jsx("div",{className:"construction-projects",children:F.map(_e=>e.jsxs("div",{className:"construction-project-card",children:[e.jsxs("div",{className:"project-header",children:[e.jsx("div",{className:"project-icon",children:e.jsx("div",{style:{width:48,height:48,borderRadius:8,background:"linear-gradient(135deg, #10b981, #059669)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"20px",color:"white"},children:""})}),e.jsxs("div",{className:"project-title-section",children:[e.jsx("h3",{className:"project-title",children:_e.structured?.project_name||`Project #${_e.estimate_id}`}),e.jsxs("p",{className:"project-subtitle",children:["Construction approved for ",_e.homeowner.name]}),e.jsxs("div",{className:"project-meta",children:[e.jsxs("span",{className:"meta-item",children:["Total: ",_e.structured?.totals?.grand||_e.total_cost||"TBD"]}),e.jsxs("span",{className:"meta-item",children:["Timeline: ",_e.timeline||"TBD"]}),e.jsxs("span",{className:"meta-item",children:["Status: ",_e.estimate_status]})]})]}),e.jsxs("div",{className:"project-actions",style:{display:"flex",gap:"8px",flexWrap:"wrap"},children:[e.jsx("button",{className:"btn btn-primary",onClick:()=>Z(G===_e.estimate_id?null:_e.estimate_id),children:G===_e.estimate_id?"Hide Details":"View Details"}),e.jsx("button",{className:"btn btn-secondary",onClick:()=>{const St=`Construction Project Update - ${_e.structured?.project_name||`Project #${_e.estimate_id}`}`,$e=`Hi ${_e.homeowner.name},

I wanted to provide you with an update on your construction project.

Project: ${_e.structured?.project_name||`Project #${_e.estimate_id}`}
Total Cost: ${_e.structured?.totals?.grand||_e.total_cost||"TBD"}
Timeline: ${_e.timeline||"TBD"}

Please let me know if you have any questions.

Best regards,
[Your Name]`;window.open(`mailto:${_e.homeowner.email}?subject=${encodeURIComponent(St)}&body=${encodeURIComponent($e)}`)},title:"Send email to homeowner",children:" Contact Homeowner"}),e.jsx("button",{className:"btn btn-secondary",onClick:()=>{const St=`Project: ${_e.structured?.project_name||`Project #${_e.estimate_id}`}
Homeowner: ${_e.homeowner.name}
Email: ${_e.homeowner.email}
Phone: ${_e.homeowner.phone||"Not provided"}
Total Cost: ${_e.structured?.totals?.grand||_e.total_cost||"TBD"}
Timeline: ${_e.timeline||"TBD"}`;navigator.clipboard.writeText(St).then(()=>{try{s.success("Project details copied to clipboard!")}catch{}}).catch(()=>{try{s.error("Failed to copy details")}catch{}})},title:"Copy project details",children:" Copy Details"})]})]}),G===_e.estimate_id&&e.jsx("div",{className:"project-details",children:e.jsxs("div",{className:"details-grid",children:[e.jsxs("div",{className:"detail-section",children:[e.jsx("h4",{className:"section-title",children:" Homeowner Information"}),e.jsxs("div",{className:"detail-content",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Name:"})," ",_e.homeowner.name]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Email:"})," ",_e.homeowner.email]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Phone:"})," ",_e.homeowner.phone||"Not provided"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Address:"})," ",_e.homeowner.address||"Not provided"]}),_e.homeowner.city&&e.jsxs("p",{children:[e.jsx("strong",{children:"City:"})," ",_e.homeowner.city]}),_e.homeowner.state&&e.jsxs("p",{children:[e.jsx("strong",{children:"State:"})," ",_e.homeowner.state]})]})]}),e.jsxs("div",{className:"detail-section",children:[e.jsx("h4",{className:"section-title",children:" Project Requirements"}),e.jsxs("div",{className:"detail-content",children:[_e.layout_request.plot_size&&e.jsxs("p",{children:[e.jsx("strong",{children:"Plot Size:"})," ",_e.layout_request.plot_size]}),_e.layout_request.budget_range&&e.jsxs("p",{children:[e.jsx("strong",{children:"Budget Range:"})," ",_e.layout_request.budget_range]}),_e.layout_request.location&&e.jsxs("p",{children:[e.jsx("strong",{children:"Location:"})," ",_e.layout_request.location]}),_e.layout_request.preferred_style&&e.jsxs("p",{children:[e.jsx("strong",{children:"Preferred Style:"})," ",_e.layout_request.preferred_style]}),_e.layout_request.requirements&&e.jsxs("p",{children:[e.jsx("strong",{children:"Requirements:"})," ",_e.layout_request.requirements]}),_e.layout_request.timeline&&e.jsxs("p",{children:[e.jsx("strong",{children:"Timeline:"})," ",_e.layout_request.timeline]})]})]}),e.jsxs("div",{className:"detail-section",children:[e.jsx("h4",{className:"section-title",children:" Accepted Estimate"}),e.jsxs("div",{className:"detail-content",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Total Cost:"})," ",_e.structured?.totals?.grand||_e.total_cost||"TBD"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Timeline:"})," ",_e.timeline||"TBD"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Status:"})," ",_e.estimate_status]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Approved Date:"})," ",new Date(_e.estimate_created_at).toLocaleString()]}),_e.materials&&e.jsxs("p",{children:[e.jsx("strong",{children:"Materials:"})," ",_e.materials]}),_e.notes&&e.jsxs("p",{children:[e.jsx("strong",{children:"Notes:"})," ",_e.notes]})]})]}),_e.architect_layout.layout_file&&e.jsxs("div",{className:"detail-section",children:[e.jsx("h4",{className:"section-title",children:" Approved Layout"}),e.jsxs("div",{className:"detail-content",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Layout File:"})," ",_e.architect_layout.layout_file]}),_e.architect_layout.description&&e.jsxs("p",{children:[e.jsx("strong",{children:"Description:"})," ",_e.architect_layout.description]}),_e.architect_layout.notes&&e.jsxs("p",{children:[e.jsx("strong",{children:"Layout Notes:"})," ",_e.architect_layout.notes]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Created:"})," ",new Date(_e.architect_layout.created_at).toLocaleString()]})]})]}),e.jsxs("div",{className:"detail-section construction-start",children:[e.jsx("h4",{className:"section-title",children:" Construction Start Details"}),e.jsxs("div",{className:"detail-content",children:[e.jsxs("div",{className:"construction-checklist",children:[e.jsx("h5",{children:"Pre-Construction Checklist:"}),e.jsxs("ul",{children:[e.jsx("li",{children:" Estimate approved by homeowner"}),e.jsx("li",{children:" Layout/design approved"}),e.jsx("li",{children:" Payment arrangements confirmed"}),e.jsx("li",{children:" Site access granted"}),e.jsx("li",{children:" Permits and approvals obtained"})]})]}),e.jsxs("div",{className:"next-steps",children:[e.jsx("h5",{children:"Next Steps:"}),e.jsxs("ol",{children:[e.jsx("li",{children:"Contact homeowner to schedule site visit"}),e.jsx("li",{children:"Finalize construction timeline"}),e.jsx("li",{children:"Arrange material delivery"}),e.jsx("li",{children:"Set up construction site"}),e.jsx("li",{children:"Begin foundation work"})]})]}),e.jsxs("div",{className:"construction-actions",style:{marginTop:"20px",padding:"16px",backgroundColor:"#f8fafc",borderRadius:"8px",border:"1px solid #e2e8f0"},children:[e.jsx("h5",{style:{margin:"0 0 12px 0",color:"#374151"},children:" Ready to Start Construction?"}),e.jsxs("div",{style:{display:"flex",gap:"12px",flexWrap:"wrap"},children:[e.jsx("button",{className:"btn btn-success",onClick:()=>{const St=`Construction Start Confirmation - ${_e.structured?.project_name||`Project #${_e.estimate_id}`}`,$e=`Hi ${_e.homeowner.name},

I'm excited to confirm that we're ready to begin construction on your project!

Project: ${_e.structured?.project_name||`Project #${_e.estimate_id}`}
Total Cost: ${_e.structured?.totals?.grand||_e.total_cost||"TBD"}
Timeline: ${_e.timeline||"TBD"}

I'll be in touch soon to schedule the site visit and discuss the next steps.

Best regards,
[Your Name]`;window.open(`mailto:${_e.homeowner.email}?subject=${encodeURIComponent(St)}&body=${encodeURIComponent($e)}`)},children:" Confirm Start with Homeowner"}),e.jsx("button",{className:"btn btn-primary",onClick:()=>{const St=`Construction Project Started

Project: ${_e.structured?.project_name||`Project #${_e.estimate_id}`}
Homeowner: ${_e.homeowner.name}
Start Date: ${new Date().toLocaleDateString()}
Timeline: ${_e.timeline||"TBD"}
Total Cost: ${_e.structured?.totals?.grand||_e.total_cost||"TBD"}`;navigator.clipboard.writeText(St).then(()=>{try{s.success("Construction start details copied!")}catch{}}).catch(()=>{try{s.error("Failed to copy details")}catch{}})},children:" Copy Start Details"})]})]})]})]})]})})]},_e.estimate_id))})})]})]}),Jt=()=>e.jsxs("div",{children:[e.jsxs("div",{className:"main-header",children:[e.jsx("h1",{children:"Profile"}),e.jsx("p",{children:"Manage your account information and settings"})]}),e.jsxs("div",{className:"profile-grid",children:[e.jsxs("div",{className:"profile-card",children:[e.jsxs("div",{className:"profile-avatar-large",children:[o?.first_name?.charAt(0),o?.last_name?.charAt(0)]}),e.jsxs("div",{className:"profile-info",children:[e.jsxs("h3",{children:[o?.first_name," ",o?.last_name]}),e.jsx("p",{className:"profile-role",children:"Contractor"}),e.jsx("p",{className:"profile-email",children:o?.email})]})]}),e.jsxs("div",{className:"profile-card",children:[e.jsxs("div",{className:"section-header",children:[e.jsx("h2",{children:"Account Information"}),e.jsx("p",{children:"Your personal and professional details"})]}),e.jsxs("div",{className:"detail-grid",children:[e.jsxs("div",{className:"detail-item",children:[e.jsx("label",{children:"Full Name"}),e.jsxs("p",{children:[o?.first_name," ",o?.last_name]})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("label",{children:"Email Address"}),e.jsx("p",{children:o?.email})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("label",{children:"Role"}),e.jsx("p",{children:"Contractor"})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("label",{children:"Account Status"}),e.jsx("p",{className:"status-badge accepted",children:"Active"})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("label",{children:"Total Projects"}),e.jsx("p",{children:C.filter(_e=>_e.status==="accepted").length})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("label",{children:"Success Rate"}),e.jsxs("p",{children:[C.length>0?Math.round(C.filter(_e=>_e.status==="accepted").length/C.length*100):0,"%"]})]})]})]})]})]}),os=()=>{const _e=St=>{s.success("Progress update submitted successfully!"),Qe("timeline")};return e.jsxs("div",{children:[e.jsxs("div",{className:"main-header",children:[e.jsx("h1",{children:"Construction Progress Updates"}),e.jsx("p",{children:"Submit progress updates, track construction timeline, and generate audit reports"})]}),e.jsxs("div",{className:"progress-view-toggle",style:{marginBottom:"20px"},children:[e.jsx("button",{className:`toggle-btn ${Be==="submit"?"active":""}`,onClick:()=>Qe("submit"),children:" Submit Update"}),e.jsx("button",{className:`toggle-btn ${Be==="timeline"?"active":""}`,onClick:()=>Qe("timeline"),children:" View Timeline"}),e.jsx("button",{className:`toggle-btn ${Be==="payment"?"active":""}`,onClick:()=>Qe("payment"),children:" Request Payment"}),e.jsx("button",{className:`toggle-btn ${Be==="reports"?"active":""}`,onClick:()=>Qe("reports"),children:" Generate Reports"})]}),Be==="submit"?e.jsx(c6,{contractorId:o?.id,onUpdateSubmitted:_e}):Be==="timeline"?e.jsx(l6,{contractorId:o?.id,userRole:"contractor"}):Be==="payment"?e.jsxs("div",{className:"payment-section",children:[e.jsxs("div",{className:"payment-header",children:[e.jsx("h2",{children:" Stage Payment Requests"}),e.jsx("p",{children:"Request payments for completed construction stages and track payment status"})]}),e.jsx(d6,{contractorId:o?.id,onPaymentRequested:St=>{s.success(`Payment request submitted: ${St.requested_amount} for ${St.stage_name} stage`)}})]}):Be==="reports"?e.jsxs("div",{className:"reports-section",children:[e.jsxs("div",{className:"reports-header",children:[e.jsx("h2",{children:" Progress Report Generator"}),e.jsx("p",{children:"Generate comprehensive audit reports for daily, weekly, and monthly progress tracking"})]}),e.jsx("div",{className:"reports-actions",children:e.jsx("button",{className:"btn btn-primary",onClick:()=>mt(!0),style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",border:"none",padding:"12px 24px",borderRadius:"8px",fontSize:"16px",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",boxShadow:"0 4px 12px rgba(102, 126, 234, 0.3)",transition:"all 0.3s ease"},onMouseOver:St=>{St.target.style.transform="translateY(-2px)",St.target.style.boxShadow="0 6px 16px rgba(102, 126, 234, 0.4)"},onMouseOut:St=>{St.target.style.transform="translateY(0)",St.target.style.boxShadow="0 4px 12px rgba(102, 126, 234, 0.3)"},children:" Generate New Report"})}),e.jsxs("div",{className:"reports-info",style:{marginTop:"30px",padding:"20px",background:"linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%)",borderRadius:"12px",border:"1px solid #dee2e6"},children:[e.jsx("h3",{style:{margin:"0 0 15px 0",color:"#2c3e50"},children:" Available Report Types"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(280px, 1fr))",gap:"20px",marginTop:"15px"},children:[e.jsxs("div",{style:{padding:"15px",background:"white",borderRadius:"8px",border:"1px solid #e9ecef",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:[e.jsx("h4",{style:{margin:"0 0 10px 0",color:"#28a745"},children:" Daily Reports"}),e.jsx("p",{style:{margin:"0",fontSize:"14px",color:"#6c757d",lineHeight:"1.5"},children:"Detailed daily progress with work done, labour tracking, materials used, photos, and quality metrics."})]}),e.jsxs("div",{style:{padding:"15px",background:"white",borderRadius:"8px",border:"1px solid #e9ecef",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:[e.jsx("h4",{style:{margin:"0 0 10px 0",color:"#007bff"},children:" Weekly Summaries"}),e.jsx("p",{style:{margin:"0",fontSize:"14px",color:"#6c757d",lineHeight:"1.5"},children:"Weekly progress summaries with stage completion, delays analysis, and productivity insights."})]}),e.jsxs("div",{style:{padding:"15px",background:"white",borderRadius:"8px",border:"1px solid #e9ecef",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:[e.jsx("h4",{style:{margin:"0 0 10px 0",color:"#6f42c1"},children:" Monthly Reports"}),e.jsx("p",{style:{margin:"0",fontSize:"14px",color:"#6c757d",lineHeight:"1.5"},children:"Comprehensive monthly reports with milestone tracking, cost analysis, and project forecasting."})]})]}),e.jsxs("div",{style:{marginTop:"20px",padding:"15px",background:"#e3f2fd",borderRadius:"8px",border:"1px solid #bbdefb"},children:[e.jsx("h4",{style:{margin:"0 0 10px 0",color:"#1976d2"},children:" Report Features"}),e.jsxs("ul",{style:{margin:"0",paddingLeft:"20px",fontSize:"14px",color:"#424242"},children:[e.jsx("li",{children:"Professional PDF generation with company branding"}),e.jsx("li",{children:"Automatic homeowner notifications and delivery"}),e.jsx("li",{children:"Comprehensive labour and cost analysis"}),e.jsx("li",{children:"GPS-verified photo documentation"}),e.jsx("li",{children:"Quality and safety compliance tracking"}),e.jsx("li",{children:"Progress recommendations and insights"})]})]})]})]}):null,ut&&e.jsx(A6,{contractorId:o?.id,onClose:()=>mt(!1)})]})};return e.jsxs("div",{className:"dashboard-container",children:[e.jsxs("div",{className:"dashboard-sidebar soft-sidebar expanded",children:[e.jsx("div",{className:"sidebar-header sb-brand",children:e.jsxs("a",{href:"#",className:"sidebar-logo",children:[e.jsx("div",{className:"logo-icon",children:""}),e.jsx("span",{className:"logo-text sb-title",children:"BUILDHUB"})]})}),e.jsxs("nav",{className:"sidebar-nav sb-nav",children:[e.jsx("a",{href:"#",className:`nav-item sb-item ${a==="overview"?"active":""}`,onClick:_e=>{_e.preventDefault(),r("overview")},title:"Dashboard",children:e.jsx("span",{className:"nav-label sb-label",children:"Dashboard"})}),e.jsxs("a",{href:"#",className:`nav-item sb-item ${a==="projects"?"active":""}`,onClick:_e=>{_e.preventDefault(),r("projects")},title:"Construction",children:[e.jsx("span",{className:"nav-label sb-label",children:"Construction"}),pt>0&&e.jsx("span",{className:"nav-badge pulse",style:{marginLeft:"auto"},children:pt})]}),e.jsxs("a",{href:"#",className:`nav-item sb-item ${a==="proposals"?"active":""}`,onClick:_e=>{_e.preventDefault(),r("proposals")},title:"My Estimates",children:[e.jsx("span",{className:"nav-label sb-label",children:"My Estimates"}),j.length>0&&e.jsx("span",{className:"nav-badge pulse",style:{marginLeft:"auto"},children:j.length})]}),e.jsxs("a",{href:"#",className:`nav-item sb-item ${a==="inbox"?"active":""}`,onClick:_e=>{_e.preventDefault(),r("inbox")},title:"Inbox",children:[e.jsx("span",{className:"nav-label sb-label",children:"Inbox"}),xe>0&&e.jsx("span",{className:"nav-badge pulse",style:{marginLeft:"auto"},children:xe})]}),e.jsx("a",{href:"#",className:`nav-item sb-item ${a==="progress"?"active":""}`,onClick:_e=>{_e.preventDefault(),r("progress")},title:"Progress Updates",children:e.jsx("span",{className:"nav-label sb-label",children:"Progress Updates"})})]})]}),e.jsxs("div",{className:"dashboard-main blue-glass soft-main shifted",children:[e.jsxs("div",{className:"top-glassbar",children:[e.jsx("div",{className:"left",children:e.jsxs("div",{className:"search",children:[e.jsx("span",{className:"icon",children:""}),e.jsx("input",{type:"text",placeholder:"Search projects, estimates, requests...","aria-label":"Search"})]})}),e.jsxs("div",{className:"right",children:[e.jsx("button",{className:"icon-btn",title:"Help",children:""}),e.jsx(r6,{user:o,position:"bottom-right",onProfileClick:()=>r("profile"),onLogout:bt})]})]}),E&&e.jsx("div",{className:"alert alert-error",children:E}),V&&e.jsx("div",{className:"alert alert-success",children:V}),a==="overview"&&Ht(),a==="projects"&&Et(),a==="proposals"&&_t(),a==="inbox"&&Gt(),a==="progress"&&os(),a==="profile"&&Jt()]}),e.jsx(t2,{isOpen:Ve.isOpen,onClose:Rt,onConfirm:Ve.onConfirm,title:Ve.title,message:Ve.message,type:Ve.type})]})},h6=({est:t,user:s,showConfirmation:a,toast:r})=>{let o=null;try{o=t?.structured?JSON.parse(t.structured):null}catch{}const l=o||{},A=j=>{const B=parseFloat(j);if(Number.isFinite(B))return`${B.toLocaleString()}`;const L=String(j||"").match(/[-+]?(?:\d+\.?\d*|\d*\.?\d+)/),P=L?parseFloat(L[0]):null;return Number.isFinite(P)?`${P.toLocaleString()}`:""},u=({title:j,rows:B})=>e.jsxs("div",{className:"card",style:{marginTop:8},children:[e.jsx("h4",{style:{margin:"0 0 6px 0"},children:j}),e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{style:{textAlign:"left",borderBottom:"1px solid #eef2f7",padding:"6px 4px"},children:"Item"}),e.jsx("th",{style:{textAlign:"left",borderBottom:"1px solid #eef2f7",padding:"6px 4px"},className:"muted",children:"Qty"}),e.jsx("th",{style:{textAlign:"left",borderBottom:"1px solid #eef2f7",padding:"6px 4px"},className:"muted",children:"Rate"}),e.jsx("th",{style:{textAlign:"left",borderBottom:"1px solid #eef2f7",padding:"6px 4px"},children:"Amount"})]})}),e.jsx("tbody",{children:B.filter(L=>L&&(L.name||L.amount)).map((L,P)=>e.jsxs("tr",{children:[e.jsx("td",{style:{padding:"6px 4px"},children:L.name||""}),e.jsx("td",{style:{padding:"6px 4px"},className:"muted",children:L.qty||""}),e.jsx("td",{style:{padding:"6px 4px"},className:"muted",children:L.rate||""}),e.jsx("td",{style:{padding:"6px 4px"},children:A(L.amount)})]},P))})]})]}),h=(j,B)=>!j||typeof j!="object"?[]:B.map(L=>({name:j?.[L]?.name||"",qty:j?.[L]?.qty||"",rate:j?.[L]?.rate||"",amount:j?.[L]?.amount||""})),p=h(l.materials,["cement","sand","bricks","steel","aggregate","tiles","paint","doors","windows","others"]),m=h(l.labor,["mason","plaster","painting","electrical","plumbing","flooring","roofing","others"]),v=h(l.utilities,["sanitary","kitchen","electrical_fixtures","water_tank","hvac","gas_water","others1","others2","others3"]),b=h(l.misc,["transport","contingency","fees","cleaning","safety","others1","others2","others3"]),x=(j=s)=>{const B=j?.first_name&&j?.last_name?`${j.first_name} ${j.last_name}`:"Contractor Name",L=new Date().toLocaleDateString("en-IN",{year:"numeric",month:"long",day:"numeric"});return`<!doctype html><html><head><meta charset="utf-8"/>
    <title>Professional Cost Estimate Report</title>
    <style>
      @page { 
        margin: 20mm; 
        size: A4;
      }
      body{
        font-family: 'Times New Roman', serif;
        color: #1a1a1a;
        margin: 0;
        padding: 0;
        line-height: 1.4;
        background: white;
      }
      .header {
        text-align: center;
        margin-bottom: 30px;
        border-bottom: 3px solid #2c3e50;
        padding-bottom: 20px;
      }
      .company-logo {
        width: 120px;
        height: 120px;
        margin: 0 auto 15px;
        border: 2px solid #2c3e50;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 48px;
        font-weight: bold;
        color: #2c3e50;
        background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
      }
      .company-name {
        font-size: 28px;
        font-weight: bold;
        color: #2c3e50;
        margin: 10px 0 5px 0;
        text-transform: uppercase;
        letter-spacing: 2px;
      }
      .company-tagline {
        font-size: 14px;
        color: #6c757d;
        font-style: italic;
        margin-bottom: 10px;
      }
      .company-details {
        font-size: 12px;
        color: #495057;
        line-height: 1.3;
      }
      .document-title {
        text-align: center;
        margin: 30px 0;
        font-size: 24px;
        font-weight: bold;
        color: #2c3e50;
        text-transform: uppercase;
        letter-spacing: 1px;
      }
      .estimate-info {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 20px;
        margin-bottom: 30px;
        padding: 15px;
        background: #f8f9fa;
        border-left: 4px solid #2c3e50;
      }
      .info-section h3 {
        margin: 0 0 10px 0;
        font-size: 16px;
        color: #2c3e50;
        border-bottom: 1px solid #dee2e6;
        padding-bottom: 5px;
      }
      .info-section p {
        margin: 5px 0;
        font-size: 14px;
      }
      .cost-breakdown {
        margin: 30px 0;
      }
      .cost-breakdown h2 {
        font-size: 20px;
        color: #2c3e50;
        border-bottom: 2px solid #2c3e50;
        padding-bottom: 10px;
        margin-bottom: 20px;
      }
      .cost-table {
        width: 100%;
        border-collapse: collapse;
        margin-bottom: 20px;
        box-shadow: 0 2px 4px rgba(0,0,0,0.1);
      }
      .cost-table th {
        background: #2c3e50;
        color: white;
        padding: 12px;
        text-align: left;
        font-weight: bold;
        font-size: 14px;
      }
      .cost-table td {
        padding: 10px 12px;
        border-bottom: 1px solid #dee2e6;
        font-size: 14px;
      }
      .cost-table tr:nth-child(even) {
        background: #f8f9fa;
      }
      .cost-table tr:hover {
        background: #e9ecef;
      }
      .total-section {
        margin: 30px 0;
        padding: 20px;
        background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
        color: white;
        border-radius: 8px;
      }
      .total-section h2 {
        margin: 0 0 15px 0;
        font-size: 18px;
        text-align: center;
      }
      .total-row {
        display: flex;
        justify-content: space-between;
        margin: 8px 0;
        font-size: 16px;
      }
      .grand-total {
        border-top: 2px solid white;
        padding-top: 10px;
        margin-top: 15px;
        font-size: 18px;
        font-weight: bold;
      }
      .terms-section {
        margin: 30px 0;
        padding: 20px;
        background: #f8f9fa;
        border-left: 4px solid #28a745;
      }
      .terms-section h3 {
        margin: 0 0 15px 0;
        color: #28a745;
        font-size: 16px;
      }
      .terms-section p {
        margin: 8px 0;
        font-size: 14px;
        line-height: 1.5;
      }
      .signature-section {
        margin-top: 50px;
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 40px;
      }
      .signature-box {
        text-align: center;
        padding: 20px;
        border: 2px solid #2c3e50;
        border-radius: 8px;
        background: #f8f9fa;
      }
      .signature-line {
        border-bottom: 2px solid #2c3e50;
        margin: 40px 0 10px 0;
        height: 2px;
      }
      .signature-label {
        font-size: 14px;
        font-weight: bold;
        color: #2c3e50;
        margin-top: 10px;
      }
      .contractor-seal {
        width: 100px;
        height: 100px;
        border: 3px solid #dc3545;
        border-radius: 50%;
        margin: 0 auto 15px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 12px;
        font-weight: bold;
        color: #dc3545;
        background: white;
        text-align: center;
        line-height: 1.2;
      }
      .footer {
        margin-top: 40px;
        text-align: center;
        font-size: 12px;
        color: #6c757d;
        border-top: 1px solid #dee2e6;
        padding-top: 15px;
      }
      @media print {
        body { margin: 0; }
        .header { page-break-inside: avoid; }
        .signature-section { page-break-inside: avoid; }
      }
    </style>
    </head><body>
    <!-- Company Header -->
    <div class="header">
      <div class="company-logo"></div>
      <div class="company-name">${B} Construction</div>
      <div class="company-tagline">Professional Construction Services</div>
      <div class="company-details">
         Email: ${s?.email||"contact@company.com"} | 
         Phone: ${s?.phone||"+91-XXXXX-XXXXX"} | 
         License: ${s?.license_number||"LIC-XXXXX"}
      </div>
    </div>

    <!-- Document Title -->
    <div class="document-title">Cost Estimate Report</div>

    <!-- Estimate Information -->
    <div class="estimate-info">
      <div class="info-section">
        <h3>Project Details</h3>
        <p><strong>Project Name:</strong> ${l?.project_name||"Construction Project"}</p>
        <p><strong>Location:</strong> ${l?.project_address||"Project Location"}</p>
        <p><strong>Client:</strong> ${t.client_name||"Client Name"}</p>
        <p><strong>Plot Size:</strong> ${l?.plot_size||""}</p>
        <p><strong>Built-up Area:</strong> ${l?.built_up_area||""}</p>
        <p><strong>Floors:</strong> ${l?.floors||""}</p>
      </div>
      <div class="info-section">
        <h3>Estimate Information</h3>
        <p><strong>Estimate Date:</strong> ${L}</p>
        <p><strong>Estimate Valid Until:</strong> ${new Date(Date.now()+720*60*60*1e3).toLocaleDateString("en-IN")}</p>
        <p><strong>Project Duration:</strong> ${t.timeline||"90 days"}</p>
        <p><strong>Estimate #:</strong> EST-${t.id}</p>
      </div>
    </div>

    <!-- Cost Breakdown -->
    <div class="cost-breakdown">
      <h2>Detailed Cost Breakdown</h2>
      <table class="cost-table">
        <thead>
          <tr>
            <th>Item Description</th>
            <th>Quantity</th>
            <th>Unit Rate ()</th>
            <th>Amount ()</th>
          </tr>
        </thead>
        <tbody>
          ${p.filter(P=>P&&(P.name||P.amount)).map(P=>`
      <tr>
        <td>${(P.name||"").toString().replace(/</g,"&lt;")}</td>
              <td>${(P.qty||"").toString().replace(/</g,"&lt;")}</td>
              <td>${(P.rate||"").toString().replace(/</g,"&lt;")}</td>
        <td>${A(P.amount)}</td>
      </tr>
          `).join("")}
          ${m.filter(P=>P&&(P.name||P.amount)).map(P=>`
            <tr>
              <td>${(P.name||"").toString().replace(/</g,"&lt;")}</td>
              <td>${(P.qty||"").toString().replace(/</g,"&lt;")}</td>
              <td>${(P.rate||"").toString().replace(/</g,"&lt;")}</td>
              <td>${A(P.amount)}</td>
            </tr>
          `).join("")}
          ${v.filter(P=>P&&(P.name||P.amount)).map(P=>`
            <tr>
              <td>${(P.name||"").toString().replace(/</g,"&lt;")}</td>
              <td>${(P.qty||"").toString().replace(/</g,"&lt;")}</td>
              <td>${(P.rate||"").toString().replace(/</g,"&lt;")}</td>
              <td>${A(P.amount)}</td>
            </tr>
          `).join("")}
          ${b.filter(P=>P&&(P.name||P.amount)).map(P=>`
            <tr>
              <td>${(P.name||"").toString().replace(/</g,"&lt;")}</td>
              <td>${(P.qty||"").toString().replace(/</g,"&lt;")}</td>
              <td>${(P.rate||"").toString().replace(/</g,"&lt;")}</td>
              <td>${A(P.amount)}</td>
            </tr>
          `).join("")}
        </tbody>
      </table>
      </div>

    <!-- Total Section -->
    <div class="total-section">
      <h2>Cost Summary</h2>
      <div class="total-row">
        <span>Materials Cost:</span>
        <span>${A(l?.totals?.materials||0)}</span>
    </div>
      <div class="total-row">
        <span>Labor Cost:</span>
        <span>${A(l?.totals?.labor||0)}</span>
    </div>
      <div class="total-row">
        <span>Utilities:</span>
        <span>${A(l?.totals?.utilities||0)}</span>
    </div>
      <div class="total-row">
        <span>Miscellaneous:</span>
        <span>${A(l?.totals?.misc||0)}</span>
    </div>
      <div class="total-row">
        <span>Transportation:</span>
        <span>${A(l?.totals?.transport||0)}</span>
    </div>
      <div class="total-row">
        <span>Contingency (5%):</span>
        <span>${A(l?.totals?.contingency||0)}</span>
    </div>
      <div class="total-row grand-total">
        <span>GRAND TOTAL:</span>
        <span>${A(l?.totals?.grand||t.total_cost)}</span>
      </div>
    </div>

    <!-- Terms and Conditions -->
    <div class="terms-section">
      <h3>Terms & Conditions</h3>
      <p><strong>Payment Terms:</strong> 30% advance, 40% on completion of foundation, 30% on completion</p>
      <p><strong>Validity:</strong> This estimate is valid for 30 days from the date of issue</p>
      <p><strong>Materials:</strong> All materials will be of standard quality as per specifications</p>
      <p><strong>Timeline:</strong> Project completion within ${t.timeline||"90"} days from commencement</p>
      <p><strong>Warranty:</strong> 1 year warranty on workmanship, 5 years on structural elements</p>
      <p><strong>Notes:</strong> ${t.notes?t.notes.replace(/\n/g,"<br/>"):"All work to be done as per approved drawings and specifications"}</p>
    </div>

    <!-- Signature Section -->
    <div class="signature-section">
      <div class="signature-box">
        <div class="signature-line"></div>
        <div class="signature-label">Client Signature</div>
        <p style="margin-top: 10px; font-size: 12px; color: #6c757d;">Date: _______________</p>
      </div>
      <div class="signature-box">
        <div class="contractor-seal">
          <div>OFFICIAL<br/>SEAL</div>
        </div>
        <div class="signature-line"></div>
        <div class="signature-label">${B}</div>
        <p style="margin-top: 5px; font-size: 12px; color: #6c757d;">Authorized Contractor</p>
        <p style="margin-top: 5px; font-size: 12px; color: #6c757d;">Date: ${L}</p>
      </div>
    </div>

    <!-- Footer -->
    <div class="footer">
      <p>This is a computer-generated estimate. For any clarifications, please contact us.</p>
      <p> ${new Date().getFullYear()} ${B} Construction. All rights reserved.</p>
    </div>
    </body></html>`},C=t.homeowner_message&&t.homeowner_message.trim(),Q=t.status==="accepted";return C&&console.log("Estimate has homeowner message:",t.id,t.homeowner_message),e.jsxs("div",{className:"list-item",style:{borderLeft:C?"4px solid #10b981":void 0,background:C?"linear-gradient(to right, #ffffff 0%, #f0fdf4 5%)":void 0},children:[e.jsx("div",{className:"item-image",children:C?"":""}),e.jsxs("div",{className:"item-content",style:{flex:1},children:[e.jsxs("h4",{className:"item-title",style:{margin:0},children:[C&&Q?" Accepted ":"","Estimate #",t.id]}),e.jsxs("p",{className:"item-subtitle",style:{margin:"2px 0 0 0"},children:["Total: ",A(t.total_cost??l?.totals?.grand),"  ",new Date(t.created_at).toLocaleString()]}),t.timeline&&e.jsxs("p",{className:"item-meta",children:["Timeline: ",t.timeline]}),C&&e.jsxs("div",{style:{marginTop:"12px",padding:"12px",background:"linear-gradient(135deg, #ecfdf5 0%, #d1fae5 100%)",borderRadius:"8px",border:"1px solid #10b981"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:"8px"},children:[e.jsx("span",{style:{fontSize:"18px",marginRight:"8px"},children:""}),e.jsx("strong",{style:{color:"#065f46",fontSize:"14px"},children:"Message from Homeowner:"})]}),e.jsx("div",{style:{color:"#047857",fontSize:"13px",lineHeight:"1.6",whiteSpace:"pre-wrap",paddingLeft:"26px"},children:t.homeowner_message})]}),e.jsxs("details",{style:{marginTop:6},children:[e.jsx("summary",{style:{cursor:"pointer"},children:"View breakdown"}),e.jsx("div",{className:"card",style:{marginTop:8},children:e.jsxs("div",{className:"grid",style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8},children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Project:"})," ",l?.project_name||""]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Address:"})," ",l?.project_address||""]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Plot Size:"})," ",l?.plot_size||""]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Built-up Area:"})," ",l?.built_up_area||""]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Floors:"})," ",l?.floors||""]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Date:"})," ",l?.estimation_date||""]})]})}),p.length>0&&e.jsx(u,{title:"Materials",rows:p}),m.length>0&&e.jsx(u,{title:"Labor",rows:m}),v.length>0&&e.jsx(u,{title:"Utilities & Fixtures",rows:v}),b.length>0&&e.jsx(u,{title:"Miscellaneous",rows:b}),e.jsxs("div",{className:"card",style:{marginTop:8},children:[e.jsxs("div",{className:"row",style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("div",{className:"muted",children:"Materials Total"}),e.jsx("div",{children:e.jsx("strong",{children:A(l?.totals?.materials)})})]}),e.jsxs("div",{className:"row",style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("div",{className:"muted",children:"Labor Total"}),e.jsx("div",{children:e.jsx("strong",{children:A(l?.totals?.labor)})})]}),e.jsxs("div",{className:"row",style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("div",{className:"muted",children:"Utilities Total"}),e.jsx("div",{children:e.jsx("strong",{children:A(l?.totals?.utilities)})})]}),e.jsxs("div",{className:"row",style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("div",{className:"muted",children:"Misc Total"}),e.jsx("div",{children:e.jsx("strong",{children:A(l?.totals?.misc)})})]}),e.jsxs("div",{className:"row",style:{display:"flex",justifyContent:"space-between",marginTop:6},children:[e.jsx("div",{className:"muted",children:"Grand Total"}),e.jsx("div",{className:"total",children:e.jsx("strong",{children:A(l?.totals?.grand||t.total_cost)})})]})]}),t.notes&&e.jsxs("div",{className:"card",style:{marginTop:8},children:[e.jsx("h4",{style:{margin:"0 0 6px 0"},children:"Notes"}),e.jsx("div",{style:{whiteSpace:"pre-wrap"},children:t.notes})]})]})]}),e.jsxs("div",{className:"item-actions",style:{display:"flex",gap:6},children:[e.jsx("button",{className:"btn btn-primary",onClick:async()=>{try{const j=x(s),B=s?.first_name&&s?.last_name?`${s.first_name} ${s.last_name}`:"Contractor",L=document.createElement("div");L.style.position="absolute",L.style.left="-9999px",L.style.top="-9999px",L.style.width="210mm",L.style.padding="20mm",L.style.backgroundColor="white",L.style.fontFamily="Times New Roman, serif",L.style.fontSize="12px",L.style.lineHeight="1.4",L.style.color="#1a1a1a",L.innerHTML=j,document.body.appendChild(L),console.log("Converting HTML to canvas...");const P=await Kc(L,{scale:2,useCORS:!0,allowTaint:!0,backgroundColor:"#ffffff"});console.log("Canvas created:",P.width,"x",P.height),document.body.removeChild(L),console.log("Creating PDF...");const F=new is("p","mm","a4"),ee=P.toDataURL("image/png"),K=210,q=295,E=P.height*K/P.width;let U=E;console.log("Image dimensions:",K,"x",E);let V=0;for(F.addImage(ee,"PNG",0,V,K,E),U-=q;U>=0;)V=U-E,F.addPage(),F.addImage(ee,"PNG",0,V,K,E),U-=q;const H=`Estimate_${B.replace(/\s+/g,"_")}_${Date.now().toString().slice(-6)}.pdf`;console.log("Saving PDF as:",H);try{const I=F.output("blob"),M=URL.createObjectURL(I),re=document.createElement("a");re.href=M,re.download=H,re.style.display="none",document.body.appendChild(re),re.click(),document.body.removeChild(re),URL.revokeObjectURL(M),console.log("PDF downloaded via blob method")}catch(I){console.log("Blob method failed, trying direct save:",I),F.save(H)}console.log("PDF save method called")}catch(j){console.error("Download failed:",j)}},children:"Download PDF Report"}),e.jsx("button",{className:"btn btn-secondary",onClick:async()=>{a("Remove Estimate","Are you sure you want to remove this estimate? This action cannot be undone.",async()=>{try{const j=JSON.parse(sessionStorage.getItem("user")||"{}"),L=await(await fetch("/buildhub/backend/api/contractor/delete_estimate.php",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({estimate_id:t.id,contractor_id:j.id})})).json().catch(()=>({}));L.success?(r.success("Estimate removed successfully!"),window.dispatchEvent(new CustomEvent("refreshEstimates"))):r.error(L.message||"Failed to remove estimate. Please try again.")}catch(j){r.error("Error removing estimate. Please try again."),console.error(j)}})},style:{background:"#ef4444",color:"white",border:"1px solid #ef4444",fontSize:"12px",padding:"6px 12px"},children:" Remove"})]})]})},p6=({user:t,onProfileClick:s,onLogout:a,className:r="",showRole:o=!0,size:l="medium",position:A="bottom-right"})=>{const[u,h]=N.useState(!1),p=N.useRef(null);N.useEffect(()=>{const j=B=>{p.current&&!p.current.contains(B.target)&&h(!1)};return u&&document.addEventListener("mousedown",j),()=>{document.removeEventListener("mousedown",j)}},[u]);const m=()=>{h(!u)},v=()=>{h(!1)},b=()=>{h(!1),s&&s()},x=()=>{h(!1),a&&a()},C=()=>{if(t?.first_name&&t?.last_name)return`${t.first_name.charAt(0)}${t.last_name.charAt(0)}`.toUpperCase();if(t?.name){const j=t.name.split(" ");return`${j[0]?.[0]||""}${j[1]?.[0]||""}`.toUpperCase()}return t?.email?t.email.charAt(0).toUpperCase():"U"},Q=()=>{if(!o)return null;const j=t?.role||"User";return j.charAt(0).toUpperCase()+j.slice(1)};return e.jsxs("div",{ref:p,className:`profile-button-container ${r}`,children:[e.jsxs("button",{className:`profile-button ${l}`,onClick:m,"aria-haspopup":"menu","aria-expanded":u,children:[e.jsx("div",{className:"profile-avatar",children:t?.avatar_url?e.jsx("img",{src:t.avatar_url,alt:"Profile",style:{width:"100%",height:"100%",borderRadius:"50%",objectFit:"cover"}}):C()}),e.jsx("div",{className:"profile-info",children:o&&e.jsx("div",{className:"profile-role",children:Q()})}),e.jsx("div",{className:`profile-arrow ${u?"open":""}`,children:""})]}),e.jsx(f6,{isOpen:u,onClose:v,user:t,position:A,onProfileSetup:b,onLogout:x})]})},f6=({isOpen:t,onClose:s,user:a,position:r,onProfileSetup:o,onLogout:l})=>{const A=N.useRef(null);return N.useEffect(()=>{const u=h=>{A.current&&!A.current.contains(h.target)&&s()};return t&&document.addEventListener("mousedown",u),()=>{document.removeEventListener("mousedown",u)}},[t,s]),t?e.jsx("div",{ref:A,className:`profile-popup ${r}`,children:e.jsxs("div",{className:"profile-popup-content",children:[e.jsxs("div",{className:"profile-popup-header",children:[e.jsx("div",{className:"profile-popup-avatar",children:a?.avatar_url?e.jsx("img",{src:a.avatar_url,alt:"Profile",style:{width:"100%",height:"100%",borderRadius:"50%",objectFit:"cover"}}):a?.first_name?.charAt(0)+a?.last_name?.charAt(0)}),e.jsxs("div",{className:"profile-popup-info",children:[e.jsxs("div",{className:"profile-popup-name",children:[a?.first_name," ",a?.last_name]}),e.jsx("div",{className:"profile-popup-role",children:a?.role?.charAt(0).toUpperCase()+a?.role?.slice(1)})]})]}),e.jsx("div",{className:"profile-popup-divider"}),e.jsxs("div",{className:"profile-popup-menu",children:[e.jsxs("button",{className:"profile-popup-item",onClick:o,children:[e.jsx("span",{className:"profile-popup-icon",children:""}),e.jsx("span",{children:"Profile Setup"})]}),e.jsxs("button",{className:"profile-popup-item logout",onClick:l,children:[e.jsx("span",{className:"profile-popup-icon",children:""}),e.jsx("span",{children:"Logout"})]})]})]})}):null},m6=({user:t,profile:s,setProfile:a,onSave:r,onReset:o,loading:l,saving:A,reviews:u=[],reviewCount:h=0,avgRating:p=0,onUserUpdate:m})=>{const[v,b]=N.useState(!1),[x,C]=N.useState(null),[Q,j]=N.useState(null),B=N.useRef(null),L=async E=>{const U=E.target.files[0];if(U){C(U);const V=new FileReader;V.onload=H=>{j(H.target.result)},V.readAsDataURL(U);try{const H=new FormData;H.append("avatar",U),H.append("user_id",t?.id||"");const M=await(await fetch("/buildhub/backend/api/upload_avatar.php",{method:"POST",body:H,credentials:"include"})).json();if(M.success){const re={...t,avatar_url:M.avatar_url};localStorage.setItem("bh_user",JSON.stringify(re)),typeof m=="function"&&m(re),j(null),console.log("Avatar uploaded successfully:",M.avatar_url)}else console.error("Avatar upload failed:",M.message),j(null)}catch(H){console.error("Error uploading avatar:",H),j(null)}}},P=()=>{b(!0)},F=()=>{b(!1),o()},ee=E=>{E.preventDefault(),r(E),b(!1)},K=()=>t?.first_name&&t?.last_name?`${t.first_name.charAt(0)}${t.last_name.charAt(0)}`.toUpperCase():"A",q=E=>[1,2,3,4,5].map(U=>e.jsx("span",{className:`star ${E>=U?"filled":""}`,children:""},U));return e.jsxs("div",{className:"stylish-profile",children:[e.jsxs("div",{className:"profile-header",children:[e.jsx("div",{className:"profile-cover",children:e.jsx("div",{className:"cover-gradient"})}),e.jsxs("div",{className:"profile-info-section",children:[e.jsxs("div",{className:"profile-avatar-container",children:[e.jsxs("div",{className:"profile-avatar-large",children:[Q?e.jsx("img",{src:Q,alt:"Profile",className:"avatar-image"}):t?.avatar_url?e.jsx("img",{src:t.avatar_url,alt:"Profile",className:"avatar-image"}):e.jsx("div",{className:"avatar-initials",children:K()}),v&&e.jsx("button",{className:"avatar-upload-btn",onClick:()=>B.current?.click(),children:""})]}),e.jsx("input",{ref:B,type:"file",accept:"image/*",onChange:L,style:{display:"none"}})]}),e.jsxs("div",{className:"profile-details",children:[e.jsxs("h1",{className:"profile-name",children:[t?.first_name," ",t?.last_name]}),e.jsx("p",{className:"profile-title",children:"Architect"}),e.jsxs("div",{className:"profile-stats",children:[e.jsxs("div",{className:"stat-item",children:[e.jsx("span",{className:"stat-value",children:p.toFixed(1)}),e.jsx("span",{className:"stat-label",children:"Rating"}),e.jsx("div",{className:"stars",children:q(p)})]}),e.jsxs("div",{className:"stat-item",children:[e.jsx("span",{className:"stat-value",children:h}),e.jsx("span",{className:"stat-label",children:"Reviews"})]}),e.jsxs("div",{className:"stat-item",children:[e.jsx("span",{className:"stat-value",children:s.experience_years||0}),e.jsx("span",{className:"stat-label",children:"Years Experience"})]})]})]})]})]}),e.jsxs("div",{className:"profile-content",children:[e.jsx("div",{className:"profile-actions",children:v?e.jsxs("div",{className:"edit-actions",children:[e.jsx("button",{className:"cancel-btn",onClick:F,children:"Cancel"}),e.jsx("button",{className:"save-btn",onClick:ee,disabled:A,children:A?"Saving...":"Save Changes"})]}):e.jsx("button",{className:"edit-btn",onClick:P,children:" Edit Profile"})}),e.jsxs("div",{className:"profile-sections",children:[e.jsxs("div",{className:"profile-section",children:[e.jsx("h3",{className:"section-title",children:"Basic Information"}),e.jsxs("div",{className:"info-grid",children:[e.jsxs("div",{className:"info-item",children:[e.jsx("label",{children:"Email"}),v?e.jsx("input",{type:"email",value:s.email,disabled:!0,className:"info-input disabled"}):e.jsx("span",{className:"info-value",children:s.email})]}),e.jsxs("div",{className:"info-item",children:[e.jsx("label",{children:"Phone"}),v?e.jsx("input",{type:"text",value:s.phone,onChange:E=>a({...s,phone:E.target.value}),className:"info-input",placeholder:"Enter phone number"}):e.jsx("span",{className:"info-value",children:s.phone||"Not provided"})]}),e.jsxs("div",{className:"info-item",children:[e.jsx("label",{children:"City"}),v?e.jsx("input",{type:"text",value:s.city,onChange:E=>a({...s,city:E.target.value}),className:"info-input",placeholder:"Enter city"}):e.jsx("span",{className:"info-value",children:s.city||"Not provided"})]})]})]}),e.jsxs("div",{className:"profile-section",children:[e.jsx("h3",{className:"section-title",children:"Professional Information"}),e.jsxs("div",{className:"info-grid",children:[e.jsxs("div",{className:"info-item full-width",children:[e.jsx("label",{children:"Specialization"}),v?e.jsxs("div",{className:"specialization-input-container",children:[e.jsx("input",{type:"text",value:s.specialization,onChange:E=>a({...s,specialization:E.target.value}),className:"info-input",placeholder:"e.g., Residential Architect, Commercial Architect",list:"specialization-options"}),e.jsxs("datalist",{id:"specialization-options",children:[e.jsx("option",{value:"Residential Architect"}),e.jsx("option",{value:"Commercial Architect"}),e.jsx("option",{value:"Interior Designer"}),e.jsx("option",{value:"Landscape Architect"}),e.jsx("option",{value:"Urban Planner"}),e.jsx("option",{value:"Industrial Architect"}),e.jsx("option",{value:"Healthcare Architect"}),e.jsx("option",{value:"Educational Architect"}),e.jsx("option",{value:"Restoration/Conservation Architect"}),e.jsx("option",{value:"Sustainable/Green Architect"}),e.jsx("option",{value:"Hospitality Architect"}),e.jsx("option",{value:"Transport Architect"})]})]}):e.jsx("span",{className:"info-value",children:s.specialization||"Not specified"})]}),e.jsxs("div",{className:"info-item",children:[e.jsx("label",{children:"Experience (Years)"}),v?e.jsx("input",{type:"number",min:"0",value:s.experience_years,onChange:E=>a({...s,experience_years:E.target.value}),className:"info-input",placeholder:"0"}):e.jsxs("span",{className:"info-value",children:[s.experience_years||0," years"]})]})]})]}),u.length>0&&e.jsxs("div",{className:"profile-section",children:[e.jsx("h3",{className:"section-title",children:"Recent Reviews"}),e.jsx("div",{className:"reviews-list",children:u.slice(0,3).map((E,U)=>e.jsxs("div",{className:"review-card",children:[e.jsxs("div",{className:"review-header",children:[e.jsxs("div",{className:"reviewer-info",children:[e.jsx("span",{className:"reviewer-name",children:E.author||"Anonymous"}),e.jsx("div",{className:"review-stars",children:q(E.rating)})]}),e.jsx("span",{className:"review-date",children:new Date(E.created_at).toLocaleDateString()})]}),E.comment&&e.jsx("p",{className:"review-comment",children:E.comment})]},U))})]})]})]})]})},l2=({data:t,setData:s,onNext:a,onPrev:r})=>{const[o,l]=N.useState("floor_plans"),[A,u]=N.useState(""),[h,p]=N.useState(!0),[m,v]=N.useState({floor_plan_layout:t.technical_details?.floor_plan_layout||"",room_dimensions:t.technical_details?.room_dimensions||{living_room:"",master_bedroom:"",kitchen:"",other_rooms:""},door_window_positions:t.technical_details?.door_window_positions||"",circulation_paths:t.technical_details?.circulation_paths||"",structural_elements:t.technical_details?.structural_elements||"",elevations_sections:t.technical_details?.elevations_sections||"",construction_notes:t.technical_details?.construction_notes||"",foundation_type:t.technical_details?.foundation_type||"",structural_materials:t.technical_details?.structural_materials||"",load_bearing_elements:t.technical_details?.load_bearing_elements||"",facade_treatment:t.technical_details?.facade_treatment||"",section_details:t.technical_details?.section_details||"",building_height:t.technical_details?.building_height||"",material_specifications:t.technical_details?.material_specifications||"",construction_methods:t.technical_details?.construction_methods||"",special_requirements:t.technical_details?.special_requirements||"",electrical_system:t.technical_details?.electrical_system||"",plumbing_system:t.technical_details?.plumbing_system||"",hvac_system:t.technical_details?.hvac_system||"",fire_safety:t.technical_details?.fire_safety||"",accessibility_features:t.technical_details?.accessibility_features||"",energy_efficiency:t.technical_details?.energy_efficiency||"",estimated_cost:t.technical_details?.estimated_cost||"",cost_breakdown:t.technical_details?.cost_breakdown||"",material_costs:t.technical_details?.material_costs||"",labor_costs:t.technical_details?.labor_costs||"",view_price:t.technical_details?.view_price||t.view_price||0}),b=N.useMemo(()=>[{id:"residential_concrete",name:"Residential  Concrete baseline",data:{structural_elements:"RCC framed structure with concrete columns, beams, and slabs. Standard residential construction with M20 grade concrete.",foundation_type:"RCC Foundation with strip footing",structural_materials:"M20 grade concrete, Fe415 steel reinforcement",electrical_system:"Standard residential electrical layout with MCB distribution board",plumbing_system:"CPVC pipes for water supply, PVC for drainage",hvac_system:"Natural ventilation with ceiling fans",estimated_cost:"15,00,000 - 20,00,000"}},{id:"steel_office",name:"Office  Steel frame + curtain wall",data:{structural_elements:"Steel frame structure with composite steel-concrete floors. Modern office building design.",foundation_type:"Raft foundation with pile foundation",structural_materials:"Structural steel grade Fe500, M25 grade concrete",electrical_system:"Commercial electrical system with UPS backup",plumbing_system:"GI pipes for water supply, cast iron for drainage",hvac_system:"Centralized AC system with VRF technology",estimated_cost:"25,00,000 - 35,00,000"}},{id:"timber_school",name:"School  Timber CLT",data:{structural_elements:"Cross-laminated timber (CLT) structure with steel connections",foundation_type:"Strip foundation with timber posts",structural_materials:"CLT panels, structural timber, steel connections",electrical_system:"Educational facility electrical with safety features",plumbing_system:"PEX pipes for water supply, PVC for drainage",hvac_system:"Natural ventilation with mechanical assistance",estimated_cost:"18,00,000 - 25,00,000"}},{id:"residential_contemporary",name:"Residential  Contemporary",data:{structural_elements:"Modern RCC structure with cantilevered elements and glass facades",foundation_type:"RCC foundation with basement",structural_materials:"M25 grade concrete, Fe500 steel, glass curtain wall",electrical_system:"Smart home electrical system with automation",plumbing_system:"PEX pipes with smart water management",hvac_system:"VRF air conditioning with heat recovery",estimated_cost:"30,00,000 - 45,00,000"}},{id:"residential_traditional",name:"Residential  Traditional",data:{structural_elements:"Traditional masonry construction with RCC roof",foundation_type:"Strip foundation with masonry walls",structural_materials:"Brick masonry, M15 grade concrete, traditional roofing",electrical_system:"Standard residential electrical with traditional aesthetics",plumbing_system:"Traditional plumbing with modern fixtures",hvac_system:"Natural ventilation with traditional cooling methods",estimated_cost:"12,00,000 - 18,00,000"}},{id:"residential_minimalist",name:"Residential  Modern Minimal",data:{structural_elements:"Minimalist RCC structure with clean lines and open spaces",foundation_type:"RCC foundation with floating slab",structural_materials:"M20 grade concrete, minimal steel, clean finishes",electrical_system:"Hidden electrical system with minimal visible elements",plumbing_system:"Concealed plumbing with minimalist fixtures",hvac_system:"Underfloor heating with minimal visible systems",estimated_cost:"20,00,000 - 30,00,000"}},{id:"commercial_retail",name:"Commercial  Retail shell",data:{structural_elements:"Steel frame with large open spaces for retail flexibility",foundation_type:"Raft foundation for heavy loads",structural_materials:"Structural steel, composite floors, curtain wall system",electrical_system:"High-capacity commercial electrical with backup",plumbing_system:"Commercial plumbing with multiple connections",hvac_system:"Centralized HVAC with zone control",estimated_cost:"40,00,000 - 60,00,000"}},{id:"commercial_mixeduse",name:"Commercial  Mixed-use podium + tower",data:{structural_elements:"Mixed-use structure with podium and tower elements",foundation_type:"Deep foundation with basement levels",structural_materials:"High-strength concrete M30+, structural steel",electrical_system:"Multi-zone electrical system for different uses",plumbing_system:"Complex plumbing system for multiple functions",hvac_system:"Zoned HVAC system for different building uses",estimated_cost:"50,00,000 - 80,00,000"}},{id:"residential_villa",name:"Residential  Luxury Villa",data:{structural_elements:"Luxury RCC structure with premium finishes and features",foundation_type:"RCC foundation with basement and parking",structural_materials:"High-grade concrete M25+, premium steel, luxury finishes",electrical_system:"Premium electrical system with smart home features",plumbing_system:"Premium plumbing with luxury fixtures",hvac_system:"Premium HVAC with smart climate control",estimated_cost:"60,00,000 - 1,00,00,000"}},{id:"residential_apartment_midrise",name:"Residential  Mid-rise Apartments",data:{structural_elements:"Mid-rise RCC structure optimized for apartment living",foundation_type:"RCC foundation with basement parking",structural_materials:"M25 grade concrete, Fe500 steel, apartment finishes",electrical_system:"Apartment electrical system with individual meters",plumbing_system:"Apartment plumbing with individual connections",hvac_system:"Individual AC units with common ventilation",estimated_cost:"35,00,000 - 50,00,000"}}],[]),x=N.useMemo(()=>({floor_plan_layout:["Simple rectangular layout with clear circulation","U-shaped layout with central courtyard","L-shaped layout with optimal space utilization","Open plan layout with flexible spaces","Traditional layout with separate formal and informal areas","Modern minimalist layout with clean lines","Duplex layout with ground floor and upper floor"],room_dimensions:[{label:"Standard 2BHK",living_room:"2015 ft",master_bedroom:"1412 ft",kitchen:"108 ft",other_rooms:`Bedroom 2: 1210 ft
Bathroom: 86 ft`},{label:"Compact 2BHK",living_room:"1814 ft",master_bedroom:"1211 ft",kitchen:"97 ft",other_rooms:`Bedroom 2: 1110 ft
Bathroom: 76 ft`},{label:"Luxury 3BHK",living_room:"2418 ft",master_bedroom:"1614 ft",kitchen:"1210 ft",other_rooms:`Bedroom 2: 1412 ft
Bedroom 3: 1211 ft
Bathroom 1: 108 ft
Bathroom 2: 96 ft`},{label:"Standard 3BHK",living_room:"2216 ft",master_bedroom:"1413 ft",kitchen:"119 ft",other_rooms:`Bedroom 2: 1311 ft
Bedroom 3: 1210 ft
Bathroom 1: 96 ft
Bathroom 2: 86 ft`},{label:"Spacious 4BHK",living_room:"2620 ft",master_bedroom:"1815 ft",kitchen:"1411 ft",other_rooms:`Bedroom 2: 1513 ft
Bedroom 3: 1412 ft
Bedroom 4: 1211 ft
Bathroom 1: 108 ft
Bathroom 2: 96 ft`}],living_room_options:["2015 ft","1814 ft","2418 ft","2216 ft","2620 ft","1612 ft","2822 ft"],master_bedroom_options:["1412 ft","1211 ft","1614 ft","1413 ft","1815 ft","1513 ft","2016 ft"],kitchen_options:["108 ft","97 ft","1210 ft","119 ft","1411 ft","109 ft","1512 ft"],door_window_positions:["North-facing main entrance with east-west rooms for optimal sunlight","Southern exposure for main living spaces, northern entrance","Cross-ventilation with opposing windows in all rooms","Windows positioned for privacy while maximizing natural light","Strategic door placement for optimal flow and privacy","Open floor plan with minimal partitions, large windows","Traditional layout with separate entrance for formal and informal areas"],circulation_paths:["Central hallway with easy access to all rooms","Minimal circulation with direct access to spaces","Defined pathways separating public and private zones","Open circulation allowing flexible use of space","Traditional layout with clear public-private zoning","Minimal corridors maximizing usable area"],structural_elements:["RCC framed structure with concrete columns, beams, and slabs","Steel frame structure with composite steel-concrete floors","Load-bearing masonry with RCC roof","Hybrid structure combining steel and concrete"],foundation_type:["RCC strip footing foundation","Raft foundation with pile system","Pile foundation for high loads","RCC foundation with basement","Isolated footing foundation"],structural_materials:["M20 grade concrete, Fe415 steel reinforcement","M25 grade concrete, Fe500 steel","Structural steel grade Fe500","M15 grade concrete for foundation","High-strength concrete M30+"],electrical_system:["Standard residential electrical layout with MCB distribution board","Commercial electrical system with UPS backup","Smart home electrical system with automation","High-capacity commercial electrical with backup","Premium electrical system with smart home features"],plumbing_system:["CPVC pipes for water supply, PVC for drainage","GI pipes for water supply, cast iron for drainage","PEX pipes for water supply, PVC for drainage","Concealed plumbing with minimalist fixtures"],hvac_system:["Natural ventilation with ceiling fans","Centralized AC system with VRF technology","VRF air conditioning with heat recovery","Individual AC units with common ventilation","Natural ventilation with mechanical assistance"],facade_treatment:["Standard cement plaster finish with paint","Premium facade with glass curtain wall","Traditional brick facade with stone accents","Modern minimalist facade with clean lines","Textured plaster with designer finishes"],fire_safety:["Standard fire safety with fire extinguishers and exit signs","Fire sprinkler system with smoke detectors","Advanced fire safety system with sprinklers and alarms","Complete fire safety with automatic sprinkler system","Standard fire safety compliance with smoke detectors"],accessibility_features:["Ramps and accessible parking","Wheelchair accessible with elevators","Complete accessibility features with ramps and rails","Universal design with accessible facilities","Basic accessibility with ramps"],energy_efficiency:["Standard insulation with energy-efficient windows","Solar panels with energy-efficient design","High-performance insulation and solar features","Green building practices with energy efficiency","Standard energy efficiency with proper ventilation"],load_bearing_elements:["RCC columns and beams with standard spacing","Load-bearing walls with RCC slabs","Steel columns with composite floors","RCC columns with precast elements","Hybrid structure with RC frame and masonry walls"],elevations_sections:["Standard elevation with cement plaster and paint","Modern elevation with glass and designer materials","Traditional elevation with decorative elements","Minimalist elevation with clean lines","Premium elevation with high-quality finishes"],section_details:["Standard wall thickness with cavity insulation","Reinforced concrete sections with proper detailing","Composite sections with steel and concrete","Insulated sections for energy efficiency","Load-bearing wall sections with proper foundations"],building_height:["Ground + 1 floor (approx. 10.5m)","Ground + 2 floors (approx. 13.5m)","Ground + 3 floors (approx. 16.5m)","Ground + 4 floors (approx. 19.5m)","Single story (approx. 7.5m ceiling)","Multi-storey high-rise (20m+)"],construction_notes:["Standard residential construction with M20 concrete","Premium construction with high-quality materials","Sustainable construction with eco-friendly materials","Fast-track construction with modern methods","Traditional construction with local materials","Industrial construction for commercial use"],material_specifications:["M20 grade concrete, Fe415 steel, standard finishes","M25 grade concrete, Fe500 steel, premium finishes","Standard cement, sand, steel, and tiles","High-grade materials with designer finishes","Eco-friendly materials with sustainable options"],construction_methods:["Traditional construction methodology","Modern construction with precast elements","Fast-track construction technique","Hybrid construction approach","Sustainable construction practices","Modular construction methodology"],special_requirements:["Earthquake-resistant design with proper reinforcement","Waterproofing and damp-proofing systems","Sound insulation and acoustic treatment","Thermal insulation for energy efficiency","Security features and smart home integration","Accessibility compliance with ramps and elevators"],cost_breakdown:["Foundation: 15%, Structure: 30%, Finishing: 35%, Services: 20%","Site work: 10%, Structure: 35%, Finishing: 40%, Services: 15%","Foundation: 20%, Frame: 25%, Roofing: 15%, Finishing: 40%","Land preparation: 8%, Structure: 32%, Interior: 45%, Exterior: 15%"],material_costs:["Cement: 250/bag, Steel: 55/kg, Bricks: 8/unit","High-grade materials: Cement 280/bag, Steel 65/kg","Premium materials: Cement 320/bag, Steel 75/kg","Standard materials: Cement 240/bag, Steel 52/kg"],labor_costs:["Masonry: 600/day, Carpenter: 700/day, Electrician: 550/day","Skilled: 800/day, Unskilled: 500/day, Specialist: 1000/day","Standard labor: 600/day, Specialized: 900/day","Premium labor: 900/day, Supervisor: 1200/day"]}),[]),C=(G,Z)=>{B(G,Z)},Q=G=>{L("living_room",G.living_room),L("master_bedroom",G.master_bedroom),L("kitchen",G.kitchen),L("other_rooms",G.other_rooms)},j=N.useMemo(()=>[{id:"floor_plans",title:"Floor Plans & Layout",icon:"",description:"Complete the fields below to provide technical details for this section"},{id:"structural",title:"Structural Elements",icon:"",description:"Specify structural components and construction methods"},{id:"elevations",title:"Key Elevations & Sections",icon:"",description:"Provide details about building elevations and cross-sections"},{id:"construction",title:"Construction Notes",icon:"",description:"Additional construction specifications and considerations"},{id:"systems",title:"Building Systems",icon:"",description:"Electrical, plumbing, HVAC, and other building systems"},{id:"pricing",title:"Cost Estimation",icon:"",description:"Pricing information and cost breakdown"}],[]),B=(G,Z)=>{const fe={...m,[G]:Z};v(fe),s({...t,technical_details:fe})},L=(G,Z)=>{const fe={...m.room_dimensions,[G]:Z},Ae={...m,room_dimensions:fe};v(Ae),s({...t,technical_details:Ae})},P=G=>{if(u(G),G){const Z=b.find(fe=>fe.id===G);if(Z){const fe={...m,...Z.data};v(fe),s({...t,technical_details:fe})}}},F=()=>{const G=j.findIndex(Z=>Z.id===o);G<j.length-1&&l(j[G+1].id)},ee=()=>{const G=j.findIndex(Z=>Z.id===o);G>0&&l(j[G-1].id)},K=G=>{G.preventDefault(),s(Z=>({...Z,technical_details:m,view_price:m.view_price})),a()},q=()=>e.jsxs("div",{className:"technical-section",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Floor Plan Layout Description"}),h&&x.floor_plan_layout&&e.jsx("div",{className:"quick-fill-buttons",children:x.floor_plan_layout.map((G,Z)=>e.jsx("button",{type:"button",className:"quick-fill-btn",onClick:()=>C("floor_plan_layout",G),children:G},Z))}),e.jsx("textarea",{value:m.floor_plan_layout,onChange:G=>B("floor_plan_layout",G.target.value),placeholder:"Describe the floor plan layout, room arrangements, and spatial organization...",rows:"4"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Room Dimensions"}),h&&x.room_dimensions&&e.jsx("div",{className:"quick-fill-buttons",style:{marginBottom:"16px"},children:x.room_dimensions.map((G,Z)=>e.jsxs("button",{type:"button",className:"quick-fill-btn",onClick:()=>Q(G),style:{fontSize:"11px",padding:"6px 10px"},children:[" ",G.label]},Z))}),e.jsxs("div",{className:"dimensions-grid",children:[e.jsxs("div",{className:"dimension-item",children:[e.jsx("label",{children:"Living Room"}),h&&x.living_room_options&&e.jsx("div",{className:"quick-fill-buttons",children:x.living_room_options.map((G,Z)=>e.jsx("button",{type:"button",className:"quick-fill-btn",onClick:()=>L("living_room",G),style:{fontSize:"11px",padding:"4px 8px"},children:G},Z))}),e.jsx("input",{type:"text",value:m.room_dimensions.living_room,onChange:G=>L("living_room",G.target.value),placeholder:"e.g., 20  15 ft"})]}),e.jsxs("div",{className:"dimension-item",children:[e.jsx("label",{children:"Master Bedroom"}),h&&x.master_bedroom_options&&e.jsx("div",{className:"quick-fill-buttons",children:x.master_bedroom_options.map((G,Z)=>e.jsx("button",{type:"button",className:"quick-fill-btn",onClick:()=>L("master_bedroom",G),style:{fontSize:"11px",padding:"4px 8px"},children:G},Z))}),e.jsx("input",{type:"text",value:m.room_dimensions.master_bedroom,onChange:G=>L("master_bedroom",G.target.value),placeholder:"e.g., 16  12 ft"})]}),e.jsxs("div",{className:"dimension-item",children:[e.jsx("label",{children:"Kitchen"}),h&&x.kitchen_options&&e.jsx("div",{className:"quick-fill-buttons",children:x.kitchen_options.map((G,Z)=>e.jsx("button",{type:"button",className:"quick-fill-btn",onClick:()=>L("kitchen",G),style:{fontSize:"11px",padding:"4px 8px"},children:G},Z))}),e.jsx("input",{type:"text",value:m.room_dimensions.kitchen,onChange:G=>L("kitchen",G.target.value),placeholder:"e.g., 12  10 ft"})]}),e.jsxs("div",{className:"dimension-item",children:[e.jsx("label",{children:"Other Rooms"}),e.jsx("textarea",{value:m.room_dimensions.other_rooms,onChange:G=>L("other_rooms",G.target.value),placeholder:"Bedroom 2: 14  12 ft, Bedroom 3: 12  10 ft, Bathroom: 8  6 ft...",rows:"3"})]})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Door & Window Positions"}),h&&x.door_window_positions&&e.jsx("div",{className:"quick-fill-buttons",children:x.door_window_positions.map((G,Z)=>e.jsx("button",{type:"button",className:"quick-fill-btn",onClick:()=>C("door_window_positions",G),children:G},Z))}),e.jsx("textarea",{value:m.door_window_positions,onChange:G=>B("door_window_positions",G.target.value),placeholder:"Specify door and window locations, sizes, and orientations...",rows:"4"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Main Circulation Paths"}),h&&x.circulation_paths&&e.jsx("div",{className:"quick-fill-buttons",children:x.circulation_paths.map((G,Z)=>e.jsx("button",{type:"button",className:"quick-fill-btn",onClick:()=>C("circulation_paths",G),children:G},Z))}),e.jsx("textarea",{value:m.circulation_paths,onChange:G=>B("circulation_paths",G.target.value),placeholder:"Describe hallways, staircases, and main circulation routes...",rows:"3"})]}),e.jsxs("div",{className:"section-navigation",children:[e.jsx("button",{type:"button",onClick:ee,className:"btn btn-secondary",disabled:o==="floor_plans",children:" Previous"}),e.jsx("button",{type:"button",onClick:F,className:"btn btn-primary",children:"Next: Structural Elements "})]})]}),E=()=>e.jsxs("div",{className:"technical-section",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Structural System"}),h&&x.structural_elements&&e.jsx("div",{className:"quick-fill-buttons",children:x.structural_elements.map((G,Z)=>e.jsx("button",{type:"button",className:"quick-fill-btn",onClick:()=>C("structural_elements",G),children:G},Z))}),e.jsx("textarea",{value:m.structural_elements,onChange:G=>B("structural_elements",G.target.value),placeholder:"Describe structural system, materials, load-bearing elements, foundation type...",rows:"4"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Foundation Type"}),h&&x.foundation_type&&e.jsx("div",{className:"quick-fill-buttons",children:x.foundation_type.map((G,Z)=>e.jsx("button",{type:"button",className:"quick-fill-btn",onClick:()=>C("foundation_type",G),children:G},Z))}),e.jsx("input",{type:"text",value:m.foundation_type,onChange:G=>B("foundation_type",G.target.value),placeholder:"e.g., RCC Foundation, Pile Foundation, Strip Foundation..."})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Structural Materials"}),h&&x.structural_materials&&e.jsx("div",{className:"quick-fill-buttons",children:x.structural_materials.map((G,Z)=>e.jsx("button",{type:"button",className:"quick-fill-btn",onClick:()=>C("structural_materials",G),children:G},Z))}),e.jsx("textarea",{value:m.structural_materials,onChange:G=>B("structural_materials",G.target.value),placeholder:"Specify concrete grade, steel specifications, masonry details...",rows:"3"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Load Bearing Elements"}),h&&x.load_bearing_elements&&e.jsx("div",{className:"quick-fill-buttons",children:x.load_bearing_elements.map((G,Z)=>e.jsx("button",{type:"button",className:"quick-fill-btn",onClick:()=>C("load_bearing_elements",G),children:G},Z))}),e.jsx("textarea",{value:m.load_bearing_elements,onChange:G=>B("load_bearing_elements",G.target.value),placeholder:"Describe columns, beams, walls, and other load-bearing components...",rows:"3"})]}),e.jsxs("div",{className:"section-navigation",children:[e.jsx("button",{type:"button",onClick:ee,className:"btn btn-secondary",children:" Previous"}),e.jsx("button",{type:"button",onClick:F,className:"btn btn-primary",children:"Next: Elevations & Sections "})]})]}),U=()=>e.jsxs("div",{className:"technical-section",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Elevation Details"}),h&&x.elevations_sections&&e.jsx("div",{className:"quick-fill-buttons",children:x.elevations_sections.map((G,Z)=>e.jsx("button",{type:"button",className:"quick-fill-btn",onClick:()=>C("elevations_sections",G),children:G},Z))}),e.jsx("textarea",{value:m.elevations_sections,onChange:G=>B("elevations_sections",G.target.value),placeholder:"Describe building elevations, facade treatments, section details...",rows:"4"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Facade Treatment"}),h&&x.facade_treatment&&e.jsx("div",{className:"quick-fill-buttons",children:x.facade_treatment.map((G,Z)=>e.jsx("button",{type:"button",className:"quick-fill-btn",onClick:()=>C("facade_treatment",G),children:G},Z))}),e.jsx("textarea",{value:m.facade_treatment,onChange:G=>B("facade_treatment",G.target.value),placeholder:"Specify exterior finishes, cladding materials, architectural features...",rows:"3"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Section Details"}),h&&x.section_details&&e.jsx("div",{className:"quick-fill-buttons",children:x.section_details.map((G,Z)=>e.jsx("button",{type:"button",className:"quick-fill-btn",onClick:()=>C("section_details",G),children:G},Z))}),e.jsx("textarea",{value:m.section_details,onChange:G=>B("section_details",G.target.value),placeholder:"Describe cross-sections, wall thicknesses, floor-to-floor heights...",rows:"3"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Building Height"}),h&&x.building_height&&e.jsx("div",{className:"quick-fill-buttons",children:x.building_height.map((G,Z)=>e.jsx("button",{type:"button",className:"quick-fill-btn",onClick:()=>C("building_height",G),children:G},Z))}),e.jsx("input",{type:"text",value:m.building_height,onChange:G=>B("building_height",G.target.value),placeholder:"e.g., 10.5m (Ground + 2 floors)"})]}),e.jsxs("div",{className:"section-navigation",children:[e.jsx("button",{type:"button",onClick:ee,className:"btn btn-secondary",children:" Previous"}),e.jsx("button",{type:"button",onClick:F,className:"btn btn-primary",children:"Next: Construction Details "})]})]}),V=()=>e.jsxs("div",{className:"technical-section",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Construction Specifications"}),h&&x.construction_notes&&e.jsx("div",{className:"quick-fill-buttons",children:x.construction_notes.map((G,Z)=>e.jsx("button",{type:"button",className:"quick-fill-btn",onClick:()=>C("construction_notes",G),children:G},Z))}),e.jsx("textarea",{value:m.construction_notes,onChange:G=>B("construction_notes",G.target.value),placeholder:"Include material specifications, construction methods, special requirements...",rows:"4"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Material Specifications"}),h&&x.material_specifications&&e.jsx("div",{className:"quick-fill-buttons",children:x.material_specifications.map((G,Z)=>e.jsx("button",{type:"button",className:"quick-fill-btn",onClick:()=>C("material_specifications",G),children:G},Z))}),e.jsx("textarea",{value:m.material_specifications,onChange:G=>B("material_specifications",G.target.value),placeholder:"Specify brands, grades, and quality standards for materials...",rows:"3"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Construction Methods"}),h&&x.construction_methods&&e.jsx("div",{className:"quick-fill-buttons",children:x.construction_methods.map((G,Z)=>e.jsx("button",{type:"button",className:"quick-fill-btn",onClick:()=>C("construction_methods",G),children:G},Z))}),e.jsx("textarea",{value:m.construction_methods,onChange:G=>B("construction_methods",G.target.value),placeholder:"Describe construction techniques, sequencing, and methodologies...",rows:"3"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Special Requirements"}),h&&x.special_requirements&&e.jsx("div",{className:"quick-fill-buttons",children:x.special_requirements.map((G,Z)=>e.jsx("button",{type:"button",className:"quick-fill-btn",onClick:()=>C("special_requirements",G),children:G},Z))}),e.jsx("textarea",{value:m.special_requirements,onChange:G=>B("special_requirements",G.target.value),placeholder:"Any special construction requirements, permits, or considerations...",rows:"3"})]}),e.jsxs("div",{className:"section-navigation",children:[e.jsx("button",{type:"button",onClick:ee,className:"btn btn-secondary",children:" Previous"}),e.jsx("button",{type:"button",onClick:F,className:"btn btn-primary",children:"Next: MEP Systems "})]})]}),H=()=>e.jsxs("div",{className:"technical-section",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Electrical System"}),h&&x.electrical_system&&e.jsx("div",{className:"quick-fill-buttons",children:x.electrical_system.map((G,Z)=>e.jsx("button",{type:"button",className:"quick-fill-btn",onClick:()=>C("electrical_system",G),children:G},Z))}),e.jsx("textarea",{value:m.electrical_system,onChange:G=>B("electrical_system",G.target.value),placeholder:"Describe electrical layout, load calculations, panel locations...",rows:"3"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Plumbing System"}),h&&x.plumbing_system&&e.jsx("div",{className:"quick-fill-buttons",children:x.plumbing_system.map((G,Z)=>e.jsx("button",{type:"button",className:"quick-fill-btn",onClick:()=>C("plumbing_system",G),children:G},Z))}),e.jsx("textarea",{value:m.plumbing_system,onChange:G=>B("plumbing_system",G.target.value),placeholder:"Specify water supply, drainage, fixture locations...",rows:"3"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"HVAC System"}),h&&x.hvac_system&&e.jsx("div",{className:"quick-fill-buttons",children:x.hvac_system.map((G,Z)=>e.jsx("button",{type:"button",className:"quick-fill-btn",onClick:()=>C("hvac_system",G),children:G},Z))}),e.jsx("textarea",{value:m.hvac_system,onChange:G=>B("hvac_system",G.target.value),placeholder:"Describe heating, ventilation, and air conditioning systems...",rows:"3"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Fire Safety"}),h&&x.fire_safety&&e.jsx("div",{className:"quick-fill-buttons",children:x.fire_safety.map((G,Z)=>e.jsx("button",{type:"button",className:"quick-fill-btn",onClick:()=>C("fire_safety",G),children:G},Z))}),e.jsx("textarea",{value:m.fire_safety,onChange:G=>B("fire_safety",G.target.value),placeholder:"Specify fire safety measures, exits, sprinkler systems...",rows:"3"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Accessibility Features"}),h&&x.accessibility_features&&e.jsx("div",{className:"quick-fill-buttons",children:x.accessibility_features.map((G,Z)=>e.jsx("button",{type:"button",className:"quick-fill-btn",onClick:()=>C("accessibility_features",G),children:G},Z))}),e.jsx("textarea",{value:m.accessibility_features,onChange:G=>B("accessibility_features",G.target.value),placeholder:"Describe accessibility compliance, ramps, elevators...",rows:"3"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Energy Efficiency"}),h&&x.energy_efficiency&&e.jsx("div",{className:"quick-fill-buttons",children:x.energy_efficiency.map((G,Z)=>e.jsx("button",{type:"button",className:"quick-fill-btn",onClick:()=>C("energy_efficiency",G),children:G},Z))}),e.jsx("textarea",{value:m.energy_efficiency,onChange:G=>B("energy_efficiency",G.target.value),placeholder:"Specify insulation, solar panels, energy-efficient systems...",rows:"3"})]}),e.jsxs("div",{className:"section-navigation",children:[e.jsx("button",{type:"button",onClick:ee,className:"btn btn-secondary",children:" Previous"}),e.jsx("button",{type:"button",onClick:()=>{F()},className:"btn btn-primary",children:"Next: Pricing & Timeline "})]})]}),I=()=>e.jsxs("div",{className:"technical-section",children:[e.jsxs("div",{className:"price-section",children:[e.jsx("label",{children:"Estimated Total Cost"}),e.jsx("div",{className:"price-input-container",children:e.jsx("input",{type:"text",className:"price-input",value:m.estimated_cost,onChange:G=>B("estimated_cost",G.target.value),placeholder:"e.g., 25,00,000"})}),e.jsx("div",{className:"field-help",children:"Enter the total estimated cost for the project including all materials and labor"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Price to View Layout ()"}),e.jsx("input",{type:"number",value:m.view_price||0,onChange:G=>B("view_price",G.target.value),placeholder:"e.g., 100",min:"0",step:"0.01"}),e.jsx("div",{className:"field-help",style:{marginTop:"4px"},children:"Amount homeowners must pay to view this layout (Optional - set 0 for free)"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Cost Breakdown"}),h&&x.cost_breakdown&&e.jsx("div",{className:"quick-fill-buttons",children:x.cost_breakdown.map((G,Z)=>e.jsx("button",{type:"button",className:"quick-fill-btn",onClick:()=>C("cost_breakdown",G),children:G},Z))}),e.jsx("textarea",{value:m.cost_breakdown,onChange:G=>B("cost_breakdown",G.target.value),placeholder:"Provide detailed cost breakdown by category...",rows:"4"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Material Costs"}),h&&x.material_costs&&e.jsx("div",{className:"quick-fill-buttons",children:x.material_costs.map((G,Z)=>e.jsx("button",{type:"button",className:"quick-fill-btn",onClick:()=>C("material_costs",G),children:G},Z))}),e.jsx("textarea",{value:m.material_costs,onChange:G=>B("material_costs",G.target.value),placeholder:"Breakdown of material costs (concrete, steel, finishes, etc.)...",rows:"3"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Labor Costs"}),h&&x.labor_costs&&e.jsx("div",{className:"quick-fill-buttons",children:x.labor_costs.map((G,Z)=>e.jsx("button",{type:"button",className:"quick-fill-btn",onClick:()=>C("labor_costs",G),children:G},Z))}),e.jsx("textarea",{value:m.labor_costs,onChange:G=>B("labor_costs",G.target.value),placeholder:"Breakdown of labor costs (masonry, carpentry, electrical, etc.)...",rows:"3"})]}),e.jsxs("div",{className:"section-navigation",children:[e.jsx("button",{type:"button",onClick:ee,className:"btn btn-secondary",children:" Previous"}),e.jsx("button",{type:"button",onClick:K,className:"btn btn-primary",children:"Next: Files & Submit "})]})]}),M=()=>{switch(o){case"floor_plans":return q();case"structural":return E();case"elevations":return U();case"construction":return V();case"systems":return H();case"pricing":return I();default:return q()}},re=j.find(G=>G.id===o);return e.jsxs("div",{className:"technical-details-form-new",children:[e.jsxs("div",{className:"technical-header-new",children:[e.jsxs("div",{className:"header-left",children:[e.jsx("button",{className:"modal-close-new",onClick:r,children:""}),e.jsxs("div",{className:"header-info",children:[e.jsx("h2",{children:"Technical Design Details"}),e.jsxs("div",{className:"progress-indicator",children:[e.jsx("span",{className:"progress-text",children:"Step 2 of 3"}),e.jsx("div",{className:"progress-bar",children:e.jsx("div",{className:"progress-fill",style:{width:"66%"}})})]})]})]}),e.jsxs("div",{className:"header-right",children:[e.jsxs("div",{className:"template-selector",children:[e.jsx("label",{children:"Template:"}),e.jsxs("select",{value:A,onChange:G=>P(G.target.value),children:[e.jsx("option",{value:"",children:"Select a template..."}),b.map(G=>e.jsx("option",{value:G.id,children:G.name},G.id))]})]}),e.jsx("button",{type:"button",className:"quick-fill-toggle",onClick:()=>p(!h),style:{marginLeft:"12px",padding:"8px 16px",background:"rgba(255, 255, 255, 0.2)",border:"1px solid rgba(255, 255, 255, 0.3)",borderRadius:"6px",color:"white",cursor:"pointer",fontSize:"13px",fontWeight:"500"},children:h?" Quick Fill: ON":" Quick Fill: OFF"})]})]}),e.jsxs("div",{className:"technical-main-new",children:[e.jsx("div",{className:"technical-sidebar-new",children:e.jsx("div",{className:"section-nav-new",children:j.map((G,Z)=>e.jsxs("button",{className:`section-nav-item-new ${o===G.id?"active":""}`,onClick:()=>l(G.id),children:[e.jsx("div",{className:"section-number",children:Z+1}),e.jsxs("div",{className:"section-info",children:[e.jsx("span",{className:"section-icon-new",children:G.icon}),e.jsx("span",{className:"section-title-new",children:G.title})]})]},G.id))})}),e.jsxs("div",{className:"technical-content-new",children:[e.jsxs("div",{className:"content-header",children:[e.jsx("h3",{children:re?.title}),e.jsx("p",{children:re?.description})]}),e.jsx("div",{className:"content-body",children:M()})]})]})]})},c2=({isOpen:t,onClose:s,onSubmit:a,planData:r,loading:o})=>{const[l,A]=N.useState({foundation_type:"RCC",structure_type:"RCC Frame",wall_material:"Brick",roofing_type:"RCC Slab",flooring_type:"Ceramic Tiles",wall_thickness:"9",ceiling_height:"10",door_height:"7",window_height:"4",electrical_load:"5",water_connection:"Municipal",sewage_connection:"Municipal",construction_cost:"",construction_duration:"8-12",unlock_price:"8000",special_features:"",construction_notes:"",compliance_certificates:"Building Permit, NOC",exterior_finish:"Paint",interior_finish:"Paint",kitchen_type:"Modular",bathroom_fittings:"Standard",earthquake_resistance:"Zone III Compliant",fire_safety:"Standard",ventilation:"Natural + Exhaust Fans",site_area:"",built_up_area:"",carpet_area:"",setback_front:"",setback_rear:"",setback_left:"",setback_right:"",beam_size:"9x12",column_size:"9x12",slab_thickness:"5",footing_depth:"4 feet",electrical_points:"",plumbing_fixtures:"",hvac_system:"Split AC",solar_provision:"No",main_door_material:"Teak Wood",window_material:"UPVC",staircase_material:"RCC with Granite",compound_wall:"Yes",building_plan_approval:"Required",environmental_clearance:"Not Required",fire_noc:"Required",layout_image:null,elevation_images:[],section_drawings:[],renders_3d:[]}),[u,h]=N.useState(!1),[p,m]=N.useState({layout_image:null,elevation_images:[],section_drawings:[],renders_3d:[]}),v=(j,B)=>{A(L=>({...L,[j]:B}))},b=async(j,B)=>{if(!(!B||B.length===0)){h(!0);try{const L=[];for(let P of B){const F=URL.createObjectURL(P);L.push({file:P,name:P.name,size:P.size,type:P.type,preview:F,uploaded:!1})}if(j==="layout_image"){const P=L[0];A(F=>({...F,[j]:P})),m(F=>({...F,[j]:P.preview}))}else A(P=>({...P,[j]:[...P[j]||[],...L]})),m(P=>({...P,[j]:[...P[j]||[],...L.map(F=>F.preview)]}))}catch(L){console.error("Error handling file upload:",L),alert("Error uploading files. Please try again.")}finally{h(!1)}}},x=(j,B=null)=>{if(j==="layout_image")l[j]?.preview&&URL.revokeObjectURL(l[j].preview),A(L=>({...L,[j]:null})),m(L=>({...L,[j]:null}));else{const L=l[j]||[];B!==null&&L[B]?.preview&&URL.revokeObjectURL(L[B].preview),A(P=>({...P,[j]:L.filter((F,ee)=>ee!==B)})),m(P=>({...P,[j]:(P[j]||[]).filter((F,ee)=>ee!==B)}))}},C=()=>{if(!l.construction_cost){alert("Please enter estimated construction cost");return}a(l)},Q=()=>{if(r&&r.rooms){const j=r.rooms.reduce((P,F)=>{const ee=F.actual_width||F.layout_width*(r.scale_ratio||1.2),K=F.actual_height||F.layout_height*(r.scale_ratio||1.2);return P+ee*K},0),B=Math.round(j*1500),L=Math.round(j*2500);return`${B.toLocaleString()} - ${L.toLocaleString()}`}return"Calculate based on area"};return t?e.jsx("div",{className:"technical-details-modal-overlay",children:e.jsxs("div",{className:"technical-details-modal",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h2",{children:" Technical Details & Specifications"}),e.jsx("button",{className:"close-btn",onClick:s,children:""})]}),e.jsx("div",{className:"modal-content",children:e.jsxs("div",{className:"details-sections",children:[e.jsxs("div",{className:"detail-section",children:[e.jsx("h3",{children:" Site Details"}),e.jsxs("div",{className:"form-grid",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Site Area (sq ft):"}),e.jsx("input",{type:"number",placeholder:"Enter site area",value:l.site_area,onChange:j=>v("site_area",j.target.value)})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Built-up Area (sq ft):"}),e.jsx("input",{type:"number",placeholder:"Enter built-up area",value:l.built_up_area,onChange:j=>v("built_up_area",j.target.value)})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Carpet Area (sq ft):"}),e.jsx("input",{type:"number",placeholder:"Enter carpet area",value:l.carpet_area,onChange:j=>v("carpet_area",j.target.value)})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Front Setback (feet):"}),e.jsx("input",{type:"number",placeholder:"Enter front setback",value:l.setback_front,onChange:j=>v("setback_front",j.target.value)})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Rear Setback (feet):"}),e.jsx("input",{type:"number",placeholder:"Enter rear setback",value:l.setback_rear,onChange:j=>v("setback_rear",j.target.value)})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Left Setback (feet):"}),e.jsx("input",{type:"number",placeholder:"Enter left setback",value:l.setback_left,onChange:j=>v("setback_left",j.target.value)})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Right Setback (feet):"}),e.jsx("input",{type:"number",placeholder:"Enter right setback",value:l.setback_right,onChange:j=>v("setback_right",j.target.value)})]})]})]}),e.jsxs("div",{className:"detail-section",children:[e.jsx("h3",{children:" Construction Details"}),e.jsxs("div",{className:"form-grid",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Foundation Type:"}),e.jsxs("select",{value:l.foundation_type,onChange:j=>v("foundation_type",j.target.value),children:[e.jsx("option",{value:"RCC",children:"RCC Foundation"}),e.jsx("option",{value:"Stone",children:"Stone Foundation"}),e.jsx("option",{value:"Pile",children:"Pile Foundation"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Structure Type:"}),e.jsxs("select",{value:l.structure_type,onChange:j=>v("structure_type",j.target.value),children:[e.jsx("option",{value:"RCC Frame",children:"RCC Frame Structure"}),e.jsx("option",{value:"Load Bearing",children:"Load Bearing Wall"}),e.jsx("option",{value:"Steel Frame",children:"Steel Frame"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Wall Material:"}),e.jsxs("select",{value:l.wall_material,onChange:j=>v("wall_material",j.target.value),children:[e.jsx("option",{value:"Brick",children:"Red Brick"}),e.jsx("option",{value:"AAC Block",children:"AAC Block"}),e.jsx("option",{value:"Concrete Block",children:"Concrete Block"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Roofing Type:"}),e.jsxs("select",{value:l.roofing_type,onChange:j=>v("roofing_type",j.target.value),children:[e.jsx("option",{value:"RCC Slab",children:"RCC Slab"}),e.jsx("option",{value:"Tile Roof",children:"Tile Roof"}),e.jsx("option",{value:"Sheet Roof",children:"Metal Sheet"})]})]})]})]}),e.jsxs("div",{className:"detail-section",children:[e.jsx("h3",{children:" Specifications"}),e.jsxs("div",{className:"form-grid",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Wall Thickness (inches):"}),e.jsxs("select",{value:l.wall_thickness,onChange:j=>v("wall_thickness",j.target.value),children:[e.jsx("option",{value:"4.5",children:"4.5 inches"}),e.jsx("option",{value:"9",children:"9 inches"}),e.jsx("option",{value:"13.5",children:"13.5 inches"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Ceiling Height (feet):"}),e.jsxs("select",{value:l.ceiling_height,onChange:j=>v("ceiling_height",j.target.value),children:[e.jsx("option",{value:"9",children:"9 feet"}),e.jsx("option",{value:"10",children:"10 feet"}),e.jsx("option",{value:"11",children:"11 feet"}),e.jsx("option",{value:"12",children:"12 feet"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Door Height (feet):"}),e.jsxs("select",{value:l.door_height,onChange:j=>v("door_height",j.target.value),children:[e.jsx("option",{value:"6.5",children:"6.5 feet"}),e.jsx("option",{value:"7",children:"7 feet"}),e.jsx("option",{value:"7.5",children:"7.5 feet"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Window Height (feet):"}),e.jsxs("select",{value:l.window_height,onChange:j=>v("window_height",j.target.value),children:[e.jsx("option",{value:"3",children:"3 feet"}),e.jsx("option",{value:"4",children:"4 feet"}),e.jsx("option",{value:"5",children:"5 feet"})]})]})]})]}),e.jsxs("div",{className:"detail-section",children:[e.jsx("h3",{children:" Structural Details"}),e.jsxs("div",{className:"form-grid",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Beam Size:"}),e.jsxs("select",{value:l.beam_size,onChange:j=>v("beam_size",j.target.value),children:[e.jsx("option",{value:"9x12",children:'9" x 12"'}),e.jsx("option",{value:"9x15",children:'9" x 15"'}),e.jsx("option",{value:"12x15",children:'12" x 15"'}),e.jsx("option",{value:"12x18",children:'12" x 18"'})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Column Size:"}),e.jsxs("select",{value:l.column_size,onChange:j=>v("column_size",j.target.value),children:[e.jsx("option",{value:"9x12",children:'9" x 12"'}),e.jsx("option",{value:"12x12",children:'12" x 12"'}),e.jsx("option",{value:"12x15",children:'12" x 15"'}),e.jsx("option",{value:"15x15",children:'15" x 15"'})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Slab Thickness:"}),e.jsxs("select",{value:l.slab_thickness,onChange:j=>v("slab_thickness",j.target.value),children:[e.jsx("option",{value:"4",children:"4 inches"}),e.jsx("option",{value:"5",children:"5 inches"}),e.jsx("option",{value:"6",children:"6 inches"}),e.jsx("option",{value:"7",children:"7 inches"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Footing Depth:"}),e.jsxs("select",{value:l.footing_depth,onChange:j=>v("footing_depth",j.target.value),children:[e.jsx("option",{value:"3 feet",children:"3 feet"}),e.jsx("option",{value:"4 feet",children:"4 feet"}),e.jsx("option",{value:"5 feet",children:"5 feet"}),e.jsx("option",{value:"6 feet",children:"6 feet"})]})]})]})]}),e.jsxs("div",{className:"detail-section",children:[e.jsx("h3",{children:" MEP (Mechanical, Electrical, Plumbing)"}),e.jsxs("div",{className:"form-grid",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Electrical Points:"}),e.jsx("input",{type:"number",placeholder:"Total electrical points",value:l.electrical_points,onChange:j=>v("electrical_points",j.target.value)})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Plumbing Fixtures:"}),e.jsx("input",{type:"number",placeholder:"Total plumbing fixtures",value:l.plumbing_fixtures,onChange:j=>v("plumbing_fixtures",j.target.value)})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"HVAC System:"}),e.jsxs("select",{value:l.hvac_system,onChange:j=>v("hvac_system",j.target.value),children:[e.jsx("option",{value:"Split AC",children:"Split AC"}),e.jsx("option",{value:"Central AC",children:"Central AC"}),e.jsx("option",{value:"Ceiling Fans",children:"Ceiling Fans Only"}),e.jsx("option",{value:"Ducted AC",children:"Ducted AC"}),e.jsx("option",{value:"VRF System",children:"VRF System"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Solar Provision:"}),e.jsxs("select",{value:l.solar_provision,onChange:j=>v("solar_provision",j.target.value),children:[e.jsx("option",{value:"No",children:"No"}),e.jsx("option",{value:"Yes - Rooftop",children:"Yes - Rooftop Solar"}),e.jsx("option",{value:"Yes - Ground Mount",children:"Yes - Ground Mount"}),e.jsx("option",{value:"Provision Only",children:"Provision Only"})]})]})]})]}),e.jsxs("div",{className:"detail-section",children:[e.jsx("h3",{children:" Electrical & Plumbing"}),e.jsxs("div",{className:"form-grid",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Electrical Load (KW):"}),e.jsxs("select",{value:l.electrical_load,onChange:j=>v("electrical_load",j.target.value),children:[e.jsx("option",{value:"3",children:"3 KW"}),e.jsx("option",{value:"5",children:"5 KW"}),e.jsx("option",{value:"7",children:"7 KW"}),e.jsx("option",{value:"10",children:"10 KW"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Water Connection:"}),e.jsxs("select",{value:l.water_connection,onChange:j=>v("water_connection",j.target.value),children:[e.jsx("option",{value:"Municipal",children:"Municipal Supply"}),e.jsx("option",{value:"Borewell",children:"Borewell"}),e.jsx("option",{value:"Both",children:"Both"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Sewage Connection:"}),e.jsxs("select",{value:l.sewage_connection,onChange:j=>v("sewage_connection",j.target.value),children:[e.jsx("option",{value:"Municipal",children:"Municipal Drainage"}),e.jsx("option",{value:"Septic Tank",children:"Septic Tank"}),e.jsx("option",{value:"STP",children:"Sewage Treatment Plant"})]})]})]})]}),e.jsxs("div",{className:"detail-section",children:[e.jsx("h3",{children:" Cost & Timeline"}),e.jsxs("div",{className:"form-grid",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Estimated Construction Cost:"}),e.jsxs("div",{className:"cost-input-group",children:[e.jsx("input",{type:"text",placeholder:"Enter amount (e.g., 25,00,000)",value:l.construction_cost,onChange:j=>v("construction_cost",j.target.value)}),e.jsxs("small",{children:["Suggested: ",Q()]})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Construction Duration (months):"}),e.jsxs("select",{value:l.construction_duration,onChange:j=>v("construction_duration",j.target.value),children:[e.jsx("option",{value:"6-8",children:"6-8 months"}),e.jsx("option",{value:"8-12",children:"8-12 months"}),e.jsx("option",{value:"12-18",children:"12-18 months"}),e.jsx("option",{value:"18-24",children:"18-24 months"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Technical Details Unlock Price ():"}),e.jsxs("div",{className:"price-input-group",children:[e.jsx("input",{type:"number",placeholder:"8000",value:l.unlock_price||"8000",onChange:j=>v("unlock_price",j.target.value),min:"0",step:"100"}),e.jsx("small",{children:"Amount homeowner pays to unlock technical details (Default: 8000)"})]})]})]})]}),e.jsxs("div",{className:"detail-section",children:[e.jsx("h3",{children:" Enhanced Materials & Finishes"}),e.jsxs("div",{className:"form-grid",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Main Door Material:"}),e.jsxs("select",{value:l.main_door_material,onChange:j=>v("main_door_material",j.target.value),children:[e.jsx("option",{value:"Teak Wood",children:"Teak Wood"}),e.jsx("option",{value:"Engineered Wood",children:"Engineered Wood"}),e.jsx("option",{value:"Steel",children:"Steel Door"}),e.jsx("option",{value:"Fiber",children:"Fiber Door"}),e.jsx("option",{value:"Glass",children:"Glass Door"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Window Material:"}),e.jsxs("select",{value:l.window_material,onChange:j=>v("window_material",j.target.value),children:[e.jsx("option",{value:"UPVC",children:"UPVC Windows"}),e.jsx("option",{value:"Aluminum",children:"Aluminum Windows"}),e.jsx("option",{value:"Wood",children:"Wooden Windows"}),e.jsx("option",{value:"Steel",children:"Steel Windows"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Staircase Material:"}),e.jsxs("select",{value:l.staircase_material,onChange:j=>v("staircase_material",j.target.value),children:[e.jsx("option",{value:"RCC with Granite",children:"RCC with Granite"}),e.jsx("option",{value:"RCC with Marble",children:"RCC with Marble"}),e.jsx("option",{value:"Steel Structure",children:"Steel Structure"}),e.jsx("option",{value:"Wooden Staircase",children:"Wooden Staircase"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Compound Wall:"}),e.jsxs("select",{value:l.compound_wall,onChange:j=>v("compound_wall",j.target.value),children:[e.jsx("option",{value:"Yes",children:"Yes"}),e.jsx("option",{value:"No",children:"No"}),e.jsx("option",{value:"Partial",children:"Partial"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Exterior Finish:"}),e.jsxs("select",{value:l.exterior_finish,onChange:j=>v("exterior_finish",j.target.value),children:[e.jsx("option",{value:"Paint",children:"Paint"}),e.jsx("option",{value:"Texture",children:"Texture Paint"}),e.jsx("option",{value:"Stone Cladding",children:"Stone Cladding"}),e.jsx("option",{value:"Tiles",children:"Exterior Tiles"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Kitchen Type:"}),e.jsxs("select",{value:l.kitchen_type,onChange:j=>v("kitchen_type",j.target.value),children:[e.jsx("option",{value:"Modular",children:"Modular Kitchen"}),e.jsx("option",{value:"Semi-Modular",children:"Semi-Modular"}),e.jsx("option",{value:"Traditional",children:"Traditional"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Bathroom Fittings:"}),e.jsxs("select",{value:l.bathroom_fittings,onChange:j=>v("bathroom_fittings",j.target.value),children:[e.jsx("option",{value:"Standard",children:"Standard"}),e.jsx("option",{value:"Premium",children:"Premium"}),e.jsx("option",{value:"Luxury",children:"Luxury"})]})]})]})]}),e.jsxs("div",{className:"detail-section",children:[e.jsx("h3",{children:" Approvals & Compliance"}),e.jsxs("div",{className:"form-grid",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Building Plan Approval:"}),e.jsxs("select",{value:l.building_plan_approval,onChange:j=>v("building_plan_approval",j.target.value),children:[e.jsx("option",{value:"Required",children:"Required"}),e.jsx("option",{value:"Obtained",children:"Already Obtained"}),e.jsx("option",{value:"Not Required",children:"Not Required"}),e.jsx("option",{value:"In Process",children:"In Process"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Environmental Clearance:"}),e.jsxs("select",{value:l.environmental_clearance,onChange:j=>v("environmental_clearance",j.target.value),children:[e.jsx("option",{value:"Not Required",children:"Not Required"}),e.jsx("option",{value:"Required",children:"Required"}),e.jsx("option",{value:"Obtained",children:"Already Obtained"}),e.jsx("option",{value:"In Process",children:"In Process"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Fire NOC:"}),e.jsxs("select",{value:l.fire_noc,onChange:j=>v("fire_noc",j.target.value),children:[e.jsx("option",{value:"Required",children:"Required"}),e.jsx("option",{value:"Not Required",children:"Not Required"}),e.jsx("option",{value:"Obtained",children:"Already Obtained"}),e.jsx("option",{value:"In Process",children:"In Process"})]})]})]})]}),e.jsxs("div",{className:"detail-section",children:[e.jsx("h3",{children:" Design Files"}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Layout Image for Homeowner:"}),e.jsxs("div",{className:"file-upload-area",children:[e.jsx("input",{type:"file",id:"layout-image-upload",accept:"image/*",onChange:j=>b("layout_image",j.target.files),style:{display:"none"}}),e.jsx("label",{htmlFor:"layout-image-upload",className:"file-upload-button",children:" Choose Layout Image"}),e.jsx("small",{className:"file-help-text",children:"Upload the main layout image that will be shown to the homeowner"}),l.layout_image&&e.jsx("div",{className:"file-preview-item",children:e.jsxs("div",{className:"file-preview-content",children:[e.jsx("img",{src:p.layout_image,alt:"Layout Preview",className:"file-preview-image"}),e.jsxs("div",{className:"file-info",children:[e.jsx("span",{className:"file-name",children:l.layout_image.name}),e.jsxs("span",{className:"file-size",children:[(l.layout_image.size/1024/1024).toFixed(2)," MB"]})]}),e.jsx("button",{type:"button",className:"file-remove-btn",onClick:()=>x("layout_image"),children:""})]})})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Elevation Images (Optional):"}),e.jsxs("div",{className:"file-upload-area",children:[e.jsx("input",{type:"file",id:"elevation-images-upload",accept:"image/*",multiple:!0,onChange:j=>b("elevation_images",j.target.files),style:{display:"none"}}),e.jsx("label",{htmlFor:"elevation-images-upload",className:"file-upload-button",children:" Choose Elevation Images"}),e.jsx("small",{className:"file-help-text",children:"Upload front, side, and rear elevation views (multiple files allowed)"}),l.elevation_images&&l.elevation_images.length>0&&e.jsx("div",{className:"file-preview-grid",children:l.elevation_images.map((j,B)=>e.jsx("div",{className:"file-preview-item",children:e.jsxs("div",{className:"file-preview-content",children:[e.jsx("img",{src:j.preview,alt:`Elevation ${B+1}`,className:"file-preview-image"}),e.jsxs("div",{className:"file-info",children:[e.jsx("span",{className:"file-name",children:j.name}),e.jsxs("span",{className:"file-size",children:[(j.size/1024/1024).toFixed(2)," MB"]})]}),e.jsx("button",{type:"button",className:"file-remove-btn",onClick:()=>x("elevation_images",B),children:""})]})},B))})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Section Drawings (Optional):"}),e.jsxs("div",{className:"file-upload-area",children:[e.jsx("input",{type:"file",id:"section-drawings-upload",accept:"image/*,.pdf",multiple:!0,onChange:j=>b("section_drawings",j.target.files),style:{display:"none"}}),e.jsx("label",{htmlFor:"section-drawings-upload",className:"file-upload-button",children:" Choose Section Drawings"}),e.jsx("small",{className:"file-help-text",children:"Upload cross-section drawings and detailed views (Images or PDF)"}),l.section_drawings&&l.section_drawings.length>0&&e.jsx("div",{className:"file-preview-list",children:l.section_drawings.map((j,B)=>e.jsx("div",{className:"file-preview-item",children:e.jsxs("div",{className:"file-preview-content",children:[e.jsx("div",{className:"file-icon",children:j.type.includes("image")?"":""}),e.jsxs("div",{className:"file-info",children:[e.jsx("span",{className:"file-name",children:j.name}),e.jsxs("span",{className:"file-size",children:[(j.size/1024/1024).toFixed(2)," MB"]})]}),e.jsx("button",{type:"button",className:"file-remove-btn",onClick:()=>x("section_drawings",B),children:""})]})},B))})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"3D Renders (Optional):"}),e.jsxs("div",{className:"file-upload-area",children:[e.jsx("input",{type:"file",id:"3d-renders-upload",accept:"image/*",multiple:!0,onChange:j=>b("renders_3d",j.target.files),style:{display:"none"}}),e.jsx("label",{htmlFor:"3d-renders-upload",className:"file-upload-button",children:" Choose 3D Renders"}),e.jsx("small",{className:"file-help-text",children:"Upload 3D rendered images of the design"}),l.renders_3d&&l.renders_3d.length>0&&e.jsx("div",{className:"file-preview-grid",children:l.renders_3d.map((j,B)=>e.jsx("div",{className:"file-preview-item",children:e.jsxs("div",{className:"file-preview-content",children:[e.jsx("img",{src:j.preview,alt:`3D Render ${B+1}`,className:"file-preview-image"}),e.jsxs("div",{className:"file-info",children:[e.jsx("span",{className:"file-name",children:j.name}),e.jsxs("span",{className:"file-size",children:[(j.size/1024/1024).toFixed(2)," MB"]})]}),e.jsx("button",{type:"button",className:"file-remove-btn",onClick:()=>x("renders_3d",B),children:""})]})},B))})]})]}),u&&e.jsx("div",{className:"upload-status",children:e.jsxs("div",{className:"upload-progress",children:[e.jsx("div",{className:"upload-spinner"}),e.jsx("span",{children:"Uploading files..."})]})})]}),e.jsxs("div",{className:"detail-section",children:[e.jsx("h3",{children:" Additional Details"}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Special Features:"}),e.jsx("textarea",{placeholder:"List any special features, smart home integration, solar panels, etc.",value:l.special_features,onChange:j=>v("special_features",j.target.value),rows:"3"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Construction Notes:"}),e.jsx("textarea",{placeholder:"Any specific construction notes or requirements",value:l.construction_notes,onChange:j=>v("construction_notes",j.target.value),rows:"3"})]})]})]})}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{className:"cancel-btn",onClick:s,disabled:o,children:"Cancel"}),e.jsx("button",{className:"submit-btn",onClick:C,disabled:o,children:o?"Submitting...":"Submit to Homeowner"})]})]})}):null},Eb=({content:t,children:s,position:a="top"})=>{const[r,o]=N.useState(!1),l={top:"info-popup-top",bottom:"info-popup-bottom",left:"info-popup-left",right:"info-popup-right"};return e.jsxs("div",{className:"info-popup-container",style:{position:"relative",display:"inline-block"},onMouseEnter:()=>o(!0),onMouseLeave:()=>o(!1),children:[s,r&&e.jsxs("div",{className:`info-popup ${l[a]}`,style:{position:"absolute",zIndex:1e3,backgroundColor:"#1f2937",color:"white",padding:"12px 16px",borderRadius:"8px",fontSize:"14px",lineHeight:"1.4",maxWidth:"300px",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)",...a==="top"&&{bottom:"100%",left:"50%",transform:"translateX(-50%)",marginBottom:"8px"},...a==="bottom"&&{top:"100%",left:"50%",transform:"translateX(-50%)",marginTop:"8px"},...a==="left"&&{right:"100%",top:"50%",transform:"translateY(-50%)",marginRight:"8px"},...a==="right"&&{left:"100%",top:"50%",transform:"translateY(-50%)",marginLeft:"8px"}},children:[t,e.jsx("div",{style:{position:"absolute",width:0,height:0,...a==="top"&&{top:"100%",left:"50%",transform:"translateX(-50%)",borderLeft:"6px solid transparent",borderRight:"6px solid transparent",borderTop:"6px solid #1f2937"},...a==="bottom"&&{bottom:"100%",left:"50%",transform:"translateX(-50%)",borderLeft:"6px solid transparent",borderRight:"6px solid transparent",borderBottom:"6px solid #1f2937"},...a==="left"&&{left:"100%",top:"50%",transform:"translateY(-50%)",borderTop:"6px solid transparent",borderBottom:"6px solid transparent",borderLeft:"6px solid #1f2937"},...a==="right"&&{right:"100%",top:"50%",transform:"translateY(-50%)",borderTop:"6px solid transparent",borderBottom:"6px solid transparent",borderRight:"6px solid #1f2937"}}})]})]})},A2=({notifications:t=[],onRemove:s})=>{const a=Array.isArray(t)?t:[];return e.jsx("div",{className:"notification-container",children:a.map(r=>e.jsxs("div",{className:`notification-toast ${r.type}`,onClick:()=>s(r.id),children:[e.jsxs("div",{className:"notification-icon",children:[r.type==="success"&&"",r.type==="error"&&"",r.type==="warning"&&"",r.type==="info"&&""]}),e.jsxs("div",{className:"notification-content",children:[e.jsx("div",{className:"notification-title",children:r.title}),r.message&&e.jsx("div",{className:"notification-message",children:r.message})]}),e.jsx("div",{className:"notification-close",children:""})]},r.id))})},g6=({isOpen:t,onClose:s,onComplete:a})=>{const[r,o]=N.useState(0),[l,A]=N.useState(!1),u=[{id:"welcome",title:"Welcome to House Plan Designer",content:"This professional tool helps architects create detailed house plans with precise measurements and room layouts. Let's take a quick tour to get you started.",target:null,position:"center"},{id:"header",title:"Control Panel",content:"The header contains all essential controls: Undo/Redo for changes, Delete for removing rooms, Save for local storage, and Submit to send plans to homeowners.",target:".drawer-header",position:"bottom"},{id:"plan-details",title:"Plan Information",content:"Start by entering your plan name, plot dimensions, and any notes. This information will be included in the final plan documentation.",target:".plan-details-section",position:"right"},{id:"statistics",title:"Real-time Statistics",content:"Monitor your plan's key metrics: total area, room count, and plot coverage percentage. These update automatically as you design.",target:".plan-stats",position:"right"},{id:"measurements",title:"Measurement System",content:"Choose between Layout (visual design) and Construction (actual building) dimensions. The scale ratio converts between them for accurate planning.",target:".measurement-controls",position:"right"},{id:"room-templates",title:"Room Templates",content:"Click any room template to add it to your plan. Each template comes with standard dimensions and can be customized after placement.",target:".room-templates",position:"right"},{id:"canvas",title:"Design Canvas",content:"This is your main workspace. Click rooms to select them, drag to move, and use the blue handles to resize. The grid helps with precise alignment.",target:".canvas-container",position:"left"},{id:"room-properties",title:"Room Customization",content:"When a room is selected, customize its dimensions, materials, and construction specifications in this panel.",target:".room-properties",position:"right",condition:()=>document.querySelector(".room-properties")},{id:"keyboard-shortcuts",title:"Keyboard Shortcuts",content:"Use Ctrl+Z to undo, Ctrl+Y to redo, and Delete key to remove selected rooms. These shortcuts speed up your workflow significantly.",target:null,position:"center"},{id:"completion",title:"You're Ready!",content:"You now know the basics of the House Plan Designer. Start by adding rooms, customize them, and save or submit your plans when ready.",target:null,position:"center"}];N.useEffect(()=>{t&&(A(!0),o(0))},[t]);const h=()=>{r<u.length-1?o(r+1):v()},p=()=>{r>0&&o(r-1)},m=()=>{v()},v=()=>{A(!1),setTimeout(()=>{a(),s()},300)},b=()=>{const L=u[r];return L.condition&&!L.condition()&&r<u.length-1?(o(r+1),null):L};if(!t||!l)return null;const x=b();if(!x)return null;const C=()=>{if(!x.target)return{position:"center"};const L=document.querySelector(x.target);if(!L)return{position:"center"};const P=L.getBoundingClientRect(),F=x.position||"bottom",ee=window.innerHeight,K=window.innerWidth;return(P.bottom>ee||P.top<0)&&(L.scrollIntoView({behavior:"smooth",block:"center",inline:"center"}),setTimeout(()=>{const q=L.getBoundingClientRect();j(q,F)},300)),Q(P,F,ee,K)},Q=(L,P,F,ee)=>{let U,V,H;switch(P){case"top":U=Math.max(20,L.top-200-20),V=Math.min(ee-400-20,Math.max(20,L.left+L.width/2-400/2)),H="translate(0, 0)";break;case"bottom":U=Math.min(F-200-20,L.bottom+20),V=Math.min(ee-400-20,Math.max(20,L.left+L.width/2-400/2)),H="translate(0, 0)";break;case"left":U=Math.min(F-200-20,Math.max(20,L.top+L.height/2-200/2)),V=Math.max(20,L.left-400-20),H="translate(0, 0)";break;case"right":U=Math.min(F-200-20,Math.max(20,L.top+L.height/2-200/2)),V=Math.min(ee-400-20,L.right+20),H="translate(0, 0)";break;default:return{position:"center"}}return{top:U,left:V,transform:H}},j=(L,P)=>{const F=document.querySelector(".tour-tooltip");if(F&&!F.classList.contains("tour-tooltip-center")){const ee=Q(L,P,window.innerHeight,window.innerWidth);Object.assign(F.style,ee)}},B=x.position==="center"?{}:C();return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"tour-overlay",onClick:m}),x.target&&e.jsx("div",{className:"tour-highlight","data-target":x.target}),e.jsxs("div",{className:`tour-tooltip ${x.position==="center"?"tour-tooltip-center":""}`,style:B,children:[e.jsxs("div",{className:"tour-tooltip-header",children:[e.jsx("h3",{children:x.title}),e.jsxs("div",{className:"tour-step-indicator",children:[r+1," of ",u.length]})]}),e.jsx("div",{className:"tour-tooltip-content",children:e.jsx("p",{children:x.content})}),e.jsxs("div",{className:"tour-tooltip-actions",children:[e.jsx("button",{onClick:m,className:"tour-btn tour-btn-skip",children:"Skip Tour"}),e.jsxs("div",{className:"tour-navigation",children:[r>0&&e.jsx("button",{onClick:p,className:"tour-btn tour-btn-prev",children:"Previous"}),e.jsx("button",{onClick:h,className:"tour-btn tour-btn-next",children:r===u.length-1?"Finish":"Next"})]})]}),e.jsx("div",{className:"tour-progress",children:e.jsx("div",{className:"tour-progress-bar",style:{width:`${(r+1)/u.length*100}%`}})})]})]})},x6=({isOpen:t,onClose:s})=>{const[a,r]=N.useState("getting-started"),[o,l]=N.useState(""),[A,u]=N.useState({}),h=v=>{u(b=>({...b,[v]:!b[v]}))},p={"getting-started":{title:"Getting Started",icon:"",content:e.jsxs("div",{className:"help-content",children:[e.jsxs("div",{className:"help-hero",children:[e.jsx("h3",{children:"Welcome to House Plan Designer"}),e.jsx("p",{children:"Create professional architectural plans with precision and efficiency."})]}),e.jsxs("div",{className:"quick-start-cards",children:[e.jsxs("div",{className:"quick-start-card",children:[e.jsx("div",{className:"card-icon",children:""}),e.jsx("h4",{children:"1. Plan Details"}),e.jsx("p",{children:"Enter project name and plot dimensions"})]}),e.jsxs("div",{className:"quick-start-card",children:[e.jsx("div",{className:"card-icon",children:""}),e.jsx("h4",{children:"2. Add Rooms"}),e.jsx("p",{children:"Click templates to add rooms to canvas"})]}),e.jsxs("div",{className:"quick-start-card",children:[e.jsx("div",{className:"card-icon",children:""}),e.jsx("h4",{children:"3. Customize"}),e.jsx("p",{children:"Adjust dimensions and materials"})]}),e.jsxs("div",{className:"quick-start-card",children:[e.jsx("div",{className:"card-icon",children:""}),e.jsx("h4",{children:"4. Save & Submit"}),e.jsx("p",{children:"Save locally or submit to homeowner"})]})]}),e.jsxs("div",{className:"interactive-demo",children:[e.jsx("h4",{children:"Try It Now"}),e.jsxs("div",{className:"demo-buttons",children:[e.jsx("button",{className:"demo-btn",onClick:()=>r("interface"),children:"Explore Interface "}),e.jsx("button",{className:"demo-btn secondary",onClick:()=>r("measurements"),children:"Learn Measurements "})]})]})]})},interface:{title:"Interface Guide",icon:"",content:e.jsx("div",{className:"help-content",children:e.jsxs("div",{className:"interface-overview",children:[e.jsx("h3",{children:"Interface Overview"}),e.jsxs("div",{className:"interface-section",children:[e.jsxs("div",{className:"collapsible-header",onClick:()=>h("header-controls"),children:[e.jsx("span",{className:"section-icon",children:""}),e.jsx("h4",{children:"Header Controls"}),e.jsx("span",{className:`expand-icon ${A["header-controls"]?"expanded":""}`,children:""})]}),A["header-controls"]&&e.jsx("div",{className:"collapsible-content",children:e.jsxs("div",{className:"control-grid",children:[e.jsxs("div",{className:"control-item",children:[e.jsx("span",{className:"control-icon",children:""}),e.jsxs("div",{children:[e.jsx("strong",{children:"Tour"}),e.jsx("p",{children:"Launch guided walkthrough"})]})]}),e.jsxs("div",{className:"control-item",children:[e.jsx("span",{className:"control-icon",children:""}),e.jsxs("div",{children:[e.jsx("strong",{children:"Help"}),e.jsx("p",{children:"Open this user manual"})]})]}),e.jsxs("div",{className:"control-item",children:[e.jsx("span",{className:"control-icon",children:""}),e.jsxs("div",{children:[e.jsx("strong",{children:"Undo/Redo"}),e.jsx("p",{children:"Navigate design history"})]})]}),e.jsxs("div",{className:"control-item",children:[e.jsx("span",{className:"control-icon",children:""}),e.jsxs("div",{children:[e.jsx("strong",{children:"Delete"}),e.jsx("p",{children:"Remove selected rooms"})]})]})]})})]}),e.jsxs("div",{className:"interface-section",children:[e.jsxs("div",{className:"collapsible-header",onClick:()=>h("sidebar-panels"),children:[e.jsx("span",{className:"section-icon",children:""}),e.jsx("h4",{children:"Sidebar Panels"}),e.jsx("span",{className:`expand-icon ${A["sidebar-panels"]?"expanded":""}`,children:""})]}),A["sidebar-panels"]&&e.jsx("div",{className:"collapsible-content",children:e.jsxs("div",{className:"panel-list",children:[e.jsxs("div",{className:"panel-item",children:[e.jsx("strong",{children:"Plan Details"})," - Project information and dimensions"]}),e.jsxs("div",{className:"panel-item",children:[e.jsx("strong",{children:"Statistics"})," - Real-time metrics and coverage"]}),e.jsxs("div",{className:"panel-item",children:[e.jsx("strong",{children:"Measurements"})," - Dimension controls and scale"]}),e.jsxs("div",{className:"panel-item",children:[e.jsx("strong",{children:"Room Templates"})," - Pre-configured room types"]}),e.jsxs("div",{className:"panel-item",children:[e.jsx("strong",{children:"Room Properties"})," - Detailed customization"]})]})})]})]})})},measurements:{title:"Measurement System",icon:"",content:e.jsxs("div",{className:"help-content",children:[e.jsx("h3",{children:"Understanding Measurements"}),e.jsxs("div",{className:"measurement-comparison",children:[e.jsxs("div",{className:"measurement-card layout",children:[e.jsxs("div",{className:"card-header",children:[e.jsx("span",{className:"measurement-icon",children:""}),e.jsx("h4",{children:"Layout Dimensions"})]}),e.jsxs("div",{className:"card-content",children:[e.jsx("p",{children:"Visual representation for design convenience"}),e.jsxs("ul",{children:[e.jsx("li",{children:"Optimized for screen display"}),e.jsx("li",{children:"Easy to work with during design"}),e.jsx("li",{children:"Automatically converted"})]})]})]}),e.jsxs("div",{className:"measurement-card construction",children:[e.jsxs("div",{className:"card-header",children:[e.jsx("span",{className:"measurement-icon",children:""}),e.jsx("h4",{children:"Construction Dimensions"})]}),e.jsxs("div",{className:"card-content",children:[e.jsx("p",{children:"Actual building measurements for contractors"}),e.jsxs("ul",{children:[e.jsx("li",{children:"Real-world accurate"}),e.jsx("li",{children:"Used for material calculations"}),e.jsx("li",{children:"Includes construction tolerances"})]})]})]})]}),e.jsxs("div",{className:"scale-calculator",children:[e.jsx("h4",{children:"Scale Ratio Calculator"}),e.jsx("div",{className:"calculator-content",children:e.jsxs("div",{className:"ratio-examples",children:[e.jsxs("div",{className:"ratio-item",children:[e.jsx("span",{className:"ratio-value",children:"1.0"}),e.jsx("span",{className:"ratio-desc",children:"Same size (Layout = Construction)"})]}),e.jsxs("div",{className:"ratio-item active",children:[e.jsx("span",{className:"ratio-value",children:"1.2"}),e.jsx("span",{className:"ratio-desc",children:"20% larger construction (Default)"})]}),e.jsxs("div",{className:"ratio-item",children:[e.jsx("span",{className:"ratio-value",children:"1.5"}),e.jsx("span",{className:"ratio-desc",children:"50% larger construction"})]})]})})]})]})},shortcuts:{title:"Keyboard Shortcuts",icon:"",content:e.jsxs("div",{className:"help-content",children:[e.jsx("h3",{children:"Keyboard Shortcuts"}),e.jsxs("div",{className:"shortcuts-categories",children:[e.jsxs("div",{className:"shortcut-category",children:[e.jsx("h4",{children:" Design Actions"}),e.jsxs("div",{className:"shortcut-list",children:[e.jsxs("div",{className:"shortcut-item",children:[e.jsxs("div",{className:"shortcut-keys",children:[e.jsx("kbd",{children:"Ctrl"})," + ",e.jsx("kbd",{children:"Z"})]}),e.jsx("span",{className:"shortcut-desc",children:"Undo last action"})]}),e.jsxs("div",{className:"shortcut-item",children:[e.jsxs("div",{className:"shortcut-keys",children:[e.jsx("kbd",{children:"Ctrl"})," + ",e.jsx("kbd",{children:"Y"})]}),e.jsx("span",{className:"shortcut-desc",children:"Redo last undone action"})]}),e.jsxs("div",{className:"shortcut-item",children:[e.jsx("div",{className:"shortcut-keys",children:e.jsx("kbd",{children:"Delete"})}),e.jsx("span",{className:"shortcut-desc",children:"Delete selected room"})]}),e.jsxs("div",{className:"shortcut-item",children:[e.jsx("div",{className:"shortcut-keys",children:e.jsx("kbd",{children:"Esc"})}),e.jsx("span",{className:"shortcut-desc",children:"Deselect all rooms"})]})]})]}),e.jsxs("div",{className:"shortcut-category",children:[e.jsx("h4",{children:" File Operations"}),e.jsxs("div",{className:"shortcut-list",children:[e.jsxs("div",{className:"shortcut-item",children:[e.jsxs("div",{className:"shortcut-keys",children:[e.jsx("kbd",{children:"Ctrl"})," + ",e.jsx("kbd",{children:"S"})]}),e.jsx("span",{className:"shortcut-desc",children:"Save plan"})]}),e.jsxs("div",{className:"shortcut-item",children:[e.jsx("div",{className:"shortcut-keys",children:e.jsx("kbd",{children:"F1"})}),e.jsx("span",{className:"shortcut-desc",children:"Open help"})]})]})]})]})]})},tips:{title:"Pro Tips",icon:"",content:e.jsxs("div",{className:"help-content",children:[e.jsx("h3",{children:"Professional Tips"}),e.jsxs("div",{className:"tips-grid",children:[e.jsxs("div",{className:"tip-card",children:[e.jsx("div",{className:"tip-icon",children:""}),e.jsx("h4",{children:"Speed Up Your Workflow"}),e.jsx("p",{children:"Use keyboard shortcuts and save frequently. The undo/redo system keeps 50 states in memory."})]}),e.jsxs("div",{className:"tip-card",children:[e.jsx("div",{className:"tip-icon",children:""}),e.jsx("h4",{children:"Monitor Statistics"}),e.jsx("p",{children:"Keep an eye on the real-time statistics panel to ensure your design meets requirements."})]}),e.jsxs("div",{className:"tip-card",children:[e.jsx("div",{className:"tip-icon",children:""}),e.jsx("h4",{children:"Precision Placement"}),e.jsx("p",{children:"Use the grid system for precise alignment. Rooms automatically snap to grid lines."})]}),e.jsxs("div",{className:"tip-card",children:[e.jsx("div",{className:"tip-icon",children:""}),e.jsx("h4",{children:"Iterative Design"}),e.jsx("p",{children:"Don't be afraid to experiment. The undo system lets you try different approaches safely."})]})]}),e.jsxs("div",{className:"best-practices",children:[e.jsx("h4",{children:"Best Practices Checklist"}),e.jsxs("div",{className:"checklist",children:[e.jsxs("label",{className:"checklist-item",children:[e.jsx("input",{type:"checkbox"}),e.jsx("span",{children:"Start with major rooms (living, dining, bedrooms)"})]}),e.jsxs("label",{className:"checklist-item",children:[e.jsx("input",{type:"checkbox"}),e.jsx("span",{children:"Verify construction dimensions before finalizing"})]}),e.jsxs("label",{className:"checklist-item",children:[e.jsx("input",{type:"checkbox"}),e.jsx("span",{children:"Add detailed notes for special requirements"})]}),e.jsxs("label",{className:"checklist-item",children:[e.jsx("input",{type:"checkbox"}),e.jsx("span",{children:"Save regularly and before major changes"})]}),e.jsxs("label",{className:"checklist-item",children:[e.jsx("input",{type:"checkbox"}),e.jsx("span",{children:"Review total area and coverage percentages"})]})]})]})]})}},m=Object.entries(p).filter(([v,b])=>b.title.toLowerCase().includes(o.toLowerCase())||v.includes(o.toLowerCase()));return t?e.jsx("div",{className:"help-modal-overlay",onClick:s,children:e.jsxs("div",{className:"help-modal",onClick:v=>v.stopPropagation(),children:[e.jsxs("div",{className:"help-header",children:[e.jsxs("div",{className:"help-title-section",children:[e.jsx("h2",{children:"House Plan Designer Guide"}),e.jsx("div",{className:"help-search",children:e.jsx("input",{type:"text",placeholder:"Search help topics...",value:o,onChange:v=>l(v.target.value),className:"help-search-input"})})]}),e.jsx("button",{className:"help-close-btn",onClick:s,children:""})]}),e.jsxs("div",{className:"help-body",children:[e.jsx("div",{className:"help-sidebar",children:m.map(([v,b])=>e.jsxs("button",{className:`help-nav-item ${a===v?"active":""}`,onClick:()=>r(v),children:[e.jsx("span",{className:"help-nav-icon",children:b.icon}),e.jsx("span",{className:"help-nav-title",children:b.title})]},v))}),e.jsx("div",{className:"help-content-area",children:p[a]?.content})]})]})}):null},d2=()=>{const[t,s]=N.useState([]),a=N.useCallback(p=>{const m=Date.now()+Math.random(),v={id:m,type:"info",title:"",message:"",duration:5e3,...p};return s(b=>[...b,v]),v.duration>0&&setTimeout(()=>{r(m)},v.duration),m},[]),r=N.useCallback(p=>{s(m=>m.filter(v=>v.id!==p))},[]),o=N.useCallback(()=>{s([])},[]),l=N.useCallback((p,m,v=4e3)=>a({type:"success",title:p,message:m,duration:v}),[a]),A=N.useCallback((p,m,v=6e3)=>a({type:"error",title:p,message:m,duration:v}),[a]),u=N.useCallback((p,m,v=5e3)=>a({type:"warning",title:p,message:m,duration:v}),[a]),h=N.useCallback((p,m,v=4e3)=>a({type:"info",title:p,message:m,duration:v}),[a]);return{notifications:t,addNotification:a,removeNotification:r,clearAllNotifications:o,showSuccess:l,showError:A,showWarning:u,showInfo:h}},y6=({layoutRequestId:t=null,requestInfo:s=null,existingPlan:a=null,onSave:r,onCancel:o})=>{const l=N.useRef(null),[A,u]=N.useState(null),[h,p]=N.useState("select"),[m,v]=N.useState(null),[b,x]=N.useState([]),[C,Q]=N.useState(!1),[j,B]=N.useState(!1),[L,P]=N.useState(!1),[F,ee]=N.useState({x:0,y:0}),[K,q]=N.useState(null),[E,U]=N.useState(!0),[V,H]=N.useState("both"),[I,M]=N.useState([]),[re,G]=N.useState(-1),[Z,fe]=N.useState(!1),{notifications:Ae,removeNotification:Ce,showSuccess:te,showError:he,showWarning:k,showInfo:T}=d2(),[z,le]=N.useState(null),[X,W]=N.useState(null),[de,me]=N.useState(!1),[Be,Qe]=N.useState(!1),[ut,mt]=N.useState(!1),[Ve,je]=N.useState(!1),[Ft,Rt]=N.useState(!0),[at,Xe]=N.useState(null),[pt,xe]=N.useState(null),[et,Oe]=N.useState(!1),[Bt,xt]=N.useState(!1),[dt,Ut]=N.useState(!1),[wt,bt]=N.useState(1),[Ht,_t]=N.useState(1),[Gt,$t]=N.useState({1:"Ground Floor"}),[J,tt]=N.useState(()=>{if(a){let ae=a.plan_data;if(typeof ae=="string")try{ae=JSON.parse(ae)}catch(ge){console.error("Error parsing existing plan data:",ge),ae={rooms:[],scale_ratio:1.2}}return{plan_name:a.plan_name||"",plot_width:a.plot_width||100,plot_height:a.plot_height||100,rooms:ae?.rooms||[],notes:a.notes||"",scale_ratio:ae?.scale_ratio||1.2}}return{plan_name:"",plot_width:100,plot_height:100,rooms:[],notes:"",scale_ratio:1.2}}),Qt=20,Et=20,Jt=8;N.useEffect(()=>{Vt(),(t||s)&&xs(),localStorage.getItem("housePlanTourCompleted")||(je(!0),setTimeout(()=>Qe(!0),1e3))},[t,s]),N.useEffect(()=>{const ae=setTimeout(()=>{os()},100);return()=>clearTimeout(ae)},[]),N.useEffect(()=>{const ae=ge=>{if(de)return ge.preventDefault(),ge.returnValue="You have unsaved changes. Are you sure you want to leave?","You have unsaved changes. Are you sure you want to leave?"};return window.addEventListener("beforeunload",ae),()=>window.removeEventListener("beforeunload",ae)},[de]),N.useEffect(()=>{if(a){console.log("Loading existing plan:",a);let ae=a.plan_data;if(typeof ae=="string")try{ae=JSON.parse(ae)}catch(De){console.error("Error parsing existing plan data:",De),ae={rooms:[],scale_ratio:1.2}}const ge={plan_name:a.plan_name||"",plot_width:a.plot_width||100,plot_height:a.plot_height||100,rooms:ae?.rooms||[],notes:a.notes||"",scale_ratio:ae?.scale_ratio||1.2};ae?.floors?(_t(ae.floors.total_floors||1),bt(ae.floors.current_floor||1),$t(ae.floors.floor_names||{1:"Ground Floor"})):(_t(1),bt(1),$t({1:"Ground Floor"})),console.log("Setting plan data:",ge),tt(ge),M([]),G(-1),me(!1),W(a.updated_at?new Date(a.updated_at):null),setTimeout(()=>{os()},200)}},[a?.id,a?.updated_at]);const os=N.useCallback(()=>{if(Z)return;const ae={rooms:JSON.parse(JSON.stringify(J.rooms)),plot_width:J.plot_width,plot_height:J.plot_height,scale_ratio:J.scale_ratio,timestamp:Date.now()};M(ge=>{const De=ge.slice(0,re+1);return De.push(ae),De.length>50&&De.shift(),De}),G(ge=>Math.min(ge+1,49))},[J.rooms,J.plot_width,J.plot_height,J.scale_ratio,re,Z]),_e=N.useCallback(()=>{if(re>0){fe(!0);const ae=I[re-1];tt(ge=>({...ge,rooms:JSON.parse(JSON.stringify(ae.rooms)),plot_width:ae.plot_width,plot_height:ae.plot_height,scale_ratio:ae.scale_ratio})),G(ge=>ge-1),v(null),setTimeout(()=>fe(!1),100),T("Action Undone",`Reverted to previous state (${re}/${I.length})`)}},[I,re,T]),St=N.useCallback(()=>{if(re<I.length-1){fe(!0);const ae=I[re+1];tt(ge=>({...ge,rooms:JSON.parse(JSON.stringify(ae.rooms)),plot_width:ae.plot_width,plot_height:ae.plot_height,scale_ratio:ae.scale_ratio})),G(ge=>ge+1),v(null),setTimeout(()=>fe(!1),100),T("Action Redone",`Restored to next state (${re+2}/${I.length})`)}},[I,re,T]);N.useEffect(()=>{const ae=ge=>{(ge.ctrlKey||ge.metaKey)&&(ge.key==="z"&&!ge.shiftKey?(ge.preventDefault(),_e()):(ge.key==="z"&&ge.shiftKey||ge.key==="y")&&(ge.preventDefault(),St())),ge.key==="Delete"&&m!==null&&(ge.preventDefault(),pa())};return document.addEventListener("keydown",ae),()=>document.removeEventListener("keydown",ae)},[_e,St,m]),N.useEffect(()=>{if(!Z&&J.rooms.length>=0){const ae=setTimeout(()=>{os()},500);return()=>clearTimeout(ae)}},[J.rooms,os,Z]),N.useEffect(()=>{if(J.plan_name&&J.rooms.length>0&&!Z){me(!0),z&&clearTimeout(z);const ae=setTimeout(()=>{In()},3e4);le(ae)}return()=>{z&&clearTimeout(z)}},[J,Z]);const $e=()=>{A.strokeStyle="#e8e8e8",A.lineWidth=.5;const ae=l.current;for(let ge=0;ge<=ae.width;ge+=Qt)A.beginPath(),A.moveTo(ge,0),A.lineTo(ge,ae.height),A.stroke();for(let ge=0;ge<=ae.height;ge+=Qt)A.beginPath(),A.moveTo(0,ge),A.lineTo(ae.width,ge),A.stroke();A.strokeStyle="#d0d0d0",A.lineWidth=1;for(let ge=0;ge<=ae.width;ge+=Qt*5)A.beginPath(),A.moveTo(ge,0),A.lineTo(ge,ae.height),A.stroke();for(let ge=0;ge<=ae.height;ge+=Qt*5)A.beginPath(),A.moveTo(0,ge),A.lineTo(ae.width,ge),A.stroke()},kt=()=>{A.strokeStyle="#2c3e50",A.lineWidth=3,A.setLineDash([]);const ae=J.plot_width*Et,ge=J.plot_height*Et;A.strokeRect(20,20,ae,ge),A.fillStyle="#2c3e50",A.font="bold 14px Arial",A.textAlign="center",A.fillText(`${J.plot_width}'`,20+ae/2,15),A.save(),A.translate(10,20+ge/2),A.rotate(-Math.PI/2),A.fillText(`${J.plot_height}'`,0,0),A.restore()},Ze=(ae,ge)=>{const De=ae[0]==="#",st=De?ae.slice(1):ae,gt=parseInt(st,16);let rt=(gt>>16)+ge,Dt=(gt>>8&255)+ge,Pt=(gt&255)+ge;return rt=rt>255?255:rt<0?0:rt,Dt=Dt>255?255:Dt<0?0:Dt,Pt=Pt>255?255:Pt<0?0:Pt,(De?"#":"")+(rt<<16|Dt<<8|Pt).toString(16).padStart(6,"0")},oe=ae=>({master_bedroom:"#c8e6c9",bedroom:"#dcedc8",bedrooms:"#dcedc8",guest_bedroom:"#e8f5e8",kids_bedroom:"#f1f8e9",master_bathroom:"#b3e5fc",bathroom:"#e1f5fe",bathrooms:"#e1f5fe",attached_bathroom:"#e3f2fd",powder_room:"#f0f8ff",kitchen:"#ffcdd2",modular_kitchen:"#f8bbd9",pantry:"#fce4ec",living_room:"#ffe0b2",family_room:"#ffcc80",drawing_room:"#fff3e0",tv_lounge:"#ffe0b2",dining_room:"#e1bee7",breakfast_area:"#f3e5f5",utility_room:"#e0e0e0",laundry_room:"#eeeeee",store_room:"#f5f5f5",servant_room:"#e8eaf6",balcony:"#c8e6c9",terrace:"#dcedc8",garden:"#e8f5e8",courtyard:"#f1f8e9",corridor:"#fff9c4",hallway:"#fff59d",passage:"#ffecb3",entrance_hall:"#ffe082",foyer:"#ffd54f",staircase:"#d7ccc8",spiral_staircase:"#bcaaa4",elevator_shaft:"#a1887f",column:"#8d6e63",beam_area:"#795548",study_room:"#e8eaf6",home_office:"#c5cae9",pooja_room:"#d1c4e9",prayer_room:"#b39ddb",home_theater:"#9575cd",gym:"#7e57c2",library:"#673ab7",music_room:"#5e35b1",workshop:"#512da8",safe_room:"#4527a0"})[ae]||"#e3f2fd",we=(ae,ge)=>{if(!ae||typeof ae.x!="number"||typeof ae.y!="number"||!isFinite(ae.layout_width)||!isFinite(ae.layout_height)||ae.layout_width<=0||ae.layout_height<=0){console.warn("Invalid room data:",ae);return}const De=ae.x+20,st=ae.y+20,gt=ae.layout_width*Et,rt=ae.layout_height*Et,Dt=ae.rotation||0;if(!isFinite(gt)||!isFinite(rt)||gt<=0||rt<=0){console.warn("Invalid calculated dimensions:",{width:gt,height:rt,room:ae});return}const Pt=De+gt/2,Wt=st+rt/2,ms=pt&&(ae.type===pt||ae.name.toLowerCase().includes(pt.replace(/_/g," ")));A.save(),Dt!==0&&(A.translate(Pt,Wt),A.rotate(Dt*Math.PI/180),A.translate(-Pt,-Wt));let Mt=ae.color||"#e3f2fd";ms&&(Mt="#fef3c7");const fa=A.createLinearGradient(De,st,De+gt,st+rt);if(fa.addColorStop(0,Mt),fa.addColorStop(1,Ze(Mt,ms?-20:-10)),A.fillStyle=fa,A.fillRect(De,st,gt,rt),A.strokeStyle=ge?"#1976d2":ms?"#f59e0b":"#666",A.lineWidth=ge?3:ms?2:1,A.setLineDash([]),A.strokeRect(De,st,gt,rt),ms&&!ge&&(A.shadowColor="#f59e0b",A.shadowBlur=8,A.strokeRect(De,st,gt,rt),A.shadowBlur=0),A.fillStyle=ms?"#92400e":"#333",A.font="bold 12px Arial",A.textAlign="center",A.fillText(ae.name,Pt,Wt-15),Dt!==0&&(A.font="9px Arial",A.fillStyle="#ff6b6b",A.fillText(` ${Dt}`,Pt,Wt-30)),(V==="layout"||V==="both")&&(A.font="10px Arial",A.fillStyle=ms?"#92400e":"#666",A.fillText(`Layout: ${ae.layout_width}'  ${ae.layout_height}'`,Pt,Wt)),V==="actual"||V==="both"){A.font="10px Arial",A.fillStyle="#d32f2f";const ka=(ae.actual_width||ae.layout_width*J.scale_ratio).toFixed(1),yn=(ae.actual_height||ae.layout_height*J.scale_ratio).toFixed(1);A.fillText(`Actual: ${ka}'  ${yn}'`,Pt,Wt+15)}A.font="9px Arial",A.fillStyle=ms?"#92400e":"#888";const dn=(ae.layout_width*ae.layout_height).toFixed(1),zn=((ae.actual_width||ae.layout_width*J.scale_ratio)*(ae.actual_height||ae.layout_height*J.scale_ratio)).toFixed(1);V==="both"?A.fillText(`L: ${dn} sq ft | A: ${zn} sq ft`,Pt,Wt+30):V==="actual"?A.fillText(`${zn} sq ft`,Pt,Wt+30):A.fillText(`${dn} sq ft`,Pt,Wt+30),A.restore(),ge&&(Ee(De,st,gt,rt),Re(De,st,gt,rt,Dt))},Ee=(ae,ge,De,st)=>{A.fillStyle="#1976d2",A.strokeStyle="#fff",A.lineWidth=2,[{x:ae+De-Jt/2,y:ge+st/2-Jt/2,cursor:"e-resize",type:"right"},{x:ae+De/2-Jt/2,y:ge+st-Jt/2,cursor:"s-resize",type:"bottom"},{x:ae+De-Jt/2,y:ge+st-Jt/2,cursor:"se-resize",type:"corner"}].forEach(rt=>{A.fillRect(rt.x,rt.y,Jt,Jt),A.strokeRect(rt.x,rt.y,Jt,Jt)})},Re=(ae,ge,De,st,gt)=>{const rt=ae+De/2,Dt=ge+st/2,Pt=Math.max(De,st)/2+20,Wt=rt+Math.cos((gt-90)*Math.PI/180)*Pt,ms=Dt+Math.sin((gt-90)*Math.PI/180)*Pt;A.strokeStyle="#ff6b6b",A.lineWidth=2,A.setLineDash([5,5]),A.beginPath(),A.moveTo(rt,Dt),A.lineTo(Wt,ms),A.stroke(),A.setLineDash([]),A.fillStyle="#ff6b6b",A.strokeStyle="#fff",A.lineWidth=2,A.beginPath(),A.arc(Wt,ms,Jt,0,2*Math.PI),A.fill(),A.stroke(),A.fillStyle="#fff",A.font="12px Arial",A.textAlign="center",A.fillText("",Wt,ms+4)},We=()=>{E&&(A.strokeStyle="#ff6b6b",A.lineWidth=1,A.setLineDash([2,2]),A.font="10px Arial",A.fillStyle="#ff6b6b",J.rooms.forEach(ae=>{const ge=ae.x+20,De=ae.y+20,st=ae.layout_width*Et,gt=ae.layout_height*Et;A.beginPath(),A.moveTo(ge,De-15),A.lineTo(ge+st,De-15),A.stroke(),A.beginPath(),A.moveTo(ge-15,De),A.lineTo(ge-15,De+gt),A.stroke(),A.textAlign="center";const rt=(ae.actual_width||ae.layout_width*J.scale_ratio).toFixed(1),Dt=(ae.actual_height||ae.layout_height*J.scale_ratio).toFixed(1);A.fillText(`${rt}'`,ge+st/2,De-20),A.save(),A.translate(ge-20,De+gt/2),A.rotate(-Math.PI/2),A.fillText(`${Dt}'`,0,0),A.restore()}))},Lt=N.useCallback(()=>{if(!A||!l.current)return;const ae=l.current;A.clearRect(0,0,ae.width,ae.height),$e(),kt(),ja().forEach(De=>{const st=J.rooms.findIndex(gt=>gt.id===De.id);we(De,st===m)}),E&&We()},[A,J,m,E,V,pt]);N.useEffect(()=>{if(l.current){const ae=l.current,ge=ae.parentElement,De=ge.clientWidth-32,st=ge.clientHeight-32,gt=J.plot_width*20+100,rt=J.plot_height*20+100,Dt=Math.max(gt,800),Pt=Math.max(rt,600),Wt=Math.max(De,Dt),ms=Math.max(st,Pt);ae.width=Wt,ae.height=ms;const Mt=ae.getContext("2d");u(Mt),Lt()}},[J,m,E,V,pt,Lt]),N.useEffect(()=>{const ae=()=>{if(l.current){const ge=l.current,De=ge.parentElement,st=De.clientWidth-32,gt=De.clientHeight-32,rt=J.plot_width*20+100,Dt=J.plot_height*20+100,Pt=Math.max(rt,800),Wt=Math.max(Dt,600),ms=Math.max(st,Pt),Mt=Math.max(gt,Wt);ge.width=ms,ge.height=Mt,Lt()}};return window.addEventListener("resize",ae),()=>window.removeEventListener("resize",ae)},[Lt,J.plot_width,J.plot_height]);const Vt=async()=>{try{const ge=await(await fetch("/buildhub/backend/api/architect/get_room_templates.php")).json();ge.success&&x(ge.grouped)}catch(ae){console.error("Error loading room templates:",ae)}},Ot=ae=>{if(!ae)return"N/A";const ge=Number(ae);return ge>=1e7?`${(ge/1e7).toFixed(1)} Cr`:ge>=1e5?`${(ge/1e5).toFixed(1)} L`:`${ge.toLocaleString()}`},ss=ae=>{if(!ae?.floor_rooms)return null;const ge={};return Object.values(ae.floor_rooms).forEach(De=>{Object.entries(De).forEach(([st,gt])=>{ge[st]=(ge[st]||0)+gt})}),ge},xs=async()=>{try{let ae=s;if(!ae&&t){const De=await(await fetch("/buildhub/backend/api/architect/get_assigned_requests.php")).json();De.success&&(ae=De.assignments?.find(st=>st.layout_request_id===t||st.layout_request?.id===t))}if(ae&&ae.layout_request){const ge=ae.layout_request;let De=null;if(ge.requirements)try{De=typeof ge.requirements=="string"?JSON.parse(ge.requirements):ge.requirements}catch(st){console.error("Error parsing requirements:",st)}if(Xe({...ge,homeowner_name:ae.homeowner?.name||ae.homeowner?.first_name+" "+ae.homeowner?.last_name||"Client",parsed_requirements:De}),tt(st=>({...st,plan_name:`${ae.homeowner?.name||"Client"} House Plan`,plot_width:parseFloat(ge.plot_size)||100,plot_height:parseFloat(ge.plot_size)||100,scale_ratio:st.scale_ratio||1.2})),De){const st=[];let gt=1,rt=50;const Dt=1.2;if(De.floor_rooms)Object.entries(De.floor_rooms).forEach(([Pt,Wt])=>{const ms=parseInt(Pt.replace("floor",""));let Mt=50;Object.entries(Wt).forEach(([fa,dn])=>{const zn=typeof dn=="number"?dn:1;for(let ka=0;ka<zn;ka++){const yn=zn>1?`${fa.replace(/_/g," ")} ${ka+1}`:fa.replace(/_/g," ");st.push({id:gt++,name:yn,type:fa,x:Mt,y:rt+(ms-1)*200,layout_width:10,layout_height:10,actual_width:10*Dt,actual_height:10*Dt,rotation:0,color:oe(fa),floor:ms}),Mt+=140,Mt>400&&(Mt=50,rt+=120)}})});else if(De.rooms){const Pt=typeof De.rooms=="string"?De.rooms.split(",").map(ms=>ms.trim()):De.rooms;let Wt=50;Pt.forEach(ms=>{st.push({id:gt++,name:ms.replace(/_/g," "),type:ms,x:Wt,y:rt,layout_width:10,layout_height:10,actual_width:10*Dt,actual_height:10*Dt,rotation:0,color:oe(ms),floor:1}),Wt+=140,Wt>400&&(Wt=50,rt+=120)})}st.length>0&&(tt(Pt=>({...Pt,rooms:st})),T("Rooms Pre-loaded",`Added ${st.length} rooms based on client requirements`))}}}catch(ae){console.error("Error loading request info:",ae)}},Hs=ae=>Math.round(ae/Qt)*Qt,Ms=(ae,ge,De,st,gt,rt,Dt)=>{if(Dt===0)return ae>=De&&ae<=De+gt&&ge>=st&&ge<=st+rt;const Pt=De+gt/2,Wt=st+rt/2,ms=ae-Pt,Mt=ge-Wt,fa=-Dt*Math.PI/180,dn=ms*Math.cos(fa)-Mt*Math.sin(fa),zn=ms*Math.sin(fa)+Mt*Math.cos(fa),ka=dn+Pt,yn=zn+Wt;return ka>=De&&ka<=De+gt&&yn>=st&&yn<=st+rt},la=ae=>{const ge=l.current.getBoundingClientRect();return{x:ae.clientX-ge.left,y:ae.clientY-ge.top}},Zs=(ae,ge,De,st,gt,rt)=>{const Dt=[{x:De+gt-Jt/2,y:st+rt/2-Jt/2,type:"right"},{x:De+gt/2-Jt/2,y:st+rt-Jt/2,type:"bottom"},{x:De+gt-Jt/2,y:st+rt-Jt/2,type:"corner"}];for(let Pt of Dt)if(ae>=Pt.x&&ae<=Pt.x+Jt&&ge>=Pt.y&&ge<=Pt.y+Jt)return Pt.type;return null},Sa=(ae,ge,De,st,gt,rt,Dt)=>{const Pt=De+gt/2,Wt=st+rt/2,ms=Math.max(gt,rt)/2+20,Mt=Pt+Math.cos((Dt-90)*Math.PI/180)*ms,fa=Wt+Math.sin((Dt-90)*Math.PI/180)*ms;return Math.sqrt(Math.pow(ae-Mt,2)+Math.pow(ge-fa,2))<=Jt?"rotate":null},da=ae=>{if(!ie||m===null)return;const ge=la(ae),De=J.rooms[m];if(!De)return;const st=De.x+20,gt=De.y+20,rt=De.layout_width*Et,Dt=De.layout_height*Et,Pt=st+rt/2,Wt=gt+Dt/2,ms=Math.atan2(ge.y-Wt,ge.x-Pt)*180/Math.PI,Mt=Math.round(ms/15)*15;fs({rotation:Mt})},[xa,ha]=N.useState(null),[ya,Ws]=N.useState(null),[Dn,Ma]=N.useState(!1),[ie,Se]=N.useState(!1),ot=ae=>{const ge=la(ae),De=Date.now();if(ha(De),Ws(ge),Ma(!1),h==="select"){const st=[];if(ja().forEach(rt=>{const Dt=J.rooms.findIndex(fa=>fa.id===rt.id);if(!rt||!isFinite(rt.layout_width)||!isFinite(rt.layout_height)||rt.layout_width<=0||rt.layout_height<=0)return;const Pt=rt.x+20,Wt=rt.y+20,ms=rt.layout_width*Et,Mt=rt.layout_height*Et;Ms(ge.x,ge.y,Pt,Wt,ms,Mt,rt.rotation||0)&&st.push(Dt)}),st.length>0)if(st.includes(m)){const rt=J.rooms[m];if(rt&&isFinite(rt.layout_width)&&isFinite(rt.layout_height)&&rt.layout_width>0&&rt.layout_height>0){const Dt=rt.x+20,Pt=rt.y+20,Wt=rt.layout_width*Et,ms=rt.layout_height*Et,Mt=Zs(ge.x,ge.y,Dt,Pt,Wt,ms),fa=Sa(ge.x,ge.y,Dt,Pt,Wt,ms,rt.rotation||0);Mt?(P(!0),q(Mt),ee({x:ge.x,y:ge.y})):fa?(Se(!0),ee({x:ge.x,y:ge.y})):(Ma(!0),ee({x:ge.x-rt.x,y:ge.y-rt.y}))}}else{let rt;st.length>1?(rt=st[st.length-1],T("Multiple Items",`${st.length} items overlap. Click again to cycle.`)):rt=st[0],v(rt)}else v(null)}},qt=ae=>{if(!ya)return;const ge=la(ae);Math.sqrt(Math.pow(ge.x-ya.x,2)+Math.pow(ge.y-ya.y,2))>5&&Dn&&!j&&!L&&!ie&&(B(!0),Ma(!1)),j&&m!==null?ys(ae):L&&m!==null?vs(ae):ie&&m!==null&&da(ae)},Zt=ae=>{const ge=Date.now();if((xa?ge-xa:0)<200&&!j&&!L&&!ie&&Dn){const st=la(ae),gt=[];if(ja().forEach(Dt=>{const Pt=J.rooms.findIndex(dn=>dn.id===Dt.id);if(!Dt||!isFinite(Dt.layout_width)||!isFinite(Dt.layout_height)||Dt.layout_width<=0||Dt.layout_height<=0)return;const Wt=Dt.x+20,ms=Dt.y+20,Mt=Dt.layout_width*Et,fa=Dt.layout_height*Et;Ms(st.x,st.y,Wt,ms,Mt,fa,Dt.rotation||0)&&gt.push(Pt)}),gt.length>1&&gt.includes(m)){const Dt=gt.indexOf(m),Pt=gt[(Dt+1)%gt.length];v(Pt),T("Overlapping Selection",`Cycling through ${gt.length} overlapping items`)}}B(!1),P(!1),Se(!1),q(null),ha(null),Ws(null),Ma(!1)},ys=ae=>{if(!j||m===null)return;const ge=la(ae),De=Hs(ge.x-F.x-20),st=Hs(ge.y-F.y-20),gt=J.rooms[m];if(!gt||!isFinite(gt.layout_width)||!isFinite(gt.layout_height)||gt.layout_width<=0||gt.layout_height<=0)return;const rt=gt.layout_width*Et,Dt=gt.layout_height*Et,Pt=J.plot_width*Et,Wt=J.plot_height*Et,ms=Math.max(0,Math.min(De,Pt-rt)),Mt=Math.max(0,Math.min(st,Wt-Dt));fs({x:ms,y:Mt})},vs=ae=>{if(!L||m===null)return;const ge=la(ae),De=J.rooms[m],st=De.x+20,gt=De.y+20;let rt=De.layout_width,Dt=De.layout_height;if(K==="right"||K==="corner"){const ms=(ge.x-st)/Et;rt=Math.max(4,Math.min(30,Math.round(ms*2)/2))}if(K==="bottom"||K==="corner"){const ms=(ge.y-gt)/Et;Dt=Math.max(4,Math.min(30,Math.round(ms*2)/2))}const Pt=rt*J.scale_ratio,Wt=Dt*J.scale_ratio;fs({layout_width:rt,layout_height:Dt,actual_width:Pt,actual_height:Wt})},as=ae=>{const ge={id:Date.now(),name:ae.name,category:ae.category,x:50,y:50,layout_width:ae.default_width,layout_height:ae.default_height,actual_width:ae.default_width*J.scale_ratio,actual_height:ae.default_height*J.scale_ratio,rotation:0,color:ae.color,icon:ae.icon,floor:wt,wall_thickness:.5,ceiling_height:9,floor_type:"ceramic",wall_material:"brick",notes:""};tt(De=>({...De,rooms:[...De.rooms,ge]})),v(J.rooms.length),me(!0),te("Room Added",`${ae.name} has been added to ${Gt[wt]||`Floor ${wt}`}`)},ps=(ae,ge,De,st,gt,rt)=>{const Dt={id:Date.now(),name:ge,category:ae.includes("stair")||ae.includes("column")||ae.includes("beam")?"structural":ae.includes("door")||ae.includes("window")||ae.includes("arch")?"doors":"circulation",type:ae,x:50,y:50,layout_width:De,layout_height:st,actual_width:De*J.scale_ratio,actual_height:st*J.scale_ratio,rotation:0,color:gt,icon:rt,floor:wt,wall_thickness:ae.includes("stair")?1:ae.includes("door")||ae.includes("window")?.25:.5,ceiling_height:ae.includes("stair")?10:ae.includes("door")||ae.includes("window")?8:9,floor_type:ae.includes("stair")?"concrete":"ceramic",wall_material:ae.includes("stair")?"concrete":"brick",notes:""};tt(Pt=>({...Pt,rooms:[...Pt.rooms,Dt]})),v(J.rooms.length),me(!0),te("Element Added",`${ge} has been added to ${Gt[wt]||`Floor ${wt}`}`)},fs=ae=>{m!==null&&(tt(ge=>({...ge,rooms:ge.rooms.map((De,st)=>st===m?{...De,...ae}:De)})),me(!0))},pa=()=>{if(m===null)return;const ae=J.rooms[m]?.name||`Room ${m+1}`;tt(ge=>({...ge,rooms:ge.rooms.filter((De,st)=>st!==m)})),v(null),me(!0),k("Room Deleted",`"${ae}" has been removed from your plan`)},Ps=()=>J.rooms.reduce((ae,ge)=>{const De=V==="actual"?(ge.actual_width||ge.layout_width*J.scale_ratio)*(ge.actual_height||ge.layout_height*J.scale_ratio):ge.layout_width*ge.layout_height;return ae+De},0),ca=()=>J.rooms.reduce((ae,ge)=>{const De=ge.actual_width||ge.layout_width*J.scale_ratio,st=ge.actual_height||ge.layout_height*J.scale_ratio;return ae+De*st},0),In=async()=>{if(!(!J.plan_name.trim()||J.rooms.length===0))try{const ae={plan_name:J.plan_name,layout_request_id:t,plot_width:J.plot_width,plot_height:J.plot_height,plan_data:{rooms:J.rooms,scale_ratio:J.scale_ratio,total_layout_area:Ps(),total_construction_area:ca(),floors:{total_floors:Ht,current_floor:wt,floor_names:Gt}},notes:J.notes,status:"draft"},ge=a?"/buildhub/backend/api/architect/update_house_plan.php":"/buildhub/backend/api/architect/create_house_plan.php";a&&(ae.plan_id=a.id),console.log("Auto-saving plan...");const De=await fetch(ge,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"include",body:JSON.stringify(ae)});if(!De.ok){console.error("Auto-save HTTP error:",De.status,De.statusText);return}const st=await De.text();let gt;try{gt=JSON.parse(st)}catch(rt){console.error("Auto-save JSON parse error:",rt);return}gt.success?(W(new Date),me(!1),T("Auto-saved","Your changes have been automatically saved"),gt.plan_id&&!a&&console.log("Auto-save created new plan with ID:",gt.plan_id)):console.error("Auto-save failed:",gt.message)}catch(ae){console.error("Auto-save error:",ae)}},Yr=()=>{localStorage.setItem("housePlanTourCompleted","true"),je(!1),te("Welcome!","You're now ready to create professional house plans.")},Ai=()=>{Qe(!0)},qs=()=>{mt(!0)},Xn=()=>{const ae=Ht+1;_t(ae),$t(ge=>({...ge,[ae]:`Floor ${ae}`})),bt(ae),te("Floor Added",`Floor ${ae} has been added to your plan`),me(!0)},Ci=ae=>{if(Ht<=1){k("Cannot Remove","You must have at least one floor in your plan");return}tt(st=>({...st,rooms:st.rooms.filter(gt=>gt.floor!==ae)}));const ge={};let De=1;Object.entries(Gt).forEach(([st,gt])=>{const rt=parseInt(st);rt!==ae&&(ge[De]=(rt<ae,gt),De++)}),$t(ge),_t(Ht-1),wt===ae?bt(1):wt>ae&&bt(wt-1),k("Floor Removed",`Floor ${ae} and its rooms have been removed`),me(!0)},ea=ae=>{bt(ae),v(null),T("Floor Switched",`Now viewing ${Gt[ae]||`Floor ${ae}`}`)},Jn=(ae,ge)=>{$t(De=>({...De,[ae]:ge})),me(!0)},ja=()=>J.rooms.filter(ae=>ae.floor===wt),wr=(ae,ge)=>{const De={...ae,id:Date.now()+Math.random(),floor:ge,name:`${ae.name} (Copy)`};tt(st=>({...st,rooms:[...st.rooms,De]})),te("Room Copied",`${ae.name} copied to ${Gt[ge]||`Floor ${ge}`}`),me(!0)},Ks=async()=>{if(!J.plan_name.trim()){he("Validation Error","Please enter a plan name before downloading");return}Ut(!0);try{const{default:ae}=await li(async()=>{const{default:st}=await Promise.resolve().then(()=>Gg);return{default:st}},void 0),ge=new ae("l","mm","a4");ge.setFontSize(20),ge.text(J.plan_name,20,20),ge.setFontSize(12);let De=40;if(ge.text(`Plot Size: ${J.plot_width}'  ${J.plot_height}'`,20,De),De+=10,ge.text(`Total Floors: ${Ht}`,20,De),De+=10,ge.text(`Layout Area: ${Ps().toFixed(0)} sq ft`,20,De),De+=10,ge.text(`Construction Area: ${ca().toFixed(0)} sq ft`,20,De),De+=10,ge.text(`Number of Rooms: ${J.rooms.length}`,20,De),De+=10,ge.text(`Scale Ratio: 1:${J.scale_ratio}`,20,De),De+=20,J.rooms&&J.rooms.length>0){ge.setFontSize(14),ge.text("Room Details by Floor:",20,De),De+=10;for(let st=1;st<=Ht;st++){const gt=J.rooms.filter(rt=>rt.floor===st);gt.length>0&&(ge.setFontSize(12),ge.text(`${Gt[st]||`Floor ${st}`} (${gt.length} rooms):`,20,De),De+=8,ge.setFontSize(10),gt.forEach(rt=>{const Dt=rt.actual_width||rt.layout_width*J.scale_ratio,Pt=rt.actual_height||rt.layout_height*J.scale_ratio,Wt=`   ${rt.name}: Layout ${rt.layout_width}'  ${rt.layout_height}' | Construction ${Dt.toFixed(1)}'  ${Pt.toFixed(1)}' (${(Dt*Pt).toFixed(0)} sq ft)`;ge.text(Wt,20,De),De+=6,De>180&&(ge.addPage(),De=20)}),De+=5)}}if(l.current)try{const st=(await li(async()=>{const{default:Wt}=await Promise.resolve().then(()=>Au);return{default:Wt}},void 0)).default,gt=await st(l.current),rt=gt.toDataURL("image/png");ge.addPage(),ge.setFontSize(14),ge.text("Plan Layout:",20,20);const Dt=250,Pt=gt.height*Dt/gt.width;ge.addImage(rt,"PNG",20,30,Dt,Pt)}catch(st){console.error("Error adding canvas to PDF:",st)}if(J.notes){ge.addPage(),ge.setFontSize(14),ge.text("Notes:",20,20),ge.setFontSize(10);const st=ge.splitTextToSize(J.notes,250);ge.text(st,20,35)}ge.save(`${J.plan_name.replace(/[^a-z0-9]/gi,"_")}_house_plan.pdf`),te("PDF Downloaded","Your house plan has been downloaded as PDF")}catch(ae){console.error("Error generating PDF:",ae),he("Download Failed","Error generating PDF. Please try again.")}finally{Ut(!1)}},Qr=async()=>{if(!J.plan_name.trim()){he("Validation Error","Please enter a plan name before downloading");return}Ut(!0);try{if(l.current){const ae=(await li(async()=>{const{default:st}=await Promise.resolve().then(()=>Au);return{default:st}},void 0)).default,ge=await ae(l.current,{backgroundColor:"#ffffff",scale:2}),De=document.createElement("a");De.download=`${J.plan_name.replace(/[^a-z0-9]/gi,"_")}_layout.png`,De.href=ge.toDataURL("image/png"),De.click(),te("Image Downloaded","Your house plan layout has been downloaded as PNG")}else he("Download Failed","Plan canvas not available for download.")}catch(ae){console.error("Error generating image:",ae),he("Download Failed","Error generating image. Please try again.")}finally{Ut(!1)}},Zn=()=>{if(!J.plan_name.trim()){he("Validation Error","Please enter a plan name before downloading");return}try{const ae={plan_info:{name:J.plan_name,plot_width:J.plot_width,plot_height:J.plot_height,layout_area:Ps(),construction_area:ca(),scale_ratio:J.scale_ratio,total_floors:Ht,floor_names:Gt,created_at:new Date().toISOString()},floors:{total_floors:Ht,current_floor:wt,floor_names:Gt,rooms_by_floor:Array.from({length:Ht},(gt,rt)=>rt+1).reduce((gt,rt)=>(gt[rt]=J.rooms.filter(Dt=>Dt.floor===rt),gt),{})},rooms:J.rooms.map(gt=>({...gt,actual_width:gt.actual_width||gt.layout_width*J.scale_ratio,actual_height:gt.actual_height||gt.layout_height*J.scale_ratio})),notes:J.notes,requirements_reference:at?{homeowner_name:at.homeowner_name,budget:at.budget,location:at.location,requirements:at.parsed_requirements}:null},ge=JSON.stringify(ae,null,2),De=new Blob([ge],{type:"application/json"}),st=document.createElement("a");st.href=URL.createObjectURL(De),st.download=`${J.plan_name.replace(/[^a-z0-9]/gi,"_")}_data.json`,st.click(),URL.revokeObjectURL(st.href),te("JSON Downloaded","Your house plan data has been downloaded as JSON")}catch(ae){console.error("Error generating JSON:",ae),he("Download Failed","Error generating JSON file. Please try again.")}},Xr=async()=>{if(!J.plan_name.trim()){he("Validation Error","Please enter a plan name before submitting");return}if(J.rooms.length===0){k("Empty Plan","Your plan has no rooms. Add some rooms before submitting.");return}if(de){T("Saving Plan","Saving plan before submission...");try{await jr()}catch{he("Save Failed","Please save the plan first before submitting");return}}Oe(!0)},Tr=async ae=>{xt(!0);try{let ge=a?.id;if(!ge){const rt=await er();if(!rt.success)throw new Error(rt.message||"Failed to save plan");ge=rt.plan_id}const De={plan_id:ge,technical_details:ae,plan_data:{rooms:J.rooms,scale_ratio:J.scale_ratio,total_layout_area:Ps(),total_construction_area:ca(),floors:{total_floors:Ht,current_floor:wt,floor_names:Gt}}};console.log("Submitting with technical details:",De);const st=await fetch("/buildhub/backend/api/architect/submit_house_plan_with_details.php",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"include",body:JSON.stringify(De)});if(!st.ok)throw new Error(`HTTP error! status: ${st.status}`);const gt=await st.json();if(gt.success)Oe(!1),te("Plan Submitted Successfully!",`Your house plan "${J.plan_name}" with technical details has been submitted to the homeowner for review.`),r&&setTimeout(()=>r(gt),1500);else throw new Error(gt.message||"Submission failed")}catch(ge){console.error("Error submitting plan:",ge),he("Submission Failed",`Failed to submit plan: ${ge.message}. Please try again.`)}finally{xt(!1)}},er=async()=>{const ae={plan_name:J.plan_name,layout_request_id:t,plot_width:J.plot_width,plot_height:J.plot_height,plan_data:{rooms:J.rooms,scale_ratio:J.scale_ratio,total_layout_area:Ps(),total_construction_area:ca(),floors:{total_floors:Ht,current_floor:wt,floor_names:Gt}},notes:J.notes,status:"draft"},ge=await fetch("/buildhub/backend/api/architect/create_house_plan.php",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"include",body:JSON.stringify(ae)});if(!ge.ok)throw new Error(`HTTP error! status: ${ge.status}`);return await ge.json()},di=ae=>{const ge=[];return(!ae.plan_name||ae.plan_name.trim().length===0)&&ge.push("Plan name is required"),(!ae.plot_width||ae.plot_width<=0)&&ge.push("Plot width must be greater than 0"),(!ae.plot_height||ae.plot_height<=0)&&ge.push("Plot height must be greater than 0"),(!ae.plan_data||!ae.plan_data.rooms||!Array.isArray(ae.plan_data.rooms))&&ge.push("Plan data must contain rooms array"),ae.plan_data&&ae.plan_data.rooms&&ae.plan_data.rooms.forEach((De,st)=>{(!De.name||De.name.trim().length===0)&&ge.push(`Room ${st+1}: Name is required`),(!De.layout_width||De.layout_width<=0)&&ge.push(`Room ${st+1}: Layout width must be greater than 0`),(!De.layout_height||De.layout_height<=0)&&ge.push(`Room ${st+1}: Layout height must be greater than 0`),(typeof De.x!="number"||typeof De.y!="number")&&ge.push(`Room ${st+1}: Position coordinates must be numbers`)}),ge},jr=async()=>{if(!J.plan_name.trim()){he("Validation Error","Please enter a plan name before saving");return}if(J.rooms.length===0){k("Empty Plan","Your plan has no rooms. Add some rooms before saving.");return}const ae={plan_name:J.plan_name,layout_request_id:t,plot_width:J.plot_width,plot_height:J.plot_height,plan_data:{rooms:J.rooms,scale_ratio:J.scale_ratio,total_layout_area:Ps(),total_construction_area:ca(),floors:{total_floors:Ht,current_floor:wt,floor_names:Gt}},notes:J.notes,status:"draft"};a&&(ae.plan_id=a.id);const ge=di(ae);if(ge.length>0){he("Validation Error",ge.join("; "));return}Q(!0),T("Saving Plan","Please wait while we save your house plan...");try{const De=a?"/buildhub/backend/api/architect/update_house_plan.php":"/buildhub/backend/api/architect/create_house_plan.php";console.log("Saving plan with payload:",ae),console.log("Using URL:",De),console.log("Existing plan:",a);const st=await fetch(De,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"include",body:JSON.stringify(ae)});if(console.log("Response status:",st.status),console.log("Response headers:",Object.fromEntries(st.headers.entries())),!st.ok)throw new Error(`HTTP error! status: ${st.status}`);const gt=await st.text();console.log("Raw response:",gt);let rt;try{rt=JSON.parse(gt)}catch(Dt){throw console.error("JSON parse error:",Dt),console.error("Response text:",gt),new Error("Invalid JSON response from server. Check console for details.")}console.log("Parsed result:",rt),rt.success?(W(new Date),me(!1),z&&(clearTimeout(z),le(null)),te("Plan Saved Successfully!",`Your house plan "${J.plan_name}" has been saved with ${J.rooms.length} rooms covering ${ca().toFixed(0)} sq ft.`),M([]),G(-1),setTimeout(()=>{os()},100),rt.plan_id&&!a&&console.log("New plan created with ID:",rt.plan_id),r&&setTimeout(()=>r(rt),1500)):he("Save Failed",rt.message||"Unable to save your house plan. Please check your connection and try again.")}catch(De){console.error("Error saving plan:",De),he("Network Error",`Failed to connect to the server: ${De.message}. Please check your internet connection and try again.`)}finally{Q(!1)}},bs=m!==null?J.rooms[m]:null;return e.jsxs("div",{className:"house-plan-drawer",children:[e.jsx(A2,{notifications:Ae,onRemove:Ce}),e.jsx(g6,{isOpen:Be,onClose:()=>Qe(!1),onComplete:Yr}),e.jsx(x6,{isOpen:ut,onClose:()=>mt(!1)}),e.jsx(c2,{isOpen:et,onClose:()=>Oe(!1),onSubmit:Tr,planData:J,loading:Bt}),e.jsxs("div",{className:"drawer-header",children:[e.jsxs("div",{className:"header-title",children:[e.jsx("h2",{children:"House Plan Designer"}),de&&e.jsx("span",{className:"unsaved-indicator",title:"You have unsaved changes",children:" Unsaved Changes"}),X&&e.jsxs("span",{className:"last-saved",title:`Last saved: ${X.toLocaleTimeString()}`,children:["Last saved: ",X.toLocaleTimeString()]})]}),e.jsxs("div",{className:"header-actions",children:[e.jsxs("div",{className:"help-actions",children:[e.jsx("button",{onClick:Ai,className:"action-btn tour-btn",title:"Take a guided tour",children:" Tour"}),e.jsx("button",{onClick:qs,className:"action-btn help-btn",title:"Open user manual",children:" Help"})]}),e.jsxs("div",{className:"edit-actions",children:[e.jsx("button",{onClick:_e,disabled:re<=0,className:"action-btn undo-btn",title:"Undo (Ctrl+Z)",children:" Undo"}),e.jsx("button",{onClick:St,disabled:re>=I.length-1,className:"action-btn redo-btn",title:"Redo (Ctrl+Y)",children:" Redo"}),e.jsx("button",{onClick:pa,disabled:m===null,className:"action-btn delete-btn",title:"Delete Selected Room (Delete)",children:" Delete"})]}),e.jsxs("div",{className:"drawer-actions",children:[e.jsxs("div",{className:"download-actions",children:[e.jsxs("button",{onClick:Ks,disabled:C||dt||!J.plan_name.trim(),className:"download-btn",title:"Download plan as PDF",children:[dt?"":""," PDF"]}),e.jsxs("button",{onClick:Qr,disabled:C||dt||!J.plan_name.trim(),className:"download-btn",title:"Download layout as image",children:[dt?"":""," PNG"]}),e.jsxs("button",{onClick:Zn,disabled:C||dt||!J.plan_name.trim(),className:"download-btn",title:"Download plan data as JSON",children:[dt?"":""," JSON"]})]}),e.jsx("button",{onClick:jr,disabled:C,className:"save-btn",children:C?"Saving...":"Save Plan"}),e.jsx("button",{onClick:Xr,disabled:C,className:"submit-btn",children:C?"Submitting...":"Submit to Homeowner"}),e.jsx("button",{onClick:()=>window.open("/buildhub/backend/test_house_plan_save.php","_blank"),className:"test-btn",title:"Test backend connectivity",children:" Test Backend"}),e.jsx("button",{onClick:o,className:"cancel-btn",children:"Cancel"})]})]})]}),e.jsxs("div",{className:"drawer-content",children:[e.jsxs("div",{className:"tools-panel",children:[at&&e.jsxs("div",{className:"requirements-reference",children:[e.jsxs("div",{className:"requirements-header",children:[e.jsx("h4",{children:" Client Requirements"}),e.jsx("button",{className:"toggle-requirements-btn",onClick:()=>Rt(!Ft),title:Ft?"Hide requirements":"Show requirements",children:Ft?"":""})]}),Ft&&e.jsxs("div",{className:"requirements-content",children:[e.jsxs("div",{className:"requirement-item",children:[e.jsx("span",{className:"requirement-label",children:"Client:"}),e.jsx("span",{className:"requirement-value",children:at.homeowner_name||"N/A"})]}),e.jsxs("div",{className:"requirement-item",children:[e.jsx("span",{className:"requirement-label",children:"Budget:"}),e.jsx("span",{className:"requirement-value",children:Ot(at.budget)})]}),e.jsxs("div",{className:"requirement-item",children:[e.jsx("span",{className:"requirement-label",children:"Plot Size:"}),e.jsxs("span",{className:"requirement-value",children:[at.plot_size||"N/A"," sq ft"]})]}),e.jsxs("div",{className:"requirement-item",children:[e.jsx("span",{className:"requirement-label",children:"Location:"}),e.jsx("span",{className:"requirement-value",children:at.location||"N/A"})]}),at.parsed_requirements&&e.jsxs(e.Fragment,{children:[(()=>{const ae=ss(at.parsed_requirements);return ae&&e.jsxs("div",{className:"requirement-section room-summary",children:[e.jsx("h5",{children:" Room Summary"}),e.jsx("div",{className:"room-summary-grid",children:Object.entries(ae).map(([ge,De])=>e.jsxs("div",{className:"room-summary-item",onMouseEnter:()=>xe(ge),onMouseLeave:()=>xe(null),title:`Hover to highlight ${ge.replace(/_/g," ")} in plan`,children:[e.jsx("span",{className:"room-summary-name",children:ge.replace(/_/g," ")}),e.jsx("span",{className:"room-summary-count",children:De})]},ge))})]})})(),at.parsed_requirements.floor_rooms&&e.jsxs("div",{className:"requirement-section",children:[e.jsx("h5",{children:" Room Requirements"}),Object.entries(at.parsed_requirements.floor_rooms).map(([ae,ge])=>e.jsxs("div",{className:"floor-requirements",children:[e.jsxs("div",{className:"floor-title",children:[ae.charAt(0).toUpperCase()+ae.slice(1),":"]}),e.jsx("div",{className:"room-list",children:Object.entries(ge).map(([De,st])=>e.jsxs("div",{className:"room-requirement",onMouseEnter:()=>xe(De),onMouseLeave:()=>xe(null),title:`Hover to highlight ${De.replace(/_/g," ")} in plan`,children:[e.jsx("span",{className:"room-name",children:De.replace(/_/g," ")}),e.jsxs("span",{className:"room-count",children:["",st]})]},De))})]},ae))]}),at.parsed_requirements.special_features&&e.jsxs("div",{className:"requirement-section",children:[e.jsx("h5",{children:" Special Features"}),e.jsx("div",{className:"features-list",children:at.parsed_requirements.special_features.map((ae,ge)=>e.jsxs("div",{className:"feature-item",children:[" ",ae]},ge))})]}),at.parsed_requirements.style_preference&&e.jsxs("div",{className:"requirement-section",children:[e.jsx("h5",{children:" Style Preference"}),e.jsx("div",{className:"style-preference",children:at.parsed_requirements.style_preference})]}),at.parsed_requirements.additional_notes&&e.jsxs("div",{className:"requirement-section",children:[e.jsx("h5",{children:" Additional Notes"}),e.jsx("div",{className:"additional-notes",children:at.parsed_requirements.additional_notes})]})]}),at.requirements&&!at.parsed_requirements&&e.jsxs("div",{className:"requirement-section",children:[e.jsx("h5",{children:" Requirements"}),e.jsx("div",{className:"raw-requirements",children:typeof at.requirements=="string"?at.requirements:JSON.stringify(at.requirements,null,2)})]})]})]}),e.jsxs("div",{className:"plan-details-section",children:[e.jsx("h4",{children:"Plan Details"}),e.jsxs("div",{className:"plan-form",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Plan Name:"}),e.jsx("input",{type:"text",placeholder:"Enter plan name",value:J.plan_name,onChange:ae=>{tt(ge=>({...ge,plan_name:ae.target.value})),me(!0)},className:"plan-detail-input"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Plot Dimensions:"}),e.jsxs("div",{className:"dimension-inputs",children:[e.jsxs("div",{className:"dimension-input",children:[e.jsx("label",{children:"Width:"}),e.jsx("input",{type:"number",value:J.plot_width,onChange:ae=>{tt(ge=>({...ge,plot_width:parseFloat(ae.target.value)||0})),me(!0)},min:"10",max:"100",className:"dimension-field"}),e.jsx("span",{children:"ft"})]}),e.jsxs("div",{className:"dimension-input",children:[e.jsx("label",{children:"Height:"}),e.jsx("input",{type:"number",value:J.plot_height,onChange:ae=>{tt(ge=>({...ge,plot_height:parseFloat(ae.target.value)||0})),me(!0)},min:"10",max:"100",className:"dimension-field"}),e.jsx("span",{children:"ft"})]})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Notes:"}),e.jsx("textarea",{placeholder:"Add notes about this plan...",value:J.notes,onChange:ae=>{tt(ge=>({...ge,notes:ae.target.value})),me(!0)},className:"plan-notes-textarea",rows:"3"})]})]})]}),e.jsxs("div",{className:"floor-management-section",children:[e.jsx("h4",{children:" Floor Management"}),e.jsxs("div",{className:"floor-controls",children:[e.jsxs("div",{className:"current-floor-info",children:[e.jsx("span",{className:"floor-label",children:"Current Floor:"}),e.jsx("span",{className:"floor-name",children:Gt[wt]||`Floor ${wt}`}),e.jsxs("span",{className:"floor-rooms-count",children:["(",ja().length," rooms)"]})]}),e.jsxs("div",{className:"floor-tabs",children:[Array.from({length:Ht},(ae,ge)=>ge+1).map(ae=>e.jsx("button",{className:`floor-tab ${wt===ae?"active":""}`,onClick:()=>ea(ae),title:`Switch to ${Gt[ae]||`Floor ${ae}`}`,children:ae},ae)),e.jsx("button",{className:"floor-tab add-floor",onClick:Xn,title:"Add new floor",children:"+"})]}),e.jsxs("div",{className:"floor-actions",children:[e.jsx("div",{className:"floor-name-edit",children:e.jsx("input",{type:"text",value:Gt[wt]||`Floor ${wt}`,onChange:ae=>Jn(wt,ae.target.value),className:"floor-name-input",placeholder:"Floor name"})}),e.jsxs("div",{className:"floor-buttons",children:[Ht>1&&e.jsx("button",{className:"floor-action-btn remove-floor",onClick:()=>Ci(wt),title:"Remove current floor",children:" Remove Floor"}),m!==null&&e.jsxs("div",{className:"copy-room-section",children:[e.jsx("span",{className:"copy-label",children:"Copy selected room to:"}),e.jsx("div",{className:"copy-floor-buttons",children:Array.from({length:Ht},(ae,ge)=>ge+1).filter(ae=>ae!==wt).map(ae=>e.jsxs("button",{className:"copy-floor-btn",onClick:()=>wr(J.rooms[m],ae),title:`Copy to ${Gt[ae]||`Floor ${ae}`}`,children:[" ",ae]},ae))})]})]})]})]})]}),e.jsxs("div",{className:"plan-stats",children:[e.jsx("h4",{children:"Plan Statistics"}),e.jsxs("div",{className:"stats",children:[e.jsxs("div",{children:["Plot Area: ",(J.plot_width*J.plot_height).toFixed(0)," sq ft"]}),e.jsxs("div",{children:["Total Floors: ",Ht]}),e.jsxs("div",{children:["Current Floor: ",ja().length," rooms"]}),e.jsxs("div",{children:["Total Rooms: ",J.rooms.length]}),e.jsxs("div",{children:["Layout Area: ",Ps().toFixed(0)," sq ft"]}),e.jsxs("div",{children:["Construction Area: ",ca().toFixed(0)," sq ft"]}),e.jsxs("div",{children:["Coverage: ",(ca()/(J.plot_width*J.plot_height)*100).toFixed(1),"%"]})]})]}),e.jsxs("div",{className:"tool-section",children:[e.jsx("h4",{children:"Tools"}),e.jsx("div",{className:"tool-buttons",children:e.jsx("button",{className:h==="select"?"active":"",onClick:()=>p("select"),title:"Select and move rooms",children:" Select"})})]}),e.jsxs("div",{className:"measurement-controls",children:[e.jsx("h4",{children:"Measurements"}),e.jsxs("div",{className:"measurement-options",children:[e.jsxs("label",{className:"checkbox-label",children:[e.jsx("input",{type:"checkbox",checked:E,onChange:ae=>U(ae.target.checked)}),"Show Dimensions"]}),e.jsxs("div",{className:"measurement-mode",children:[e.jsxs("label",{children:[e.jsx("input",{type:"radio",name:"measurementMode",value:"layout",checked:V==="layout",onChange:ae=>H(ae.target.value)}),"Layout Only"]}),e.jsxs("label",{children:[e.jsx("input",{type:"radio",name:"measurementMode",value:"actual",checked:V==="actual",onChange:ae=>H(ae.target.value)}),"Construction Only"]}),e.jsxs("label",{children:[e.jsx("input",{type:"radio",name:"measurementMode",value:"both",checked:V==="both",onChange:ae=>H(ae.target.value)}),"Both"]})]})]}),e.jsxs("div",{className:"scale-control",children:[e.jsxs("label",{children:["Scale Ratio (Layout  Construction):",e.jsx("input",{type:"number",value:J.scale_ratio,onChange:ae=>{tt(ge=>({...ge,scale_ratio:parseFloat(ae.target.value)||1})),me(!0)},min:"0.5",max:"3",step:"0.1",className:"scale-input"})]}),e.jsx("small",{children:"1.0 = Same size, 1.2 = 20% larger construction"})]})]}),e.jsxs("div",{className:"room-templates",children:[e.jsx("h4",{children:"Room Templates"}),e.jsxs("div",{className:"quick-access",children:[e.jsx("h5",{children:" Quick Access"}),e.jsxs("div",{className:"quick-access-grid",children:[e.jsx("button",{className:"quick-btn circulation",onClick:()=>ps("corridor","Corridor",20,4,"#fff9c4",""),title:"Add Corridor (20'  4')",children:" Corridor"}),e.jsx("button",{className:"quick-btn circulation",onClick:()=>ps("hallway","Hallway",15,6,"#fff59d",""),title:"Add Hallway (15'  6')",children:" Hallway"}),e.jsx("button",{className:"quick-btn structural",onClick:()=>ps("staircase","Staircase",8,12,"#d7ccc8",""),title:"Add Staircase (8'  12')",children:" Staircase"}),e.jsx("button",{className:"quick-btn structural",onClick:()=>ps("spiral_staircase","Spiral Staircase",6,6,"#bcaaa4",""),title:"Add Spiral Staircase (6'  6')",children:" Spiral Stair"}),e.jsx("button",{className:"quick-btn circulation",onClick:()=>ps("entrance_hall","Entrance Hall",10,8,"#ffe082",""),title:"Add Entrance Hall (10'  8')",children:" Entrance"}),e.jsx("button",{className:"quick-btn circulation",onClick:()=>ps("passage","Passage",12,3,"#ffecb3",""),title:"Add Passage (12'  3')",children:" Passage"})]})]}),e.jsxs("div",{className:"quick-access",children:[e.jsx("h5",{children:" Doors & Openings"}),e.jsxs("div",{className:"quick-access-grid",children:[e.jsx("button",{className:"quick-btn doors",onClick:()=>ps("main_door","Main Door",4,1,"#b3d9ff",""),title:"Add Main Door (4'  1')",children:" Main Door"}),e.jsx("button",{className:"quick-btn doors",onClick:()=>ps("interior_door","Interior Door",3,1,"#cce7ff",""),title:"Add Interior Door (3'  1')",children:" Interior Door"}),e.jsx("button",{className:"quick-btn doors",onClick:()=>ps("sliding_door","Sliding Door",6,1,"#e0f2ff",""),title:"Add Sliding Door (6'  1')",children:" Sliding Door"}),e.jsx("button",{className:"quick-btn doors",onClick:()=>ps("window","Window",4,1,"#d9ecff",""),title:"Add Window (4'  1')",children:" Window"}),e.jsx("button",{className:"quick-btn doors",onClick:()=>ps("french_door","French Door",5,1,"#f0f8ff",""),title:"Add French Door (5'  1')",children:" French Door"}),e.jsx("button",{className:"quick-btn doors",onClick:()=>ps("arch_opening","Arch Opening",4,1,"#bfd6ff",""),title:"Add Arch Opening (4'  1')",children:" Arch Opening"})]})]}),Object.entries(b).map(([ae,ge])=>e.jsxs("div",{className:"template-category",children:[e.jsx("h5",{children:ae.charAt(0).toUpperCase()+ae.slice(1)}),e.jsx("div",{className:"template-grid",children:ge.map(De=>e.jsxs("button",{className:"template-btn",onClick:()=>as(De),style:{backgroundColor:De.color},title:`Add ${De.name} (${De.default_width}'  ${De.default_height}')`,children:[De.icon&&e.jsx("span",{className:"template-icon",children:De.icon}),De.name]},De.id))})]},ae))]}),e.jsxs("div",{className:"color-legend",children:[e.jsx("h5",{children:" Color Legend"}),e.jsxs("div",{className:"legend-grid",children:[e.jsxs("div",{className:"legend-item",children:[e.jsx("div",{className:"legend-color",style:{backgroundColor:"#c8e6c9"}}),e.jsx("span",{className:"legend-label",children:"Bedrooms"})]}),e.jsxs("div",{className:"legend-item",children:[e.jsx("div",{className:"legend-color",style:{backgroundColor:"#b3e5fc"}}),e.jsx("span",{className:"legend-label",children:"Bathrooms"})]}),e.jsxs("div",{className:"legend-item",children:[e.jsx("div",{className:"legend-color",style:{backgroundColor:"#ffcdd2"}}),e.jsx("span",{className:"legend-label",children:"Kitchen"})]}),e.jsxs("div",{className:"legend-item",children:[e.jsx("div",{className:"legend-color",style:{backgroundColor:"#ffe0b2"}}),e.jsx("span",{className:"legend-label",children:"Living Areas"})]}),e.jsxs("div",{className:"legend-item",children:[e.jsx("div",{className:"legend-color",style:{backgroundColor:"#e1bee7"}}),e.jsx("span",{className:"legend-label",children:"Dining Areas"})]}),e.jsxs("div",{className:"legend-item",children:[e.jsx("div",{className:"legend-color",style:{backgroundColor:"#fff9c4"}}),e.jsx("span",{className:"legend-label",children:"Walkways"})]}),e.jsxs("div",{className:"legend-item",children:[e.jsx("div",{className:"legend-color",style:{backgroundColor:"#d7ccc8"}}),e.jsx("span",{className:"legend-label",children:"Stairs/Structure"})]}),e.jsxs("div",{className:"legend-item",children:[e.jsx("div",{className:"legend-color",style:{backgroundColor:"#b3d9ff"}}),e.jsx("span",{className:"legend-label",children:"Doors/Openings"})]}),e.jsxs("div",{className:"legend-item",children:[e.jsx("div",{className:"legend-color",style:{backgroundColor:"#e0e0e0"}}),e.jsx("span",{className:"legend-label",children:"Utility"})]})]})]}),bs&&e.jsxs("div",{className:"room-properties",children:[e.jsx("h4",{children:"Room Properties"}),e.jsxs("div",{className:"property-group",children:[e.jsxs("label",{children:["Name:",e.jsx("input",{type:"text",value:bs.name,onChange:ae=>{fs({name:ae.target.value})}})]}),e.jsxs("label",{children:["Floor:",e.jsx("select",{value:bs.floor||1,onChange:ae=>{const ge=parseInt(ae.target.value);fs({floor:ge}),T("Room Moved",`${bs.name} moved to ${Gt[ge]||`Floor ${ge}`}`)},children:Array.from({length:Ht},(ae,ge)=>ge+1).map(ae=>e.jsx("option",{value:ae,children:Gt[ae]||`Floor ${ae}`},ae))})]}),e.jsxs("div",{className:"rotation-section",children:[e.jsx("h5",{children:"Rotation"}),e.jsxs("div",{className:"rotation-controls",children:[e.jsxs("label",{children:["Angle:",e.jsx("input",{type:"number",value:bs.rotation||0,onChange:ae=>{const ge=parseFloat(ae.target.value)||0;fs({rotation:ge})},min:"-180",max:"180",step:"15"})," "]}),e.jsxs("div",{className:"rotation-buttons",children:[e.jsx("button",{type:"button",className:"rotation-btn",onClick:()=>fs({rotation:((bs.rotation||0)-15+360)%360}),title:"Rotate 15 counter-clockwise",children:" -15"}),e.jsx("button",{type:"button",className:"rotation-btn",onClick:()=>fs({rotation:((bs.rotation||0)+15)%360}),title:"Rotate 15 clockwise",children:" +15"}),e.jsx("button",{type:"button",className:"rotation-btn",onClick:()=>fs({rotation:((bs.rotation||0)+90)%360}),title:"Rotate 90 clockwise",children:" 90"}),e.jsx("button",{type:"button",className:"rotation-btn reset-btn",onClick:()=>fs({rotation:0}),title:"Reset rotation",children:" Reset"})]})]})]}),e.jsxs("div",{className:"dimensions-section",children:[e.jsx("h5",{children:"Layout Dimensions"}),e.jsxs("div",{className:"dimension-inputs",children:[e.jsxs("label",{children:["Width:",e.jsx("input",{type:"number",value:bs.layout_width,onChange:ae=>{const ge=parseFloat(ae.target.value)||0;fs({layout_width:ge,actual_width:ge*J.scale_ratio})},min:"4",max:"30",step:"0.5"})," ft"]}),e.jsxs("label",{children:["Height:",e.jsx("input",{type:"number",value:bs.layout_height,onChange:ae=>{const ge=parseFloat(ae.target.value)||0;fs({layout_height:ge,actual_height:ge*J.scale_ratio})},min:"4",max:"30",step:"0.5"})," ft"]})]}),e.jsxs("div",{className:"dimension-display",children:["Layout Area: ",(bs.layout_width*bs.layout_height).toFixed(1)," sq ft"]})]}),e.jsxs("div",{className:"dimensions-section",children:[e.jsx("h5",{children:"Construction Dimensions"}),e.jsxs("div",{className:"dimension-inputs",children:[e.jsxs("label",{children:["Actual Width:",e.jsx("input",{type:"number",value:(bs.actual_width||bs.layout_width*J.scale_ratio).toFixed(1),onChange:ae=>fs({actual_width:parseFloat(ae.target.value)||0}),min:"4",max:"40",step:"0.1"})," ft"]}),e.jsxs("label",{children:["Actual Height:",e.jsx("input",{type:"number",value:(bs.actual_height||bs.layout_height*J.scale_ratio).toFixed(1),onChange:ae=>fs({actual_height:parseFloat(ae.target.value)||0}),min:"4",max:"40",step:"0.1"})," ft"]})]}),e.jsxs("div",{className:"dimension-display",children:["Construction Area: ",((bs.actual_width||bs.layout_width*J.scale_ratio)*(bs.actual_height||bs.layout_height*J.scale_ratio)).toFixed(1)," sq ft"]})]}),e.jsxs("div",{className:"construction-specs",children:[e.jsx("h5",{children:"Construction Specifications"}),e.jsxs("label",{children:["Ceiling Height:",e.jsx("input",{type:"number",value:bs.ceiling_height||9,onChange:ae=>fs({ceiling_height:parseFloat(ae.target.value)||9}),min:"8",max:"15",step:"0.5"})," ft"]}),e.jsxs("label",{children:["Wall Thickness:",e.jsx("input",{type:"number",value:bs.wall_thickness||.5,onChange:ae=>fs({wall_thickness:parseFloat(ae.target.value)||.5}),min:"0.25",max:"1",step:"0.25"})," ft"]}),e.jsxs("label",{children:["Floor Type:",e.jsxs("select",{value:bs.floor_type||"ceramic",onChange:ae=>fs({floor_type:ae.target.value}),children:[e.jsx("option",{value:"ceramic",children:"Ceramic Tiles"}),e.jsx("option",{value:"marble",children:"Marble"}),e.jsx("option",{value:"granite",children:"Granite"}),e.jsx("option",{value:"wood",children:"Wooden"}),e.jsx("option",{value:"concrete",children:"Concrete"}),e.jsx("option",{value:"vinyl",children:"Vinyl"})]})]}),e.jsxs("label",{children:["Wall Material:",e.jsxs("select",{value:bs.wall_material||"brick",onChange:ae=>fs({wall_material:ae.target.value}),children:[e.jsx("option",{value:"brick",children:"Brick"}),e.jsx("option",{value:"concrete",children:"Concrete Block"}),e.jsx("option",{value:"wood",children:"Wood Frame"}),e.jsx("option",{value:"steel",children:"Steel Frame"}),e.jsx("option",{value:"stone",children:"Stone"})]})]})]}),e.jsx("button",{onClick:pa,className:"delete-room-btn",children:" Delete Room"})]})]}),e.jsxs("div",{className:"editor-status",children:[e.jsx("h4",{children:"Editor Status"}),e.jsxs("div",{className:"status-info",children:[e.jsxs("div",{className:"status-item",children:[e.jsx("span",{className:"status-label",children:"Selected:"}),e.jsx("span",{className:"status-value",children:m!==null?J.rooms[m]?.name||`Room ${m+1}`:"None"})]}),e.jsxs("div",{className:"status-item",children:[e.jsx("span",{className:"status-label",children:"History:"}),e.jsxs("span",{className:"status-value",children:[re+1," / ",I.length]})]}),e.jsxs("div",{className:"status-item",children:[e.jsx("span",{className:"status-label",children:"Can Undo:"}),e.jsx("span",{className:`status-value ${re>0?"enabled":"disabled"}`,children:re>0?"Yes":"No"})]}),e.jsxs("div",{className:"status-item",children:[e.jsx("span",{className:"status-label",children:"Can Redo:"}),e.jsx("span",{className:`status-value ${re<I.length-1?"enabled":"disabled"}`,children:re<I.length-1?"Yes":"No"})]})]})]}),e.jsxs("div",{className:"interaction-help",children:[e.jsx("h4",{children:"How to Use"}),e.jsxs("ul",{children:[e.jsx("li",{children:" Hover over requirements to highlight rooms in plan"}),e.jsx("li",{children:" Click rooms to select them"}),e.jsx("li",{children:" Drag rooms to move them"}),e.jsx("li",{children:" Drag blue handles to resize"}),e.jsx("li",{children:" Drag red handle to rotate (15 snaps)"}),e.jsx("li",{children:" Click overlapping items to cycle selection"}),e.jsx("li",{children:" Use door templates for openings"}),e.jsx("li",{children:" Ctrl+Z to undo, Ctrl+Y to redo"}),e.jsx("li",{children:" Delete key to remove selected room"}),e.jsx("li",{children:" Layout = Visual, Construction = Actual"}),e.jsx("li",{children:" Adjust scale ratio for realistic sizing"})]})]})]}),e.jsxs("div",{className:"canvas-container",children:[e.jsxs("div",{className:"canvas-toolbar",children:[e.jsxs("div",{className:"canvas-info",children:[e.jsxs("span",{children:["Plot: ",J.plot_width,"'  ",J.plot_height,"'"]}),e.jsxs("span",{children:["Floor: ",Gt[wt]||`Floor ${wt}`," (",ja().length," rooms)"]}),e.jsxs("span",{children:["Total: ",J.rooms.length," rooms"]}),e.jsxs("span",{children:["Scale: 1:",J.scale_ratio]})]}),e.jsxs("div",{className:"canvas-controls",children:[e.jsxs("button",{onClick:()=>Rt(!Ft),children:[Ft?" Hide":" Show"," Requirements"]}),e.jsxs("button",{onClick:()=>U(!E),children:[E?" Hide":" Show"," Dimensions"]}),e.jsx("button",{onClick:()=>Lt(),children:" Refresh"})]})]}),e.jsx("div",{className:"canvas-wrapper",children:e.jsx("canvas",{ref:l,className:"plan-canvas",onMouseDown:ot,onMouseMove:qt,onMouseUp:Zt,style:{cursor:j?"grabbing":L?"nw-resize":ie?"crosshair":Dn?"grab":"default"}})})]})]})]})},v6=({layoutRequestId:t=null,onClose:s})=>{const[a,r]=N.useState("list"),[o,l]=N.useState([]),[A,u]=N.useState(!1),[h,p]=N.useState(null),[m,v]=N.useState(null),[b,x]=N.useState(!1),[C,Q]=N.useState({isOpen:!1,type:"danger",title:"",message:"",onConfirm:null}),{notifications:j,removeNotification:B,showSuccess:L,showError:P}=d2(),F=async Ae=>{x(!0);try{const{default:Ce}=await li(async()=>{const{default:k}=await Promise.resolve().then(()=>Gg);return{default:k}},void 0),te=new Ce("l","mm","a4");te.setFontSize(20),te.text(Ae.plan_name,20,20),te.setFontSize(12);let he=40;te.text(`Plot Size: ${Ae.plot_width}'  ${Ae.plot_height}'`,20,he),he+=10,te.text(`Total Area: ${Ae.total_area} sq ft`,20,he),he+=10,te.text(`Number of Rooms: ${Ae.plan_data?.rooms?.length||0}`,20,he),he+=10,te.text(`Status: ${Ae.status.charAt(0).toUpperCase()+Ae.status.slice(1)}`,20,he),he+=20;try{const k=await K(Ae);k&&(te.addPage(),te.setFontSize(14),te.text("Plan Layout:",20,20),te.addImage(k,"PNG",20,30,250,150),he=190)}catch(k){console.warn("Could not add visual design to PDF:",k)}if(Ae.plan_data?.rooms&&Ae.plan_data.rooms.length>0&&(he>150&&(te.addPage(),he=20),te.setFontSize(14),te.text("Room Details:",20,he),he+=10,te.setFontSize(10),Ae.plan_data.rooms.forEach((k,T)=>{const z=`${k.name}: ${k.layout_width}'  ${k.layout_height}' (${(k.layout_width*k.layout_height).toFixed(0)} sq ft)`;te.text(z,20,he),he+=8,he>180&&(te.addPage(),he=20)})),Ae.notes){he+=10,te.setFontSize(14),te.text("Notes:",20,he),he+=10,te.setFontSize(10);const k=te.splitTextToSize(Ae.notes,250);te.text(k,20,he)}te.save(`${Ae.plan_name.replace(/[^a-z0-9]/gi,"_")}_house_plan.pdf`),L("PDF Downloaded","House plan has been downloaded as PDF with visual design")}catch(Ce){console.error("Error generating PDF:",Ce),P("Download Failed","Error generating PDF. Please try again.")}finally{x(!1)}},ee=async Ae=>{x(!0);try{const Ce=await K(Ae);if(Ce){const te=document.createElement("a");te.download=`${Ae.plan_name.replace(/[^a-z0-9]/gi,"_")}_layout.png`,te.href=Ce,te.click(),L("Image Downloaded","House plan layout has been downloaded as PNG")}else P("Download Failed","Could not generate plan visualization")}catch(Ce){console.error("Error generating image:",Ce),P("Download Failed","Error generating image. Please try again.")}finally{x(!1)}},K=async Ae=>new Promise(Ce=>{try{if(!Ae.plan_data?.rooms||Ae.plan_data.rooms.length===0){Ce(null);return}const te=document.createElement("canvas"),he=te.getContext("2d"),k=15,T=40,z=Ae.plot_width*k+T*2,le=Ae.plot_height*k+T*2;te.width=z,te.height=le,he.fillStyle="#ffffff",he.fillRect(0,0,z,le),he.strokeStyle="#2c3e50",he.lineWidth=3,he.strokeRect(T,T,Ae.plot_width*k,Ae.plot_height*k),he.fillStyle="#2c3e50",he.font="bold 14px Arial",he.textAlign="center",he.fillText(`${Ae.plot_width}'`,T+Ae.plot_width*k/2,T-10),he.save(),he.translate(T-15,T+Ae.plot_height*k/2),he.rotate(-Math.PI/2),he.fillText(`${Ae.plot_height}'`,0,0),he.restore(),Ae.plan_data.rooms.forEach(W=>{const de=(W.x||0)+T,me=(W.y||0)+T,Be=(W.layout_width||10)*k,Qe=(W.layout_height||10)*k;he.fillStyle=W.color||"#e3f2fd",he.fillRect(de,me,Be,Qe),he.strokeStyle="#666",he.lineWidth=1,he.strokeRect(de,me,Be,Qe),he.fillStyle="#333",he.font="bold 12px Arial",he.textAlign="center";const ut=de+Be/2,mt=me+Qe/2;he.fillText(W.name,ut,mt-8),he.font="10px Arial",he.fillStyle="#666",he.fillText(`${W.layout_width}'  ${W.layout_height}'`,ut,mt+8)});const X=te.toDataURL("image/png",1);Ce(X)}catch(te){console.error("Error generating visualization:",te),Ce(null)}}),q=Ae=>{try{const Ce={plan_info:{name:Ae.plan_name,plot_width:Ae.plot_width,plot_height:Ae.plot_height,total_area:Ae.total_area,status:Ae.status,created_at:Ae.created_at,updated_at:Ae.updated_at},rooms:Ae.plan_data?.rooms||[],notes:Ae.notes,technical_details:Ae.technical_details||null,request_info:m?{homeowner_name:m.homeowner_name,budget_range:m.budget_range,plot_size:m.plot_size}:null},te=JSON.stringify(Ce,null,2),he=new Blob([te],{type:"application/json"}),k=document.createElement("a");k.href=URL.createObjectURL(he),k.download=`${Ae.plan_name.replace(/[^a-z0-9]/gi,"_")}_data.json`,k.click(),URL.revokeObjectURL(k.href),L("JSON Downloaded","House plan data has been downloaded as JSON")}catch(Ce){console.error("Error generating JSON:",Ce),P("Download Failed","Error generating JSON file. Please try again.")}};N.useEffect(()=>{E(),t&&U()},[t]);const E=async()=>{u(!0);try{const Ae=t?`/buildhub/backend/api/architect/get_house_plans.php?layout_request_id=${t}`:"/buildhub/backend/api/architect/get_house_plans.php",te=await(await fetch(Ae)).json();te.success?l(te.plans):console.error("Failed to load plans:",te.message)}catch(Ae){console.error("Error loading plans:",Ae)}finally{u(!1)}},U=async()=>{try{const Ce=await(await fetch("/buildhub/backend/api/architect/get_assigned_requests.php")).json();if(Ce.success){const te=Ce.assignments?.find(he=>he.layout_request_id===t||he.layout_request?.id===t);te&&v(te)}}catch(Ae){console.error("Error loading request info:",Ae)}},V=()=>{p(null),r("create")},H=Ae=>{p(Ae),r("edit")},I=Ae=>{r("list"),E(),L("Plan Saved","Your house plan has been saved successfully!")},M=async Ae=>{Q({isOpen:!0,type:"warning",title:"Submit House Plan",message:"Are you sure you want to submit this plan to the homeowner? The homeowner will be notified and can review the plan. You can still edit the plan after submission if needed.",onConfirm:()=>re(Ae)})},re=async Ae=>{try{const te=await(await fetch("/buildhub/backend/api/architect/submit_house_plan.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({plan_id:Ae})})).json();te.success?(L("Plan Submitted","Plan submitted successfully! The homeowner has been notified."),E()):P("Submission Failed",te.message||"Failed to submit plan")}catch(Ce){console.error("Error submitting plan:",Ce),P("Submission Error","Error submitting plan. Please try again.")}},G=async Ae=>{Q({isOpen:!0,type:"danger",title:"Delete House Plan",message:"Are you sure you want to delete this plan? This action cannot be undone and the homeowner will be notified.",onConfirm:()=>Z(Ae)})},Z=async Ae=>{try{const te=await(await fetch("/buildhub/backend/api/architect/delete_house_plan.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({plan_id:Ae})})).json();if(te.success){const he=te.data?.homeowner_notified?`Plan "${te.data.plan_name}" deleted successfully! The homeowner has been notified.`:`Plan "${te.data.plan_name}" deleted successfully!`;L("Plan Deleted",he),E()}else P("Delete Failed",te.message||"Failed to delete plan")}catch(Ce){console.error("Error deleting plan:",Ce),P("Delete Error","Error deleting plan. Please try again.")}},fe=Ae=>{const Ce={draft:{class:"status-draft",text:"Draft"},submitted:{class:"status-submitted",text:"Submitted"},approved:{class:"status-approved",text:"Approved"},rejected:{class:"status-rejected",text:"Rejected"}},te=Ce[Ae]||Ce.draft;return e.jsx("span",{className:`status-badge ${te.class}`,children:te.text})};return a==="create"||a==="edit"?e.jsx(y6,{layoutRequestId:t,requestInfo:m,existingPlan:h,onSave:I,onCancel:()=>r("list")}):e.jsxs("div",{className:"house-plan-manager",children:[e.jsx(A2,{notifications:j,onRemove:B}),e.jsx(t2,{isOpen:C.isOpen,onClose:()=>Q({...C,isOpen:!1}),onConfirm:C.onConfirm,title:C.title,message:C.message,type:C.type,confirmText:C.type==="danger"?"Delete":"Submit",cancelText:"Cancel"}),e.jsxs("div",{className:"manager-header",children:[e.jsxs("div",{className:"header-content",children:[e.jsx("h2",{children:"House Plans"}),m&&e.jsxs("div",{className:"request-info",children:[e.jsxs("h3",{children:["For: ",m.homeowner_name]}),e.jsxs("p",{children:[m.plot_size,"  ",m.budget_range]})]})]}),e.jsxs("div",{className:"header-actions",children:[e.jsx("button",{onClick:V,className:"create-btn",children:"Create New Plan"}),s&&e.jsx("button",{onClick:s,className:"close-btn",children:"Close"})]})]}),e.jsx("div",{className:"plans-content",children:A?e.jsx("div",{className:"loading",children:"Loading plans..."}):o.length===0?e.jsxs("div",{className:"empty-state",children:[e.jsx("div",{className:"empty-icon",children:""}),e.jsx("h3",{children:"No Plans Yet"}),e.jsx("p",{children:"Create your first custom house plan for this project"}),e.jsx("button",{onClick:V,className:"create-first-btn",children:"Create First Plan"})]}):e.jsx("div",{className:"plans-grid",children:o.map(Ae=>e.jsxs("div",{className:"plan-card",children:[e.jsxs("div",{className:"plan-header",children:[e.jsx("h4",{children:Ae.plan_name}),fe(Ae.status)]}),e.jsxs("div",{className:"plan-preview",children:[e.jsxs("div",{className:"plan-stats",children:[e.jsxs("div",{className:"stat",children:[e.jsx("span",{className:"stat-label",children:"Plot Size:"}),e.jsxs("span",{className:"stat-value",children:[Ae.plot_width,"'  ",Ae.plot_height,"'"]})]}),e.jsxs("div",{className:"stat",children:[e.jsx("span",{className:"stat-label",children:"Total Area:"}),e.jsxs("span",{className:"stat-value",children:[Ae.total_area," sq ft"]})]}),e.jsxs("div",{className:"stat",children:[e.jsx("span",{className:"stat-label",children:"Rooms:"}),e.jsx("span",{className:"stat-value",children:Ae.plan_data?.rooms?.length||0})]})]}),Ae.notes&&e.jsx("div",{className:"plan-notes",children:e.jsx("p",{children:Ae.notes})})]}),e.jsx("div",{className:"plan-meta",children:e.jsxs("div",{className:"plan-dates",children:[e.jsxs("small",{children:["Created: ",new Date(Ae.created_at).toLocaleDateString()]}),Ae.updated_at!==Ae.created_at&&e.jsxs("small",{children:["Updated: ",new Date(Ae.updated_at).toLocaleDateString()]})]})}),e.jsxs("div",{className:"plan-actions",children:[e.jsxs("div",{className:"download-actions",children:[e.jsxs("button",{onClick:()=>F(Ae),disabled:b,className:"download-btn pdf-btn",title:"Download as PDF with visual design",children:[b?"":""," PDF"]}),e.jsxs("button",{onClick:()=>ee(Ae),disabled:b,className:"download-btn image-btn",title:"Download layout as image",children:[b?"":""," PNG"]}),e.jsxs("button",{onClick:()=>q(Ae),disabled:b,className:"download-btn json-btn",title:"Download as JSON data",children:[b?"":""," JSON"]})]}),Ae.status==="draft"&&e.jsxs("div",{className:"status-actions",children:[e.jsx("button",{onClick:()=>H(Ae),className:"edit-btn",children:"Edit"}),e.jsx("button",{onClick:()=>M(Ae.id),className:"submit-btn",children:"Submit"}),e.jsx("button",{onClick:()=>G(Ae.id),className:"delete-btn",children:"Delete"})]}),Ae.status==="submitted"&&e.jsxs("div",{className:"status-actions",children:[e.jsx("button",{onClick:()=>H(Ae),className:"edit-btn",title:"Edit submitted plan",children:"Edit"}),e.jsx("div",{className:"submitted-info",children:e.jsx("span",{children:"Waiting for homeowner review"})})]}),Ae.status==="approved"&&e.jsxs("div",{className:"status-actions",children:[e.jsx("button",{onClick:()=>H(Ae),className:"edit-btn",title:"Edit approved plan",children:"Edit"}),e.jsx("div",{className:"approved-info",children:e.jsx("span",{children:" Approved by homeowner"})})]}),Ae.status==="rejected"&&e.jsx("div",{className:"status-actions",children:e.jsx("button",{onClick:()=>H(Ae),className:"revise-btn",children:"Revise Plan"})})]})]},Ae.id))})})]})},Km=({requirements:t,compact:s=!1})=>{let a=t;if(typeof t=="string")try{a=JSON.parse(t)}catch{return e.jsx("div",{className:"requirements-display",children:e.jsx("p",{children:t})})}if(!a||typeof a!="object")return null;const r=p=>p.replace(/_/g," ").replace(/\b\w/g,m=>m.toUpperCase()),o=p=>p?e.jsx("div",{className:"floor-rooms",children:Object.entries(p).map(([m,v])=>{const b=m.replace("floor",""),x=b==="1"?"Ground Floor":`Floor ${b}`;return e.jsxs("div",{className:"floor-section",style:{marginBottom:"12px"},children:[e.jsx("h6",{style:{margin:"0 0 8px 0",fontSize:"0.85rem",fontWeight:"600",color:"#374151",borderBottom:"1px solid #e5e7eb",paddingBottom:"4px"},children:x}),e.jsx("div",{className:"room-tags",style:{display:"flex",flexWrap:"wrap",gap:"4px",marginLeft:"8px"},children:Object.entries(v||{}).map(([C,Q])=>!Q||Q===0?null:e.jsxs("span",{style:{display:"inline-block",margin:"2px 4px 2px 0",padding:"3px 6px",backgroundColor:"#dbeafe",color:"#1e40af",borderRadius:"8px",fontSize:"11px",fontWeight:"500"},children:[r(C),": ",Q]},C))})]},m)})}):null,l=()=>e.jsxs("div",{className:"basic-info",style:{marginBottom:"16px"},children:[a.plot_shape&&e.jsxs("p",{style:{margin:"4px 0",fontSize:"0.9rem"},children:[e.jsx("strong",{children:"Plot Shape:"})," ",r(a.plot_shape)]}),a.topography&&e.jsxs("p",{style:{margin:"4px 0",fontSize:"0.9rem"},children:[e.jsx("strong",{children:"Topography:"})," ",r(a.topography)]}),a.num_floors&&e.jsxs("p",{style:{margin:"4px 0",fontSize:"0.9rem"},children:[e.jsx("strong",{children:"Floors:"})," ",a.num_floors]}),a.preferred_style&&e.jsxs("p",{style:{margin:"4px 0",fontSize:"0.9rem"},children:[e.jsx("strong",{children:"Style:"})," ",r(a.preferred_style)]}),a.aesthetic&&e.jsxs("p",{style:{margin:"4px 0",fontSize:"0.9rem"},children:[e.jsx("strong",{children:"Aesthetic:"})," ",r(a.aesthetic)]})]}),A=()=>{if(!a.rooms||typeof a.rooms!="string")return null;const p=a.rooms.split(",").map(m=>m.trim());return e.jsxs("div",{className:"rooms-from-string",style:{marginBottom:"12px"},children:[e.jsx("p",{style:{margin:"0 0 8px 0",fontWeight:"600",fontSize:"0.9rem"},children:" Rooms:"}),e.jsx("div",{style:{marginLeft:"10px"},children:p.map((m,v)=>e.jsxs("span",{style:{display:"inline-block",margin:"2px 4px 2px 0",padding:"3px 6px",backgroundColor:"#dbeafe",color:"#1e40af",borderRadius:"8px",fontSize:"11px",fontWeight:"500"},children:[r(m),": 1"]},v))})]})},u=()=>a.family_needs?e.jsxs("div",{className:"family-needs",style:{marginBottom:"12px"},children:[e.jsx("p",{style:{margin:"0 0 8px 0",fontWeight:"600",fontSize:"0.9rem"},children:" Family Needs:"}),e.jsx("div",{style:{marginLeft:"10px"},children:e.jsx("span",{style:{display:"inline-block",margin:"2px 4px 2px 0",padding:"3px 6px",backgroundColor:"#f3e8ff",color:"#7c3aed",borderRadius:"8px",fontSize:"11px",fontWeight:"500"},children:a.family_needs})})]}):null,h=()=>a.notes?e.jsxs("div",{className:"notes",style:{marginBottom:"12px"},children:[e.jsx("p",{style:{margin:"0 0 8px 0",fontWeight:"600",fontSize:"0.9rem"},children:" Additional Notes:"}),e.jsx("p",{style:{margin:"0",fontSize:"0.85rem",color:"#6b7280",fontStyle:"italic",marginLeft:"10px"},children:a.notes})]}):null;return s?e.jsxs("div",{className:"requirements-display compact",style:{fontSize:"0.9rem",color:"#666",marginLeft:"10px"},children:[a.floor_rooms&&o(a.floor_rooms),!a.floor_rooms&&A(),l(),u(),h()]}):e.jsxs("div",{className:"requirements-display",style:{padding:"16px",backgroundColor:"#f8fafc",borderRadius:"8px",border:"1px solid #e2e8f0"},children:[e.jsx("h5",{style:{margin:"0 0 12px 0",color:"#374151"},children:"Requirements:"}),a.floor_rooms&&o(a.floor_rooms),!a.floor_rooms&&A(),l(),u(),h()]})},Lb=()=>{const t=Wr(),[s,a]=N.useState("dashboard"),[r,o]=N.useState(null),[l,A]=N.useState([]),[u,h]=N.useState([]),[p,m]=N.useState(!1),[v,b]=N.useState(""),[x,C]=N.useState(""),Q=Ni(),[j,B]=N.useState(!1),[L,P]=N.useState(0),[F,ee]=N.useState(!1),[K,q]=N.useState(!1),[E,U]=N.useState({specialization:"",experience_years:"",email:"",phone:"",city:"",avg_rating:null,review_count:0}),[V,H]=N.useState(!1),[I,M]=N.useState(!1),[re,G]=N.useState(!1),[Z,fe]=N.useState([]),[Ae,Ce]=N.useState(!1),[te,he]=N.useState(""),[k,T]=N.useState(!1),[z,le]=N.useState([]),[X,W]=N.useState(!1),[de,me]=N.useState(0),[Be,Qe]=N.useState({}),[ut,mt]=N.useState({open:!1,image:null,title:""}),[Ve,je]=N.useState({}),[Ft,Rt]=N.useState({title:"",layout_type:"",bedrooms:"",bathrooms:"",area:"",price_range:"",view_price:0,description:"",image:null,design_file:null,technical_details:{}}),[at,Xe]=N.useState({request_id:"",homeowner_id:"",design_title:"",description:"",technical_details:{},files:[]}),[pt,xe]=N.useState(!1),[et,Oe]=N.useState(null),[Bt,xt]=N.useState(!1),[dt,Ut]=N.useState(null),[wt,bt]=N.useState(!1);N.useEffect(()=>{const ie=JSON.parse(sessionStorage.getItem("user")||"{}");o(ie),li(async()=>{const{preventCache:Se,verifyServerSession:ot}=await import("./session-DODIVVdM.js");return{preventCache:Se,verifyServerSession:ot}},[]).then(({preventCache:Se,verifyServerSession:ot})=>{Se(),(async()=>{const qt=await ot();if(!ie.id||ie.role!=="architect"||!qt){sessionStorage.removeItem("user"),localStorage.removeItem("bh_user"),t("/login",{replace:!0});return}Ht(),$t(),$e(),_e()})()})},[]);const Ht=async()=>{m(!0);try{const Se=await(await fetch("/buildhub/backend/api/architect/get_assigned_requests.php")).json();if(Se.success){const Zt=(Se.assignments||[]).filter(ys=>ys.assignment_status==="accepted").map(ys=>({...ys.layout_request,assignment_id:ys.assignment_id,assignment_status:ys.assignment_status,assigned_at:ys.assigned_at,assignment_message:ys.message,homeowner_name:ys.homeowner.name,homeowner_email:ys.homeowner.email,homeowner_id:ys.homeowner.id}));A(Zt)}}catch(ie){console.error("Error fetching requests:",ie)}finally{m(!1)}},_t=async()=>{m(!0);try{await Promise.all([Ht(),$t(),$e(),_e()]),Q.success("Dashboard refreshed successfully")}catch(ie){console.error("Error refreshing dashboard:",ie),Q.error("Failed to refresh dashboard")}finally{m(!1)}},Gt=ie=>{const Se=new is;let ot=20;Se.setFontSize(18),Se.setFont(void 0,"bold"),Se.text("Project Details",105,ot,{align:"center"}),ot+=10,Se.setFontSize(12),Se.setFont(void 0,"normal"),Se.text(`Project ID: ${ie.id}`,20,ot),ot+=8,Se.setFontSize(14),Se.setFont(void 0,"bold"),Se.text("Client Information",20,ot),ot+=8,Se.setFontSize(11),Se.setFont(void 0,"normal"),Se.text(`Name: ${ie.homeowner_name||"Not specified"}`,20,ot),ot+=7,Se.text(`Email: ${ie.homeowner_email||"Not specified"}`,20,ot),ot+=7,Se.text(`Location: ${ie.location||"Not specified"}`,20,ot),ot+=10,Se.setFontSize(14),Se.setFont(void 0,"bold"),Se.text("Project Specifications",20,ot),ot+=8,Se.setFontSize(11),Se.setFont(void 0,"normal"),Se.text(`Plot Size: ${ie.plot_size||"Not specified"}`,20,ot),ot+=7,Se.text(`Building Size: ${ie.building_size||"Not specified"}`,20,ot),ot+=7,Se.text(`Budget Range: ${ie.budget_range||"Not specified"}`,20,ot),ot+=7,Se.text(`Number of Floors: ${ie.num_floors||"Not specified"}`,20,ot),ot+=7,Se.text(`Timeline: ${ie.timeline||"Not specified"}`,20,ot),ot+=10;const qt=ie.floor_rooms||ie.requirements_parsed?.floor_rooms;qt&&(Array.isArray(qt)?qt.length>0:Object.keys(qt||{}).length>0)&&(Se.setFontSize(14),Se.setFont(void 0,"bold"),Se.text("Floor-wise Room Distribution",20,ot),ot+=8,Se.setFontSize(11),Se.setFont(void 0,"normal"),(Array.isArray(qt)?qt:Object.entries(qt)).forEach((vs,as)=>{let ps,fs;if(Array.isArray(qt))ps=vs.rooms,fs=parseInt(vs.floor||as+1);else{const[pa,Ps]=vs;ps=Ps,fs=parseInt(pa.replace("floor",""))}Se.setFontSize(12),Se.setFont(void 0,"bold"),Se.text(fs===1?"Ground Floor":`Floor ${fs}`,25,ot),ot+=7,Se.setFontSize(10),Se.setFont(void 0,"normal"),Object.entries(ps||{}).forEach(([pa,Ps])=>{const ca=typeof Ps=="number"?Ps:Ps.length||0;ca>0&&(Se.text(`   ${pa.replace(/_/g," ").replace(/\b\w/g,In=>In.toUpperCase())}: ${ca}`,30,ot),ot+=6)}),ot+=4}),ot+=5),ie.requirements_parsed&&(Se.setFontSize(14),Se.setFont(void 0,"bold"),Se.text("Additional Requirements",20,ot),ot+=8,Se.setFontSize(11),Se.setFont(void 0,"normal"),ie.requirements_parsed.plot_shape&&(Se.text(`Plot Shape: ${ie.requirements_parsed.plot_shape}`,20,ot),ot+=7),ie.requirements_parsed.topography&&(Se.text(`Topography: ${ie.requirements_parsed.topography}`,20,ot),ot+=7),ie.requirements_parsed.aesthetic&&(Se.text(`Style: ${ie.requirements_parsed.aesthetic}`,20,ot),ot+=7),ie.requirements_parsed.site_considerations&&(Se.text(`Site Considerations: ${ie.requirements_parsed.site_considerations}`,20,ot),ot+=7)),ot=280,Se.setFontSize(9),Se.setFont(void 0,"italic"),Se.text(`Generated on ${new Date().toLocaleString()}`,105,ot,{align:"center"});const Zt=`Project_${ie.id}_${ie.homeowner_name?.replace(/\s+/g,"_")||"Details"}.pdf`;Se.save(Zt),Q.success("PDF downloaded successfully")},$t=async()=>{try{const Se=await(await fetch("/buildhub/backend/api/architect/get_my_designs.php")).json();Se.success&&h(Se.designs||[])}catch(ie){console.error("Error fetching designs:",ie)}};Array.isArray(l)&&l.length;const J=ie=>String(ie||"").toLowerCase(),tt=Array.isArray(l)?l.filter(ie=>{const Se=J(ie.status),ot=Se==="pending"||Se==="awaiting"||Se==="in_review"||Se==="processing",qt=(Number(ie.accepted_count)||0)===0&&(Number(ie.rejected_count)||0)===0;return ot||qt}).length:0,Qt=Array.isArray(l)?l.filter(ie=>{const Se=J(ie.status),ot=Se==="accepted"||Se==="approved"||Se==="finalized"||Se==="completed",qt=(Number(ie.accepted_count)||0)>0;return ot||qt}).length:0,Et=Array.isArray(u)?u.length:0,Jt=Array.isArray(z)?z.length:0;N.useEffect(()=>{let ie=!0;const Se=async()=>{try{const Zt=await(await fetch("/buildhub/backend/api/architect/get_assigned_requests.php")).json().catch(()=>({}));if(ie&&Zt?.success){const vs=(Zt.assignments||[]).map(as=>({...as.layout_request,assignment_id:as.assignment_id,assignment_status:as.assignment_status,assigned_at:as.assigned_at,assignment_message:as.message,homeowner_name:as.homeowner.name,homeowner_email:as.homeowner.email,homeowner_id:as.homeowner.id}));A(vs)}}catch{}try{const Zt=await(await fetch("/buildhub/backend/api/architect/get_layout_requests.php")).json().catch(()=>({}));ie&&Zt?.success&&setAvailableRequests(Array.isArray(Zt.requests)?Zt.requests:[])}catch{}try{const Zt=await(await fetch("/buildhub/backend/api/architect/get_my_designs.php")).json().catch(()=>({}));ie&&Zt?.success&&h(Array.isArray(Zt.designs)?Zt.designs:[])}catch{}try{const Zt=await(await fetch("/buildhub/backend/api/architect/get_my_layouts.php")).json().catch(()=>({}));ie&&Zt?.success&&le(Array.isArray(Zt.layouts)?Zt.layouts:[])}catch{}};Se();const ot=setInterval(Se,6e4);return()=>{ie=!1,clearInterval(ot)}},[]);const os=async ie=>{try{const ot=await(await fetch("/buildhub/backend/api/architect/finalize_design.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({design_id:ie})})).json();ot.success?(Q.success("Design finalized"),h(qt=>qt.map(Zt=>Zt.id===ie?{...Zt,status:"finalized"}:Zt))):Q.error(ot.message||"Failed to finalize")}catch{Q.error("Network error while finalizing")}},_e=async()=>{H(!0);try{const Se=await(await fetch("/buildhub/backend/api/architect/get_my_profile.php")).json();if(Se.success){const ot=Se.profile||{};if(U({specialization:ot.specialization||"",experience_years:ot.experience_years??"",email:ot.email||"",phone:ot.phone||"",city:ot.city||"",avg_rating:ot.avg_rating??null,review_count:ot.review_count||0}),Se.profile?.id||sessionStorage.getItem("user")){const qt=JSON.parse(sessionStorage.getItem("user")||"{}"),Zt=Se.profile?.id||qt.id;if(Zt){Ce(!0),he("");try{const vs=await(await fetch(`/buildhub/backend/api/reviews/get_reviews.php?architect_id=${Zt}`)).json();vs.success?(fe(Array.isArray(vs.reviews)?vs.reviews:[]),typeof vs.avg_rating=="number"&&U(as=>({...as,avg_rating:vs.avg_rating})),typeof vs.review_count=="number"&&U(as=>({...as,review_count:vs.review_count}))):he(vs.message||"Failed to load reviews")}catch{he("Network error while loading reviews")}finally{Ce(!1)}}}}}catch{}finally{H(!1)}},St=async ie=>{ie?.preventDefault?.(),M(!0);try{const Se={specialization:E.specialization,experience_years:E.experience_years===""?null:Number(E.experience_years),phone:E.phone,city:E.city},qt=await(await fetch("/buildhub/backend/api/architect/update_my_profile.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Se)})).json();qt.success?(C("Profile updated"),_e()):b(qt.message||"Failed to update profile")}catch{b("Error updating profile")}finally{M(!1)}},$e=async()=>{try{const Se=await(await fetch("/buildhub/backend/api/architect/get_my_layouts.php")).json();Se.success&&le(Se.layouts||[])}catch(ie){console.error("Error fetching my layouts",ie)}},kt=async ie=>{ie&&ie.preventDefault();const Se=new FormData;Object.entries(Ft).forEach(([ot,qt])=>{qt!==null&&qt!==""&&Se.append(ot,qt)});try{const qt=await(await fetch("/buildhub/backend/api/architect/create_layout_library_item.php",{method:"POST",body:Se})).json();qt.success?(C("Layout added to library"),W(!1),me(0),Rt({title:"",layout_type:"",bedrooms:"",bathrooms:"",area:"",price_range:"",description:"",image:null,design_file:null,technical_details:{}}),$e()):b(qt.message||"Failed to add layout")}catch{b("Error adding layout")}},[Ze,oe]=N.useState(null),we=ie=>{oe({...ie,image:null,design_file:null})},Ee=()=>oe(null),Re=async ie=>{if(ie.preventDefault(),!Ze)return;const Se=new FormData;Se.append("id",Ze.id),["title","layout_type","bedrooms","bathrooms","area","price_range","description","status","view_price"].forEach(ot=>{Ze[ot]!==void 0&&Ze[ot]!==null&&Ze[ot]!==""&&Se.append(ot,Ze[ot])}),Ze.image&&Se.append("image",Ze.image),Ze.design_file&&Se.append("design_file",Ze.design_file);try{const qt=await(await fetch("/buildhub/backend/api/architect/update_layout_library_item.php",{method:"POST",body:Se})).json();qt.success?(C("Layout updated"),oe(null),$e(),setTimeout(()=>C(""),3e3)):(b(qt.message||"Failed to update layout"),setTimeout(()=>b(""),3e3))}catch{b("Error updating layout"),setTimeout(()=>b(""),3e3)}},We=async ie=>{if(console.log("=== TOGGLE LAYOUT STATUS DEBUG ==="),console.log("Item:",ie),console.log("Item ID:",ie?.id,"Type:",typeof ie?.id),!ie){b("Invalid layout item"),setTimeout(()=>b(""),3e3);return}const Se=ie.id;if(console.log("Layout ID:",Se),Se==null){console.error("Layout ID is missing or invalid"),b("Layout ID is missing"),setTimeout(()=>b(""),3e3);return}const ot=ie.status==="active"?"inactive":"active",qt={id:Number(Se),status:ot};console.log("Payload:",qt);try{const ys=await(await fetch("/buildhub/backend/api/architect/update_layout_library_item.php",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(qt)})).json();console.log("Response:",ys),ys.success?(le(vs=>vs.map(as=>as.id===Se?{...as,status:ot}:as)),C(`Layout ${ot==="active"?"activated":"deactivated"} successfully`),setTimeout(()=>C(""),3e3)):(b(ys.message||"Failed to change status"),setTimeout(()=>b(""),3e3))}catch{b("Error changing status"),setTimeout(()=>b(""),3e3)}},Lt=async(ie,Se)=>{try{m(!0);const qt=await(await fetch("/buildhub/backend/api/architect/respond_assignment.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({assignment_id:ie,action:Se})})).json();qt.success?(Q.success(`Assignment ${Se}ed successfully`),Ht()):Q.error(qt.message||`Failed to ${Se} assignment`)}catch(ot){console.error("Error responding to assignment:",ot),Q.error("Network error occurred")}finally{m(!1)}},Vt=async ie=>{if(dt){bt(!0);try{const Se={plan_name:`${dt.homeowner_name||"Client"} House Plan`,plot_width:parseFloat(dt.plot_size)||100,plot_height:parseFloat(dt.plot_size)||100,rooms:[],scale_ratio:1.2,total_layout_area:0,total_construction_area:0,floors:{total_floors:dt.floors||1,current_floor:1,floor_names:{1:"Ground Floor"}}};console.log("Creating house plan for upload design:",{layout_request_id:dt.id,plan_data:Se});const ot={layout_request_id:dt.id,plan_name:Se.plan_name,plot_width:Se.plot_width,plot_height:Se.plot_height,plan_data:Se,notes:"Upload Design with Technical Details"},qt=await fetch("/buildhub/backend/api/architect/create_house_plan.php",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"include",body:JSON.stringify(ot)});if(!qt.ok)throw new Error(`Failed to create house plan: HTTP ${qt.status}`);const Zt=await qt.json();if(!Zt.success)throw new Error(Zt.message||"Failed to create house plan");const ys=Zt.plan_id;console.log("House plan created successfully with ID:",ys);const vs={plan_id:ys,plan_data:Se,technical_details:ie};console.log("Submitting plan with technical details:",vs);const as=await fetch("/buildhub/backend/api/architect/submit_house_plan_with_details.php",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"include",body:JSON.stringify(vs)});if(!as.ok)throw new Error(`Failed to submit plan: HTTP ${as.status}`);const ps=await as.json();if(ps.success)xt(!1),Ut(null),Q.success("Design Uploaded Successfully!","Your design with technical details has been submitted to the homeowner for review."),Ht();else throw new Error(ps.message||"Upload failed")}catch(Se){console.error("Error uploading design:",Se),Q.error("Upload Failed",`Failed to upload design: ${Se.message}. Please try again.`)}finally{bt(!1)}}},[Ot,ss]=N.useState(null),xs=ie=>ss(ie),Hs=()=>ss(null),Ms=ie=>/\.(png|jpe?g|gif|webp|bmp)$/i.test(ie||""),la=ie=>/\.(pdf)$/i.test(ie||""),Zs=()=>{if(!Ot)return null;const ie=Ot.image_url||null,Se=Ot.design_file_url||null,ot=(r?.first_name||"")+" "+(r?.last_name||""),qt=r?.email||"",Zt=Se&&(Ms(Se)||la(Se));return e.jsx("div",{className:"form-modal",onClick:Hs,children:e.jsxs("div",{className:"form-content",style:{maxWidth:"90vw",width:"1100px"},onClick:ys=>ys.stopPropagation(),children:[e.jsxs("div",{className:"form-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{children:[e.jsx("h3",{style:{margin:0},children:Ot.title||"Preview"}),Ot.layout_type&&e.jsx("p",{style:{margin:"4px 0 0 0",color:"#64748b"},children:Ot.layout_type})]}),e.jsx("button",{className:"btn btn-secondary",onClick:Hs,children:"Close"})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1.2fr .8fr",gap:"16px"},children:[e.jsx("div",{style:{border:"1px solid #e5e7eb",borderRadius:10,overflow:"hidden",background:"#000"},children:Zt?Ms(Se)?e.jsx("img",{src:Se,alt:"Layout",style:{width:"100%",height:"80vh",objectFit:"contain",background:"#000"}}):e.jsx("iframe",{src:Se,title:"Layout PDF",style:{width:"100%",height:"80vh",border:"none",background:"#fff"}}):ie?e.jsx("img",{src:ie,alt:"Preview",style:{width:"100%",height:"80vh",objectFit:"contain"}}):e.jsx("div",{style:{padding:24},children:"No preview available. You can download the layout file from the card."})}),e.jsxs("div",{children:[ie&&e.jsx("div",{style:{border:"1px solid #e5e7eb",borderRadius:10,overflow:"hidden",background:"#fff"},children:e.jsx("img",{src:ie,alt:"Preview",style:{width:"100%",height:260,objectFit:"cover"}})}),e.jsxs("div",{className:"drawer-section",style:{marginTop:16},children:[e.jsx("h4",{children:"Details"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8},children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Bedrooms:"})," ",Ot.bedrooms??"-"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Bathrooms:"})," ",Ot.bathrooms??"-"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Area:"})," ",Ot.area?`${Ot.area} sq ft`:"-"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Price:"})," ",Ot.price_range??"-"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Architect:"})," ",ot.trim()||"You"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Email:"})," ",qt||"-"]})]}),Ot.description&&e.jsx("p",{style:{marginTop:10,whiteSpace:"pre-wrap"},children:Ot.description}),Ot.technical_details&&e.jsxs("div",{style:{marginTop:"16px",padding:"12px",background:"#f8f9fa",borderRadius:"6px",border:"1px solid #e9ecef"},children:[e.jsx("h5",{style:{margin:"0 0 8px 0",fontSize:"0.9rem",color:"#495057"},children:"Technical Specifications"}),e.jsx(Ho,{technicalDetails:Ot.technical_details,compact:!0})]}),Se&&!Zt&&e.jsx("a",{className:"btn btn-primary",href:Se,target:"_blank",rel:"noreferrer",style:{marginTop:10,display:"inline-block"},children:"Download Layout"})]})]})]})]})})},Sa=async()=>{try{await fetch("/buildhub/backend/api/logout.php",{method:"POST",credentials:"include"})}catch{}localStorage.removeItem("bh_user"),sessionStorage.removeItem("user"),t("/login",{replace:!0})},da=async ie=>{if(ie.preventDefault(),at.files.length===0){b("Please select at least one file");return}try{m(!0);const Se=new FormData;at.request_id&&Se.append("request_id",at.request_id),at.homeowner_id&&Se.append("homeowner_id",at.homeowner_id),at.design_title&&Se.append("design_title",at.design_title),at.description&&Se.append("description",at.description),at.technical_details&&Object.keys(at.technical_details).length>0&&Se.append("technical_details",JSON.stringify(at.technical_details)),typeof at.view_price<"u"&&at.view_price!==null&&String(at.view_price).trim()!==""&&Se.append("view_price",String(at.view_price));for(let Zt=0;Zt<at.files.length;Zt++)Se.append("design_files[]",at.files[Zt]);const qt=await(await fetch("/buildhub/backend/api/architect/upload_design.php",{method:"POST",body:Se})).json();qt.success?(C("Design uploaded successfully!"),B(!1),Xe({request_id:"",homeowner_id:"",design_title:"",description:"",technical_details:{},files:[]}),P(0),$t()):b("Failed to upload design: "+qt.message)}catch{b("Error uploading design")}finally{m(!1)}},xa=()=>e.jsxs("div",{children:[e.jsx("div",{className:"main-header",children:e.jsxs("div",{className:"header-content",children:[e.jsxs("div",{children:[e.jsx("h1",{children:"Dashboard"}),e.jsx("p",{children:"Manage your architectural designs and connect with clients"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[e.jsx("button",{className:"btn btn-secondary",onClick:_t,disabled:p,style:{display:"flex",alignItems:"center",gap:"6px"},children:p?"Refreshing...":" Refresh Dashboard"}),e.jsx("div",{className:"header-profile",children:e.jsx(p6,{user:r,position:"bottom-right",onProfileClick:()=>a("profile"),onLogout:Sa})})]})]})}),e.jsxs("div",{className:"stats-grid",children:[e.jsx("div",{className:"stat-card w-purple",children:e.jsxs("div",{className:"stat-content",children:[e.jsx("div",{className:"stat-icon requests",children:""}),e.jsxs("div",{className:"stat-info",children:[e.jsx("h3",{children:l.length}),e.jsx("p",{children:"Available Requests"})]})]})}),e.jsx("div",{className:"stat-card w-blue",children:e.jsxs("div",{className:"stat-content",children:[e.jsx("div",{className:"stat-icon designs",children:""}),e.jsxs("div",{className:"stat-info",children:[e.jsx("h3",{children:u.length}),e.jsx("p",{children:"Designs Created"})]})]})}),e.jsx("div",{className:"stat-card w-green",children:e.jsxs("div",{className:"stat-content",children:[e.jsx("div",{className:"stat-icon approved",children:""}),e.jsxs("div",{className:"stat-info",children:[e.jsx("h3",{children:u.filter(ie=>ie.status==="approved").length}),e.jsx("p",{children:"Approved Designs"})]})]})}),e.jsx("div",{className:"stat-card w-orange",children:e.jsxs("div",{className:"stat-content",children:[e.jsx("div",{className:"stat-icon progress",children:""}),e.jsxs("div",{className:"stat-info",children:[e.jsx("h3",{children:u.filter(ie=>ie.status==="in-progress").length}),e.jsx("p",{children:"In Progress"})]})]})})]}),e.jsxs("div",{className:"section-card",children:[e.jsxs("div",{className:"section-header",children:[e.jsx("h2",{children:"Quick Actions"}),e.jsx("p",{children:"Get started with your architectural projects"})]}),e.jsx("div",{className:"section-content",children:e.jsxs("div",{className:"quick-actions float-grid stagger-children",children:[e.jsxs("button",{className:"float-rect w-blue",onClick:()=>a("requests"),children:[e.jsx("div",{className:"fr-icon",children:""}),e.jsx("div",{className:"fr-title",children:"Upload New Design"}),e.jsx("div",{className:"fr-sub",children:"Create and submit architectural designs for client requests"})]}),e.jsxs("button",{className:"float-rect w-orange",onClick:()=>a("requests"),children:[e.jsx("div",{className:"fr-icon",children:""}),e.jsx("div",{className:"fr-title",children:"Browse Requests"}),e.jsx("div",{className:"fr-sub",children:"View available client requests waiting for designs"})]}),e.jsxs("button",{className:"float-rect w-purple",onClick:()=>a("designs"),children:[e.jsx("div",{className:"fr-icon",children:""}),e.jsx("div",{className:"fr-title",children:"My Portfolio"}),e.jsx("div",{className:"fr-sub",children:"Manage your submitted designs and track their status"})]})]})})]}),e.jsxs("div",{className:"section-card",children:[e.jsxs("div",{className:"section-header",children:[e.jsx("h2",{children:"Recent Activity"}),e.jsx("p",{children:"Latest updates on your designs and client requests"})]}),e.jsx("div",{className:"section-content",children:e.jsxs("div",{className:"item-list",children:[u.slice(0,5).map(ie=>e.jsxs("div",{className:"list-item",children:[e.jsx("div",{className:"item-icon",children:ie.status==="approved"?"":ie.status==="rejected"?"":""}),e.jsxs("div",{className:"item-content",children:[e.jsx("h4",{className:"item-title",children:ie.design_title}),e.jsxs("p",{className:"item-subtitle",children:["Client: ",ie.client_name]}),e.jsxs("p",{className:"item-meta",children:["Submitted: ",new Date(ie.created_at).toLocaleDateString()]})]}),e.jsxs("div",{className:"item-actions",style:{display:"flex",alignItems:"center",gap:8},children:[e.jsx("span",{className:`status-badge ${vp(ie.status)}`,children:du(ie.status)}),ie.status!=="finalized"&&e.jsx("button",{className:"btn btn-secondary",onClick:()=>os(ie.id),children:"Finalize"})]})]},ie.id)),u.length===0&&e.jsxs("div",{className:"empty-state",children:[e.jsx("div",{className:"empty-icon",children:""}),e.jsx("h3",{children:"No Designs Yet"}),e.jsx("p",{children:"Start by creating your first architectural design!"}),e.jsx("button",{className:"btn btn-primary",onClick:()=>B(!0),children:"Upload Design"})]})]})})]})]}),ha=()=>e.jsxs("div",{children:[e.jsx("div",{className:"main-header",children:e.jsxs("div",{className:"header-content",children:[e.jsxs("div",{children:[e.jsx("h1",{children:"Project Assignments"}),e.jsx("p",{children:"Homeowner requests assigned specifically to you"})]}),e.jsx("button",{className:"btn btn-primary",onClick:()=>t("/architect/upload"),children:"+ Upload Design"})]})}),e.jsxs("div",{className:"section-card",children:[e.jsxs("div",{className:"section-header",children:[e.jsxs("div",{children:[e.jsx("h2",{children:"Your Assigned Projects"}),e.jsx("p",{children:"Accept or decline project assignments from homeowners"})]}),e.jsx("button",{className:"btn btn-secondary",onClick:_t,disabled:p,style:{marginLeft:"auto"},children:p?"Refreshing...":" Refresh"})]}),e.jsx("div",{className:"section-content",children:p?e.jsx("div",{className:"loading",children:"Loading assignments..."}):l.length===0?e.jsxs("div",{className:"empty-state",children:[e.jsx("div",{className:"empty-icon",children:""}),e.jsx("h3",{children:"No Accepted Projects"}),e.jsx("p",{children:"You haven't accepted any project assignments yet. Check available requests to accept new projects."})]}):e.jsx("div",{className:"item-list",children:l.map(ie=>e.jsxs("div",{className:"list-item",children:[e.jsx("div",{className:"item-image",children:ie.site_images&&Array.isArray(ie.site_images)&&ie.site_images.length>0?e.jsx("img",{src:typeof ie.site_images[0]=="string"?ie.site_images[0]:ie.site_images[0]?.url,alt:"Site",style:{width:48,height:48,objectFit:"cover",borderRadius:6}}):ie.reference_images&&Array.isArray(ie.reference_images)&&ie.reference_images.length>0?e.jsx("img",{src:typeof ie.reference_images[0]=="string"?ie.reference_images[0]:ie.reference_images[0]?.url,alt:"Reference",style:{width:48,height:48,objectFit:"cover",borderRadius:6}}):""}),e.jsxs("div",{className:"item-content",children:[e.jsxs("h4",{className:"item-title",children:[ie.homeowner_name,"'s Project"]}),e.jsxs("p",{className:"item-subtitle",children:[ie.plot_size,"  Budget: ",ie.budget_range]}),e.jsxs("div",{className:"item-details",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Location:"})," ",ie.location||"Not specified"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Timeline:"})," ",ie.timeline||"Not specified"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Floors:"})," ",ie.num_floors||"Not specified"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Style:"})," ",ie.preferred_style||"Not specified"]}),ie.assignment_message&&e.jsxs("p",{children:[e.jsx("strong",{children:"Message:"})," ",ie.assignment_message]}),ie.requirements_parsed&&e.jsxs("div",{className:"requirements-summary",children:[e.jsx("p",{children:e.jsx("strong",{children:"Requirements:"})}),e.jsx(Km,{requirements:ie.requirements_parsed,compact:!0})]})]}),e.jsxs("p",{className:"item-meta",children:["Assigned: ",new Date(ie.assigned_at).toLocaleDateString(),"  Contact: ",ie.homeowner_email]})]}),e.jsxs("div",{className:"item-actions",children:[e.jsx("span",{className:"status-badge accepted",children:"Accepted Project"}),e.jsxs("div",{className:"action-buttons",children:[e.jsx("button",{className:"btn btn-primary",onClick:()=>{Oe(ie.id),a("house-plans"),xe(!0)},children:"Create Design"}),e.jsx("button",{className:"btn btn-success",onClick:()=>{Ut(ie),xt(!0)},title:"Upload design with technical details",children:" Upload Design"}),e.jsx("button",{className:"btn btn-danger btn-sm",onClick:()=>Lt(ie.assignment_id,"reject"),disabled:p,title:"Cancel this assignment",children:"Remove"})]}),e.jsx("button",{className:"btn btn-secondary btn-sm",onClick:()=>Qe(Se=>({...Se,[ie.id]:!Se[ie.id]})),children:Be[ie.id]?"Hide Details":"View Images & Details"}),e.jsx("button",{className:"btn btn-success btn-sm",onClick:()=>Gt(ie),title:"Download project details as PDF",style:{display:"flex",alignItems:"center",gap:"4px"},children:" Download PDF"})]}),Be[ie.id]&&e.jsxs("div",{className:"expanded-details",style:{marginTop:"20px",padding:"24px",background:"linear-gradient(135deg, #f8fafc 0%, #ffffff 100%)",borderRadius:"12px",border:"1px solid #e2e8f0",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.1)",position:"relative",overflow:"visible",width:"100%",minHeight:"auto",zIndex:1},children:[e.jsxs("div",{className:"project-overview",style:{marginBottom:"24px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"16px",padding:"0 0 12px 0",borderBottom:"1px solid #e2e8f0"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[e.jsx("span",{style:{fontSize:"20px",marginRight:"8px"},children:""}),e.jsx("h4",{style:{margin:0,color:"#1f2937",fontSize:"18px",fontWeight:"600"},children:"Project Overview"})]}),e.jsxs("div",{style:{display:"flex",gap:"8px",fontSize:"12px",color:"#6b7280"},children:[e.jsxs("span",{style:{background:"#e0f2fe",color:"#0369a1",padding:"2px 8px",borderRadius:"12px",fontWeight:"500"},children:[ie.num_floors||"N/A"," Floors"]}),e.jsx("span",{style:{background:"#f0fdf4",color:"#166534",padding:"2px 8px",borderRadius:"12px",fontWeight:"500"},children:ie.preferred_style||"Any Style"})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(220px, 1fr))",gap:"16px",marginBottom:"20px"},children:[e.jsxs("div",{style:{background:"white",padding:"16px 20px",borderRadius:"10px",border:"1px solid #e5e7eb",boxShadow:"0 2px 6px rgba(0, 0, 0, 0.08)",transition:"all 0.2s ease",minHeight:"80px",display:"flex",flexDirection:"column",justifyContent:"space-between"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:"8px"},children:[e.jsx("span",{style:{fontSize:"16px",marginRight:"8px",color:"#3b82f6"},children:""}),e.jsx("span",{style:{fontSize:"14px",fontWeight:"600",color:"#374151"},children:"Plot Size"})]}),e.jsx("div",{style:{fontSize:"16px",fontWeight:"500",color:"#1f2937"},children:ie.plot_size||"Not specified"})]}),e.jsxs("div",{style:{background:"white",padding:"16px 20px",borderRadius:"10px",border:"1px solid #e5e7eb",boxShadow:"0 2px 6px rgba(0, 0, 0, 0.08)",transition:"all 0.2s ease",minHeight:"80px",display:"flex",flexDirection:"column",justifyContent:"space-between"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:"8px"},children:[e.jsx("span",{style:{fontSize:"16px",marginRight:"8px",color:"#10b981"},children:""}),e.jsx("span",{style:{fontSize:"14px",fontWeight:"600",color:"#374151"},children:"Budget Range"})]}),e.jsx("div",{style:{fontSize:"16px",fontWeight:"500",color:"#1f2937"},children:ie.budget_range||"Not specified"})]}),e.jsxs("div",{style:{background:"white",padding:"16px 20px",borderRadius:"10px",border:"1px solid #e5e7eb",boxShadow:"0 2px 6px rgba(0, 0, 0, 0.08)",transition:"all 0.2s ease",minHeight:"80px",display:"flex",flexDirection:"column",justifyContent:"space-between"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:"8px"},children:[e.jsx("span",{style:{fontSize:"16px",marginRight:"8px",color:"#f59e0b"},children:""}),e.jsx("span",{style:{fontSize:"14px",fontWeight:"600",color:"#374151"},children:"Timeline"})]}),e.jsx("div",{style:{fontSize:"16px",fontWeight:"500",color:"#1f2937"},children:ie.timeline||"Not specified"})]}),e.jsxs("div",{style:{background:"white",padding:"16px 20px",borderRadius:"10px",border:"1px solid #e5e7eb",boxShadow:"0 2px 6px rgba(0, 0, 0, 0.08)",transition:"all 0.2s ease",minHeight:"80px",display:"flex",flexDirection:"column",justifyContent:"space-between"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:"8px"},children:[e.jsx("span",{style:{fontSize:"16px",marginRight:"8px",color:"#8b5cf6"},children:""}),e.jsx("span",{style:{fontSize:"14px",fontWeight:"600",color:"#374151"},children:"Location"})]}),e.jsx("div",{style:{fontSize:"16px",fontWeight:"500",color:"#1f2937"},children:ie.location||"Not specified"})]})]}),e.jsxs("div",{style:{display:"flex",gap:"12px",flexWrap:"wrap",alignItems:"center"},children:[ie.orientation&&e.jsxs("div",{style:{background:"linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%)",padding:"8px 12px",borderRadius:"20px",border:"1px solid #bae6fd",display:"flex",alignItems:"center",gap:"6px",fontSize:"14px",fontWeight:"500",color:"#0369a1"},children:[e.jsx("span",{children:""}),e.jsxs("span",{children:["Orientation: ",ie.orientation]})]}),ie.budget_allocation&&e.jsxs("div",{style:{background:"linear-gradient(135deg, #f0fdf4 0%, #dcfce7 100%)",padding:"8px 12px",borderRadius:"20px",border:"1px solid #bbf7d0",display:"flex",alignItems:"center",gap:"6px",fontSize:"14px",fontWeight:"500",color:"#166534"},children:[e.jsx("span",{children:""}),e.jsxs("span",{children:["Allocation: ",ie.budget_allocation]})]})]})]}),ie.material_preferences&&ie.material_preferences.length>0&&e.jsxs("div",{className:"material-preferences",style:{marginBottom:"20px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:"12px"},children:[e.jsx("span",{style:{fontSize:"16px",marginRight:"8px",color:"#3b82f6"},children:""}),e.jsx("h4",{style:{margin:0,color:"#1f2937",fontSize:"16px",fontWeight:"600"},children:"Material Preferences"}),e.jsxs("span",{style:{marginLeft:"8px",background:"#e0f2fe",color:"#0369a1",padding:"4px 10px",borderRadius:"12px",fontSize:"13px",fontWeight:"500"},children:[ie.material_preferences.length," materials"]})]}),e.jsx("div",{style:{background:"white",padding:"12px 16px",borderRadius:"8px",border:"1px solid #e5e7eb",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.05)"},children:e.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"8px"},children:ie.material_preferences.map((Se,ot)=>e.jsx("span",{style:{background:"linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%)",color:"white",padding:"6px 14px",borderRadius:"16px",fontSize:"14px",fontWeight:"500",boxShadow:"0 1px 3px rgba(59, 130, 246, 0.3)",transition:"all 0.2s ease",cursor:"default"},children:Se},ot))})})]}),(ie.requirements||ie.requirements_parsed)&&e.jsx("div",{style:{marginBottom:"20px"},children:e.jsx(Km,{requirements:ie.requirements||ie.requirements_parsed,compact:!1})}),ie.site_considerations&&e.jsxs("div",{className:"site-considerations",style:{marginBottom:"20px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:"12px"},children:[e.jsx("span",{style:{fontSize:"16px",marginRight:"8px",color:"#059669"},children:""}),e.jsx("h4",{style:{margin:0,color:"#1f2937",fontSize:"16px",fontWeight:"600"},children:"Site Considerations"})]}),e.jsx("div",{style:{background:"white",padding:"12px 16px",borderRadius:"8px",border:"1px solid #e5e7eb",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.05)"},children:e.jsx("p",{style:{fontSize:"15px",margin:0,lineHeight:"1.6",color:"#4b5563",whiteSpace:"pre-wrap"},children:ie.site_considerations})})]}),e.jsxs("div",{className:"images-section",style:{marginBottom:"24px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"16px",padding:"0 0 12px 0",borderBottom:"1px solid #e2e8f0"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[e.jsx("span",{style:{fontSize:"18px",marginRight:"8px",color:"#3b82f6"},children:""}),e.jsx("h4",{style:{margin:0,color:"#1f2937",fontSize:"16px",fontWeight:"600"},children:"Project Images"})]}),e.jsxs("div",{style:{display:"flex",gap:"8px",fontSize:"11px",color:"#6b7280"},children:[ie.site_images&&ie.site_images.length>0&&e.jsxs("span",{style:{background:"#e0f2fe",color:"#0369a1",padding:"4px 10px",borderRadius:"12px",fontSize:"13px",fontWeight:"500"},children:[ie.site_images.length," site"]}),ie.room_images&&Object.keys(ie.room_images).length>0&&e.jsxs("span",{style:{background:"#f0fdf4",color:"#166534",padding:"4px 10px",borderRadius:"12px",fontSize:"13px",fontWeight:"500"},children:[Object.values(ie.room_images).flat().length," room"]})]})]}),ie.site_images&&ie.site_images.length>0&&e.jsxs("div",{style:{marginBottom:"20px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:"12px"},children:[e.jsx("span",{style:{fontSize:"14px",marginRight:"6px",color:"#059669"},children:""}),e.jsx("h5",{style:{margin:0,color:"#374151",fontWeight:"600",fontSize:"16px"},children:"Site Images"}),e.jsx("span",{style:{marginLeft:"8px",background:"#e0f2fe",color:"#0369a1",padding:"4px 8px",borderRadius:"10px",fontSize:"12px",fontWeight:"500"},children:ie.site_images.length})]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(180px, 1fr))",gap:"12px"},children:ie.site_images.map((Se,ot)=>e.jsxs("div",{className:"image-card",style:{position:"relative",borderRadius:"8px",overflow:"hidden",boxShadow:"0 1px 4px rgba(0, 0, 0, 0.1)",transition:"all 0.2s ease",cursor:"pointer",border:"1px solid #e5e7eb"},onMouseEnter:qt=>{const Zt=qt.currentTarget;Zt.style.transform="scale(1.02)",Zt.style.boxShadow="0 2px 8px rgba(0, 0, 0, 0.15)";const ys=Zt.querySelector(".hover-overlay");ys&&(ys.style.display="flex")},onMouseLeave:qt=>{const Zt=qt.currentTarget;Zt.style.transform="scale(1)",Zt.style.boxShadow="0 1px 4px rgba(0, 0, 0, 0.1)";const ys=Zt.querySelector(".hover-overlay");ys&&(ys.style.display="none")},children:[e.jsx("img",{src:typeof Se=="string"?Se:Se.url,alt:`Site ${ot+1}`,style:{width:"100%",height:"120px",objectFit:"cover"},onError:qt=>{qt.target.style.display="none"}}),e.jsxs("div",{style:{position:"absolute",top:"6px",left:"6px",background:"rgba(0,0,0,0.7)",color:"white",padding:"4px 10px",borderRadius:"6px",fontSize:"12px",fontWeight:"600",backdropFilter:"blur(4px)"},children:["Site ",ot+1]}),e.jsxs("div",{className:"hover-overlay",style:{position:"absolute",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.6)",display:"none",alignItems:"center",justifyContent:"center",gap:"8px",transition:"opacity 0.2s ease"},children:[e.jsx("button",{onClick:qt=>{qt.stopPropagation(),window.open(typeof Se=="string"?Se:Se.url,"_blank")},style:{padding:"8px 14px",background:"rgba(255,255,255,0.95)",border:"none",borderRadius:"4px",fontSize:"13px",fontWeight:"600",color:"#374151",cursor:"pointer",display:"flex",alignItems:"center",gap:"4px",backdropFilter:"blur(4px)",boxShadow:"0 1px 4px rgba(0,0,0,0.2)"},children:" View"}),e.jsx("a",{href:typeof Se=="string"?Se:Se.url,download:`site-image-${ot+1}`,onClick:qt=>qt.stopPropagation(),style:{padding:"8px 14px",background:"rgba(59, 130, 246, 0.95)",border:"none",borderRadius:"4px",fontSize:"13px",fontWeight:"600",color:"white",textDecoration:"none",cursor:"pointer",display:"flex",alignItems:"center",gap:"4px",backdropFilter:"blur(4px)",boxShadow:"0 1px 4px rgba(0,0,0,0.2)"},children:" Download"})]})]},`site-${ot}`))})]}),ie.reference_images&&ie.reference_images.length>0&&e.jsxs("div",{style:{marginBottom:"20px"},children:[e.jsx("h5",{style:{margin:"0 0 12px 0",color:"#374151",fontWeight:"600"},children:"Reference Images"}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(200px, 1fr))",gap:"12px"},children:ie.reference_images.map((Se,ot)=>e.jsxs("div",{className:"image-card",style:{position:"relative",borderRadius:"8px",overflow:"hidden"},children:[e.jsx("img",{src:typeof Se=="string"?Se:Se.url,alt:`Reference ${ot+1}`,style:{width:"100%",height:"150px",objectFit:"cover"},onError:qt=>{qt.target.style.display="none"}}),e.jsxs("div",{style:{position:"absolute",top:"8px",left:"8px",background:"rgba(0,0,0,0.7)",color:"white",padding:"4px 8px",borderRadius:"4px",fontSize:"12px",fontWeight:"500"},children:["Reference ",ot+1]})]},`ref-${ot}`))})]}),ie.room_images&&Object.keys(ie.room_images).length>0&&e.jsxs("div",{children:[e.jsx("h5",{style:{margin:"0 0 12px 0",color:"#374151",fontWeight:"600"},children:"Room-Specific Images"}),Object.entries(ie.room_images).map(([Se,ot])=>e.jsxs("div",{style:{marginBottom:"16px"},children:[e.jsx("h6",{style:{margin:"0 0 8px 0",color:"#6b7280",fontWeight:"500",textTransform:"capitalize"},children:Se.replace("floor","Floor ")}),Object.entries(ot||{}).map(([qt,Zt])=>Zt&&Zt.length>0&&e.jsxs("div",{style:{marginBottom:"12px"},children:[e.jsx("div",{style:{fontSize:"13px",fontWeight:"500",color:"#6b7280",marginBottom:"6px",textTransform:"capitalize"},children:qt.replace("_"," ")}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(150px, 1fr))",gap:"8px"},children:Zt.map((ys,vs)=>e.jsxs("div",{className:"image-card",style:{position:"relative",borderRadius:"6px",overflow:"hidden",cursor:"pointer",transition:"transform 0.2s ease"},onMouseEnter:as=>{const ps=as.currentTarget;ps.style.transform="scale(1.05)";const fs=ps.querySelector(".room-hover-overlay");fs&&(fs.style.display="flex")},onMouseLeave:as=>{const ps=as.currentTarget;ps.style.transform="scale(1)";const fs=ps.querySelector(".room-hover-overlay");fs&&(fs.style.display="none")},children:[e.jsx("img",{src:typeof ys=="string"?ys:ys.url,alt:`${qt} ${vs+1}`,style:{width:"100%",height:"100px",objectFit:"cover"},onError:as=>{as.target.style.display="none"}}),e.jsx("div",{style:{position:"absolute",top:"4px",left:"4px",background:"rgba(0,0,0,0.7)",color:"white",padding:"2px 6px",borderRadius:"3px",fontSize:"10px"},children:qt}),e.jsxs("div",{className:"room-hover-overlay",style:{position:"absolute",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.5)",display:"none",alignItems:"center",justifyContent:"center",gap:"8px",transition:"opacity 0.3s ease"},children:[e.jsx("button",{onClick:as=>{as.stopPropagation(),window.open(typeof ys=="string"?ys:ys.url,"_blank")},style:{padding:"6px 12px",background:"rgba(255,255,255,0.9)",border:"none",borderRadius:"4px",fontSize:"11px",fontWeight:"600",color:"#374151",cursor:"pointer",display:"flex",alignItems:"center",gap:"4px",backdropFilter:"blur(4px)"},children:" View"}),e.jsx("a",{href:typeof ys=="string"?ys:ys.url,download:`${qt}-image-${vs+1}`,onClick:as=>as.stopPropagation(),style:{padding:"6px 12px",background:"rgba(59, 130, 246, 0.9)",border:"none",borderRadius:"4px",fontSize:"11px",fontWeight:"600",color:"white",textDecoration:"none",cursor:"pointer",display:"flex",alignItems:"center",gap:"4px",backdropFilter:"blur(4px)"},children:" Download"})]})]},`${qt}-${vs}`))})]},qt))]},Se))]})]}),ie.requirements_parsed&&e.jsxs("div",{className:"detailed-requirements",children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"16px",padding:"0 0 12px 0",borderBottom:"1px solid #e2e8f0"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[e.jsx("span",{style:{fontSize:"18px",marginRight:"8px",color:"#f59e0b"},children:""}),e.jsx("h4",{style:{margin:0,color:"#1f2937",fontSize:"16px",fontWeight:"600"},children:"Detailed Requirements"})]}),e.jsxs("span",{style:{background:"#fef3c7",color:"#d97706",padding:"4px 10px",borderRadius:"12px",fontSize:"13px",fontWeight:"500"},children:[Object.keys(ie.requirements_parsed).filter(Se=>Se!=="notes"&&ie.requirements_parsed[Se]).length," items"]})]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"16px"},children:Object.entries(ie.requirements_parsed).map(([Se,ot])=>{if(!ot||Se==="notes")return null;const Zt=(ys=>{if(!ys)return"-";let vs=ys;if(typeof ys=="string")try{vs=JSON.parse(ys)}catch{vs=ys}if(Array.isArray(vs)){if(Se==="rooms"){const as={};return vs.forEach(ps=>{as[ps]=(as[ps]||0)+1}),e.jsx("div",{style:{marginTop:"4px"},children:Object.entries(as).map(([ps,fs])=>e.jsxs("span",{style:{display:"inline-block",margin:"2px 4px 2px 0",padding:"4px 8px",backgroundColor:"#dbeafe",color:"#1e40af",borderRadius:"12px",fontSize:"12px",fontWeight:"500"},children:[ps.replace(/_/g," "),": ",fs]},ps))})}return vs.join(", ")}if(typeof vs=="string"&&Se==="rooms"){const as=vs.split(",").map(fs=>fs.trim()).filter(fs=>fs),ps={};return as.forEach(fs=>{ps[fs]=(ps[fs]||0)+1}),e.jsx("div",{style:{marginTop:"4px"},children:Object.entries(ps).map(([fs,pa])=>e.jsxs("span",{style:{display:"inline-block",margin:"2px 4px 2px 0",padding:"4px 8px",backgroundColor:"#dbeafe",color:"#1e40af",borderRadius:"12px",fontSize:"12px",fontWeight:"500"},children:[fs.replace(/_/g," "),": ",pa]},fs))})}if(typeof vs=="object"&&vs!==null){if(Se==="floor_rooms")return e.jsx("div",{style:{marginTop:"4px"},children:Object.entries(vs).map(([as,ps])=>e.jsxs("div",{style:{marginBottom:"4px",padding:"6px",background:"#f8fafc",borderRadius:"4px",border:"1px solid #e5e7eb"},children:[e.jsx("div",{style:{fontSize:"11px",fontWeight:"600",color:"#374151",marginBottom:"3px",textTransform:"capitalize"},children:as.replace(/_/g," ")}),e.jsx("div",{style:{fontSize:"11px",color:"#6b7280",lineHeight:"1.2"},children:Object.entries(ps).map(([fs,pa])=>e.jsxs("span",{style:{display:"inline-block",margin:"1px 3px 1px 0",padding:"1px 4px",background:"#dbeafe",color:"#1e40af",borderRadius:"8px",fontSize:"10px",fontWeight:"500"},children:[fs.replace(/_/g," "),": ",pa]},fs))})]},as))});if(Se.includes("images")){const ps=(()=>{if(Array.isArray(vs))return vs;const pa=[];return Object.entries(vs).forEach(([Ps,ca])=>{Array.isArray(ca)?pa.push(...ca):typeof ca=="object"&&Object.entries(ca).forEach(([In,Yr])=>{Array.isArray(Yr)&&pa.push(...Yr.map(Ai=>({...Ai,floor:Ps,room:In})))})}),pa})(),fs=ps.length;return fs===0?"No images":e.jsxs("div",{style:{marginTop:"4px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"4px"},children:[e.jsxs("span",{style:{fontSize:"11px",color:"#6b7280"},children:[fs," image",fs!==1?"s":""]}),e.jsx("button",{onClick:()=>{const pa=ps.map((Ps,ca)=>({id:ca,url:Ps.path||`/buildhub/backend/uploads/${Se.includes("site")?"site_images":"room_images"}/${Ps.filename||Ps}`,title:Ps.floor&&Ps.room?`${Ps.floor} - ${Ps.room}`:`Image ${ca+1}`,type:Se.replace("_"," ")}));console.log("Open gallery:",pa)},style:{padding:"2px 6px",fontSize:"10px",background:"#3b82f6",color:"white",border:"none",borderRadius:"3px",cursor:"pointer"},children:" View All"})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(40px, 1fr))",gap:"2px",maxHeight:"80px",overflowY:"auto"},children:[ps.slice(0,6).map((pa,Ps)=>{const ca=pa.path||`/buildhub/backend/uploads/${Se.includes("site")?"site_images":"room_images"}/${pa.filename||pa}`;return e.jsxs("div",{style:{position:"relative",cursor:"pointer",borderRadius:"3px",overflow:"hidden",aspectRatio:"1",height:"35px"},children:[e.jsx("img",{src:ca,alt:`${Se} ${Ps+1}`,style:{width:"100%",height:"100%",objectFit:"cover",transition:"transform 0.2s"},onMouseOver:In=>In.target.style.transform="scale(1.05)",onMouseOut:In=>In.target.style.transform="scale(1)",onClick:()=>window.open(ca,"_blank")}),e.jsx("div",{style:{position:"absolute",bottom:"1px",right:"1px",background:"rgba(0,0,0,0.7)",color:"white",borderRadius:"2px",padding:"0px 2px",fontSize:"7px",lineHeight:"1.2"},children:Ps+1})]},Ps)}),fs>6&&e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",background:"#f3f4f6",color:"#6b7280",fontSize:"8px",fontWeight:"600",borderRadius:"3px",height:"35px"},children:["+",fs-6]})]})]})}return Object.entries(vs).map(([as,ps])=>`${as.replace(/_/g," ")}: ${ps}`).join(", ")}return String(vs)})(ot);return e.jsxs("div",{style:{background:"white",padding:"16px 20px",borderRadius:"12px",border:"1px solid #e5e7eb",boxShadow:"0 2px 8px rgba(0,0,0,0.08)",transition:"all 0.2s ease",position:"relative",overflow:"visible"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:"12px"},children:[e.jsxs("div",{style:{width:"28px",height:"28px",borderRadius:"8px",background:"linear-gradient(135deg, #f3f4f6 0%, #e5e7eb 100%)",display:"flex",alignItems:"center",justifyContent:"center",marginRight:"12px",fontSize:"14px"},children:[Se.includes("image")&&"",Se==="floor_rooms"&&"",Se.includes("material")&&"",Se.includes("budget")&&"",Se.includes("family")&&"",Se.includes("plot")&&"",Se.includes("topography")&&"",Se.includes("aesthetic")&&"",Se.includes("orientation")&&"",!Se.includes("image")&&!Se.includes("floor")&&!Se.includes("material")&&!Se.includes("budget")&&!Se.includes("family")&&!Se.includes("plot")&&!Se.includes("topography")&&!Se.includes("aesthetic")&&!Se.includes("orientation")&&""]}),e.jsx("div",{style:{fontWeight:"600",textTransform:"capitalize",color:"#1f2937",fontSize:"16px",flex:1},children:Se.replace(/_/g," ")})]}),e.jsx("div",{style:{fontSize:"15px",color:"#374151",lineHeight:"1.6",wordWrap:"break-word",overflowWrap:"break-word"},children:Zt})]},Se)})}),ie.requirements_parsed.notes&&e.jsxs("div",{style:{marginTop:"16px",background:"linear-gradient(135deg, #fef3c7 0%, #fde68a 100%)",padding:"12px 16px",borderRadius:"8px",border:"1px solid #f59e0b",boxShadow:"0 1px 3px rgba(245, 158, 11, 0.1)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:"6px"},children:[e.jsx("span",{style:{fontSize:"14px",marginRight:"6px",color:"#d97706"},children:""}),e.jsx("div",{style:{fontWeight:"600",color:"#92400e",fontSize:"15px"},children:"Additional Notes"})]}),e.jsx("div",{style:{fontSize:"14px",color:"#92400e",lineHeight:"1.5",whiteSpace:"pre-wrap"},children:ie.requirements_parsed.notes})]})]})]})]},ie.id))})})]}),e.jsxs("div",{className:"section-card",children:[e.jsxs("div",{className:"section-header",children:[e.jsxs("div",{children:[e.jsx("h2",{children:"Pending Assignments"}),e.jsx("p",{children:"Homeowner requests waiting for your response"})]}),e.jsx("button",{className:"btn btn-secondary",onClick:_t,disabled:p,style:{marginLeft:"auto"},children:p?"Refreshing...":" Refresh"})]}),e.jsx("div",{className:"section-content",children:e.jsx(b6,{onCreateFromAssigned:ie=>{Xe({...at,request_id:ie}),B(!0)},expandedAssignments:Be,setExpandedAssignments:Qe,toast:Q})})]})]}),ya=()=>e.jsxs("div",{children:[e.jsx("div",{className:"main-header",children:e.jsxs("div",{className:"header-content",children:[e.jsxs("div",{children:[e.jsx("h1",{children:"My Designs"}),e.jsx("p",{children:"Track your submitted architectural designs and their progress"})]}),e.jsx("button",{className:"btn btn-primary",onClick:()=>B(!0),children:"+ New Design"})]})}),e.jsxs("div",{className:"section-card",children:[e.jsxs("div",{className:"section-header",children:[e.jsx("h2",{children:"Design Portfolio"}),e.jsx("p",{children:"All your submitted architectural designs"})]}),e.jsx("div",{className:"section-content",children:u.length===0?e.jsxs("div",{className:"empty-state",children:[e.jsx("div",{className:"empty-icon",children:""}),e.jsx("h3",{children:"No Designs Yet"}),e.jsx("p",{children:"Upload your first architectural design to get started!"}),e.jsx("button",{className:"btn btn-primary",onClick:()=>B(!0),children:"Upload Design"})]}):e.jsx("div",{className:"item-grid",children:u.map(ie=>e.jsx("div",{className:"layout-card",children:e.jsxs("div",{className:"layout-card-content",children:[e.jsxs("div",{className:"layout-header",children:[e.jsx("h4",{className:"layout-title",children:ie.design_title||"Untitled Design"}),e.jsx("span",{className:`badge ${vp(ie.status||"proposed")}`,children:du(ie.status||"proposed")})]}),ie.description&&e.jsx("p",{className:"layout-description",children:ie.description}),e.jsxs("div",{className:"homeowner-details",children:[e.jsx("h4",{children:"Homeowner Details:"}),e.jsxs("p",{children:[e.jsx("strong",{children:"Name:"})," ",ie.client_name||"Not specified"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Email:"})," ",ie.client_email||"Not specified"]})]}),e.jsxs("div",{className:"request-details",children:[e.jsx("h4",{children:"Request Details:"}),e.jsxs("p",{children:[e.jsx("strong",{children:"Plot Size:"})," ",ie.plot_size||"-"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Budget:"})," ",ie.budget_range||"-"]}),ie.requirements&&(()=>{const Se=String(ie.requirements||"").trim();return Se.startsWith("{")&&Se.endsWith("}")?e.jsxs("div",{className:"requirements-section",children:[e.jsx("strong",{children:"Requirements:"}),e.jsx("div",{style:{marginTop:6},children:e.jsx(ex,{raw:Se,title:"Requirements"})})]}):e.jsxs("div",{className:"requirements-section",children:[e.jsx("strong",{children:"Requirements:"}),e.jsx("div",{style:{whiteSpace:"pre-wrap"},children:ie.requirements})]})})()]}),ie.technical_details&&e.jsx("div",{className:"technical-details-section",children:e.jsx(Ho,{technicalDetails:ie.technical_details})}),e.jsx("div",{className:"file-links",children:Array.isArray(ie.files)&&ie.files.length>0?ie.files.slice(0,3).map((Se,ot)=>Ms(Se.path)||la(Se.path)?e.jsxs("a",{className:"btn",href:Se.path,target:"_blank",rel:"noreferrer",children:["View File ",ot+1]},ot):e.jsxs("a",{className:"btn btn-link",href:Se.path,target:"_blank",rel:"noreferrer",children:["Download File ",ot+1]},ot)):e.jsx("span",{className:"muted",children:"No files attached"})}),e.jsxs("div",{className:"review-section",children:[e.jsx("h4",{children:"Review"}),Array.isArray(Z)&&Z.filter(Se=>Se.design_id===ie.id).length>0?Z.filter(Se=>Se.design_id===ie.id).slice(0,1).map(Se=>e.jsxs("div",{className:"review-item",style:{borderTop:"1px solid #eee",padding:"10px 0"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("div",{style:{fontWeight:600},children:Se.author||"Homeowner"}),e.jsxs("div",{style:{color:"#f5a623"},children:["".repeat(Se.rating),"".repeat(5-Se.rating)]})]}),e.jsx("div",{className:"muted",style:{fontSize:12,color:"#667085",marginTop:4},children:new Date(Se.created_at).toLocaleString()}),Se.comment&&e.jsx("div",{style:{marginTop:6,whiteSpace:"pre-wrap"},children:Se.comment})]},Se.id)):e.jsx("div",{className:"muted",children:"No review yet"})]})]})},ie.id))})})]})]}),Ws=()=>e.jsx("div",{style:{padding:"20px"},children:V?e.jsx("div",{className:"loading",style:{textAlign:"center",padding:"40px"},children:"Loading profile"}):e.jsx(m6,{user:r,profile:E,setProfile:U,onSave:St,onReset:_e,loading:V,saving:I,reviews:Z,reviewCount:E.review_count||0,avgRating:E.avg_rating||0,onUserUpdate:ie=>o(ie)})}),Dn=()=>e.jsxs("div",{style:{height:"100vh",overflowY:"auto",paddingRight:"8px",scrollbarWidth:"thin",scrollbarColor:"#cbd5e0 #f7fafc"},children:[e.jsx("div",{className:"main-header",children:e.jsxs("div",{className:"header-content",children:[e.jsxs("div",{children:[e.jsx("h1",{children:"My Layout Library"}),e.jsx("p",{children:"Create layouts with preview images for homeowners to browse"})]}),e.jsx("button",{className:"btn btn-primary",onClick:()=>W(!0),children:"+ Add Layout"})]})}),e.jsxs("div",{className:"section-card",children:[e.jsxs("div",{className:"section-header",children:[e.jsx("h2",{children:"Library Items"}),e.jsx("p",{children:"Your published layouts"})]}),e.jsx("div",{className:"section-content",children:z.length===0?e.jsxs("div",{className:"empty-state",children:[e.jsx("div",{className:"empty-icon",children:""}),e.jsx("h3",{children:"No Layouts Yet"}),e.jsx("p",{children:"Add your first layout to the library so homeowners can request customizations"}),e.jsx("button",{className:"btn btn-primary",onClick:()=>W(!0),children:"Add Layout"})]}):e.jsx("div",{className:"item-grid",children:z.map(ie=>e.jsxs("div",{className:"layout-card",children:[e.jsx("button",{className:"layout-image-container",onClick:()=>xs(ie),style:{cursor:"zoom-in"},children:e.jsx("img",{src:ie.image_url||"/images/default-layout.jpg",alt:ie.title,className:"layout-card-image"})}),e.jsxs("div",{className:"layout-card-content",children:[e.jsx("h4",{className:"layout-title",children:ie.title}),e.jsx("p",{className:"layout-type",children:ie.layout_type}),e.jsxs("div",{className:"layout-specs",children:[e.jsxs("span",{className:"spec",children:[" ",ie.bedrooms," BR"]}),e.jsxs("span",{className:"spec",children:[" ",ie.bathrooms," BA"]}),e.jsxs("span",{className:"spec",children:[" ",ie.area," sq ft"]})]}),ie.description&&e.jsx("p",{className:"layout-description",children:ie.description}),ie.price_range&&e.jsx("div",{className:"layout-price",children:e.jsxs("span",{className:"price-range",children:["",ie.price_range]})}),ie.technical_details&&e.jsxs("div",{className:"technical-details-preview",style:{marginTop:"12px",padding:"12px",background:"#f8f9fa",borderRadius:"6px",border:"1px solid #e9ecef"},children:[e.jsx("h5",{style:{margin:"0 0 8px 0",fontSize:"0.9rem",color:"#495057"},children:"Technical Specifications"}),e.jsx(Ho,{technicalDetails:ie.technical_details,compact:!0})]}),e.jsxs("div",{style:{display:"flex",gap:8,flexWrap:"wrap",margin:"6px 0"},children:[ie.image_url&&e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>xs(ie),children:"View Preview"}),ie.design_file_url&&(Ms(ie.design_file_url)||la(ie.design_file_url)?e.jsx("button",{type:"button",className:"btn",onClick:()=>xs(ie),children:"View Layout"}):e.jsx("a",{className:"btn btn-link",href:ie.design_file_url,target:"_blank",rel:"noreferrer",children:"Download Layout"}))]}),e.jsxs("div",{style:{display:"flex",gap:8,flexWrap:"wrap",margin:"6px 0"},children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>we(ie),children:"Edit"}),e.jsx("button",{type:"button",className:`btn ${ie.status==="active"?"btn-danger":"btn-success"}`,onClick:()=>We(ie),children:ie.status==="active"?"Deactivate":"Activate"})]})]})]},ie.id))})})]}),X&&e.jsx("div",{className:"form-modal",children:e.jsxs("div",{className:"form-content",style:{maxWidth:"920px",width:"100%",maxHeight:"90vh",height:"auto",display:"flex",flexDirection:"column",position:"relative",overflow:"hidden",borderRadius:"12px",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1)"},children:[e.jsx("div",{className:"form-header",style:{flexShrink:0,padding:"24px 28px",borderBottom:"1px solid #e5e7eb",background:"linear-gradient(to right, #f8fafc, #ffffff)",position:"relative"},children:e.jsxs("div",{style:{display:"flex",alignItems:"flex-start",justifyContent:"space-between",gap:"16px"},children:[e.jsxs("div",{style:{flex:1},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"8px"},children:[e.jsx("div",{style:{width:"44px",height:"44px",borderRadius:"12px",background:"linear-gradient(135deg, #10b981 0%, #059669 100%)",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 4px 12px rgba(16, 185, 129, 0.3)"},children:e.jsx("span",{style:{fontSize:"20px"},children:""})}),e.jsxs("div",{children:[e.jsx("h3",{style:{margin:"0 0 2px 0",fontSize:"1.5rem",fontWeight:"700",color:"#111827",letterSpacing:"-0.01em"},children:"Add Layout"}),e.jsx("p",{style:{margin:0,fontSize:"0.875rem",color:"#6b7280",fontWeight:"500"},children:"Publish a new layout to the library"})]})]}),e.jsx("div",{className:"step-indicator",style:{marginTop:"12px",display:"flex",gap:"8px"},children:e.jsx("span",{className:"step active",style:{background:"linear-gradient(135deg, #10b981 0%, #059669 100%)",color:"white",padding:"6px 16px",borderRadius:"20px",fontSize:"0.875rem",fontWeight:"600",boxShadow:"0 2px 8px rgba(16, 185, 129, 0.3)"},children:"Basic Info & Files"})})]}),e.jsx("button",{type:"button",className:"modal-close",onClick:()=>W(!1),style:{background:"linear-gradient(135deg, #ef4444 0%, #dc2626 100%)",color:"white",border:"none",borderRadius:"50%",width:"40px",height:"40px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",fontSize:"22px",lineHeight:1,flexShrink:0,boxShadow:"0 4px 12px rgba(239, 68, 68, 0.3)",transition:"all 0.2s ease",fontWeight:"600"},onMouseEnter:ie=>{ie.target.style.transform="scale(1.1)",ie.target.style.boxShadow="0 6px 16px rgba(239, 68, 68, 0.4)"},onMouseLeave:ie=>{ie.target.style.transform="scale(1)",ie.target.style.boxShadow="0 4px 12px rgba(239, 68, 68, 0.3)"},children:""})]})}),e.jsxs("form",{onSubmit:kt,style:{display:"flex",flexDirection:"column",flex:1,minHeight:0,overflow:"hidden"},children:[e.jsxs("div",{className:"scrollable-form-content",style:{flex:1,overflowY:"auto",overflowX:"hidden",padding:"24px",paddingRight:"32px",maxHeight:"calc(90vh - 200px)",minHeight:"300px",scrollbarWidth:"thin",scrollbarColor:"#cbd5e1 #f1f5f9"},children:[e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Title"}),e.jsx("input",{type:"text",value:Ft.title,onChange:ie=>Rt({...Ft,title:ie.target.value}),placeholder:"e.g., Modern 3BHK House",required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Layout Type"}),e.jsxs("select",{value:Ft.layout_type,onChange:ie=>Rt({...Ft,layout_type:ie.target.value}),required:!0,children:[e.jsx("option",{value:"",children:"Select Type"}),e.jsx("option",{value:"Residential",children:"Residential"}),e.jsx("option",{value:"Commercial",children:"Commercial"}),e.jsx("option",{value:"Mixed Use",children:"Mixed Use"})]})]})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Bedrooms"}),e.jsx("input",{type:"number",value:Ft.bedrooms,onChange:ie=>Rt({...Ft,bedrooms:ie.target.value}),min:"1",required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Bathrooms"}),e.jsx("input",{type:"number",value:Ft.bathrooms,onChange:ie=>Rt({...Ft,bathrooms:ie.target.value}),min:"1",required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{children:["Area (sq ft)",e.jsx(Eb,{content:e.jsxs("div",{children:[e.jsx("strong",{children:"Typical House Areas:"}),e.jsx("br",{})," 1BHK: 400-600 sq ft",e.jsx("br",{})," 2BHK: 600-900 sq ft",e.jsx("br",{})," 3BHK: 900-1200 sq ft",e.jsx("br",{})," 4BHK: 1200-1500 sq ft",e.jsx("br",{})," Villa: 1500+ sq ft"]}),position:"top",children:e.jsx("span",{style:{marginLeft:"8px",cursor:"pointer",color:"#6b7280"},children:""})})]}),e.jsx("input",{type:"number",value:Ft.area,onChange:ie=>Rt({...Ft,area:ie.target.value}),min:"100",required:!0})]})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Price Range"}),e.jsx("input",{type:"text",value:Ft.price_range,onChange:ie=>Rt({...Ft,price_range:ie.target.value}),placeholder:"e.g., 20-30 Lakhs"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Price to View ()"}),e.jsx("input",{type:"number",value:Ft.view_price||0,onChange:ie=>Rt({...Ft,view_price:ie.target.value}),placeholder:"e.g., 100",min:"0",step:"0.01"}),e.jsx("small",{style:{color:"#666"},children:"Amount homeowners must pay to view this layout"})]})]}),e.jsxs("div",{className:"form-section",style:{marginTop:"20px",padding:"16px",border:"1px solid #e5e7eb",borderRadius:"8px",background:"#f9fafb"},children:[e.jsx("h4",{style:{margin:"0 0 16px 0",color:"#374151"},children:"Files & Media"}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Preview Image *"}),e.jsx("input",{type:"file",accept:"image/*",onChange:ie=>Rt({...Ft,image:ie.target.files?.[0]||null}),required:!0}),e.jsx("p",{className:"form-help",style:{margin:"4px 0 0 0",fontSize:"0.8rem",color:"#6b7280"},children:"Upload a preview image (JPG, PNG, GIF, WebP)"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Layout Design File *"}),e.jsx("input",{type:"file",accept:".pdf,.jpg,.jpeg,.png,.gif,.webp,.svg,.dwg,.dxf,.ifc,.rvt,.skp,.3dm,.obj,.stl",onChange:ie=>Rt({...Ft,design_file:ie.target.files?.[0]||null}),required:!0}),e.jsx("p",{className:"form-help",style:{margin:"4px 0 0 0",fontSize:"0.8rem",color:"#6b7280"},children:"Upload layout file (PDF, Images, CAD files, 3D models)"})]})]}),e.jsxs("div",{className:"form-row",children:[e.jsx("div",{className:"form-group",children:Ft.image&&e.jsxs("div",{style:{border:"1px solid #ddd",padding:12,borderRadius:8,background:"#fff"},children:[e.jsx("p",{style:{margin:"0 0 8px",fontWeight:"500",color:"#374151"},children:" Preview Image"}),e.jsx("img",{src:URL.createObjectURL(Ft.image),alt:"Preview",style:{maxWidth:"100%",maxHeight:"200px",borderRadius:6,objectFit:"cover"}}),e.jsx("p",{style:{margin:"8px 0 0",fontSize:"0.8rem",color:"#6b7280"},children:Ft.image.name})]})}),e.jsx("div",{className:"form-group",children:Ft.design_file&&e.jsxs("div",{style:{border:"1px solid #ddd",padding:12,borderRadius:8,background:"#fff"},children:[e.jsx("p",{style:{margin:"0 0 8px",fontWeight:"500",color:"#374151"},children:" Layout File"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,padding:"8px 12px",background:"#f3f4f6",borderRadius:6},children:[e.jsx("span",{style:{fontSize:"1.5rem"},children:Ft.design_file.name.toLowerCase().endsWith(".pdf")?"":Ft.design_file.name.toLowerCase().match(/\.(jpg|jpeg|png|gif|webp)$/)?"":Ft.design_file.name.toLowerCase().match(/\.(dwg|dxf)$/)?"":Ft.design_file.name.toLowerCase().match(/\.(skp|3dm|obj|stl)$/)?"":""}),e.jsxs("div",{children:[e.jsx("p",{style:{margin:0,fontWeight:"500"},children:Ft.design_file.name}),e.jsxs("p",{style:{margin:0,fontSize:"0.8rem",color:"#6b7280"},children:[(Ft.design_file.size/1024/1024).toFixed(2)," MB"]})]})]})]})})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Description"}),e.jsx("textarea",{rows:"6",value:Ft.description,onChange:ie=>Rt({...Ft,description:ie.target.value}),placeholder:"Describe the layout features and design highlights...",style:{minHeight:"120px"}})]})]}),e.jsxs("div",{className:"form-actions",style:{padding:"16px 24px",borderTop:"1px solid #e5e7eb",background:"white",flexShrink:0,display:"flex",gap:"12px",justifyContent:"flex-end"},children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>W(!1),children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn btn-primary",children:"Add Layout"})]})]})]})}),Ze&&e.jsx("div",{className:"form-modal",children:e.jsxs("div",{className:"form-content",style:{maxWidth:"920px",width:"100%",maxHeight:"90vh",height:"auto",display:"flex",flexDirection:"column",position:"relative",overflow:"hidden",borderRadius:"12px",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1)"},children:[e.jsx("div",{className:"form-header",style:{flexShrink:0,padding:"24px 28px",borderBottom:"1px solid #e5e7eb",background:"linear-gradient(to right, #f8fafc, #ffffff)",position:"relative"},children:e.jsxs("div",{style:{display:"flex",alignItems:"flex-start",justifyContent:"space-between",gap:"16px"},children:[e.jsxs("div",{style:{flex:1},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"8px"},children:[e.jsx("div",{style:{width:"44px",height:"44px",borderRadius:"12px",background:"linear-gradient(135deg, #3b82f6 0%, #2563eb 100%)",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 4px 12px rgba(59, 130, 246, 0.3)"},children:e.jsx("span",{style:{fontSize:"20px"},children:""})}),e.jsxs("div",{children:[e.jsx("h3",{style:{margin:"0 0 2px 0",fontSize:"1.5rem",fontWeight:"700",color:"#111827",letterSpacing:"-0.01em"},children:"Edit Layout"}),e.jsx("p",{style:{margin:0,fontSize:"0.875rem",color:"#6b7280",fontWeight:"500"},children:"Update your library item"})]})]}),e.jsx("div",{className:"step-indicator",style:{marginTop:"12px",display:"flex",gap:"8px"},children:e.jsx("span",{className:"step active",style:{background:"linear-gradient(135deg, #3b82f6 0%, #2563eb 100%)",color:"white",padding:"6px 16px",borderRadius:"20px",fontSize:"0.875rem",fontWeight:"600",boxShadow:"0 2px 8px rgba(59, 130, 246, 0.3)"},children:"Basic Info"})})]}),e.jsx("button",{type:"button",className:"modal-close",onClick:Ee,style:{background:"linear-gradient(135deg, #ef4444 0%, #dc2626 100%)",color:"white",border:"none",borderRadius:"50%",width:"40px",height:"40px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",fontSize:"22px",lineHeight:1,flexShrink:0,boxShadow:"0 4px 12px rgba(239, 68, 68, 0.3)",transition:"all 0.2s ease",fontWeight:"600"},onMouseEnter:ie=>{ie.target.style.transform="scale(1.1)",ie.target.style.boxShadow="0 6px 16px rgba(239, 68, 68, 0.4)"},onMouseLeave:ie=>{ie.target.style.transform="scale(1)",ie.target.style.boxShadow="0 4px 12px rgba(239, 68, 68, 0.3)"},children:""})]})}),e.jsx("div",{className:"scrollable-form-content",style:{flex:1,overflowY:"auto",overflowX:"hidden",padding:"24px",paddingRight:"32px",maxHeight:"calc(90vh - 200px)",minHeight:"300px",scrollbarWidth:"thin",scrollbarColor:"#cbd5e1 #f1f5f9"},children:e.jsxs("form",{onSubmit:ie=>ie.preventDefault(),style:{paddingBottom:"16px"},children:[e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Title *"}),e.jsx("input",{type:"text",value:Ze.title,onChange:ie=>oe({...Ze,title:ie.target.value}),required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Type *"}),e.jsx("input",{type:"text",value:Ze.layout_type,onChange:ie=>oe({...Ze,layout_type:ie.target.value}),required:!0})]})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Bedrooms *"}),e.jsx("input",{type:"number",value:Ze.bedrooms,onChange:ie=>oe({...Ze,bedrooms:ie.target.value}),required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Bathrooms *"}),e.jsx("input",{type:"number",value:Ze.bathrooms,onChange:ie=>oe({...Ze,bathrooms:ie.target.value}),required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{children:["Area (sq ft) *",e.jsx(Eb,{content:e.jsxs("div",{children:[e.jsx("strong",{children:"Typical House Areas:"}),e.jsx("br",{})," 1BHK: 400-600 sq ft",e.jsx("br",{})," 2BHK: 600-900 sq ft",e.jsx("br",{})," 3BHK: 900-1200 sq ft",e.jsx("br",{})," 4BHK: 1200-1500 sq ft",e.jsx("br",{})," Villa: 1500+ sq ft"]}),position:"top",children:e.jsx("span",{style:{marginLeft:"8px",cursor:"pointer",color:"#6b7280"},children:""})})]}),e.jsx("input",{type:"number",value:Ze.area,onChange:ie=>oe({...Ze,area:ie.target.value}),required:!0})]})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Price Range"}),e.jsx("input",{type:"text",value:Ze.price_range||"",onChange:ie=>oe({...Ze,price_range:ie.target.value}),placeholder:"e.g., 20-30 Lakhs"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Price to View ()"}),e.jsx("input",{type:"number",value:Ze.view_price||0,onChange:ie=>oe({...Ze,view_price:ie.target.value}),placeholder:"e.g., 100",min:"0",step:"0.01"}),e.jsx("small",{style:{color:"#666"},children:"Amount homeowners must pay to view this layout"})]})]}),e.jsxs("div",{className:"form-section",style:{marginTop:"20px",padding:"16px",border:"1px solid #e5e7eb",borderRadius:"8px",background:"#f9fafb"},children:[e.jsx("h4",{style:{margin:"0 0 16px 0",color:"#374151"},children:"Files & Media"}),e.jsx("p",{style:{margin:"0 0 16px 0",color:"#6b7280",fontSize:"0.9rem"},children:"Replace existing files or keep current ones"}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Replace Preview Image"}),e.jsx("input",{type:"file",accept:"image/*",onChange:ie=>oe({...Ze,image:ie.target.files?.[0]||null})}),e.jsx("p",{className:"form-help",style:{margin:"4px 0 0 0",fontSize:"0.8rem",color:"#6b7280"},children:"Upload a new preview image (JPG, PNG, GIF, WebP)"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Replace Layout Design File"}),e.jsx("input",{type:"file",accept:".pdf,.jpg,.jpeg,.png,.gif,.webp,.svg,.dwg,.dxf,.ifc,.rvt,.skp,.3dm,.obj,.stl",onChange:ie=>oe({...Ze,design_file:ie.target.files?.[0]||null})}),e.jsx("p",{className:"form-help",style:{margin:"4px 0 0 0",fontSize:"0.8rem",color:"#6b7280"},children:"Upload new layout file (PDF, Images, CAD files, 3D models)"})]})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Current Preview Image"}),Ze.image_url?e.jsxs("div",{style:{border:"1px solid #ddd",padding:12,borderRadius:8,background:"#fff"},children:[e.jsx("p",{style:{margin:"0 0 8px",fontWeight:"500",color:"#374151"},children:" Current Image"}),e.jsx("img",{src:Ze.image_url,alt:"Current Preview",style:{maxWidth:"100%",maxHeight:"200px",borderRadius:6,objectFit:"cover"}})]}):e.jsx("p",{style:{color:"#6b7280",fontStyle:"italic"},children:"No current image"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Current Layout File"}),Ze.design_file_url?e.jsxs("div",{style:{border:"1px solid #ddd",padding:12,borderRadius:8,background:"#fff"},children:[e.jsx("p",{style:{margin:"0 0 8px",fontWeight:"500",color:"#374151"},children:" Current Layout File"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,padding:"8px 12px",background:"#f3f4f6",borderRadius:6},children:[e.jsx("span",{style:{fontSize:"1.5rem"},children:Ze.design_file_url.toLowerCase().endsWith(".pdf")?"":Ze.design_file_url.toLowerCase().match(/\.(jpg|jpeg|png|gif|webp)$/)?"":Ze.design_file_url.toLowerCase().match(/\.(dwg|dxf)$/)?"":Ze.design_file_url.toLowerCase().match(/\.(skp|3dm|obj|stl)$/)?"":""}),e.jsxs("div",{children:[e.jsx("p",{style:{margin:0,fontWeight:"500"},children:Ze.design_file_url.split("/").pop()}),e.jsx("a",{href:Ze.design_file_url,target:"_blank",rel:"noreferrer",style:{fontSize:"0.8rem",color:"#3b82f6"},children:"View File"})]})]})]}):e.jsx("p",{style:{color:"#6b7280",fontStyle:"italic"},children:"No current layout file"})]})]}),(Ze.image||Ze.design_file)&&e.jsxs("div",{className:"form-row",children:[e.jsx("div",{className:"form-group",children:Ze.image&&e.jsxs("div",{style:{border:"1px solid #4ade80",padding:12,borderRadius:8,background:"#f0fdf4"},children:[e.jsx("p",{style:{margin:"0 0 8px",fontWeight:"500",color:"#166534"},children:" New Preview Image"}),e.jsx("img",{src:URL.createObjectURL(Ze.image),alt:"New Preview",style:{maxWidth:"100%",maxHeight:"200px",borderRadius:6,objectFit:"cover"}}),e.jsx("p",{style:{margin:"8px 0 0",fontSize:"0.8rem",color:"#166534"},children:Ze.image.name})]})}),e.jsx("div",{className:"form-group",children:Ze.design_file&&e.jsxs("div",{style:{border:"1px solid #4ade80",padding:12,borderRadius:8,background:"#f0fdf4"},children:[e.jsx("p",{style:{margin:"0 0 8px",fontWeight:"500",color:"#166534"},children:" New Layout File"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,padding:"8px 12px",background:"#dcfce7",borderRadius:6},children:[e.jsx("span",{style:{fontSize:"1.5rem"},children:Ze.design_file.name.toLowerCase().endsWith(".pdf")?"":Ze.design_file.name.toLowerCase().match(/\.(jpg|jpeg|png|gif|webp)$/)?"":Ze.design_file.name.toLowerCase().match(/\.(dwg|dxf)$/)?"":Ze.design_file.name.toLowerCase().match(/\.(skp|3dm|obj|stl)$/)?"":""}),e.jsxs("div",{children:[e.jsx("p",{style:{margin:0,fontWeight:"500"},children:Ze.design_file.name}),e.jsxs("p",{style:{margin:0,fontSize:"0.8rem",color:"#166534"},children:[(Ze.design_file.size/1024/1024).toFixed(2)," MB"]})]})]})]})})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Description"}),e.jsx("textarea",{rows:"4",value:Ze.description||"",onChange:ie=>oe({...Ze,description:ie.target.value})})]}),e.jsx("div",{className:"form-row",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Status"}),e.jsxs("select",{value:Ze.status,onChange:ie=>oe({...Ze,status:ie.target.value}),children:[e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"})]})]})})]})}),e.jsxs("div",{className:"form-actions",style:{padding:"16px 24px",borderTop:"1px solid #e5e7eb",background:"white",flexShrink:0,display:"flex",gap:"12px",justifyContent:"flex-end"},children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:Ee,children:"Cancel"}),e.jsx("button",{type:"button",className:"btn btn-primary",onClick:Re,children:"Save Changes"})]})]})})]}),Ma=()=>pt?e.jsx(v6,{layoutRequestId:et,onClose:()=>{xe(!1),Oe(null)}}):e.jsxs("div",{style:{height:"100vh",overflowY:"auto",paddingRight:"8px",scrollbarWidth:"thin",scrollbarColor:"#cbd5e0 #f7fafc"},children:[e.jsx("div",{className:"main-header",children:e.jsxs("div",{className:"header-content",children:[e.jsxs("div",{children:[e.jsx("h1",{children:"House Plans"}),e.jsx("p",{children:"Create custom house plans by drawing room layouts for your clients"})]}),e.jsx("button",{className:"btn btn-primary",onClick:()=>{Oe(null),xe(!0)},children:"+ Create New Plan"})]})}),e.jsxs("div",{className:"section-card",children:[e.jsxs("div",{className:"section-header",children:[e.jsx("h2",{children:"Your Assigned Projects"}),e.jsx("p",{children:"Create custom house plans for these client requests"})]}),e.jsx("div",{className:"section-content",children:l.length===0?e.jsxs("div",{className:"empty-state",children:[e.jsx("div",{className:"empty-icon",children:""}),e.jsx("h3",{children:"No Assigned Projects"}),e.jsx("p",{children:"You don't have any assigned layout requests yet. Check the Layout Requests tab to see available projects."}),e.jsx("button",{className:"btn btn-secondary",onClick:()=>a("requests"),children:"View Layout Requests"})]}):e.jsx("div",{className:"request-grid",children:l.map(ie=>e.jsxs("div",{className:"request-card",children:[e.jsxs("div",{className:"request-header",children:[e.jsx("h4",{children:ie.homeowner_name}),e.jsx("span",{className:"request-budget",children:ie.budget_range})]}),e.jsxs("div",{className:"request-details",children:[e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Plot Size:"}),e.jsx("span",{className:"detail-value",children:ie.plot_size})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Location:"}),e.jsx("span",{className:"detail-value",children:ie.location||"Not specified"})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Style:"}),e.jsx("span",{className:"detail-value",children:ie.preferred_style||"Any"})]})]}),e.jsx(Km,{requirements:ie.requirements,compact:!0}),e.jsxs("div",{className:"request-actions",children:[e.jsx("button",{className:"btn btn-primary",onClick:()=>{Oe(ie.id),a("house-plans"),xe(!0)},children:"Create House Plan"}),e.jsx("button",{className:"btn btn-secondary",onClick:()=>Gt(ie),children:"Download Details"})]})]},ie.id))})})]}),e.jsxs("div",{className:"section-card",children:[e.jsxs("div",{className:"section-header",children:[e.jsx("h2",{children:"General House Plans"}),e.jsx("p",{children:"Create house plans not tied to specific client requests"})]}),e.jsx("div",{className:"section-content",children:e.jsxs("div",{className:"general-plans-info",children:[e.jsx("p",{children:"Create general house plans that can be used as templates or showcased in your portfolio."}),e.jsx("button",{className:"btn btn-outline",onClick:()=>{Oe(null),xe(!0)},children:"Create General Plan"})]})})]})]});return e.jsxs("div",{className:"dashboard-container",children:[e.jsx("style",{children:`
        .scrollable-form-content::-webkit-scrollbar {
          width: 8px;
        }
        .scrollable-form-content::-webkit-scrollbar-track {
          background: #f1f5f9;
          border-radius: 4px;
        }
        .scrollable-form-content::-webkit-scrollbar-thumb {
          background: #cbd5e1;
          border-radius: 4px;
        }
        .scrollable-form-content::-webkit-scrollbar-thumb:hover {
          background: #94a3b8;
        }
        
        /* Enhanced scrollbar for form content */
        .form-content::-webkit-scrollbar {
          width: 10px;
        }
        .form-content::-webkit-scrollbar-track {
          background: #f1f5f9;
          border-radius: 5px;
          margin: 5px;
        }
        .form-content::-webkit-scrollbar-thumb {
          background: #64748b;
          border-radius: 5px;
          border: 2px solid #f1f5f9;
        }
        .form-content::-webkit-scrollbar-thumb:hover {
          background: #475569;
        }

        /* Image Modal Animations */
        @keyframes fadeIn {
          from { opacity: 0; }
          to { opacity: 1; }
        }
        
        @keyframes slideIn {
          from { 
            opacity: 0; 
            transform: translateY(-20px) scale(0.95); 
          }
          to { 
            opacity: 1; 
            transform: translateY(0) scale(1); 
          }
        }

        /* Enhanced hover effects */
        .image-card:hover {
          transform: scale(1.02) !important;
          box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15) !important;
          border-color: #3b82f6 !important;
        }
        
        /* Force scrollbar to always show */
        .form-content {
          scrollbar-gutter: stable;
        }
        .form-steps {
          display: flex;
          gap: 16px;
          margin-top: 12px;
        }
        .step {
          display: flex;
          align-items: center;
          gap: 8px;
          padding: 8px 12px;
          border-radius: 6px;
          background: #f3f4f6;
          color: #6b7280;
          font-size: 0.875rem;
          font-weight: 500;
        }
        .step.active {
          background: #3b82f6;
          color: white;
        }
        .step.completed {
          background: #10b981;
          color: white;
        }
        .step-number {
          display: flex;
          align-items: center;
          justify-content: center;
          width: 20px;
          height: 20px;
          border-radius: 50%;
          background: rgba(255, 255, 255, 0.2);
          font-size: 0.75rem;
          font-weight: 600;
        }
        .step.active .step-number,
        .step.completed .step-number {
          background: rgba(255, 255, 255, 0.3);
        }
      `}),e.jsx("button",{className:"mobile-menu-btn",onClick:()=>ee(!F),children:""}),e.jsxs("div",{className:`dashboard-sidebar soft-sidebar expanded ${F?"open":""}`,children:[e.jsx("div",{className:"sidebar-header sb-brand",children:e.jsxs("a",{href:"#",className:"sidebar-logo",children:[e.jsx("div",{className:"logo-icon",children:""}),e.jsx("span",{className:"logo-text sb-title",children:"BUILDHUB"})]})}),e.jsxs("nav",{className:"sidebar-nav sb-nav",children:[e.jsx("a",{href:"#",className:`nav-item sb-item ${s==="dashboard"?"active":""}`,onClick:ie=>{ie.preventDefault(),a("dashboard")},children:e.jsx("span",{className:"sb-label",children:"Dashboard"})}),e.jsxs("a",{href:"#",className:`nav-item sb-item ${s==="requests"?"active":""}`,onClick:ie=>{ie.preventDefault(),a("requests")},children:[e.jsx("span",{className:"sb-label",children:"Layout Requests"}),(tt>0||Qt>0)&&e.jsxs("div",{style:{display:"inline-flex",gap:6,marginLeft:"auto"},children:[tt>0&&e.jsx("span",{className:"nav-badge pending pulse",title:"Pending requests",children:tt}),Qt>0&&e.jsx("span",{className:"nav-badge accepted",title:"Accepted requests",children:Qt})]})]}),e.jsxs("a",{href:"#",className:`nav-item sb-item ${s==="designs"?"active":""}`,onClick:ie=>{ie.preventDefault(),a("designs")},children:[e.jsx("span",{className:"sb-label",children:"My Designs"}),Et>0&&e.jsx("span",{className:"nav-badge pulse",style:{marginLeft:"auto"},children:Et})]}),e.jsxs("a",{href:"#",className:`nav-item sb-item ${s==="library"?"active":""}`,onClick:ie=>{ie.preventDefault(),a("library")},children:[e.jsx("span",{className:"sb-label",children:"My Layout Library"}),Jt>0&&e.jsx("span",{className:"nav-badge pulse",style:{marginLeft:"auto"},children:Jt})]}),e.jsx("a",{href:"#",className:`nav-item sb-item ${s==="house-plans"?"active":""}`,onClick:ie=>{ie.preventDefault(),a("house-plans")},children:e.jsx("span",{className:"sb-label",children:"House Plans"})})]}),e.jsxs("div",{className:"sidebar-footer sb-footer",style:{padding:"12px"},children:[e.jsx("div",{style:{position:"relative"},children:K&&e.jsxs("div",{className:"profile-dropdown open",style:{position:"absolute",bottom:"52px",left:0,right:0,zIndex:1e3},children:[e.jsx("div",{className:"dropdown-header",children:"My Account"}),e.jsx("button",{type:"button",className:"dropdown-item",onClick:Sa,children:"Logout"})]})}),e.jsx("div",{className:"sidebar-version",style:{marginTop:10},children:"v1.0.0"})]})]}),e.jsxs("div",{className:"dashboard-main soft-main shifted",children:[v&&e.jsxs("div",{className:"alert alert-error",children:[v,e.jsx("button",{onClick:()=>b(""),className:"alert-close",children:""})]}),x&&e.jsxs("div",{className:"alert alert-success",children:[x,e.jsx("button",{onClick:()=>C(""),className:"alert-close",children:""})]}),s==="dashboard"&&xa(),s==="requests"&&ha(),s==="designs"&&ya(),s==="library"&&Dn(),s==="house-plans"&&Ma(),s==="profile"&&Ws(),j&&e.jsx("div",{className:"form-modal",children:e.jsx("div",{className:"form-content",children:e.jsxs("div",{className:"form-header",children:[e.jsx("h3",{children:"Upload Design"}),e.jsx("p",{children:"Submit your architectural design for a client request"})]})})}),Zs(),j&&e.jsx("div",{className:"form-modal",children:e.jsxs("div",{className:"form-content",style:{maxWidth:"1200px",width:"90vw"},children:[e.jsxs("div",{className:"form-header",children:[e.jsx("h3",{children:"Create Design"}),e.jsx("p",{children:"Submit your architectural design with comprehensive technical details"}),e.jsxs("div",{className:"upload-steps",children:[e.jsx("div",{className:`step ${L>=0?"active":""}`,children:"1. Basic Info"}),e.jsx("div",{className:`step ${L>=1?"active":""}`,children:"2. Technical Details"}),e.jsx("div",{className:`step ${L>=2?"active":""}`,children:"3. Files & Submit"})]})]}),L===0&&e.jsxs("div",{className:"upload-step",children:[e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Send To"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{fontSize:"0.85rem"},children:"By Request (optional)"}),e.jsxs("select",{value:at.request_id,onChange:ie=>Xe({...at,request_id:ie.target.value}),children:[e.jsx("option",{value:"",children:"Choose a client request"}),l.map(ie=>e.jsxs("option",{value:ie.id,children:[ie.client_name," - ",ie.plot_size," sq ft (",ie.budget_range,")"]},ie.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{style:{fontSize:"0.85rem"},children:"Direct Homeowner ID (optional)"}),e.jsx("input",{type:"number",value:at.homeowner_id,onChange:ie=>Xe({...at,homeowner_id:ie.target.value}),placeholder:"e.g., 123"})]})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Design Title *"}),e.jsx("input",{type:"text",value:at.design_title,onChange:ie=>Xe({...at,design_title:ie.target.value}),placeholder:"e.g., Modern 3BHK Villa Design",required:!0})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Description"}),e.jsx("textarea",{value:at.description,onChange:ie=>Xe({...at,description:ie.target.value}),placeholder:"Describe your design features, materials, and special considerations...",rows:"4"})]}),e.jsxs("div",{className:"form-actions",children:[e.jsx("button",{type:"button",onClick:()=>B(!1),className:"btn btn-secondary",children:"Cancel"}),e.jsx("button",{type:"button",onClick:()=>P(1),className:"btn btn-primary",disabled:!at.design_title,children:"Next: Technical Details"})]})]}),L===1&&e.jsx("div",{className:"upload-step",children:e.jsx(l2,{data:at,setData:Xe,onNext:()=>P(2),onPrev:()=>P(0)})}),L===2&&e.jsxs("div",{className:"upload-step",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Design Files *"}),e.jsx("input",{type:"file",multiple:!0,accept:".pdf,.jpg,.jpeg,.png,.gif,.webp,.svg,.heic,.doc,.docx,.ppt,.pptx,.xls,.xlsx,.txt,.rtf,.dwg,.dxf,.ifc,.rvt,.skp,.3dm,.obj,.stl,.zip,.rar,.7z,.mp4,.mov,.avi,.m4v",onChange:ie=>Xe({...at,files:Array.from(ie.target.files)}),required:!0}),e.jsx("p",{className:"form-help",children:"Select multiple files (images, PDFs, docs, CAD/3D, archives, videos)"})]}),e.jsxs("div",{className:"review-section",children:[e.jsx("h4",{children:"Review Your Submission"}),e.jsxs("div",{className:"review-grid",children:[e.jsxs("div",{className:"review-item",children:[e.jsx("div",{className:"review-label",children:"Design Title"}),e.jsx("div",{className:"review-value",children:at.design_title||"Not provided"})]}),e.jsxs("div",{className:"review-item",children:[e.jsx("div",{className:"review-label",children:"Description"}),e.jsx("div",{className:"review-value",children:at.description||"No description"})]}),at.technical_details?.floor_plans?.layout_description&&e.jsxs("div",{className:"review-item",children:[e.jsx("div",{className:"review-label",children:"Floor Plan Layout"}),e.jsx("div",{className:"review-value",children:at.technical_details.floor_plans.layout_description})]}),e.jsxs("div",{className:"review-item",children:[e.jsx("div",{className:"review-label",children:"Files"}),e.jsxs("div",{className:"review-value",children:[at.files.length," file(s) selected"]})]})]})]}),e.jsxs("div",{className:"form-actions",children:[e.jsx("button",{type:"button",onClick:()=>P(1),className:"btn btn-secondary",children:"Back"}),e.jsx("button",{type:"button",onClick:da,disabled:p||at.files.length===0,className:"btn btn-primary",children:p?"Uploading...":"Upload Design"})]})]})]})})]}),e.jsx(c2,{isOpen:Bt,onClose:()=>{xt(!1),Ut(null)},onSubmit:Vt,planData:{plan_name:dt?`${dt.homeowner_name||"Client"} House Plan`:"",rooms:[],scale_ratio:1.2},loading:wt})]})},b6=({onCreateFromAssigned:t,expandedAssignments:s,setExpandedAssignments:a,toast:r})=>{const[o,l]=Ar.useState([]),[A,u]=Ar.useState(!1),[h,p]=Ar.useState(""),m=(x,C)=>{const Q=C&&typeof C=="object"?C:{},j=(x||"").toString(),B=P=>Q[P]??null,L=P=>{const F=j.match(new RegExp(P+":\\s*([^\\n]+)","i"));return F?F[1].trim():null};return{rooms:B("rooms")??L("rooms")??L("bedrooms")??null,family_needs:B("family_needs")??L("family needs")??null,style:B("preferred_style")??B("style")??B("aesthetic")??L("style")??null,plot_shape:B("plot_shape")??L("plot shape")??null,topography:B("topography")??L("topography")??null,development_laws:B("development_laws")??L("development laws")??null,notes:B("notes")??null,raw:j.trim()}},v=async()=>{u(!0),p("");try{const C=await(await fetch("/buildhub/backend/api/architect/get_assigned_requests.php")).json();if(C.success){const Q=(C.assignments||[]).filter(j=>j.assignment_status==="sent");l(Q)}else p(C.message||"Failed to load assigned requests")}catch{p("Error loading assigned requests")}finally{u(!1)}};Ar.useEffect(()=>{v()},[]);const b=async(x,C)=>{try{const j=await(await fetch("/buildhub/backend/api/architect/respond_assignment.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({assignment_id:x,action:C})})).json().catch(()=>({}));return j&&j.success?(C==="accept"?r.success("Assignment accepted! The request is now available in your Available Requests section."):C==="decline"&&r.success("Assignment declined."),await v(),window.location.reload()):r.error("Failed to respond to assignment: "+(j.message||"Unknown error")),j&&j.success&&j.status||null}catch(Q){return console.error("Error responding to assignment:",Q),r.error("Network error occurred. Please try again."),null}};return e.jsx("div",{className:"section-content",children:A?e.jsx("div",{className:"loading",children:"Loading assigned requests..."}):o.length===0?e.jsxs("div",{className:"empty-state",children:[e.jsx("div",{className:"empty-icon",children:""}),e.jsx("h3",{children:"No Assigned Requests"}),e.jsx("p",{children:"Homeowners havent assigned requests to you yet."}),e.jsx("button",{className:"btn btn-secondary",onClick:v,children:"Refresh"})]}):e.jsx("div",{className:"item-list",children:o.map(x=>e.jsxs("div",{className:"list-item",children:[e.jsx("div",{className:"item-icon",children:""}),e.jsxs("div",{className:"item-content",children:[e.jsxs("h4",{className:"item-title",children:["Request #",x.layout_request.id,"  ",x.layout_request.plot_size," sq ft"]}),e.jsxs("p",{className:"item-subtitle",children:["Budget: ",x.layout_request.budget_range,"  From: ",x.homeowner.name]}),e.jsxs("p",{className:"item-meta",children:["Assigned: ",new Date(x.assigned_at).toLocaleDateString(),"  Status: ",x.assignment_status]}),x.message&&e.jsxs("p",{className:"item-description",children:["Message: ",x.message]}),s[x.assignment_id]&&(()=>{const C=m(x.layout_request.requirements,x.layout_request.requirements_parsed),Q=[C.rooms?{label:"Rooms",value:C.rooms}:null,C.family_needs?{label:"Family needs",value:C.family_needs}:null,x.layout_request.preferred_style||C.style?{label:"Style",value:x.layout_request.preferred_style||C.style}:null].filter(Boolean);return e.jsxs("div",{className:"details-card",children:[e.jsx("div",{className:"details-header",children:e.jsx("strong",{children:"Requirements"})}),e.jsxs("div",{className:"details-grid",children:[e.jsxs("div",{children:[e.jsx("h5",{children:"Site & Budget"}),e.jsxs("div",{className:"chips",children:[e.jsxs("span",{className:"chip",children:[e.jsx("strong",{children:"Plot:"})," ",x.layout_request.plot_size||""]}),e.jsxs("span",{className:"chip",children:[e.jsx("strong",{children:"Budget:"})," ",x.layout_request.budget_range||""]}),e.jsxs("span",{className:"chip",children:[e.jsx("strong",{children:"Location:"})," ",x.layout_request.location||""]}),e.jsxs("span",{className:"chip",children:[e.jsx("strong",{children:"Timeline:"})," ",x.layout_request.timeline||""]}),C.plot_shape&&e.jsxs("span",{className:"chip",children:[e.jsx("strong",{children:"Plot shape:"})," ",C.plot_shape]}),C.topography&&e.jsxs("span",{className:"chip",children:[e.jsx("strong",{children:"Topography:"})," ",C.topography]}),C.development_laws&&e.jsxs("span",{className:"chip",children:[e.jsx("strong",{children:"Dev. laws:"})," ",C.development_laws]})]})]}),e.jsxs("div",{children:[e.jsx("h5",{children:"Preferences"}),e.jsxs("div",{className:"chips",children:[(x.layout_request.layout_type||"custom")&&e.jsxs("span",{className:"chip",children:[e.jsx("strong",{children:"Type:"})," ",x.layout_request.layout_type||"custom"]}),Q.map((j,B)=>e.jsxs("span",{className:"chip",children:[e.jsxs("strong",{children:[j.label,":"]})," ",j.value]},B)),C.style&&e.jsxs("span",{className:"chip",children:[e.jsx("strong",{children:"Style:"})," ",C.style]}),x.layout_request.library?.title&&e.jsxs("span",{className:"chip",children:[e.jsx("strong",{children:"Library:"})," ",x.layout_request.library.title]})]})]}),e.jsxs("div",{className:"span-2",children:[e.jsx("h5",{children:"Notes"}),e.jsx("p",{className:"item-description",children:C.notes||(C.raw?null:x.layout_request.requirements)||""}),!C.notes&&C.raw&&e.jsx("div",{className:"muted",style:{fontSize:12},children:"Original notes available in raw request."}),x.layout_request.library?.image_url&&e.jsx("div",{className:"preview-row",children:e.jsx("img",{src:x.layout_request.library.image_url,alt:"Selected layout",className:"preview-image"})}),x.layout_request.library?.file_url&&e.jsxs("div",{className:"preview-row",style:{marginTop:8,display:"flex",gap:8},children:[e.jsx("a",{className:"btn btn-secondary",href:x.layout_request.library.file_url,target:"_blank",rel:"noopener noreferrer",children:"View Layout File"}),e.jsx("a",{className:"btn",href:x.layout_request.library.file_url,download:!0,children:"Download"})]})]})]})]})})()]}),e.jsxs("div",{className:"item-actions",children:[e.jsx("button",{className:"btn btn-secondary",onClick:v,children:"Refresh"}),e.jsx("button",{className:"btn",onClick:()=>a(C=>({...C,[x.assignment_id]:!C[x.assignment_id]})),children:s[x.assignment_id]?"Hide Details":"Details"}),x.assignment_status==="sent"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"btn btn-success",onClick:()=>b(x.assignment_id,"accept"),children:"Accept"}),e.jsx("button",{className:"btn btn-danger",onClick:()=>b(x.assignment_id,"reject"),children:"Reject"})]}),e.jsxs("div",{style:{display:"flex",gap:8},children:[e.jsx("button",{className:"btn btn-primary",disabled:x.assignment_status!=="accepted",title:x.assignment_status!=="accepted"?"Accept the request to create a design":void 0,onClick:()=>t?.(x.layout_request.id),children:"Create Design"}),e.jsx("button",{className:"btn btn-secondary",onClick:()=>{b(x.assignment_id,"reject")},children:"Remove"})]})]})]},x.assignment_id))})})},w6=()=>e.jsxs("div",{style:{maxWidth:600,margin:"40px auto",padding:24,background:"#fff",borderRadius:8,boxShadow:"0 2px 12px rgba(0,0,0,0.07)"},children:[e.jsx("h2",{children:"Authorized Redirect URIs for Google OAuth"}),e.jsxs("p",{children:["Copy and paste these URIs into your Google Cloud Console under ",e.jsx("b",{children:"Authorized redirect URIs"})," for your OAuth Client ID:"]}),e.jsx("pre",{style:{background:"#f5f5f5",padding:16,borderRadius:6,fontSize:"1.05rem"},children:`http://localhost:3000
http://localhost`}),e.jsxs("p",{children:[e.jsx("b",{children:"Note:"})," For Google Identity Services (the button you use), you usually only need to set ",e.jsx("b",{children:"Authorized JavaScript origins"}),". If you use OAuth redirect flow, add these as redirect URIs."]})]});function Op({steps:t=[],current:s=0}){return e.jsx("div",{className:"wizard-stepper",role:"navigation","aria-label":"Form progress",children:t.map((a,r)=>e.jsxs("div",{className:`step ${r<=s?"active":""}`,children:[e.jsx("div",{className:"step-index",children:String(r+1).padStart(2,"0")}),e.jsx("div",{className:"step-label",children:a}),r<t.length-1&&e.jsx("div",{className:"step-divider"})]},r))})}function Mp({title:t,subtitle:s,stepper:a,children:r,onBack:o,onClose:l}){return e.jsxs("div",{className:"wizard-page",children:[e.jsx("aside",{className:"wizard-aside","aria-label":"help",children:e.jsxs("div",{className:"aside-card",children:[e.jsx("div",{className:"aside-illustration",children:""}),e.jsx("h3",{children:"BuildHub"}),e.jsx("p",{children:"Guided forms to collect the right information quickly."})]})}),e.jsxs("main",{className:"wizard-main",children:[e.jsxs("header",{className:"wizard-header",children:[e.jsxs("div",{children:[e.jsx("h1",{children:t}),s&&e.jsx("p",{className:"muted",children:s})]}),e.jsxs("div",{className:"wizard-actions",children:[o&&e.jsx("button",{className:"btn btn-secondary",onClick:o,type:"button",children:"Back"}),l&&e.jsx("button",{className:"btn btn-ghost",onClick:l,type:"button","aria-label":"Close",children:""})]})]}),a,e.jsx("section",{className:"wizard-content",children:r})]})]})}const j6=({formData:t={},onStyleChange:s,showSuggestions:a=!0,autoSelect:r=!1})=>{const[o,l]=N.useState([]),[A,u]=N.useState(!1),[h,p]=N.useState(""),[m,v]=N.useState("");N.useEffect(()=>{a&&Object.keys(t).length>0&&b()},[t,a]);const b=async()=>{u(!0),p("");try{const j=parseFloat(t.plot_size||0),B=parseFloat(t.building_size||0),L=t.budget_range||"",P=parseInt(t.num_floors||1),F=t.rooms||[],ee=t.location||"";let K=0;L.includes("5-10")?K=75e5:L.includes("10-20")?K=15e6:L.includes("20-30")?K=25e6:L.includes("30-50")?K=4e7:L.includes("50-75")?K=625e5:L.includes("75 Lakhs - 1 Crore")?K=875e5:L.includes("1-2 Crores")?K=15e7:L.includes("2-5 Crores")?K=35e7:L.includes("5+ Crores")&&(K=75e7);let q=j;t.plot_unit==="cents"?q=j*435.6:t.plot_unit==="acres"&&(q=j*43560);const E=[];K>=1e8&&(E.push({name:"Modern Luxury",description:"Ultra-modern design with premium materials and smart home integration",features:["Glass facades","Smart home automation","Premium marble","Landscaped gardens","Swimming pool"],budgetRange:"1+ Crores",suitability:"Very High",image:"",reason:"Perfect for luxury budget with premium features"}),E.push({name:"Mediterranean Villa",description:"Elegant Mediterranean-inspired design with spacious layouts",features:["Terracotta roofs","Arched windows","Open courtyards","Natural stone","Private gardens"],budgetRange:"1+ Crores",suitability:"Very High",image:"",reason:"Ideal for large plots with luxury budget"}),E.push({name:"Contemporary Mansion",description:"Sophisticated contemporary design with high-end finishes",features:["Modern architecture","Premium materials","Smart lighting","Home theater","Wine cellar"],budgetRange:"1+ Crores",suitability:"Very High",image:"",reason:"Perfect for high-end contemporary living"})),K>=5e6&&K<1e8&&(E.push({name:"Modern Contemporary",description:"Clean lines, open spaces, and modern materials",features:["Minimalist design","Large windows","Open floor plans","Modern fixtures","Energy efficient"],budgetRange:"50 Lakhs - 1 Crore",suitability:"Very High",image:"",reason:"Excellent balance of modern design and functionality"}),E.push({name:"Scandinavian",description:"Nordic-inspired design emphasizing simplicity and functionality",features:["Light wood finishes","Natural lighting","Minimalist decor","Cozy interiors","Eco-friendly"],budgetRange:"50 Lakhs - 1 Crore",suitability:"High",image:"",reason:"Perfect for modern families seeking comfort and style"}),E.push({name:"Industrial Modern",description:"Urban-inspired design with exposed materials and modern elements",features:["Exposed brick","Steel beams","Concrete finishes","High ceilings","Modern fixtures"],budgetRange:"50 Lakhs - 1 Crore",suitability:"High",image:"",reason:"Great for urban settings with modern aesthetic"})),K>=2e6&&K<5e6&&(E.push({name:"Traditional Kerala",description:"Classic Kerala architecture with modern amenities",features:["Sloped roofs","Wooden elements","Courtyard design","Natural ventilation","Local materials"],budgetRange:"20-50 Lakhs",suitability:"Very High",image:"",reason:"Perfect for Kerala climate and cultural preferences"}),E.push({name:"Modern Minimalist",description:"Simple, functional design focusing on essentials",features:["Clean lines","Neutral colors","Functional spaces","Cost-effective","Easy maintenance"],budgetRange:"20-50 Lakhs",suitability:"Very High",image:"",reason:"Ideal for budget-conscious families seeking modern design"}),E.push({name:"Contemporary Indian",description:"Modern Indian design blending traditional and contemporary elements",features:["Indian motifs","Modern layout","Local materials","Cultural elements","Functional design"],budgetRange:"20-50 Lakhs",suitability:"High",image:"",reason:"Perfect blend of tradition and modernity"})),K>=5e5&&K<2e6&&(E.push({name:"Affordable Modern",description:"Modern design optimized for budget constraints",features:["Simple design","Cost-effective materials","Functional layout","Energy efficient","Easy construction"],budgetRange:"5-20 Lakhs",suitability:"Very High",image:"",reason:"Best value for money with modern appeal"}),E.push({name:"Traditional Simple",description:"Simple traditional design with essential features",features:["Traditional layout","Local materials","Simple construction","Cost-effective","Cultural appeal"],budgetRange:"5-20 Lakhs",suitability:"High",image:"",reason:"Perfect for traditional families on a budget"})),q>=5e3&&(E.push({name:"Farmhouse Style",description:"Spacious single-story design with large outdoor areas",features:["Single story","Large verandas","Garden spaces","Natural materials","Outdoor living"],budgetRange:"Any",suitability:"High",image:"",reason:"Perfect for large plots with outdoor living focus"}),E.push({name:"Ranch Style",description:"Single-story design with horizontal emphasis",features:["Single story","Wide layout","Large windows","Outdoor spaces","Easy access"],budgetRange:"Any",suitability:"High",image:"",reason:"Ideal for large plots with accessibility needs"})),q<2e3&&(E.push({name:"Compact Modern",description:"Space-efficient modern design for small plots",features:["Space optimization","Vertical design","Multi-functional spaces","Smart storage","Modern fixtures"],budgetRange:"Any",suitability:"Very High",image:"",reason:"Maximizes space efficiency for small plots"}),E.push({name:"Tiny House Style",description:"Minimalist design maximizing every square foot",features:["Minimal design","Multi-purpose furniture","Vertical storage","Natural light","Eco-friendly"],budgetRange:"Any",suitability:"High",image:"",reason:"Perfect for small plots with minimalist lifestyle"})),P>=3&&E.push({name:"Multi-story Modern",description:"Vertical design optimized for multi-story construction",features:["Vertical gardens","Rooftop spaces","Elevator provision","Stacked design","Modern facade"],budgetRange:"30+ Lakhs",suitability:"High",image:"",reason:"Optimized for multi-story construction"}),F.includes("garage")&&E.push({name:"Contemporary with Garage",description:"Modern design with integrated garage space",features:["Integrated garage","Modern facade","Functional layout","Car-friendly design","Modern materials"],budgetRange:"20+ Lakhs",suitability:"High",image:"",reason:"Perfect for families needing garage space"}),(F.includes("terrace")||F.includes("balcony"))&&E.push({name:"Mediterranean with Terraces",description:"Mediterranean-inspired design with outdoor spaces",features:["Terrace spaces","Outdoor living","Natural materials","Mediterranean elements","Garden integration"],budgetRange:"30+ Lakhs",suitability:"High",image:"",reason:"Ideal for outdoor living enthusiasts"}),ee.toLowerCase().includes("kerala")&&E.push({name:"Kerala Traditional",description:"Authentic Kerala architecture with local materials",features:["Tiled roofs","Wooden pillars","Nalukettu design","Local materials","Climate adaptation"],budgetRange:"15+ Lakhs",suitability:"Very High",image:"",reason:"Perfect for Kerala climate and cultural preferences"}),K>=2e6&&E.push({name:"Eco-Friendly Modern",description:"Sustainable design with green building practices",features:["Solar panels","Rainwater harvesting","Natural lighting","Sustainable materials","Energy efficient"],budgetRange:"20+ Lakhs",suitability:"High",image:"",reason:"Perfect for environmentally conscious families"});const U=E.filter((V,H,I)=>H===I.findIndex(M=>M.name===V.name)).sort((V,H)=>{const I={"Very High":4,High:3,Medium:2,Low:1};return I[H.suitability]-I[V.suitability]});if(l(U),r&&U.length>0&&!m){const V=U[0];v(V.name),s&&s(V),console.log(" Auto-selected house style:",V.name)}}catch(j){p("Error generating suggestions: "+j.message)}finally{u(!1)}},x=j=>{v(j.name),s&&s(j)},C=j=>{switch(j){case"Very High":return"#28a745";case"High":return"#17a2b8";case"Medium":return"#ffc107";case"Low":return"#dc3545";default:return"#6c757d"}},Q=j=>{switch(j){case"Very High":return"";case"High":return"";case"Medium":return"";case"Low":return"";default:return""}};return A?e.jsx("div",{className:"house-style-suggestions-container",children:e.jsxs("div",{className:"style-loading",children:[e.jsx("div",{className:"loading-spinner"}),e.jsx("span",{children:"Generating style suggestions..."})]})}):h?e.jsx("div",{className:"house-style-suggestions-container",children:e.jsxs("div",{className:"style-error",children:[e.jsx("i",{className:"fas fa-exclamation-triangle"}),h]})}):!a||o.length===0?null:e.jsxs("div",{className:"house-style-suggestions-container",children:[e.jsxs("div",{className:"style-header",children:[e.jsxs("h4",{className:"style-title",children:[e.jsx("i",{className:"fas fa-palette"}),"House Style Suggestions"]}),e.jsx("p",{className:"style-subtitle",children:"AI-powered recommendations based on your project details"})]}),e.jsx("div",{className:"style-suggestions-grid",children:o.map((j,B)=>e.jsxs("div",{className:`style-card ${m===j.name?"selected":""}`,onClick:()=>x(j),children:[e.jsxs("div",{className:"style-card-header",children:[e.jsx("div",{className:"style-icon",children:j.image}),e.jsxs("div",{className:"style-info",children:[e.jsx("h5",{className:"style-name",children:j.name}),e.jsx("div",{className:"style-budget",children:j.budgetRange})]}),e.jsx("div",{className:"style-suitability",children:e.jsxs("span",{className:"suitability-badge",style:{color:C(j.suitability)},children:[Q(j.suitability)," ",j.suitability]})})]}),e.jsx("div",{className:"style-description",children:j.description}),e.jsxs("div",{className:"style-features",children:[e.jsx("h6",{className:"features-title",children:"Key Features:"}),e.jsx("ul",{className:"features-list",children:j.features.map((L,P)=>e.jsxs("li",{className:"feature-item",children:[e.jsx("i",{className:"fas fa-check"}),L]},P))})]}),e.jsx("div",{className:"style-actions",children:e.jsx("button",{className:`select-style-btn ${m===j.name?"selected":""}`,onClick:L=>{L.stopPropagation(),x(j)},children:m===j.name?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-check"}),"Selected"]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-plus"}),"Select Style"]})})})]},B))}),m&&e.jsxs("div",{className:"selected-style-info",children:[e.jsxs("div",{className:"selected-style-header",children:[e.jsx("i",{className:"fas fa-check-circle"}),e.jsxs("span",{children:["Selected: ",m]})]}),e.jsx("p",{className:"selected-style-note",children:"This style will be used for architect matching and design recommendations."})]})]})},_6=t=>({"5-10 Lakhs":75e4,"10-20 Lakhs":15e5,"20-30 Lakhs":25e5,"30-50 Lakhs":4e6,"50-75 Lakhs":625e4,"75 Lakhs - 1 Crore":875e4,"1-2 Crores":15e6,"2-5 Crores":35e6,"5+ Crores":75e6})[t]||0,B6=["Mumbai","Delhi","Bangalore","Hyderabad","Ahmedabad","Chennai","Kolkata","Surat","Pune","Jaipur","Lucknow","Kanpur","Nagpur","Indore","Thane","Bhopal","Visakhapatnam","Pimpri-Chinchwad","Patna","Vadodara","Ghaziabad","Ludhiana","Agra","Nashik","Faridabad","Meerut","Rajkot","Kalyan-Dombivli","Vasai-Virar","Varanasi","Srinagar","Aurangabad","Dhanbad","Amritsar","Navi Mumbai","Allahabad","Howrah","Ranchi","Gwalior","Jabalpur","Coimbatore","Vijayawada","Jodhpur","Madurai","Raipur","Kota","Guwahati","Chandigarh","Solapur","Hubballi-Dharwad","Mysore","Tiruchirappalli","Bareilly","Aligarh","Tiruppur","Gurgaon","Moradabad","Jalandhar","Bhubaneswar","Salem","Warangal","Mira-Bhayandar","Jalgaon","Guntur","Thiruvananthapuram","Bhiwandi","Saharanpur","Gorakhpur","Bikaner","Amravati","Noida","Jamshedpur","Bhilai","Cuttack","Firozabad","Kochi","Nellore","Bhavnagar","Dehradun","Durgapur","Asansol","Rourkela","Nanded","Kolhapur","Ajmer","Akola","Gulbarga","Jamnagar","Ujjain","Loni","Siliguri","Jhansi","Ulhasnagar","Jammu","Sangli-Miraj & Kupwad","Mangalore","Erode","Belgaum","Ambattur","Tirunelveli","Malegaon","Gaya","Jalna","Udaipur","Maheshtala","Davanagere","Kozhikode","Kurnool","Rajpur Sonarpur","Rajahmundry","Bokaro","South Dumdum","Bellary","Patiala","Gopalpur","Agartala","Bhagalpur","Muzaffarnagar","Bhatpara","Panihati","Latur","Dhule","Tirupati","Rohtak","Korba","Bhilwara","Berhampur","Muzaffarpur","Ahmednagar","Mathura","Kollam","Avadi","Kadapa","Kamarhati","Sambalpur","Bilaspur","Shahjahanpur","Satara","Bijapur","Rampur","Shivamogga","Chandrapur","Junagadh","Thrissur","Alwar","Bardhaman","Kulti","Kakinada","Nizamabad","Parbhani","Tumkur","Khammam","Ozhukarai","Bihar Sharif","Panipat","Darbhanga","Bally","Aizawl","Dewas","Ichalkaranji","Karnal","Bathinda","Jalna","Eluru","Kirari Suleman Nagar","Barasat","Purnia","Satna","Mau","Sonipat","Farrukhabad","Sagar","Rourkela","Durg","Imphal","Ratlam","Hapur","Arrah","Karimnagar","Anantapur","Etawah","Ambernath","North Dumdum","Bharatpur","Begusarai","New Delhi","Gandhidham","Baranagar","Tiruvottiyur","Pondicherry","Sikar","Thoothukudi","Rewa","Mirzapur","Raichur","Pali","Ramagundam","Haridwar","Vijayanagaram","Katihar","Nagarcoil","Sri Ganganagar","Karawal Nagar","Mango","Thanjavur","Bulandshahr","Uluberia","Murwara","Sambhal","Singrauli","Nadiad","Secunderabad","Naihati","Yamunanagar","Bidhan Nagar","Pallavaram","Bidar","Munger","Panchkula","Burhanpur","Raurkela Industrial Township","Kharagpur","Dindigul","Gandhinagar","Hospet","Nangloi Jat","English Bazar","Ongole","Deoghar","Chapra","Haldia","Khandwa","Nandyal","Chittoor","Morena","Amroha","Anand","Bhind","Bhalswa Jahangir Pur","Madhyamgram","Bhiwani","Navi Mumbai Panvel Raigad","Bahraich","Sultan Pur Majra","Sirsa","Dinapur Nizamat","Raebareli"];function N6(){const t=Wr(),s=Ni(),a=["Preliminary","Site","Family","Preferences","Review","Architect","Submit"],[r,o]=N.useState(0),[l,A]=N.useState({plot_size:"",building_size:"",plot_shape:"",topography:"",development_laws:"",family_needs:[],rooms:[],budget_range:"",aesthetic:"",requirements:"",location:"",timeline:"",num_floors:"",selected_layout_id:null,layout_type:"custom",selected_architect_ids:[],custom_budget:"",plot_unit:"cents",floor_rooms:{},expandedFloors:{1:!0},room_images:{},expandedRoomImages:{},orientation:"",site_considerations:"",material_preferences:[],budget_allocation:"",reference_images:[],site_images:[],room_requirements:{}}),[u,h]=N.useState([]),[p,m]=N.useState(null),[v,b]=N.useState(!1),[x,C]=N.useState(!1),[Q,j]=N.useState(0),B=()=>o(xe=>Math.max(xe-1,0)),[L,P]=N.useState({}),[F,ee]=N.useState({}),[K,q]=N.useState({}),E=N.useMemo(()=>{const xe=parseFloat(l.plot_size)||0;return xe?xe<1200?"small":xe<2400?"medium":xe<4e3?"large":xe<6e3?"xlarge":"estate":null},[l.plot_size]),U=N.useMemo(()=>{const xe=l.budget_range==="Custom"?parseFloat(l.custom_budget)||0:_6(l.budget_range);return Number.isFinite(xe)?xe:0},[l.budget_range,l.custom_budget]),V=N.useMemo(()=>{if(U>0)return U;const xe=parseFloat(l.building_size)||0;return xe>0?xe*2e3:0},[U,l.building_size]),H=N.useMemo(()=>U?U<2e6?"economy":U<5e6?"standard":U<1e7?"premium":"luxury":null,[U]),I=()=>{const xe={},et={};switch(r){case 0:{const Oe=parseFloat(l.plot_size),Bt=parseFloat(l.building_size);if((!Oe||Number.isNaN(Oe)||Oe<=0)&&(xe.plot_size="Enter a valid plot size"),(!Bt||Number.isNaN(Bt)||Bt<=0)&&(xe.building_size="Enter a valid building size"),l.budget_range||(xe.budget_range="Select a budget range"),l.budget_range==="Custom"){const xt=parseFloat(l.custom_budget);(!xt||Number.isNaN(xt)||xt<=0)&&(xe.custom_budget="Enter a valid custom budget")}break}case 1:{l.plot_shape||(xe.plot_shape="Select plot shape"),l.topography||(xe.topography="Select topography"),l.development_laws||(xe.development_laws="Select development laws");const Oe=parseInt(l.num_floors,10);(!Oe||Number.isNaN(Oe)||Oe<=0)&&(xe.num_floors="Enter number of floors");break}case 2:{(!Array.isArray(l.rooms)||l.rooms.length===0)&&(xe.rooms="Select at least one room type");break}case 3:{l.aesthetic||(xe.aesthetic="Choose a house style");break}case 5:{(!Array.isArray(l.selected_architect_ids)||l.selected_architect_ids.length===0)&&(xe.selected_architect_ids="Select at least one architect");break}}if(P(xe),ee(et),Object.keys(xe).length>0){s.error("Please fix the highlighted fields before continuing");return}o(Oe=>Math.min(Oe+1,a.length-1))},M=N.useMemo(()=>{const xe=parseFloat(l.building_size)||0,et=Array.isArray(l.rooms)?l.rooms.length:0;if(!xe&&!et)return null;const Oe=Math.min(18,Math.max(3,Math.round(xe/500)+Math.floor(et/2))),Bt=(()=>{const dt=new Date;return dt.setMonth(dt.getMonth()+Oe),dt})(),xt=[{name:"Planning",duration:1},{name:"Design",duration:1},{name:"Construction",duration:Math.max(1,Oe-2)}];return{months:Oe,estimatedCompletion:Bt,phases:xt}},[l.building_size,l.rooms]),re=xe=>{const et=parseInt(l.num_floors)||1,Oe={};for(let xt=1;xt<=et;xt++)Oe[`floor${xt}`]={};const Bt={garage:[1],master_bedroom:[1],kitchen:[1],dining_room:[1],living_room:[1],store_room:[1],bedrooms:[1,2],bathrooms:[1,2],attached_bathroom:[1,2],balcony:et>1?[2]:[1],terrace:[et],study_room:et>1?[2]:[1],prayer_room:et>1?[2]:[1],guest_room:et>1?[2]:[1]};return xe.forEach(xt=>{const wt=`floor${(Bt[xt]||[1])[0]}`;Oe[wt][xt]||(Oe[wt][xt]=1)}),Oe};N.useEffect(()=>{if(!localStorage.getItem("buildhub_tour_completed")){const et=setTimeout(()=>{C(!0),j(0)},1e3);return()=>clearTimeout(et)}},[]),N.useEffect(()=>{const xe=et=>{et.ctrlKey&&et.key==="h"&&(et.preventDefault(),C(!0),j(r))};return window.addEventListener("keydown",xe),()=>window.removeEventListener("keydown",xe)},[r]);const[G,Z]=N.useState([]),[fe,Ae]=N.useState(!1),[Ce,te]=N.useState(""),[he,k]=N.useState(""),[T,z]=N.useState(""),[le,X]=N.useState(""),[W,de]=N.useState("best"),[me,Be]=N.useState(null),[Qe,ut]=N.useState({}),[mt,Ve]=N.useState(!1),[je,Ft]=N.useState(1);N.useEffect(()=>{const xe=new URLSearchParams(window.location.search),et=xe.get("selected_layout_id"),Oe=xe.get("layout_type"),Bt=xe.get("plot_size"),xt=xe.get("action");A(dt=>({...dt,...et?{selected_layout_id:et}:{},...Oe?{layout_type:Oe}:{},...Bt?{plot_size:Bt}:{}})),xt==="send_to_contractors"&&Oe==="library"&&et&&(async()=>{b(!0);try{const Ut=await(await fetch("/buildhub/backend/api/homeowner/submit_request.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({plot_size:Bt||"",budget_range:"",requirements:"",location:"",timeline:"",selected_layout_id:et,layout_type:"library",plot_shape:"",topography:"",development_laws:"",family_needs:"",rooms:"",aesthetic:"",activate_for_contractors:!0})})).json();Ut.success?(window.dispatchEvent&&window.dispatchEvent(new CustomEvent("toast",{detail:{type:"success",message:"Sent to contractors"}})),window.history.back()):(console.error("Failed to send to contractors:",Ut.message),alert(Ut.message||"Failed to send to contractors"))}catch{console.error("Network error"),alert("Network error")}finally{b(!1)}})()},[]),N.useMemo(()=>{const xe=[...G];return W==="best"?xe.sort((et,Oe)=>{const Bt=et.avg_rating??-1,xt=Oe.avg_rating??-1;if(xt!==Bt)return xt-Bt;const dt=et.review_count??0;return(Oe.review_count??0)-dt}):W==="experience"?xe.sort((et,Oe)=>(Oe.experience_years??-1)-(et.experience_years??-1)):W==="recent"&&xe.sort((et,Oe)=>Oe.id-et.id),xe},[G,W]);const Rt=async(xe={})=>{Ae(!0),te("");try{const et=new URLSearchParams;xe.search&&xe.search.trim()&&et.append("search",xe.search.trim()),xe.specialization&&xe.specialization.trim()&&et.append("specialization",xe.specialization.trim()),xe.min_experience&&xe.min_experience>0&&et.append("min_experience",xe.min_experience);const Oe=et.toString(),Bt=`/buildhub/backend/api/homeowner/get_architects.php${Oe?`?${Oe}`:""}`;console.log("Fetching architects from:",Bt);const xt=await fetch(Bt,{method:"GET",headers:{"Content-Type":"application/json"},credentials:"include"});if(console.log("Response status:",xt.status),!xt.ok)throw new Error(`HTTP error! status: ${xt.status}`);const dt=await xt.json();console.log("Architects response:",dt),dt.success?Z(dt.architects||[]):te(dt.message||"Failed to load architects")}catch(et){console.error("Error fetching architects:",et),te("Error loading architects: "+et.message)}finally{Ae(!1)}};N.useEffect(()=>{r===5&&Rt({search:he,specialization:T,min_experience:le})},[r]),N.useEffect(()=>{if(r===5){const xe=setTimeout(()=>{Rt({search:he,specialization:T,min_experience:le})},500);return()=>clearTimeout(xe)}},[he,T,le,r]);async function at(){b(!0);try{if(!Array.isArray(l.selected_architect_ids)||l.selected_architect_ids.length===0){s.error("Please select at least one architect before submitting your request");return}const xe={plot_size:l.plot_size,building_size:l.building_size,budget_range:l.budget_range==="Custom"?l.custom_budget:l.budget_range,requirements:l.requirements,location:l.location,timeline:l.timeline,selected_layout_id:l.selected_layout_id,layout_type:l.layout_type,plot_shape:l.plot_shape,topography:l.topography,development_laws:l.development_laws,family_needs:Array.isArray(l.family_needs)?l.family_needs.join(","):l.family_needs,rooms:Array.isArray(l.rooms)?l.rooms.join(","):l.rooms,aesthetic:l.aesthetic,num_floors:l.num_floors,preferred_style:l.aesthetic,floor_rooms:l.floor_rooms||{},reference_images:l.reference_images||[],site_images:l.site_images||[],room_images:l.room_images||{}};if(console.log("Submitting data:",xe),console.log(" Floor rooms data being submitted:",l.floor_rooms),!xe.plot_size||!xe.building_size){s.error("Please fill in plot size and building size");return}if(isNaN(parseFloat(xe.plot_size))||isNaN(parseFloat(xe.building_size))){s.error("Plot size and building size must be valid numbers");return}console.log(" Submitting request to:","/buildhub/backend/api/homeowner/submit_request.php");const et=await fetch("/buildhub/backend/api/homeowner/submit_request.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(xe),credentials:"include"});if(console.log(" Response status:",et.status),console.log(" Response ok:",et.ok),!et.ok){const xt=await et.text();throw console.error(" HTTP error response:",xt),new Error(`HTTP error! status: ${et.status} - ${xt}`)}const Oe=await et.json();if(console.log(" Submit response:",Oe),!Oe.success){console.error(" Submit failed:",Oe.message),s.error(Oe.message||"Failed to submit");return}const Bt=Oe.request_id;console.log(" Assigning architects:",l.selected_architect_ids);try{console.log(" Submitting architect assignment to:","/buildhub/backend/api/homeowner/assign_architect.php");const xt=await fetch("/buildhub/backend/api/homeowner/assign_architect.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({layout_request_id:Bt,architect_ids:l.selected_architect_ids}),credentials:"include"});if(console.log(" Architect assignment response status:",xt.status),console.log(" Architect assignment response ok:",xt.ok),!xt.ok){const Ut=await xt.text();throw console.error(" Architect assignment HTTP error:",Ut),new Error(`HTTP error! status: ${xt.status} - ${Ut}`)}const dt=await xt.json();console.log(" Architect assignment response:",dt),dt.success?console.log(" Architects assigned successfully"):console.warn(" Architect assignment warning:",dt.message)}catch(xt){console.warn(" Architect assignment failed:",xt.message)}s.success("Request submitted successfully! Your custom design request has been created and assigned to the selected architects."),t("/homeowner-dashboard")}catch(xe){console.error("Submit error:",xe),s.error("Network error. Please try again.")}finally{b(!1)}}const Xe=N.useMemo(()=>({title:"File your Request",subtitle:"Approx 57 minutes"}),[]),pt=()=>null;return e.jsxs(Mp,{title:Xe.title,subtitle:Xe.subtitle,stepper:e.jsx(Op,{steps:a,current:r}),onBack:r>0?B:()=>window.history.back(),onClose:()=>window.history.back(),children:[r===0&&e.jsxs("div",{className:"section",children:[e.jsx("div",{className:"section-header",children:"Preliminary"}),e.jsxs("div",{className:"section-body",style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(280px, 1fr))",gap:"20px"},children:[e.jsxs("div",{className:"field",style:{gridColumn:"1 / -1"},children:[e.jsx("label",{style:{fontSize:"18px",fontWeight:"600",color:"#1f2937",marginBottom:"8px",display:"block"},children:" Plot Size"}),e.jsx("div",{style:{fontSize:"14px",color:"#6b7280",marginBottom:"12px"},children:"Enter your plot size to get accurate budget and timeline estimates"}),e.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center",backgroundColor:"#f9fafb",padding:"20px",borderRadius:"12px",border:"2px solid #e5e7eb"},children:[e.jsx("input",{type:"number",value:l.plot_size,onChange:xe=>{const et=xe.target.value;A(Oe=>({...Oe,plot_size:et}))},min:1,placeholder:"Enter plot size (e.g., 10 for 10 cents)",style:{flex:1,padding:"18px 24px",fontSize:"20px",fontWeight:"600",border:"2px solid #d1d5db",borderRadius:"8px",backgroundColor:"white",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"}}),e.jsxs("select",{value:l.plot_unit||"cents",onChange:xe=>A(et=>({...et,plot_unit:xe.target.value})),style:{padding:"12px 8px",fontSize:"14px",fontWeight:"500",border:"2px solid #e5e7eb",borderRadius:"8px",minWidth:"80px",maxWidth:"90px",backgroundColor:"white"},children:[e.jsx("option",{value:"cents",children:"Cents"}),e.jsx("option",{value:"acres",children:"Acres"}),e.jsx("option",{value:"sqft",children:"Sq Ft"})]})]}),e.jsx("div",{style:{fontSize:"12px",color:"#6b7280",marginTop:"8px"},children:l.plot_size&&l.plot_unit&&e.jsxs("span",{children:[l.plot_unit==="cents"&&`${l.plot_size} cents = ${(l.plot_size*435.6).toFixed(0)} sq ft`,l.plot_unit==="acres"&&`${l.plot_size} acres = ${(l.plot_size*43560).toFixed(0)} sq ft`,l.plot_unit==="sqft"&&`${l.plot_size} sq ft`]})})]}),e.jsxs("div",{className:"field",style:{gridColumn:"1 / -1"},children:[e.jsx("label",{style:{fontSize:"18px",fontWeight:"600",color:"#1f2937",marginBottom:"8px",display:"block"},children:" Building Size"}),e.jsx("div",{style:{fontSize:"14px",color:"#6b7280",marginBottom:"12px"},children:"Enter your desired building size in square feet"}),e.jsx("div",{style:{backgroundColor:"#f9fafb",padding:"20px",borderRadius:"12px",border:"2px solid #e5e7eb"},children:e.jsx("input",{type:"number",value:l.building_size,onChange:xe=>{const et=xe.target.value;A(Oe=>({...Oe,building_size:et}))},min:100,placeholder:"Enter building size in square feet (e.g., 2000)",style:{width:"100%",padding:"16px 20px",fontSize:"18px",fontWeight:"500",border:"2px solid #d1d5db",borderRadius:"8px",backgroundColor:"white",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.1)"}})})]}),e.jsxs("div",{className:"field",style:{gridColumn:"1 / -1"},children:[e.jsx("label",{style:{fontSize:"18px",fontWeight:"600",color:"#1f2937",marginBottom:"8px",display:"block"},children:" Budget Range"}),e.jsx("div",{style:{fontSize:"14px",color:"#6b7280",marginBottom:"12px"},children:"Select your budget range for the project"}),e.jsxs("select",{value:l.budget_range,onChange:xe=>A({...l,budget_range:xe.target.value}),style:{width:"100%",padding:"16px 20px",fontSize:"18px",fontWeight:"500",border:"2px solid #e5e7eb",borderRadius:"8px",backgroundColor:"white",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.1)"},children:[e.jsx("option",{value:"",children:"Select budget range"}),e.jsx("option",{value:"5-10 Lakhs",children:"5-10 Lakhs"}),e.jsx("option",{value:"10-20 Lakhs",children:"10-20 Lakhs"}),e.jsx("option",{value:"20-30 Lakhs",children:"20-30 Lakhs"}),e.jsx("option",{value:"30-50 Lakhs",children:"30-50 Lakhs"}),e.jsx("option",{value:"50-75 Lakhs",children:"50-75 Lakhs"}),e.jsx("option",{value:"75 Lakhs - 1 Crore",children:"75 Lakhs - 1 Crore"}),e.jsx("option",{value:"1-2 Crores",children:"1-2 Crores"}),e.jsx("option",{value:"2-5 Crores",children:"2-5 Crores"}),e.jsx("option",{value:"5+ Crores",children:"5+ Crores"}),e.jsx("option",{value:"Custom",children:"Custom Amount"})]}),l.budget_range==="Custom"&&e.jsx("div",{style:{marginTop:"16px"},children:e.jsx("input",{type:"number",value:l.custom_budget,onChange:xe=>A({...l,custom_budget:xe.target.value}),placeholder:"Enter custom budget amount in rupees",style:{width:"100%",padding:"16px 20px",fontSize:"18px",fontWeight:"500",border:"2px solid #e5e7eb",borderRadius:"8px",backgroundColor:"white",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.1)"}})})]}),e.jsxs("div",{className:"field",children:[e.jsx("label",{children:"Location"}),e.jsx(Jw,{options:B6,value:l.location,onChange:xe=>A({...l,location:xe}),placeholder:"Select or type your city",style:{width:"100%",padding:"12px 16px",fontSize:"16px",border:"2px solid #e5e7eb",borderRadius:"8px"}})]}),e.jsxs("div",{className:"field",children:[e.jsx("label",{children:"Timeline"}),e.jsxs("select",{value:l.timeline,onChange:xe=>A({...l,timeline:xe.target.value}),style:{width:"100%",padding:"12px 16px",fontSize:"16px",border:"2px solid #e5e7eb",borderRadius:"8px"},children:[e.jsx("option",{value:"",children:"Select timeline"}),e.jsx("option",{value:"1-3 months",children:"1-3 months"}),e.jsx("option",{value:"3-6 months",children:"3-6 months"}),e.jsx("option",{value:"6-12 months",children:"6-12 months"}),e.jsx("option",{value:"1-2 years",children:"1-2 years"}),e.jsx("option",{value:"2+ years",children:"2+ years"}),e.jsx("option",{value:"Flexible",children:"Flexible"})]})]})]}),e.jsx("div",{className:"wizard-footer",children:e.jsx("button",{className:"btn btn-primary",onClick:I,children:"Next"})})]}),r===1&&e.jsxs("div",{className:"section",children:[e.jsx("div",{className:"section-header",children:"Site Details"}),e.jsxs("div",{className:"section-body",style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(280px, 1fr))",gap:"20px"},children:[e.jsxs("div",{className:"field",children:[e.jsx("label",{children:"Plot Shape"}),e.jsxs("select",{value:l.plot_shape,onChange:xe=>A({...l,plot_shape:xe.target.value}),style:{width:"100%",padding:"12px 16px",fontSize:"16px",border:"2px solid #e5e7eb",borderRadius:"8px"},children:[e.jsx("option",{value:"",children:"Select plot shape"}),e.jsx("option",{value:"Rectangular",children:"Rectangular"}),e.jsx("option",{value:"Square",children:"Square"}),e.jsx("option",{value:"L-shaped",children:"L-shaped"}),e.jsx("option",{value:"Irregular",children:"Irregular"}),e.jsx("option",{value:"Corner",children:"Corner"})]})]}),e.jsxs("div",{className:"field",children:[e.jsx("label",{children:"Topography"}),e.jsxs("select",{value:l.topography,onChange:xe=>A({...l,topography:xe.target.value}),style:{width:"100%",padding:"12px 16px",fontSize:"16px",border:"2px solid #e5e7eb",borderRadius:"8px"},children:[e.jsx("option",{value:"",children:"Select topography"}),e.jsx("option",{value:"Flat",children:"Flat"}),e.jsx("option",{value:"Sloping",children:"Sloping"}),e.jsx("option",{value:"Hilly",children:"Hilly"}),e.jsx("option",{value:"Waterfront",children:"Waterfront"})]})]}),e.jsxs("div",{className:"field",children:[e.jsx("label",{children:"Number of Floors"}),e.jsxs("select",{value:l.num_floors,onChange:xe=>{const et=xe.target.value,Oe=Array.isArray(l.rooms)?l.rooms:[],Bt=re(Oe);A({...l,num_floors:et,floor_rooms:Bt})},style:{width:"100%",padding:"12px 16px",fontSize:"16px",border:"2px solid #e5e7eb",borderRadius:"8px"},children:[e.jsx("option",{value:"",children:"Select number of floors"}),e.jsx("option",{value:"1",children:"1 Floor (Ground Floor Only)"}),e.jsx("option",{value:"2",children:"2 Floors (G+1)"}),e.jsx("option",{value:"3",children:"3 Floors (G+2)"}),e.jsx("option",{value:"4",children:"4 Floors (G+3)"}),e.jsx("option",{value:"5",children:"5 Floors (G+4)"}),e.jsx("option",{value:"6+",children:"6+ Floors"})]})]}),e.jsxs("div",{className:"field",children:[e.jsx("label",{children:"Development Laws"}),e.jsxs("select",{value:l.development_laws,onChange:xe=>A({...l,development_laws:xe.target.value}),style:{width:"100%",padding:"12px 16px",fontSize:"16px",border:"2px solid #e5e7eb",borderRadius:"8px"},children:[e.jsx("option",{value:"",children:"Select development laws"}),e.jsx("option",{value:"Standard",children:"Standard"}),e.jsx("option",{value:"Restricted",children:"Restricted"}),e.jsx("option",{value:"Heritage",children:"Heritage"}),e.jsx("option",{value:"Coastal",children:"Coastal"}),e.jsx("option",{value:"Hill Station",children:"Hill Station"})]})]})]}),(V>0||E||H)&&e.jsxs("div",{style:{backgroundColor:"#f0fdf4",border:"1px solid #bbf7d0",borderRadius:"12px",padding:"20px",marginBottom:"20px"},children:[e.jsx("h3",{style:{margin:"0 0 16px 0",color:"#166534",fontSize:"18px"},children:" AI Suggestions"}),e.jsxs("div",{style:{fontSize:"14px",color:"#166534"},children:[E&&E!=="unknown"&&e.jsxs("div",{style:{marginBottom:"8px",padding:"8px",backgroundColor:"#dcfce7",border:"1px solid #bbf7d0",borderRadius:"4px"},children:[" For ",E," plot size, consider ",E==="small"?"[1, 2]":E==="medium"?"[1, 2, 3]":E==="large"?"[2, 3, 4]":E==="xlarge"?"[3, 4, 5, 6]":"[4, 5, 6]"," floors"]}),V&&V>0&&e.jsxs("div",{style:{marginBottom:"8px",padding:"8px",backgroundColor:"#dcfce7",border:"1px solid #bbf7d0",borderRadius:"4px"},children:[" Estimated cost: ",Math.round(V).toLocaleString()," (",Math.round(V/(l.building_size||1e3)),"/sq ft)"]}),H&&H!=="unknown"&&e.jsxs("div",{style:{marginBottom:"8px",padding:"8px",backgroundColor:"#dcfce7",border:"1px solid #bbf7d0",borderRadius:"4px"},children:[" Recommended materials for ",H," budget"]})]})]}),(L.num_floors||F.num_floors)&&e.jsxs("div",{style:{backgroundColor:"#f8fafc",border:"1px solid #e2e8f0",borderRadius:"12px",padding:"20px",marginBottom:"20px"},children:[e.jsx("h3",{style:{margin:"0 0 16px 0",color:"#1e293b",fontSize:"18px"},children:" Site Details Validation"}),L.num_floors&&e.jsxs("div",{style:{marginBottom:"8px",padding:"8px",backgroundColor:"#fef2f2",border:"1px solid #fecaca",borderRadius:"4px",color:"#dc2626"},children:[" Number of Floors: ",L.num_floors]}),F.num_floors&&e.jsxs("div",{style:{marginBottom:"8px",padding:"8px",backgroundColor:"#fffbeb",border:"1px solid #fed7aa",borderRadius:"4px",color:"#d97706"},children:[" Number of Floors: ",F.num_floors]})]}),e.jsxs("div",{className:"wizard-footer",children:[e.jsx("button",{className:"btn btn-secondary",onClick:B,children:"Back"}),e.jsx("button",{className:"btn btn-primary",onClick:I,children:"Next"})]})]}),r===2&&e.jsxs("div",{className:"section",children:[e.jsx("div",{className:"section-header",children:"Family Needs"}),e.jsxs("div",{className:"section-body",children:[e.jsxs("div",{className:"field",children:[e.jsx("label",{style:{fontSize:"20px",fontWeight:"700",color:"#1f2937",marginBottom:"24px",display:"block",textAlign:"center"},children:" Select Room Requirements"}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"16px",padding:"20px",backgroundColor:"#f8fafc",borderRadius:"16px",border:"2px solid #e2e8f0",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)"},children:[{key:"master_bedroom",label:"Master Bedroom",icon:"",category:"Essential"},{key:"bedrooms",label:"Bedrooms",icon:"",category:"Essential"},{key:"bathrooms",label:"Bathrooms",icon:"",category:"Essential"},{key:"attached_bathroom",label:"Attached Bathroom",icon:"",category:"Luxury"},{key:"kitchen",label:"Kitchen",icon:"",category:"Essential"},{key:"living_room",label:"Living Room",icon:"",category:"Essential"},{key:"dining_room",label:"Dining Room",icon:"",category:"Essential"},{key:"study_room",label:"Study Room",icon:"",category:"Optional"},{key:"prayer_room",label:"Prayer Room",icon:"",category:"Optional"},{key:"guest_room",label:"Guest Room",icon:"",category:"Optional"},{key:"store_room",label:"Store Room",icon:"",category:"Utility"},{key:"balcony",label:"Balcony",icon:"",category:"Luxury"},{key:"terrace",label:"Terrace",icon:"",category:"Luxury"},{key:"garage",label:"Garage",icon:"",category:"Utility"}].map(xe=>{const et=Array.isArray(l.rooms)&&l.rooms.includes(xe.key);return e.jsxs("button",{type:"button",onClick:()=>{const Oe=Array.isArray(l.rooms)?l.rooms:[],Bt=Oe.includes(xe.key)?Oe.filter(dt=>dt!==xe.key):[...Oe,xe.key],xt=re(Bt);A({...l,rooms:Bt,floor_rooms:xt})},style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"20px 16px",backgroundColor:et?"#dbeafe":"white",border:et?"3px solid #3b82f6":"2px solid #e5e7eb",borderRadius:"12px",cursor:"pointer",transition:"all 0.3s ease",position:"relative",minHeight:"120px",boxShadow:et?"0 8px 25px -5px rgba(59, 130, 246, 0.3)":"0 2px 4px rgba(0, 0, 0, 0.1)",transform:et?"translateY(-2px)":"translateY(0)",fontSize:"16px",fontWeight:"600"},onMouseEnter:Oe=>{et||(Oe.target.style.backgroundColor="#f1f5f9",Oe.target.style.borderColor="#94a3b8",Oe.target.style.transform="translateY(-1px)")},onMouseLeave:Oe=>{et||(Oe.target.style.backgroundColor="white",Oe.target.style.borderColor="#e5e7eb",Oe.target.style.transform="translateY(0)")},children:[e.jsx("div",{style:{position:"absolute",top:"8px",right:"8px",fontSize:"10px",fontWeight:"700",padding:"2px 6px",borderRadius:"4px",backgroundColor:xe.category==="Essential"?"#dcfce7":xe.category==="Luxury"?"#fef3c7":xe.category==="Utility"?"#e0e7ff":"#f3f4f6",color:xe.category==="Essential"?"#166534":xe.category==="Luxury"?"#92400e":xe.category==="Utility"?"#3730a3":"#6b7280",border:"1px solid",borderColor:xe.category==="Essential"?"#bbf7d0":xe.category==="Luxury"?"#fde68a":xe.category==="Utility"?"#c7d2fe":"#d1d5db"},children:xe.category}),e.jsx("div",{style:{fontSize:"32px",marginBottom:"8px",display:"flex",alignItems:"center",justifyContent:"center"},children:xe.icon}),e.jsx("div",{style:{fontSize:"14px",fontWeight:"600",color:"#374151",textAlign:"center",lineHeight:"1.3",marginBottom:"4px"},children:xe.label}),et&&e.jsx("div",{style:{position:"absolute",top:"8px",left:"8px",width:"24px",height:"24px",backgroundColor:"#3b82f6",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontSize:"14px",fontWeight:"700",boxShadow:"0 2px 4px rgba(59, 130, 246, 0.3)"},children:""})]},xe.key)})}),Array.isArray(l.rooms)&&l.rooms.length>0&&e.jsxs("div",{style:{marginTop:"20px",padding:"16px",backgroundColor:"#f0f9ff",border:"2px solid #0ea5e9",borderRadius:"12px",textAlign:"center"},children:[e.jsxs("div",{style:{fontSize:"16px",fontWeight:"600",color:"#0c4a6e",marginBottom:"8px"},children:[" ",l.rooms.length," Room",l.rooms.length!==1?"s":""," Selected"]}),e.jsx("div",{style:{fontSize:"14px",color:"#0369a1",display:"flex",flexWrap:"wrap",gap:"8px",justifyContent:"center"},children:l.rooms.map(xe=>e.jsx("span",{style:{backgroundColor:"#bae6fd",padding:"4px 8px",borderRadius:"6px",fontSize:"12px",fontWeight:"500"},children:xe.replace("_"," ").replace(/\b\w/g,et=>et.toUpperCase())},xe))})]})]}),l.num_floors&&parseInt(l.num_floors)>=1&&e.jsxs("div",{style:{marginTop:"32px",padding:"24px",backgroundColor:"#ffffff",border:"2px solid #e2e8f0",borderRadius:"16px",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px",paddingBottom:"16px",borderBottom:"2px solid #f1f5f9"},children:[e.jsx("h4",{style:{margin:0,fontSize:"20px",fontWeight:"700",color:"#1f2937",display:"flex",alignItems:"center",gap:"8px"},children:" Floor-wise Room Planning"}),e.jsxs("div",{style:{display:"flex",gap:"12px",alignItems:"center"},children:[e.jsxs("span",{style:{fontSize:"14px",color:"#059669",backgroundColor:"#f0fdf4",padding:"8px 12px",borderRadius:"8px",fontWeight:"600",border:"1px solid #bbf7d0"},children:[" ",l.num_floors," Floor",l.num_floors!=="1"?"s":""," Total"]}),(()=>{const xe=Array.from({length:parseInt(l.num_floors)||0},(et,Oe)=>{const Bt=`floor${Oe+1}`,xt=l.room_images?.[Bt]||{};return Object.values(xt).reduce((dt,Ut)=>dt+(Ut?.length||0),0)}).reduce((et,Oe)=>et+Oe,0);return xe>0?e.jsxs("span",{style:{fontSize:"12px",color:"#059669",backgroundColor:"#f0fdf4",padding:"4px 8px",borderRadius:"4px",border:"1px solid #bbf7d0"},children:[" ",xe," Images"]}):null})()]})]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(350px, 1fr))",gap:"20px"},children:Array.from({length:parseInt(l.num_floors)||0},(xe,et)=>{const Oe=et+1,Bt=`floor${Oe}`,xt=l.expandedFloors?.[Oe]||Oe===1;return e.jsxs("div",{style:{border:"2px solid #e5e7eb",borderRadius:"12px",padding:"20px",backgroundColor:xt?"#f8fafc":"#ffffff",boxShadow:xt?"0 4px 6px -1px rgba(0, 0, 0, 0.1)":"0 1px 3px rgba(0, 0, 0, 0.1)",transition:"all 0.3s ease"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"pointer",marginBottom:xt?"20px":"0",padding:"12px",backgroundColor:Oe===1?"#dbeafe":"#f0fdf4",borderRadius:"8px",border:`2px solid ${Oe===1?"#3b82f6":"#10b981"}`},onClick:()=>A(dt=>({...dt,expandedFloors:{...dt.expandedFloors,[Oe]:!xt}})),children:[e.jsx("h5",{style:{margin:0,fontSize:"16px",fontWeight:"700",color:Oe===1?"#1e40af":"#047857",display:"flex",alignItems:"center",gap:"8px"},children:Oe===1?" Ground Floor":` Floor ${Oe}`}),e.jsx("span",{style:{fontSize:"18px",color:Oe===1?"#1e40af":"#047857",fontWeight:"700"},children:xt?"":""})]}),xt&&e.jsx("div",{style:{display:"grid",gap:"12px"},children:l.rooms&&l.rooms.length>0?l.rooms.map(dt=>{const Ut=dt,wt=l.floor_rooms?.[Bt]?.[Ut]||0,bt=l.room_images?.[Bt]?.[Ut]||[],Ht=l.expandedRoomImages?.[Bt]?.[Ut]||!1;return e.jsxs("div",{style:{border:"1px solid #e5e7eb",borderRadius:"6px",padding:"8px",backgroundColor:"#ffffff",marginBottom:"8px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("span",{style:{fontSize:"16px"},children:[{key:"master_bedroom",icon:""},{key:"bedrooms",icon:""},{key:"bathrooms",icon:""},{key:"attached_bathroom",icon:""},{key:"kitchen",icon:""},{key:"living_room",icon:""},{key:"dining_room",icon:""},{key:"study_room",icon:""},{key:"prayer_room",icon:""},{key:"guest_room",icon:""},{key:"store_room",icon:""},{key:"balcony",icon:""},{key:"terrace",icon:""},{key:"garage",icon:""}].find(_t=>_t.key===dt)?.icon||""}),e.jsx("span",{style:{fontSize:"12px",fontWeight:"500"},children:dt.replace("_"," ").replace(/\b\w/g,_t=>_t.toUpperCase())}),bt.length>0&&e.jsxs("span",{style:{fontSize:"10px",color:"#059669",backgroundColor:"#f0fdf4",padding:"2px 4px",borderRadius:"2px"},children:[" ",bt.length]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("span",{style:{fontSize:"16px"},children:[{key:"master_bedroom",icon:""},{key:"bedrooms",icon:""},{key:"bathrooms",icon:""},{key:"attached_bathroom",icon:""},{key:"kitchen",icon:""},{key:"living_room",icon:""},{key:"dining_room",icon:""},{key:"study_room",icon:""},{key:"prayer_room",icon:""},{key:"guest_room",icon:""},{key:"store_room",icon:""},{key:"balcony",icon:""},{key:"terrace",icon:""},{key:"garage",icon:""}].find(_t=>_t.key===dt)?.icon||""}),e.jsx("span",{style:{fontSize:"12px",fontWeight:"500"},children:dt.replace("_"," ").replace(/\b\w/g,_t=>_t.toUpperCase())}),e.jsx("span",{style:{fontSize:"10px",color:"#059669",backgroundColor:"#f0fdf4",padding:"2px 4px",borderRadius:"2px",border:"1px solid #bbf7d0"},children:" Auto"}),bt.length>0&&e.jsxs("span",{style:{fontSize:"10px",color:"#059669",backgroundColor:"#f0fdf4",padding:"2px 4px",borderRadius:"2px"},children:[" ",bt.length]})]}),e.jsxs("div",{style:{display:"flex",gap:"4px",alignItems:"center"},children:[e.jsx("button",{type:"button",onClick:()=>{l.floor_rooms?.[Bt];const _t=Object.keys(l.floor_rooms||{}).filter(Gt=>Gt!==Bt);if(_t.length>0){const Gt=_t[0];A($t=>({...$t,floor_rooms:{...$t.floor_rooms,[Bt]:{...$t.floor_rooms?.[Bt],[Ut]:0},[Gt]:{...$t.floor_rooms?.[Gt],[Ut]:1}}}))}},style:{fontSize:"10px",padding:"2px 6px",backgroundColor:"#fef3c7",border:"1px solid #f59e0b",borderRadius:"4px",color:"#92400e",cursor:"pointer"},children:" Move"}),e.jsx("button",{type:"button",onClick:()=>A(_t=>({..._t,floor_rooms:{..._t.floor_rooms,[Bt]:{..._t.floor_rooms?.[Bt],[Ut]:Math.max(0,wt-1)}}})),style:{width:"24px",height:"24px",border:"1px solid #d1d5db",borderRadius:"4px",backgroundColor:"#ffffff",cursor:"pointer",fontSize:"14px",display:"flex",alignItems:"center",justifyContent:"center"},children:"-"}),e.jsx("span",{style:{minWidth:"20px",textAlign:"center",fontSize:"12px",fontWeight:"600"},children:wt}),e.jsx("button",{type:"button",onClick:()=>A(_t=>({..._t,floor_rooms:{..._t.floor_rooms,[Bt]:{..._t.floor_rooms?.[Bt],[Ut]:wt+1}}})),style:{width:"24px",height:"24px",border:"1px solid #d1d5db",borderRadius:"4px",backgroundColor:"#ffffff",cursor:"pointer",fontSize:"14px",display:"flex",alignItems:"center",justifyContent:"center"},children:"+"})]})]}),wt>0&&e.jsxs("div",{style:{borderTop:"1px solid #f3f4f6",paddingTop:"8px",marginTop:"8px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px"},children:[e.jsx("span",{style:{fontSize:"11px",fontWeight:"500",color:"#6b7280",minWidth:"80px"},children:" Reference:"}),e.jsx("input",{type:"file",accept:"image/*",multiple:!0,onChange:_t=>{const Gt=Array.from(_t.target.files),$t=[...bt,...Gt];A(J=>({...J,room_images:{...J.room_images,[Bt]:{...J.room_images?.[Bt],[Ut]:$t}}}))},style:{fontSize:"10px",padding:"4px 8px",border:"1px solid #d1d5db",borderRadius:"4px",backgroundColor:"#ffffff",flex:1}})]}),bt.length>0&&e.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"4px",marginTop:"8px"},children:bt.map((_t,Gt)=>e.jsxs("div",{style:{position:"relative",width:"40px",height:"40px",borderRadius:"4px",overflow:"hidden",border:"1px solid #d1d5db"},children:[e.jsx("img",{src:typeof _t=="string"?_t:URL.createObjectURL(_t),alt:`Reference ${Gt+1}`,style:{width:"100%",height:"100%",objectFit:"cover"}}),e.jsx("button",{type:"button",onClick:()=>{const $t=bt.filter((J,tt)=>tt!==Gt);A(J=>({...J,room_images:{...J.room_images,[Bt]:{...J.room_images?.[Bt],[Ut]:$t}}}))},style:{position:"absolute",top:"-2px",right:"-2px",width:"16px",height:"16px",borderRadius:"50%",backgroundColor:"#dc2626",color:"white",border:"none",fontSize:"10px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:""})]},Gt))})]}),wt>0&&e.jsxs("div",{style:{borderTop:"1px solid #f3f4f6",paddingTop:"8px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[e.jsxs("span",{style:{fontSize:"11px",fontWeight:"500",color:"#6b7280"},children:[" Reference Images for ",dt.replace("_"," ")]}),e.jsx("button",{type:"button",onClick:()=>A(_t=>({..._t,expandedRoomImages:{..._t.expandedRoomImages,[Bt]:{..._t.expandedRoomImages?.[Bt],[Ut]:!Ht}}})),style:{fontSize:"12px",color:"#6b7280",background:"none",border:"none",cursor:"pointer"},children:Ht?" Hide":" Show"})]}),Ht&&e.jsxs("div",{children:[e.jsx("input",{type:"file",multiple:!0,accept:"image/*",onChange:_t=>{const Gt=Array.from(_t.target.files);A($t=>({...$t,room_images:{...$t.room_images,[Bt]:{...$t.room_images?.[Bt],[Ut]:[...$t.room_images?.[Bt]?.[Ut]||[],...Gt]}}}))},style:{display:"none"},id:`${Bt}-${Ut}-images`}),e.jsx("label",{htmlFor:`${Bt}-${Ut}-images`,style:{display:"inline-block",padding:"4px 8px",backgroundColor:"#3b82f6",color:"white",borderRadius:"4px",cursor:"pointer",fontSize:"10px",fontWeight:"500",marginBottom:"8px"},children:"Add Images"}),bt.length>0&&e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(50px, 1fr))",gap:"4px"},children:bt.map((_t,Gt)=>e.jsxs("div",{style:{position:"relative",border:"1px solid #d1d5db",borderRadius:"2px",overflow:"hidden"},children:[e.jsx("img",{src:URL.createObjectURL(_t),alt:`${dt} ${Gt+1}`,style:{width:"100%",height:"35px",objectFit:"cover"}}),e.jsx("button",{type:"button",onClick:()=>A($t=>({...$t,room_images:{...$t.room_images,[Bt]:{...$t.room_images?.[Bt],[Ut]:$t.room_images[Bt][Ut].filter((J,tt)=>tt!==Gt)}}})),style:{position:"absolute",top:"1px",right:"1px",background:"rgba(0,0,0,0.7)",color:"white",border:"none",borderRadius:"50%",width:"14px",height:"14px",fontSize:"8px",cursor:"pointer"},children:""})]},Gt))})]})]})]},dt)}):e.jsx("div",{style:{textAlign:"center",color:"#6b7280",fontSize:"12px",padding:"20px"},children:"Select room types above to plan floor-wise"})})]},Bt)})}),e.jsxs("div",{style:{marginTop:"12px",padding:"8px 12px",backgroundColor:"#f0fdf4",borderRadius:"4px",fontSize:"12px",color:"#166534"},children:[" ",e.jsx("strong",{children:"Smart Planning:"})," Plan room distribution across floors. Each room type can have its own reference images for better visualization and planning."]})]})]}),(V>0||E||H)&&e.jsxs("div",{style:{backgroundColor:"#f0fdf4",border:"1px solid #bbf7d0",borderRadius:"12px",padding:"20px",marginBottom:"20px"},children:[e.jsx("h3",{style:{margin:"0 0 16px 0",color:"#166534",fontSize:"18px"},children:" AI Suggestions"}),e.jsxs("div",{style:{fontSize:"14px",color:"#166534"},children:[E&&E!=="unknown"&&e.jsxs("div",{style:{marginBottom:"8px",padding:"8px",backgroundColor:"#dcfce7",border:"1px solid #bbf7d0",borderRadius:"4px"},children:[" For ",E," plot size, consider ",E==="small"?"[1, 2]":E==="medium"?"[1, 2, 3]":E==="large"?"[2, 3, 4]":E==="xlarge"?"[3, 4, 5, 6]":"[4, 5, 6]"," floors"]}),V&&V>0&&e.jsxs("div",{style:{marginBottom:"8px",padding:"8px",backgroundColor:"#dcfce7",border:"1px solid #bbf7d0",borderRadius:"4px"},children:[" Estimated cost: ",Math.round(V).toLocaleString()," (",Math.round(V/(l.building_size||1e3)),"/sq ft)"]}),H&&H!=="unknown"&&e.jsxs("div",{style:{marginBottom:"8px",padding:"8px",backgroundColor:"#dcfce7",border:"1px solid #bbf7d0",borderRadius:"4px"},children:[" Recommended materials for ",H," budget"]})]})]}),e.jsxs("div",{className:"wizard-footer",children:[e.jsx("button",{className:"btn btn-secondary",onClick:B,children:"Back"}),e.jsx("button",{className:"btn btn-primary",onClick:I,children:"Next"})]})]}),r===3&&e.jsxs("div",{className:"section",children:[e.jsx("div",{className:"section-header",children:"Preferences"}),e.jsxs("div",{className:"section-body",children:[e.jsxs("div",{style:{backgroundColor:"#ffffff",border:"2px solid #e5e7eb",borderRadius:"16px",padding:"24px",marginBottom:"24px",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"20px",paddingBottom:"16px",borderBottom:"2px solid #f1f5f9"},children:[e.jsx("span",{style:{fontSize:"24px"},children:""}),e.jsx("h3",{style:{margin:0,fontSize:"20px",fontWeight:"700",color:"#1f2937"},children:"Option 1: Manual Style Selection"}),e.jsx("span",{style:{fontSize:"12px",backgroundColor:"#dbeafe",color:"#1e40af",padding:"4px 8px",borderRadius:"6px",fontWeight:"600"},children:"Your Choice"})]}),e.jsxs("div",{className:"field",children:[e.jsx("label",{style:{fontSize:"16px",fontWeight:"600",color:"#374151",marginBottom:"12px",display:"block"},children:"Select Your Preferred House Style"}),e.jsxs("select",{value:l.aesthetic||"",onChange:xe=>{const et=xe.target.value;console.log(" User manually selected aesthetic:",et),A(Oe=>({...Oe,aesthetic:et})),m(null)},style:{width:"100%",padding:"16px 20px",fontSize:"18px",fontWeight:"500",border:L.aesthetic?"3px solid #dc2626":"2px solid #e5e7eb",borderRadius:"12px",backgroundColor:"#ffffff",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)",cursor:"pointer",transition:"all 0.2s ease"},onFocus:xe=>{xe.target.style.borderColor="#3b82f6",xe.target.style.boxShadow="0 0 0 3px rgba(59, 130, 246, 0.1)"},onBlur:xe=>{xe.target.style.borderColor="#e5e7eb",xe.target.style.boxShadow="0 2px 4px rgba(0, 0, 0, 0.1)"},children:[e.jsx("option",{value:"",children:"Choose your preferred house style..."}),e.jsx("option",{value:"Modern",children:" Modern"}),e.jsx("option",{value:"Traditional",children:" Traditional"}),e.jsx("option",{value:"Contemporary",children:" Contemporary"}),e.jsx("option",{value:"Minimalist",children:" Minimalist"}),e.jsx("option",{value:"Classical",children:" Classical"}),e.jsx("option",{value:"Mediterranean",children:" Mediterranean"}),e.jsx("option",{value:"Scandinavian",children:" Scandinavian"}),e.jsx("option",{value:"Industrial",children:" Industrial"}),e.jsx("option",{value:"Colonial",children:" Colonial"}),e.jsx("option",{value:"Victorian",children:" Victorian"}),e.jsx("option",{value:"Art Deco",children:" Art Deco"}),e.jsx("option",{value:"Rustic",children:" Rustic"}),e.jsx("option",{value:"Farmhouse",children:" Farmhouse"}),e.jsx("option",{value:"Craftsman",children:" Craftsman"}),e.jsx("option",{value:"Tudor",children:" Tudor"}),e.jsx("option",{value:"Ranch",children:" Ranch"}),e.jsx("option",{value:"Cape Cod",children:" Cape Cod"}),e.jsx("option",{value:"Spanish",children:" Spanish"}),e.jsx("option",{value:"French Country",children:" French Country"}),e.jsx("option",{value:"Mid-Century Modern",children:" Mid-Century Modern"}),e.jsx("option",{value:"Prairie",children:" Prairie"}),e.jsx("option",{value:"Gothic",children:" Gothic"}),e.jsx("option",{value:"Neoclassical",children:" Neoclassical"}),e.jsx("option",{value:"Baroque",children:" Baroque"}),e.jsx("option",{value:"Rococo",children:" Rococo"}),e.jsx("option",{value:"Bauhaus",children:" Bauhaus"}),e.jsx("option",{value:"Brutalist",children:" Brutalist"}),e.jsx("option",{value:"Postmodern",children:" Postmodern"}),e.jsx("option",{value:"Deconstructivist",children:" Deconstructivist"}),e.jsx("option",{value:"High-Tech",children:" High-Tech"}),e.jsx("option",{value:"Sustainable/Green",children:" Sustainable/Green"}),e.jsx("option",{value:"Smart Home",children:" Smart Home"}),e.jsx("option",{value:"Luxury",children:" Luxury"}),e.jsx("option",{value:"Affordable",children:" Affordable"}),e.jsx("option",{value:"Custom",children:" Custom"})]}),l.aesthetic&&e.jsxs("div",{style:{marginTop:"16px",padding:"12px 16px",backgroundColor:"#f0f9ff",border:"2px solid #0ea5e9",borderRadius:"8px",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("span",{style:{fontSize:"16px"},children:""}),e.jsxs("span",{style:{fontSize:"14px",fontWeight:"600",color:"#0c4a6e"},children:["Selected: ",e.jsx("strong",{children:l.aesthetic})]})]}),L.aesthetic&&e.jsxs("div",{style:{color:"#dc2626",fontSize:"14px",marginTop:"8px",padding:"8px 12px",backgroundColor:"#fef2f2",border:"1px solid #fecaca",borderRadius:"6px"},children:[" ",L.aesthetic]})]})]}),e.jsxs("div",{style:{backgroundColor:"#f8fafc",border:"2px solid #e2e8f0",borderRadius:"16px",padding:"24px",marginBottom:"24px",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"20px",paddingBottom:"16px",borderBottom:"2px solid #f1f5f9"},children:[e.jsx("span",{style:{fontSize:"24px"},children:""}),e.jsx("h3",{style:{margin:0,fontSize:"20px",fontWeight:"700",color:"#1f2937"},children:"Option 2: AI-Powered Style Recommendations"}),e.jsx("span",{style:{fontSize:"12px",backgroundColor:"#fef3c7",color:"#92400e",padding:"4px 8px",borderRadius:"6px",fontWeight:"600"},children:"Smart Suggestions"})]}),e.jsxs("div",{style:{fontSize:"14px",color:"#6b7280",marginBottom:"20px",padding:"12px 16px",backgroundColor:"#f1f5f9",borderRadius:"8px",border:"1px solid #e2e8f0"},children:[" ",e.jsx("strong",{children:"Based on your project details:"})," Plot size, budget range, building size, and room requirements"]}),e.jsx(j6,{formData:l,onStyleChange:xe=>{console.log(" User selected AI suggestion:",xe.name),m(xe),A(et=>({...et,aesthetic:xe.name}))},showSuggestions:!0,autoSelect:!1})]})]}),pt(),(V>0||E||H)&&e.jsxs("div",{style:{backgroundColor:"#f0fdf4",border:"1px solid #bbf7d0",borderRadius:"12px",padding:"20px",marginBottom:"20px"},children:[e.jsx("h3",{style:{margin:"0 0 16px 0",color:"#166534",fontSize:"18px"},children:" AI Suggestions"}),e.jsxs("div",{style:{fontSize:"14px",color:"#166534"},children:[E&&E!=="unknown"&&e.jsxs("div",{style:{marginBottom:"8px",padding:"8px",backgroundColor:"#dcfce7",border:"1px solid #bbf7d0",borderRadius:"4px"},children:[" For ",E," plot size, consider ",E==="small"?"[1, 2]":E==="medium"?"[1, 2, 3]":E==="large"?"[2, 3, 4]":E==="xlarge"?"[3, 4, 5, 6]":"[4, 5, 6]"," floors"]}),V&&V>0&&e.jsxs("div",{style:{marginBottom:"8px",padding:"8px",backgroundColor:"#dcfce7",border:"1px solid #bbf7d0",borderRadius:"4px"},children:[" Estimated cost: ",Math.round(V).toLocaleString()," (",Math.round(V/(l.building_size||1e3)),"/sq ft)"]}),H&&H!=="unknown"&&e.jsxs("div",{style:{marginBottom:"8px",padding:"8px",backgroundColor:"#dcfce7",border:"1px solid #bbf7d0",borderRadius:"4px"},children:[" Recommended materials for ",H," budget"]})]})]}),(L.aesthetic||F.aesthetic)&&e.jsxs("div",{style:{backgroundColor:"#f8fafc",border:"1px solid #e2e8f0",borderRadius:"12px",padding:"20px",marginBottom:"20px"},children:[e.jsx("h3",{style:{margin:"0 0 16px 0",color:"#1e293b",fontSize:"18px"},children:" Preferences Validation"}),L.aesthetic&&e.jsxs("div",{style:{marginBottom:"8px",padding:"8px",backgroundColor:"#fef2f2",border:"1px solid #fecaca",borderRadius:"4px",color:"#dc2626"},children:[" House Style: ",L.aesthetic]}),F.aesthetic&&e.jsxs("div",{style:{marginBottom:"8px",padding:"8px",backgroundColor:"#fffbeb",border:"1px solid #fed7aa",borderRadius:"4px",color:"#d97706"},children:[" House Style: ",F.aesthetic]})]}),e.jsxs("div",{className:"wizard-footer",children:[e.jsx("button",{className:"btn btn-secondary",onClick:B,children:"Back"}),e.jsx("button",{className:"btn btn-primary",onClick:I,children:"Next"})]})]}),r===4&&e.jsxs("div",{className:"section",children:[e.jsx("div",{className:"section-header",children:"Review"}),e.jsxs("div",{style:{backgroundColor:"#f8fafc",border:"1px solid #e2e8f0",borderRadius:"12px",padding:"20px",marginBottom:"20px"},children:[e.jsx("h3",{style:{margin:"0 0 16px 0",color:"#1e293b",fontSize:"18px"},children:" AI-Powered Design Summary"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"16px"},children:[e.jsxs("div",{style:{backgroundColor:"white",padding:"16px",borderRadius:"8px",border:"1px solid #e2e8f0"},children:[e.jsx("h4",{style:{margin:"0 0 12px 0",color:"#374151",fontSize:"16px"},children:" Project Overview"}),e.jsxs("div",{style:{fontSize:"14px",color:"#6b7280",lineHeight:"1.6"},children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Plot Size:"})," ",l.plot_size," sq ft"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Building Size:"})," ",l.building_size," sq ft"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Floors:"})," ",l.num_floors]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Budget:"})," ",l.budget_range]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Style:"})," ",l.aesthetic]})]})]}),e.jsxs("div",{style:{backgroundColor:"white",padding:"16px",borderRadius:"8px",border:"1px solid #e2e8f0"},children:[e.jsx("h4",{style:{margin:"0 0 12px 0",color:"#374151",fontSize:"16px"},children:" Room Requirements"}),e.jsx("div",{style:{fontSize:"14px",color:"#6b7280",lineHeight:"1.6"},children:l.rooms&&l.rooms.length>0?e.jsxs("div",{children:[e.jsxs("div",{style:{marginBottom:"12px"},children:[e.jsx("strong",{children:"Selected Room Types:"}),e.jsx("div",{style:{marginTop:"4px"},children:l.rooms.map(xe=>e.jsx("span",{style:{display:"inline-block",margin:"2px 4px 2px 0",padding:"2px 6px",backgroundColor:"#f3f4f6",borderRadius:"4px",fontSize:"12px"},children:xe.replace("_"," ").replace(/\b\w/g,et=>et.toUpperCase())},xe))})]}),l.num_floors&&parseInt(l.num_floors)>=2&&l.floor_rooms&&Object.keys(l.floor_rooms).length>0&&e.jsxs("div",{children:[e.jsx("strong",{children:"Floor-wise Room Distribution:"}),e.jsx("div",{style:{marginTop:"8px"},children:Array.from({length:parseInt(l.num_floors)||0},(xe,et)=>{const Oe=et+1,Bt=`floor${Oe}`,xt=l.floor_rooms[Bt]||{};return Object.values(xt).reduce((Ut,wt)=>Ut+(wt||0),0)===0?null:e.jsxs("div",{style:{marginBottom:"8px",padding:"8px",backgroundColor:"#f9fafb",borderRadius:"6px",border:"1px solid #e5e7eb"},children:[e.jsx("div",{style:{fontWeight:"600",marginBottom:"4px",color:"#374151"},children:Oe===1?"Ground Floor":`Floor ${Oe}`}),e.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"4px"},children:Object.entries(xt).map(([Ut,wt])=>{if(!wt||wt===0)return null;const bt={master_bedroom:"",bedrooms:"",attached_bathrooms:"",common_bathrooms:"",living_room:"",dining_room:"",kitchen:"",study_area:"",prayer_area:"",guest_room:"",store_room:"",balcony:"",terrace:"",garage:"",utility_area:""}[Ut]||"";return e.jsxs("span",{style:{display:"inline-flex",alignItems:"center",gap:"4px",padding:"2px 6px",backgroundColor:"#e0f2fe",borderRadius:"4px",fontSize:"11px",color:"#0c4a6e",border:"1px solid #bae6fd"},children:[e.jsx("span",{children:bt}),e.jsx("span",{children:Ut.replace("_"," ").replace(/\b\w/g,Ht=>Ht.toUpperCase())}),e.jsxs("span",{style:{fontWeight:"600"},children:["",wt]})]},Ut)})})]},Bt)})})]}),(()=>{const xe=l.floor_rooms?Object.values(l.floor_rooms).reduce((et,Oe)=>et+Object.values(Oe).reduce((Bt,xt)=>Bt+(xt||0),0),0):0;return xe>0?e.jsx("div",{style:{marginTop:"12px",padding:"8px",backgroundColor:"#f0fdf4",borderRadius:"6px",border:"1px solid #bbf7d0"},children:e.jsxs("strong",{style:{color:"#166534"},children:["Total Rooms: ",xe]})}):null})()]}):e.jsx("div",{children:"No rooms selected"})})]}),e.jsxs("div",{style:{backgroundColor:"white",padding:"16px",borderRadius:"8px",border:"1px solid #e2e8f0"},children:[e.jsx("h4",{style:{margin:"0 0 12px 0",color:"#374151",fontSize:"16px"},children:" Project Timeline"}),e.jsx("div",{style:{fontSize:"14px",color:"#6b7280",lineHeight:"1.6"},children:M?e.jsxs("div",{children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Estimated Duration:"})," ",M.months," months"]}),M.estimatedCompletion&&e.jsxs("div",{children:[e.jsx("strong",{children:"Completion Date:"})," ",M.estimatedCompletion.toLocaleDateString()]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Phases:"})," ",M.phases?.length||0," phases planned"]})]}):e.jsx("div",{children:"Timeline not calculated"})})]}),e.jsxs("div",{style:{backgroundColor:"white",padding:"16px",borderRadius:"8px",border:"1px solid #e2e8f0"},children:[e.jsx("h4",{style:{margin:"0 0 12px 0",color:"#374151",fontSize:"16px"},children:" Selected Style"}),e.jsx("div",{style:{fontSize:"14px",color:"#6b7280",lineHeight:"1.6"},children:p?e.jsxs("div",{children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Style:"})," ",p.name]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Description:"})," ",p.description]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Match:"})," ",p.suitability,"% suitability"]})]}):e.jsx("div",{children:"No style selected"})})]})]})]}),e.jsxs("div",{className:"wizard-footer",children:[e.jsx("button",{className:"btn btn-secondary",onClick:B,children:"Back"}),e.jsx("button",{className:"btn btn-primary",onClick:I,children:"Next"})]})]}),r===5&&e.jsxs("div",{className:"section",children:[e.jsx("div",{className:"section-header",children:"Select Architect"}),e.jsx("div",{className:"section-body",children:e.jsx(Ym,{selectedArchitectIds:l.selected_architect_ids,onSelectionChange:(xe,et)=>{A(Oe=>({...Oe,selected_architect_ids:xe})),h(et||[])},layoutRequestId:null,showAIRecommendations:!0,stylePreferences:l.aesthetic?{aesthetic:l.aesthetic}:{}})}),e.jsxs("div",{className:"wizard-footer",children:[e.jsx("button",{className:"btn btn-secondary",onClick:B,children:"Back"}),e.jsx("button",{className:"btn btn-primary",onClick:I,children:"Next"})]})]}),r===6&&e.jsxs("div",{className:"section",children:[e.jsx("div",{className:"section-header",children:"Submit"}),e.jsxs("div",{className:"section-body",children:[e.jsxs("div",{className:"submit-message",children:[e.jsx("h3",{children:"Ready to Submit?"}),e.jsx("p",{children:"Please review all your information before submitting your request."})]}),e.jsxs("div",{style:{backgroundColor:"#f8fafc",border:"1px solid #e2e8f0",borderRadius:"8px",padding:"20px",marginBottom:"20px"},children:[e.jsx("h4",{style:{margin:"0 0 16px 0",color:"#374151",fontSize:"18px"},children:" Project Summary"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"16px"},children:[e.jsxs("div",{style:{backgroundColor:"white",padding:"16px",borderRadius:"8px",border:"1px solid #e2e8f0"},children:[e.jsx("h5",{style:{margin:"0 0 12px 0",color:"#374151",fontSize:"16px"},children:" Project Details"}),e.jsxs("div",{style:{fontSize:"14px",color:"#6b7280",lineHeight:"1.6"},children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Plot Size:"})," ",l.plot_size," ",l.plot_unit||"sq ft"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Building Size:"})," ",l.building_size," sq ft"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Floors:"})," ",l.num_floors]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Budget:"})," ",l.budget_range]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Style:"})," ",l.aesthetic]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Timeline:"})," ",l.timeline]}),V&&e.jsxs("div",{children:[e.jsx("strong",{children:"Estimated Cost:"})," ",Math.round(V).toLocaleString()]}),E&&e.jsxs("div",{children:[e.jsx("strong",{children:"Plot Category:"})," ",E]}),M&&e.jsxs("div",{children:[e.jsx("strong",{children:"Predicted Duration:"})," ",M.months," months"]})]})]}),e.jsxs("div",{style:{backgroundColor:"white",padding:"16px",borderRadius:"8px",border:"1px solid #e2e8f0"},children:[e.jsxs("h5",{style:{margin:"0 0 12px 0",color:"#374151",fontSize:"16px"},children:[" Selected Architects (",u.length,")"]}),e.jsx("div",{style:{fontSize:"14px",color:"#6b7280",lineHeight:"1.6"},children:u.length>0?e.jsx("div",{children:u.map((xe,et)=>e.jsxs("div",{style:{padding:"8px 12px",backgroundColor:"#f0f9ff",border:"1px solid #bae6fd",borderRadius:"6px",marginBottom:"8px",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsxs("div",{style:{width:"32px",height:"32px",backgroundColor:"#3b82f6",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontSize:"12px",fontWeight:"600"},children:[xe.first_name?.charAt(0)||"A",xe.last_name?.charAt(0)||""]}),e.jsxs("div",{children:[e.jsxs("div",{style:{fontWeight:"600",color:"#1e40af"},children:[xe.first_name," ",xe.last_name]}),e.jsx("div",{style:{fontSize:"12px",color:"#6b7280"},children:xe.email}),xe.specialization&&e.jsx("div",{style:{fontSize:"12px",color:"#059669"},children:xe.specialization})]})]},xe.id))}):e.jsx("div",{style:{color:"#9ca3af",fontStyle:"italic"},children:"No architects selected"})})]})]})]})]}),e.jsxs("div",{className:"wizard-footer",children:[e.jsx("button",{className:"btn btn-secondary",onClick:B,children:"Back"}),e.jsx("button",{className:"btn btn-primary",onClick:at,children:"Submit Request"})]})]})]})}function C6(){const t=["Select","Details","Files","Technical Details","Review","Submit"],[s,a]=N.useState(0),[r,o]=N.useState({architect_id:"",request_id:"",homeowner_id:"",design_title:"",description:"",layout_json:"",technical_details:{},preview_image:null,layout_file:null,files:[],view_price:""}),[l,A]=N.useState(!1),[u,h]=N.useState(null),p=u?.role==="architect";N.useEffect(()=>{try{const F=sessionStorage.getItem("user"),ee=F?JSON.parse(F):null;h(ee),ee?.role==="architect"&&ee?.id&&o(K=>({...K,architect_id:String(ee.id)}))}catch{}},[]);const[m,v]=N.useState([]),[b,x]=N.useState(!0),[C,Q]=N.useState("");N.useEffect(()=>{let F=!1;async function ee(){if(p){x(!1);return}x(!0),Q("");try{const q=await(await fetch("/buildhub/backend/api/admin/get_all_users.php?role=architect&status=approved")).json();F||(q?.success?v(Array.isArray(q.users)?q.users:[]):Q(q?.message||"Failed to load architects"))}catch{F||Q("Network error while loading architects")}finally{F||x(!1)}}return ee(),()=>{F=!0}},[p]);const j=N.useMemo(()=>p&&u?.id?{id:u.id,first_name:u.first_name||"",last_name:u.last_name||"",email:u.email||null}:m.find(F=>String(F.id)===String(r.architect_id)),[p,u,m,r.architect_id]),B=()=>a(F=>Math.min(F+1,t.length-1)),L=()=>a(F=>Math.max(F-1,0));async function P(){A(!0);try{const F=new FormData;r.request_id&&F.append("request_id",r.request_id),r.homeowner_id&&F.append("homeowner_id",r.homeowner_id),r.design_title&&F.append("design_title",r.design_title),r.description&&F.append("description",r.description),r.layout_json&&F.append("layout_json",r.layout_json),r.technical_details&&Object.keys(r.technical_details).length>0&&F.append("technical_details",JSON.stringify(r.technical_details)),r.view_price&&F.append("view_price",r.view_price),r.preview_image&&F.append("preview_image",r.preview_image),r.layout_file&&F.append("layout_file",r.layout_file),(r.files||[]).forEach(q=>F.append("design_files[]",q));const K=await(await fetch("/buildhub/backend/api/architect/upload_design.php",{method:"POST",body:F})).json();K.success?window.history.back():toast.error(K.message||"Failed")}catch{toast.error("Network error")}finally{A(!1)}}return e.jsxs(Mp,{title:"Upload Design",subtitle:"Provide details and upload your files",stepper:e.jsx(Op,{steps:t,current:s}),onBack:s>0?L:()=>window.history.back(),onClose:()=>window.history.back(),children:[s===0&&e.jsxs("div",{className:"section",children:[e.jsx("div",{className:"section-header",children:"Select Target"}),e.jsxs("div",{className:"section-body grid-2",children:[!p&&e.jsxs("div",{className:"field",style:{gridColumn:"1 / -1"},children:[e.jsx("label",{children:"Choose Architect"}),b?e.jsx("div",{className:"muted",children:"Loading architects"}):C?e.jsx("div",{className:"text-danger",children:C}):e.jsxs("select",{value:r.architect_id,onChange:F=>o({...r,architect_id:F.target.value}),children:[e.jsx("option",{value:"",children:"Select architect"}),m.map(F=>e.jsxs("option",{value:F.id,children:[F.first_name," ",F.last_name," (#",F.id,")"]},F.id))]})]}),j&&e.jsxs("div",{className:"muted",style:{marginTop:8,gridColumn:"1 / -1"},children:[e.jsxs("strong",{children:[p?"You (Architect)":"Selected",":"]})," ",j.first_name," ",j.last_name,j.email?`  ${j.email}`:""]}),e.jsxs("div",{className:"field",children:[e.jsx("label",{children:"Layout Request ID (optional)"}),e.jsx("input",{value:r.request_id,onChange:F=>o({...r,request_id:F.target.value})})]}),e.jsxs("div",{className:"field",children:[e.jsx("label",{children:"Homeowner ID (optional)"}),e.jsx("input",{value:r.homeowner_id,onChange:F=>o({...r,homeowner_id:F.target.value})})]})]}),e.jsx("div",{className:"wizard-footer",children:e.jsx("button",{className:"btn btn-primary",onClick:B,children:"Next"})})]}),s===1&&e.jsxs("div",{className:"section",children:[e.jsx("div",{className:"section-header",children:"Details"}),e.jsxs("div",{className:"section-body grid-2",children:[e.jsxs("div",{className:"field",children:[e.jsx("label",{children:"Design Title"}),e.jsx("input",{value:r.design_title,onChange:F=>o({...r,design_title:F.target.value})})]}),e.jsxs("div",{className:"field",style:{gridColumn:"1 / -1"},children:[e.jsx("label",{children:"Description"}),e.jsx("textarea",{rows:4,value:r.description,onChange:F=>o({...r,description:F.target.value})})]})]}),e.jsxs("div",{className:"wizard-footer",children:[e.jsx("button",{className:"btn btn-secondary",onClick:L,children:"Back"}),e.jsx("button",{className:"btn btn-primary",onClick:B,children:"Next"})]})]}),s===2&&e.jsxs("div",{className:"section",children:[e.jsx("div",{className:"section-header",children:"Files"}),e.jsxs("div",{className:"section-body grid-2",children:[e.jsxs("div",{className:"field",children:[e.jsx("label",{children:"Preview Image (shown on homeowner dashboard)"}),e.jsx("input",{type:"file",accept:"image/*",onChange:F=>o({...r,preview_image:(F.target.files||[])[0]||null})}),r.preview_image&&e.jsxs("div",{className:"muted",style:{marginTop:6},children:["Selected: ",r.preview_image.name]})]}),e.jsxs("div",{className:"field",children:[e.jsx("label",{children:"Layout File (image/PDF/CAD)"}),e.jsx("input",{type:"file",onChange:F=>o({...r,layout_file:(F.target.files||[])[0]||null})}),r.layout_file&&e.jsxs("div",{className:"muted",style:{marginTop:6},children:["Selected: ",r.layout_file.name]})]}),e.jsxs("div",{className:"field",style:{gridColumn:"1 / -1"},children:[e.jsx("label",{children:"Additional Files (optional)"}),e.jsx("input",{type:"file",multiple:!0,onChange:F=>o({...r,files:Array.from(F.target.files||[])})}),r.files?.length?e.jsxs("div",{className:"muted",style:{marginTop:6},children:[r.files.length," file(s) selected"]}):null]})]}),e.jsxs("div",{className:"wizard-footer",children:[e.jsx("button",{className:"btn btn-secondary",onClick:L,children:"Back"}),e.jsx("button",{className:"btn btn-primary",onClick:B,children:"Next"})]})]}),s===3&&e.jsxs("div",{className:"section",children:[e.jsx("div",{className:"section-header",children:"Technical Design Details"}),e.jsx("div",{className:"section-body",children:e.jsx(l2,{data:r,setData:o,onNext:B,onPrev:L})})]}),s===4&&e.jsxs("div",{className:"section",children:[e.jsx("div",{className:"section-header",children:"Review Your Submission"}),e.jsx("div",{className:"section-body",children:e.jsxs("div",{className:"review-card",children:[e.jsxs("div",{className:"review-section",children:[e.jsx("h4",{className:"review-title",children:"Design Information"}),e.jsxs("div",{className:"review-grid",children:[e.jsxs("div",{className:"review-item",children:[e.jsx("div",{className:"review-label",children:"Title"}),e.jsx("div",{className:"review-value",children:r.title||"Not provided"})]}),e.jsxs("div",{className:"review-item",children:[e.jsx("div",{className:"review-label",children:"Type"}),e.jsx("div",{className:"review-value",children:r.type||"Not specified"})]}),e.jsxs("div",{className:"review-item",children:[e.jsx("div",{className:"review-label",children:"Description"}),e.jsx("div",{className:"review-value",children:r.description||"No description"})]}),e.jsxs("div",{className:"review-item",children:[e.jsx("div",{className:"review-label",children:"View Price"}),e.jsx("div",{className:"review-value",children:r.view_price?`${r.view_price}`:"Free"})]})]})]}),e.jsxs("div",{className:"review-section",children:[e.jsx("h4",{className:"review-title",children:"Files"}),e.jsxs("div",{className:"review-files",children:[r.preview_image&&e.jsxs("div",{className:"review-file",children:[e.jsx("div",{className:"file-icon",children:""}),e.jsxs("div",{className:"file-details",children:[e.jsx("div",{className:"file-name",children:"Preview Image"}),e.jsx("div",{className:"file-meta",children:r.preview_image.name})]})]}),r.layout_file&&e.jsxs("div",{className:"review-file",children:[e.jsx("div",{className:"file-icon",children:""}),e.jsxs("div",{className:"file-details",children:[e.jsx("div",{className:"file-name",children:"Layout File"}),e.jsx("div",{className:"file-meta",children:r.layout_file.name})]})]}),r.files&&r.files.length>0&&e.jsxs("div",{className:"review-file-group",children:[e.jsxs("div",{className:"file-group-header",children:["Additional Files (",r.files.length,")"]}),e.jsx("div",{className:"file-group-list",children:r.files.map((F,ee)=>e.jsxs("div",{className:"file-item",children:[e.jsx("span",{className:"file-item-icon",children:""}),e.jsx("span",{className:"file-item-name",children:F.name})]},ee))})]})]})]}),r.technical_details&&Object.keys(r.technical_details).length>0&&e.jsxs("div",{className:"review-section",children:[e.jsx("h4",{className:"review-title",children:"Technical Details"}),e.jsxs("div",{className:"technical-review",children:[r.technical_details.floor_plans?.layout_description&&e.jsxs("div",{className:"review-item",children:[e.jsx("div",{className:"review-label",children:"Floor Plan Layout"}),e.jsx("div",{className:"review-value",children:r.technical_details.floor_plans.layout_description})]}),r.technical_details.floor_plans?.living_room_dimensions&&e.jsxs("div",{className:"review-item",children:[e.jsx("div",{className:"review-label",children:"Living Room Dimensions"}),e.jsx("div",{className:"review-value",children:r.technical_details.floor_plans.living_room_dimensions})]}),r.technical_details.floor_plans?.master_bedroom_dimensions&&e.jsxs("div",{className:"review-item",children:[e.jsx("div",{className:"review-label",children:"Master Bedroom Dimensions"}),e.jsx("div",{className:"review-value",children:r.technical_details.floor_plans.master_bedroom_dimensions})]}),r.technical_details.site_orientation?.orientation&&e.jsxs("div",{className:"review-item",children:[e.jsx("div",{className:"review-label",children:"Site Orientation"}),e.jsx("div",{className:"review-value",children:r.technical_details.site_orientation.orientation})]}),r.technical_details.construction?.critical_instructions&&e.jsxs("div",{className:"review-item",children:[e.jsx("div",{className:"review-label",children:"Critical Instructions"}),e.jsx("div",{className:"review-value",children:r.technical_details.construction.critical_instructions})]})]})]}),j&&e.jsxs("div",{className:"review-section",children:[e.jsx("h4",{className:"review-title",children:"Architect"}),e.jsxs("div",{className:"review-architect",children:[e.jsx("div",{className:"architect-avatar",children:""}),e.jsxs("div",{className:"architect-details",children:[e.jsx("div",{className:"architect-name",children:`${j.first_name} ${j.last_name}`}),e.jsx("div",{className:"architect-email",children:j.email||"No email provided"})]})]})]})]})}),e.jsxs("div",{className:"wizard-footer",children:[e.jsx("button",{className:"btn btn-secondary",onClick:L,children:"Back"}),e.jsx("button",{className:"btn btn-primary",onClick:B,children:"Proceed"})]})]}),s===5&&e.jsxs("div",{className:"section",children:[e.jsx("div",{className:"section-header",children:"Submit"}),e.jsx("div",{className:"section-body",children:e.jsx("p",{className:"muted",children:"Files will be uploaded and visible to the target homeowner/request."})}),e.jsxs("div",{className:"wizard-footer",children:[e.jsx("button",{className:"btn btn-secondary",onClick:L,children:"Back"}),e.jsx("button",{className:"btn btn-primary",disabled:l,onClick:P,children:l?"Uploading...":"Submit"})]})]})]})}function S6(){Ar.useEffect(()=>{const v=new URLSearchParams(window.location.search).get("layout_request_id");v&&o(b=>({...b,layout_request_id:v}))},[]);const t=["Project","Materials","Costs","Timeline","Review","Submit"],[s,a]=N.useState(0),[r,o]=N.useState({layout_request_id:"",materials:"",cost_breakdown:"",total_cost:"",timeline:"",notes:""}),[l,A]=N.useState(!1),u=()=>a(m=>Math.min(m+1,t.length-1)),h=()=>a(m=>Math.max(m-1,0));async function p(){A(!0);try{const v=await(await fetch("/buildhub/backend/api/contractor/submit_proposal.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)})).json();v.success?window.history.back():toast.error(v.message||"Failed")}catch{toast.error("Network error")}finally{A(!1)}}return e.jsxs(Mp,{title:"Submit Cost Estimate",subtitle:"Provide detailed materials and cost breakdown",stepper:e.jsx(Op,{steps:t,current:s}),onBack:s>0?h:()=>window.history.back(),onClose:()=>window.history.back(),children:[s===0&&e.jsxs("div",{className:"section",children:[e.jsx("div",{className:"section-header",children:"Project"}),e.jsx("div",{style:{display:"flex",justifyContent:"center",marginBottom:"20px",padding:"20px 0"},children:e.jsx(i2,{size:"medium"})}),e.jsxs("div",{className:"section-body grid-2",children:[e.jsxs("div",{className:"field",children:[e.jsx("label",{children:"Layout Request ID"}),e.jsx("input",{value:r.layout_request_id,onChange:m=>o({...r,layout_request_id:m.target.value})})]}),e.jsxs("div",{className:"field",children:[e.jsx("label",{children:"Notes"}),e.jsx("input",{value:r.notes,onChange:m=>o({...r,notes:m.target.value})})]})]}),e.jsx("div",{className:"wizard-footer",children:e.jsx("button",{className:"btn btn-primary",onClick:u,children:"Next"})})]}),s===1&&e.jsxs("div",{className:"section",children:[e.jsx("div",{className:"section-header",children:"Materials"}),e.jsx("div",{className:"section-body",children:e.jsxs("div",{className:"field",children:[e.jsx("label",{children:"Materials"}),e.jsx("textarea",{rows:6,value:r.materials,onChange:m=>o({...r,materials:m.target.value}),placeholder:"List major materials and specs"})]})}),e.jsxs("div",{className:"wizard-footer",children:[e.jsx("button",{className:"btn btn-secondary",onClick:h,children:"Back"}),e.jsx("button",{className:"btn btn-primary",onClick:u,children:"Next"})]})]}),s===2&&e.jsxs("div",{className:"section",children:[e.jsx("div",{className:"section-header",children:"Cost Breakdown"}),e.jsx("div",{className:"section-body",children:e.jsxs("div",{className:"field",children:[e.jsx("label",{children:"Cost Breakdown"}),e.jsx("textarea",{rows:6,value:r.cost_breakdown,onChange:m=>o({...r,cost_breakdown:m.target.value}),placeholder:"Labor, Materials, Misc, Profit, etc."})]})}),e.jsxs("div",{className:"wizard-footer",children:[e.jsx("button",{className:"btn btn-secondary",onClick:h,children:"Back"}),e.jsx("button",{className:"btn btn-primary",onClick:u,children:"Next"})]})]}),s===3&&e.jsxs("div",{className:"section",children:[e.jsx("div",{className:"section-header",children:"Totals"}),e.jsxs("div",{className:"section-body grid-2",children:[e.jsxs("div",{className:"field",children:[e.jsx("label",{children:"Total Cost ()"}),e.jsx("input",{type:"number",value:r.total_cost,onChange:m=>o({...r,total_cost:m.target.value})})]}),e.jsxs("div",{className:"field",children:[e.jsx("label",{children:"Timeline"}),e.jsx("input",{value:r.timeline,onChange:m=>o({...r,timeline:m.target.value}),placeholder:"e.g., 90 days"})]})]}),e.jsxs("div",{className:"wizard-footer",children:[e.jsx("button",{className:"btn btn-secondary",onClick:h,children:"Back"}),e.jsx("button",{className:"btn btn-primary",onClick:u,children:"Next"})]})]}),s===4&&e.jsxs("div",{className:"section",children:[e.jsx("div",{className:"section-header",children:"Review"}),e.jsx("div",{className:"section-body",children:e.jsx("pre",{style:{background:"#f8fafc",padding:12,borderRadius:8,overflow:"auto"},children:JSON.stringify(r,null,2)})}),e.jsxs("div",{className:"wizard-footer",children:[e.jsx("button",{className:"btn btn-secondary",onClick:h,children:"Back"}),e.jsx("button",{className:"btn btn-primary",onClick:u,children:"Proceed"})]})]}),s===5&&e.jsxs("div",{className:"section",children:[e.jsx("div",{className:"section-header",children:"Submit"}),e.jsx("div",{className:"section-body",children:e.jsx("p",{className:"muted",children:"Your estimate will be sent to the homeowner."})}),e.jsxs("div",{className:"wizard-footer",children:[e.jsx("button",{className:"btn btn-secondary",onClick:h,children:"Back"}),e.jsx("button",{className:"btn btn-primary",disabled:l,onClick:p,children:l?"Submitting...":"Submit Estimate"})]})]})]})}function k6(){const t=["Basics","Pricing","Review","Submit"],[s,a]=N.useState(0),[r,o]=N.useState({name:"",category:"",unit:"",price:"",description:""}),[l,A]=N.useState(!1),u=()=>a(m=>Math.min(m+1,t.length-1)),h=()=>a(m=>Math.max(m-1,0));async function p(){A(!0);try{const v=await(await fetch("/buildhub/backend/api/admin/add_material.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)})).json();v.success?window.history.back():toast.error(v.message||"Failed")}catch{toast.error("Network error")}finally{A(!1)}}return e.jsxs(Mp,{title:"Add Material",subtitle:"Create a new material entry",stepper:e.jsx(Op,{steps:t,current:s}),onBack:s>0?h:()=>window.history.back(),onClose:()=>window.history.back(),children:[s===0&&e.jsxs("div",{className:"section",children:[e.jsx("div",{className:"section-header",children:"Basics"}),e.jsxs("div",{className:"section-body grid-3",children:[e.jsxs("div",{className:"field",children:[e.jsx("label",{children:"Name"}),e.jsx("input",{value:r.name,onChange:m=>o({...r,name:m.target.value})})]}),e.jsxs("div",{className:"field",children:[e.jsx("label",{children:"Category"}),e.jsx("input",{value:r.category,onChange:m=>o({...r,category:m.target.value})})]}),e.jsxs("div",{className:"field",children:[e.jsx("label",{children:"Unit"}),e.jsx("input",{value:r.unit,onChange:m=>o({...r,unit:m.target.value})})]})]}),e.jsx("div",{className:"wizard-footer",children:e.jsx("button",{className:"btn btn-primary",onClick:u,children:"Next"})})]}),s===1&&e.jsxs("div",{className:"section",children:[e.jsx("div",{className:"section-header",children:"Pricing"}),e.jsxs("div",{className:"section-body grid-2",children:[e.jsxs("div",{className:"field",children:[e.jsx("label",{children:"Price"}),e.jsx("input",{type:"number",step:"0.01",value:r.price,onChange:m=>o({...r,price:m.target.value})})]}),e.jsxs("div",{className:"field",children:[e.jsx("label",{children:"Description"}),e.jsx("textarea",{rows:4,value:r.description,onChange:m=>o({...r,description:m.target.value})})]})]}),e.jsxs("div",{className:"wizard-footer",children:[e.jsx("button",{className:"btn btn-secondary",onClick:h,children:"Back"}),e.jsx("button",{className:"btn btn-primary",onClick:u,children:"Next"})]})]}),s===2&&e.jsxs("div",{className:"section",children:[e.jsx("div",{className:"section-header",children:"Review"}),e.jsx("div",{className:"section-body",children:e.jsx("pre",{style:{background:"#f8fafc",padding:12,borderRadius:8,overflow:"auto"},children:JSON.stringify(r,null,2)})}),e.jsxs("div",{className:"wizard-footer",children:[e.jsx("button",{className:"btn btn-secondary",onClick:h,children:"Back"}),e.jsx("button",{className:"btn btn-primary",onClick:u,children:"Proceed"})]})]}),s===3&&e.jsxs("div",{className:"section",children:[e.jsx("div",{className:"section-header",children:"Submit"}),e.jsx("div",{className:"section-body",children:e.jsx("p",{className:"muted",children:"Material will be added to the catalog."})}),e.jsxs("div",{className:"wizard-footer",children:[e.jsx("button",{className:"btn btn-secondary",onClick:h,children:"Back"}),e.jsx("button",{className:"btn btn-primary",disabled:l,onClick:p,children:l?"Saving...":"Add Material"})]})]})]})}const F6=()=>{const[t,s]=N.useState({username:"",password:""}),[a,r]=N.useState(""),[o,l]=N.useState(!1),A=Wr(),u=p=>{const{name:m,value:v}=p.target;s(b=>({...b,[m]:v})),r("")},h=async p=>{if(p.preventDefault(),r(""),l(!0),!t.username.trim()){r("Username is required."),l(!1);return}if(!t.password.trim()){r("Password is required."),l(!1);return}try{const v=await(await fetch("/buildhub/backend/api/admin/admin_login.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})).json();v.success?(localStorage.setItem("admin_logged_in","true"),localStorage.setItem("admin_username",t.username),A("/admin-dashboard")):r(v.message||"Login failed.")}catch{r("Network error. Please try again.")}finally{l(!1)}};return e.jsx("div",{className:"admin-login-page",children:e.jsxs("div",{className:"admin-login-container",children:[e.jsxs("div",{className:"admin-login-header",children:[e.jsx("h1",{children:" Admin Login"}),e.jsx("p",{children:"Access the BuildHub Admin Dashboard"})]}),e.jsxs("form",{onSubmit:h,className:"admin-login-form",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"username",children:"Username"}),e.jsx("input",{id:"username",name:"username",type:"text",required:!0,placeholder:"Enter admin username",value:t.username,onChange:u,disabled:o})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"password",children:"Password"}),e.jsx("input",{id:"password",name:"password",type:"password",required:!0,placeholder:"Enter admin password",value:t.password,onChange:u,disabled:o})]}),a&&e.jsx("div",{className:"error-message",children:a}),e.jsx("button",{type:"submit",className:"admin-login-btn",disabled:o,children:o?"Logging in...":"Login as Admin"})]}),e.jsxs("div",{className:"admin-login-footer",children:[e.jsx("p",{children:e.jsx("a",{href:"/login",onClick:p=>{p.preventDefault(),A("/login")},children:" Use Main Login Page"})}),e.jsx("div",{className:"admin-credentials",children:e.jsxs("small",{children:[e.jsx("strong",{children:"Default Credentials:"}),e.jsx("br",{}),"Username: admin",e.jsx("br",{}),"Password: admin123"]})})]})]})})},U6=({user:t,isOpen:s,onClose:a,onVerificationComplete:r})=>{const[o,l]=N.useState(null),[A,u]=N.useState(null),[h,p]=N.useState(!1),[m,v]=N.useState(""),[b,x]=N.useState(""),[C,Q]=N.useState(""),[j,B]=N.useState(!1);N.useEffect(()=>{s&&t&&L()},[s,t]);const L=async()=>{p(!0),v("");try{const U=await(await fetch(`/buildhub/backend/api/admin/get_ocr_verification.php?user_id=${t.id}`)).json();U.success?(l(U.ocr_data),u(U.comparison_results)):v(U.message||"Failed to fetch OCR data")}catch(E){console.error("OCR fetch error:",E),v("Network error occurred")}finally{p(!1)}},P=async()=>{B(!0),v("");try{const U=await(await fetch("/buildhub/backend/api/admin/trigger_ocr.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:t.id})})).json();U.success?setTimeout(()=>{L()},1e3):v(U.message||"OCR processing failed")}catch(E){console.error("OCR trigger error:",E),v("Network error occurred")}finally{B(!1)}},F=async E=>{if(E){p(!0),v("");try{const V=await(await fetch("/buildhub/backend/api/admin/verify_ocr_data.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:t.id,action:E,admin_notes:b,verification_details:{comparison_results:A,admin_decision:E,timestamp:new Date().toISOString()}})})).json();V.success?(r(V.message),a()):v(V.message||"Verification action failed")}catch(U){console.error("Verification error:",U),v("Network error occurred")}finally{p(!1)}}},ee=E=>{switch(E){case"EXACT_MATCH":case"STRONG_MATCH":return"#28a745";case"PARTIAL_MATCH":return"#ffc107";case"NO_MATCH":return"#dc3545";case"OCR_ONLY":case"USER_ONLY":return"#6c757d";default:return"#6c757d"}},K=E=>{switch(E){case"EXACT_MATCH":return"";case"STRONG_MATCH":return"";case"PARTIAL_MATCH":return"";case"NO_MATCH":return"";case"OCR_ONLY":return"";case"USER_ONLY":return"";default:return""}},q=()=>{if(!A)return null;const{overall_match:E,match_score:U,recommendations:V}=A;let H="#6c757d",I="";return E==="HIGH"?(H="#28a745",I=""):E==="MEDIUM"?(H="#ffc107",I=""):E==="LOW"&&(H="#dc3545",I=""),{color:H,icon:I,score:Math.round(U),level:E,recommendations:V}};return s?e.jsx("div",{className:"ocr-modal-overlay",children:e.jsxs("div",{className:"ocr-modal",children:[e.jsxs("div",{className:"ocr-modal-header",children:[e.jsx("h2",{children:"OCR Document Verification"}),e.jsx("button",{className:"close-btn",onClick:a,children:""})]}),e.jsxs("div",{className:"ocr-modal-content",children:[h&&e.jsxs("div",{className:"loading-spinner",children:[e.jsx("div",{className:"spinner"}),e.jsx("p",{children:"Loading OCR data..."})]}),m&&e.jsxs("div",{className:"error-message",children:[e.jsx("span",{className:"error-icon",children:""}),m]}),t&&e.jsxs("div",{className:"user-info-section",children:[e.jsx("h3",{children:"User Information"}),e.jsxs("div",{className:"user-details",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Name:"})," ",t.first_name," ",t.last_name]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Email:"})," ",t.email]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Role:"})," ",t.role]})]})]}),!o&&!h&&e.jsx("div",{className:"no-ocr-section",children:e.jsxs("div",{className:"no-ocr-message",children:[e.jsx("span",{className:"info-icon",children:""}),e.jsx("h3",{children:"No OCR Data Available"}),e.jsx("p",{children:"Document has not been processed yet. Click below to start OCR processing."}),e.jsx("button",{className:"trigger-ocr-btn",onClick:P,disabled:j,children:j?"Processing...":"Process Document with OCR"})]})}),o&&A&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"ocr-summary-section",children:[e.jsx("h3",{children:"OCR Processing Summary"}),e.jsxs("div",{className:"ocr-summary",children:[e.jsxs("div",{className:"summary-item",children:[e.jsx("span",{className:"label",children:"Document Type:"}),e.jsx("span",{className:"value",children:o.document_type})]}),e.jsxs("div",{className:"summary-item",children:[e.jsx("span",{className:"label",children:"Confidence Level:"}),e.jsx("span",{className:`confidence-badge ${o.confidence_level.toLowerCase()}`,children:o.confidence_level})]}),e.jsxs("div",{className:"summary-item",children:[e.jsx("span",{className:"label",children:"Processing Date:"}),e.jsx("span",{className:"value",children:new Date(o.created_at).toLocaleString()})]})]})]}),(()=>{const E=q();return E&&e.jsxs("div",{className:"overall-match-section",children:[e.jsx("h3",{children:"Overall Verification Result"}),e.jsxs("div",{className:"overall-match",style:{borderColor:E.color},children:[e.jsxs("div",{className:"match-header",children:[e.jsx("span",{className:"match-icon",children:E.icon}),e.jsxs("span",{className:"match-score",style:{color:E.color},children:[E.score,"% Match (",E.level,")"]})]}),E.recommendations&&E.recommendations.length>0&&e.jsxs("div",{className:"recommendations",children:[e.jsx("h4",{children:"Recommendations:"}),e.jsx("ul",{children:E.recommendations.map((U,V)=>e.jsx("li",{children:U},V))})]})]})]})})(),e.jsxs("div",{className:"field-comparison-section",children:[e.jsx("h3",{children:"Field-by-Field Comparison"}),e.jsxs("div",{className:"comparison-table",children:[e.jsxs("div",{className:"comparison-header",children:[e.jsx("div",{className:"field-col",children:"Field"}),e.jsx("div",{className:"user-col",children:"User Profile"}),e.jsx("div",{className:"ocr-col",children:"OCR Extracted"}),e.jsx("div",{className:"match-col",children:"Match Status"})]}),A.field_comparisons.map((E,U)=>e.jsxs("div",{className:"comparison-row",children:[e.jsx("div",{className:"field-col",children:e.jsx("strong",{children:E.field_label})}),e.jsx("div",{className:"user-col",children:E.user_value||e.jsx("em",{children:"Not provided"})}),e.jsx("div",{className:"ocr-col",children:E.ocr_value||e.jsx("em",{children:"Not found"})}),e.jsxs("div",{className:"match-col",children:[e.jsxs("div",{className:"match-status",style:{color:ee(E.match_status)},children:[e.jsx("span",{className:"match-icon",children:K(E.match_status)}),e.jsx("span",{className:"match-text",children:E.match_status.replace("_"," ")}),E.similarity_score>0&&e.jsxs("span",{className:"similarity-score",children:["(",Math.round(E.similarity_score*100),"%)"]})]}),E.notes&&e.jsx("div",{className:"match-notes",children:E.notes}),E.recommendation&&e.jsxs("div",{className:"match-recommendation",children:[e.jsx("strong",{children:"Recommendation:"})," ",E.recommendation]})]})]},U))]})]}),o.cleaned_text&&e.jsxs("div",{className:"extracted-text-section",children:[e.jsx("h3",{children:"Extracted Text Preview"}),e.jsx("div",{className:"extracted-text",children:e.jsx("pre",{children:o.cleaned_text})})]}),e.jsxs("div",{className:"admin-notes-section",children:[e.jsx("h3",{children:"Admin Notes"}),e.jsx("textarea",{className:"admin-notes-input",value:b,onChange:E=>x(E.target.value),placeholder:"Add notes about your verification decision...",rows:4})]}),e.jsxs("div",{className:"verification-actions",children:[e.jsx("h3",{children:"Verification Decision"}),e.jsxs("div",{className:"action-buttons",children:[e.jsx("button",{className:"approve-btn",onClick:()=>F("approve"),disabled:h,children:" Approve User"}),e.jsx("button",{className:"reupload-btn",onClick:()=>F("request_reupload"),disabled:h,children:" Request Reupload"}),e.jsx("button",{className:"reject-btn",onClick:()=>F("reject"),disabled:h,children:" Reject User"})]})]})]})]})]})}):null},Ka=({name:t,size:s=20,stroke:a=1.8,color:r="currentColor"})=>{const o={width:s,height:s,viewBox:"0 0 24 24",fill:"none",stroke:r,strokeWidth:a,strokeLinecap:"round",strokeLinejoin:"round"};switch(t){case"home":return e.jsxs("svg",{...o,children:[e.jsx("path",{d:"M3 10.5L12 3l9 7.5"}),e.jsx("path",{d:"M5 10v10h14V10"})]});case"users":return e.jsxs("svg",{...o,children:[e.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),e.jsx("circle",{cx:"9",cy:"7",r:"4"}),e.jsx("path",{d:"M22 21v-2a4 4 0 0 0-3-3.87"}),e.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]});case"hourglass":return e.jsxs("svg",{...o,children:[e.jsx("path",{d:"M6 2h12"}),e.jsx("path",{d:"M6 22h12"}),e.jsx("path",{d:"M8 2v6l4 4 4-4V2"}),e.jsx("path",{d:"M16 22v-6l-4-4-4 4v6"})]});case"cube":return e.jsxs("svg",{...o,children:[e.jsx("path",{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"}),e.jsx("path",{d:"M3.27 6.96L12 12l8.73-5.04"})]});case"project":return e.jsxs("svg",{...o,children:[e.jsx("rect",{x:"3",y:"3",width:"18",height:"14",rx:"2"}),e.jsx("path",{d:"M7 21h10"}),e.jsx("path",{d:"M12 17v4"})]});case"search":return e.jsxs("svg",{...o,children:[e.jsx("circle",{cx:"11",cy:"11",r:"7"}),e.jsx("path",{d:"M21 21l-4.35-4.35"})]});case"bell":return e.jsxs("svg",{...o,children:[e.jsx("path",{d:"M15 17h5l-1.4-1.4A2 2 0 0 1 18 14.2V11a6 6 0 0 0-12 0v3.2a2 2 0 0 1-.6 1.4L4 17h5"}),e.jsx("path",{d:"M9 21h6"})]});case"settings":return e.jsxs("svg",{...o,children:[e.jsx("path",{d:"M12 15a3 3 0 1 0 0-6 3 3 0 0 0 0 6z"}),e.jsx("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 1 1-2.83 2.83l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V22a2 2 0 1 1-4 0v-.09a1.65 1.65 0 0 0-1-1.51 1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 1 1-2.83-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H2a2 2 0 1 1 0-4h.09a1.65 1.65 0 0 0 1.51-1 1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 1 1 2.83-2.83l.06.06a1.65 1.65 0 0 0 1.82.33H8a1.65 1.65 0 0 0 1-1.51V2a2 2 0 1 1 4 0v.09a1.65 1.65 0 0 0 1 1.51h.09a1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 1 1 2.83 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V8c0 .66.26 1.3.73 1.77.47.47 1.11.73 1.77.73H22a2 2 0 1 1 0 4h-.09a1.65 1.65 0 0 0-1.51 1z"})]});case"logout":return e.jsxs("svg",{...o,children:[e.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),e.jsx("path",{d:"M16 17l5-5-5-5"}),e.jsx("path",{d:"M21 12H9"})]});case"file":return e.jsxs("svg",{...o,children:[e.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),e.jsx("path",{d:"M14 2v6h6"})]});case"eye":return e.jsxs("svg",{...o,children:[e.jsx("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),e.jsx("circle",{cx:"12",cy:"12",r:"3"})]});case"download":return e.jsxs("svg",{...o,children:[e.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),e.jsx("path",{d:"M7 10l5 5 5-5"}),e.jsx("path",{d:"M12 15V3"})]});case"check":return e.jsx("svg",{...o,children:e.jsx("path",{d:"M20 6L9 17l-5-5"})});case"x":return e.jsxs("svg",{...o,children:[e.jsx("path",{d:"M18 6L6 18"}),e.jsx("path",{d:"M6 6l12 12"})]});default:return null}},E6=()=>{const t=Wr(),[s,a]=N.useState("dashboard"),[r,o]=N.useState([]),[l,A]=N.useState([]),[u,h]=N.useState([]),[p,m]=N.useState({}),[v,b]=N.useState(!1),[x,C]=N.useState(""),[Q,j]=N.useState(""),[B,L]=N.useState(""),[P,F]=N.useState(""),[ee,K]=N.useState(null),[q,E]=N.useState(!1),[U,V]=N.useState(!1),[H,I]=N.useState(null),[M,re]=N.useState([]),[G,Z]=N.useState(!1),[fe,Ae]=N.useState(null),[Ce,te]=N.useState([]),[he,k]=N.useState(""),T=typeof window<"u"&&(localStorage.getItem("admin_username")||"Administrator")||"Administrator",[z,le]=N.useState({role:"all",status:"all",search:"",sortBy:"created_at",sortOrder:"desc"}),[X,W]=N.useState({name:"",category:"",unit:"",price:"",description:""});N.useEffect(()=>{li(async()=>{const{preventCache:J}=await import("./session-DODIVVdM.js");return{preventCache:J}},[]).then(({preventCache:J})=>J()),de(),s==="pending"?me():s==="users"?Be():s==="materials"?Qe():s==="reports"&&xe()},[s]),N.useEffect(()=>{if(s!=="reports")return;const J=setInterval(()=>{xe()},3e4),tt=setInterval(()=>{fe&&et(fe.id)},15e3);return()=>{clearInterval(J),clearInterval(tt)}},[s,fe]),N.useEffect(()=>{s==="users"&&Be()},[z]),N.useEffect(()=>{if(x||Q){const J=setTimeout(()=>{C(""),j("")},5e3);return()=>clearTimeout(J)}},[x,Q]),N.useEffect(()=>{if(B||P){const J=setTimeout(()=>{L(""),F("")},5e3);return()=>clearTimeout(J)}},[B,P]);const de=async()=>{try{const J=await fetch("/buildhub/backend/api/admin/get_stats.php");if(!J.ok)throw new Error(`HTTP error! status: ${J.status}`);const tt=await J.json();tt.success?m(tt.stats||{}):(console.error("Stats error:",tt.message),m({}))}catch(J){console.error("Error fetching system stats:",J)}},me=async()=>{b(!0);try{const J=await fetch("/buildhub/backend/api/admin/get_pending_users.php");if(!J.ok)throw new Error(`HTTP error! status: ${J.status}`);const tt=await J.json();tt.success?(o(tt.users||[]),C("")):(C(tt.message||"Failed to fetch pending users"),o([]))}catch(J){console.error("Fetch pending users error:",J),C(`Network error: ${J.message}`),o([])}finally{b(!1)}},Be=async()=>{b(!0);try{const J=new URLSearchParams({role:z.role,status:z.status,search:z.search,sortBy:z.sortBy,sortOrder:z.sortOrder}),tt=await fetch(`/buildhub/backend/api/admin/get_all_users.php?${J}`);if(!tt.ok)throw new Error(`HTTP error! status: ${tt.status}`);const Qt=await tt.json();Qt.success?(A(Qt.users||[]),C("")):(C(Qt.message||"Failed to fetch users"),A([]))}catch(J){console.error("Fetch all users error:",J),C(`Network error: ${J.message}`),A([])}finally{b(!1)}},Qe=async()=>{b(!0);try{const tt=await(await fetch("/buildhub/backend/api/admin/get_materials.php")).json();tt.success?h(tt.materials):C(tt.message||"Failed to fetch materials")}catch{C("Network error occurred")}finally{b(!1)}},ut=async(J,tt)=>{b(!0),C(""),j("");try{const Qt=await fetch("/buildhub/backend/api/admin/user_action.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:J,action:tt})});if(!Qt.ok)throw new Error(`HTTP error! status: ${Qt.status}`);const Et=await Qt.json();Et.success?(j(Et.message),setTimeout(()=>{me(),Be()},500)):C(Et.message||"Action failed")}catch(Qt){console.error("User action error:",Qt),C(`Network error: ${Qt.message}`)}finally{b(!1)}},mt=async(J,tt)=>{try{const Qt=await fetch(`/buildhub/backend/api/admin/download_document.php?user_id=${J}&doc_type=${tt}`);if(Qt.ok){const Et=await Qt.blob(),Jt=window.URL.createObjectURL(Et),os=document.createElement("a");os.style.display="none",os.href=Jt,os.download=`${tt}_${J}`,document.body.appendChild(os),os.click(),window.URL.revokeObjectURL(Jt)}else C("Failed to download document")}catch{C("Download failed")}},Ve=J=>{I(J),V(!0)},je=()=>{V(!1),I(null)},Ft=J=>{j(J),setTimeout(()=>{me(),Be()},500)},Rt=(J,tt)=>{const Qt=`/buildhub/backend/api/admin/view_document.php?user_id=${J}&doc_type=${tt}`;window.open(Qt,"_blank")},at=async J=>{J.preventDefault(),b(!0),L(""),F("");try{const Qt=await(await fetch("/buildhub/backend/api/admin/add_material.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(X)})).json();Qt.success?(F("Material added successfully"),W({name:"",category:"",unit:"",price:"",description:""}),Qe()):L(Qt.message||"Failed to add material")}catch{L("Network error occurred")}finally{b(!1)}},Xe=J=>{const tt=u.find(Qt=>Qt.id===J);K(tt),pt()},pt=async()=>{if(ee){b(!0),L(""),F(""),setShowDeleteConfirm(!1);try{const tt=await(await fetch("/buildhub/backend/api/admin/delete_material.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({material_id:ee.id})})).json();tt.success?(F("Material deleted successfully"),Qe()):L(tt.message||"Failed to delete material")}catch{L("Network error occurred")}finally{b(!1),K(null)}}},xe=async()=>{Z(!0);try{console.log("Loading support issues..."),console.log("API URL: /buildhub/backend/api/admin/get_support_issues.php");const J=await fetch("/buildhub/backend/api/admin/get_support_issues.php",{credentials:"include",headers:{"Content-Type":"application/json"}});if(console.log("Response status:",J.status),console.log("Response headers:",J.headers),!J.ok)throw new Error(`HTTP ${J.status}: ${J.statusText}`);const tt=await J.json();if(console.log("Response data:",tt),tt.success)console.log("Setting support issues:",tt.issues?.length||0,"issues"),re(tt.issues||[]),C("");else{console.log("Admin API failed, trying fallback. Message:",tt.message),C(`Admin API failed: ${tt.message}`);try{console.log("Trying fallback API...");const Et=await(await fetch("/buildhub/backend/api/support/get_issues.php",{credentials:"include"})).json();console.log("Fallback response:",Et),Et.success?(re(Et.issues||[]),C("Showing your own issues (admin access may be limited)")):(re([]),C("No issues found and admin access failed"))}catch(Qt){console.error("Fallback also failed:",Qt),re([]),C("Both admin and user APIs failed")}}}catch(J){console.error("Error loading support issues:",J),C(`Failed to load reports: ${J.message}`),re([])}finally{Z(!1)}},et=async J=>{Z(!0);try{const Qt=await(await fetch(`/buildhub/backend/api/admin/get_support_thread.php?issue_id=${J}`,{credentials:"include"})).json();Qt.success?(Ae(Qt.issue),te(Qt.replies||[])):C(Qt.message||"Failed to load thread")}catch{C("Failed to load thread")}finally{Z(!1)}},Oe=async()=>{if(!(!fe||!he.trim()))try{const tt=await(await fetch("/buildhub/backend/api/support/admin_reply.php",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({issue_id:fe.id,message:he})})).json();tt.success?(k(""),et(fe.id),xe(),j("Reply sent")):C(tt.message||"Failed to send reply")}catch{C("Network error sending reply")}},Bt=async(J,tt)=>{b(!0),C(""),j("");try{const Qt=await fetch("/buildhub/backend/api/admin/update_user_status.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:J,status:tt})});if(!Qt.ok)throw new Error(`HTTP error! status: ${Qt.status}`);const Et=await Qt.json();Et.success?(j(Et.message),Be(),me(),selectedUser&&selectedUser.id===J&&setSelectedUser({...selectedUser,status:tt})):C(Et.message||"Status update failed")}catch(Qt){console.error("User status update error:",Qt),C(`Network error: ${Qt.message}`)}finally{b(!1)}},xt=async J=>{b(!0),C(""),j("");try{const tt=await fetch("/buildhub/backend/api/admin/delete_user.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:J})});if(!tt.ok)throw new Error(`HTTP error! status: ${tt.status}`);const Qt=await tt.json();Qt.success?(j(Qt.message||"User deleted"),Be(),me()):C(Qt.message||"Failed to delete user")}catch(tt){C(`Network error: ${tt.message}`)}finally{b(!1)}},dt=(J,tt)=>{le(Qt=>({...Qt,[J]:tt}))},Ut=()=>{le({role:"all",status:"all",search:"",sortBy:"created_at",sortOrder:"desc"})},wt=J=>{toast.info(`User Details:
Name: ${J.name}
Email: ${J.email}
Status: ${J.status}
Role: ${J.role}
Created: ${new Date(J.created_at).toLocaleDateString()}`)},bt=async()=>{try{await fetch("/buildhub/backend/api/logout.php",{method:"POST",credentials:"include"})}catch{}localStorage.removeItem("admin_logged_in"),localStorage.removeItem("admin_username"),t("/login",{replace:!0})},Ht=()=>e.jsxs("div",{children:[e.jsxs("div",{className:"main-header",children:[e.jsx("h1",{children:"Overview"}),e.jsx("p",{children:"Manage users, materials, and monitor system activity"})]}),e.jsxs("div",{className:"stats-grid",children:[e.jsx("div",{className:"stat-card w-blue",children:e.jsxs("div",{className:"stat-content",children:[e.jsx("div",{className:"stat-icon users",children:e.jsx(Ka,{name:"users"})}),e.jsxs("div",{className:"stat-info",children:[e.jsx("h3",{children:p.totalUsers||0}),e.jsx("p",{children:"Total Users"})]})]})}),e.jsx("div",{className:"stat-card w-orange",children:e.jsxs("div",{className:"stat-content",children:[e.jsx("div",{className:"stat-icon pending",children:e.jsx(Ka,{name:"hourglass"})}),e.jsxs("div",{className:"stat-info",children:[e.jsx("h3",{children:r.length}),e.jsx("p",{children:"Pending Approvals"})]})]})}),e.jsx("div",{className:"stat-card w-purple",children:e.jsxs("div",{className:"stat-content",children:[e.jsx("div",{className:"stat-icon materials",children:e.jsx(Ka,{name:"cube"})}),e.jsxs("div",{className:"stat-info",children:[e.jsx("h3",{children:u.length}),e.jsx("p",{children:"Materials Listed"})]})]})}),e.jsx("div",{className:"stat-card w-green",children:e.jsxs("div",{className:"stat-content",children:[e.jsx("div",{className:"stat-icon projects",children:e.jsx(Ka,{name:"project"})}),e.jsxs("div",{className:"stat-info",children:[e.jsx("h3",{children:p.activeProjects||0}),e.jsx("p",{children:"Active Projects"})]})]})})]}),e.jsxs("div",{className:"section-card",children:[e.jsxs("div",{className:"section-header",children:[e.jsx("h2",{children:"Quick Actions"}),e.jsx("p",{children:"Common administrative tasks"})]}),e.jsx("div",{className:"section-content",children:e.jsxs("div",{className:"quick-actions",children:[e.jsxs("button",{className:"action-card",onClick:()=>a("users"),children:[e.jsx("div",{className:"action-icon",children:e.jsx(Ka,{name:"users"})}),e.jsx("h3",{children:"Manage All Users"}),e.jsx("p",{children:"View, filter, and manage all system users"})]}),e.jsxs("button",{className:"action-card",onClick:()=>a("pending"),children:[e.jsx("div",{className:"action-icon",children:e.jsx(Ka,{name:"hourglass"})}),e.jsx("h3",{children:"Review Pending Users"}),e.jsx("p",{children:"Approve or reject user registration requests"})]}),e.jsxs("button",{className:"action-card",onClick:()=>a("materials"),children:[e.jsx("div",{className:"action-icon",children:e.jsx(Ka,{name:"cube"})}),e.jsx("h3",{children:"Manage Materials"}),e.jsx("p",{children:"Add, edit, or remove construction materials"})]})]})})]}),e.jsxs("div",{className:"section-card",children:[e.jsxs("div",{className:"section-header",children:[e.jsx("h2",{children:"Recent Activity"}),e.jsx("p",{children:"Latest system activities and user actions"})]}),e.jsx("div",{className:"section-content",children:e.jsxs("div",{className:"item-list",children:[r.slice(0,5).map(J=>e.jsxs("div",{className:"list-item",children:[e.jsx("div",{className:"item-icon",children:e.jsx(Ka,{name:"users"})}),e.jsxs("div",{className:"item-content",children:[e.jsxs("h4",{className:"item-title",children:[J.first_name," ",J.last_name]}),e.jsxs("p",{className:"item-subtitle",children:["Role: ",J.role,"  Email: ",J.email]}),e.jsxs("p",{className:"item-meta",children:["Registered: ",new Date(J.created_at).toLocaleDateString()]})]}),e.jsx("div",{className:"item-actions",children:e.jsx("span",{className:"status-badge pending",children:"Pending Review"})})]},J.id)),r.length===0&&e.jsxs("div",{className:"empty-state",children:[e.jsx("div",{className:"empty-icon",children:""}),e.jsx("h3",{children:"All Caught Up!"}),e.jsx("p",{children:"No pending user approvals at the moment."})]})]})})]})]}),_t=()=>e.jsxs("div",{children:[e.jsx("div",{className:"main-header",children:e.jsx("div",{className:"header-content",children:e.jsxs("div",{children:[e.jsx("h1",{children:"User Management"}),e.jsx("p",{children:"View and manage all users in the system"})]})})}),e.jsxs("div",{className:"section-card",children:[e.jsxs("div",{className:"section-header",children:[e.jsx("h2",{children:"Filter & Search Users"}),e.jsx("p",{children:"Use filters to find specific users efficiently"})]}),e.jsx("div",{className:"section-content",children:e.jsxs("div",{className:"filters-container",children:[e.jsxs("div",{className:"filter-row",children:[e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{children:"Search Users"}),e.jsx("input",{type:"text",placeholder:"Search by name or email...",value:z.search,onChange:J=>dt("search",J.target.value),className:"filter-input"})]}),e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{children:"User Role"}),e.jsxs("select",{value:z.role,onChange:J=>dt("role",J.target.value),className:"filter-select",children:[e.jsx("option",{value:"all",children:"All Roles"}),e.jsx("option",{value:"homeowner",children:"Homeowners"}),e.jsx("option",{value:"contractor",children:"Contractors"}),e.jsx("option",{value:"architect",children:"Architects"})]})]}),e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{children:"Status"}),e.jsxs("select",{value:z.status,onChange:J=>dt("status",J.target.value),className:"filter-select",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"approved",children:"Approved"}),e.jsx("option",{value:"rejected",children:"Rejected"}),e.jsx("option",{value:"suspended",children:"Suspended"})]})]})]}),e.jsxs("div",{className:"filter-row",children:[e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{children:"Sort By"}),e.jsxs("select",{value:z.sortBy,onChange:J=>dt("sortBy",J.target.value),className:"filter-select",children:[e.jsx("option",{value:"created_at",children:"Registration Date"}),e.jsx("option",{value:"first_name",children:"First Name"}),e.jsx("option",{value:"last_name",children:"Last Name"}),e.jsx("option",{value:"email",children:"Email"}),e.jsx("option",{value:"role",children:"Role"}),e.jsx("option",{value:"status",children:"Status"})]})]}),e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{children:"Order"}),e.jsxs("select",{value:z.sortOrder,onChange:J=>dt("sortOrder",J.target.value),className:"filter-select",children:[e.jsx("option",{value:"desc",children:"Newest First"}),e.jsx("option",{value:"asc",children:"Oldest First"})]})]}),e.jsx("div",{className:"filter-actions",children:e.jsx("button",{className:"btn btn-secondary",onClick:Ut,children:"Clear Filters"})})]})]})})]}),e.jsxs("div",{className:"section-card",children:[e.jsxs("div",{className:"section-header",children:[e.jsxs("h2",{children:["Users (",l.length,")"]}),e.jsx("p",{children:"All registered users in the system"})]}),e.jsx("div",{className:"section-content",children:v?e.jsx("div",{className:"loading",children:"Loading users..."}):l.length===0?e.jsxs("div",{className:"empty-state",children:[e.jsx("div",{className:"empty-icon",children:""}),e.jsx("h3",{children:"No Users Found"}),e.jsx("p",{children:"No users match your current filters."})]}):e.jsx("div",{className:"users-table-container",children:e.jsxs("div",{className:"users-table",children:[e.jsxs("div",{className:"table-header",children:[e.jsx("div",{className:"table-cell",children:"User"}),e.jsx("div",{className:"table-cell",children:"Role"}),e.jsx("div",{className:"table-cell",children:"Status"}),e.jsx("div",{className:"table-cell",children:"Registered"}),e.jsx("div",{className:"table-cell",children:"Actions"})]}),l.map(J=>e.jsx(Q6,{user:J,onViewDetails:()=>wt(J),onStatusChange:tt=>Bt(J.id,tt),onViewDocument:Rt,onDownloadDocument:mt,onDeleteUser:xt},J.id))]})})})]})]}),Gt=()=>e.jsxs("div",{children:[e.jsx("div",{className:"main-header",children:e.jsx("div",{className:"header-content",children:e.jsxs("div",{children:[e.jsx("h1",{children:"Pending User Approvals"}),e.jsx("p",{children:"Review and approve user registration requests"})]})})}),e.jsxs("div",{className:"section-card",children:[e.jsx("div",{className:"section-header",children:e.jsxs("div",{children:[e.jsx("h2",{children:"Users Awaiting Approval"}),e.jsx("p",{children:"Review user documents and approve or reject registrations"}),e.jsx("p",{style:{fontSize:"12px",color:"#666",marginTop:"5px"},children:" OCR verification results are shown below each user card"})]})}),e.jsx("div",{className:"section-content",children:v?e.jsx("div",{className:"loading",children:"Loading users..."}):r.length===0?e.jsxs("div",{className:"empty-state",children:[e.jsx("div",{className:"empty-icon",children:""}),e.jsx("h3",{children:"No Pending Approvals"}),e.jsx("p",{children:"All user registrations have been processed!"})]}):e.jsx("div",{className:"users-grid",children:r.map(J=>e.jsx(L6,{user:J,onApprove:()=>ut(J.id,"approve"),onReject:()=>ut(J.id,"reject"),onViewDocument:Rt,onDownloadDocument:mt,onTriggerOCR:Ve,loading:v},J.id))})})]})]}),$t=()=>e.jsxs("div",{style:{marginRight:"20px"},children:[e.jsx("div",{className:"main-header",children:e.jsx("div",{className:"header-content",children:e.jsxs("div",{children:[e.jsx("h1",{children:"Materials Management"}),e.jsx("p",{children:"Manage construction materials and pricing"})]})})}),B&&e.jsxs("div",{className:"alert alert-error",style:{marginBottom:"20px"},children:[B,e.jsx("button",{onClick:()=>L(""),className:"alert-close",children:""})]}),P&&e.jsxs("div",{className:"alert alert-success",style:{marginBottom:"20px"},children:[P,e.jsx("button",{onClick:()=>F(""),className:"alert-close",children:""})]}),e.jsxs("div",{className:"section-card",style:{marginBottom:"24px"},children:[e.jsxs("div",{className:"section-header",children:[e.jsx("h2",{children:"Add New Material"}),e.jsx("p",{children:"Add construction materials to the system catalog"})]}),e.jsx("div",{className:"section-content",children:e.jsxs("form",{onSubmit:at,className:"material-form",children:[e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Material Name *"}),e.jsx("input",{type:"text",value:X.name,onChange:J=>W({...X,name:J.target.value}),placeholder:"e.g., Portland Cement",required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Category *"}),e.jsxs("select",{value:X.category,onChange:J=>W({...X,category:J.target.value}),required:!0,children:[e.jsx("option",{value:"",children:"Select Category"}),e.jsx("option",{value:"cement",children:"Cement"}),e.jsx("option",{value:"steel",children:"Steel"}),e.jsx("option",{value:"bricks",children:"Bricks"}),e.jsx("option",{value:"sand",children:"Sand"}),e.jsx("option",{value:"gravel",children:"Gravel"}),e.jsx("option",{value:"wood",children:"Wood"}),e.jsx("option",{value:"tiles",children:"Tiles"}),e.jsx("option",{value:"paint",children:"Paint"}),e.jsx("option",{value:"electrical",children:"Electrical"}),e.jsx("option",{value:"plumbing",children:"Plumbing"}),e.jsx("option",{value:"other",children:"Other"})]})]})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Unit *"}),e.jsx("input",{type:"text",value:X.unit,onChange:J=>W({...X,unit:J.target.value}),placeholder:"kg, m, pieces, etc.",required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Price per Unit *"}),e.jsx("input",{type:"number",step:"0.01",value:X.price,onChange:J=>W({...X,price:J.target.value}),placeholder:"0.00",required:!0})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Description"}),e.jsx("textarea",{value:X.description,onChange:J=>W({...X,description:J.target.value}),placeholder:"Optional description of the material...",rows:"3"})]}),e.jsx("div",{className:"form-actions",children:e.jsx("button",{type:"submit",disabled:v,className:"btn btn-primary",children:v?"Adding...":"Add Material"})})]})})]}),e.jsxs("div",{className:"section-card",children:[e.jsxs("div",{className:"section-header",children:[e.jsx("h2",{children:"Current Materials"}),e.jsx("p",{children:"All materials currently available in the system"})]}),e.jsx("div",{className:"section-content",children:v?e.jsx("div",{className:"loading",children:"Loading materials..."}):u.length===0?e.jsxs("div",{className:"empty-state",children:[e.jsx("div",{className:"empty-icon",children:""}),e.jsx("h3",{children:"No Materials Added"}),e.jsx("p",{children:"Start by adding your first construction material!"})]}):e.jsx("div",{className:"materials-grid",children:u.map(J=>e.jsx(T6,{material:J,onDelete:()=>Xe(J.id)},J.id))})})]})]});return e.jsxs("div",{className:"dashboard-container admin-modern",children:[e.jsx("button",{className:"mobile-menu-btn",onClick:()=>E(!q),children:""}),e.jsxs("div",{className:`dashboard-sidebar soft-sidebar expanded ${q?"open":""}`,children:[e.jsx("div",{className:"sidebar-header sb-brand",children:e.jsxs("a",{href:"#",className:"sidebar-logo",children:[e.jsx("div",{className:"logo-icon",children:""}),e.jsx("span",{className:"logo-text sb-title",children:"Admin"})]})}),e.jsxs("nav",{className:"sidebar-nav sb-nav",children:[e.jsxs("a",{href:"#",className:`nav-item sb-item ${s==="dashboard"?"active":""}`,onClick:J=>{J.preventDefault(),a("dashboard")},children:[e.jsx("span",{className:"nav-icon sb-icon",children:e.jsx(Ka,{name:"home"})}),"Overview"]}),e.jsxs("a",{href:"#",className:`nav-item sb-item ${s==="users"?"active":""}`,onClick:J=>{J.preventDefault(),a("users")},children:[e.jsx("span",{className:"nav-icon sb-icon",children:e.jsx(Ka,{name:"users"})}),"All Users"]}),e.jsxs("a",{href:"#",className:`nav-item sb-item ${s==="pending"?"active":""}`,onClick:J=>{J.preventDefault(),a("pending")},children:[e.jsx("span",{className:"nav-icon sb-icon",children:e.jsx(Ka,{name:"hourglass"})}),"Pending Approvals"]}),e.jsxs("a",{href:"#",className:`nav-item sb-item ${s==="materials"?"active":""}`,onClick:J=>{J.preventDefault(),a("materials")},children:[e.jsx("span",{className:"nav-icon sb-icon",children:e.jsx(Ka,{name:"cube"})}),"Materials"]}),e.jsxs("a",{href:"#",className:`nav-item sb-item ${s==="reports"?"active":""}`,onClick:J=>{J.preventDefault(),a("reports")},children:[e.jsx("span",{className:"nav-icon sb-icon",children:e.jsx(Ka,{name:"file"})}),"Customer Support"]})]})]}),e.jsxs("div",{className:"dashboard-main soft-main shifted",children:[e.jsxs("div",{className:"admin-topbar",children:[e.jsxs("div",{className:"search-box",children:[e.jsx(Ka,{name:"search",size:20}),e.jsx("input",{type:"text",placeholder:"Search","aria-label":"Search"})]}),e.jsxs("div",{className:"topbar-actions",children:[e.jsx("button",{className:"icon-btn","aria-label":"Change view",children:e.jsx(Ka,{name:"project"})}),e.jsx("button",{className:"icon-btn","aria-label":"Notifications",children:e.jsx(Ka,{name:"bell"})}),e.jsx("button",{className:"icon-btn","aria-label":"Settings",children:e.jsx(Ka,{name:"settings"})})]})]}),x&&e.jsxs("div",{className:"alert alert-error",children:[x,e.jsx("button",{onClick:()=>C(""),className:"alert-close",children:""})]}),Q&&e.jsxs("div",{className:"alert alert-success",children:[Q,e.jsx("button",{onClick:()=>j(""),className:"alert-close",children:""})]}),e.jsxs("div",{className:"admin-layout",children:[e.jsxs("div",{className:"admin-center",style:{paddingRight:"12px"},children:[s==="dashboard"&&Ht(),s==="users"&&_t(),s==="pending"&&Gt(),s==="materials"&&$t(),s==="reports"&&e.jsxs("div",{className:"admin-support-container",children:[e.jsxs("div",{className:"admin-support-header",children:[e.jsx("h1",{className:"admin-support-title",children:" Customer Support Issues"}),e.jsx("p",{className:"admin-support-subtitle",children:"View and respond to customer support requests and issues"}),e.jsxs("div",{className:"admin-support-stats",children:[e.jsxs("div",{className:"admin-support-stat",children:[e.jsx("div",{className:"admin-support-stat-number",children:M.length}),e.jsx("div",{className:"admin-support-stat-label",children:"Total Issues"})]}),e.jsxs("div",{className:"admin-support-stat",children:[e.jsx("div",{className:"admin-support-stat-number",children:M.filter(J=>J.status==="open").length}),e.jsx("div",{className:"admin-support-stat-label",children:"Open Issues"})]}),e.jsxs("div",{className:"admin-support-stat",children:[e.jsx("div",{className:"admin-support-stat-number",children:M.filter(J=>J.status==="replied").length}),e.jsx("div",{className:"admin-support-stat-label",children:"Replied"})]}),e.jsxs("div",{className:"admin-support-stat",children:[e.jsx("div",{className:"admin-support-stat-number",children:M.filter(J=>J.reply_count>0).length}),e.jsx("div",{className:"admin-support-stat-label",children:"With Replies"})]})]})]}),e.jsxs("div",{className:"admin-support-content",children:[e.jsxs("div",{className:"admin-issues-panel",children:[e.jsxs("div",{className:"admin-issues-header",children:[e.jsxs("h2",{className:"admin-issues-title",children:[" Customer Issues",e.jsx("span",{className:"admin-issues-count",children:M.length})]}),e.jsx("button",{className:"admin-refresh-btn",onClick:xe,children:" Refresh"}),e.jsx("button",{className:"admin-refresh-btn",onClick:async()=>{try{const tt=await(await fetch("/buildhub/backend/api/test_proxy.php")).json();console.log("Proxy test result:",tt),alert("Proxy test: "+(tt.success?"SUCCESS":"FAILED"))}catch(J){console.error("Proxy test failed:",J),alert("Proxy test FAILED: "+J.message)}},style:{marginLeft:"8px"},children:" Test API"})]}),e.jsxs("div",{className:"admin-issues-list",children:[x&&e.jsxs("div",{style:{padding:"16px",background:"#fee2e2",border:"1px solid #fca5a5",borderRadius:"8px",margin:"16px",color:"#dc2626"},children:[e.jsx("strong",{children:"Error:"})," ",x]}),G?e.jsx("div",{className:"admin-loading",children:"Loading customer issues..."}):M.length===0?e.jsxs("div",{className:"admin-empty-state",children:[e.jsx("div",{className:"admin-empty-icon",children:""}),e.jsx("h3",{className:"admin-empty-title",children:"No Customer Issues"}),e.jsx("p",{className:"admin-empty-text",children:x?"There was an error loading issues. Check the console for details.":"Customer support requests will appear here when submitted."})]}):M.map(J=>e.jsxs("div",{className:`admin-issue-item ${fe?.id===J.id?"selected":""}`,onClick:()=>et(J.id),children:[e.jsxs("div",{className:"admin-issue-header",children:[e.jsx("div",{className:"admin-issue-priority",children:J.category==="bug"?"":J.category==="billing"?"":J.category==="account"?"":J.category==="feature"?"":""}),e.jsxs("div",{className:"admin-issue-content",children:[e.jsx("h4",{className:"admin-issue-title",children:J.subject}),e.jsxs("p",{className:"admin-issue-meta",children:[e.jsxs("span",{className:"admin-issue-customer",children:[J.first_name||"Unknown"," ",J.last_name||"User"]}),J.email&&` (${J.email})`,"  #",J.id,"  ",J.category,J.reply_count>0&&`  ${J.reply_count} replies`]}),e.jsxs("p",{className:"admin-issue-time",children:[new Date(J.created_at).toLocaleDateString()," at ",new Date(J.created_at).toLocaleTimeString()]})]})]}),e.jsx("div",{className:"admin-issue-status",children:e.jsx("span",{className:`admin-status-badge ${J.status}`,children:J.status})})]},J.id))]})]}),e.jsx("div",{className:"admin-thread-panel",children:fe?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"admin-thread-header",children:[e.jsx("h3",{className:"admin-thread-title",children:fe.subject}),e.jsxs("div",{className:"admin-thread-meta",children:[e.jsxs("div",{className:"admin-thread-meta-item",children:[e.jsx("span",{className:"admin-thread-meta-label",children:"Customer"}),e.jsxs("span",{className:"admin-thread-meta-value",children:[fe.first_name||"Unknown"," ",fe.last_name||"User"]})]}),e.jsxs("div",{className:"admin-thread-meta-item",children:[e.jsx("span",{className:"admin-thread-meta-label",children:"Email"}),e.jsx("span",{className:"admin-thread-meta-value",children:fe.email||"Not provided"})]}),e.jsxs("div",{className:"admin-thread-meta-item",children:[e.jsx("span",{className:"admin-thread-meta-label",children:"Category"}),e.jsx("span",{className:"admin-thread-meta-value",children:fe.category})]}),e.jsxs("div",{className:"admin-thread-meta-item",children:[e.jsx("span",{className:"admin-thread-meta-label",children:"Status"}),e.jsx("span",{className:"admin-thread-meta-value",children:e.jsx("span",{className:`admin-status-badge ${fe.status}`,children:fe.status})})]})]})]}),e.jsxs("div",{className:"admin-thread-messages",children:[e.jsxs("div",{className:"admin-message customer",children:[e.jsx("div",{className:"admin-message-header",children:"Customer Issue"}),e.jsx("div",{className:"admin-message-body",children:fe.message}),e.jsxs("div",{className:"admin-message-time",children:[new Date(fe.created_at).toLocaleDateString()," at ",new Date(fe.created_at).toLocaleTimeString()]})]}),Ce.map(J=>e.jsxs("div",{className:`admin-message ${J.sender==="admin"?"admin":"customer"}`,children:[e.jsx("div",{className:"admin-message-header",children:J.sender==="admin"?"Admin Support":"Customer"}),e.jsx("div",{className:"admin-message-body",children:J.message}),e.jsxs("div",{className:"admin-message-time",children:[new Date(J.created_at).toLocaleDateString()," at ",new Date(J.created_at).toLocaleTimeString()]})]},J.id)),Ce.length===0&&fe.status==="open"&&e.jsxs("div",{className:"admin-empty-state",children:[e.jsx("div",{className:"admin-empty-icon",children:""}),e.jsx("h3",{className:"admin-empty-title",children:"No Replies Yet"}),e.jsx("p",{className:"admin-empty-text",children:"This customer issue is waiting for your response. Use the reply section below to help the customer."})]})]}),e.jsxs("div",{className:"admin-reply-section",children:[e.jsx("label",{className:"admin-reply-label",children:"Reply to Customer"}),e.jsx("textarea",{className:"admin-reply-textarea",rows:"4",value:he,onChange:J=>k(J.target.value),placeholder:"Type your response to help the customer resolve their issue..."}),e.jsxs("div",{className:"admin-reply-actions",children:[e.jsx("button",{className:"admin-reply-btn",onClick:Oe,disabled:!he.trim()||G,children:G?" Sending...":" Send Reply"}),e.jsx("span",{style:{fontSize:"14px",color:"#64748b"},children:"Customer will be notified of your response"})]})]})]}):e.jsxs("div",{className:"admin-empty-state",children:[e.jsx("div",{className:"admin-empty-icon",children:""}),e.jsx("h3",{className:"admin-empty-title",children:"Select a Customer Issue"}),e.jsx("p",{className:"admin-empty-text",children:"Choose an issue from the list to view the conversation and send replies."})]})})]})]})]}),e.jsx("aside",{className:"admin-right-rail",children:e.jsxs("div",{className:"profile-card",children:[e.jsxs("div",{className:"profile-header",children:[e.jsx("img",{className:"profile-avatar",alt:"avatar",src:`https://ui-avatars.com/api/?name=${encodeURIComponent(T)}&background=7c3aed&color=fff`}),e.jsx("button",{className:"icon-btn close-btn","aria-label":"Close",children:""})]}),e.jsx("h3",{className:"profile-name",children:T}),e.jsx("p",{className:"profile-sub",children:"Financial analytics"}),e.jsxs("div",{className:"profit-card",children:[e.jsx("div",{className:"mini-chart","aria-hidden":"true"}),e.jsxs("div",{className:"profit-values",children:[e.jsx("span",{className:"label",children:"Total Users"}),e.jsx("span",{className:"value",children:p.totalUsers||0})]})]}),e.jsxs("div",{className:"profit-card",style:{marginTop:"10px"},children:[e.jsx("div",{className:"mini-chart","aria-hidden":"true"}),e.jsxs("div",{className:"profit-values",children:[e.jsx("span",{className:"label",children:"Active Projects"}),e.jsx("span",{className:"value",children:p.activeProjects||0})]})]}),e.jsxs("div",{className:"recent-activities",children:[e.jsx("h4",{children:"Recent activities"}),e.jsxs("ul",{children:[r.slice(0,3).map(J=>e.jsxs("li",{children:[e.jsx("span",{className:"act-icon up"})," ",J.first_name," ",J.last_name," ",e.jsx("span",{className:"amount",children:"pending"})]},J.id)),r.length===0&&e.jsxs("li",{children:[e.jsx("span",{className:"act-icon down"})," No pending users ",e.jsx("span",{className:"amount",children:""})]})]})]}),e.jsx("div",{className:"profile-actions",style:{marginTop:"20px",paddingTop:"15px",borderTop:"1px solid #e5e7eb"},children:e.jsxs("button",{onClick:bt,className:"logout-btn",style:{width:"100%",padding:"10px 16px",backgroundColor:"#dc2626",color:"white",border:"none",borderRadius:"8px",fontSize:"14px",fontWeight:"500",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",transition:"all 0.2s ease"},onMouseOver:J=>{J.currentTarget.style.backgroundColor="#b91c1c",J.currentTarget.style.transform="translateY(-1px)"},onMouseOut:J=>{J.currentTarget.style.backgroundColor="#dc2626",J.currentTarget.style.transform="translateY(0)"},children:[e.jsx(Ka,{name:"logout"}),"Logout"]})})]})})]}),e.jsx(U6,{user:H,isOpen:U,onClose:je,onVerificationComplete:Ft})]})]})},L6=({user:t,onApprove:s,onReject:a,onViewDocument:r,onDownloadDocument:o,onTriggerOCR:l,loading:A})=>e.jsxs("div",{className:"user-card",children:[e.jsxs("div",{className:"user-header",children:[e.jsx("div",{className:"user-avatar",children:t.profile_image?e.jsx("img",{src:t.profile_image,alt:`${t.first_name} ${t.last_name}`,style:{width:"100%",height:"100%",objectFit:"cover",borderRadius:"50%"}}):e.jsxs("div",{style:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"600",fontSize:"16px",color:"#fff"},children:[t.first_name?.charAt(0),t.last_name?.charAt(0)]})}),e.jsxs("div",{className:"user-basic-info",children:[e.jsxs("h4",{children:[t.first_name," ",t.last_name]}),e.jsx("p",{className:"user-role",children:t.role})]})]}),e.jsxs("div",{className:"user-details",children:[e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Email:"}),e.jsx("span",{className:"detail-value",children:t.email})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Registered:"}),e.jsx("span",{className:"detail-value",children:new Date(t.created_at).toLocaleDateString()})]})]}),e.jsxs("div",{className:"user-documents",children:[e.jsx("h5",{children:"Documents:"}),t.role==="contractor"&&t.license&&e.jsxs("div",{className:"document-item",children:[e.jsxs("span",{className:"doc-label",children:[e.jsx(Ka,{name:"file"})," License"]}),e.jsxs("div",{className:"document-actions",children:[e.jsxs("button",{className:"btn btn-secondary btn-sm",onClick:()=>r(t.id,"license"),children:[e.jsx(Ka,{name:"eye"})," View"]}),e.jsxs("button",{className:"btn btn-secondary btn-sm",onClick:()=>o(t.id,"license"),children:[e.jsx(Ka,{name:"download"})," Download"]})]})]}),t.role==="architect"&&t.portfolio&&e.jsxs("div",{className:"document-item",children:[e.jsxs("span",{className:"doc-label",children:[e.jsx(Ka,{name:"file"})," Portfolio"]}),e.jsxs("div",{className:"document-actions",children:[e.jsxs("button",{className:"btn btn-secondary btn-sm",onClick:()=>r(t.id,"portfolio"),children:[e.jsx(Ka,{name:"eye"})," View"]}),e.jsxs("button",{className:"btn btn-secondary btn-sm",onClick:()=>o(t.id,"portfolio"),children:[e.jsx(Ka,{name:"download"})," Download"]})]})]}),!t.license&&!t.portfolio&&e.jsx("p",{className:"no-documents",children:"No documents uploaded"})]}),t.has_ocr&&t.ocr_id&&e.jsxs("div",{className:"ocr-results",style:{marginTop:"15px",padding:"12px",backgroundColor:"#f8f9fa",borderRadius:"8px",border:"1px solid #e0e0e0"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px"},children:[e.jsx("h5",{style:{fontSize:"14px",fontWeight:"600",color:"#333",margin:0},children:" OCR Verification Results"}),e.jsx("div",{children:e.jsx("button",{className:"btn btn-primary btn-sm",onClick:()=>{const u=`/buildhub/backend/api/admin/download_ocr_results_pdf.php?user_id=${t.id}`;window.open(u,"_blank")},style:{fontSize:"11px",padding:"5px 10px",fontWeight:"600"},title:"Download as PDF",children:" Download PDF"})})]}),e.jsxs("div",{style:{marginBottom:"10px"},children:[e.jsx("span",{style:{fontSize:"12px",color:"#666",fontWeight:"500"},children:"Confidence: "}),e.jsx("span",{style:{padding:"4px 8px",borderRadius:"4px",fontSize:"11px",fontWeight:"600",backgroundColor:t.confidence_level==="HIGH"?"#d4edda":t.confidence_level==="MEDIUM"?"#fff3cd":"#f8d7da",color:t.confidence_level==="HIGH"?"#155724":t.confidence_level==="MEDIUM"?"#856404":"#721c24"},children:t.confidence_level||"LOW"})]}),t.extracted_fields&&Object.keys(t.extracted_fields).length>0&&e.jsxs("div",{style:{marginBottom:"10px"},children:[e.jsx("div",{style:{fontSize:"12px",color:"#666",fontWeight:"500",marginBottom:"6px"},children:"Extracted Information:"}),e.jsx("div",{style:{fontSize:"11px",color:"#555"},children:Object.entries(t.extracted_fields).map(([u,h])=>e.jsxs("div",{style:{marginBottom:"4px",paddingLeft:"8px"},children:[e.jsxs("strong",{style:{textTransform:"capitalize"},children:[u.replace("_"," "),":"]})," ",h]},u))})]}),(!t.extracted_fields||Object.keys(t.extracted_fields).length===0)&&e.jsx("div",{style:{fontSize:"11px",color:"#999",fontStyle:"italic"},children:"No fields extracted (document may be unclear or unreadable)"}),t.ocr_processed_at&&e.jsxs("div",{style:{fontSize:"10px",color:"#999",marginTop:"8px"},children:["Processed: ",new Date(t.ocr_processed_at).toLocaleString()]})]}),!t.has_ocr&&(t.license||t.portfolio)&&e.jsxs("div",{style:{marginTop:"10px",padding:"8px",backgroundColor:"#fff3cd",borderRadius:"6px",fontSize:"11px",color:"#856404",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("span",{children:" OCR processing pending or not available"}),e.jsx("button",{className:"btn btn-secondary btn-sm",onClick:()=>{window.confirm("Trigger OCR processing for this document?")&&l&&l(t.id)},style:{fontSize:"10px",padding:"4px 8px"},children:" Process OCR"})]}),e.jsxs("div",{className:"user-actions",children:[t.has_ocr&&t.ocr_id&&e.jsx("button",{className:"btn btn-info",onClick:()=>l&&l(t),disabled:A,style:{marginBottom:"8px",width:"100%"},children:" Verify OCR Data"}),e.jsxs("button",{className:"btn btn-success",onClick:s,disabled:A,children:[e.jsx(Ka,{name:"check"})," Approve"]}),e.jsxs("button",{className:"btn btn-danger",onClick:a,disabled:A,children:[e.jsx(Ka,{name:"x"})," Reject"]})]})]}),Q6=({user:t,onViewDetails:s,onStatusChange:a,onViewDocument:r,onDownloadDocument:o,onDeleteUser:l})=>e.jsxs("div",{className:"table-row",children:[e.jsxs("div",{className:"table-cell user-info-cell",children:[e.jsx("div",{className:"user-avatar-small",children:t.profile_image?e.jsx("img",{src:t.profile_image,alt:`${t.first_name} ${t.last_name}`,style:{width:"100%",height:"100%",objectFit:"cover",borderRadius:"50%"}}):e.jsxs("div",{style:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"600",fontSize:"12px",color:"#fff"},children:[t.first_name?.charAt(0),t.last_name?.charAt(0)]})}),e.jsxs("div",{className:"user-basic-info",children:[e.jsxs("h5",{children:[t.first_name," ",t.last_name]}),e.jsx("p",{children:t.email}),t.phone&&e.jsx("p",{children:t.phone})]})]}),e.jsx("div",{className:"table-cell",children:e.jsx("span",{className:`role-badge ${t.role}`,children:t.role})}),e.jsx("div",{className:"table-cell",children:e.jsx("span",{className:`status-badge ${t.status}`,children:t.status||(t.is_verified?"approved":"pending")})}),e.jsx("div",{className:"table-cell",children:new Date(t.created_at).toLocaleDateString()}),e.jsx("div",{className:"table-cell actions-cell",children:e.jsxs("div",{className:"action-buttons",children:[e.jsx("button",{className:"btn btn-secondary btn-sm",onClick:s,children:" View"}),t.status==="suspended"?e.jsx("button",{className:"btn btn-success btn-sm",onClick:()=>a("approved"),children:" Unsuspend"}):e.jsx("button",{className:"btn btn-danger btn-sm",onClick:()=>a("suspended"),children:" Suspend"}),e.jsx("button",{className:"btn btn-danger btn-sm",onClick:()=>l(t.id),style:{backgroundColor:"#991b1b"},children:" Delete"})]})})]}),T6=({material:t,onDelete:s})=>e.jsxs("div",{className:"material-card",children:[e.jsxs("div",{className:"material-header",children:[e.jsx("h4",{children:t.name}),e.jsx("span",{className:"material-category",children:t.category})]}),e.jsxs("div",{className:"material-details",children:[e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Unit:"}),e.jsx("span",{className:"detail-value",children:t.unit})]}),e.jsxs("div",{className:"detail-item",children:[e.jsx("span",{className:"detail-label",children:"Price:"}),e.jsxs("span",{className:"detail-value",children:["",t.price]})]}),t.description&&e.jsx("div",{className:"material-description",children:e.jsx("p",{children:t.description})})]}),e.jsx("div",{className:"material-actions",children:e.jsx("button",{className:"btn btn-danger btn-sm",onClick:s,children:" Delete"})})]}),R6=({children:t})=>{const[s,a]=N.useState(!1),[r,o]=N.useState(!1);return N.useEffect(()=>{(async()=>{const l=localStorage.getItem("admin_logged_in")==="true";let A=!1;try{const h=await(await fetch("/buildhub/backend/api/session_check.php",{credentials:"include"})).json();A=!!h.authenticated&&h.user?.role==="admin"}catch{}o(l||A),a(!0)})()},[]),s?r?t:e.jsx(Bp,{to:"/login",replace:!0}):null},Qb=({children:t})=>{const[s,a]=N.useState(!1),[r,o]=N.useState(!1);return N.useEffect(()=>{(async()=>{const l=JSON.parse(sessionStorage.getItem("user")||"{}");let A=!1;try{A=!!(await(await fetch("/buildhub/backend/api/session_check.php",{credentials:"include"})).json()).authenticated}catch{}o(!!l.id&&l.role==="homeowner"&&A),a(!0)})()},[]),s?r?t:e.jsx(Bp,{to:"/login",replace:!0}):null},Tb=({children:t})=>{const[s,a]=N.useState(!1),[r,o]=N.useState(!1);return N.useEffect(()=>{(async()=>{const l=JSON.parse(sessionStorage.getItem("user")||"{}");let A=!1;try{A=!!(await(await fetch("/buildhub/backend/api/session_check.php",{credentials:"include"})).json()).authenticated}catch{}o(!!l.id&&l.role==="architect"&&A),a(!0)})()},[]),s?r?t:e.jsx(Bp,{to:"/login",replace:!0}):null},D6=({children:t})=>{const[s,a]=N.useState(!1),[r,o]=N.useState(!1);return N.useEffect(()=>{(async()=>{const l=JSON.parse(sessionStorage.getItem("user")||"{}");let A=!1;try{A=!!(await(await fetch("/buildhub/backend/api/session_check.php",{credentials:"include"})).json()).authenticated}catch{}o(!!l.id&&l.role==="contractor"&&A),a(!0)})()},[]),s?r?t:e.jsx(Bp,{to:"/login",replace:!0}):null},I6=JSON.parse(`[{"id":"plot_size_basic","question_variants":["what is plot size","how to measure plot size","plot size meaning","what to write in plot size","plot dimensions help","wht is plot size","plot size kya hai","plot size means what","how measure plot","plot size how to","plot dimention","plot size help me","i dont know plot size","plot size nahi pata","plot size kaise measure kare","plot size batao","plot size explain","plot size samjhao","plot size enthaanu","plot size engane measure cheyyam","plot size parayamo","plot size ariyilla","plot size enthanu parayendathu","plot size help tharo","land size","site size","plot area","land area","site area measurement","plot measurement help","land measurement","how big is my plot","plot size calculation","plot size kaise nikale","plot size calculate kaise kare","plot size formula"],"answer":"Plot size is the width  depth of your land in feet or meters. Example: 3040 feet or 1012 meters. If you only know the total area, just tell me like '1200 sqft' or '100 sqm' and I'll help you."},{"id":"building_size_basic","question_variants":["building size","house size","construction area","built up area","building area","bilding size","house area","construction size","built area","building sqft","house sqft","building size kya hai","ghar ka size","construction area kya hai","building size batao","house size kitna","building area explain","building size enthaanu","veedu size","construction area enthanu","building area parayamo","house size engane","construction size ariyilla","total construction area","built up area meaning","carpet area vs built up","house construction size","building footprint","construction area calculation"],"answer":"Building size is the total floor area you want to build in square feet. Example: 1500 sqft for a 3BHK house. This includes all rooms, kitchen, bathrooms, and corridors inside the house."},{"id":"budget_help","question_variants":["budget","cost","price","money needed","construction cost","building cost","budjet","buget","total cost","kitna paisa","kitna kharcha","cost kitna","budget kya hai","budget batao","paisa kitna lagega","construction budget","building budget","house budget","ghar banane ka budget","construction ka paisa","budget enthaanu","paisa ethrayanu","construction cost enthanu","budget parayamo","veedu paniyan paisa","construction budget ariyilla","ethra paisa venam","how much money","total expense","construction expense","building expense","budget planning","cost estimation","price estimate","construction charges","builder charges","architect fees","total project cost","house building cost"],"answer":"Budget is the total money you want to spend on construction. You can choose from ranges like 5-10 Lakhs, 20-30 Lakhs, etc. Or enter a custom amount like 25,00,000. This should include construction, materials, and labor costs."},{"id":"rooms_bedrooms","question_variants":["how many bedrooms","bedroom count","beds needed","3bhk meaning","bhk means","bedrom","bed room","kitne bedroom","bedroom kitne","3bhk kya hai","2bhk 3bhk","bedroom chahiye kitne","rooms kitne","kamre kitne","bedroom batao","rooms explain","bhk explain","bedroom help","bedroom entha","room ethrayanu","bedroom count enthanu","bhk meaning malayalam","room kitne chahiye","bedroom planning","room planning","bedroom requirements","how many rooms needed","room count","bedroom selection","room selection","family size bedroom","bedroom for family","room distribution","bedroom layout"],"answer":"Choose how many bedrooms you need: 1BHK (1 bedroom), 2BHK (2 bedrooms), 3BHK (3 bedrooms), etc. BHK means Bedroom-Hall-Kitchen. Most families choose 2BHK or 3BHK. You can also add master bedroom, guest room, parents room separately."},{"id":"bathrooms_toilets","question_variants":["bathroom","toilet","washroom","how many bathrooms","bathroom count","bathrom","bath room","toilet kitne","bathroom kitne","washroom kitne","attached bathroom","common bathroom","toilet chahiye kitne","bathroom help","toilet help","washroom help","bathroom batao","toilet batao","bathroom entha","toilet ethrayanu","washroom count","bathroom planning","toilet planning","bathroom requirements","washroom requirements","bathroom design","toilet design","bathroom layout","attached vs common bathroom","powder room"],"answer":"Plan bathrooms based on bedrooms: 1BHK needs 1 bathroom, 2BHK needs 2 bathrooms, 3BHK needs 2-3 bathrooms. Consider attached bathrooms for master bedrooms and common bathrooms for guests. Always plan at least 1 bathroom on ground floor."},{"id":"kitchen_types","question_variants":["kitchen","kitchen type","open kitchen","closed kitchen","modular kitchen","kitchn","kitchen kya","kitchen chahiye","kitchen help","kitchen batao","open or closed kitchen","kitchen design","kitchen size","rasoi","rasoi ghar","kitchen explain","kitchen options"],"answer":"Kitchen is where you cook food. You can choose: Open Kitchen (connected to living room), Closed Kitchen (separate room), or Semi-Open Kitchen. Most people prefer closed kitchen to avoid cooking smells in the house. You can also add a utility area for washing dishes."},{"id":"living_dining","question_variants":["living room","hall","drawing room","dining room","dining area","living","hall room","drawing","dining","baithak","hall chahiye","living room help","dining help","hall batao","living room size","dining room size","hall size","drawing room help"],"answer":"Living Room (Hall) is where family sits together and meets guests. Dining Room is where you eat meals. You can have them separate or combined as 'Living-Dining'. Most homes have one large living-dining area to save space."},{"id":"special_rooms","question_variants":["pooja room","study room","guest room","store room","utility room","puja room","prayer room","study","guest","store","utility","pooja ghar","study chahiye","guest room chahiye","store room help","pooja room help","study room help","prayer room help","mandir"],"answer":"Special rooms you can add: Pooja Room (for prayers), Study Room (for work/study), Guest Room (for visitors), Store Room (for storage), Utility Room (for washing). Choose what your family needs. Pooja room is very common in Indian homes."},{"id":"floors_levels","question_variants":["floors","how many floors","storeys","levels","ground floor","first floor","floor","kitne floor","floor kitne","manzil","talla","floors help","ground plus one","g+1","g+2","floors batao","levels help","storey help","floors explain","how many levels"],"answer":"Choose number of floors: 1 Floor (Ground floor only), 2 Floors (Ground + First floor), 3 Floors (Ground + First + Second). Most homes are 1-2 floors. More floors need more budget and stronger foundation. Check local building rules for maximum allowed floors."},{"id":"location_city","question_variants":["location","city","where","place","area","address","location help","city help","location batao","city batao","kaha hai","location kya","city kya","area kya","jagah","location explain","city explain","address help","place help","location chahiye","city chahiye"],"answer":"Enter your city name where you want to build the house. This helps us find local architects and contractors. Also helps estimate material costs and building rules for your area. Just type your city name like 'Mumbai', 'Delhi', 'Bangalore', etc."},{"id":"timeline_duration","question_variants":["timeline","time","duration","how long","when complete","completion time","time kitna","kitna time","timeline help","duration help","time lagega","kab complete","kab ready","timeline batao","time batao","duration batao","construction time","building time","house banane ka time","completion help"],"answer":"Timeline is how long you want the construction to take. Options: 1-3 months (very fast), 3-6 months (normal), 6-12 months (detailed work), 1-2 years (luxury), 2+ years (no hurry), Flexible (any time). Most houses take 6-12 months to complete."},{"id":"plot_shape_types","question_variants":["plot shape","land shape","plot type","shape of plot","plot ka shape","plot shape help","shape batao","plot shape kya","land shape help","rectangular","square","irregular","corner plot","l shaped","plot shape explain","shape options","plot geometry"],"answer":"Plot shape describes your land: Rectangular (most common), Square (equal sides), L-shaped (like letter L), Irregular (odd shape), Corner (at road corner). Most plots are rectangular. If your plot has unusual shape, choose 'Irregular' and upload photos."},{"id":"topography_land","question_variants":["topography","land level","slope","flat land","sloping land","land type","topography help","land level help","slope help","flat or slope","topography kya","land level kya","zameen flat hai","zameen slope hai","topography batao","land condition","ground level","terrain"],"answer":"Topography means your land condition: Flat (level ground - easiest to build), Sloping (land goes up/down - needs extra work), Hilly (steep slope - more expensive). Flat land is cheapest to build on. Sloping land may need retaining walls and extra foundation work."},{"id":"budget_ranges_explained","question_variants":["budget range","cost range","price range","budget options","budget help","5 lakh","10 lakh","20 lakh","30 lakh","50 lakh","1 crore","2 crore","budget range help","cost options","price options","budget batao","kitna budget","budget kitna","cost kitna","paisa kitna"],"answer":"Budget ranges available: 5-10 Lakhs (basic house), 10-20 Lakhs (good quality), 20-30 Lakhs (premium), 30-50 Lakhs (luxury), 50-75 Lakhs (high-end), 75L-1Cr (premium luxury), 1-2 Crores (ultra luxury), 2-5 Crores (mansion), 5+ Crores (estate). Choose based on your budget capacity."},{"id":"house_styles_aesthetic","question_variants":["house style","design style","aesthetic","house design","architecture style","style help","design help","house style help","aesthetic help","modern","traditional","contemporary","kerala style","rajasthani style","style batao","design batao","house style kya","design kya","architecture help","style options","design options"],"answer":"House styles available: Modern (clean lines, glass), Traditional (classic Indian), Contemporary (mix of modern+traditional), Kerala Style (sloped roof, wood), Rajasthani (arches, courtyards), Minimalist (simple, less decoration), Colonial (British style), Mediterranean (European style). Choose what you like most."},{"id":"family_needs_requirements","question_variants":["family needs","family requirements","family size","family members","family help","family needs help","family requirements help","family kya chahiye","family needs batao","family size help","elderly","kids","children","parents","joint family","nuclear family","family type","family structure","family composition"],"answer":"Family needs help us design better: Elderly Members (need ground floor room, ramp), Small Children (need safe spaces, play area), Joint Family (need more rooms, common areas), Nuclear Family (compact design), Working from Home (need study/office), Guests (need guest room). Tell us about your family so we can plan accordingly."},{"id":"parking_garage","question_variants":["parking","garage","car parking","vehicle parking","car space","parking help","garage help","car parking help","parking space","parking kitni","garage chahiye","car park","vehicle space","parking batao","garage batao","car parking batao","parking area"],"answer":"Parking options: No Parking (save space), 1 Car Parking (1220 feet), 2 Car Parking (2020 feet), Covered Garage (protected from rain), Open Parking (cheaper option). Most families need 1-2 car parking. Garage protects car but costs more."},{"id":"vastu_compliance","question_variants":["vastu","vastu shastra","vastu compliant","vastu rules","vastu help","vastu chahiye","vastu follow","vastu according","vastu batao","vastu shastra help","vastu rules help","vastu compliance","direction","facing","east facing","north facing","vastu tips"],"answer":"Vastu Shastra is traditional Indian architecture science about directions and energy. We can design according to Vastu rules: Main door facing East/North, Kitchen in South-East, Master bedroom in South-West, Pooja room in North-East. Tell us if you want Vastu-compliant design or you're flexible."},{"id":"materials_construction","question_variants":["materials","construction materials","building materials","brick","cement","materials help","construction materials help","building materials help","materials kya","materials batao","construction material kya","brick or block","aac block","red brick","materials options","quality materials","best materials","materials choice"],"answer":"Construction materials options: Red Brick (traditional, strong), AAC Blocks (lightweight, insulated), Concrete Blocks (strong, fast), Steel Structure (modern, earthquake resistant), RCC (reinforced concrete). We use quality materials based on your budget and local availability. Standard materials work well for most homes."},{"id":"electrical_plumbing","question_variants":["electrical","plumbing","wiring","pipes","electrical work","plumbing work","electrical help","plumbing help","wiring help","electrical batao","plumbing batao","wiring batao","electrical kya","plumbing kya","power","water supply","drainage","electrical points","switches"],"answer":"Electrical & Plumbing included in construction: Electrical (wiring, switches, lights, fans, AC points), Plumbing (water supply, drainage, bathroom fittings, kitchen sink). We plan power points for all appliances and proper water supply/drainage for all rooms. Tell us if you need special electrical needs like EV charging, generator, solar."},{"id":"approvals_permissions","question_variants":["approvals","permissions","building permission","plan approval","noc","approvals help","permissions help","building permission help","approvals kya","permissions kya","approval chahiye","permission chahiye","plan approval help","building approval","construction approval","legal approvals","government approval","municipal approval"],"answer":"Building approvals needed: Building Plan Approval (from local authority), NOC (No Objection Certificate), Structural Approval (for safety), Electrical Approval (for power connection). Your architect will help get all required approvals. This takes 2-4 weeks usually and has government fees."},{"id":"photo_upload_help","question_variants":["photo upload","upload photos","site photos","plot photos","pictures","photo help","upload help","photo upload help","pictures help","photo kaise upload","photo upload kaise","photos chahiye","site photos help","plot photos help","photo batao","upload batao","how to upload","photo requirements","picture requirements"],"answer":"Upload 3-5 clear photos of your plot: 1) Front view from road, 2) Inside the plot, 3) Left side boundary, 4) Right side boundary, 5) Back side. Take photos in good daylight, avoid blurry images. This helps architects understand your site better and design accordingly."},{"id":"architect_selection","question_variants":["architect","architect selection","choose architect","select architect","architect help","architect selection help","architect batao","architect kaise choose","architect kaise select","architect chahiye","good architect","best architect","architect find","architect search"],"answer":"After submitting your request, multiple architects will send you proposals with designs and quotes. You can see their portfolio, ratings, experience, and prices. Compare all proposals and choose the architect you like best. You can also message architects to ask questions before selecting."},{"id":"contractor_vs_architect","question_variants":["contractor vs architect","difference contractor architect","contractor or architect","contractor help","architect help","contractor kya","architect kya","contractor vs architect help","difference help","contractor batao","architect batao","who to choose","contractor or architect better"],"answer":"Architect designs your house (plans, drawings, structure) and Contractor builds it (construction work, labor, materials). Many professionals do both - they design AND build your house. When you submit request, you'll get proposals from architects who can also handle construction, so you get complete service from one person."},{"id":"payment_process","question_variants":["payment","payment process","how to pay","payment method","payment help","payment kaise","payment batao","paisa kaise de","payment process help","payment schedule","payment plan","advance payment","final payment","payment terms","payment security","safe payment"],"answer":"Payment is done in stages for your safety: 1) Advance (10-20% to start), 2) Foundation completion (20-30%), 3) Structure completion (30-40%), 4) Finishing work (20-30%), 5) Final completion (5-10%). Never pay full amount in advance. Pay only after seeing completed work at each stage."},{"id":"project_timeline_stages","question_variants":["project stages","construction stages","building stages","project timeline","construction process","building process","project stages help","construction stages help","building stages help","project process","construction timeline","building timeline","stages batao","process batao"],"answer":"Construction stages: 1) Design & Approvals (1-2 months), 2) Foundation work (1 month), 3) Structure (walls, roof) (2-3 months), 4) Electrical & Plumbing (1 month), 5) Finishing (flooring, painting, fittings) (2-3 months), 6) Final touches (15 days). Total: 6-12 months depending on house size and complexity."},{"id":"common_mistakes_avoid","question_variants":["mistakes to avoid","common mistakes","what not to do","avoid mistakes","mistakes help","common mistakes help","mistakes batao","galti kya","galti se bache","mistakes in construction","building mistakes","construction mistakes","avoid problems","problems to avoid"],"answer":"Common mistakes to avoid: 1) Paying full advance (pay in stages), 2) Not checking architect credentials, 3) Skipping soil test, 4) Not getting proper approvals, 5) Changing design frequently (increases cost), 6) Not planning electrical points properly, 7) Ignoring ventilation, 8) Not keeping buffer budget (keep 10-15% extra)."},{"id":"grammar_variations_help","question_variants":["i dont no","i dont know","i not know","dont no","not no","help me","help pls","pls help","plz help","halp","hlp","wat is","wht is","what iz","whats","wat","wht","how 2","how to","how do","how can","kaise","kese","tell me","tel me","batao","bata do","samjhao","explain","i need","i want","i require","chahiye","chaiye","chaye"],"answer":"I understand! I'm here to help you with your house construction request. Don't worry about spelling or grammar - just tell me what you need help with. I can explain any part of the form in simple words. What specific question do you have?"},{"id":"form_navigation_help","question_variants":["how to fill form","form help","form filling help","form batao","form kaise bhare","form kaise fill","form help me","form guide","step by step","form steps","form process","form explain","form samjhao","form tutorial","form instructions"],"answer":"Form filling is easy! Follow these steps: 1) Plot Details (size, shape, location), 2) Budget (how much money you want to spend), 3) Rooms (bedrooms, bathrooms, kitchen, etc.), 4) House Style (modern, traditional, etc.), 5) Upload Photos (of your plot), 6) Submit. I can help you with any step. Which part do you need help with?"},{"id":"technical_terms_simple","question_variants":["technical words","difficult words","hard words","terms meaning","technical terms","construction terms","building terms","words samjhao","terms batao","meaning batao","explain words","simple words","easy words","simple language","hindi me batao"],"answer":"I'll explain everything in simple words! Here are common terms: Plot = Your land, Building = Your house, Budget = Money needed, BHK = Bedroom-Hall-Kitchen, Sqft = Square feet (area measurement), Architect = Person who designs house, Contractor = Person who builds house, Approval = Government permission. Ask me about any word you don't understand!"},{"id":"urgent_help_support","question_variants":["urgent","emergency","urgent help","immediate help","fast help","urgent hai","jaldi help","turant help","emergency help","urgent support","immediate support","quick help","fast support","call me","phone call","talk to someone","human help"],"answer":"For urgent help, I can: 1) Answer your questions immediately, 2) Help you fill the form quickly, 3) Connect you to our support team for a phone call, 4) Mark your request as urgent for faster architect responses. What urgent help do you need right now? If you need to talk to someone, I can arrange a callback."},{"id":"cost_estimation_help","question_variants":["cost estimate","price estimate","cost calculation","price calculation","kitna kharcha","kitna cost","kitna price","estimate help","cost batao","price batao","estimate batao","calculation help","rough cost","approximate cost","ballpark cost","cost idea"],"answer":"Cost estimation depends on: 1) House size (bigger = more cost), 2) Location (city affects material prices), 3) Quality level (basic/premium/luxury), 4) Number of floors. Rough estimate: 1,500-3,000 per sqft. For 1500 sqft house: 22-45 Lakhs. For accurate estimate, submit your request and architects will give detailed quotes based on your exact requirements."},{"id":"local_rules_bylaws","question_variants":["local rules","building rules","bylaws","regulations","permissions","local rules help","building rules help","bylaws help","rules batao","permission rules","construction rules","building laws","local laws","what rules","rules kya hai","permission kya chahiye","rules follow"],"answer":"Local building rules vary by city/area: 1) Setbacks (space from boundary), 2) Maximum floors allowed, 3) Building height limits, 4) Parking requirements, 5) Fire safety rules. Your architect knows local rules and will design accordingly. They'll also help get required approvals from local authorities. Don't worry - we handle all legal compliance."},{"id":"dashboard_main_navigation","question_variants":["how to use dashboard","dashboard help","where to click","dashboard navigation","dashboard kaise use kare","dashboard help me","dashboard batao","dashboard guide","where is dashboard","dashboard kaha hai","main dashboard","home dashboard","dashboard features","dashboard options","dashboard menu","dashboard sections"],"answer":"Your dashboard is your main control center! Here's what you'll see: 1) 'Create New Request' button (big blue button) - click to start a new project, 2) 'My Requests' - see all your submitted requests, 3) 'Active Projects' - ongoing construction work, 4) 'Messages' - chat with architects, 5) 'Profile' - update your details. Everything is clearly labeled with icons!"},{"id":"create_request_button","question_variants":["where to create request","create new request","start new project","submit request","request kaise banaye","new request kaha hai","request button kaha","project start kaise","create request button","new request button","submit new request","request form kaha","how to create request","request banane ka button","new project button"],"answer":"Look for the big blue 'Create New Request' button on your dashboard - it's usually at the top! Click it to start your construction project. This opens the request form where you'll fill plot size, budget, rooms needed, etc. Can't miss it - it's the most prominent button!"},{"id":"my_requests_section","question_variants":["my requests","where are my requests","submitted requests","request status","mere requests kaha","request status kaha","submitted request kaha","my request section","requests list","all requests","request history","previous requests","request tracking","request progress","check request status"],"answer":"Click 'My Requests' in the sidebar or main menu. Here you'll see: 1) All your submitted requests, 2) Status of each (Open/In Progress/Completed), 3) Number of proposals received, 4) Click any request to see details, proposals, and messages. It's like your project inbox!"},{"id":"view_proposals_help","question_variants":["where are proposals","see proposals","architect proposals","proposal kaha hai","proposals kaise dekhe","architect ka proposal","proposal check kaise","proposal list","received proposals","proposal status","proposal section","architect quotes","how to see proposals","proposal viewing","check architect proposals"],"answer":"To see proposals: 1) Go to 'My Requests', 2) Click on your specific request, 3) Look for 'Proposals' tab or section, 4) You'll see all architect proposals with photos, prices, timelines. Each proposal shows architect profile, ratings, and portfolio. Click 'View Details' on any proposal to see full information!"},{"id":"messages_section","question_variants":["where are messages","chat with architect","message section","inbox","messages kaha hai","architect se chat","message kaise kare","chat section","communication","talk to architect","architect contact","messaging","chat kaha hai","message box","architect message","conversation"],"answer":"Click 'Messages' in your dashboard menu. Here you can: 1) See all conversations with architects, 2) Start new chats, 3) Reply to architect questions, 4) Share additional requirements. You can also message directly from any proposal by clicking 'Message Architect' button. All your chats are saved here!"},{"id":"profile_settings","question_variants":["profile settings","update profile","edit profile","my profile","profile kaha hai","profile edit kaise","profile update","account settings","personal details","profile information","account details","user profile","profile section","my account","profile page"],"answer":"Click 'Profile' or your name/photo in the dashboard. Here you can: 1) Update personal details (name, phone, email), 2) Change password, 3) Add profile photo, 4) Update address, 5) Manage notification preferences. Keep your profile updated so architects can contact you easily!"},{"id":"upload_documents_help","question_variants":["how to upload documents","upload photos","add documents","document upload","photo upload kaise","documents kaise upload","file upload","image upload","site photos upload","property documents","upload button kaha","file attach","document attach","photo attach","upload kaise kare"],"answer":"To upload documents: 1) In request form, look for 'Upload Documents' or 'Add Photos' section, 2) Click 'Choose Files' or drag & drop, 3) Select site photos, property papers, reference images, 4) Supported: JPG, PNG, PDF (max 10MB each). You can upload multiple files. Good photos help architects give better proposals!"},{"id":"select_architect_help","question_variants":["how to select architect","choose architect","accept proposal","hire architect","architect kaise choose kare","proposal accept kaise","architect select","contractor choose","architect hire kaise","proposal selection","architect booking","architect confirm","best architect kaise choose","architect decision","proposal accept button"],"answer":"To select an architect: 1) Compare all proposals carefully, 2) Check architect ratings & portfolio, 3) Compare prices & timelines, 4) Read reviews from previous clients, 5) Message architects with questions, 6) Click 'Accept Proposal' on your preferred choice. Take your time - this is an important decision!"},{"id":"project_tracking","question_variants":["track project","project status","construction progress","project updates","project tracking kaise","progress kaise dekhe","project status check","construction status","project progress","work progress","project monitoring","construction tracking","project ka status","kaam ka progress","project update kaha"],"answer":"Track your project in 'Active Projects' section: 1) See current construction phase, 2) View progress photos from architect, 3) Check timeline milestones, 4) Payment schedule status, 5) Upcoming tasks. Your architect will regularly update progress with photos and reports. You'll get notifications for major updates!"},{"id":"payment_section","question_variants":["payment","pay architect","payment section","billing","invoice","payment kaise kare","paisa kaise de","payment method","pay online","payment status","payment history","invoice kaha","bill payment","architect ko payment","construction payment","payment tracking"],"answer":"For payments: 1) Go to 'Active Projects'  Your project  'Payments' tab, 2) See payment schedule & due amounts, 3) Click 'Pay Now' for secure online payment, 4) View payment history & receipts, 5) Set up auto-pay if available. All payments are secure and you get instant receipts!"},{"id":"help_support","question_variants":["help","support","customer care","contact support","need help","help kaha hai","support team","customer service","help center","problem hai","issue hai","complaint","support contact","help desk","technical support","customer support","help section"],"answer":"Need help? 1) Use this chatbot for instant answers, 2) Click 'Help' or '?' icon in dashboard, 3) Email support@buildhub.com, 4) Call customer care (number in dashboard), 5) Live chat available 9 AM - 9 PM. We're here to help with any questions about using the platform, projects, or payments!"},{"id":"notifications_alerts","question_variants":["notifications","alerts","updates","notification settings","alerts kaha","notification kaise dekhe","alerts check","update notifications","message alerts","notification bell","alert section","notification center","updates kaha","notification settings","alert preferences"],"answer":"Check notifications: 1) Click bell icon () in dashboard header, 2) See new proposals, messages, project updates, 3) Mark as read/unread, 4) Go to 'Settings' to manage notification preferences (email, SMS, push). You'll get alerts for: new proposals, architect messages, project milestones, payment reminders."},{"id":"mobile_app_dashboard","question_variants":["mobile app","phone app","mobile dashboard","app download","mobile version","mobile app kaha","phone me dashboard","app download kaise","mobile site","smartphone app","android app","ios app","mobile browser","phone browser"],"answer":"Access dashboard on mobile: 1) Open browser on phone, 2) Go to buildhub.com, 3) Login with your account, 4) Mobile-friendly dashboard works perfectly, 5) All features available (create requests, view proposals, chat, payments). No separate app needed - the website works great on phones!"},{"id":"dashboard_first_time","question_variants":["first time user","new user help","getting started","dashboard tour","beginner guide","pehli baar use kar raha","new user","dashboard guide","start kaise kare","first time dashboard","beginner help","new to platform","getting started guide","dashboard tutorial","first steps","how to begin"],"answer":"Welcome to BuildHub! Here's your quick start guide: 1) Complete your profile first (click Profile), 2) Click big blue 'Create New Request' button, 3) Fill the form with your plot details & budget, 4) Upload site photos, 5) Submit and wait for architect proposals, 6) Check 'My Requests' to see proposals, 7) Message architects with questions, 8) Select your favorite proposal. That's it - you're all set!"},{"id":"dashboard_troubleshooting","question_variants":["dashboard not working","page not loading","button not clicking","error on dashboard","dashboard problem","site not working","login problem","dashboard issue","page loading slow","dashboard error","technical problem","website issue","dashboard nahi khul raha","problem hai dashboard me","error aa raha"],"answer":"Dashboard issues? Try these: 1) Refresh the page (F5 or reload button), 2) Clear browser cache & cookies, 3) Try different browser (Chrome, Firefox), 4) Check internet connection, 5) Disable ad-blockers temporarily, 6) Try incognito/private mode. Still not working? Contact support - we'll fix it quickly!"},{"id":"form_fields_overview","question_variants":["which fields to fill","form fields help","what to fill in form","form filling guide","fields kya bharna hai","form me kya dale","fields help","form guide","what information needed","form requirements","mandatory fields","required fields","form fields batao","kya kya bharna padega","form me kya kya chahiye"],"answer":"Here are the main fields you need to fill:\\n\\n**Essential Fields:**\\n Plot Size (length  width or total area)\\n Budget Range (your spending limit)\\n Number of Bedrooms (1BHK, 2BHK, 3BHK, etc.)\\n Number of Bathrooms\\n Number of Floors\\n Location/City\\n\\n**Optional but Helpful:**\\n Parking requirements\\n Special rooms (study, pooja room)\\n Preferred house style\\n Timeline for construction\\n Site photos\\n\\nDon't worry - I can help you with each field individually!"},{"id":"plot_size_field_help","question_variants":["plot size field","how to fill plot size","plot size kya dale","plot dimension field","plot size me kya likhe","plot field help","land size field","plot area field","plot size best option","plot size kaise bhare","plot measurement field","site area field","land area kya dale","plot size form field"],"answer":"**Plot Size Field - Best Practices:**\\n\\n** DO:**\\n Enter as Length  Width (e.g., 3040 feet)\\n Or total area (e.g., 1200 sqft)\\n Use consistent units (all feet or all meters)\\n Measure accurately or get survey done\\n\\n** DON'T:**\\n Mix units (30 feet  12 meters)\\n Guess measurements\\n Include built-up area\\n Forget to mention unit\\n\\n**Best Options:**\\n 3040 feet (1200 sqft) - Good for 2-3BHK\\n 4060 feet (2400 sqft) - Perfect for 3-4BHK\\n 5080 feet (4000 sqft) - Spacious 4-5BHK\\n\\n**Pro Tip:** If irregular plot, mention total area + note 'irregular shape'"},{"id":"budget_field_help","question_variants":["budget field help","budget kya dale","budget range field","cost field help","budget me kya likhe","budget best option","budget field kaise bhare","paisa field","budget range kya choose kare","budget selection help","cost range field","budget amount field","construction budget field","budget dropdown help"],"answer":"**Budget Field - Smart Selection:**\\n\\n** DO:**\\n Choose realistic range based on plot size\\n Include 10-20% buffer for extras\\n Consider location (metro cities cost more)\\n Think about quality level you want\\n\\n** DON'T:**\\n Set unrealistic low budget\\n Forget about extra costs (approvals, furniture)\\n Choose too wide range\\n Include land cost in construction budget\\n\\n**Best Budget Ranges:**\\n **10-20 Lakhs:** Basic 1-2BHK (1000-1500 sqft)\\n **20-35 Lakhs:** Good quality 2-3BHK (1500-2000 sqft)\\n **35-50 Lakhs:** Premium 3BHK (2000-2500 sqft)\\n **50+ Lakhs:** Luxury 4BHK+ (2500+ sqft)\\n\\n**Pro Tip:** Budget = Plot area  1500-3000 per sqft (depending on quality)"},{"id":"bedroom_field_help","question_variants":["bedroom field help","bedrooms kya choose kare","bhk field help","bedroom count field","kitne bedroom dale","bedroom selection help","bhk kya select kare","rooms field","bedroom number field","bedroom best option","bhk field kaise bhare","bedroom count kya dale","rooms kya choose kare","bedroom dropdown help"],"answer":"**Bedroom Field - Family-wise Selection:**\\n\\n** DO:**\\n Consider current + future family size\\n Think about guests and parents\\n Plan for kids' growth\\n Consider work-from-home needs\\n\\n** DON'T:**\\n Choose too few (you'll regret later)\\n Go overboard (maintenance issues)\\n Forget about master bedroom size\\n Ignore natural light in all rooms\\n\\n**Best Options by Family:**\\n **1BHK:** Single person/couple, no kids\\n **2BHK:** Couple + 1 child, small family\\n **3BHK:** Family of 4-5, most popular choice\\n **4BHK:** Large family, frequent guests\\n **5BHK+:** Joint family, luxury living\\n\\n**Pro Tip:** 3BHK is the sweet spot - good resale value, comfortable for most families"},{"id":"bathroom_field_help","question_variants":["bathroom field help","bathroom count field","toilet field help","washroom field","bathroom kya dale","toilet kitne dale","bathroom number field","washroom count","bathroom selection help","toilet count field","bathroom best option","bathroom kaise choose kare","toilet field kaise bhare","washroom kya select kare"],"answer":"**Bathroom Field - Practical Planning:**\\n\\n** DO:**\\n Plan 1 bathroom per bedroom minimum\\n Add 1 common bathroom for guests\\n Consider attached vs common bathrooms\\n Think about powder room near living area\\n\\n** DON'T:**\\n Have too few bathrooms (morning rush!)\\n Make all bathrooms same size\\n Forget ventilation planning\\n Skip powder room in large houses\\n\\n**Best Bathroom Count:**\\n **1BHK:** 1 bathroom (attached to bedroom)\\n **2BHK:** 2 bathrooms (1 attached + 1 common)\\n **3BHK:** 3 bathrooms (2 attached + 1 common)\\n **4BHK:** 4-5 bathrooms (3 attached + 1-2 common)\\n\\n**Pro Tip:** Always have at least 1 bathroom on ground floor for guests and elderly"},{"id":"floors_field_help","question_variants":["floors field help","floors kya dale","storey field help","floors count field","kitne floors dale","floors selection help","floors number field","storey count","floors best option","floors kaise choose kare","storey field kaise bhare","floors dropdown help","building height field","floors kya select kare"],"answer":"**Floors Field - Height Planning:**\\n\\n** DO:**\\n Check local building height limits\\n Consider elderly family members\\n Plan for future expansion\\n Think about natural light and ventilation\\n\\n** DON'T:**\\n Exceed local regulations\\n Make too many floors on small plot\\n Forget about staircase space\\n Ignore structural costs\\n\\n**Best Floor Options:**\\n **Ground Floor Only:** Easy access, good for elderly, lower cost\\n **Ground + 1st Floor:** Most popular, good space utilization\\n **Ground + 2 Floors:** Maximum space, needs lift planning\\n **Basement + Ground + 1st:** Extra space, higher cost\\n\\n**Pro Tip:** Ground + 1st floor is ideal - balances space, cost, and accessibility"},{"id":"parking_field_help","question_variants":["parking field help","parking kya dale","car parking field","vehicle parking field","parking selection help","parking space field","garage field help","parking count","parking best option","parking kaise choose kare","car space field","parking requirements field","vehicle space field","parking area field"],"answer":"**Parking Field - Vehicle Planning:**\\n\\n** DO:**\\n Plan for current + future vehicles\\n Consider 2-wheeler parking separately\\n Check local parking requirements\\n Think about guest parking\\n\\n** DON'T:**\\n Underestimate parking needs\\n Forget about car size variations\\n Ignore turning radius space\\n Skip covered parking\\n\\n**Best Parking Options:**\\n **1 Car:** Small family, budget-conscious\\n **2 Cars:** Most families, future-ready\\n **3+ Cars:** Large family, business needs\\n **No Parking:** Only if public transport area\\n\\n**Space Requirements:**\\n 1 Car: 1020 feet minimum\\n 2 Cars: 2020 feet or 1040 feet\\n Include turning space: +5 feet on sides\\n\\n**Pro Tip:** Always plan for 2 cars even if you have 1 - future resale value!"},{"id":"location_field_help","question_variants":["location field help","location kya dale","city field help","address field","location selection help","city kya choose kare","area field help","location best","location kaise bhare","city field kaise bhare","address kya dale","location dropdown help","city selection help","area kya select kare"],"answer":"**Location Field - Area Selection:**\\n\\n** DO:**\\n Enter exact city/town name\\n Mention specific area if metro city\\n Consider future development plans\\n Check connectivity and amenities\\n\\n** DON'T:**\\n Be too vague (just 'Delhi')\\n Forget to mention state\\n Choose very remote areas\\n Ignore infrastructure development\\n\\n**Best Location Practices:**\\n **Metro Cities:** Mention sector/area (e.g., 'Gurgaon, Sector 45')\\n **Tier 2 Cities:** City name + landmark (e.g., 'Indore, Vijay Nagar')\\n **Towns:** Town + district (e.g., 'Khargone, MP')\\n\\n**Location affects:**\\n Material costs (transport)\\n Labor availability\\n Approval processes\\n Architect selection\\n\\n**Pro Tip:** Specific location helps architects give accurate quotes"},{"id":"house_style_field_help","question_variants":["house style field","design style field","architecture style field","house type field","style kya choose kare","design field help","house style help","architecture field","style selection help","design kya dale","house style best option","architecture style help","design type field","style field kaise bhare"],"answer":"**House Style Field - Design Selection:**\\n\\n** DO:**\\n Choose style that suits climate\\n Consider maintenance requirements\\n Think about resale appeal\\n Match with neighborhood\\n\\n** DON'T:**\\n Choose trendy styles that date quickly\\n Ignore local climate conditions\\n Pick high-maintenance designs\\n Copy exactly from photos\\n\\n**Popular Style Options:**\\n **Modern/Contemporary:** Clean lines, large windows, minimalist\\n **Traditional Indian:** Courtyards, arches, cultural elements\\n **Colonial:** Pillars, balconies, classic appeal\\n **Mediterranean:** Warm colors, tiles, outdoor living\\n **Minimalist:** Simple, functional, low maintenance\\n\\n**Climate Considerations:**\\n Hot areas: Light colors, large overhangs\\n Rainy areas: Sloped roofs, covered areas\\n Cold areas: Compact design, south-facing windows\\n\\n**Pro Tip:** Modern style is most popular - good resale value and lower maintenance"},{"id":"timeline_field_help","question_variants":["timeline field help","construction time field","completion time field","duration field","timeline kya dale","time field help","construction duration field","project time","timeline selection help","completion timeline field","construction timeline help","project duration field","timeline best option","time kya choose kare"],"answer":"**Timeline Field - Realistic Planning:**\\n\\n** DO:**\\n Be realistic about construction time\\n Add buffer for delays (weather, approvals)\\n Consider seasonal factors\\n Plan around festivals/monsoons\\n\\n** DON'T:**\\n Set unrealistic short timelines\\n Forget about approval time\\n Ignore monsoon delays\\n Rush quality for speed\\n\\n**Realistic Timelines:**\\n **1000-1500 sqft:** 8-12 months\\n **1500-2500 sqft:** 12-18 months\\n **2500+ sqft:** 18-24 months\\n **Add 2-4 months:** For approvals\\n\\n**Factors Affecting Timeline:**\\n Plot accessibility\\n Design complexity\\n Material availability\\n Weather conditions\\n Local regulations\\n\\n**Pro Tip:** Start in October-November to avoid monsoon delays in main construction"},{"id":"special_rooms_field_help","question_variants":["special rooms field","additional rooms field","extra rooms field","other rooms field","special rooms kya dale","extra rooms help","additional rooms help","other rooms help","special rooms selection","extra rooms kya choose kare","additional rooms best","special rooms options","other rooms kya dale","extra rooms field help"],"answer":"**Special Rooms Field - Extra Spaces:**\\n\\n** DO:**\\n Think about family lifestyle\\n Consider future needs\\n Plan for hobbies and interests\\n Think about work-from-home\\n\\n** DON'T:**\\n Add too many special rooms\\n Forget about maintenance\\n Make rooms too small\\n Ignore natural light needs\\n\\n**Popular Special Rooms:**\\n **Study Room:** Kids education, WFH (810 feet min)\\n **Pooja Room:** Religious activities (68 feet min)\\n **Store Room:** Storage needs (68 feet min)\\n **Servant Room:** Domestic help (810 feet)\\n **Home Theater:** Entertainment (1215 feet min)\\n **Gym:** Fitness (1012 feet min)\\n **Guest Room:** Visitors (1012 feet)\\n\\n**Priority Order:**\\n1. Study Room (essential for families with kids)\\n2. Store Room (everyone needs storage)\\n3. Pooja Room (cultural importance)\\n4. Guest Room (social needs)\\n\\n**Pro Tip:** Study room is most important - can double as office/guest room"},{"id":"kitchen_type_field_help","question_variants":["kitchen type field","kitchen style field","kitchen design field","kitchen layout field","kitchen type kya choose kare","kitchen field help","kitchen style help","kitchen design help","kitchen layout help","kitchen type best option","kitchen kya select kare","kitchen style kya dale","kitchen design kya choose kare","kitchen layout best"],"answer":"**Kitchen Type Field - Layout Selection:**\\n\\n** DO:**\\n Consider family cooking habits\\n Think about kitchen size available\\n Plan for appliances and storage\\n Consider who will cook\\n\\n** DON'T:**\\n Choose trendy over functional\\n Make kitchen too small\\n Ignore ventilation needs\\n Forget about dining connection\\n\\n**Kitchen Layout Options:**\\n **Straight/Linear:** Small spaces, budget-friendly\\n **L-Shaped:** Most popular, good corner utilization\\n **U-Shaped:** Maximum storage, larger families\\n **Island Kitchen:** Luxury, needs large space\\n **Parallel/Galley:** Efficient, medium spaces\\n\\n**Best Choices:**\\n **Small House (1-2BHK):** Straight or L-shaped\\n **Medium House (3BHK):** L-shaped or U-shaped\\n **Large House (4BHK+):** U-shaped or Island\\n\\n**Pro Tip:** L-shaped kitchen is most versatile - works in most house sizes and budgets"},{"id":"form_filling_tips","question_variants":["form filling tips","form tips","best practices form","form filling guide","form kaise bhare","form tips batao","form filling help","form guide","form filling best practices","form tips and tricks","form filling do dont","form bhar ke tips","form filling advice","form completion tips"],"answer":"**Form Filling - Pro Tips:**\\n\\n** ALWAYS DO:**\\n Fill all mandatory fields completely\\n Double-check measurements and numbers\\n Upload clear, well-lit photos\\n Be honest about budget constraints\\n Mention special requirements clearly\\n Save draft before submitting\\n\\n** NEVER DO:**\\n Leave required fields empty\\n Guess measurements or costs\\n Upload blurry or dark photos\\n Set unrealistic budgets\\n Hide important site conditions\\n Submit without reviewing\\n\\n**Photo Upload Tips:**\\n Take photos in good daylight\\n Show all 4 sides of plot\\n Include any existing structures\\n Show road access and surroundings\\n Max 5MB per photo, JPG/PNG format\\n\\n**Pro Tip:** Complete profile first, then create request - architects trust complete profiles more!"}]`);function jp(t){return t.toLowerCase().replace(/[^\w\s]/g," ").replace(/\s+/g," ").trim().replace(/\b(wat|wht|whats|wats)\b/g,"what").replace(/\b(kaise|kese|kse|kyse)\b/g,"how").replace(/\b(batao|bata|samjhao|btao|bataye)\b/g,"tell").replace(/\b(chahiye|chaiye|chaye|chahye|chayiye)\b/g,"need").replace(/\b(kitna|kitne|ktna|ktne)\b/g,"how much").replace(/\b(kya|kya hai|kya h|kya he)\b/g,"what").replace(/\b(help|halp|hlp|hepl)\b/g,"help").replace(/\b(dont no|dont know|not no|dont knw|dnt know)\b/g,"dont know").replace(/\b(bilding|bulding|buidling|buiding)\b/g,"building").replace(/\b(budjet|buget|budgt|bujget)\b/g,"budget").replace(/\b(bedrom|bed room|bedrm|bedrooms)\b/g,"bedroom").replace(/\b(bathrom|bath room|bathrm|washrom)\b/g,"bathroom").replace(/\b(kitchn|kichen|kithen)\b/g,"kitchen").replace(/\b(plz|pls|please)\b/g,"please").replace(/\b(u|ur|urs)\b/g,"you").replace(/\b(n|nd)\b/g,"and").replace(/\b(r|are)\b/g,"are").replace(/\b(2|to|too)\b/g,"to").replace(/\b(4|for|fr)\b/g,"for").replace(/\b(enthaanu|enthanu|enthu)\b/g,"what").replace(/\b(engane|engne|enganeyanu)\b/g,"how").replace(/\b(parayamo|parayam|parayan)\b/g,"tell").replace(/\b(venam|veno|venamoo)\b/g,"need").replace(/\b(ethrayanu|ethra|ethre)\b/g,"how much").replace(/\b(ariyilla|ariyila|ariyillallo)\b/g,"dont know").replace(/\b(tharo|tharumo|tharamo)\b/g,"give").replace(/\b(cheyyam|cheyyamo|cheyyaamo)\b/g,"do").replace(/\b(kittum|kittumoo|kittamo)\b/g,"get").replace(/\b(veedu|veed)\b/g,"house").replace(/\b(paniyan|paniyaan|pani)\b/g,"construction").replace(/\b(paisa|paisayanu|panam)\b/g,"money").replace(/\b(mazha|mazhakalam|mazhakaalam)\b/g,"rain").replace(/\b(kaalath|kaalam|samayam)\b/g,"time").replace(/\b(edukam|edukamo|edukkam)\b/g,"take").replace(/\b(select|choose|kaanam)\b/g,"select").replace(/\b(solve|theerkam|theerkkam)\b/g,"solve").replace(/\b(nadakum|nadakkum|sambhavikkum)\b/g,"happen")}function hu(t){const s=jp(t),a=[];return/\b(plot|land|site|area|size|dimension|measure)\b/.test(s)&&a.push("plot"),/\b(budget|cost|price|money|expense|paisa|rupee|lakh|crore)\b/.test(s)&&a.push("budget"),/\b(room|bedroom|bhk|hall|kitchen|bathroom|toilet)\b/.test(s)&&a.push("rooms"),/\b(floor|storey|story|level|ground|first)\b/.test(s)&&a.push("floors"),/\b(parking|garage|car|vehicle)\b/.test(s)&&a.push("parking"),/\b(material|cement|steel|brick|sand|construction)\b/.test(s)&&a.push("materials"),/\b(design|style|architecture|plan|layout)\b/.test(s)&&a.push("design"),/\b(vastu|direction|east|west|north|south)\b/.test(s)&&a.push("vastu"),/\b(dashboard|navigate|click|button|where|section|menu)\b/.test(s)&&a.push("navigation"),/\b(request|create|submit|form|new)\b/.test(s)&&a.push("request"),/\b(proposal|architect|quote|estimate)\b/.test(s)&&a.push("proposals"),/\b(message|chat|talk|contact|communication)\b/.test(s)&&a.push("messaging"),/\b(upload|document|photo|file|image)\b/.test(s)&&a.push("upload"),/\b(payment|pay|bill|invoice|transaction)\b/.test(s)&&a.push("payment"),/\b(how|kaise|method|way|process)\b/.test(s)&&a.push("how_to"),/\b(what|kya|meaning|definition|explain)\b/.test(s)&&a.push("what_is"),/\b(where|kaha|location|find|search)\b/.test(s)&&a.push("where_is"),/\b(help|assist|guide|support|madad)\b/.test(s)&&a.push("help"),a}function H6(t,s){const a=jp(t),r=jp(s);if(a===r)return 1;if(a.includes(r)||r.includes(a)){const b=a.length>r.length?a:r;return(a.length<=r.length?a:r).length/b.length*.95}const o=hu(a),l=hu(r),A=o.filter(b=>l.includes(b));if(A.length>0){const b=A.length/Math.max(o.length,l.length)*.8;if(b>.4)return b}const u=a.split(" ").filter(b=>b.length>2),h=r.split(" ").filter(b=>b.length>2),p=["plot","budget","room","bedroom","bathroom","kitchen","floor","parking","cost","price","size","area","design","material","dashboard","request","proposal","architect","upload","payment"];let m=0,v=0;if(u.forEach(b=>{const x=p.includes(b)?2:1;v+=x,h.includes(b)?m+=x:h.find(Q=>Q.includes(b)||b.includes(Q))&&(m+=x*.7)}),v>0){const b=m/v*.7;if(b>.3)return b}return P6(a,r)*.6}function P6(t,s){if(t.length===0)return s.length===0?1:0;if(s.length===0)return 0;const a=Array(t.length+1).fill().map(()=>Array(s.length+1).fill(0));for(let l=0;l<=t.length;l++)a[l][0]=l;for(let l=0;l<=s.length;l++)a[0][l]=l;for(let l=1;l<=t.length;l++)for(let A=1;A<=s.length;A++){const u=t[l-1]===s[A-1]?0:1;a[l][A]=Math.min(a[l-1][A]+1,a[l][A-1]+1,a[l-1][A-1]+u)}const r=a[t.length][s.length],o=Math.max(t.length,s.length);return o===0?1:Math.max(0,(o-r)/o)}function O6(t,s,a){if(t.length===0)return null;if(t.sort((o,l)=>l.confidence-o.confidence),t[0].confidence>.8)return t[0];s.askedAbout;const r=hu(a);for(const o of t){const l=hu(o.entry.answer);if(r.filter(u=>l.some(h=>h.includes(u)||u.includes(h))).length>0&&o.confidence>.5)return o}return t[0]}function M6(t,s={}){const a=jp(t);if(a.length<2)return{reply:"I didn't catch that. Could you ask me something specific about construction? For example: 'plot size help', 'budget planning', 'room requirements', or 'dashboard navigation'.",askFeedback:!1,topicId:"unclear"};if(/\b(hi|hello|hey|namaste|helo|hii|good morning|good afternoon|good evening)\b/.test(a)){const A=["Hello!  I'm your BuildHub construction assistant. I can help with plot planning, budget estimation, room layouts, and using our platform. What would you like to know?","Hi there!  Ready to build your dream home? I can guide you through plot size, budget planning, room requirements, or help you navigate the dashboard. What interests you?","Hey! Welcome to BuildHub!  I'm here to make your construction journey smooth. Ask me about anything - from technical details to using our platform!","Namaste!  I'm your construction planning assistant. Whether you need help with measurements, costs, designs, or using our website, I'm here to help!"];return{reply:A[Math.floor(Math.random()*A.length)],askFeedback:!1,topicId:"greeting"}}if(/\b(thank|thanks|thx|dhanyawad|shukriya|appreciate)\b/.test(a)){const A=["You're very welcome!  Happy to help with your construction project. Any other questions?","My pleasure!  Building a home is exciting - I'm here whenever you need guidance!","Glad I could help!  Feel free to ask more about construction planning or using our platform.","You're welcome!  I love helping people build their dream homes. What else can I assist with?"];return{reply:A[Math.floor(Math.random()*A.length)],askFeedback:!1,topicId:"thanks"}}const r=[];I6.forEach(A=>{let u=0;A.question_variants.forEach(h=>{const p=H6(a,h);p>u&&(u=p)}),u>.3&&r.push({entry:A,confidence:u})});const o=O6(r,s,t);if(o&&o.confidence>.4)return{reply:o.entry.answer,askFeedback:!0,topicId:o.entry.id,confidence:o.confidence};const l=hu(a);return l.includes("help")?{reply:`I'm here to help!  I can assist with:

 **Construction Planning:**
 Plot size and measurements
 Budget estimation and costs
 Room planning (bedrooms, bathrooms, kitchen)
 House designs and styles
 Materials and construction process

 **Platform Navigation:**
 Creating and managing requests
 Viewing architect proposals
 Dashboard navigation
 Document uploads
 Messaging architects

What specific help do you need?`,askFeedback:!0,topicId:"help_comprehensive"}:l.includes("navigation")||l.includes("dashboard")?{reply:`I can help you navigate the BuildHub platform! 

**Quick Navigation Guide:**
 **Create Request** - Big blue button on dashboard
 **My Requests** - See all your submitted requests
 **Proposals** - View architect quotes and designs
 **Messages** - Chat with architects
 **Profile** - Update your details

What specific section do you need help finding?`,askFeedback:!0,topicId:"navigation_help"}:l.includes("budget")||l.includes("cost")?{reply:`I can help with budget planning! 

Construction costs typically range 1,500-3,000 per sqft depending on:
 Location and local rates
 Quality of materials
 Design complexity
 Number of floors

For accurate estimates, submit your request and architects will provide detailed quotes. What specific budget question do you have?`,askFeedback:!0,topicId:"budget_general"}:{reply:`I want to help you, but I'm not sure what you're asking about. 

**Try asking me about:**
 "How to measure plot size"
 "Construction budget help"
 "Room planning guide"
 "Dashboard navigation"
 "Create new request"
 "Upload documents"

Or just tell me what you're trying to do - I'll do my best to help! `,askFeedback:!0,topicId:"clarification_needed"}}const Rb="request_assistant_consent",Db={from:"bot",text:"Hi there!  I'm your intelligent BuildHub assistant! I can help you with construction planning, using our platform, and connecting with architects. I learn from our conversation to give you better answers. Just ask me anything! ",askFeedback:!1,suggestions:["Hi!","How to create request?","Budget help","Dashboard navigation"]};function z6({userId:t,pageContext:s="request"}){const[a,r]=N.useState(!1),[o,l]=N.useState(""),[A,u]=N.useState([Db]),[h,p]=N.useState(!1),[m,v]=N.useState(null),[b,x]=N.useState({askedAbout:[],preferences:{},sessionQuestions:0,conversationHistory:[],lastTopics:[],userIntents:[]}),C=N.useRef(null),Q=N.useMemo(()=>`chat-${Date.now()}-${Math.random().toString(36).slice(2,8)}`,[]);N.useEffect(()=>{localStorage.getItem(Rb)!=="yes"&&localStorage.setItem(Rb,"yes")},[]),N.useEffect(()=>{C.current&&C.current.scrollIntoView({behavior:"smooth",block:"end"})},[A]);async function j({message:q,response:E,feedback:U=null,confidence:V=null}){try{await fetch("/buildhub/backend/api/chatbot/log_interaction.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:t||null,conversation_id:Q,question:q,response:E,feedback:U,confidence:V,context:b,intent:null,response_time:null})})}catch{}}function B(q,E,U){const V=[],{askedAbout:H,sessionQuestions:I,lastTopics:M}=E,re={plot_size_basic:["Convert feet to meters","Irregular plot help","Plot area calculation"],budget_help:["Per sqft cost","Material cost breakdown","Budget planning tips"],rooms_bedrooms:["Bathroom planning","Kitchen design","Storage planning"],dashboard_main_navigation:["Create new request","View proposals","Message architects"],create_request_button:["Fill request form","Upload documents","Submit request"],my_requests_section:["Check proposal status","View architect quotes","Edit request"],view_proposals_help:["Compare architects","Select proposal","Message architect"],upload_documents_help:["Photo requirements","Document types","File size limits"]};return q&&re[q]&&V.push(...re[q].slice(0,2)),M.includes("plot_size_basic")&&!M.includes("budget_help")&&V.push("Budget planning help"),M.includes("budget_help")&&!M.includes("rooms_bedrooms")&&V.push("Room requirements"),M.includes("rooms_bedrooms")&&!M.includes("dashboard_main_navigation")&&V.push("How to create request"),[{id:"plot_size_basic",text:"Plot size help",priority:1},{id:"budget_help",text:"Budget guidance",priority:1},{id:"dashboard_main_navigation",text:"Dashboard help",priority:2},{id:"create_request_button",text:"Create request",priority:2},{id:"rooms_bedrooms",text:"Room planning",priority:1},{id:"upload_documents_help",text:"Upload photos",priority:3}].filter(Z=>!H.includes(Z.id)).sort((Z,fe)=>Z.priority-fe.priority).slice(0,3-V.length).forEach(Z=>V.push(Z.text)),I>4&&!V.includes("Talk to architect")&&V.push("Talk to architect"),V.slice(0,3)}function L(q,E,U){x(V=>{const H=[...V.lastTopics,q].slice(-5),I=[...V.conversationHistory,{input:E,topic:q,confidence:U,timestamp:Date.now()}].slice(-10);return{...V,askedAbout:[...new Set([...V.askedAbout,q])],sessionQuestions:V.sessionQuestions+1,lastTopics:H,conversationHistory:I,preferences:{...V.preferences,lastTopic:q,lastInput:E,averageConfidence:I.reduce((M,re)=>M+(re.confidence||0),0)/I.length}}})}function P(q){const E=(q||o).trim();if(!E)return;const U=M6(E,b),V=B(U.topicId,b);U.topicId&&L(U.topicId,E,U.confidence||0);const H={from:"bot",text:U.reply,ts:Date.now(),meta:U,suggestions:V,askFeedback:!0,confidence:U.confidence};u(I=>[...I,{from:"user",text:E,ts:Date.now()},H]),v(U.normalized||null),l(""),j({message:E,response:U.reply,confidence:U.confidence})}function F(){u([Db]),v(null),x({askedAbout:[],preferences:{},sessionQuestions:0,conversationHistory:[],lastTopics:[],userIntents:[]})}function ee(q,E){const U=A[q];j({message:`feedback:${E}:${U?.text}`,response:"feedback",feedback:E,confidence:U?.confidence}),u(V=>V.map((I,M)=>M===q?{...I,feedback:E}:I)),E==="down"?setTimeout(()=>{const V=U?.confidence&&U.confidence<.6?"I wasn't very confident about that answer. Let me try to help better! Could you rephrase your question or be more specific about what you need?":"Sorry that didn't help! Would you like me to explain differently, or would you prefer to connect with an architect for personalized advice?";u(H=>[...H,{from:"bot",text:V,ts:Date.now(),suggestions:["Explain differently","Talk to architect","Try new question"],askFeedback:!1}])},1e3):E==="up"&&setTimeout(()=>{const V=["Great! I'm learning to help you better. What else would you like to know?","Awesome! I'm glad that was helpful. Any other questions about your construction project?","Perfect! I love helping with construction planning. What's next on your mind?"];u(H=>[...H,{from:"bot",text:V[Math.floor(Math.random()*V.length)],ts:Date.now(),suggestions:B(U?.meta?.topicId,b),askFeedback:!1}])},1500)}async function K(){if(!m)return;let q="";const{type:E,normalized:U}=m;if(E==="budget"&&(q=U.display||U.amount?.toString()),E==="plot"&&(U.width&&U.depth?q=`${U.width} x ${U.depth} ${U.unit}`:U.area&&(q=`${U.area} ${U.unit}`)),E==="rooms"&&(q=`${U.bhk} BHK`),E==="floors"&&(q=`${U.floors} floors`),!!q)try{await navigator.clipboard.writeText(q),u(V=>[...V,{from:"bot",text:"Copied! Paste it into the request form.",ts:Date.now()}])}catch{u(H=>[...H,{from:"bot",text:"Copy failed. You can manually paste.",ts:Date.now()}])}}return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"ra-floating-button",onClick:()=>r(!a),title:"Intelligent Assistant",children:""}),a&&e.jsxs("div",{className:"ra-panel",children:[e.jsxs("header",{className:"ra-header",children:[e.jsxs("div",{children:[e.jsx("div",{className:"ra-title",children:"Intelligent Assistant"}),e.jsx("div",{className:"ra-subtitle",children:"Smart answers that learn from our conversation"})]}),e.jsxs("div",{className:"ra-actions",children:[e.jsx("button",{className:"ra-clear",onClick:F,children:"Clear"}),e.jsx("button",{className:"ra-close",onClick:()=>r(!1),children:""})]})]}),e.jsxs("div",{className:"ra-search",children:[e.jsx("input",{value:o,onChange:q=>l(q.target.value),placeholder:"Ask anything about construction or our platform...",onKeyDown:q=>{q.key==="Enter"&&P()}}),e.jsx("button",{onClick:()=>P(),children:"Ask"})]}),e.jsxs("div",{className:"ra-messages",children:[A.map((q,E)=>e.jsxs("div",{className:`ra-message ${q.from}`,children:[e.jsx("div",{className:"ra-text",children:q.text}),q.from==="bot"&&q.confidence&&e.jsx("div",{className:"ra-confidence",title:`Confidence: ${Math.round(q.confidence*100)}%`,children:q.confidence>.8?"":q.confidence>.6?"":""}),q.from==="bot"&&q.meta?.quickOptions&&e.jsx("div",{className:"ra-quick-options",children:q.meta.quickOptions.map(U=>e.jsx("button",{onClick:()=>P(U),children:U},U))}),q.from==="bot"&&q.meta?.clarifier&&e.jsxs("div",{className:"ra-quick-options",children:[q.meta.options?.map(U=>e.jsx("button",{onClick:()=>P(U.label),children:U.label},U.label)),q.meta.escalation&&e.jsx("button",{onClick:()=>p(!0),children:"Connect to architect"})]}),q.from==="bot"&&q.meta?.normalized&&e.jsxs("div",{className:"ra-quick-options",children:[e.jsx("button",{onClick:K,children:"Copy to form"}),q.meta.normalized.type==="plot"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>P("convert to meters"),children:"Convert"}),e.jsx("button",{onClick:()=>P("keep feet"),children:"Keep ft"})]}),q.meta.normalized.type==="budget"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>P("total budget"),children:"Total"}),e.jsx("button",{onClick:()=>P("per sqft"),children:"Per sqft"})]})]}),q.from==="bot"&&q.suggestions&&q.suggestions.length>0&&e.jsxs("div",{className:"ra-suggestions",children:[e.jsx("div",{className:"ra-suggestions-label",children:"You might also ask:"}),e.jsx("div",{className:"ra-quick-options",children:q.suggestions.map((U,V)=>e.jsx("button",{onClick:()=>P(U),children:U},V))})]}),q.from==="bot"&&q.askFeedback&&e.jsxs("div",{className:"ra-feedback",children:[e.jsx("span",{children:"Was this helpful?"}),e.jsx("button",{className:q.feedback==="up"?"active":"",onClick:()=>ee(E,"up"),title:"This was helpful",children:""}),e.jsx("button",{className:q.feedback==="down"?"active":"",onClick:()=>ee(E,"down"),title:"This wasn't helpful",children:""})]})]},E)),e.jsx("div",{ref:C})]})]}),h&&e.jsx("div",{className:"ra-modal-backdrop",onClick:()=>p(!1),children:e.jsxs("div",{className:"ra-modal",onClick:q=>q.stopPropagation(),children:[e.jsx("div",{className:"ra-modal-title",children:"Connect to an architect?"}),e.jsx("p",{children:"Share your contact and we'll arrange a personalized consultation. Or keep chatting with me - I'm getting smarter!"}),e.jsxs("div",{className:"ra-modal-actions",children:[e.jsx("button",{onClick:()=>p(!1),children:"Keep chatting"}),e.jsx("button",{className:"primary",onClick:()=>p(!1),children:"Yes, connect me"})]})]})})]})}function q6(t){return zo().pathname!=="/homeowner-dashboard"?null:e.jsx(z6,{...t})}function K6(){const[t,s]=N.useState({request_id:"",homeowner_id:"",design_title:"",description:"",preview_image:null,layout_file:null,extra_files:[]}),[a,r]=N.useState(!1),[o,l]=N.useState([]),[A,u]=N.useState(null);N.useEffect(()=>{try{const b=sessionStorage.getItem("user");u(b?JSON.parse(b):null)}catch{}},[]);function h(b){const{name:x,value:C}=b.target;s(Q=>({...Q,[x]:C}))}function p(b,x){s(C=>({...C,[b]:x?.[0]||null}))}function m(b){s(x=>({...x,extra_files:Array.from(b||[])}))}async function v(b){if(b.preventDefault(),!t.design_title){toast.error("Please provide a Design Title");return}if(!t.preview_image||!t.layout_file){toast.error("Please attach both a Preview Image and a Layout File");return}r(!0);try{const x=new FormData;t.request_id&&x.append("request_id",t.request_id),t.homeowner_id&&x.append("homeowner_id",t.homeowner_id),x.append("design_title",t.design_title),t.description&&x.append("description",t.description),t.preview_image&&x.append("preview_image",t.preview_image),t.layout_file&&x.append("layout_file",t.layout_file);for(const j of t.extra_files)x.append("design_files[]",j);const Q=await(await fetch("/buildhub/backend/api/architect/upload_design.php",{method:"POST",body:x})).json().catch(()=>({}));Q?.success?(toast.success("Design uploaded successfully"),window.history.back()):toast.error(Q?.message||"Upload failed")}catch{toast.error("Network error while uploading")}finally{r(!1)}}return e.jsxs("div",{className:"form-page",children:[e.jsxs("header",{className:"form-header",children:[e.jsx("h1",{children:"Upload Design"}),e.jsx("p",{children:"Submit your architectural design for a client request"})]}),e.jsxs("form",{id:"design-upload-form",className:"form-body",onSubmit:v,children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"label-lg",children:"Send To"}),e.jsxs("div",{className:"inline-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"label-sm",children:"By Request (optional)"}),e.jsxs("select",{name:"request_id",value:t.request_id,onChange:h,children:[e.jsx("option",{value:"",children:"Choose a client request"}),o.map(b=>e.jsx("option",{value:b.id,children:b.title||`Request #${b.id}`},b.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label-sm",children:"Direct Homeowner ID (optional)"}),e.jsx("input",{type:"number",name:"homeowner_id",placeholder:"e.g., 123",value:t.homeowner_id,onChange:h})]})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Design Title *"}),e.jsx("input",{type:"text",name:"design_title",placeholder:"e.g., Modern 3BHK Villa Design",value:t.design_title,onChange:h,required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Description"}),e.jsx("textarea",{name:"description",rows:5,placeholder:"Describe your design features, materials, and special considerations...",value:t.description,onChange:h})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"label-lg",children:"Design Files"}),e.jsxs("div",{className:"inline-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"label-sm",children:"Preview Image"}),e.jsx("input",{type:"file",accept:"image/*",onChange:b=>p("preview_image",b.target.files)}),t.preview_image&&e.jsxs("p",{className:"form-help",children:["Selected: ",t.preview_image.name]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label-sm",children:"Layout File (image/PDF/CAD)"}),e.jsx("input",{type:"file",onChange:b=>p("layout_file",b.target.files)}),t.layout_file&&e.jsxs("p",{className:"form-help",children:["Selected: ",t.layout_file.name]})]})]}),e.jsxs("div",{style:{marginTop:12},children:[e.jsx("label",{className:"label-sm",children:"Additional Files (optional)"}),e.jsx("input",{type:"file",multiple:!0,onChange:b=>m(b.target.files)}),!!t.extra_files.length&&e.jsxs("p",{className:"form-help",children:[t.extra_files.length," file(s) selected"]})]})]})]}),e.jsxs("footer",{className:"form-actions",children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>window.history.back(),children:"Cancel"}),e.jsx("button",{type:"submit",form:"design-upload-form",className:"btn btn-primary",disabled:a,children:a?"Uploading":"Upload Design"})]})]})}const G6=({isLoading:t})=>t?e.jsx("div",{className:"page-loader-overlay",children:e.jsxs("div",{className:"page-loader-container",children:[e.jsxs("div",{className:"page-loader-spinner",children:[e.jsx("div",{className:"spinner-ring"}),e.jsx("div",{className:"spinner-ring"}),e.jsx("div",{className:"spinner-ring"})]}),e.jsxs("div",{className:"page-loader-text",children:[e.jsx("h3",{children:"Loading..."}),e.jsx("p",{children:"Please wait while we prepare your dashboard"})]})]})}):null,V6=({children:t})=>{const[s,a]=N.useState(!1),[r,o]=N.useState(null),l=Wr(),A=zo();N.useEffect(()=>{a(!0),r&&clearTimeout(r);const h=setTimeout(()=>{a(!1)},1200);return o(h),()=>{h&&clearTimeout(h)}},[A.pathname]);const u=h=>{a(!0);const p=setTimeout(()=>{l(h),a(!1)},300);o(p)};return e.jsxs(e.Fragment,{children:[e.jsx(G6,{isLoading:s}),Ar.cloneElement(t,{navigateWithLoading:u})]})};function $6(){const t=Wr(),s=Ni();N.useEffect(()=>{const b=document.querySelector(".hero h1"),x=document.querySelector(".hero p"),C=document.querySelector(".btn-group");setTimeout(()=>b.style.opacity="1",100),setTimeout(()=>x.style.opacity="1",600),setTimeout(()=>C.style.opacity="1",1100);const Q=()=>{const q=window.pageYOffset,E=document.body.scrollHeight-window.innerHeight,U=q/E*100,V=document.querySelector(".scroll-progress");V&&(V.style.width=U+"%")},j={threshold:.1,rootMargin:"0px 0px -50px 0px"},B=new IntersectionObserver(q=>{q.forEach(E=>{E.isIntersecting&&E.target.classList.add("visible")})},j);document.querySelectorAll(".features, .contact, .feature-card, .projects-gallery, .services-showcase, .team-section, .gallery-item, .service-item, .team-member").forEach(q=>{B.observe(q)});const P=document.createElement("div");P.className="scroll-progress",document.body.appendChild(P);const F=document.createElement("button");F.className="scroll-to-top",F.innerHTML="",F.setAttribute("aria-label","Scroll to top"),document.body.appendChild(F);const ee=()=>{window.pageYOffset>300?(F.style.opacity="1",F.style.visibility="visible"):(F.style.opacity="0",F.style.visibility="hidden")},K=()=>{const q=document.querySelector(".hero-header");q&&(window.pageYOffset>50?q.classList.add("scrolled"):q.classList.remove("scrolled"))};return F.addEventListener("click",()=>{window.scrollTo({top:0,behavior:"smooth"})}),window.addEventListener("scroll",()=>{Q(),ee(),K(),r()}),()=>{window.removeEventListener("scroll",Q),B.disconnect();const q=document.querySelector(".scroll-progress"),E=document.querySelector(".scroll-to-top");q&&q.remove(),E&&E.remove()}},[]);const a=b=>{document.getElementById(b)?.scrollIntoView({behavior:"smooth"}),p(b)},r=()=>{const b=["home","features","services","projects","team","contact"],x=window.scrollY+150;for(let C=b.length-1;C>=0;C--){const Q=document.getElementById(b[C]);if(Q&&Q.offsetTop<=x){p(b[C]);break}}},o=b=>x=>{const C=x.currentTarget,Q=document.createElement("span"),j=C.getBoundingClientRect(),B=Math.max(j.width,j.height),L=x.clientX-j.left-B/2,P=x.clientY-j.top-B/2;Q.style.cssText=`
        position: absolute;
        width: ${B}px;
        height: ${B}px;
        left: ${L}px;
        top: ${P}px;
        background: rgba(255, 255, 255, 0.3);
        border-radius: 50%;
        transform: scale(0);
        animation: ripple 0.6s linear;
        pointer-events: none;
        z-index: 1;
      `,C.style.position="relative",C.style.overflow="hidden",C.appendChild(Q),setTimeout(()=>{Q.remove()},600),b&&b()};function l({end:b,label:x}){const[C,Q]=N.useState(0);return N.useEffect(()=>{let j=null;const B=2e3;function L(P){j||(j=P);const F=P-j,ee=Math.min(Math.floor(F/B*b),b);Q(ee),F<B&&requestAnimationFrame(L)}requestAnimationFrame(L)},[b]),e.jsxs("div",{className:"counter","aria-label":`${x} counter`,children:[C,"+",e.jsx("div",{style:{fontWeight:600,fontSize:"1rem",marginTop:"0.3rem"},children:x})]})}const[A,u]=N.useState(null),[h,p]=N.useState("home"),m=[{question:"How does BuildHub simplify construction planning?",answer:"BuildHub provides AI-powered tools and smart suggestions to make your project planning fast and effective."},{question:"Can I get accurate cost estimation?",answer:"Yes! Our platform offers detailed and transparent cost breakdowns to help you manage your budget."},{question:"Do you provide design assistance?",answer:"Absolutely. Get professional layouts and designs created by top architects tailored to your project."}],v=b=>{u(A===b?null:b)};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"side-panel",children:[e.jsx("div",{className:"panel-toggle",children:e.jsx("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M3 12h18m-9-9l9 9-9 9",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),e.jsxs("div",{className:"panel-content",children:[e.jsxs("div",{className:"panel-section",children:[e.jsx("h4",{children:"Quick Actions"}),e.jsxs("div",{className:"action-icons",children:[e.jsx("div",{className:"action-item",onClick:()=>a("home"),title:"Home",children:e.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M3 9l9-7 9 7v11a2 2 0 01-2 2H5a2 2 0 01-2-2z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("polyline",{points:"9,22 9,12 15,12 15,22",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})}),e.jsx("div",{className:"action-item",onClick:()=>a("services"),title:"Services",children:e.jsx("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),e.jsx("div",{className:"action-item",onClick:()=>a("projects"),title:"Projects",children:e.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2H5a2 2 0 00-2-2z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M8 21v-4a2 2 0 012-2h4a2 2 0 012 2v4",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})}),e.jsx("div",{className:"action-item",onClick:()=>a("team"),title:"Team",children:e.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M17 21v-2a4 4 0 00-4-4H5a4 4 0 00-4 4v2",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("circle",{cx:"9",cy:"7",r:"4",stroke:"currentColor",strokeWidth:"2"}),e.jsx("path",{d:"M23 21v-2a4 4 0 00-3-3.87m-4-12a4 4 0 010 7.75",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})}),e.jsx("div",{className:"action-item",onClick:()=>a("contact"),title:"Contact",children:e.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("polyline",{points:"22,6 12,13 2,6",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})})]})]}),e.jsxs("div",{className:"panel-section",children:[e.jsx("h4",{children:"Tools"}),e.jsxs("div",{className:"action-icons",children:[e.jsx("div",{className:"action-item",onClick:()=>s.info("Calculator coming soon!"),title:"Calculator",children:e.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("rect",{x:"4",y:"2",width:"16",height:"20",rx:"2",stroke:"currentColor",strokeWidth:"2"}),e.jsx("path",{d:"M8 6h8M8 10h8M8 14h4M8 18h4",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})}),e.jsx("div",{className:"action-item",onClick:()=>s.info("Estimator coming soon!"),title:"Cost Estimator",children:e.jsx("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M12 2v20M17 5H9.5a3.5 3.5 0 000 7h5a3.5 3.5 0 010 7H6",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),e.jsx("div",{className:"action-item",onClick:()=>s.info("Designer coming soon!"),title:"Design Tool",children:e.jsx("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),e.jsx("div",{className:"action-item",onClick:()=>s.info("Planner coming soon!"),title:"Project Planner",children:e.jsx("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})]})]}),e.jsxs("div",{className:"panel-section",children:[e.jsx("h4",{children:"Social"}),e.jsxs("div",{className:"action-icons",children:[e.jsx("div",{className:"action-item",onClick:()=>s.info("LinkedIn coming soon!"),title:"LinkedIn",children:e.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M16 8a6 6 0 016 6v7h-4v-7a2 2 0 00-2-2 2 2 0 00-2 2v7h-4v-7a6 6 0 016-6zM2 9h4v12H2z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("circle",{cx:"4",cy:"4",r:"2",stroke:"currentColor",strokeWidth:"2"})]})}),e.jsx("div",{className:"action-item",onClick:()=>s.info("Twitter coming soon!"),title:"Twitter",children:e.jsx("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M23 3a10.9 10.9 0 01-3.14 1.53 4.48 4.48 0 00-7.86 3v1A10.66 10.66 0 013 4s-4 9 5 13a11.64 11.64 0 01-7 2c9 5 20 0 20-11.5a4.5 4.5 0 00-.08-.83A7.72 7.72 0 0023 3z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),e.jsx("div",{className:"action-item",onClick:()=>s.info("Facebook coming soon!"),title:"Facebook",children:e.jsx("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M18 2h-3a5 5 0 00-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 011-1h3z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})]})]})]})]}),e.jsxs("header",{className:"hero-header",children:[e.jsxs("div",{className:"hero-logo",children:[e.jsx("div",{className:"logo-icon",children:e.jsx("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M3 21h18l-1-7H4l-1 7zM5 14h14l1-7H4l1 7zM9 3h6v4H9V3zM7 7h10v2H7V7z",fill:"currentColor"})})}),e.jsx("span",{className:"logo-text",children:"BuildHub"})]}),e.jsxs("nav",{className:"hero-nav",children:[e.jsx("a",{href:"#home",onClick:b=>{b.preventDefault(),a("home")},className:`nav-link ${h==="home"?"active":""}`,children:"Home"}),e.jsx("a",{href:"/login",onClick:b=>{b.preventDefault(),t("/login")},className:"nav-link login-link",children:"Login"}),e.jsx("a",{href:"#features",onClick:b=>{b.preventDefault(),a("features")},className:`nav-link ${h==="features"?"active":""}`,children:"About"}),e.jsx("a",{href:"#services",onClick:b=>{b.preventDefault(),a("services")},className:`nav-link ${h==="services"?"active":""}`,children:"Services"}),e.jsx("a",{href:"#projects",onClick:b=>{b.preventDefault(),a("projects")},className:`nav-link ${h==="projects"?"active":""}`,children:"Work"}),e.jsx("a",{href:"#team",onClick:b=>{b.preventDefault(),a("team")},className:`nav-link ${h==="team"?"active":""}`,children:"Team"}),e.jsx("a",{href:"#contact",onClick:b=>{b.preventDefault(),a("contact")},className:`nav-link ${h==="contact"?"active":""}`,children:"Contact"}),e.jsx("div",{className:"contact-info",children:e.jsx("span",{className:"phone-number",children:"7558-8956-67"})})]})]}),e.jsxs("section",{className:"hero",id:"home",role:"banner",children:[e.jsx("h1",{children:"BuildHub  Smart Construction Platform"}),e.jsx("p",{children:"Plan, estimate, and design your construction projects with ease."}),e.jsxs("div",{className:"btn-group",children:[e.jsx("button",{className:"primary",onClick:o(()=>t("/register")),children:"Get Started"}),e.jsx("button",{className:"secondary",onClick:o(()=>s.info("Learn more coming soon!")),children:"Learn More"})]})]}),e.jsxs("section",{className:"features",id:"features",role:"region","aria-label":"Features Section",children:[e.jsx("h2",{children:"Features"}),e.jsxs("div",{className:"features-grid",children:[e.jsxs("div",{className:"feature-card glass-card",children:[e.jsx("div",{className:"interactive-icon planning",children:e.jsx("div",{className:"icon-bg",children:e.jsx("svg",{className:"icon-svg",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M3 21h18l-1-7H4l-1 7zM5 14h14l1-7H4l1 7zM9 3h6v4H9V3zM7 7h10v2H7V7z",fill:"currentColor"})})})}),e.jsx("h3",{children:"Smart Planning"}),e.jsx("p",{children:"Plan your construction projects with advanced tools and AI-powered suggestions."})]}),e.jsxs("div",{className:"feature-card glass-card",children:[e.jsx("div",{className:"interactive-icon cost",children:e.jsx("div",{className:"icon-bg",children:e.jsx("svg",{className:"icon-svg",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z",fill:"currentColor"})})})}),e.jsx("h3",{children:"Cost Estimation"}),e.jsx("p",{children:"Accurate and transparent project cost breakdown to fit your budget."})]}),e.jsxs("div",{className:"feature-card glass-card",children:[e.jsx("div",{className:"interactive-icon design",children:e.jsx("div",{className:"icon-bg",children:e.jsx("svg",{className:"icon-svg",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z",fill:"currentColor"})})})}),e.jsx("h3",{children:"Design Assistance"}),e.jsx("p",{children:"Get professional layouts and designs from top architects in the industry."})]})]}),e.jsxs("div",{className:"counters","aria-live":"polite","aria-atomic":"true",children:[e.jsx(l,{end:150,label:"Projects Completed"}),e.jsx(l,{end:75,label:"Trusted Contractors"}),e.jsx(l,{end:20,label:"Award-Winning Designs"})]}),e.jsx("div",{className:"accordion","aria-label":"Frequently Asked Questions",children:m.map(({question:b,answer:x},C)=>e.jsxs("div",{className:"accordion-item",children:[e.jsx("div",{className:`accordion-header ${A===C?"active":""}`,onClick:()=>v(C),onKeyDown:Q=>{(Q.key==="Enter"||Q.key===" ")&&v(C)},role:"button",tabIndex:0,"aria-expanded":A===C,"aria-controls":`faq${C}-content`,id:`faq${C}-header`,children:b}),e.jsx("div",{id:`faq${C}-content`,className:`accordion-content ${A===C?"active":""}`,role:"region","aria-labelledby":`faq${C}-header`,children:e.jsx("p",{children:x})})]},C))})]}),e.jsxs("section",{className:"projects-gallery",id:"projects",role:"region","aria-label":"Projects Gallery",children:[e.jsx("h2",{children:"Our Construction Projects"}),e.jsxs("div",{className:"gallery-grid",children:[e.jsx("div",{className:"gallery-item",children:e.jsx("div",{className:"image-container",children:e.jsxs("div",{className:"project-image residential",style:{backgroundImage:"url('./images/projects/residential-1.jpg')"},children:[e.jsxs("div",{className:"image-overlay",children:[e.jsx("h3",{children:"Residential Projects"}),e.jsx("p",{children:"Modern homes with sustainable design"}),e.jsxs("div",{className:"project-stats",children:[e.jsx("span",{children:" 50+ Homes Built"}),e.jsx("span",{children:" 4.9/5 Rating"})]})]}),e.jsxs("div",{className:"image-fallback",children:[e.jsx("div",{className:"fallback-icon",children:""}),e.jsx("div",{className:"fallback-text",children:"Residential Construction"})]})]})})}),e.jsx("div",{className:"gallery-item",children:e.jsx("div",{className:"image-container",children:e.jsxs("div",{className:"project-image commercial",style:{backgroundImage:"url('./images/projects/commercial-1.jpg')"},children:[e.jsxs("div",{className:"image-overlay",children:[e.jsx("h3",{children:"Commercial Buildings"}),e.jsx("p",{children:"Office spaces and retail complexes"}),e.jsxs("div",{className:"project-stats",children:[e.jsx("span",{children:" 25+ Buildings"}),e.jsx("span",{children:" 4.8/5 Rating"})]})]}),e.jsxs("div",{className:"image-fallback",children:[e.jsx("div",{className:"fallback-icon",children:""}),e.jsx("div",{className:"fallback-text",children:"Commercial Construction"})]})]})})}),e.jsx("div",{className:"gallery-item",children:e.jsx("div",{className:"image-container",children:e.jsxs("div",{className:"project-image industrial",style:{backgroundImage:"url('./images/projects/industrial-1.jpg')"},children:[e.jsxs("div",{className:"image-overlay",children:[e.jsx("h3",{children:"Industrial Facilities"}),e.jsx("p",{children:"Manufacturing and warehouse projects"}),e.jsxs("div",{className:"project-stats",children:[e.jsx("span",{children:" 15+ Facilities"}),e.jsx("span",{children:" 4.9/5 Rating"})]})]}),e.jsxs("div",{className:"image-fallback",children:[e.jsx("div",{className:"fallback-icon",children:""}),e.jsx("div",{className:"fallback-text",children:"Industrial Construction"})]})]})})}),e.jsx("div",{className:"gallery-item",children:e.jsx("div",{className:"image-container",children:e.jsxs("div",{className:"project-image renovation",style:{backgroundImage:"url('./images/projects/renovation-1.jpg')"},children:[e.jsxs("div",{className:"image-overlay",children:[e.jsx("h3",{children:"Renovation Projects"}),e.jsx("p",{children:"Transforming existing structures"}),e.jsxs("div",{className:"project-stats",children:[e.jsx("span",{children:" 30+ Renovations"}),e.jsx("span",{children:" 4.7/5 Rating"})]})]}),e.jsxs("div",{className:"image-fallback",children:[e.jsx("div",{className:"fallback-icon",children:""}),e.jsx("div",{className:"fallback-text",children:"Renovation Projects"})]})]})})})]})]}),e.jsxs("section",{className:"services-showcase",id:"services",role:"region","aria-label":"Services Showcase",children:[e.jsx("h2",{children:"Our Services"}),e.jsxs("div",{className:"services-grid",children:[e.jsxs("div",{className:"service-item",children:[e.jsx("div",{className:"service-image-container",children:e.jsxs("div",{className:"service-image planning",style:{backgroundImage:"url('./images/services/project-planning.jpg')"},children:[e.jsx("div",{className:"image-fallback",children:e.jsx("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),e.jsxs("div",{className:"service-overlay",children:[e.jsx("h3",{children:"Project Planning"}),e.jsx("p",{children:"Comprehensive project management"})]})]})}),e.jsxs("div",{className:"service-content",children:[e.jsx("h3",{children:"Smart Project Planning"}),e.jsx("p",{children:"Advanced project management tools with AI-powered scheduling and resource optimization."})]})]}),e.jsxs("div",{className:"service-item",children:[e.jsx("div",{className:"service-image-container",children:e.jsxs("div",{className:"service-image design",style:{backgroundImage:"url('./images/services/architectural-design.jpg')"},children:[e.jsx("div",{className:"image-fallback",children:e.jsx("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),e.jsxs("div",{className:"service-overlay",children:[e.jsx("h3",{children:"Architectural Design"}),e.jsx("p",{children:"Professional design services"})]})]})}),e.jsxs("div",{className:"service-content",children:[e.jsx("h3",{children:"Architectural Excellence"}),e.jsx("p",{children:"Innovative designs from certified architects with modern construction techniques."})]})]}),e.jsxs("div",{className:"service-item",children:[e.jsx("div",{className:"service-image-container",children:e.jsxs("div",{className:"service-image construction",style:{backgroundImage:"url('./images/services/construction-management.jpg')"},children:[e.jsx("div",{className:"image-fallback",children:e.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2H5a2 2 0 00-2-2z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M8 21v-4a2 2 0 012-2h4a2 2 0 012 2v4",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})}),e.jsxs("div",{className:"service-overlay",children:[e.jsx("h3",{children:"Construction Management"}),e.jsx("p",{children:"End-to-end project execution"})]})]})}),e.jsxs("div",{className:"service-content",children:[e.jsx("h3",{children:"Construction Management"}),e.jsx("p",{children:"Complete project oversight from start to finish with quality assurance and timeline management."})]})]}),e.jsxs("div",{className:"service-item",children:[e.jsx("div",{className:"service-image-container",children:e.jsxs("div",{className:"service-image consultation",style:{backgroundImage:"url('./images/services/consultation.jpg')"},children:[e.jsx("div",{className:"image-fallback",children:e.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M17 21v-2a4 4 0 00-4-4H5a4 4 0 00-4 4v2",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("circle",{cx:"9",cy:"7",r:"4",stroke:"currentColor",strokeWidth:"2"}),e.jsx("path",{d:"M23 21v-2a4 4 0 00-3-3.87m-4-12a4 4 0 010 7.75",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})}),e.jsxs("div",{className:"service-overlay",children:[e.jsx("h3",{children:"Expert Consultation"}),e.jsx("p",{children:"Professional guidance and advice"})]})]})}),e.jsxs("div",{className:"service-content",children:[e.jsx("h3",{children:"Expert Consultation"}),e.jsx("p",{children:"Get professional advice from experienced construction experts for your project needs."})]})]}),e.jsxs("div",{className:"service-item",children:[e.jsx("div",{className:"service-image-container",children:e.jsxs("div",{className:"service-image maintenance",style:{backgroundImage:"url('./images/services/maintenance.jpg')"},children:[e.jsx("div",{className:"image-fallback",children:e.jsx("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M14.7 6.3a1 1 0 000 1.4l1.6 1.6a1 1 0 001.4 0l3.77-3.77a6 6 0 01-7.94 7.94l-6.91 6.91a2.12 2.12 0 01-3-3l6.91-6.91a6 6 0 017.94-7.94l-3.76 3.76z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),e.jsxs("div",{className:"service-overlay",children:[e.jsx("h3",{children:"Maintenance & Support"}),e.jsx("p",{children:"Ongoing project support"})]})]})}),e.jsxs("div",{className:"service-content",children:[e.jsx("h3",{children:"Maintenance & Support"}),e.jsx("p",{children:"Comprehensive maintenance services and ongoing support for your construction projects."})]})]})]})]}),e.jsxs("section",{className:"team-section",id:"team",role:"region","aria-label":"Team Section",children:[e.jsx("h2",{children:"Our Expert Team"}),e.jsxs("div",{className:"team-grid",children:[e.jsxs("div",{className:"team-member",children:[e.jsx("div",{className:"member-image",children:e.jsxs("div",{className:"member-photo architect",children:[e.jsx("div",{className:"role-icon",children:e.jsx("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),e.jsxs("div",{className:"member-overlay",children:[e.jsx("h4",{children:"Senior Architect"}),e.jsx("p",{children:"15+ years experience"})]})]})}),e.jsxs("div",{className:"member-info",children:[e.jsx("h3",{children:"Lead Architect"}),e.jsx("p",{children:"15+ years experience"})]})]}),e.jsxs("div",{className:"team-member",children:[e.jsx("div",{className:"member-image",children:e.jsxs("div",{className:"member-photo engineer",children:[e.jsx("div",{className:"role-icon",children:e.jsx("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M14.7 6.3a1 1 0 000 1.4l1.6 1.6a1 1 0 001.4 0l3.77-3.77a6 6 0 01-7.94 7.94l-6.91 6.91a2.12 2.12 0 01-3-3l6.91-6.91a6 6 0 017.94-7.94l-3.76 3.76z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),e.jsxs("div",{className:"member-overlay",children:[e.jsx("h4",{children:"Structural Engineer"}),e.jsx("p",{children:"20+ years experience"})]})]})}),e.jsxs("div",{className:"member-info",children:[e.jsx("h3",{children:"Senior Engineer"}),e.jsx("p",{children:"20+ years experience"})]})]}),e.jsxs("div",{className:"team-member",children:[e.jsx("div",{className:"member-image",children:e.jsxs("div",{className:"member-photo manager",children:[e.jsx("div",{className:"role-icon",children:e.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M12 2a10 10 0 100 20 10 10 0 000-20z",stroke:"currentColor",strokeWidth:"2"})]})}),e.jsxs("div",{className:"member-overlay",children:[e.jsx("h4",{children:"Project Manager"}),e.jsx("p",{children:"12+ years experience"})]})]})}),e.jsxs("div",{className:"member-info",children:[e.jsx("h3",{children:"Project Manager"}),e.jsx("p",{children:"12+ years experience"})]})]})]})]}),e.jsxs("section",{className:"contact",id:"contact",role:"region","aria-label":"Contact Section",children:[e.jsx("h2",{children:"Contact Us"}),e.jsxs("form",{onSubmit:b=>{b.preventDefault(),s.success("Thank you for reaching out! We will get back to you soon."),b.target.reset()},children:[e.jsx("input",{type:"text",name:"name",placeholder:"Your Name",required:!0,"aria-label":"Your Name"}),e.jsx("input",{type:"email",name:"email",placeholder:"Your Email",required:!0,"aria-label":"Your Email"}),e.jsx("textarea",{name:"message",placeholder:"Your Message",required:!0,"aria-label":"Your Message"}),e.jsx("button",{type:"submit",children:"Send Message"})]})]}),e.jsxs("footer",{children:[" ",new Date().getFullYear()," BuildHub. All rights reserved."]})]})}function W6(){const[t,s]=N.useState(!1),[a,r]=N.useState(null);return N.useEffect(()=>{const o=()=>{s(!0),a&&clearTimeout(a);const l=setTimeout(()=>{s(!1)},1500);r(l)};return window.addEventListener("beforeunload",o),()=>{a&&clearTimeout(a),window.removeEventListener("beforeunload",o)}},[a]),e.jsx(a1,{children:e.jsxs(R_,{children:[e.jsx(V6,{children:e.jsxs(h_,{children:[e.jsx(lr,{path:"/",element:e.jsx($6,{})}),e.jsx(lr,{path:"/register",element:e.jsx(sB,{})}),e.jsx(lr,{path:"/login",element:e.jsx(rB,{})}),e.jsx(lr,{path:"/homeowner-dashboard",element:e.jsx(Qb,{children:e.jsx(MF,{})})}),e.jsx(lr,{path:"/contractor-dashboard",element:e.jsx(D6,{children:e.jsx(u6,{})})}),e.jsx(lr,{path:"/architect-dashboard",element:e.jsx(Tb,{children:e.jsx(Lb,{})})}),e.jsx(lr,{path:"/architect-dashboard-old",element:e.jsx(Tb,{children:e.jsx(Lb,{})})}),e.jsx(lr,{path:"/homeowner/request",element:e.jsx(N6,{})}),e.jsx(lr,{path:"/homeowner/profile",element:e.jsx(Qb,{children:e.jsx(n6,{})})}),e.jsx(lr,{path:"/architect/upload",element:e.jsx(C6,{})}),e.jsx(lr,{path:"/architect/upload/simple",element:e.jsx(K6,{})}),e.jsx(lr,{path:"/contractor/estimate",element:e.jsx(S6,{})}),e.jsx(lr,{path:"/admin/material/new",element:e.jsx(k6,{})}),e.jsx(lr,{path:"/authorized-redirect-uris",element:e.jsx(w6,{})}),e.jsx(lr,{path:"/admin",element:e.jsx(F6,{})}),e.jsx(lr,{path:"/admin-dashboard",element:e.jsx(R6,{children:e.jsx(E6,{})})}),e.jsx(lr,{path:"/forgot-password",element:e.jsx(iB,{})})]})}),e.jsx(q6,{})]})})}if(typeof window<"u"&&!window.Razorpay){const t=document.createElement("script");t.src="https://checkout.razorpay.com/v1/checkout.js",t.async=!0,t.onerror=function(){console.error("Failed to load Razorpay SDK")},document.head.appendChild(t),window._razorpayLoading=!0}jj.createRoot(document.getElementById("root")).render(e.jsx(Ar.StrictMode,{children:e.jsx(a1,{children:e.jsx(W6,{})})}));export{Ca as _,Y6 as c,Ib as g};
