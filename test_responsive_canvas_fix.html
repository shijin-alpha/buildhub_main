<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Responsive Canvas Fix Test</title>
    <style>
        body {
            margin: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #f8f9fa;
        }
        
        .house-plan-drawer {
            display: flex;
            flex-direction: column;
            height: 100vh;
            background: #f8f9fa;
            overflow: hidden;
        }
        
        .drawer-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem 1.5rem;
            background: linear-gradient(135deg, #1976d2 0%, #1565c0 100%);
            color: white;
            box-shadow: 0 2px 8px rgba(0,0,0,0.15);
            flex-shrink: 0;
            z-index: 10;
            flex-wrap: wrap;
            gap: 1rem;
            min-height: 100px;
        }
        
        .plan-info {
            display: flex;
            align-items: center;
            gap: 1.5rem;
            flex: 1;
            min-width: 350px;
        }
        
        .plan-name-input {
            padding: 0.75rem 1rem;
            border: 2px solid rgba(255,255,255,0.3);
            border-radius: 8px;
            font-size: 1.1rem;
            font-weight: 500;
            min-width: 250px;
            background: rgba(255,255,255,0.95);
            transition: all 0.2s;
        }
        
        .plot-dimensions {
            display: flex;
            gap: 1.5rem;
            align-items: center;
        }
        
        .plot-dimensions label {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            font-size: 1rem;
            color: rgba(255,255,255,0.9);
            font-weight: 500;
        }
        
        .plot-dimensions input {
            width: 80px;
            padding: 0.6rem;
            border: 2px solid rgba(255,255,255,0.3);
            border-radius: 6px;
            text-align: center;
            background: rgba(255,255,255,0.95);
            font-weight: 500;
            font-size: 1rem;
        }
        
        .plan-stats-header {
            display: flex;
            align-items: center;
            gap: 1.5rem;
            flex: 2;
            justify-content: center;
            flex-wrap: wrap;
        }
        
        .stat-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            min-width: 80px;
        }
        
        .stat-label {
            font-size: 0.8rem;
            opacity: 0.8;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .stat-value {
            font-size: 1rem;
            font-weight: 600;
            margin-top: 4px;
        }
        
        .header-notes {
            flex: 1;
            min-width: 250px;
        }
        
        .notes-input {
            width: 100%;
            padding: 0.75rem 1rem;
            border: 2px solid rgba(255,255,255,0.3);
            border-radius: 8px;
            font-size: 1rem;
            background: rgba(255,255,255,0.95);
            transition: all 0.2s;
        }
        
        .drawer-actions {
            display: flex;
            gap: 0.75rem;
        }
        
        .save-btn, .cancel-btn {
            padding: 0.6rem 1.2rem;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 600;
            font-size: 0.9rem;
            transition: all 0.2s;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .save-btn {
            background: #4caf50;
            color: white;
        }
        
        .cancel-btn {
            background: rgba(255,255,255,0.2);
            color: white;
            border: 2px solid rgba(255,255,255,0.3);
        }
        
        .drawer-content {
            display: flex;
            flex: 1;
            overflow: hidden;
            min-height: 0;
            height: calc(100vh - 120px);
        }
        
        .tools-panel {
            width: 380px;
            background: white;
            border-right: 2px solid #e3f2fd;
            overflow-y: auto;
            padding: 1rem;
            flex-shrink: 0;
            box-shadow: 2px 0 8px rgba(0,0,0,0.1);
            height: 100%;
        }
        
        .canvas-container {
            flex: 1;
            display: flex;
            flex-direction: column;
            background: #fafafa;
            overflow: hidden;
            position: relative;
            min-height: 0;
            height: 100%;
        }
        
        .canvas-toolbar {
            padding: 0.75rem 1rem;
            background: white;
            border-bottom: 1px solid #e0e0e0;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-shrink: 0;
            z-index: 5;
        }
        
        .canvas-info {
            font-size: 0.9rem;
            color: #666;
            display: flex;
            gap: 1rem;
        }
        
        .canvas-wrapper {
            flex: 1;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden;
            padding: 1rem;
            min-height: 0;
            position: relative;
            background: #fafafa;
        }
        
        .plan-canvas {
            border: 2px solid #ddd;
            background: white;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            transition: box-shadow 0.2s;
            display: block;
            z-index: 1;
        }
        
        .plan-canvas:hover {
            box-shadow: 0 6px 20px rgba(0,0,0,0.15);
        }
        
        .resize-info {
            position: absolute;
            top: 10px;
            right: 10px;
            background: rgba(0,0,0,0.7);
            color: white;
            padding: 0.5rem;
            border-radius: 4px;
            font-size: 0.8rem;
            z-index: 10;
        }
    </style>
</head>
<body>
    <div class="house-plan-drawer">
        <div class="drawer-header">
            <div class="plan-info">
                <input type="text" placeholder="Plan Name" value="Modern Family Home" class="plan-name-input">
                <div class="plot-dimensions">
                    <label>
                        Width:
                        <input type="number" value="40" min="10" max="100"> ft
                    </label>
                    <label>
                        Height:
                        <input type="number" value="30" min="10" max="100"> ft
                    </label>
                </div>
            </div>
            
            <div class="plan-stats-header">
                <div class="stat-item">
                    <span class="stat-label">Plot:</span>
                    <span class="stat-value">1200 sq ft</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">Layout:</span>
                    <span class="stat-value">850 sq ft</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">Construction:</span>
                    <span class="stat-value">920 sq ft</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">Coverage:</span>
                    <span class="stat-value">76.7%</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">Rooms:</span>
                    <span class="stat-value">5</span>
                </div>
            </div>

            <div class="header-notes">
                <input type="text" placeholder="Add notes..." value="Modern design with open floor plan" class="notes-input">
            </div>

            <div class="drawer-actions">
                <button class="save-btn">Save Plan</button>
                <button class="cancel-btn">Cancel</button>
            </div>
        </div>

        <div class="drawer-content">
            <div class="tools-panel">
                <h4>Room Templates</h4>
                <p>Tools panel with room templates, measurement controls, and room properties would be here.</p>
                <div style="height: 400px; background: #f0f0f0; border-radius: 8px; display: flex; align-items: center; justify-content: center; color: #666;">
                    Tools Panel Content
                </div>
            </div>

            <div class="canvas-container">
                <div class="canvas-toolbar">
                    <div class="canvas-info">
                        <span>Plot: 40' × 30'</span>
                        <span>Rooms: 5</span>
                        <span>Scale: 1:1.2</span>
                    </div>
                </div>
                <div class="canvas-wrapper">
                    <div class="resize-info" id="canvasInfo">
                        Canvas: Loading...
                    </div>
                    <canvas id="planCanvas" class="plan-canvas"></canvas>
                </div>
            </div>
        </div>
    </div>

    <script>
        function initializeCanvas() {
            const canvas = document.getElementById('planCanvas');
            const container = canvas.parentElement;
            const info = document.getElementById('canvasInfo');
            
            function updateCanvasSize() {
                // Get container dimensions
                const containerWidth = container.clientWidth - 32; // Account for padding
                const containerHeight = container.clientHeight - 32;
                
                // Calculate optimal canvas size while maintaining aspect ratio
                const maxWidth = Math.min(containerWidth, 1200);
                const maxHeight = Math.min(containerHeight, 800);
                
                // Set canvas dimensions
                canvas.width = maxWidth;
                canvas.height = maxHeight;
                
                // Update info display
                info.textContent = `Canvas: ${canvas.width}×${canvas.height} | Container: ${containerWidth}×${containerHeight}`;
                
                // Draw sample content
                drawSamplePlan();
            }
            
            function drawSamplePlan() {
                const ctx = canvas.getContext('2d');
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                
                // Draw grid
                ctx.strokeStyle = '#e8e8e8';
                ctx.lineWidth = 0.5;
                const gridSize = 20;
                
                for (let x = 0; x <= canvas.width; x += gridSize) {
                    ctx.beginPath();
                    ctx.moveTo(x, 0);
                    ctx.lineTo(x, canvas.height);
                    ctx.stroke();
                }
                
                for (let y = 0; y <= canvas.height; y += gridSize) {
                    ctx.beginPath();
                    ctx.moveTo(0, y);
                    ctx.lineTo(canvas.width, y);
                    ctx.stroke();
                }
                
                // Draw plot boundary
                ctx.strokeStyle = '#2c3e50';
                ctx.lineWidth = 3;
                const plotWidth = 800;
                const plotHeight = 600;
                const offsetX = (canvas.width - plotWidth) / 2;
                const offsetY = (canvas.height - plotHeight) / 2;
                
                ctx.strokeRect(offsetX, offsetY, plotWidth, plotHeight);
                
                // Draw sample rooms
                const rooms = [
                    { x: offsetX + 50, y: offsetY + 50, width: 200, height: 150, name: 'Living Room', color: '#e3f2fd' },
                    { x: offsetX + 300, y: offsetY + 50, width: 150, height: 150, name: 'Kitchen', color: '#f3e5f5' },
                    { x: offsetX + 500, y: offsetY + 50, width: 200, height: 120, name: 'Master Bedroom', color: '#e8f5e8' },
                    { x: offsetX + 50, y: offsetY + 250, width: 120, height: 100, name: 'Bathroom', color: '#fff3e0' },
                    { x: offsetX + 200, y: offsetY + 250, width: 150, height: 100, name: 'Bedroom 2', color: '#fce4ec' }
                ];
                
                rooms.forEach(room => {
                    // Room background
                    ctx.fillStyle = room.color;
                    ctx.fillRect(room.x, room.y, room.width, room.height);
                    
                    // Room border
                    ctx.strokeStyle = '#666';
                    ctx.lineWidth = 1;
                    ctx.strokeRect(room.x, room.y, room.width, room.height);
                    
                    // Room label
                    ctx.fillStyle = '#333';
                    ctx.font = 'bold 12px Arial';
                    ctx.textAlign = 'center';
                    ctx.fillText(room.name, room.x + room.width/2, room.y + room.height/2);
                });
                
                // Add title
                ctx.fillStyle = '#1976d2';
                ctx.font = 'bold 16px Arial';
                ctx.textAlign = 'center';
                ctx.fillText('Responsive Canvas Test - Resize Window to See Changes', canvas.width/2, 30);
            }
            
            // Initialize
            updateCanvasSize();
            
            // Handle window resize
            window.addEventListener('resize', updateCanvasSize);
            
            // Update every second to show real-time changes
            setInterval(updateCanvasSize, 1000);
        }
        
        // Initialize when page loads
        window.addEventListener('load', initializeCanvas);
    </script>
</body>
</html>